//>>built
(function(e,t){var b,n=function(){},u=function(f){for(var r in f)return 0;return 1},q={}.toString,s=function(f){return"[object Function]"==q.call(f)},h=function(f){return"[object String]"==q.call(f)},c=function(f){return"[object Array]"==q.call(f)},a=function(f,r){if(f)for(var k=0;k<f.length;)r(f[k++])},d=function(f,r){for(var k in r)f[k]=r[k];return f},g=function(f,r){return d(Error(f),{src:"dojoLoader",info:r})},m=1,w=function(){return"_"+m++},A=function(f,r,k){return ja(f,r,k,0,A)},x=this,C=x.document,
E=C&&C.createElement("DiV"),F=A.has=function(f){return s(y[f])?y[f]=y[f](x,C,E):y[f]},y=F.cache=t.hasCache;F.add=function(f,r,k,l){(void 0===y[f]||l)&&(y[f]=r);return k&&F(f)};F.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);F("host-webworker")&&(d(t.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1}),t.loaderPatch={injectUrl:function(f,r){try{importScripts(f),r()}catch(k){console.error(k)}}});
for(var I in e.has)F.add(I,e.has[I],0,1);A.async=1;var L=new Function("return eval(arguments[0]);");A.eval=function(f,r){return L(f+"\r\n//# sourceURL\x3d"+r)};var D={},G=A.signal=function(f,r){var k=D[f];a(k&&k.slice(0),function(f){f.apply(null,c(r)?r:[r])})},N=A.on=function(f,r){var k=D[f]||(D[f]=[]);k.push(r);return{remove:function(){for(var f=0;f<k.length;f++)if(k[f]===r){k.splice(f,1);break}}}},P=[],K={},R=[],M={},T=A.map={},U=[],V={},W="",v={},O={};I={};var z=0,l=function(f){var r,k,l,B;for(r in O)k=
O[r],(l=r.match(/^url\:(.+)/))?v["url:"+Ja(l[1],f)]=k:"*now"==r?B=k:"*noref"!=r&&(l=ya(r,f,!0),v[l.mid]=v["url:"+l.url]=k);B&&B(fa(f));O={}},f=function(f){return f.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(f){return"\\"+f})},r=function(r,k){k.splice(0,k.length);for(var l in r)k.push([l,r[l],RegExp("^"+f(l)+"(/|$)"),l.length]);k.sort(function(f,r){return r[3]-f[3]});return k},k=function(r,k){a(r,function(r){k.push([h(r[0])?RegExp("^"+f(r[0])+"$"):r[0],r[1]])})},B=function(f){var r=f.name;r||
(r=f,f={name:r});f=d({main:"main"},f);f.location=f.location?f.location:r;f.packageMap&&(T[r]=f.packageMap);f.main.indexOf("./")||(f.main=f.main.substring(2));M[r]=f},H=[],J=function(f,v,J){for(var Q in f){"waitSeconds"==Q&&(A.waitms=1E3*(f[Q]||0));"cacheBust"==Q&&(W=f[Q]?h(f[Q])?f[Q]:(new Date).getTime()+"":"");if("baseUrl"==Q||"combo"==Q)A[Q]=f[Q];f[Q]!==y&&(A.rawConfig[Q]=f[Q],"has"!=Q&&F.add("config-"+Q,f[Q],0,v))}A.baseUrl||(A.baseUrl="./");/\/$/.test(A.baseUrl)||(A.baseUrl+="/");for(Q in f.has)F.add(Q,
f.has[Q],0,v);a(f.packages,B);for(var z in f.packagePaths)a(f.packagePaths[z],function(f){var r=z+"/"+f;h(f)&&(f={name:f});f.location=r;B(f)});r(d(T,f.map),U);a(U,function(f){f[1]=r(f[1],[]);"*"==f[0]&&(U.star=f)});r(d(K,f.paths),R);k(f.aliases,P);if(v)H.push({config:f.config});else for(Q in f.config)v=ra(Q,J),v.config=d(v.config||{},f.config[Q]);f.cache&&(l(),O=f.cache,f.cache["*noref"]&&l());G("config",[f,A.rawConfig])},Q=C.getElementsByTagName("script");b=0;for(var S,X,aa;b<Q.length;){S=Q[b++];
if((X=S.getAttribute("src"))&&(aa=X.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))X=aa[3]||"",t.baseUrl=t.baseUrl||X,z=S;if(X=S.getAttribute("data-dojo-config")||S.getAttribute("djConfig"))I=A.eval("({ "+X+" })","data-dojo-config"),z=S}A.rawConfig={};J(t,1);J(e,1);J(I,1);var ka=function(f){da(function(){a(f.deps,Ka)})},ja=function(f,r,k,l,B){var v;if(h(f)){if((v=ra(f,l,!0))&&v.executed)return v.result;throw g("undefinedModule",f);}c(f)||(J(f,0,l),f=r,r=k);if(c(f))if(f.length){k="require*"+w();for(var H,Q=
[],a=0;a<f.length;)H=f[a++],Q.push(ra(H,l));v=d(ma("",k,0,""),{injected:2,deps:Q,def:r||n,require:l?l.require:A,gc:1});V[v.mid]=v;ka(v);var z=Y&&0!="sync";da(function(){na(v,z)});v.executed||ca.push(v);Z()}else r&&r();return B},fa=function(f){if(!f)return A;var r=f.require;r||(r=function(k,l,B){return ja(k,l,B,f,r)},f.require=d(r,A),r.module=f,r.toUrl=function(r){return Ja(r,f)},r.toAbsMid=function(r){return Fa(r,f)});return r},ca=[],$=[],ga={},la=function(f){f.injected=1;ga[f.mid]=1;f.url&&(ga[f.url]=
f.pack||1);Pa()},ea=function(f){f.injected=2;delete ga[f.mid];f.url&&delete ga[f.url];u(ga)&&Qa()},za=A.idle=function(){return!$.length&&u(ga)&&!ca.length&&!Y},oa=function(f,r){if(r)for(var k=0;k<r.length;k++)if(r[k][2].test(f))return r[k];return 0},sa=function(f){var r=[],k,l;for(f=f.replace(/\\/g,"/").split("/");f.length;)k=f.shift(),".."==k&&r.length&&".."!=l?(r.pop(),l=r[r.length-1]):"."!=k&&r.push(l=k);return r.join("/")},ma=function(f,r,k,l){return{pid:f,mid:r,pack:k,url:l,executed:0,def:0}},
pa=function(f,r,k,l,B,v,H,J,Q){var z,S,b,c;c=/^\./.test(f);if(/(^\/)|(\:)|(\.js$)/.test(f)||c&&!r)return ma(0,f,0,f);f=sa(c?r.mid+"/../"+f:f);if(/^\./.test(f))throw g("irrationalPath",f);r&&(b=oa(r.mid,v));(b=(b=b||v.star)&&oa(f,b[1]))&&(f=b[1]+f.substring(b[3]));r=(aa=f.match(/^([^\/]+)(\/(.+))?$/))?aa[1]:"";(z=k[r])?f=r+"/"+(S=aa[3]||z.main):r="";var d=0;a(J,function(r){var k=f.match(r[0]);k&&0<k.length&&(d=s(r[1])?f.replace(r[0],r[1]):r[1])});if(d)return pa(d,0,k,l,B,v,H,J,Q);if(k=l[f])return Q?
ma(k.pid,k.mid,k.pack,k.url):l[f];l=(b=oa(f,H))?b[1]+f.substring(b[3]):r?z.location+"/"+S:F("config-tlmSiblingOfDojo")?"../"+f:f;/(^\/)|(\:)/.test(l)||(l=B+l);return ma(r,f,z,sa(l+".js"))},ya=function(f,r,k){return pa(f,r,M,V,A.baseUrl,k?[]:U,k?[]:R,k?[]:P)},Da=function(f,r,k){return f.normalize?f.normalize(r,function(f){return Fa(f,k)}):Fa(r,k)},Ea=0,ra=function(f,r,k){var l,B;(l=f.match(/^(.+?)\!(.*)$/))?(B=ra(l[1],r,k),5===B.executed&&!B.load&&ha(B),B.load?(l=Da(B,l[2],r),f=B.mid+"!"+(B.dynamic?
++Ea+"!":"")+l):(l=l[2],f=B.mid+"!"+ ++Ea+"!waitingForPlugin"),f={plugin:B,mid:f,req:fa(r),prid:l}):f=ya(f,r);return V[f.mid]||!k&&(V[f.mid]=f)},Fa=A.toAbsMid=function(f,r){return ya(f,r).mid},Ja=A.toUrl=function(f,r){var k=ya(f+"/x",r),l=k.url;return ta(0===k.pid?f:l.substring(0,l.length-5))},La={injected:2,executed:5,def:3,result:3},Q=function(f){return V[f]=d({mid:f},La)},Ma=Q("require"),lb=Q("exports"),ua=Q("module"),Aa={},Ba=0,ha=function(f){var r=f.result;f.dynamic=r.dynamic;f.normalize=r.normalize;
f.load=r.load;return f},ba=function(f){var r={};a(f.loadQ,function(k){var l=Da(f,k.prid,k.req.module),B=f.dynamic?k.mid.replace(/waitingForPlugin$/,l):f.mid+"!"+l,l=d(d({},k),{mid:B,prid:l,injected:0});V[B]||va(V[B]=l);r[k.mid]=V[B];ea(k);delete V[k.mid]});f.loadQ=0;var k=function(f){for(var k=f.deps||[],l=0;l<k.length;l++)(f=r[k[l].mid])&&(k[l]=f)},l;for(l in V)k(V[l]);a(ca,k)},ia=function(f){A.trace("loader-finish-exec",[f.mid]);f.executed=5;f.defOrder=Ba++;f.loadQ&&(ha(f),ba(f));for(b=0;b<ca.length;)ca[b]===
f?ca.splice(b,1):b++;/^require\*/.test(f.mid)&&delete V[f.mid]},Ca=[],na=function(f,r){if(4===f.executed)return A.trace("loader-circular-dependency",[Ca.concat(f.mid).join("-\x3e")]),!f.def||r?Aa:f.cjs&&f.cjs.exports;if(!f.executed){if(!f.def)return Aa;var k=f.mid,l=f.deps||[],B,v=[],H=0;for(f.executed=4;B=l[H++];){B=B===Ma?fa(f):B===lb?f.cjs.exports:B===ua?f.cjs:na(B,r);if(B===Aa)return f.executed=0,A.trace("loader-exec-module",["abort",k]),Aa;v.push(B)}A.trace("loader-run-factory",[f.mid]);k=f.def;
v=s(k)?k.apply(null,v):k;f.result=void 0===v&&f.cjs?f.cjs.exports:v;ia(f)}return f.result},Y=0,da=function(f){try{Y++,f()}finally{Y--}za()&&G("idle",[])},Z=function(){Y||da(function(){for(var f,r,k=0;k<ca.length;)f=Ba,r=ca[k],na(r),f!=Ba?k=0:k++})};void 0===F("dojo-loader-eval-hint-url")&&F.add("dojo-loader-eval-hint-url",1);var ta="function"==typeof e.fixupUrl?e.fixupUrl:function(f){f+="";return f+(W?(/\?/.test(f)?"\x26":"?")+W:"")},va=function(f){var r=f.plugin;5===r.executed&&!r.load&&ha(r);var k=
function(r){f.result=r;ea(f);ia(f);Z()};r.load?r.load(f.prid,f.req,k):r.loadQ?r.loadQ.push(f):(r.loadQ=[f],ca.unshift(r),Ka(r))},qa=0,wa=0,Ga=0,Ua=function(f,r){F("config-stripStrict")&&(f=f.replace(/"use strict"/g,""));Ga=1;f===qa?qa.call(null):A.eval(f,F("dojo-loader-eval-hint-url")?r.url:r.mid);Ga=0},Ka=function(f){var r=f.mid,k=f.url;if(!f.executed&&!f.injected&&!(ga[r]||f.url&&(f.pack&&ga[f.url]===f.pack||1==ga[f.url])))if(la(f),f.plugin)va(f);else{var l=function(){Va(f);if(2!==f.injected){if(F("dojo-enforceDefine")){G("error",
g("noDefine",f));return}ea(f);d(f,La);A.trace("loader-define-nonmodule",[f.url])}Z()};(qa=v[r]||v["url:"+f.url])?(A.trace("loader-inject",["cache",f.mid,k]),Ua(qa,f),l()):(A.trace("loader-inject",["script",f.mid,k]),wa=f,A.injectUrl(ta(k),l,f),wa=0)}},Ha=function(f,r,k){A.trace("loader-define-module",[f.mid,r]);if(2===f.injected)return G("error",g("multipleDefine",f)),f;d(f,{deps:r,def:k,cjs:{id:f.mid,uri:f.url,exports:f.result={},setExports:function(r){f.cjs.exports=r},config:function(){return f.config}}});
for(var l=0;r[l];l++)r[l]=ra(r[l],f);ea(f);!s(k)&&!r.length&&(f.result=k,ia(f));return f},Va=function(f,r){for(var k=[],B,v;$.length;)v=$.shift(),r&&(v[0]=r.shift()),B=v[0]&&ra(v[0])||f,k.push([B,v[1],v[2]]);l(f);a(k,function(f){ka(Ha.apply(null,f))})},Qa=n,Pa=n;F.add("ie-event-behavior",C.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Ia=function(f,r,k,l){if(F("ie-event-behavior"))return f.attachEvent(k,l),function(){f.detachEvent(k,
l)};f.addEventListener(r,l,!1);return function(){f.removeEventListener(r,l,!1)}},Wa=Ia(window,"load","onload",function(){A.pageLoaded=1;"complete"!=C.readyState&&(C.readyState="complete");Wa()}),Q=C.getElementsByTagName("script");for(b=0;!z;)if(!/^dojo/.test((S=Q[b++])&&S.type))z=S;A.injectUrl=function(f,r,k){k=k.node=C.createElement("script");var l=Ia(k,"load","onreadystatechange",function(f){f=f||window.event;var k=f.target||f.srcElement;if("load"===f.type||/complete|loaded/.test(k.readyState))l(),
B(),r&&r()}),B=Ia(k,"error","onerror",function(r){l();B();G("error",g("scriptError",[f,r]))});k.type="text/javascript";k.charset="utf-8";k.src=f;z.parentNode.insertBefore(k,z);return k};A.log=n;A.trace=n;S=function(f,r,k){var B=arguments.length,v=["require","exports","module"],H=[0,f,r];1==B?H=[0,s(f)?v:[],f]:2==B&&h(f)?H=[f,s(r)?v:[],r]:3==B&&(H=[f,r,k]);A.trace("loader-define",H.slice(0,2));if((B=H[0]&&ra(H[0]))&&!ga[B.mid])ka(Ha(B,H[1],H[2]));else if(!F("ie-event-behavior")||Ga)$.push(H);else{B=
B||wa;if(!B)for(f in ga)if((v=V[f])&&v.node&&"interactive"===v.node.readyState){B=v;break}B?(l(B),ka(Ha(B,H[1],H[2]))):G("error",g("ieDefineFailed",H[0]));Z()}};S.amd={vendor:"dojotoolkit.org"};d(d(A,t.loaderPatch),e.loaderPatch);N("error",function(f){try{if(console.error(f),f instanceof Error)for(var r in f);}catch(k){}});d(A,{uid:w,cache:v,packs:M});x.define||(x.define=S,x.require=A,a(H,function(f){J(f)}),N=I.deps||e.deps||t.deps,I=I.callback||e.callback||t.callback,A.boot=N||I?[N||[],I]:0)})(this.dojoConfig||
this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../esri",name:"esri"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"}]});
require({cache:{"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(e,t,b,n){e={streets:{title:n.basemaps.streets,thumbnailUrl:e.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:n.basemaps.satellite,thumbnailUrl:e.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},
hybrid:{title:n.basemaps.hybrid,thumbnailUrl:e.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:n.basemaps.terrain,thumbnailUrl:e.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},
{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:n.basemaps.topo,thumbnailUrl:e.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:n.basemaps.gray,thumbnailUrl:e.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},
{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:n.basemaps["dark-gray"],thumbnailUrl:e.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:n.basemaps.oceans,
thumbnailUrl:e.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:n.basemaps["national-geographic"],thumbnailUrl:e.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},
osm:{title:n.basemaps.osm,thumbnailUrl:e.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]}};t("extend-esri")&&(b.basemaps=e);return e})},"dojo/has":function(){define(["require","module"],function(e,t){var b=e.has||function(){};b.add("dom-addeventlistener",!!document.addEventListener);b.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);b.add("touch-events",
"ontouchstart"in document);b.add("pointer-events","onpointerdown"in document);b.add("MSPointer","msMaxTouchPoints"in navigator);b.add("device-width",screen.availWidth||innerWidth);var n=document.createElement("form");b.add("dom-attributes-explicit",0==n.attributes.length);b.add("dom-attributes-specified-flag",0<n.attributes.length&&40>n.attributes.length);b.clearElement=function(b){b.innerHTML="";return b};b.normalize=function(n,q){var s=n.match(/[\?:]|[^:\?]*/g),h=0,c=function(a){var d=s[h++];if(":"==
d)return 0;if("?"==s[h++]){if(!a&&b(d))return c();c(!0);return c(a)}return d||0};return(n=c())&&q(n)};b.load=function(b,q,s){b?q([b],s):s()};return b})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(e,t,b){var n=window.location,u=n.pathname,u={version:"3.15",_appBaseUrl:n.protocol+"//"+n.host+u.substring(0,u.lastIndexOf(u.split("/")[u.split("/").length-1]))};t.noGlobals||(window.esri=u);e.isAsync||b.add("extend-esri",1);(u.dijit=u.dijit||{})._arcgisUrl=
("file:"===n.protocol?"http:":n.protocol)+"//www.arcgis.com/sharing/rest";return u})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(e,t,b,n){var u;e=function(){return this}();var q={},s={},h={config:t,global:e,dijit:q,dojox:s},q={dojo:["dojo",h],dijit:["dijit",q],dojox:["dojox",s]};n=b.map&&b.map[n.id.match(/[^\/]+/)[0]];for(u in n)q[u]?q[u][0]=n[u]:q[u]=[n[u],{}];for(u in q)n=q[u],n[1]._scopeName=n[0],t.noGlobals||(e[n[0]]=n[1]);h.scopeMap=q;h.baseUrl=h.config.baseUrl=
b.baseUrl;h.isAsync=b.async;h.locale=t.locale;t="$Rev: f4fef70 $".match(/[0-9a-f]{7,}/);h.version={major:1,minor:10,patch:4,flag:"",revision:t?t[0]:NaN,toString:function(){var a=h.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(h);h.exit=function(){};"undefined"!=typeof console||(console={});b="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");
var c;for(t=0;c=b[t++];)console[c]||function(){var a=c+"";console[a]="log"in console?function(){var b=Array.prototype.slice.call(arguments);b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();h.deprecated=h.experimental=function(){};h._hasResource={};return h})},"dojo/_base/config":function(){define(["../has","require"],function(e,t){var b={},n=t.rawConfig,u;for(u in n)b[u]=n[u];if(!b.locale&&"undefined"!=typeof navigator&&(n=navigator.language||navigator.userLanguage))b.locale=
n.toLowerCase();return b})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(e,t,b,n,u,q,s,h,c){b.add("dojo-preload-i18n-Api",1);s=e.i18n={};var a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,d=function(a,b,c,d){var g=[c+d];b=b.split("-");for(var x="",m=0;m<b.length;m++)if(x+=(x?"-":"")+b[m],!a||a[x])g.push(c+x+"/"+d),g.specificity=x;return g},g={},m=function(a,b,c){c=c?c.toLowerCase():e.locale;a=a.replace(/\./g,
"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},w=e.getL10nName=function(a,b,d){return c.id+"!"+m(a,b,d)},A=function(a,b,c,x,m,A){a([b],function(C){var y=q.clone(C.root||C.ROOT),v=d(!C._v1x&&C,m,c,x);a(v,function(){for(var a=1;a<v.length;a++)y=q.mixin(q.clone(y),arguments[a]);g[b+"/"+m]=y;y.$locale=v.specificity;A()})})},x=function(a){var b=u.extraLocale||[],b=q.isArray(b)?b:[b];b.push(a);return b},C=function(c,d,m){if(b("dojo-preload-i18n-Api")){var C=c.split("*"),
w="preload"==C[1];w&&(g[c]||(g[c]=1,L(C[2],h.parse(C[3]),1,d)),m(1));if(!(C=w))y&&I.push([c,d,m]),C=y;if(C)return}c=a.exec(c);var E=c[1]+"/",G=c[5]||c[4],s=E+G,C=(c=c[5]&&c[4])||e.locale||"",v=s+"/"+C;c=c?[C]:x(C);var O=c.length,z=function(){--O||m(q.delegate(g[v]))};n.forEach(c,function(l){var f=s+"/"+l;b("dojo-preload-i18n-Api")&&D(f);g[f]?z():A(d,s,E,G,l,z)})};if(b("dojo-unit-tests"))var E=s.unitTests=[];b("dojo-preload-i18n-Api");var F=s.normalizeLocale=function(a){a=a?a.toLowerCase():e.locale;
return"root"==a?"ROOT":a},y=0,I=[],L=s._preloadLocalizations=function(a,b,c,d){function x(v,a){d([v],a)}function m(v,a){for(var z=v.split("-");z.length;){if(a(z.join("-")))return;z.pop()}a("ROOT")}function A(){for(--y;!y&&I.length;)C.apply(null,I.shift())}function w(v){v=F(v);m(v,function(c){if(0<=n.indexOf(b,c)){var z=a.replace(/\./g,"/")+"_"+c;y++;x(z,function(l){for(var f in l){var r=l[f],k=f.match(/(.+)\/([^\/]+)$/),B;if(k){B=k[2];k=k[1]+"/";r._localized=r._localized||{};var H;if("ROOT"===c){var J=
H=r._localized;delete r._localized;J.root=r;g[t.toAbsMid(f)]=J}else H=r._localized,g[t.toAbsMid(k+B+"/"+c)]=r;c!==v&&function(f,r,k,l){var B=[],H=[];m(v,function(k){l[k]&&(B.push(t.toAbsMid(f+k+"/"+r)),H.push(t.toAbsMid(f+r+"/"+k)))});B.length?(y++,d(B,function(){for(var l=0;l<B.length;l++)k=q.mixin(q.clone(k),arguments[l]),g[H[l]]=k;g[t.toAbsMid(f+r+"/"+v)]=q.clone(k);A()})):g[t.toAbsMid(f+r+"/"+v)]=k}(k,B,r,H)}}A()});return!0}return!1})}d=d||t;w();n.forEach(e.config.extraLocale,w)},D=function(){},
G={},N=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),D=function(a){for(var b,
c=a.split("/"),d=e.global[c[0]],x=1;d&&x<c.length-1;d=d[c[x++]]);d&&((b=d[c[x]])||(b=d[c[x].replace(/-/g,"_")]),b&&(g[a]=b));return b};s.getLocalization=function(a,b,c){var d;a=m(a,b,c);C(a,t,function(a){d=a});return d};b("dojo-unit-tests")&&E.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=N("{prop:1}",D,"nonsense",G);a.is({prop:1},b);a.is(void 0,b[1]);b=N("({prop:1})",D,"nonsense",G);a.is({prop:1},b);a.is(void 0,b[1]);b=N("{'prop-x':1}",D,"nonsense",G);a.is({"prop-x":1},b);a.is(void 0,
b[1]);b=N("({'prop-x':1})",D,"nonsense",G);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=N("define({'prop-x':1})",D,"nonsense",G);a.is(G,b);a.is({"prop-x":1},G.result);b=N("define('some/module', {'prop-x':1})",D,"nonsense",G);a.is(G,b);a.is({"prop-x":1},G.result);b=N("this is total nonsense and should throw an error",D,"nonsense",G);a.is(b instanceof Error,!0)})});return q.mixin(s,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:C,cache:g,getL10nName:w})})},"dojo/_base/array":function(){define(["./kernel",
"../has","./lang"],function(e,t,b){function n(a){return s[a]=new Function("item","index","array",a)}function u(a){var b=!a;return function(c,m,w){var A=0,x=c&&c.length||0,C;x&&"string"==typeof c&&(c=c.split(""));"string"==typeof m&&(m=s[m]||n(m));if(w)for(;A<x;++A){if(C=!m.call(w,c[A],A,c),a^C)return!C}else for(;A<x;++A)if(C=!m(c[A],A,c),a^C)return!C;return b}}function q(a){var b=1,g=0,m=0;a||(b=g=m=-1);return function(w,A,x,C){if(C&&0<b)return c.lastIndexOf(w,A,x);C=w&&w.length||0;var E=a?C+m:g;
x===h?x=a?g:C+m:0>x?(x=C+x,0>x&&(x=g)):x=x>=C?C+m:x;for(C&&"string"==typeof w&&(w=w.split(""));x!=E;x+=b)if(w[x]==A)return x;return-1}}var s={},h,c={every:u(!1),some:u(!0),indexOf:q(!0),lastIndexOf:q(!1),forEach:function(a,b,c){var m=0,w=a&&a.length||0;w&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=s[b]||n(b));if(c)for(;m<w;++m)b.call(c,a[m],m,a);else for(;m<w;++m)b(a[m],m,a)},map:function(a,b,c,m){var w=0,A=a&&a.length||0;m=new (m||Array)(A);A&&"string"==typeof a&&(a=a.split(""));
"string"==typeof b&&(b=s[b]||n(b));if(c)for(;w<A;++w)m[w]=b.call(c,a[w],w,a);else for(;w<A;++w)m[w]=b(a[w],w,a);return m},filter:function(a,b,c){var m=0,w=a&&a.length||0,A=[],x;w&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=s[b]||n(b));if(c)for(;m<w;++m)x=a[m],b.call(c,x,m,a)&&A.push(x);else for(;m<w;++m)x=a[m],b(x,m,a)&&A.push(x);return A},clearCache:function(){s={}}};b.mixin(e,c);return c})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",
function(){for(var a in{toString:1})return 0;return 1});var b=t("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],n=b.length,u=function(a,b,c){c||(c=a[0]&&e.scopeMap[a[0]]?e.scopeMap[a.shift()][1]:e.global);try{for(var m=0;m<a.length;m++){var w=a[m];if(!(w in c))if(b)c[w]={};else return;c=c[w]}return c}catch(A){}},q=Object.prototype.toString,s=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,
b||0))},h=/\{([^\}]+)\}/g,c={_extraNames:b,_mixin:function(a,c,g){var m,w,A,x={};for(m in c)if(w=c[m],!(m in a)||a[m]!==w&&(!(m in x)||x[m]!==w))a[m]=g?g(w):w;if(t("bug-for-in-skips-shadowed")&&c)for(A=0;A<n;++A)if(m=b[A],w=c[m],!(m in a)||a[m]!==w&&(!(m in x)||x[m]!==w))a[m]=g?g(w):w;return a},mixin:function(a,b){a||(a={});for(var g=1,m=arguments.length;g<m;g++)c._mixin(a,arguments[g]);return a},setObject:function(a,b,c){var m=a.split(".");a=m.pop();return(c=u(m,!0,c))&&a?c[a]=b:void 0},getObject:function(a,
b,c){return u(a?a.split("."):[],b,c)},exists:function(a,b){return void 0!==c.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===q.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||c.isArray(a)||c.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!c.isString(a)&&!c.isFunction(a)&&!(a.tagName&&"form"==
a.tagName.toLowerCase())&&(c.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!c.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,b){for(var g=1,m=arguments.length;g<m;g++)c._mixin(a.prototype,arguments[g]);return a},_hitchArgs:function(a,b){var g=c._toArray(arguments,2),m=c.isString(b);return function(){var w=c._toArray(arguments),A=m?(a||e.global)[b]:b;return A&&A.apply(a||this,g.concat(w))}},hitch:function(a,b){if(2<arguments.length)return c._hitchArgs.apply(e,
arguments);b||(b=a,a=null);if(c.isString(b)){a=a||e.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope\x3d"',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return!a?b:function(){return b.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,g){a.prototype=b;var m=new a;a.prototype=null;g&&c._mixin(m,g);return m}}(),_toArray:t("ie")?function(){function a(a,b,c){c=c||[];for(b=b||0;b<a.length;b++)c.push(a[b]);return c}return function(b){return(b.item?
a:s).apply(this,arguments)}}():s,partial:function(a){return c.hitch.apply(e,[null].concat(c._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||c.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,g,m;if(c.isArray(a)){b=[];g=0;for(m=a.length;g<m;++g)g in a&&b.push(c.clone(a[g]))}else b=a.constructor?new a.constructor:{};return c._mixin(b,a,c.clone)},trim:String.prototype.trim?
function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,g){return a.replace(g||h,c.isFunction(b)?b:function(a,g){return c.getObject(g,!1,b)})}};c.mixin(e,c);return c})},"dojo/sniff":function(){define(["./has"],function(e){var t=navigator,b=t.userAgent,t=t.appVersion,n=parseFloat(t);e.add("air",0<=b.indexOf("AdobeAIR"));e.add("msapp",parseFloat(b.split("MSAppHost/")[1])||void 0);e.add("khtml",0<=t.indexOf("Konqueror")?n:void 0);e.add("webkit",
parseFloat(b.split("WebKit/")[1])||void 0);e.add("chrome",parseFloat(b.split("Chrome/")[1])||void 0);e.add("safari",0<=t.indexOf("Safari")&&!e("chrome")?parseFloat(t.split("Version/")[1]):void 0);e.add("mac",0<=t.indexOf("Macintosh"));e.add("quirks","BackCompat"==document.compatMode);if(b.match(/(iPhone|iPod|iPad)/)){var u=RegExp.$1.replace(/P/,"p"),q=b.match(/OS ([\d_]+)/)?RegExp.$1:"1",q=parseFloat(q.replace(/_/,".").replace(/_/g,""));e.add(u,q);e.add("ios",q)}e.add("android",parseFloat(b.split("Android ")[1])||
void 0);e.add("bb",(0<=b.indexOf("BlackBerry")||0<=b.indexOf("BB10"))&&parseFloat(b.split("Version/")[1])||void 0);e.add("trident",parseFloat(t.split("Trident/")[1])||void 0);e.add("svg","undefined"!==typeof SVGAngle);e("webkit")||(0<=b.indexOf("Opera")&&e.add("opera",9.8<=n?parseFloat(b.split("Version/")[1])||n:n),0<=b.indexOf("Gecko")&&(!e("khtml")&&!e("webkit")&&!e("trident"))&&e.add("mozilla",n),e("mozilla")&&e.add("ff",parseFloat(b.split("Firefox/")[1]||b.split("Minefield/")[1])||void 0),document.all&&
!e("opera")&&(b=parseFloat(t.split("MSIE ")[1])||void 0,(t=document.documentMode)&&(5!=t&&Math.floor(b)!=t)&&(b=t),e.add("ie",b)),e.add("wii","undefined"!=typeof opera&&opera.wiiremote));return e})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x){e._xhrObj=A._create;var C=e.config;e.objectToQuery=
n.objectToQuery;e.queryToObject=n.queryToObject;e.fieldToObject=q.fieldToObject;e.formToObject=q.toObject;e.formToQuery=q.toQuery;e.formToJson=q.toJson;e._blockAsync=!1;t.add("native-xhr2-blob",function(){if(t("native-xhr2")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var E=e._contentHandlers=e.contentHandlers={text:function(a){return a.responseText},json:function(a){return c.fromJson(a.responseText||null)},"json-comment-filtered":function(a){h.useCommentedJson||
console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");a=a.responseText;var b=a.indexOf("/*"),d=a.lastIndexOf("*/");if(-1==b||-1==d)throw Error("JSON was not comment filtered");return c.fromJson(a.substring(b+2,d))},javascript:function(a){return e.eval(a.responseText)},
xml:function(a){var b=a.responseXML;b&&(t("dom-qsa2.1")&&!b.querySelectorAll&&t("dom-parser"))&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(t("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];d.some(c,function(c){try{var d=new ActiveXObject(c);d.async=!1;d.loadXML(a.responseText);b=d}catch(g){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?
E["json-comment-filtered"](a):E.json(a)}};t("native-xhr2")&&(E.arraybuffer=E.blob=E.document=function(a,b){return"blob"===b.args.handleAs&&!t("native-xhr2-blob")?new Blob([a.response],{type:a.getResponseHeader("Content-Type")}):a.response});e._ioSetArgs=function(b,c,d,g){var x={args:b,url:b.url},m=null;if(b.form){var m=u.byId(b.form),A=m.getAttributeNode("action");x.url=x.url||(A?A.value:null);m=q.toObject(m)}A=[{}];m&&A.push(m);b.content&&A.push(b.content);b.preventCache&&A.push({"dojo.preventCache":(new Date).valueOf()});
x.query=n.objectToQuery(a.mixin.apply(null,A));x.handleAs=b.handleAs||"text";var y=new s(function(v){v.canceled=!0;c&&c(v);var a=v.ioArgs.error;a||(a=Error("request cancelled"),a.dojoType="cancel",v.ioArgs.error=a);return a});y.addCallback(d);var w=b.load;w&&a.isFunction(w)&&y.addCallback(function(v){return w.call(b,v,x)});var h=b.error;h&&a.isFunction(h)&&y.addErrback(function(v){return h.call(b,v,x)});var E=b.handle;E&&a.isFunction(E)&&y.addBoth(function(v){return E.call(b,v,x)});y.addErrback(function(v){return g(v,
y)});C.ioPublish&&(e.publish&&!1!==x.args.ioPublish)&&(y.addCallbacks(function(v){e.publish("/dojo/io/load",[y,v]);return v},function(v){e.publish("/dojo/io/error",[y,v]);return v}),y.addBoth(function(v){e.publish("/dojo/io/done",[y,v]);return v}));y.ioArgs=x;return y};var F=function(a){a=E[a.ioArgs.handleAs](a.ioArgs.xhr,a.ioArgs);return void 0===a?null:a},y=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},I=function(a){0>=L&&(L=0,C.ioPublish&&(e.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish))&&
e.publish("/dojo/io/stop"))},L=0;m.after(w,"_onAction",function(){L-=1});m.after(w,"_onInFlight",I);e._ioCancelAll=w.cancelAll;e._ioNotifyStart=function(a){C.ioPublish&&(e.publish&&!1!==a.ioArgs.args.ioPublish)&&(L||e.publish("/dojo/io/start"),L+=1,e.publish("/dojo/io/send",[a]))};e._ioWatch=function(b,c,d,g){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(a){return c(b)},isReady:function(a){return d(b)},handleResponse:function(a){return g(b)}});w(b);I(b)};e._ioAddQueryToUrl=
function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};e.xhr=function(a,b,c){var d,g=e._ioSetArgs(b,function(a){d&&d.cancel()},F,y),x=g.ioArgs;"postData"in b?x.query=b.postData:"putData"in b?x.query=b.putData:"rawBody"in b?x.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&e._ioAddQueryToUrl(x);var m;t("native-xhr2")&&(m={arraybuffer:1,blob:1,document:1});m=t("native-xhr2")&&m[b.handleAs]?b.handleAs:"text";"blob"===m&&!t("native-xhr2-blob")&&
(m="arraybuffer");m={method:a,handleAs:m,responseType:b.responseType,timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:x};"undefined"!==typeof b.headers&&(m.headers=b.headers);"undefined"!==typeof b.contentType&&(m.headers||(m.headers={}),m.headers["Content-Type"]=b.contentType);"undefined"!==typeof x.query&&(m.data=x.query);"undefined"!==typeof b.sync&&(m.sync=b.sync);e._ioNotifyStart(g);try{d=A(x.url,m,!0)}catch(C){return g.cancel(),g}g.ioArgs.xhr=d.response.xhr;d.then(function(){g.resolve(g)}).otherwise(function(a){x.error=
a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);g.reject(a)});return g};e.xhrGet=function(a){return e.xhr("GET",a)};e.rawXhrPost=e.xhrPost=function(a){return e.xhr("POST",a,!0)};e.rawXhrPut=e.xhrPut=function(a){return e.xhr("PUT",a,!0)};e.xhrDelete=function(a){return e.xhr("DELETE",a)};e._isDocumentOk=function(a){return x.checkStatus(a.status)};e._getText=function(a){var b;e.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};a.mixin(e.xhr,{_xhrObj:e._xhrObj,
fieldToObject:q.fieldToObject,formToObject:q.toObject,objectToQuery:n.objectToQuery,formToQuery:q.toQuery,formToJson:q.toJson,queryToObject:n.queryToObject,contentHandlers:E,_ioSetArgs:e._ioSetArgs,_ioCancelAll:e._ioCancelAll,_ioNotifyStart:e._ioNotifyStart,_ioWatch:e._ioWatch,_ioAddQueryToUrl:e._ioAddQueryToUrl,_isDocumentOk:e._isDocumentOk,_getText:e._getText,get:e.xhrGet,post:e.xhrPost,put:e.xhrPut,del:e.xhrDelete});return e.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],
function(e,t,b){e._name="browser";t.mixin(e,{isBrowser:!0,isFF:b("ff"),isIE:b("ie"),isKhtml:b("khtml"),isWebKit:b("webkit"),isMozilla:b("mozilla"),isMoz:b("mozilla"),isOpera:b("opera"),isSafari:b("safari"),isChrome:b("chrome"),isMac:b("mac"),isIos:b("ios"),isAndroid:b("android"),isWii:b("wii"),isQuirks:b("quirks"),isAir:b("air")});return b})},"dojo/io-query":function(){define(["./_base/lang"],function(e){var t={};return{objectToQuery:function(b){var n=encodeURIComponent,u=[],q;for(q in b){var s=b[q];
if(s!=t[q]){var h=n(q)+"\x3d";if(e.isArray(s))for(var c=0,a=s.length;c<a;++c)u.push(h+n(s[c]));else u.push(h+n(s))}}return u.join("\x26")},queryToObject:function(b){var n=decodeURIComponent;b=b.split("\x26");for(var u={},q,s,h=0,c=b.length;h<c;++h)if(s=b[h],s.length){var a=s.indexOf("\x3d");0>a?(q=n(s),s=""):(q=n(s.slice(0,a)),s=n(s.slice(a+1)));"string"==typeof u[q]&&(u[q]=[u[q]]);e.isArray(u[q])?u[q].push(s):u[q]=s}return u}}})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(e,
t){if(7>=e("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(b){}var n={};e("ie")?n.byId=function(b,s){if("string"!=typeof b)return b;var h=s||t.doc,c=b&&h.getElementById(b);if(c&&(c.attributes.id.value==b||c.id==b))return c;h=h.all[b];if(!h||h.nodeName)h=[h];for(var a=0;c=h[a++];)if(c.attributes&&c.attributes.id&&c.attributes.id.value==b||c.id==b)return c}:n.byId=function(b,s){return("string"==typeof b?(s||t.doc).getElementById(b):b)||null};n.isDescendant=function(b,s){try{b=n.byId(b);
for(s=n.byId(s);b;){if(b==s)return!0;b=b.parentNode}}catch(h){}return!1};e.add("css-user-select",function(b,s,h){if(!h)return!1;b=h.style;s=["Khtml","O","Moz","Webkit"];h=s.length;var c="userSelect";do if("undefined"!==typeof b[c])return c;while(h--&&(c=s[h]+"UserSelect"));return!1});var u=e("css-user-select");n.setSelectable=u?function(b,s){n.byId(b).style[u]=s?"":"none"}:function(b,s){b=n.byId(b);var h=b.getElementsByTagName("*"),c=h.length;if(s)for(b.removeAttribute("unselectable");c--;)h[c].removeAttribute("unselectable");
else for(b.setAttribute("unselectable","on");c--;)h[c].setAttribute("unselectable","on")};return n})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(e,t,b){var n={global:e.global,doc:e.global.document||null,body:function(b){b=b||e.doc;return b.body||b.getElementsByTagName("body")[0]},setContext:function(b,q){e.global=n.global=b;e.doc=n.doc=q},withGlobal:function(b,q,s,h){var c=e.global;try{return e.global=n.global=b,n.withDoc.call(null,b.document,q,s,h)}finally{e.global=
n.global=c}},withDoc:function(u,q,s,h){var c=n.doc,a=b("quirks"),d=b("ie"),g,m,w;try{e.doc=n.doc=u;e.isQuirks=b.add("quirks","BackCompat"==e.doc.compatMode,!0,!0);if(b("ie")&&(w=u.parentWindow)&&w.navigator)g=parseFloat(w.navigator.appVersion.split("MSIE ")[1])||void 0,(m=u.documentMode)&&(5!=m&&Math.floor(g)!=m)&&(g=m),e.isIE=b.add("ie",g,!0,!0);s&&"string"==typeof q&&(q=s[q]);return q.apply(s,h||[])}finally{e.doc=n.doc=c,e.isQuirks=b.add("quirks",a,!0,!0),e.isIE=b.add("ie",d,!0,!0)}}};t.mixin(e,
n);return n})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(e,t,b,n){var u={fieldToObject:function(b){var s=null;if(b=t.byId(b)){var h=b.name,c=(b.type||"").toLowerCase();if(h&&c&&!b.disabled)if("radio"==c||"checkbox"==c)b.checked&&(s=b.value);else if(b.multiple){s=[];for(b=[b.firstChild];b.length;)for(h=b.pop();h;h=h.nextSibling)if(1==h.nodeType&&"option"==h.tagName.toLowerCase())h.selected&&s.push(h.value);else{h.nextSibling&&b.push(h.nextSibling);h.firstChild&&
b.push(h.firstChild);break}}else s=b.value}return s},toObject:function(b){var s={};b=t.byId(b).elements;for(var h=0,c=b.length;h<c;++h){var a=b[h],d=a.name,g=(a.type||"").toLowerCase();if(d&&g&&0>"file|submit|image|reset|button".indexOf(g)&&!a.disabled){var m=s,w=d,a=u.fieldToObject(a);if(null!==a){var A=m[w];"string"==typeof A?m[w]=[A,a]:e.isArray(A)?A.push(a):m[w]=a}"image"==g&&(s[d+".x"]=s[d+".y"]=s[d].x=s[d].y=0)}}return s},toQuery:function(q){return b.objectToQuery(u.toObject(q))},toJson:function(b,
s){return n.stringify(u.toObject(b),null,s?4:0)}};return u})},"dojo/json":function(){define(["./has"],function(e){var t="undefined"!=typeof JSON;e.add("json-parse",t);e.add("json-stringify",t&&'{"a":1}'==JSON.stringify({a:0},function(b,u){return u||1}));if(e("json-stringify"))return JSON;var b=function(b){return('"'+b.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:e("json-parse")?JSON.parse:
function(b,u){if(u&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(b))throw new SyntaxError("Invalid characters in JSON");return eval("("+b+")")},stringify:function(n,u,q){function s(c,a,d){u&&(c=u(d,c));var g;g=typeof c;if("number"==g)return isFinite(c)?c+"":"null";if("boolean"==g)return c+"";if(null===c)return"null";if("string"==typeof c)return b(c);if("function"==g||"undefined"==g)return h;if("function"==typeof c.toJSON)return s(c.toJSON(d),
a,d);if(c instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,d){a=c["getUTC"+b]()+(d?1:0);return 10>a?"0"+a:a});if(c.valueOf()!==c)return s(c.valueOf(),a,d);var m=q?a+q:"",w=q?" ":"",A=q?"\n":"";if(c instanceof Array){var w=c.length,x=[];for(d=0;d<w;d++)g=s(c[d],m,d),"string"!=typeof g&&(g="null"),x.push(A+m+g);return"["+x.join(",")+A+a+"]"}x=[];for(d in c){var C;if(c.hasOwnProperty(d)){if("number"==typeof d)C='"'+d+'"';else if("string"==
typeof d)C=b(d);else continue;g=s(c[d],m,d);"string"==typeof g&&x.push(A+m+C+":"+w+g)}}return"{"+x.join(",")+A+a+"}"}var h;"string"==typeof u&&(q=u,u=null);return s(n,"","")}}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(e,t,b,n,u,q,s){var h=function(){},c=Object.freeze||function(){},a=e.Deferred=function(d){function g(a){if(A)throw Error("This deferred has already been resolved");w=a;A=!0;m()}
function m(){for(var a;!a&&y;){var b=y;y=y.next;if(a=b.progress==h)A=!1;var c=E?b.error:b.resolved;u("config-useDeferredInstrumentation")&&E&&t.instrumentRejected&&t.instrumentRejected(w,!!c);if(c)try{var d=c(w);d&&"function"===typeof d.then?d.then(q.hitch(b.deferred,"resolve"),q.hitch(b.deferred,"reject"),q.hitch(b.deferred,"progress")):(c=a&&void 0===d,a&&!c&&(E=d instanceof Error),b.deferred[c&&E?"reject":"resolve"](c?w:d))}catch(g){b.deferred.reject(g)}else E?b.deferred.reject(w):b.deferred.resolve(w)}}
var w,A,x,C,E,s,y,e=this.promise=new b;this.isResolved=e.isResolved=function(){return 0==C};this.isRejected=e.isRejected=function(){return 1==C};this.isFulfilled=e.isFulfilled=function(){return 0<=C};this.isCanceled=e.isCanceled=function(){return x};this.resolve=this.callback=function(a){this.fired=C=0;this.results=[a,null];g(a)};this.reject=this.errback=function(a){E=!0;this.fired=C=1;u("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(a,!!y);g(a);this.results=[null,
a]};this.progress=function(a){for(var b=y;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,h);return this};e.then=this.then=function(b,c,d){var g=d==h?this:new a(e.cancel);b={resolved:b,error:c,progress:d,deferred:g};y?s=s.next=b:y=s=b;A&&m();return g.promise};var L=this;e.cancel=this.cancel=function(){if(!A){var a=d&&d(L);A||(a instanceof Error||(a=new n(a)),a.log=!1,L.reject(a))}x=!0};c(e)};q.extend(a,{addCallback:function(a){return this.addCallbacks(q.hitch.apply(e,
arguments))},addErrback:function(a){return this.addCallbacks(null,q.hitch.apply(e,arguments))},addBoth:function(a){var b=q.hitch.apply(e,arguments);return this.addCallbacks(b,b)},fired:-1});a.when=e.when=s;return a})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(e,t,b,n,u){var q=Object.freeze||function(){},s=function(a,b,c,A,x){2===b&&(d.instrumentRejected&&0===a.length)&&d.instrumentRejected(c,!1,A,x);for(x=
0;x<a.length;x++)h(a[x],b,c,A)},h=function(b,m,w,A){var x=b[m],C=b.deferred;if(x)try{var h=x(w);if(0===m)"undefined"!==typeof h&&a(C,m,h);else{if(h&&"function"===typeof h.then){b.cancel=h.cancel;h.then(c(C,1),c(C,2),c(C,0));return}a(C,1,h)}}catch(s){a(C,2,s)}else a(C,m,w);2===m&&d.instrumentRejected&&d.instrumentRejected(w,!!x,A,C.promise)},c=function(b,c){return function(d){a(b,c,d)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);break;case 2:a.reject(c)}},
d=function(a){var c=this.promise=new n,w=this,A,x,C,E=!1,F=[];Error.captureStackTrace&&(Error.captureStackTrace(w,d),Error.captureStackTrace(c,d));this.isResolved=c.isResolved=function(){return 1===A};this.isRejected=c.isRejected=function(){return 2===A};this.isFulfilled=c.isFulfilled=function(){return!!A};this.isCanceled=c.isCanceled=function(){return E};this.progress=function(a,b){if(A){if(!0===b)throw Error("This deferred has already been fulfilled.");return c}s(F,0,a,null,w);return c};this.resolve=
function(a,b){if(A){if(!0===b)throw Error("This deferred has already been fulfilled.");return c}s(F,A=1,x=a,null,w);F=null;return c};var y=this.reject=function(a,b){if(A){if(!0===b)throw Error("This deferred has already been fulfilled.");return c}Error.captureStackTrace&&Error.captureStackTrace(C={},y);s(F,A=2,x=a,C,w);F=null;return c};this.then=c.then=function(a,b,g){var y=[g,a,b];y.cancel=c.cancel;y.deferred=new d(function(a){return y.cancel&&y.cancel(a)});A&&!F?h(y,A,x,C):F.push(y);return y.deferred.promise};
this.cancel=c.cancel=function(c,d){if(A){if(!0===d)throw Error("This deferred has already been fulfilled.");}else{if(a){var m=a(c);c="undefined"===typeof m?c:m}E=!0;if(A){if(2===A&&x===c)return c}else return"undefined"===typeof c&&(c=new b),y(c),c}};q(c)};d.prototype.toString=function(){return"[object Deferred]"};u&&u(d);return d})},"dojo/errors/CancelError":function(){define(["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],
function(e){return function(t,b,n,u){n=n||Error;var q=function(s){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,q);var h=Error.call(this,s),c;for(c in h)h.hasOwnProperty(c)&&(this[c]=h[c]);this.message=s;this.stack=h.stack}else n.apply(this,arguments);b&&b.apply(this,arguments)};q.prototype=e.delegate(n.prototype,u);q.prototype.name=t;return q.prototype.constructor=q}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(e){function t(){throw new TypeError("abstract");
}return e.extend(function(){},{then:function(b,n,e){t()},cancel:function(b,n){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(b){return this.then(b,b)},otherwise:function(b){return this.then(null,b)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],
function(e,t,b,n){function u(a,b,c){var d="";a&&a.stack&&(d+=a.stack);b&&b.stack&&(d+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(d+="\n    ----------------------------------------\n"+c.stack);console.error(a,d)}function q(a,b,c,d){b||u(a,c,d)}function s(b,m,w,A){n.some(c,function(a){if(a.error===b)return m&&(a.handled=!0),!0})||c.push({error:b,rejection:w,handled:m,deferred:A,timestamp:(new Date).getTime()});
a||(a=setTimeout(h,d))}function h(){var b=(new Date).getTime(),m=b-d;c=n.filter(c,function(a){return a.timestamp<m?(a.handled||u(a.error,a.rejection,a.deferred),!1):!0});a=c.length?setTimeout(h,c[0].timestamp+d-b):!1}t.add("config-useDeferredInstrumentation","report-unhandled-rejections");var c=[],a=!1,d=1E3;return function(a){var c=t("config-useDeferredInstrumentation");if(c){e.on("resolved",b.hitch(console,"log","resolved"));e.on("rejected",b.hitch(console,"log","rejected"));e.on("progress",b.hitch(console,
"log","progress"));var h=[];"string"===typeof c&&(h=c.split(","),c=h.shift());if("report-rejections"===c)a.instrumentRejected=q;else if("report-unhandled-rejections"===c||!0===c||1===c)a.instrumentRejected=s,d=parseInt(h[0],10)||d;else throw Error("Unsupported instrumentation usage \x3c"+c+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(e,t,b){function n(b){setTimeout(function(){q.apply(u,b)},0)}var u=new b,q=u.emit;u.emit=null;t.prototype.trace=
function(){var b=e._toArray(arguments);this.then(function(h){n(["resolved",h].concat(b))},function(h){n(["rejected",h].concat(b))},function(h){n(["progress",h].concat(b))});return this};t.prototype.traceRejected=function(){var b=e._toArray(arguments);this.otherwise(function(h){n(["rejected",h].concat(b))});return this};return u})},"dojo/Evented":function(){define(["./aspect","./on"],function(e,t){function b(){}var n=e.after;b.prototype={on:function(b,q){return t.parse(this,b,q,function(b,h){return n(b,
"on"+h,q,!0)})},emit:function(b,q){var s=[this];s.push.apply(s,arguments);return t.emit.apply(t,s)}};return b})},"dojo/aspect":function(){define([],function(){function e(b,c,a,d){var g=b[c],m="around"==c,w;if(m){var A=a(function(){return g.advice(this,arguments)});w={remove:function(){A&&(A=b=a=null)},advice:function(a,b){return A?A.apply(a,b):g.advice(a,b)}}}else w={remove:function(){if(w.advice){var d=w.previous,g=w.next;!g&&!d?delete b[c]:(d?d.next=g:b[c]=g,g&&(g.previous=d));b=a=w.advice=null}},
id:n++,advice:a,receiveArguments:d};if(g&&!m)if("after"==c){for(;g.next&&(g=g.next););g.next=w;w.previous=g}else"before"==c&&(b[c]=w,w.next=g,g.previous=w);else b[c]=w;return w}function t(h){return function(c,a,d,g){var m=c[a],w;if(!m||m.target!=c)c[a]=w=function(){for(var a=n,c=arguments,d=w.before;d;)d.advice&&(c=d.advice.apply(this,c)||c),d=d.next;if(w.around)var g=w.around.advice(this,c);for(d=w.after;d&&d.id<a;){if(d.advice)if(d.receiveArguments)var m=d.advice.apply(this,c),g=m===b?g:m;else g=
d.advice.call(this,g,c);d=d.next}return g},m&&(w.around={advice:function(a,b){return m.apply(a,b)}}),w.target=c;c=e(w||m,h,d,g);d=null;return c}}var b,n=0,u=t("after"),q=t("before"),s=t("around");return{before:q,around:s,after:u}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,t,b){function n(a,d,x,m,A){if(m=d.match(/(.*):(.*)/))return d=m[2],m=m[1],h.selector(m,d).call(A,a,x);b("touch")&&(c.test(d)&&(x=D(x)),!b("event-orientationchange")&&
"orientationchange"==d&&(d="resize",a=window,x=D(x)));w&&(x=w(x));if(a.addEventListener){var C=d in g,y=C?g[d]:d;a.addEventListener(y,x,C);return{remove:function(){a.removeEventListener(y,x,C)}}}if(E&&a.attachEvent)return E(a,"on"+d,x);throw Error("Target must be an event emitter");}function u(){this.cancelable=!1;this.defaultPrevented=!0}function q(){this.bubbles=!1}var s=window.ScriptEngineMajorVersion;b.add("jscript",s&&s()+ScriptEngineMinorVersion()/10);b.add("event-orientationchange",b("touch")&&
!b("android"));b.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);b.add("event-focusin",function(a,b,c){return"onfocusin"in c});b("touch")&&b.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var b=new a;b.target=null;return null===b.target}catch(c){return!1}});var h=function(a,b,c,d){return"function"==typeof a.on&&"function"!=typeof b&&!a.nodeType?a.on(b,
c):h.parse(a,b,c,n,d,this)};h.pausable=function(a,b,c,d){var g;a=h(a,b,function(){if(!g)return c.apply(this,arguments)},d);a.pause=function(){g=!0};a.resume=function(){g=!1};return a};h.once=function(a,b,c,d){var g=h(a,b,function(){g.remove();return c.apply(this,arguments)});return g};h.parse=function(a,b,c,d,g,x){if(b.call)return b.call(x,a,c);if(b instanceof Array)m=b;else if(-1<b.indexOf(","))var m=b.split(/\s*,\s*/);if(m){var A=[];b=0;for(var C;C=m[b++];)A.push(h.parse(a,C,c,d,g,x));A.remove=
function(){for(var a=0;a<A.length;a++)A[a].remove()};return A}return d(a,b,c,g,x)};var c=/^touch/;h.matches=function(a,b,c,d,g){g=g&&g.matches?g:t.query;d=!1!==d;1!=a.nodeType&&(a=a.parentNode);for(;!g.matches(a,b,c);)if(a==c||!1===d||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};h.selector=function(a,b,c){return function(d,g){function x(b){return h.matches(b,a,d,c,m)}var m="function"==typeof a?{matches:a}:this,A=b.bubble;return A?h(d,A(x),g):h(d,b,function(a){var b=x(a.target);if(b)return g.call(b,
a)})}};var a=[].slice,d=h.emit=function(b,c,d){var g=a.call(arguments,2),x="on"+c;if("parentNode"in b){var m=g[0]={},A;for(A in d)m[A]=d[A];m.preventDefault=u;m.stopPropagation=q;m.target=b;m.type=c;d=m}do b[x]&&b[x].apply(b,g);while(d&&d.bubbles&&(b=b.parentNode));return d&&d.cancelable&&d},g=b("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!b("event-stopimmediatepropagation"))var m=function(){this.modified=this.immediatelyStopped=!0},w=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=
m,a.apply(this,arguments)}};if(b("dom-addeventlistener"))h.emit=function(a,b,c){if(a.dispatchEvent&&document.createEvent){var g=(a.ownerDocument||document).createEvent("HTMLEvents");g.initEvent(b,!!c.bubbles,!!c.cancelable);for(var x in c)x in g||(g[x]=c[x]);return a.dispatchEvent(g)&&g}return d.apply(h,arguments)};else{h._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{A&&(a.type==A.type&&a.srcElement==A.target)&&(a=A)}catch(c){}if(!a.target)switch(a.target=
a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=F,a.preventDefault=y),a.type){case "keypress":var d="charCode"in a?a.charCode:a.keyCode;10==d?(d=0,a.keyCode=13):13==d||27==d?d=0:3==d&&(d=99);a.charCode=d;d=a;d.keyChar=d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}return a};var A,x=function(a){this.handle=a};x.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};
var C=function(a){return function(b){b=h._fixEvent(b,this);var c=a.call(this,b);b.modified&&(A||setTimeout(function(){A=null}),A=b);return c}},E=function(a,c,d){d=C(d);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>b("jscript"))&&!b("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var g=a[c];if(!g||!g.listeners){var m=g,g=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
g.listeners=[];a[c]=g;g.global=this;m&&g.listeners.push(_dojoIEListeners_.push(m)-1)}g.listeners.push(a=g.global._dojoIEListeners_.push(d)-1);return new x(a)}return e.after(a,c,d,!0)},F=function(){this.cancelBubble=!0},y=h._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(b("touch"))var I=function(){},L=window.orientation,D=function(a){return function(c){var d=c.corrected;if(!d){var g=
c.type;try{delete c.type}catch(x){}if(c.type){if(b("touch-can-modify-event-delegate"))I.prototype=c,d=new I;else{var d={},m;for(m in c)d[m]=c[m]}d.preventDefault=function(){c.preventDefault()};d.stopPropagation=function(){c.stopPropagation()}}else d=c,d.type=g;c.corrected=d;if("resize"==g){if(L==window.orientation)return null;L=window.orientation;d.type="orientationchange";return a.call(this,d)}"rotation"in d||(d.rotation=0,d.scale=1);var g=d.changedTouches[0],A;for(A in g)delete d[A],d[A]=g[A]}return a.call(this,
d)}};return h})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(e,t){return function(b,n,u,q){var s=b&&"function"===typeof b.then,h=s&&b instanceof t;if(s)h||(s=new e(b.cancel),b.then(s.resolve,s.reject,s.progress),b=s.promise);else return 1<arguments.length?n?n(b):b:(new e).resolve(b);return n||u||q?b.then(n,u,q):b}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(e,t){e.fromJson=function(b){return eval("("+b+")")};e._escapeString=t.stringify;e.toJsonIndentStr=
"\t";e.toJson=function(b,n){return t.stringify(b,function(b,q){if(q){var s=q.__json__||q.json;if("function"==typeof s)return s.call(q)}return q},n&&e.toJsonIndentStr)};return e})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(e,t,b,n,u,q){function s(){for(var b=+new Date,g=0,m;g<a.length&&(m=a[g]);g++){var w=m.response,A=w.options;if(m.isCanceled&&
m.isCanceled()||m.isValid&&!m.isValid(w))a.splice(g--,1),h._onAction&&h._onAction();else if(m.isReady&&m.isReady(w))a.splice(g--,1),m.handleResponse(w),h._onAction&&h._onAction();else if(m.startTime&&m.startTime+(A.timeout||0)<b)a.splice(g--,1),m.cancel(new t("Timeout exceeded",w)),h._onAction&&h._onAction()}h._onInFlight&&h._onInFlight(m);a.length||(clearInterval(c),c=null)}function h(b){b.response.options.timeout&&(b.startTime=+new Date);b.isFulfilled()||(a.push(b),c||(c=setInterval(s,50)),b.response.options.sync&&
s())}var c=null,a=[];h.cancelAll=function(){try{n.forEach(a,function(a){try{a.cancel(new b("All requests canceled."))}catch(c){}})}catch(c){}};u&&(q&&u.doc.attachEvent)&&q(u.global,"unload",function(){h.cancelAll()});return h})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),function(e,t,b,n,u,q,s,h){function c(a){return d(a)}function a(a){return a.data||a.text}e.deepCopy=
function(a,b){for(var c in b){var d=a[c],x=b[c];d!==x&&(d&&"object"===typeof d&&x&&"object"===typeof x?e.deepCopy(d,x):a[c]=x)}return a};e.deepCreate=function(a,b){b=b||{};var c=s.delegate(a),d,x;for(d in a)(x=a[d])&&"object"===typeof x&&(c[d]=e.deepCreate(x,b[d]));return e.deepCopy(c,b)};var d=Object.freeze||function(a){return a};e.deferred=function(g,m,w,A,x,C){var E=new n(function(a){m&&m(E,g);return!a||!(a instanceof t)&&!(a instanceof b)?new b("Request canceled",g):a});E.response=g;E.isValid=
w;E.isReady=A;E.handleResponse=x;w=E.then(c).otherwise(function(a){a.response=g;throw a;});e.notify&&w.then(s.hitch(e.notify,"emit","load"),s.hitch(e.notify,"emit","error"));A=w.then(a);x=new h;for(var q in A)A.hasOwnProperty(q)&&(x[q]=A[q]);x.response=w;d(x);C&&E.then(function(a){C.call(E,a)},function(a){C.call(E,g,a)});E.promise=x;E.then=x.then;return E};e.addCommonMethods=function(a,b){q.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,d){d=
s.delegate(d||{});d.method=b;return a(c,d)}})};e.parseArgs=function(a,b,c){var d=b.data,x=b.query;d&&!c&&"object"===typeof d&&(b.data=u.objectToQuery(d));x?("object"===typeof x&&(x=u.objectToQuery(x)),b.preventCache&&(x+=(x?"\x26":"")+"request.preventCache\x3d"+ +new Date)):b.preventCache&&(x="request.preventCache\x3d"+ +new Date);a&&x&&(a+=(~a.indexOf("?")?"\x26":"?")+x);return{url:a,options:b,getHeader:function(a){return null}}};e.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===
a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(e){return e("RequestError",function(e,b){this.response=b})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(e,t){return e("RequestTimeoutError",null,t,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(e,t,b,n,u){function q(a,c){var d=a.xhr;a.status=a.xhr.status;try{a.text=d.responseText}catch(g){}"xml"===
a.options.handleAs&&(a.data=d.responseXML);if(!c)try{b(a)}catch(x){c=x}c?this.reject(c):n.checkStatus(d.status)?this.resolve(a):(c=new e("Unable to load "+a.url+" status: "+d.status,a),this.reject(c))}function s(a){return this.xhr.getResponseHeader(a)}function h(b,x,C){var I=u("native-formdata")&&x&&x.data&&x.data instanceof FormData,L=n.parseArgs(b,n.deepCreate(A,x),I);b=L.url;x=L.options;var D,G=n.deferred(L,m,a,d,q,function(){D&&D()}),N=L.xhr=h._create();if(!N)return G.cancel(new e("XHR was not created")),
C?G:G.promise;L.getHeader=s;g&&(D=g(N,G,L));var P=x.data,K=!x.sync,R=x.method;try{N.open(R,b,K,x.user||w,x.password||w);x.withCredentials&&(N.withCredentials=x.withCredentials);u("native-response-type")&&x.handleAs in c&&(N.responseType=c[x.handleAs]);var M=x.headers;b=I?!1:"application/x-www-form-urlencoded";if(M)for(var T in M)"content-type"===T.toLowerCase()?b=M[T]:M[T]&&N.setRequestHeader(T,M[T]);b&&!1!==b&&N.setRequestHeader("Content-Type",b);(!M||!("X-Requested-With"in M))&&N.setRequestHeader("X-Requested-With",
"XMLHttpRequest");n.notify&&n.notify.emit("send",L,G.promise.cancel);N.send(P)}catch(U){G.reject(U)}t(G);N=null;return C?G:G.promise}u.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});u.add("dojo-force-activex-xhr",function(){return u("activex")&&!document.addEventListener&&"file:"===window.location.protocol});u.add("native-xhr2",function(){if(u("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==
typeof a.upload)}});u.add("native-formdata",function(){return"undefined"!==typeof FormData});u.add("native-response-type",function(){return u("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});u.add("native-xhr2-blob",function(){if(u("native-response-type")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var c={blob:u("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},a,
d,g,m;u("native-xhr2")?(a=function(a){return!this.isFulfilled()},m=function(a,b){b.xhr.abort()},g=function(a,b,c){function d(a){b.handleResponse(c)}function g(a){a=new e("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,a)}function x(a){a.lengthComputable?(c.loaded=a.loaded,c.total=a.total,b.progress(c)):3===c.xhr.readyState&&(c.loaded="loaded"in a?a.loaded:a.position,b.progress(c))}a.addEventListener("load",d,!1);a.addEventListener("error",g,!1);a.addEventListener("progress",
x,!1);return function(){a.removeEventListener("load",d,!1);a.removeEventListener("error",g,!1);a.removeEventListener("progress",x,!1);a=null}}):(a=function(a){return a.xhr.readyState},d=function(a){return 4===a.xhr.readyState},m=function(a,b){var c=b.xhr,d=typeof c.abort;("function"===d||"object"===d||"unknown"===d)&&c.abort()});var w,A={data:null,query:null,sync:!1,method:"GET"};h._create=function(){throw Error("XMLHTTP not available");};if(u("native-xhr")&&!u("dojo-force-activex-xhr"))h._create=
function(){return new XMLHttpRequest};else if(u("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),h._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(x){try{new ActiveXObject("Microsoft.XMLHTTP"),h._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(C){}}n.addCommonMethods(h);return h})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(e,t,b,n){function u(b){var c=a[b.options.handleAs];
b.data=c?c(b):b.data||b.text;return b}n.add("activex","undefined"!==typeof ActiveXObject);n.add("dom-parser",function(a){return"DOMParser"in a});var q;if(n("activex")){var s=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],h;q=function(a){function c(a){try{var b=new ActiveXObject(a);b.async=!1;b.loadXML(w);m=b;h=a}catch(d){return!1}return!0}var m=a.data,w=a.text;m&&(n("dom-qsa2.1")&&!m.querySelectorAll&&n("dom-parser"))&&(m=(new DOMParser).parseFromString(w,
"application/xml"));if(!m||!m.documentElement)(!h||!c(h))&&b.some(s,c);return m}}var c=function(a){return!n("native-xhr2-blob")&&"blob"===a.options.handleAs&&"undefined"!==typeof Blob?new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")}):a.xhr.response},a={javascript:function(a){return t.eval(a.text||"")},json:function(a){return e.parse(a.text||null)},xml:q,blob:c,arraybuffer:c,document:c};u.register=function(b,c){a[b]=c};return u})},"dojo/selector/_loader":function(){define(["../has",
"require"],function(e,t){var b=document.createElement("div");e.add("dom-qsa2.1",!!b.querySelectorAll);e.add("dom-qsa3",function(){try{return b.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==b.querySelectorAll(".TEST:empty").length}catch(n){}});var n;return{load:function(b,q,s,h){h=t;b="default"==b?e("config-selectorEngine")||"css3":b;b="css2"==b||"lite"==b?"./lite":"css2.1"==b?e("dom-qsa2.1")?"./lite":"./acme":"css3"==b?e("dom-qsa3")?"./lite":"./acme":"acme"==b?"./acme":(h=q)&&b;if("?"==b.charAt(b.length-
1)){b=b.substring(0,b.length-1);var c=!0}if(c&&(e("dom-compliant-qsa")||n))return s(n);h([b],function(a){"./lite"!=b&&(n=a);s(a)})}}})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g){var m={type:"polygon",rings:null},w=e(h,{declaredClass:"esri.geometry.Polygon",constructor:function(a){b.mixin(this,m);this.rings=
[];this._ring=0;a&&(b.isArray(a)?this.rings=b.isArray(a[0][0])?a:[a]:a.rings?b.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=g.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(a){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];b.isArray(a[0])?t.forEach(a,this._addPointArr,this):t.forEach(a,this._addPoint,this);return this},_addPointArr:function(a){this.rings[this._ring].push(a)},_addPoint:function(a){this.rings[this._ring].push([a.x,
a.y])},_insertPoints:function(a,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);t.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new c(this.rings[a][b],this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),this.rings[a][b]=
[c.x,c.y],this},insertPoint:function(a,b,c){if(this._validateInputs(a)&&q.isDefined(b)&&0<=b&&b<=this.rings[a].length)return this.clearCache(),this.rings[a].splice(b,0,[c.x,c.y]),this},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.rings.splice(a,1)[0];var b,d=a.length,g=this.spatialReference;for(b=0;b<d;b++)a[b]=new c(a[b],g);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new c(this.rings[a].splice(b,1)[0],this.spatialReference)},
getExtent:function(){var b;b=this.getCacheValue("_extent");var c=this.getCacheValue("_partwise");if(b)return b=new a(b),b._partwise=c,b;b=this.rings;var d=b.length;if(d&&b[0].length){var g,m,y,h,w,s,q,n,e=h=b[0][0][0],u=w=b[0][0][1],t=Math.min,M=Math.max,T=this.spatialReference,c=[],U,V,W,v;for(s=0;s<d;s++){g=b[s];U=V=g[0]&&g[0][0];W=v=g[0]&&g[0][1];n=g.length;for(q=0;q<n;q++)m=g[q],y=m[0],m=m[1],e=t(e,y),u=t(u,m),h=M(h,y),w=M(w,m),U=t(U,y),W=t(W,m),V=M(V,y),v=M(v,m);c.push(new a({xmin:U,ymin:W,xmax:V,
ymax:v,spatialReference:T?T.toJson():null}))}b={xmin:e,ymin:u,xmax:h,ymax:w,spatialReference:T?T.toJson():null};c=1<c.length?c:null;this.setCacheValue("_extent",b);this.setCacheValue("_partwise",c);b=new a(b);b._partwise=c;return b}},contains:function(a){var b=this.rings,d,g=!1,m,y,h,w,s,q,n=b.length;d=this.spatialReference;m=a.spatialReference;var e=a.x;a=a.y;d&&(m&&!d.equals(m)&&d._canProject(m))&&(a=d.isWebMercator()?c.lngLatToXY(e,a):c.xyToLngLat(e,a,!0),e=a[0],a=a[1]);for(q=0;q<n;q++){d=b[q];
h=d.length;for(s=w=0;s<h;s++)if(w++,w===h&&(w=0),m=d[s],y=d[w],(m[1]<a&&y[1]>=a||y[1]<a&&m[1]>=a)&&m[0]+(a-m[1])/(y[1]-m[1])*(y[0]-m[0])<e)g=!g}return g},getCentroid:function(){var a=this.getCacheValue("_centroid");if(void 0!==a)return a;var a=this.rings,b,d,g,m=[],y,h;t.forEach(a,function(a){b=d=g=0;t.forEach(a,function(c,m){m<a.length-1&&(y=a[m+1],h=c[0]*y[1]-y[0]*c[1],b+=(c[0]+y[0])*h,d+=(c[1]+y[1])*h,g+=h)});0<g&&(g*=-1);g&&m.push([b,d,g/2])});m.sort(function(a,b){return a[2]-b[2]});b=d=void 0;
if(m[0])a=6*m[0][2],b=m[0][0]/a,d=m[0][1]/a;else if(a=a[0]&&a[0].length?this._getLineCentroid(a[0]):null)b=a.x,d=a.y;a=isNaN(b)||isNaN(d)?null:new c(b,d,this.spatialReference);this.setCacheValue("_centroid",a);return a},_getLineCentroid:function(a){var b,c=0,g=0,m=0,y,h,w={x:0,y:0},s={x:0,y:0},q,n=a.length,e;for(q=0;q<n-1;q++)y=a[q],h=a[q+1],y&&h&&(w.x=y[0],w.y=y[1],s.x=h[0],s.y=h[1],b=d.getLength(w,s),0<b&&(c+=b,y=d.getMidpoint(y,h),g+=b*y[0],m+=b*y[1]));0<c?e={x:g/c,y:m/c}:a[0]&&(e={x:a[0][0],y:a[0][1]});
return e},isClockwise:function(a){var c=0,d,g=a.length,m=b.isArray(a[0])?function(a,b){return a[0]*b[1]-b[0]*a[1]}:function(a,b){return a.x*b.y-b.x*a.y};for(d=0;d<g;d++)c+=m(a[d],a[(d+1)%g]);return 0>=c/2},isSelfIntersecting:function(a){a=a||this;var b,c,g,m,h,w,s,q=a.rings.length,n;for(g=0;g<q;g++){for(b=0;b<a.rings[g].length-1;b++){h=[[a.rings[g][b][0],a.rings[g][b][1]],[a.rings[g][b+1][0],a.rings[g][b+1][1]]];for(c=g+1;c<q;c++)for(m=0;m<a.rings[c].length-1;m++)if(w=[[a.rings[c][m][0],a.rings[c][m][1]],
[a.rings[c][m+1][0],a.rings[c][m+1][1]]],(s=d._getLineIntersection2(h,w))&&!(s[0]===h[0][0]&&s[1]===h[0][1]||s[0]===w[0][0]&&s[1]===w[0][1]||s[0]===h[1][0]&&s[1]===h[1][1]||s[0]===w[1][0]&&s[1]===w[1][1]))return!0}m=a.rings[g].length;if(!(4>=m))for(b=0;b<m-3;b++){n=m-1;0===b&&(n=m-2);h=[[a.rings[g][b][0],a.rings[g][b][1]],[a.rings[g][b+1][0],a.rings[g][b+1][1]]];for(c=b+2;c<n;c++)if(w=[[a.rings[g][c][0],a.rings[g][c][1]],[a.rings[g][c+1][0],a.rings[g][c+1][1]]],(s=d._getLineIntersection2(h,w))&&!(s[0]===
h[0][0]&&s[1]===h[0][1]||s[0]===w[0][0]&&s[1]===w[0][1]||s[0]===h[1][0]&&s[1]===h[1][1]||s[0]===w[1][0]&&s[1]===w[1][1]))return!0}}return!1},toJson:function(){var a={rings:b.clone(this.rings)},c=this.spatialReference;c&&(a.spatialReference=c.toJson());return a}});w.defaultProps=m;w.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.longAxis,g=a.shortAxis,m=a.numberOfPoints,h=a.map,s,q,n;a=[];var e=2*Math.PI/m;for(q=0;q<m;q++)s=Math.cos(q*e),n=Math.sin(q*e),s=h.toMap({x:d*s+b,y:g*n+c}),a.push(s);
a.push(a[0]);b=new w(h.spatialReference);b.addRing(a);return b};w.createCircle=function(a){return w.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})};w.fromExtent=function(a){var b=a.normalize();a=a.spatialReference;return new w({rings:t.map(b,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:a?a.toJson():null})};n("extend-esri")&&(b.setObject("geometry.Polygon",w,u),u.geometry.defaultPolygon=
m,u.geometry.createEllipse=w.createEllipse,u.geometry.createCircle=w.createCircle,u.geometry.isClockwise=w.prototype.isClockwise,u.geometry.polygonSelfIntersecting=w.prototype.isSelfIntersecting);return w})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(e,t,b){function n(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function u(a,b,c){var d,g,m,x,C,v,A,z=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=b,b=c);c=0;x=a.callee;(d=d||x.nom)||n("can't deduce a name to call inherited()",
this.declaredClass);C=this.constructor._meta;m=C.bases;A=z.p;if(d!=G){if(z.c!==x&&(A=0,v=m[0],C=v._meta,C.hidden[d]!==x)){(g=C.chains)&&"string"==typeof g[d]&&n("calling chained method with inherited: "+d,this.declaredClass);do if(C=v._meta,g=v.prototype,C&&(g[d]===x&&g.hasOwnProperty(d)||C.hidden[d]===x))break;while(v=m[++A]);A=v?A:-1}if(v=m[++A])if(g=v.prototype,v._meta&&g.hasOwnProperty(d))c=g[d];else{x=y[d];do if(g=v.prototype,(c=g[d])&&(v._meta?g.hasOwnProperty(d):c!==x))break;while(v=m[++A])}c=
v&&c||y[d]}else{if(z.c!==x&&(A=0,(C=m[0]._meta)&&C.ctor!==x)){g=C.chains;for((!g||"manual"!==g.constructor)&&n("calling chained constructor with inherited",this.declaredClass);(v=m[++A])&&!((C=v._meta)&&C.ctor===x););A=v?A:-1}for(;(v=m[++A])&&!(c=(C=v._meta)?C.ctor:v););c=v&&c}z.c=c;z.p=A;if(c)return!0===b?c:c.apply(this,b||a)}function q(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function s(a,b,c){var d=this.getInherited(a,b);if(d)return d.apply(this,c||b||a)}function h(a){for(var b=
this.constructor._meta.bases,c=0,d=b.length;c<d;++c)if(b[c]===a)return!0;return this instanceof a}function c(a,c){for(var d in c)d!=G&&c.hasOwnProperty(d)&&(a[d]=c[d]);if(t("bug-for-in-skips-shadowed"))for(var g=b._extraNames,m=g.length;m;)d=g[--m],d!=G&&c.hasOwnProperty(d)&&(a[d]=c[d])}function a(a){E.safeMixin(this.prototype,a);return this}function d(a,b){a instanceof Array||"function"==typeof a||(b=a,a=void 0);b=b||{};a=a||[];return E([this].concat(a),b)}function g(a,b){return function(){var c=
arguments,d=c,g=c[0],m,x;x=a.length;var A;if(!(this instanceof c.callee))return C(c);if(b&&(g&&g.preamble||this.preamble)){A=Array(a.length);A[0]=c;for(m=0;;){if(g=c[0])(g=g.preamble)&&(c=g.apply(this,c)||c);g=a[m].prototype;(g=g.hasOwnProperty("preamble")&&g.preamble)&&(c=g.apply(this,c)||c);if(++m==x)break;A[m]=c}}for(m=x-1;0<=m;--m)g=a[m],(g=(x=g._meta)?x.ctor:g)&&g.apply(this,A?A[m]:c);(g=this.postscript)&&g.apply(this,d)}}function m(a,b){return function(){var c=arguments,d=c,g=c[0];if(!(this instanceof
c.callee))return C(c);b&&(g&&(g=g.preamble)&&(d=g.apply(this,d)||d),(g=this.preamble)&&g.apply(this,d));a&&a.apply(this,c);(g=this.postscript)&&g.apply(this,c)}}function w(a){return function(){var b=arguments,c=0,d,g;if(!(this instanceof b.callee))return C(b);for(;d=a[c];++c)if(d=(g=d._meta)?g.ctor:d){d.apply(this,b);break}(d=this.postscript)&&d.apply(this,b)}}function A(a,b,c){return function(){var d,g,m=0,x=1;c&&(m=b.length-1,x=-1);for(;d=b[m];m+=x)g=d._meta,(d=(g?g.hidden:d.prototype)[a])&&d.apply(this,
arguments)}}function x(a){L.prototype=a.prototype;a=new L;L.prototype=null;return a}function C(a){var b=a.callee,c=x(b);b.apply(c,a);return c}function E(C,s,e){"string"!=typeof C&&(e=s,s=C,C="");e=e||{};var t,L,U,V,W,v,O,z=1,l=s;if("[object Array]"==I.call(s)){z=C;U=[];V=[{cls:0,refs:[]}];v={};for(var f=1,r=s.length,k=0,B,H,J,Q;k<r;++k){(B=s[k])?"[object Function]"!=I.call(B)&&n("mixin #"+k+" is not a callable constructor.",z):n("mixin #"+k+" is unknown. Did you use dojo.require to pull it in?",z);
H=B._meta?B._meta.bases:[B];J=0;for(B=H.length-1;0<=B;--B)Q=H[B].prototype,Q.hasOwnProperty("declaredClass")||(Q.declaredClass="uniqName_"+D++),Q=Q.declaredClass,v.hasOwnProperty(Q)||(v[Q]={count:0,refs:[],cls:H[B]},++f),Q=v[Q],J&&J!==Q&&(Q.refs.push(J),++J.count),J=Q;++J.count;V[0].refs.push(J)}for(;V.length;){J=V.pop();U.push(J.cls);for(--f;L=J.refs,1==L.length;){J=L[0];if(!J||--J.count){J=0;break}U.push(J.cls);--f}if(J){k=0;for(r=L.length;k<r;++k)J=L[k],--J.count||V.push(J)}}f&&n("can't build consistent linearization",
z);B=s[0];U[0]=B?B._meta&&B===U[U.length-B._meta.bases.length]?B._meta.bases.length:1:0;v=U;U=v[0];z=v.length-U;s=v[z]}else v=[0],s?"[object Function]"==I.call(s)?(U=s._meta,v=v.concat(U?U.bases:s)):n("base class is not a callable constructor.",C):null!==s&&n("unknown base class. Did you use dojo.require to pull it in?",C);if(s)for(L=z-1;;--L){t=x(s);if(!L)break;U=v[L];(U._meta?c:F)(t,U.prototype);V=new Function;V.superclass=s;V.prototype=t;s=t.constructor=V}else t={};E.safeMixin(t,e);U=e.constructor;
U!==y.constructor&&(U.nom=G,t.constructor=U);for(L=z-1;L;--L)(U=v[L]._meta)&&U.chains&&(O=F(O||{},U.chains));t["-chains-"]&&(O=F(O||{},t["-chains-"]));U=!O||!O.hasOwnProperty(G);v[0]=V=O&&"manual"===O.constructor?w(v):1==v.length?m(e.constructor,U):g(v,U);V._meta={bases:v,hidden:e,chains:O,parents:l,ctor:e.constructor};V.superclass=s&&s.prototype;V.extend=a;V.createSubclass=d;V.prototype=t;t.constructor=V;t.getInherited=q;t.isInstanceOf=h;t.inherited=N;t.__inherited=u;C&&(t.declaredClass=C,b.setObject(C,
V));if(O)for(W in O)t[W]&&("string"==typeof O[W]&&W!=G)&&(U=t[W]=A(W,v,"after"===O[W]),U.nom=W);return V}var F=b.mixin,y=Object.prototype,I=y.toString,L=new Function,D=0,G="constructor",N=e.config.isDebug?s:u;e.safeMixin=E.safeMixin=function(a,c){var d,g;for(d in c)if(g=c[d],(g!==y[d]||!(d in y))&&d!=G)"[object Function]"==I.call(g)&&(g.nom=d),a[d]=g;if(t("bug-for-in-skips-shadowed"))for(var m=b._extraNames,x=m.length;x;)if(d=m[--x],g=c[d],(g!==y[d]||!(d in y))&&d!=G)"[object Function]"==I.call(g)&&
(g.nom=d),a[d]=g;return a};return e.declare=E})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(e,t,b,n,u,q,s,h,c){function a(a,c,d){return[n.isString(a)?a.split(""):a,c||b.global,n.isString(d)?new Function("item","index","array",d):d]}function d(a){return void 0!==a&&null!==a}function g(a,b,c){var g=c.match(/([^\(]+)(\([^\)]+\))?/i),m=n.trim(g[1]);c=b[a];var g=t.fromJson((g[2]?
n.trim(g[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),x=g.utcOffset;if(-1===e.indexOf(w,m))m=n.getObject(m),n.isFunction(m)&&(c=m(c,a,b,g));else if("number"===typeof c||"string"===typeof c&&c&&!isNaN(Number(c)))switch(c=Number(c),m){case "NumberFormat":return s.format(c,g);case "DateString":a=new Date(c);if(g.local||g.systemLocale)return g.systemLocale?a.toLocaleDateString()+(g.hideTime?"":" "+a.toLocaleTimeString()):a.toDateString()+(g.hideTime?"":" "+a.toTimeString());a=a.toUTCString();g.hideTime&&
(a=a.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return a;case "DateFormat":return a=new Date(c),d(x)&&(a=u.add(a,"minute",a.getTimezoneOffset()-x)),h.format(a,g)}return d(c)?c:""}function m(a,b){var c;if(b)for(c in a)a.hasOwnProperty(c)&&(void 0===a[c]?delete a[c]:a[c]instanceof Object&&m(a[c],!0));else for(c in a)a.hasOwnProperty(c)&&void 0===a[c]&&delete a[c];return a}var w=["NumberFormat","DateString","DateFormat"],A=/<\/?[^>]+>/g,x={valueOf:function(a,b){for(var c in a)if(a[c]==b)return c;
return null},stripTags:function(a){if(a){var b=typeof a;if("string"===b)a=a.replace(A,"");else if("object"===b)for(var c in a)(b=a[c])&&"string"===typeof b&&(b=b.replace(A,"")),a[c]=b}return a},substitute:function(a,b,c){var m,x,A;d(c)&&(n.isObject(c)?(m=c.first,x=c.dateFormat,A=c.numberFormat):m=c);if(!b||"${*}"===b){b=[];for(var h in a){c=a[h];if(x&&-1!==e.indexOf(x.properties||"",h))c=g(h,a,x.formatter||"DateString");else if(A&&-1!==e.indexOf(A.properties||"",h))c=g(h,a,A.formatter||"NumberFormat");
b.push(h+" \x3d "+(d(c)?c:"")+"\x3cbr/\x3e");if(m)break}return b.join("")}return n.replace(b,n.hitch({obj:a},function(a,b){var c=b.split(":");return 1<c.length?(b=c[0],c.shift(),g(b,this.obj,c.join(":"))):x&&-1!==e.indexOf(x.properties||"",b)?g(b,this.obj,x.formatter||"DateString"):A&&-1!==e.indexOf(A.properties||"",b)?g(b,this.obj,A.formatter||"NumberFormat"):d(this.obj[b])?this.obj[b]:""}),/\$\{([^\}]+)\}/g)},filter:function(b,c,d){c=a(b,d,c);d={};var g;b=c[0];for(g in b)c[2].call(c[g],b[g],g,b)&&
(d[g]=b[g]);return d},isDefined:d,fixJson:m};q("extend-esri")&&(n.mixin(c,x),c._isDefined=d,c._getParts=a,c._sanitize=m);return x})},"dojo/date":function(){define(["./has","./_base/lang"],function(e,t){var b={getDaysInMonth:function(n){var e=n.getMonth();return 1==e&&b.isLeapYear(n)?29:[31,28,31,30,31,30,31,31,30,31,30,31][e]},isLeapYear:function(b){b=b.getFullYear();return!(b%400)||!(b%4)&&!!(b%100)},getTimezoneName:function(b){var e=b.toString(),q="",s=e.indexOf("(");if(-1<s)q=e.substring(++s,e.indexOf(")"));
else if(s=/([A-Z\/]+) \d{4}$/,e=e.match(s))q=e[1];else if(e=b.toLocaleString(),s=/ ([A-Z\/]+)$/,e=e.match(s))q=e[1];return"AM"==q||"PM"==q?"":q},compare:function(b,e,q){b=new Date(+b);e=new Date(+(e||new Date));"date"==q?(b.setHours(0,0,0,0),e.setHours(0,0,0,0)):"time"==q&&(b.setFullYear(0,0,0),e.setFullYear(0,0,0));return b>e?1:b<e?-1:0},add:function(b,e,q){var s=new Date(+b),h=!1,c="Date";switch(e){case "day":break;case "weekday":var a;(e=q%5)?a=parseInt(q/5):(e=0<q?5:-5,a=0<q?(q-5)/5:(q+5)/5);
var d=b.getDay(),g=0;6==d&&0<q?g=1:0==d&&0>q&&(g=-1);d+=e;if(0==d||6==d)g=0<q?2:-2;q=7*a+e+g;break;case "year":c="FullYear";h=!0;break;case "week":q*=7;break;case "quarter":q*=3;case "month":h=!0;c="Month";break;default:c="UTC"+e.charAt(0).toUpperCase()+e.substring(1)+"s"}if(c)s["set"+c](s["get"+c]()+q);h&&s.getDate()<b.getDate()&&s.setDate(0);return s},difference:function(e,u,q){u=u||new Date;q=q||"day";var s=u.getFullYear()-e.getFullYear(),h=1;switch(q){case "quarter":e=e.getMonth();u=u.getMonth();
e=Math.floor(e/3)+1;u=Math.floor(u/3)+1;h=u+4*s-e;break;case "weekday":s=Math.round(b.difference(e,u,"day"));q=parseInt(b.difference(e,u,"week"));h=s%7;if(0==h)s=5*q;else{var c=0,a=e.getDay();u=u.getDay();q=parseInt(s/7);h=s%7;e=new Date(e);e.setDate(e.getDate()+7*q);e=e.getDay();if(0<s)switch(!0){case 6==a:c=-1;break;case 0==a:c=0;break;case 6==u:c=-1;break;case 0==u:c=-2;break;case 5<e+h:c=-2}else if(0>s)switch(!0){case 6==a:c=0;break;case 0==a:c=1;break;case 6==u:c=2;break;case 0==u:c=1;break;
case 0>e+h:c=2}s=s+c-2*q}h=s;break;case "year":h=s;break;case "month":h=u.getMonth()-e.getMonth()+12*s;break;case "week":h=parseInt(b.difference(e,u,"day")/7);break;case "day":h/=24;case "hour":h/=60;case "minute":h/=60;case "second":h/=1E3;case "millisecond":h*=u.getTime()-e.getTime()}return Math.round(h)}};t.mixin(t.getObject("dojo.date",!0),b);return b})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(e,t,b,n,u){var q={};e.setObject("dojo.number",
q);q.format=function(b,c){c=e.mixin({},c||{});var a=t.normalizeLocale(c.locale),a=t.getLocalization("dojo.cldr","number",a);c.customs=a;a=c.pattern||a[(c.type||"decimal")+"Format"];return isNaN(b)||Infinity==Math.abs(b)?null:q._applyPattern(b,a,c)};q._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;q._applyPattern=function(b,c,a){a=a||{};var d=a.customs.group,g=a.customs.decimal;c=c.split(";");var m=c[0];c=c[0>b?1:0]||"-"+m;if(-1!=c.indexOf("%"))b*=100;else if(-1!=c.indexOf("\u2030"))b*=1E3;else if(-1!=c.indexOf("\u00a4"))d=
a.customs.currencyGroup||d,g=a.customs.currencyDecimal||g,c=c.replace(/\u00a4{1,3}/,function(b){return a[["symbol","currency","displayName"][b.length-1]]||a.currency||""});else if(-1!=c.indexOf("E"))throw Error("exponential notation not supported");var w=q._numberPatternRE,m=m.match(w);if(!m)throw Error("unable to find a number expression in pattern: "+c);!1===a.fractional&&(a.places=0);return c.replace(w,q._formatAbsolute(b,m[0],{decimal:g,group:d,places:a.places,round:a.round}))};q.round=function(b,
c,a){a=10/(a||10);return(a*+b).toFixed(c)/a};if(0==(0.9).toFixed()){var s=q.round;q.round=function(b,c,a){var d=Math.pow(10,-c||0),g=Math.abs(b);if(!b||g>=d)d=0;else if(g/=d,0.5>g||0.95<=g)d=0;return s(b,c,a)+(0<b?d:-d)}}q._formatAbsolute=function(b,c,a){a=a||{};!0===a.places&&(a.places=0);Infinity===a.places&&(a.places=6);c=c.split(".");var d="string"==typeof a.places&&a.places.indexOf(","),g=a.places;d?g=a.places.substring(d+1):0<=g||(g=(c[1]||[]).length);0>a.round||(b=q.round(b,g,a.round));b=String(Math.abs(b)).split(".");
var m=b[1]||"";c[1]||a.places?(d&&(a.places=a.places.substring(0,d)),d=void 0!==a.places?a.places:c[1]&&c[1].lastIndexOf("0")+1,d>m.length&&(b[1]=n.pad(m,d,"0",!0)),g<m.length&&(b[1]=m.substr(0,g))):b[1]&&b.pop();g=c[0].replace(",","");d=g.indexOf("0");-1!=d&&(d=g.length-d,d>b[0].length&&(b[0]=n.pad(b[0],d)),-1==g.indexOf("#")&&(b[0]=b[0].substr(b[0].length-d)));var g=c[0].lastIndexOf(","),w,A;-1!=g&&(w=c[0].length-g-1,c=c[0].substr(0,g),g=c.lastIndexOf(","),-1!=g&&(A=c.length-g-1));c=[];for(g=b[0];g;)d=
g.length-w,c.push(0<d?g.substr(d):g),g=0<d?g.slice(0,d):"",A&&(w=A,delete A);b[0]=c.reverse().join(a.group||",");return b.join(a.decimal||".")};q.regexp=function(b){return q._parseInfo(b).regexp};q._parseInfo=function(b){b=b||{};var c=t.normalizeLocale(b.locale),c=t.getLocalization("dojo.cldr","number",c),a=b.pattern||c[(b.type||"decimal")+"Format"],d=c.group,g=c.decimal,m=1;if(-1!=a.indexOf("%"))m/=100;else if(-1!=a.indexOf("\u2030"))m/=1E3;else{var w=-1!=a.indexOf("\u00a4");w&&(d=c.currencyGroup||
d,g=c.currencyDecimal||g)}c=a.split(";");1==c.length&&c.push("-"+c[0]);c=u.buildGroupRE(c,function(a){a="(?:"+u.escapeString(a,".")+")";return a.replace(q._numberPatternRE,function(a){var c={signed:!1,separator:b.strict?d:[d,""],fractional:b.fractional,decimal:g,exponent:!1};a=a.split(".");var A=b.places;1==a.length&&1!=m&&(a[1]="###");1==a.length||0===A?c.fractional=!1:(void 0===A&&(A=b.pattern?a[1].lastIndexOf("0")+1:Infinity),A&&void 0==b.fractional&&(c.fractional=!0),!b.places&&A<a[1].length&&
(A+=","+a[1].length),c.places=A);a=a[0].split(",");1<a.length&&(c.groupSize=a.pop().length,1<a.length&&(c.groupSize2=a.pop().length));return"("+q._realNumberRegexp(c)+")"})},!0);w&&(c=c.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,c,d,g){a=u.escapeString(b[["symbol","currency","displayName"][d.length-1]]||b.currency||"");c=c?"[\\s\\xa0]":"";g=g?"[\\s\\xa0]":"";return!b.strict?(c&&(c+="*"),g&&(g+="*"),"(?:"+c+a+g+")?"):c+a+g}));return{regexp:c.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:d,
decimal:g,factor:m}};q.parse=function(b,c){var a=q._parseInfo(c),d=RegExp("^"+a.regexp+"$").exec(b);if(!d)return NaN;var g=d[1];if(!d[1]){if(!d[2])return NaN;g=d[2];a.factor*=-1}g=g.replace(RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return g*a.factor};q._realNumberRegexp=function(b){b=b||{};"places"in b||(b.places=Infinity);"string"!=typeof b.decimal&&(b.decimal=".");if(!("fractional"in b)||/^0/.test(b.places))b.fractional=[!0,!1];"exponent"in b||(b.exponent=[!0,!1]);"eSigned"in
b||(b.eSigned=[!0,!1]);var c=q._integerRegexp(b),a=u.buildGroupRE(b.fractional,function(a){var c="";a&&0!==b.places&&(c="\\"+b.decimal,c=Infinity==b.places?"(?:"+c+"\\d+)?":c+("\\d{"+b.places+"}"));return c},!0),d=u.buildGroupRE(b.exponent,function(a){return a?"([eE]"+q._integerRegexp({signed:b.eSigned})+")":""}),c=c+a;a&&(c="(?:(?:"+c+")|(?:"+a+"))");return c+d};q._integerRegexp=function(b){b=b||{};"signed"in b||(b.signed=[!0,!1]);"separator"in b?"groupSize"in b||(b.groupSize=3):b.separator="";var c=
u.buildGroupRE(b.signed,function(a){return a?"[-+]":""},!0),a=u.buildGroupRE(b.separator,function(a){if(!a)return"(?:\\d+)";a=u.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var c=b.groupSize,m=b.groupSize2;return m?(a="(?:0|[1-9]\\d{0,"+(m-1)+"}(?:["+a+"]\\d{"+m+"})*["+a+"]\\d{"+c+"})",0<c-m?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+a+"]\\d{"+c+"})*)"},!0);return c+a};return q})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(e,
t){var b=/[&<>'"\/]/g,n={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},u={};t.setObject("dojo.string",u);u.escape=function(q){return!q?"":q.replace(b,function(b){return n[b]})};u.rep=function(b,s){if(0>=s||!b)return"";for(var h=[];;){s&1&&h.push(b);if(!(s>>=1))break;b+=b}return h.join("")};u.pad=function(b,s,h,c){h||(h="0");b=String(b);s=u.rep(h,Math.ceil((s-b.length)/h.length));return c?b+s:s+b};u.substitute=function(b,s,h,c){c=c||e.global;h=
h?t.hitch(c,h):function(a){return a};return b.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(a,b,g){a=t.getObject(b,!1,s);g&&(a=t.getObject(g,!1,c).call(c,a,b));return h(a,b).toString()})};u.trim=String.prototype.trim?t.trim:function(b){b=b.replace(/^\s+/,"");for(var s=b.length-1;0<=s;s--)if(/\S/.test(b.charAt(s))){b=b.substring(0,s+1);break}return b};return u})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(e,t){var b={};t.setObject("dojo.regexp",b);b.escapeString=
function(b,e){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return e&&-1!=e.indexOf(b)?b:"\\"+b})};b.buildGroupRE=function(e,u,q){if(!(e instanceof Array))return u(e);for(var s=[],h=0;h<e.length;h++)s.push(u(e[h]));return b.group(s.join("|"),q)};b.group=function(b,e){return"("+(e?"?:":"")+b+")"};return b})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(e,
t,b,n,u,q,s,h,c){function a(a,b,c,d){return d.replace(/([a-z])\1*/ig,function(g){var w,h,q=g.charAt(0);g=g.length;var e=["abbr","wide","narrow"];switch(q){case "G":w=b[4>g?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":w=a.getFullYear();switch(g){case 1:break;case 2:if(!c.fullYear){w=String(w);w=w.substr(w.length-2);break}default:h=!0}break;case "Q":case "q":w=Math.ceil((a.getMonth()+1)/3);h=!0;break;case "M":case "L":w=a.getMonth();3>g?(w+=1,h=!0):(q=["months","L"==q?"standAlone":"format",
e[g-3]].join("-"),w=b[q][w]);break;case "w":w=m._getWeekOfYear(a,0);h=!0;break;case "d":w=a.getDate();h=!0;break;case "D":w=m._getDayOfYear(a);h=!0;break;case "e":case "c":if(w=a.getDay(),2>g){w=(w-n.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":w=a.getDay();3>g?(w+=1,h=!0):(q=["days","c"==q?"standAlone":"format",e[g-3]].join("-"),w=b[q][w]);break;case "a":q=12>a.getHours()?"am":"pm";w=c[q]||b["dayPeriods-format-wide-"+q];break;case "h":case "H":case "K":case "k":h=a.getHours();switch(q){case "h":w=
h%12||12;break;case "H":w=h;break;case "K":w=h%12;break;case "k":w=h||24}h=!0;break;case "m":w=a.getMinutes();h=!0;break;case "s":w=a.getSeconds();h=!0;break;case "S":w=Math.round(a.getMilliseconds()*Math.pow(10,g-3));h=!0;break;case "v":case "z":if(w=m._getZone(a,!0,c))break;g=4;case "Z":q=m._getZone(a,!1,c);q=[0>=q?"+":"-",s.pad(Math.floor(Math.abs(q)/60),2),s.pad(Math.abs(q)%60,2)];4==g&&(q.splice(0,0,"GMT"),q.splice(3,0,":"));w=q.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
d);}h&&(w=s.pad(w,g));return w})}function d(a,b,c,d){var g=function(a){return a};b=b||g;c=c||g;d=d||g;var m=a.match(/(''|[^'])+/g),w="'"==a.charAt(0);t.forEach(m,function(a,d){a?(m[d]=(w?c:b)(a.replace(/''/g,"'")),w=!w):m[d]=""});return d(m.join(""))}function g(a,b,c,d){d=q.escapeString(d);c.strict||(d=d.replace(" a"," ?a"));return d.replace(/([a-z])\1*/ig,function(d){var g;g=d.charAt(0);var m=d.length,w="",h="";c.strict?(1<m&&(w="0{"+(m-1)+"}"),2<m&&(h="0{"+(m-2)+"}")):(w="0?",h="0{0,2}");switch(g){case "y":g=
"\\d{2,4}";break;case "M":case "L":g=2<m?"\\S+?":"1[0-2]|"+w+"[1-9]";break;case "D":g="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+w+"[1-9][0-9]|"+h+"[1-9]";break;case "d":g="3[01]|[12]\\d|"+w+"[1-9]";break;case "w":g="[1-4][0-9]|5[0-3]|"+w+"[1-9]";break;case "E":case "e":case "c":g=".+?";break;case "h":g="1[0-2]|"+w+"[1-9]";break;case "k":g="1[01]|"+w+"\\d";break;case "H":g="1\\d|2[0-3]|"+w+"\\d";break;case "K":g="1\\d|2[0-4]|"+w+"[1-9]";break;case "m":case "s":g="[0-5]\\d";break;case "S":g="\\d{"+m+"}";
break;case "a":m=c.am||b["dayPeriods-format-wide-am"];w=c.pm||b["dayPeriods-format-wide-pm"];g=m+"|"+w;c.strict||(m!=m.toLowerCase()&&(g+="|"+m.toLowerCase()),w!=w.toLowerCase()&&(g+="|"+w.toLowerCase()),-1!=g.indexOf(".")&&(g+="|"+g.replace(/\./g,"")));g=g.replace(/\./g,"\\.");break;default:g=".*"}a&&a.push(d);return"("+g+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var m={};e.setObject(c.id.replace(/\//g,"."),m);m._getZone=function(a,c,d){return c?b.getTimezoneName(a):a.getTimezoneOffset()};m.format=
function(b,c){c=c||{};var g=u.normalizeLocale(c.locale),w=c.formatLength||"short",g=m._getGregorianBundle(g),h=[],y=e.hitch(this,a,b,g,c);if("year"==c.selector)return d(g["dateFormatItem-yyyy"]||"yyyy",y);var s;"date"!=c.selector&&(s=c.timePattern||g["timeFormat-"+w])&&h.push(d(s,y));"time"!=c.selector&&(s=c.datePattern||g["dateFormat-"+w])&&h.push(d(s,y));return 1==h.length?h[0]:g["dateTimeFormat-"+w].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return h[b]})};m.regexp=function(a){return m._parseInfo(a).regexp};
m._parseInfo=function(a){a=a||{};var b=u.normalizeLocale(a.locale),b=m._getGregorianBundle(b),c=a.formatLength||"short",w=a.datePattern||b["dateFormat-"+c],h=a.timePattern||b["timeFormat-"+c],c="date"==a.selector?w:"time"==a.selector?h:b["dateTimeFormat-"+c].replace(/\{(\d+)\}/g,function(a,b){return[h,w][b]}),y=[];return{regexp:d(c,e.hitch(this,g,y,b,a)),tokens:y,bundle:b}};m.parse=function(a,c){var d=/[\u200E\u200F\u202A\u202E]/g,g=m._parseInfo(c),w=g.tokens,h=g.bundle,d=RegExp("^"+g.regexp.replace(d,
"")+"$",g.strict?"":"i").exec(a&&a.replace(d,""));if(!d)return null;var s=["abbr","wide","narrow"],q=[1970,0,1,0,0,0,0],e="",d=t.every(d,function(a,b){if(!b)return!0;var d=w[b-1],g=d.length,d=d.charAt(0);switch(d){case "y":if(2!=g&&c.strict)q[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),g=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),q[0]=a<d?g+a:g-100+a;else{if(c.strict)return!1;q[0]=a}break;case "M":case "L":if(2<g){if(g=h["months-"+("L"==d?"standAlone":"format")+
"-"+s[g-3]].concat(),c.strict||(a=a.replace(".","").toLowerCase(),g=t.map(g,function(a){return a.replace(".","").toLowerCase()})),a=t.indexOf(g,a),-1==a)return!1}else a--;q[1]=a;break;case "E":case "e":case "c":g=h["days-"+("c"==d?"standAlone":"format")+"-"+s[g-3]].concat();c.strict||(a=a.toLowerCase(),g=t.map(g,function(a){return a.toLowerCase()}));a=t.indexOf(g,a);if(-1==a)return!1;break;case "D":q[1]=0;case "d":q[2]=a;break;case "a":g=c.am||h["dayPeriods-format-wide-am"];d=c.pm||h["dayPeriods-format-wide-pm"];
if(!c.strict){var m=/\./g;a=a.replace(m,"").toLowerCase();g=g.replace(m,"").toLowerCase();d=d.replace(m,"").toLowerCase()}if(c.strict&&a!=g&&a!=d)return!1;e=a==d?"p":a==g?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;q[3]=a;break;case "m":q[4]=a;break;case "s":q[5]=a;break;case "S":q[6]=a}return!0}),g=+q[3];"p"===e&&12>g?q[3]=g+12:"a"===e&&12==g&&(q[3]=0);g=new Date(q[0],q[1],q[2],q[3],q[4],q[5],q[6]);c.strict&&g.setFullYear(q[0]);var n=w.join(""),u=-1!=n.indexOf("d"),
n=-1!=n.indexOf("M");if(!d||n&&g.getMonth()>q[1]||u&&g.getDate()>q[2])return null;if(n&&g.getMonth()<q[1]||u&&g.getDate()<q[2])g=b.add(g,"hour",1);return g};var w=[];m.addCustomFormats=function(a,b){w.push({pkg:a,name:b})};m._getGregorianBundle=function(a){var b={};t.forEach(w,function(c){c=u.getLocalization(c.pkg,c.name,a);b=e.mixin(b,c)},this);return b};m.addCustomFormats(c.id.replace(/\/date\/locale$/,".cldr"),"gregorian");m.getNames=function(a,b,c,d){var g;d=m._getGregorianBundle(d);a=[a,c,b];
"standAlone"==c&&(c=a.join("-"),g=d[c],1==g[0]&&(g=void 0));a[1]="format";return(g||d[a.join("-")]).concat()};m.isWeekend=function(a,b){var c=n.getWeekend(b),d=(a||new Date).getDay();c.end<c.start&&(c.end+=7,d<c.start&&(d+=7));return d>=c.start&&d<=c.end};m._getDayOfYear=function(a){return b.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};m._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=Math.floor((m._getDayOfYear(a)+(c-b+7)%7-
1)/7);c==b&&d++;return d};return m})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(e,t){var b={};e.setObject("dojo.cldr.supplemental",b);b.getFirstDayOfWeek=function(e){e={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,
nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[b._region(e)];return void 0===e?1:e};b._region=function(b){b=t.normalizeLocale(b);b=b.split("-");var e=b[1];e?4==e.length&&(e=b[2]):e={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",
es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",
mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",
ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",
cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",
kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",
nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",
tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[b[0]];return e};b.getWeekend=function(e){var u=b._region(e);e={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[u];u={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,
bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[u];void 0===e&&(e=6);void 0===u&&(u=0);return{start:e,end:u}};return b})},"esri/SpatialReference":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ./kernel ./lang".split(" "),function(e,t,b,n,u,q){var s=[-2.0037508342788905E7,2.0037508342788905E7],h=[-2.0037508342787E7,2.0037508342787E7];e=e(null,{declaredClass:"esri.SpatialReference",constructor:function(c){c&&(b.isObject(c)?b.mixin(this,c):b.isString(c)?
this.wkt=c:this.wkid=c)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:s,
origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:s,origin:h,dx:1E-5},
3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:s,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:s,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==t.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==t.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(b){var a=!1;b&&(a=this.isWebMercator()&&4326===b.wkid||b.isWebMercator()&&4326===this.wkid);return a},isWebMercator:function(){return this._isWebMercator()},equals:function(b){var a=!1;b&&(this===b&&
(a=!0),this.wkid||b.wkid?a=this.wkid===b.wkid||this.isWebMercator()&&b.isWebMercator()||this.wkid===b.latestWkid||b.wkid===this.latestWkid:this.wkt&&b.wkt&&(a=this.wkt.toUpperCase()===b.wkt.toUpperCase()));return a},toJson:function(){var b=null,a=q.isDefined;a(this.wkid)?b={wkid:this.wkid}:a(this.wkt)&&(b={wkt:this.wkt});b&&a(this.latestWkid)&&(b.latestWkid=this.latestWkid);return b}});n("extend-esri")&&(u.SpatialReference=e);return e})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(e,t,b,n,u){e=e(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(b){this.spatialReference=b;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new u(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(b){return this.cache&&this.cache[b]},setCacheValue:function(b,s){this.cache||
(this.cache={});this.cache[b]=s}});b("extend-esri")&&t.setObject("geometry.Geometry",e,n);return e})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(e,t,b,n,u,q,s,h){function c(a,b){89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);var c=b*w;return[a*w*d,d/2*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function a(a,b,c){a=a/d*m;if(c)return b=g/2-2*Math.atan(Math.exp(-1*b/d)),[a,b*m];
c=a-360*Math.floor((a+180)/360);b=g/2-2*Math.atan(Math.exp(-1*b/d));return[c,b*m]}var d=6378137,g=3.141592653589793,m=57.29577951308232,w=0.017453292519943,A={type:"point",x:0,y:0};e=e(s,{declaredClass:"esri.geometry.Point",constructor:function(a,b,c){t.mixin(this,A);t.isArray(a)?(this.x=a[0],this.y=a[1],this.spatialReference=b):t.isObject(a)?(t.mixin(this,a),u.isDefined(this.latitude)&&(this.y=this.latitude),u.isDefined(this.longitude)&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=
h.createSpatialReference(this.spatialReference))):(this.x=a,this.y=b,this.spatialReference=c);this.verifySR()},offset:function(a,b){return new this.constructor(this.x+a,this.y+b,this.spatialReference)},setX:function(a){this.x=a;this.clearCache();return this},setY:function(a){this.y=a;this.clearCache();return this},setLongitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.setX(c(a,this.y)[0]):4326===b.wkid&&this.setX(a));return this},setLatitude:function(a){var b=this.spatialReference;
b&&(b._isWebMercator()?this.setY(c(this.x,a)[1]):4326===b.wkid&&this.setY(a));return this},getLongitude:function(){var b=this.spatialReference,c;b&&(b._isWebMercator()?c=a(this.x,this.y)[0]:4326===b.wkid&&(c=this.x));return c},getLatitude:function(){var b=this.spatialReference,c;b&&(b._isWebMercator()?c=a(this.x,this.y)[1]:4326===b.wkid&&(c=this.y));return c},update:function(a,b){this.x=a;this.y=b;this.clearCache();return this},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var c=
b._getInfo();if(c){var d=c.valid[0],g=c.valid[1],c=2*g;a>g?(d=Math.ceil(Math.abs(a-g)/c),a-=d*c):a<d&&(d=Math.ceil(Math.abs(a-d)/c),a+=d*c)}}return new this.constructor(a,this.y,b)},toJson:function(){var a={x:this.x,y:this.y},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});e.lngLatToXY=c;e.xyToLngLat=a;e.defaultProps=A;b("extend-esri")&&(t.setObject("geometry.Point",e,n),n.geometry.defaultPoint=A);return e})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference",
"./kernel","./sniff","dojo/_base/lang"],function(e,t,b,n,u){function q(b){var c=!1;if(b&&(b.ics||b.icsid))c=!0;return c}var s={isICS:q,createSpatialReference:function(b){var c=null;b&&(c=q(b)?new t(b):new e(b));return c}};n("extend-esri")&&u.mixin(b,s);return s})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),function(e,t,b,n,u,q){e=e(q,{declaredClass:"esri.ImageSpatialReference",constructor:function(b){b&&
(t.isObject(b)&&t.mixin(this,b),this.url||console.error("ImageSpatialReference: must provide image service URL."))},icsid:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(b){var h=!1;b&&(this.icsid&&b.icsid?h=this.icsid===b.icsid:this.ics&&b.ics&&(h=this.ics===b.ics));return h},toJson:function(b){var h=null,c=u.isDefined;b=c(b)?b:!0;c(this.icsid)?h={icsid:this.icsid}:c(this.ics)&&(h={ics:this.ics});c(this.url)&&(c(h)&&b)&&(h.url=this.url);return h}});
b("extend-esri")&&(n.ImageSpatialReference=e);return e})},"esri/sniff":function(){define(["dojo/_base/sniff","./kernel"],function(e,t){var b=e("ff"),n=e("ie"),u=void 0===n&&7<=e("trident"),q=e("webkit"),s=e("opera"),h=e("chrome"),c=e("safari"),a=navigator.userAgent,d;(d=a.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&e.add("esri-iphone",parseFloat(d[2].replace("_",".")));(d=a.match(/Android\s+(\d+\.\d+)/i))&&e.add("esri-android",parseFloat(d[1]));(d=a.match(/Fennec\/(\d+\.\d+)/i))&&e.add("esri-fennec",
parseFloat(d[1]));0<=a.indexOf("BlackBerry")&&0<=a.indexOf("WebKit")&&e.add("esri-blackberry",1);e.add("esri-touch",e("esri-iphone")||e("esri-android")||e("esri-blackberry")||6<=e("esri-fennec")||(b||q)&&document.createTouch?!0:!1);(d=a.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&e.add("esri-mobile",d);e.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);t._getDOMAccessor=function(a){var c="";b?c="Moz":q?c="Webkit":n?c="ms":s&&(c="O");return c+a.charAt(0).toUpperCase()+
a.substr(1)};e.add("esri-phonegap",!!window.cordova);e.add("esri-cors",e("esri-phonegap")||window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);e.add("esri-file-upload",window.FormData&&window.FileList?!0:!1);e.add("esri-workers",window.Worker?!0:!1);e.add("esri-transforms",u||9<=n||3.5<=b||4<=h||3.1<=c||10.5<=s||3.2<=e("esri-iphone")||2.1<=e("esri-android"));e.add("esri-transitions",u||10<=n||4<=b||4<=h||3.1<=c||10.5<=s||3.2<=e("esri-iphone")||2.1<=e("esri-android"));e.add("esri-transforms3d",
u||10<=b||12<=h||4<=c||3.2<=e("esri-iphone")||3<=e("esri-android"));e.add("esri-url-encodes-apostrophe",function(){var a=window.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")});3>e("esri-android")&&(e.add("esri-transforms",!1,!1,!0),e.add("esri-transitions",!1,!1,!0),e.add("esri-transforms3d",!1,!1,!0));t._css=function(a){var d=e("esri-transforms3d");if(void 0!==a&&null!==a)d=a;else if(d&&(h||c&&!e("esri-iphone")))d=!1;var w=d?"translate3d(":"translate(",A=d?h?",-1px)":",0px)":
")",x=d?"scale3d(":"scale(",C=d?",1)":")",E=d?"rotate3d(0,0,1,":"rotate(",u=d?"matrix3d(":"matrix(",y=d?",0,0,":",",t=d?",0,0,0,0,1,0,":",",L=d?",0,1)":")";return{names:{transition:q&&"-webkit-transition"||b&&"MozTransition"||s&&"OTransition"||n&&"msTransition"||"transition",transform:q&&"-webkit-transform"||b&&"MozTransform"||s&&"OTransform"||n&&"msTransform"||"transform",transformName:q&&"-webkit-transform"||b&&"-moz-transform"||s&&"-o-transform"||n&&"-ms-transform"||"transform",origin:q&&"-webkit-transform-origin"||
b&&"MozTransformOrigin"||s&&"OTransformOrigin"||n&&"msTransformOrigin"||"transformOrigin",endEvent:q&&"webkitTransitionEnd"||b&&"transitionend"||s&&"oTransitionEnd"||n&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return w+a+"px,"+b+"px"+A},scale:function(a){return x+a+","+a+C},rotate:function(a){return E+a+"deg)"},matrix:function(a){return u+a.xx+","+a.xy+y+a.yx+","+a.yy+t+a.dx.toFixed(10)+(b?"px,":",")+a.dy.toFixed(10)+(b?"px":"")+L},getScaleFromMatrix:function(a){if(!a)return 1;
a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")))}}};e("extend-esri")&&(t.isiPhone=e("esri-iphone"),t.isAndroid=e("esri-android"),t.isFennec=e("esri-fennec"),t.isBlackBerry=e("esri-blackberry"),t.isTouchEnabled=e("esri-touch"),t.isPointerEnabled=e("esri-pointer"),t._hasCors=e("esri-cors"),t._hasFileUpload=e("esri-file-upload"),t._hasTransforms=e("esri-transforms"),t._hasTransitions=e("esri-transitions"),t._has3DTransforms=e("esri-transforms3d"));
return e})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g){var m={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},w=e(h,{declaredClass:"esri.geometry.Extent",constructor:function(a,c,d,w,h){b.mixin(this,m);b.isObject(a)?(b.mixin(this,a),this.spatialReference&&(this.spatialReference=g.createSpatialReference(this.spatialReference))):
this.update(a,c,d,w,h);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new c((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},centerAt:function(a){var b=this.getCenter(),c=a.x-b.x;a=a.y-b.y;return new w(this.xmin+c,this.ymin+a,this.xmax+c,this.ymax+a,this.spatialReference)},update:function(a,b,c,d,g){this.xmin=a;this.ymin=b;this.xmax=c;this.ymax=d;this.spatialReference=
g;this.clearCache();return this},offset:function(a,b){return new w(this.xmin+a,this.ymin+b,this.xmax+a,this.ymax+b,this.spatialReference)},expand:function(a){var b=(1-a)/2;a=this.getWidth()*b;b*=this.getHeight();return new w(this.xmin+a,this.ymin+b,this.xmax-a,this.ymax-b,this.spatialReference)},intersects:function(b){if(!b)return!1;var c=b.type,d=this.spatialReference,g=b.spatialReference;d&&(g&&!d.equals(g)&&d._canProject(g))&&(b=d.isWebMercator()?a.geographicToWebMercator(b):a.webMercatorToGeographic(b,
!0));switch(c){case "point":return this.contains(b);case "multipoint":return this._intersectsMultipoint(b);case "extent":return this._intersectsExtent(b);case "polygon":return this._intersectsPolygon(b);case "polyline":return this._intersectsPolyline(b)}},normalize:function(){var a=this._normalize(!1,!0);b.isArray(a)||(a=[a]);return a},shiftCentralMeridian:function(){return this._normalize(!0)},_intersectsMultipoint:function(a){var b=a.points.length,c;for(c=0;c<b;c++)if(this.contains(a.getPoint(c)))return!0;
return!1},_intersectsExtent:function(a){var b,c,d,g,m=!1;this.xmin<=a.xmin?(b=a.xmin,this.xmax<b?m=!0:d=Math.min(this.xmax,a.xmax)-b):(b=this.xmin,a.xmax<b?m=!0:d=Math.min(this.xmax,a.xmax)-b);this.ymin<=a.ymin?(c=a.ymin,this.ymax<c?m=!0:g=Math.min(this.ymax,a.ymax)-c):(c=this.ymin,a.ymax<c?m=!0:g=Math.min(this.ymax,a.ymax)-c);return m?null:new w(b,c,b+d,c+g,this.spatialReference)},_intersectsPolygon:function(a){var b=[this.xmin,this.ymax],d=[this.xmax,this.ymax],g=[this.xmin,this.ymin],m=[this.xmax,
this.ymin],w=[b,d,g,m],b=[[g,b],[b,d],[d,m],[m,g]],g=a.rings,m=g.length,h,s=new c(0,0,this.spatialReference);h=w.length;for(d=0;d<h;d++)if(s.update(w[d][0],w[d][1]),a.contains(s))return!0;s.setSpatialReference(a.spatialReference);for(var q,e,d=0;d<m;d++)if(w=g[d],h=w.length){q=w[0];s.update(q[0],q[1]);if(this.contains(s))return!0;for(a=1;a<h;a++){e=w[a];s.update(e[0],e[1]);if(this.contains(s)||this._intersectsLine([q,e],b))return!0;q=e}}return!1},_intersectsPolyline:function(a){var b=[[[this.xmin,
this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],d,g=a.paths,m=g.length,w,h,s,q,e=new c(0,0,a.spatialReference);for(a=0;a<m;a++)if(w=g[a],h=w.length){s=w[0];e.update(s[0],s[1]);if(this.contains(e))return!0;for(d=1;d<h;d++){q=w[d];e.update(q[0],q[1]);if(this.contains(e)||this._intersectsLine([s,q],b))return!0;s=q}}return!1},_intersectsLine:function(a,b){var c=d._getLineIntersection2,
g,m=b.length;for(g=0;g<m;g++)if(c(a,b[g]))return!0;return!1},contains:function(a){if(!a)return!1;var b=a.type;if("point"===b){var d=this.spatialReference,g=a.spatialReference,b=a.x;a=a.y;d&&(g&&!d.equals(g)&&d._canProject(g))&&(a=d.isWebMercator()?c.lngLatToXY(b,a):c.xyToLngLat(b,a,!0),b=a[0],a=a[1]);return b>=this.xmin&&b<=this.xmax&&a>=this.ymin&&a<=this.ymax}return"extent"===b?this._containsExtent(a):!1},_containsExtent:function(a){var b=a.xmin,d=a.ymin,g=a.xmax,m=a.ymax,w=a.spatialReference;a=
new c(b,d,w);b=new c(b,m,w);m=new c(g,m,w);d=new c(g,d,w);return this.contains(a)&&this.contains(b)&&this.contains(m)&&this.contains(d)?!0:!1},union:function(a){return new w(Math.min(this.xmin,a.xmin),Math.min(this.ymin,a.ymin),Math.max(this.xmax,a.xmax),Math.max(this.ymax,a.ymax),this.spatialReference)},getExtent:function(){var a=this.spatialReference;return new w(this.xmin,this.ymin,this.xmax,this.ymax,a&&new s(a.toJson()))},_shiftCM:function(b){var c=this.getCacheValue("_shifted");if(!c){var c=
new w(this.toJson()),d=c.spatialReference;if(b=b||d._getInfo()){var g=this._getCM(b);if(g){var m=d._isWebMercator()?a.webMercatorToGeographic(g):g;c.xmin-=g.x;c.xmax-=g.x;d._isWebMercator()||(m.x=this._normalizeX(m.x,b).x);c.setSpatialReference(new s(q.substitute({Central_Meridian:m.x},4326===d.wkid?b.altTemplate:b.wkTemplate)))}}this.setCacheValue("_shifted",c)}return c},_getCM:function(a){var b,c=a.valid[0];a=a.valid[1];var d=this.xmin,g=this.xmax;if(!(d>=c&&d<=a)||!(g>=c&&g<=a))b=this.getCenter();
return b},_normalize:function(a,b,c){var d=new w(this.toJson()),g=d.spatialReference;if(g&&(c=c||g._getInfo())){var m=t.map(this._getParts(c),function(a){return a.extent});return 2<m.length?a?this._shiftCM(c):d.update(c.valid[0],d.ymin,c.valid[1],d.ymax,g):2===m.length?a?this._shiftCM(c):b?m:{rings:t.map(m,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:g}:m[0]||d}return d},_getParts:function(a){var b=this.getCacheValue("_parts");
if(!b){var b=[],c=this.xmin,d=this.xmax,g=this.ymin,m=this.ymax,h=this.spatialReference,s=this.getWidth(),q=c,e=d,n=0,u=0,t,R;a=a||h._getInfo();t=a.valid[0];R=a.valid[1];u=this._normalizeX(c,a);c=u.x;n=u.frameId;u=this._normalizeX(d,a);d=u.x;u=u.frameId;a=c===d&&0<s;if(s>2*R){s=new w(q<e?c:d,g,R,m,h);c=new w(t,g,q<e?d:c,m,h);R=new w(0,g,R,m,h);g=new w(t,g,0,m,h);h=[];t=[];s.contains(R)&&h.push(n);s.contains(g)&&t.push(n);c.contains(R)&&h.push(u);c.contains(g)&&t.push(u);for(m=n+1;m<u;m++)h.push(m),
t.push(m);b.push({extent:s,frameIds:[n]},{extent:c,frameIds:[u]},{extent:R,frameIds:h},{extent:g,frameIds:t})}else c>d||a?b.push({extent:new w(c,g,R,m,h),frameIds:[n]},{extent:new w(t,g,d,m,h),frameIds:[u]}):b.push({extent:new w(c,g,d,m,h),frameIds:[n]});this.setCacheValue("_parts",b)}return b},_normalizeX:function(a,b){var c=0,d=b.valid[0],g=b.valid[1],m=2*g;a>g?(c=Math.ceil(Math.abs(a-g)/m),a-=c*m):a<d&&(c=Math.ceil(Math.abs(a-d)/m),a+=c*m,c=-c);return{x:a,frameId:c}},toJson:function(){var a={xmin:this.xmin,
ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});w.defaultProps=m;n("extend-esri")&&(b.setObject("geometry.Extent",w,u),u.geometry.defaultExtent=m);return w})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(e,t,b,n,u,q){function s(a,b,c,m){if("point"===a.type){var w=b(a.x,a.y,m);return new a.constructor(w[0],w[1],new u(c))}if("extent"===
a.type){var w=b(a.xmin,a.ymin,m),h=b(a.xmax,a.ymax,m);return new a.constructor(w[0],w[1],h[0],h[1],new u(c))}if("polyline"===a.type||"polygon"===a.type){var w="polyline"===a.type,x=[],C;e.forEach(w?a.paths:a.rings,function(a){x.push(C=[]);e.forEach(a,function(a){C.push(b(a[0],a[1],m))})});return w?new a.constructor({paths:x,spatialReference:new u(c)}):new a.constructor({rings:x,spatialReference:new u(c)})}if("multipoint"===a.type){var s=[];e.forEach(a.points,function(a){s.push(b(a[0],a[1],m))});return new a.constructor({points:s,
spatialReference:new u(c)})}}function h(a,b){var c=a&&(null!=a.wkid?a:a.spatialReference),m=b&&(null!=b.wkid?b:b.spatialReference);return!c||!m?!1:m.equals(c)?!0:m._canProject(c)}var c={canProject:h,project:function(a,b){var c=a&&a.spatialReference,m=b&&(null!=b.wkid?b:b.spatialReference);c&&m?c.equals(m)?a=new a.constructor(a.toJson()):h(c,m)?m.isWebMercator()?a=s(a,q.lngLatToXY,{wkid:102100}):4326===m.wkid&&(a=s(a,q.xyToLngLat,{wkid:4326})):a=null:a=null;return a},lngLatToXY:q.lngLatToXY,xyToLngLat:q.xyToLngLat,
geographicToWebMercator:function(a){return s(a,q.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(a,b){return s(a,q.xyToLngLat,{wkid:4326},b)}};b("extend-esri")&&t.mixin(t.getObject("geometry",!0,n),c);return c})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(e,t,b,n){function u(b,a,d){return b instanceof n?new n(b.x+d*(a.x-b.x),b.y+d*(a.y-b.y)):[b[0]+d*(a[0]-b[0]),b[1]+d*(a[1]-b[1])]}function q(b,a){return 1E-8>Math.abs(b-a)}
function s(b,a,d,g){var m,w=q(b[0],a[0])?1E10:(b[1]-a[1])/(b[0]-a[0]),h=q(d[0],g[0])?1E10:(d[1]-g[1])/(d[0]-g[0]),x=b[1]-w*b[0],C=d[1]-h*d[0];if(q(w,h)){if(q(x,C)){if(q(b[0],a[0]))if(Math.min(b[1],a[1])<Math.max(d[1],g[1])||Math.max(b[1],a[1])>Math.min(d[1],g[1]))b=(b[1]+a[1]+d[1]+g[1]-Math.min(b[1],a[1],d[1],g[1])-Math.max(b[1],a[1],d[1],g[1]))/2,m=(b-x)/w;else return null;else if(Math.min(b[0],a[0])<Math.max(d[0],g[0])||Math.max(b[0],a[0])>Math.min(d[0],g[0]))m=(b[0]+a[0]+d[0]+g[0]-Math.min(b[0],
a[0],d[0],g[0])-Math.max(b[0],a[0],d[0],g[0]))/2,b=w*m+x;else return null;return[m,b]}return null}q(w,1E10)?(m=b[0],b=h*m+C):q(h,1E10)?(m=d[0],b=w*m+x):(m=-(x-C)/(w-h),b=b[1]===a[1]?b[1]:d[1]===g[1]?d[1]:w*m+x);return[m,b]}var h={getLength:function(b,a){var d=a.x-b.x,g=a.y-b.y;return Math.sqrt(d*d+g*g)},_getLength:function(b,a){var d=a[0]-b[0],g=a[1]-b[1];return Math.sqrt(d*d+g*g)},getPointOnLine:u,getMidpoint:function(b,a){return u(b,a,0.5)},_equals:q,_getLineIntersection:s,getLineIntersection:function(b,
a,d,g,m){(b=s([b.x,b.y],[a.x,a.y],[d.x,d.y],[g.x,g.y]))&&(b=new n(b[0],b[1],m));return b},_getLineIntersection2:function(b,a){var d=b[0],g=b[1],m=a[0],w=a[1],h=d[0],d=d[1],x=g[0],g=g[1],C=m[0],s=m[1],m=w[0]-C,C=h-C,q=x-h,w=w[1]-s,s=d-s,y=g-d,e=w*q-m*y;if(0===e)return!1;m=(m*s-w*C)/e;C=(q*s-y*C)/e;return 0<=m&&1>=m&&0<=C&&1>=C?[h+m*(x-h),d+m*(g-d)]:!1},_pointLineDistance:function(b,a){var d=a[0],g=a[1],m=d[0],w=d[1],d=b[0],h=b[1],x=g[0]-m,C=g[1]-w,s=d-m,q=h-w,g=Math.sqrt,y=Math.pow,e=g(y(x,2)+y(C,
2)),s=(s*x+q*C)/(e*e),w=w+s*C;return g(y(d-(m+s*x),2)+y(h-w,2))}};t("extend-esri")&&e.mixin(e.getObject("geometry",!0,b),h);return h})},"esri/layers/GraphicsLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D,G,N){var P,K=-1!==c.renderer.toLowerCase().indexOf("svg"),R=-1!==c.renderer.toLowerCase().indexOf("canvas"),M=9>A("ie"),T=A("esri-touch");E=e(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(a,b){var d,v=this._connects=[];this._map=a;R?(d=q.create("div",{style:"overflow: visible; position: absolute;"},b),this._surface={getEventSource:function(){return d}},v.push(t.connect(d,"onmousedown",this,this._canvasDownHandler)),v.push(t.connect(d,
"onmouseup",this,this._canvasUpHandler)),v.push(t.connect(d,"onclick",this,this._canvasClickHandler)),P.prototype._canvas=!0):(d=(this._surface=c.createSurface(b,a.width,a.height)).getEventSource(),s.set(d=M?d.parentNode:d,{overflow:"visible",position:"absolute"}));v.push(t.connect(a,"onResize",this,"_onResizeHandler"));return d},_onResizeHandler:function(a,b,c){a=this._surface.getEventSource();var v=this._map,d;M&&s.set(a=a.parentNode,{width:b+"px",height:c+"px",clip:"rect(0px "+b+"px "+c+"px 0px)"});
u.set(a,"width",b);u.set(a,"height",c);this._surface.declaredClass||n.forEach(a.childNodes,function(v){u.set(v,"width",b);u.set(v,"height",c)});v.loaded&&(v.graphics.suspended||(v.graphics._resized=!0),n.forEach(v.graphicsLayerIds,function(a){d=v.getLayer(a);d.suspended||(d._resized=!0);d._updateSVGFilters(null,null,b,c)}))},_cleanUp:function(){n.forEach(this._connects,t.disconnect,t);this._map=this._surface=null},_processEvent:function(a){var b=this._map;a.screenPoint=new I(a.pageX-b.position.x,
a.pageY-b.position.y);a.mapPoint=b.toMap(a.screenPoint)},_canvasDownHandler:function(a){this._processEvent(a);this._downPt=a.screenPoint.x+","+a.screenPoint.y},_canvasUpHandler:function(a){this._processEvent(a);this._upPt=a.screenPoint.x+","+a.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(a,b,c,v){if(!a.visible||!b)return!1;var d=b.getTransformedBoundingBox(),z;return d?(z=new L(d[0].x,d[0].y,d[2].x,d[2].y),delete z.spatialReference,T?z.intersects(c):z.contains(v)):n.some(b.children||[],function(l){d=
l.getTransformedBoundingBox();z=new L(d[0].x,d[0].y,d[2].x,d[2].y);delete z.spatialReference;return T?z.intersects(c):z.contains(v)})},_canvasClickHandler:function(a){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(a);var b=this._map,c=n.map(b.graphicsLayerIds,function(f){return b.getLayer(f)});c.push(b.graphics);c.reverse();var c=n.filter(c,function(f){return f.loaded&&f._mouseEvents&&!f.suspended&&(!w.isDefined(f.opacity)||0<f.opacity)}),v=a.screenPoint,d=this._tolerance,
z=v.x-d,l=v.y+d,f=v.x+d,d=v.y-d,r=new L(z,d,f,l),z=b.toMap(new I(z,l)),f=b.toMap(new I(f,d)),l=z.spatialReference._getInfo(),k=new L(L.prototype._normalizeX(z.x,l).x,z.y,L.prototype._normalizeX(f.x,l).x,f.y,z.spatialReference),B;delete r.spatialReference;n.some(c,function(f){f=n.filter(f.graphics,function(f){return this._isPrimaryMatch(f,f.getDojoShape(),r,v)||!(!f._bgShape||!this._isPrimaryMatch(f,f._bgShape,r,v))},this);f.reverse();if(0<f.length){var l;n.some(f,function(f){return f.geometry&&k.intersects(f.geometry)?
(l=f,!0):!1});if(l)return B=l,!0}return!1},this);if(B&&(c=B.getLayer()))a.graphic=B,c.onClick(a)}}});P=e(g,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:R?"canvas-2d":c.renderer,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},constructor:function(a,c){if(a&&(b.isString(a)||b.isObject(a)&&(a.layerDefinition||a.query)))a=c;this._params=b.mixin({displayOnPan:!0,drawMode:!0,styling:!0},a||{});var d=this._params.dataAttributes;
"string"===typeof d&&(d=[d]);this.styling=K?this._params.styling:!0;this.dataAttributes=d;this.infoTemplate=a&&a.infoTemplate;this.graphics=[];this._draw=b.hitch(this,this._draw);this._refresh=b.hitch(this,this._refresh);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(a){this._params.drawMode=a},renderer:null,_setMap:function(a,d){this.inherited(arguments);this._map=a;this._wrap=a.wrapAround180;this._srInfo=a.spatialReference._getInfo();
this._svgFilters={};this._canvas?(d=c.createSurface(d.getEventSource(),a.width,a.height),s.set(d.rawNode,"position","absolute"),this._div=d.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=b.hitch(this,this._canvasRender)):this._div=d.createGroup();this._bgGroup=this._div.createGroup();this._div.getEventSource().id=this.id+"_layer";var g=this.opacity;w.isDefined(g)&&1>g&&this.setOpacity(g,!0);return this._div},_unsetMap:function(a,b){n.forEach(this.graphics,
function(a){a._shape=null});this._canvas?(b=this._div.getParent(),b._parent={},q.destroy(b.rawNode),b.destroy()):(this._div.clear(),b.remove(this._div),q.destroy(this._div.getEventSource()));this._map=this._div=this._svgFilters=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onZoomStartHandler:function(){C.hide(this._div.getEventSource())},_onExtentChangeHandler:function(a,b,c,v){clearTimeout(this._wakeTimer);this._wakeTimer=null;c?
(a=this._map.__visibleRect,b=this._div,this._evalSDRenderer(),this._refresh(!0),this._updateTransform(b,a.x,a.y,!0),this._renderProto&&b.surface.pendingRender?this._dirty=!0:this.suspended||C.show(b.getEventSource())):this._resized&&(this._refresh(!1),this._resized=!1);if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var a=this._div;this._dirty&&(delete this._dirty,this.suspended||C.show(a.getEventSource()));return this._renderProto.apply(a,arguments)},_refresh:function(a){var b=
this.graphics,c=b.length,v,d=this._draw;for(v=0;v<c;v++)d(b[v],a)},refresh:function(){this._refresh(!0)},redraw:function(){this._refresh(!0)},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._map.__visibleRect;this._updateTransform(this._div,c.x+b.x,c.y+b.y)},_onPanEndUpdateHandler:function(a,b){var c=this._map.__visibleRect;!this._params._child&&(b.x!==this._panDx||b.y!==this._panDy)?this._updateTransform(this._div,c.x,c.y,!0):this._updateSVGFilters(-c.x,-c.y);this._refresh(!1);
if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){C.hide(this._div.getEventSource())},_onPanEndHandler:function(){var a=this._map.__visibleRect,b=this._div;this._updateTransform(b,a.x,a.y,!0);this._refresh(!1);this._renderProto&&b.surface.pendingRender?this._dirty=!0:C.show(b.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(b,c,d,v){b.setTransform(a.translate({x:c,y:d}));v&&this._updateSVGFilters(-c,-d)},onSuspend:function(){this.inherited(arguments);
C.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(a){this.inherited(arguments);a.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(b.hitch(this,function(){this.suspended||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var a=this._map,b=t.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||
(this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=b(a,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=b(a,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=t.disconnect;
a(this._onExtentChangeHandler_connect);a(this._onZoomStartHandler_connect);a(this._onPanHandler_connect);a(this._onPanStartHandler_connect);a(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(a){var b=a.geometry;if(b){if(!(a._extent=b.getExtent())){var c,v;if("esri.geometry.Point"===b.declaredClass)c=b.x,v=b.y;else if("esri.geometry.Multipoint"===
b.declaredClass)c=b.points[0][0],v=b.points[0][1];else{a._extent=null;return}a._extent=new L(c,v,c,v,b.spatialReference)}}else a._extent=null},_intersects:function(a,b,c){var v=a.spatialReference,d=b.spatialReference,z=v&&d&&!v.equals(d)&&v._canProject(d)&&4326===d.wkid;if(this._wrap&&!c){c=[];var v=a._getFrameWidth(),l=this._srInfo,f=a._clip?a._getAvailExtent():a.extent,r,k,B,H,J=[];r=b._partwise;z&&(f=a.geographicExtent,l=d._getInfo());a=f._getParts(l);if(r&&r.length){b=[];d=0;for(z=r.length;d<
z;d++)b=b.concat(r[d]._getParts(l))}else b=b._getParts(l);d=0;for(z=b.length;d<z;d++){B=b[d];l=0;for(f=a.length;l<f;l++)if(H=a[l],H.extent.intersects(B.extent)){r=0;for(k=B.frameIds.length;r<k;r++)c.push((H.frameIds[0]-B.frameIds[r])*v)}}d=0;for(z=c.length;d<z;d++)r=c[d],n.indexOf(c,r)===d&&J.push(r);return J.length?J:null}return(z?a.geographicExtent:a.extent).intersects(b)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(a,b){if(this._params.drawMode&&
this._map&&!this.suspended)try{var c=a._extent,v,d,z=!K||this.styling,l=K&&this.dataAttributes,f=a.getDojoShape(),r;if(a.visible&&c&&(v=this._intersects(this._map,c,a.geometry._originOnly))&&(d=z?this._getSymbol(a):this._defaultMarker)){if(!a._offsets||a._offsets.join(",")!==v.join(",")?a._offsets=v:r=!0,!f||b||!r){var k=a.geometry.type,c={graphic:a},B=a._bgShape,H=z&&!a.symbol?this._getRenderer(a):null,J=H&&H.backgroundFillSymbol;if("point"===k)this._isInvalidShape(d,f)&&this._removeShape(a),a._shape=
this._drawPoint(this._div,a.geometry,d,a.getDojoShape(),v,H,a),z&&this._symbolizePoint(a.getDojoShape(),d,H,a);else if("multipoint"===k)this._drawMarkers(a,d,v,H),z&&this._symbolizeMarkers(a,d,H);else{var Q,k=d,S,g;z&&(k=(Q="simplemarkersymbol"===d.type||"picturemarkersymbol"===d.type||"textsymbol"===d.type?d:null)?J:d);k&&k===J&&(S=this._bgGroup);B&&!S&&this._removeBgShape(a);k&&(!S&&this._isInvalidShape(k,a._shape)&&this._removeShape(a,!1),g=this._drawShape(a,v,S||this._div,S?B:a.getDojoShape()),
z&&this._symbolizeShape(g,k,H,!!J,a),a[S?"_bgShape":"_shape"]=g);if(Q){this._isInvalidShape(Q,a._shape)&&this._removeShape(a,!1);var m=a.geometry.getCentroid();(g=m&&this._drawPoint(this._div,m,Q,a._shape,v,H,a))&&this._symbolizePoint(g,Q,H,a);a._shape=g}}R||(a._bgShape&&this._initNode(a,a._bgShape,a._bgShape!==B,c,l),a._shape&&this._initNode(a,a._shape,a._shape!==f,c,l));c.node=a.getNode();this.onGraphicDraw(c)}}else f&&this._removeShape(a)}catch(x){this._errorHandler(x,a)}},_initNode:function(a,
b,c,v,d){if(b=b&&b.getNode())b.e_graphic=a,this._addDataAttrs(a,d,b),c&&(v.node=b,this.onGraphicNodeAdd(v))},_removeShape:function(a,b){var c=a.getDojoShape(),v=c&&c.getNode();c&&(c.removeShape(),c.destroy());a._shape=a._offsets=null;!1!==b&&this._removeBgShape(a);if(v&&(v.e_graphic=null,!R))this.onGraphicNodeRemove({graphic:a,node:v})},_removeBgShape:function(a){var b=a._bgShape,c=b&&b.getNode();b&&(b.removeShape(),b.destroy(),a._bgShape=null);if(c&&(c.e_graphic=null,!R))this.onGraphicNodeRemove({graphic:a,
node:c})},_addDataAttrs:function(a,b,c){var v=a.attributes,d,z=b?b.length:0,l=this._getRenderer(a);if(c&&v){for(d=0;d<z;d++)(c=b[d])&&a.attr("data-"+c,v[c]);!this.styling&&l&&(l.getBreakIndex?(b=l.getBreakIndex(a),a.attr("data-class-break",-1!==b?b:null)):l.getUniqueValueInfo&&(b=l.getUniqueValueInfo(a),a.attr("data-unique-value",b?b.value:null)))}},_drawShape:function(a,b,c,v){a=a.geometry;var d=a.type,z=this._map,l=z.extent,f=z.width,r=z.height,z=z.__visibleRect,k=[],B,H;B="extent"===d;if("rect"===
d||B)k={x:0,y:0,spatialReference:a.spatialReference},k.x=B?a.xmin:a.x,k.y=B?a.ymax:a.y,d=G.toScreenPoint(l,f,r,k),k.x=B?a.xmax:a.x+a.width,k.y=B?a.ymin:a.y+a.height,a=G.toScreenPoint(l,f,r,k),b={x:d.x-z.x+b[0],y:d.y-z.y,width:Math.abs(a.x-d.x),height:Math.abs(a.y-d.y)},0===b.width&&(b.width=1),0===b.height&&(b.height=1),v=this._drawRect(c,v,b);else if("polyline"===d||"polygon"===d){B=0;for(H=b.length;B<H;B++)k=k.concat(G._toScreenPath(l,f,r,a,-z.x+b[B],-z.y));v=this._drawPath(c,v,k);this._rendererLimits&&
("polyline"===d?this._clipPolyline(v,a):this._clipPolygon(v,a))}return v},_drawRect:function(a,b,c){return b?b.setShape(c):a.createRect(c)},_drawImage:function(a,b,c){return b?b.setShape(c):a.createImage(c)},_drawCircle:function(a,b,c){return b?b.setShape(c):a.createCircle(c)},_drawPath:function(){return M?function(a,b,d,v){d=v?d:d.join(" ");if(b)return b.setShape(d);b=a.createObject(v?c.Path:c.EsriPath,d);a._overrideSize(b.getEventSource());return b}:function(a,b,c,v){c=v?c:c.join(" ");return b?
b.setShape(c):a.createPath(c)}}(),_drawText:function(a,b,c){return b?b.setShape(c):a.createText(c)},_evalSDRenderer:function(a){var b=this._map,c=this.renderer,v,d=this._rndForScale;b&&(b.loaded&&c&&c.getRendererInfo)&&(v="zoom"===c.rangeType?c.getRendererInfoByZoom(b.getZoom()):c.getRendererInfoByScale(b.getScale()));this._rndForScale=v&&v.renderer;!a&&this._rndForScale!=d&&this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(a){var b=this._rndForScale||this.renderer;
a&&(b&&b.getObservationRenderer)&&(b=b.getObservationRenderer(a));return b},_getSymbol:function(a){var b=this._getRenderer();return a.symbol||b&&b.getSymbol(a)},_getVariable:function(a,b,c){var v;a&&(v=(a=a.getVisualVariablesForType(b,c))&&a[0]);return v},_applyOpacity:function(a,b,c,v){b=b.getOpacity(v,{opacityInfo:c});null!=b&&(a=new x(a),a.a=b);return a},_symbolizeShape:function(a,c,d,v,g){var z=c.getStroke(),l=c.getFill(),f=c.type,r,k,B=this._getVariable(d,"sizeInfo",!1),H=this._getVariable(d,
"colorInfo",!1),J=this._getVariable(d,"opacityInfo",!1),Q=-1!==f.indexOf("linesymbol");c=Q?"none"!==c.style:c.outline&&"none"!==c.outline.style;var S=Q?null:this._getVariable(d,"sizeInfo","outline"),B=(B=v?S:S||B)?d.getSize(g,{sizeInfo:B,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;v&&(H=J=null);if((H||J)&&"picturefillsymbol"!==f)Q?(r=z&&z.color,H&&(r=d.getColor(g,{colorInfo:H})||r),r&&J&&(r=this._applyOpacity(r,d,J,g))):l&&l.toCss&&(k=l,H&&(k=d.getColor(g,{colorInfo:H})||
k),k&&J&&(k=this._applyOpacity(k,d,J,g)));a.setStroke(!c||null==B&&!r?z:b.mixin({},z,null!=B?{width:B}:null,r&&{color:r})).setFill(k||l)},_smsToPath:function(){return M?function(a,b,c,v,d,z,l,f,r){switch(b){case a.STYLE_SQUARE:return["M",d+","+l,"L",z+","+l,z+","+f,d+","+f,"X","E"];case a.STYLE_CROSS:return["M",c+","+l,"L",c+","+f,"M",d+","+v,"L",z+","+v,"E"];case a.STYLE_X:return["M",d+","+l,"L",z+","+f,"M",d+","+f,"L",z+","+l,"E"];case a.STYLE_DIAMOND:return["M",c+","+l,"L",z+","+v,c+","+f,d+","+
v,"X","E"];case a.STYLE_TARGET:return["M",d+","+l,"L",z+","+l,z+","+f,d+","+f,d+","+l,"M",d-r+","+v,"L",d+","+v,"M",c+","+(l-r),"L",c+","+l,"M",z+r+","+v,"L",z+","+v,"M",c+","+(f+r),"L",c+","+f,"E"]}}:function(a,b,c,v,d,z,l,f,r){switch(b){case a.STYLE_SQUARE:return["M",d+","+l,z+","+l,z+","+f,d+","+f,"Z"];case a.STYLE_CROSS:return["M",c+","+l,c+","+f,"M",d+","+v,z+","+v];case a.STYLE_X:return["M",d+","+l,z+","+f,"M",d+","+f,z+","+l];case a.STYLE_DIAMOND:return["M",c+","+l,z+","+v,c+","+f,d+","+v,
"Z"];case a.STYLE_TARGET:return["M",d+","+l,z+","+l,z+","+f,d+","+f,d+","+l,"M",d-r+","+v,d+","+v,"M",c+","+(l-r),c+","+l,"M",z+r+","+v,z+","+v,"M",c+","+(f+r),c+","+f]}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(a,b){var c=b&&b.shape&&b.shape.type,v=a&&a.type,d=a&&a.style;"rect"===c&&(c="path");v&&
(d=this._typeMaps[v]||d);this._pathStyles[d]&&(d="path");return"shieldlabelsymbol"===v?!0:!(!c||!(d&&c!==d))},_drawPoint:function(b,c,d,v,g,z,l){var f=d.type,r=this._map,k=r.__visibleRect,B=G.toScreenPoint(r.extent,r.width,r.height,c).offset(-k.x+g[0],-k.y),k=B.x,H=B.y,J;c=[];var Q,S=this._getVariable(z,"rotationInfo",!1),S=S?z.getRotationAngle(l,{rotationInfo:S}):null,m=this._getVariable(z,"sizeInfo",!1),r=m?z.getSize(l,{sizeInfo:m,shape:d.style,resolution:r.getResolutionInMeters(),scale:r.getScale()}):
null;S&&c.push(a.rotategAt(S,B));if(0!==d.xoffset||0!==d.yoffset)Q=a.translate(d.xoffset,-d.yoffset),c.push(Q);0!==d.angle&&c.push(a.rotategAt(d.angle,B));if("simplemarkersymbol"===f)switch(J=d.style,z=Math.round,r=null!=r?r:d.size,J){case F.STYLE_SQUARE:case F.STYLE_CROSS:case F.STYLE_X:case F.STYLE_DIAMOND:d=isNaN(r)?16:r/2;J=this._drawPath(b,v,this._smsToPath(F,J,k,H,z(k-d),z(k+d),z(H-d),z(H+d)));break;case F.STYLE_TARGET:l=d._targetWidth/2;B=d._targetHeight/2;J=this._drawPath(b,v,this._smsToPath(F,
J,k,H,z(k-l),z(k+l),z(H-B),z(H+B),d._spikeSize));break;case F.STYLE_PATH:J=this._drawPath(b,v,d.path,!0);d=J.getBoundingBox();b=this._getScaleMatrix(d,r);(1!==b.xx||1!==b.yy)&&c.push(a.scaleAt(b.xx,b.yy,B));c.push(a.translate(-(d.x+d.width/2)+k,-(d.y+d.height/2)+H));break;default:d=isNaN(r)?16:r/2,J=this._drawCircle(b,v,{cx:k,cy:H,r:d})}else if("shieldlabelsymbol"===f)J=d.width,B=d.height,v=b.createGroup(),J=b.createImage({x:k-J/2,y:H-B/2,width:J,height:B,src:d.url}),v.add(J),null!=d.font&&(H+=0.2*
d.getHeight(),b=b.createText({type:"text",text:d.text,x:k,y:H,align:"middle",decoration:d.decoration,rotated:d.rotated,kerning:d.kerning}),b.setFont(d.font),b.setFill(d.color),v.add(b)),J=v;else if("picturemarkersymbol"===f){if(null==r?(J=d.width,B=d.height):(B=r,J=B*(d.width/d.height),Q&&(null!=Q.dx&&(Q.dx=J*(Q.dx/d.width)),null!=Q.dy&&(Q.dy=B*(Q.dy/d.height)))),J=this._drawImage(b,v,{x:k-J/2,y:H-B/2,width:J,height:B,src:d.url}),K&&(b=J.getNode()))d=(d=this._getVariable(z,"opacityInfo",!1))?z.getOpacity(l,
{opacityInfo:d}):null,null!=d?b.setAttribute("opacity",d):b.setAttribute("opacity",1)}else"textsymbol"===f&&(z=d.font,null!=r&&z&&(z=new z.constructor(z.toJson()),z.setSize(r)),J=this._drawText(b,v,{type:"text",text:d.text,x:k,y:H,align:d.getSVGAlign(),decoration:d.decoration||z&&z.decoration,rotated:d.rotated,kerning:d.kerning}),z&&J.setFont(z),K&&(b=J.getNode(),k=d.getSVGBaseline(),H=d.getSVGBaselineShift(),b&&(b.setAttribute("dominant-baseline",k),H&&b.setAttribute("baseline-shift",H),this._applyHalo(J,
d.haloColor,d.haloSize))));J.setTransform(a.multiply(c));J._wrapOffsets=g;return J},_applyHalo:function(a,b,c){var v=b&&c?this._getHaloId(b,c):null;a.setFilter(b&&c?A("webkit")||A("ff")?this._getDilateFilter(b,c,v):this._getOffsetFilter(b,c,v):null)},_getDilateFilter:function(a,b,c){var v=this._getSVGFilter(c);v||(v=this._createSVGFilter({id:c},[d.feMorphology({operator:"dilate",radius:b,result:"dilated"}),d.feFlood({"flood-color":a.toCss(!0)}),d.feComposite({in2:"dilated",operator:"in",result:"composite"}),
d.feMerge("composite","SourceGraphic")]));return v},_getOffsetFilter:function(a,b,c){var v=this._getSVGFilter(c);if(!v){a=a.toCss(!0);var v=this._offsetPrimitives,g,z=v.length,l=[],f=[];for(g=0;g<z;g++){var r=v[g],k="offset"+r.dir,B="composite"+r.dir;f.push(B);l.push(d.feOffset({dx:r.dx*b,dy:r.dy*b,"in":"SourceAlpha",result:k}),d.feFlood({"flood-color":a}),d.feComposite({in2:k,operator:"in",result:B}))}f.push("SourceGraphic");l.push(d.feMerge.apply(d.feMerge,f));v=this._createSVGFilter({id:c},l)}return v},
_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(a,b){return"halo_"+this._map.id+"_"+this.id+"_"+a.r+"_"+a.g+"_"+a.b+"_"+a.a+"_"+b},_getSVGFilter:function(a){return this._svgFilters[a]},_createSVGFilter:function(a,b){var c=d.createFilter(a,b),v=this._map,g=v.__visibleRect;c.x=-g.x;c.y=-g.y;c.width=v.width;c.height=v.height;return this._svgFilters[a.id]=
c},_updateSVGFilters:function(a,b,c,v){var d=this._svgFilters,z,l,f;for(l in d)if(z=d[l]){if(f=h.byId(l))null!=a&&f.setAttribute("x",a),null!=b&&f.setAttribute("y",b),null!=c&&f.setAttribute("width",c),null!=v&&f.setAttribute("height",v);null!=a&&(z.x=a);null!=b&&(z.y=b);null!=c&&(z.width=c);null!=v&&(z.height=v)}},_getScaleMatrix:function(a,b){var c=a.width/a.height,v=1,d=1;isNaN(b)||(1<c?(v=b/a.width,d=b/c/a.height):(d=b/a.height,v=b*c/a.width));return{xx:v,yy:d}},_symbolizePoint:function(a,c,d,
v){var g=c.type,z=c.style;if(!("shieldlabelsymbol"===g||"picturemarkersymbol"===g)){var l=c.getStroke();c=c.getFill();var z=z===F.STYLE_X||z===F.STYLE_CROSS,f=l&&l.color,r=z?f:c;if(d){var k=this._getVariable(d,"colorInfo",!1),B=this._getVariable(d,"opacityInfo",!1);k&&(r=d.getColor(v,{colorInfo:k})||r);r&&B&&(r=this._applyOpacity(r,d,B,v));r&&(z?r!==f&&(l=l?b.mixin({},l):{},l.color=r):r!==c&&(c=r))}"textsymbol"===g?a.setFill(c):"simplemarkersymbol"===g&&a.setFill(c).setStroke(l)}},_drawMarkers:function(a,
b,c,v){var d=a.geometry,z=d.points,l=a.getDojoShape()||this._div.createGroup(),f,r,k=z.length,B=[],H=0,J,Q=c?c.length:0;l.children[0]&&this._isInvalidShape(b,l.children[0])&&l.clear();for(r=0;r<k;r++){f=z[r];for(J=0;J<Q;J++)B[0]=c[J],this._drawPoint(l,{x:f[0],y:f[1],spatialReference:d.spatialReference},b,l.children[H++],B,v,a)}b=l.children.length;if(k*c.length<b)for(r=b-1;r>=k*c.length;r--)l.children[r].removeShape();a._shape=l},_symbolizeMarkers:function(a,b,c){var v=a.getDojoShape().children,d,
z=v.length;for(d=0;d<z;d++)this._symbolizePoint(v[d],b,c,a)},_errorHandler:function(a,b){a.message=b?"Unable to draw graphic (geometry:"+(b.geometry?b.geometry.declaredClass:null)+", symbol:"+(b.symbol?b.symbol.declaredClass:null)+"): "+a.message:"Unable to draw graphic (null): "+a.message;this.inherited(arguments)},_rendererLimits:function(){var a,b,c;A("ff")?(a=16125,b=-32250,c=32250):M?(a=1E5,b=-1E5,c=1E5):A("chrome")&&6>A("chrome")&&(a=8150,b=-1E4,c=1E4);if(a)return{clipLimit:a,rangeMin:b,rangeMax:c,
clipBBox:[-a,-a,a,a],clipSegments:[[[-a,-a],[a,-a]],[[a,-a],[a,a]],[[a,a],[-a,a]],[[-a,a],[-a,-a]]]}}(),_clipPolyline:function(a,b){var c=this._getCorners(a,b),v=c.br,d=this._rendererLimits,z=d.rangeMin,l=d.rangeMax,f=d.clipBBox,r=d.clipSegments,d=this._isPointWithinRange,k=this._isPointWithinBBox,B=this._getClipperIntersection,H=this._getPlaneIndex;if(!d(c.tl,z,l)||!d(v,z,l)){M&&this._createSegments(a);var J=[];n.forEach(a.segments,function(l){l=l.args;var v=l.length,a=[],b;for(b=0;b<v;b+=2){var c=
[l[b],l[b+1]],d=[l[b+2],l[b+3]],z=k(c,f),g=k(d,f);if(z^g){if(g=B([c,d],r))z?(b?a.push(g[1]):a.push(c,g[1]),J.push(a),a=[]):a.push(g[1],d)}else z?b?a.push(d):a.push(c,d):(g=H(c,f),z=H(d,f),-1===g||(-1===z||g===z)||(c=B([c,d],r,!0),0<c.length&&(c[g]||(g=c[g[0]]?g[0]:g[1]),c[z]||(z=c[z[0]]?z[0]:z[1]),d=c[g],c=c[z],d&&a.push(d),c&&(a.push(c),J.push(a),a=[]))))}J.push(a)});a.setShape(this._getPathStringFromPaths(J))}},_clipPolygon:function(a,c){var d=this._getCorners(a,c),v=d.br,g=this._rendererLimits,
z=g.clipLimit,l=g.rangeMin,f=g.rangeMax,r=g.clipBBox,k=g.clipSegments,g=this._isPointWithinRange,B=this._isPointWithinBBox,H=this._getClipperIntersection,J=this._getPlaneIndex,Q=D._pointLineDistance;if(!g(d.tl,l,f)||!g(v,l,f))M&&this._createSegments(a),d=n.map(a.segments,function(f){var l=f.args,v=l.length,a=[];f=[];var c;for(c=0;c<v;c+=2){var d=[l[c],l[c+1]],g=[l[c+2],l[c+3]];if(c===v-2){a.push(d);break}var m=B(d,r),x=B(g,r);a.push(d);if(m^x){if(x=H([d,g],k))d=x[1],d[m?"inOut":"outIn"]=!0,a.push(d),
f.push([m?"INOUT":"OUTIN",a.length-1,x[0]])}else if(!m){var m=J(d,r),w=J(g,r);-1===m||(-1===w||m===w)||(x=H([d,g],k,!0),0<x.length?(x[m]||(m=x[m[0]]?m[0]:m[1]),x[w]||(w=x[w[0]]?w[0]:w[1]),d=x[m],g=x[w],d&&(d.outIn=!0,a.push(d),f.push(["OUTIN",a.length-1,m])),g&&(g.inOut=!0,a.push(g),f.push(["INOUT",a.length-1,w]))):b.isArray(m)&&b.isArray(w)&&(x=m.concat(w),x.sort(),"0123"===x.join("")&&(x=[],3===m[0]+m[1]?x.push([z,-z],[-z,z]):x.push([-z,-z],[z,z]),m=Q(x[0],[d,g]),d=Q(x[1],[d,g]),a.push(m<d?x[0]:
x[1]))))}}var h=r[0],C=r[1],A=r[2],y=r[3];n.forEach(a,function(f){f[0]<h&&(f[1]>=C&&f[1]<=y?f[0]=h:(f[0]=h,f[1]=f[1]<C?C:y))});n.forEach(a,function(f){f[1]<C&&(f[0]>=h&&f[0]<=A?f[1]=C:(f[1]=C,f[0]=f[0]<h?h:A))});n.forEach(a,function(f){f[0]>A&&(f[1]>=C&&f[1]<=y?f[0]=A:(f[0]=A,f[1]=f[1]<C?C:y))});n.forEach(a,function(f){f[1]>y&&(f[0]>=h&&f[0]<=A?f[1]=y:(f[1]=y,f[0]=f[0]<h?h:A))});l=0;v=f.length;if(0<v){do{g=f[l];c=f[(l+1)%v];if(g[2]===c[2]&&"INOUT"===g[0]&&"OUTIN"===c[0])if(d=g[1],c=c[1],d<c)for(d+=
1;d<c;d++)a[d][2]=!0;else if(d>c){for(d+=1;d<a.length;d++)a[d][2]=!0;for(d=0;d<c;d++)a[d][2]=!0}l=(l+1)%v}while(0!==l)}v=a[0];l=a[a.length-1];v[2]&&(l[2]=!0,n.some(f,function(f){return 1===f[1]?(a.splice(a.length-1,0,b.clone(a[1])),!0):!1}));a=n.filter(a,function(f){return f[2]?!1:!0});for(l=0;l<a.length-1;l++)if(v=a[l],(c=a[l+1])&&!(v[0]!==c[0]||v[1]!==c[1]))c.outIn?v.outIn=!0:c.inOut&&(v.inOut=!0),a.splice(l+1,1);v=Math.abs;f=[];for(l=0;l<a.length-1;l++){g=a[l];d=g[0];g=g[1];m=v(d)===z;x=v(g)===
z;c=a[l+1];w=c[0];c=c[1];var s=v(w)===z,q=v(c)===z;m&&q?f.push([l+1,[d,c]]):x&&s&&f.push([l+1,[w,g]])}for(l=f.length-1;0<=l;l--)c=f[l],d=a[c[0]-1],v=a[c[0]],!d.outIn&&(!d.inOut&&!v.outIn&&!v.inOut)&&a.splice(c[0],0,c[1]);v=a[0];l=a[a.length-1];(v[0]!==l[0]||v[1]!==l[1])&&a.push(v);return a}),a.setShape(this._getPathStringFromPaths(d))},_getCorners:function(a,b){if(M){var c=this._map,v=b.getExtent(),d=v.spatialReference,z=c.toScreen(new y(v.xmin,v.ymax,d)),c=c.toScreen(new y(v.xmax,v.ymin,d));return{tl:z,
br:c}}z=a.getTransformedBoundingBox();return{tl:z[0],br:z[2]}},_createSegments:function(a){a.shape.path=a.vmlPath;a.segmented=!1;a._confirmSegmented();var b=a.segments;1<b.length&&(a.segments=n.filter(b,function(a,v,b){v=b[v+1];return"M"===a.action&&v&&"L"===v.action?(a.args=a.args.concat(v.args),!0):!1}))},_getPathStringFromPaths:function(a){M?(a=n.map(a,function(a){return"m "+n.map(a,function(a,v){return(1===v?"l ":"")+a.join(",")}).join(" ")}),a.push("e")):a=n.map(a,function(a){return"M "+n.map(a,
function(a){return a.join(",")}).join(" ")});return a.join(" ")},_isPointWithinBBox:function(a,b){var c=b[1],v=b[2],d=b[3],z=a[0],l=a[1];return z>b[0]&&z<v&&l>c&&l<d?!0:!1},_isPointWithinRange:function(a,b,c){var v=a.x;a=a.y;return v<b||a<b||v>c||a>c?!1:!0},_getClipperIntersection:function(a,b,c){var v,d=D._getLineIntersection2,z=Math.round,l={length:0};for(v=0;4>v;v++){var f=d(a,b[v]);if(f)if(f[0]=z(f[0]),f[1]=z(f[1]),c)l[v]=f,l.length++;else return[v,f]}return c?l:null},_getPlaneIndex:function(a,
b){var c=a[0],v=a[1],d=b[0],z=b[1],l=b[2],f=b[3];return c<=d?v>=z&&v<=f?3:v<z?[0,3]:[2,3]:v<=z?c>=d&&c<=l?0:c<d?[3,0]:[1,0]:c>=l?v>=z&&v<=f?1:v<z?[0,1]:[2,1]:v>=f?c>=d&&c<=l?2:c<d?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},setInfoTemplate:function(a){this.infoTemplate=a},add:function(a,b){if(a._graphicsLayer===
this)return a;b||this.graphics.push(a);a._graphicsLayer=this;a._layer=this;this._updateExtent(a);this._draw(a);if(!b)this.onGraphicAdd(a);return a},remove:function(a,b){if(!b){var c;if(-1===(c=n.indexOf(this.graphics,a)))return null;a=this.graphics.splice(c,1)[0]}a.getDojoShape()&&this._removeShape(a);a._shape=a._graphicsLayer=null;this.onGraphicRemove(a);return a},clear:function(a,b){for(var c=this.graphics;0<c.length;)this.remove(c[0]);if(!b)this.onGraphicsClear()},_setIEOpacity:function(a,b){var c=
a&&a.getNode();if(c){var v=a.strokeStyle,d=c.stroke;v&&d&&(d.opacity=v.color.a*b);v=a.fillStyle;d=c.fill;v&&d&&("tile"===d.type?s.set(c,"opacity",b):d.opacity=v.a*b)}},setOpacity:function(a,b){if(b||this.opacity!=a){var c=this._div;c&&(M?(n.forEach(this.graphics,function(v){this._setIEOpacity(v._shape,a);this._setIEOpacity(v._bgShape,a)},this),c._esriIeOpacity=a,this._bgGroup._esriIeOpacity=a):this._canvas?s.set(c.getEventSource(),"opacity",a):c.getEventSource().setAttribute("opacity",a));this.opacity=
a;if(!b)this.onOpacityChange(a)}},setRenderer:function(a){this.renderer=a;this._evalSDRenderer(!0);this.emit("renderer-change",{renderer:this._rndForScale||a})}});e=e([P,N],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=b.hitch(this,this.enableMouseEvents);this.disableMouseEvents=b.hitch(this,this.disableMouseEvents);this._processEvent=b.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var a=
this.inherited("_setMap",arguments);this.enableMouseEvents();return a},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(a){var b=this._map,c=a.target,v;a.screenPoint=new I(a.pageX-b.position.x,a.pageY-b.position.y);for(a.mapPoint=b.toMap(a.screenPoint);c&&!(v=c.e_graphic);)c=c.parentNode;if(v)return a.graphic=v,a},_onMouseOverHandler:function(a){if(this._processEvent(a))this.onMouseOver(a)},_onMouseMoveHandler:function(a){if(this._processEvent(a))this.onMouseMove(a)},
_onMouseDragHandler:function(a){if(this._processEvent(a))this.onMouseDrag(a)},_onMouseOutHandler:function(a){if(this._processEvent(a))this.onMouseOut(a)},_onMouseDownHandler:function(a){this._downGr=this._downPt=null;this._processEvent(a)&&(t.disconnect(this._onmousemove_connect),t.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=t.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=a.graphic,this._downPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseDown(a))},
_onMouseUpHandler:function(a){this._upGr=this._upPt=null;this._processEvent(a)&&(t.disconnect(this._onmousedrag_connect),t.disconnect(this._onmousemove_connect),this._onmousemove_connect=t.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=a.graphic,this._upPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseUp(a))},_onClickHandler:function(a){if(this._processEvent(a)){var b=this._downGr,c=this._upGr;b&&(c&&b===c&&this._downPt===this._upPt)&&(M&&(m._ieGraphic=a.graphic),
this.onClick(a))}},_onDblClickHandler:function(a){if(this._processEvent(a))this.onDblClick(a)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var a=t.connect,b=this._div.getEventSource();R||(this._onmouseover_connect=a(b,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=a(b,"onmousemove",
this,"_onMouseMoveHandler"),this._onmouseout_connect=a(b,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=a(b,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=a(b,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=a(b,"onclick",this,"_onClickHandler"),this._ondblclick_connect=a(b,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var a=t.disconnect;a(this._onmouseover_connect);a(this._onmousemove_connect);
a(this._onmousedrag_connect);a(this._onmouseout_connect);a(this._onmousedown_connect);a(this._onmouseup_connect);a(this._onclick_connect);a(this._ondblclick_connect);this._mouseEvents=!1}}});e._GraphicsContainer=E;e._GraphicsLayer=P;A("extend-esri")&&(b.setObject("layers.GraphicsLayer",e,m),b.setObject("layers._GraphicsContainer",E,m),b.setObject("layers._GraphicsLayer",P,m));return e})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
function(e,t,b,n,u,q,s,h){function c(a,b,c,d,g){d=h.hitch(c,d);if(!a||!a.addEventListener&&!a.attachEvent)return n.after(a||e.global,b,d,!0);"string"==typeof b&&"on"==b.substring(0,2)&&(b=b.substring(2));a||(a=e.global);if(!g)switch(b){case "keypress":b=w;break;case "mouseenter":b=q.enter;break;case "mouseleave":b=q.leave}return t(a,b,d,g)}function a(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}s.add("events-keypress-typed",function(){var a={charCode:0};
try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!s("opera")});var d={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},g=s("mac")?"metaKey":"ctrlKey",m=function(b,c){var d=h.mixin({},b,c);a(d);d.preventDefault=function(){b.preventDefault()};d.stopPropagation=function(){b.stopPropagation()};return d},w;w=s("events-keypress-typed")?function(a,
b){var c=t(a,"keydown",function(a){var c=a.keyCode,g=13!=c&&32!=c&&(27!=c||!s("ie"))&&(48>c||90<c)&&(96>c||111<c)&&(186>c||192<c)&&(219>c||222<c)&&229!=c;if(g||a.ctrlKey){g=g?0:c;if(a.ctrlKey){if(3==c||13==c)return b.call(a.currentTarget,a);g=95<g&&106>g?g-48:!a.shiftKey&&65<=g&&90>=g?g+32:d[g]||g}c=m(a,{type:"keypress",faux:!0,charCode:g});b.call(a.currentTarget,c);if(s("ie"))try{a.keyCode=c.keyCode}catch(x){}}}),g=t(a,"keypress",function(a){var c=a.charCode;a=m(a,{charCode:32<=c?c:0,faux:!0});return b.call(this,
a)});return{remove:function(){c.remove();g.remove()}}}:s("opera")?function(a,b){return t(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&(!a.shiftKey&&65<=c&&90>=c)&&(c+=32);return b.call(this,m(a,{charCode:c}))})}:function(b,c){return t(b,"keypress",function(b){a(b);return c.call(this,b)})};var A={_keypress:w,connect:function(a,b,d,g,m){var w=arguments,h=[],A=0;h.push("string"==typeof w[0]?null:w[A++],w[A++]);var s=w[A+1];h.push("string"==typeof s||"function"==
typeof s?w[A++]:null,w[A++]);for(s=w.length;A<s;A++)h.push(w[A]);return c.apply(this,h)},disconnect:function(a){a&&a.remove()},subscribe:function(a,c,d){return b.subscribe(a,h.hitch(c,d))},publish:function(a,c){return b.publish.apply(b,[a].concat(c))},connectPublisher:function(a,b,c){var d=function(){A.publish(a,arguments)};return c?A.connect(b,c,d):A.connect(b,d)},isCopyKey:function(a){return a[g]}};A.unsubscribe=A.disconnect;h.mixin(e,A);return A})},"dojo/topic":function(){define(["./Evented"],
function(e){var t=new e;return{publish:function(b,e){return t.emit.apply(t,arguments)},subscribe:function(b,e){return t.on.apply(t,arguments)}}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(e,t,b,n){if(t._fixEvent){var u=t._fixEvent;t._fixEvent=function(b,h){(b=u(b,h))&&n.normalizeEvent(b);return b}}var q={fix:function(b,h){return t._fixEvent?t._fixEvent(b,h):b},stop:function(s){b("dom-addeventlistener")||s&&s.preventDefault?(s.preventDefault(),s.stopPropagation()):
(s=s||window.event,s.cancelBubble=!0,t._preventDefault.call(s))}};e.fixEvent=q.fix;e.stopEvent=q.stop;return q})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(e,t,b,n){function u(a,b,c,m,w,h){h=h||"px";a=a.style;isNaN(b)||(a.left=b+h);isNaN(c)||(a.top=c+h);0<=m&&(a.width=m+h);0<=w&&(a.height=w+h)}function q(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function s(a){return"border-box"==
h.boxModel||"table"==a.tagName.toLowerCase()||q(a)}var h={boxModel:"content-box"};e("ie")&&(h.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");h.getPadExtents=function(a,c){a=b.byId(a);var g=c||n.getComputedStyle(a),m=n.toPixelValue,w=m(a,g.paddingLeft),h=m(a,g.paddingTop),x=m(a,g.paddingRight),g=m(a,g.paddingBottom);return{l:w,t:h,r:x,b:g,w:w+x,h:h+g}};h.getBorderExtents=function(a,c){a=b.byId(a);var g=n.toPixelValue,m=c||n.getComputedStyle(a),w="none"!=m.borderLeftStyle?g(a,
m.borderLeftWidth):0,h="none"!=m.borderTopStyle?g(a,m.borderTopWidth):0,x="none"!=m.borderRightStyle?g(a,m.borderRightWidth):0,g="none"!=m.borderBottomStyle?g(a,m.borderBottomWidth):0;return{l:w,t:h,r:x,b:g,w:w+x,h:h+g}};h.getPadBorderExtents=function(a,c){a=b.byId(a);var g=c||n.getComputedStyle(a),m=h.getPadExtents(a,g),g=h.getBorderExtents(a,g);return{l:m.l+g.l,t:m.t+g.t,r:m.r+g.r,b:m.b+g.b,w:m.w+g.w,h:m.h+g.h}};h.getMarginExtents=function(a,c){a=b.byId(a);var g=c||n.getComputedStyle(a),m=n.toPixelValue,
w=m(a,g.marginLeft),h=m(a,g.marginTop),x=m(a,g.marginRight),g=m(a,g.marginBottom);return{l:w,t:h,r:x,b:g,w:w+x,h:h+g}};h.getMarginBox=function(a,c){a=b.byId(a);var g=c||n.getComputedStyle(a),m=h.getMarginExtents(a,g),w=a.offsetLeft-m.l,A=a.offsetTop-m.t,x=a.parentNode,C=n.toPixelValue;if(e("mozilla")){var s=parseFloat(g.left),g=parseFloat(g.top);!isNaN(s)&&!isNaN(g)?(w=s,A=g):x&&x.style&&(x=n.getComputedStyle(x),"visible"!=x.overflow&&(w+="none"!=x.borderLeftStyle?C(a,x.borderLeftWidth):0,A+="none"!=
x.borderTopStyle?C(a,x.borderTopWidth):0))}else if((e("opera")||8==e("ie")&&!e("quirks"))&&x)x=n.getComputedStyle(x),w-="none"!=x.borderLeftStyle?C(a,x.borderLeftWidth):0,A-="none"!=x.borderTopStyle?C(a,x.borderTopWidth):0;return{l:w,t:A,w:a.offsetWidth+m.w,h:a.offsetHeight+m.h}};h.getContentBox=function(a,c){a=b.byId(a);var g=c||n.getComputedStyle(a),m=a.clientWidth,w=h.getPadExtents(a,g),A=h.getBorderExtents(a,g);m?(g=a.clientHeight,A.w=A.h=0):(m=a.offsetWidth,g=a.offsetHeight);e("opera")&&(w.l+=
A.l,w.t+=A.t);return{l:w.l,t:w.t,w:m-w.w-A.w,h:g-w.h-A.h}};h.setContentSize=function(a,c,g){a=b.byId(a);var m=c.w;c=c.h;s(a)&&(g=h.getPadBorderExtents(a,g),0<=m&&(m+=g.w),0<=c&&(c+=g.h));u(a,NaN,NaN,m,c)};var c={l:0,t:0,w:0,h:0};h.setMarginBox=function(a,d,g){a=b.byId(a);var m=g||n.getComputedStyle(a);g=d.w;var w=d.h,A=s(a)?c:h.getPadBorderExtents(a,m),m=h.getMarginExtents(a,m);if(e("webkit")&&q(a)){var x=a.style;0<=g&&!x.width&&(x.width="4px");0<=w&&!x.height&&(x.height="4px")}0<=g&&(g=Math.max(g-
A.w-m.w,0));0<=w&&(w=Math.max(w-A.h-m.h,0));u(a,d.l,d.t,g,w)};h.isBodyLtr=function(a){a=a||t.doc;return"ltr"==(t.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};h.docScroll=function(a){a=a||t.doc;var b=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=e("quirks")?t.body(a):a.documentElement)&&{x:h.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};e("ie")&&(h.getIeDocumentElementOffset=function(a){a=a||t.doc;a=a.documentElement;if(8>
e("ie")){var b=a.getBoundingClientRect(),c=b.left,b=b.top;7>e("ie")&&(c+=a.clientLeft,b+=a.clientTop);return{x:0>c?0:c,y:0>b?0:b}}return{x:0,y:0}});h.fixIeBiDiScrollLeft=function(a,b){b=b||t.doc;var c=e("ie");if(c&&!h.isBodyLtr(b)){var m=e("quirks"),w=m?t.body(b):b.documentElement,A=t.global;6==c&&(!m&&A.frameElement&&w.scrollHeight>w.clientHeight)&&(a+=w.clientLeft);return 8>c||m?a+w.clientWidth-w.scrollWidth:-a}return a};h.position=function(a,c){a=b.byId(a);var g=t.body(a.ownerDocument),m=a.getBoundingClientRect(),
m={x:m.left,y:m.top,w:m.right-m.left,h:m.bottom-m.top};if(9>e("ie")){var w=h.getIeDocumentElementOffset(a.ownerDocument);m.x-=w.x+(e("quirks")?g.clientLeft+g.offsetLeft:0);m.y-=w.y+(e("quirks")?g.clientTop+g.offsetTop:0)}c&&(g=h.docScroll(a.ownerDocument),m.x+=g.x,m.y+=g.y);return m};h.getMarginSize=function(a,c){a=b.byId(a);var g=h.getMarginExtents(a,c||n.getComputedStyle(a)),m=a.getBoundingClientRect();return{w:m.right-m.left+g.w,h:m.bottom-m.top+g.h}};h.normalizeEvent=function(a){"layerX"in a||
(a.layerX=a.offsetX,a.layerY=a.offsetY);if(!e("dom-addeventlistener")){var b=a.target,b=b&&b.ownerDocument||document,c=e("quirks")?b.body:b.documentElement,m=h.getIeDocumentElementOffset(b);a.pageX=a.clientX+h.fixIeBiDiScrollLeft(c.scrollLeft||0,b)-m.x;a.pageY=a.clientY+(c.scrollTop||0)-m.y}};return h})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(e,t){function b(b,c,g){c=c.toLowerCase();if(e("ie")||e("trident")){if("auto"==g){if("height"==c)return b.offsetHeight;if("width"==c)return b.offsetWidth}if("fontweight"==
c)switch(g){case 700:return"bold";default:return"normal"}}c in a||(a[c]=d.test(c));return a[c]?q(b,g):g}var n,u={};n=e("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);!b&&a.style&&(a.style.display="",b=c.getComputedStyle(a,null))}return b||{}}:e("ie")&&(9>e("ie")||e("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};u.getComputedStyle=
n;var q;q=e("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,g=c.left,h=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(s){b=0}c.left=g;d.left=h;return b}:function(a,b){return parseFloat(b)||0};u.toPixelValue=q;var s=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},h=9>e("ie")||10>e("ie")&&e("quirks")?function(a){try{return s(a).Opacity/
100}catch(b){return 1}}:function(a){return n(a).opacity},c=9>e("ie")||10>e("ie")&&e("quirks")?function(a,b){""===b&&(b=1);var d=100*b;1===b?(a.style.zoom="",s(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(a.style.zoom=1,s(a)?s(a,1).Opacity=d:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+d+")",s(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(d=a.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&c(d,
b);return b}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,g={cssFloat:1,styleFloat:1,"float":1};u.get=function(a,c){var d=t.byId(a),x=arguments.length;if(2==x&&"opacity"==c)return h(d);c=g[c]?"cssFloat"in d.style?"cssFloat":"styleFloat":c;var C=u.getComputedStyle(d);return 1==x?C:b(d,c,C[c]||d.style[c])};u.set=function(a,b,d){var x=t.byId(a),h=arguments.length,s="opacity"==b;b=g[b]?"cssFloat"in x.style?"cssFloat":"styleFloat":b;if(3==h)return s?
c(x,d):x.style[b]=d;for(var q in b)u.set(a,q,b[q]);return u.getComputedStyle(x)};return u})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(e,t,b,n,u){function q(b,h){var c=function(a,c){return t(a,b,function(b){if(h)return h(b,c);if(!n.isDescendant(b.relatedTarget,a))return c.call(this,b)})};c.bubble=function(a){return q(b,function(b,c){var m=a(b.target),w=b.relatedTarget;if(m&&m!=(w&&1==w.nodeType&&a(w)))return c.call(m,b)})};return c}b.add("dom-quirks",
u.doc&&"BackCompat"==u.doc.compatMode);b.add("events-mouseenter",u.doc&&"onmouseenter"in u.doc.createElement("div"));b.add("events-mousewheel",u.doc&&"onmousewheel"in u.doc);u=b("dom-quirks")&&b("ie")||!b("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(b,h){return b.button&h},isLeft:function(b){return b.button&1},isMiddle:function(b){return b.button&4},isRight:function(b){return b.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,h){return b.button==h},isLeft:function(b){return 0==
b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};e.mouseButtons=u;e=b("events-mousewheel")?"mousewheel":function(b,h){return t(b,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;h.call(this,b)})};return{_eventHandler:q,enter:q("mouseover"),leave:q("mouseout"),wheel:e,isLeft:u.isLeft,isMiddle:u.isMiddle,isRight:u.isRight}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(e,t){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,
CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,
F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(e,t,b,n,u,q){function s(a,b){var c=a.getAttributeNode&&a.getAttributeNode(b);return!!c&&c.specified}var h={innerHTML:1,textContent:1,className:1,htmlFor:t("ie"),value:1},
c={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};e.has=function(a,b){var g=b.toLowerCase();return h[q.names[g]||b]||s(n.byId(a),c[g]||b)};e.get=function(a,d){a=n.byId(a);var g=d.toLowerCase(),m=q.names[g]||d,w=a[m];if(h[m]&&"undefined"!=typeof w)return w;if("textContent"==m)return q.get(a,m);if("href"!=m&&("boolean"==typeof w||b.isFunction(w)))return w;g=c[g]||d;return s(a,g)?a.getAttribute(g):null};e.set=function(a,d,g){a=n.byId(a);if(2==arguments.length){for(var m in d)e.set(a,
m,d[m]);return a}m=d.toLowerCase();var w=q.names[m]||d,A=h[w];if("style"==w&&"string"!=typeof g)return u.set(a,g),a;if(A||"boolean"==typeof g||b.isFunction(g))return q.set(a,d,g);a.setAttribute(c[m]||d,g);return a};e.remove=function(a,b){n.byId(a).removeAttribute(c[b.toLowerCase()]||b)};e.getNodeProp=function(a,b){a=n.byId(a);var g=b.toLowerCase(),m=q.names[g]||b;if(m in a&&"href"!=m)return a[m];g=c[g]||b;return s(a,g)?a.getAttribute(g):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),
function(e,t,b,n,u,q,s,h){function c(a){var b="";a=a.childNodes;for(var d=0,g;g=a[d];d++)8!=g.nodeType&&(b=1==g.nodeType?b+c(g):b+g.nodeValue);return b}var a={},d=0,g=t._scopeName+"attrid";b.add("dom-textContent",function(a,b,c){return"textContent"in c});e.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};e.get=function(a,d){a=u.byId(a);var g=d.toLowerCase(),
g=e.names[g]||d;return"textContent"==g&&!b("dom-textContent")?c(a):a[g]};e.set=function(c,w,A){c=u.byId(c);if(2==arguments.length&&"string"!=typeof w){for(var x in w)e.set(c,x,w[x]);return c}x=w.toLowerCase();x=e.names[x]||w;if("style"==x&&"string"!=typeof A)return q.set(c,A),c;if("innerHTML"==x)return b("ie")&&c.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(s.empty(c),c.appendChild(s.toDom(A,c.ownerDocument))):c[x]=A,c;if("textContent"==x&&!b("dom-textContent"))return s.empty(c),
c.appendChild(c.ownerDocument.createTextNode(A)),c;if(n.isFunction(A)){var C=c[g];C||(C=d++,c[g]=C);a[C]||(a[C]={});var E=a[C][x];if(E)h.disconnect(E);else try{delete c[x]}catch(t){}A?a[C][x]=h.connect(c,x,A):c[x]=null;return c}c[x]=A;return c}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(e,t,b,n,u,q){function s(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}function h(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(b){}for(var c;c=
a.lastChild;)a.removeChild(c)}var c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},a=/<\s*([\w\:]+)/,d={},g=0,m="__"+t._scopeName+"ToDomId",w;for(w in c)c.hasOwnProperty(w)&&(t=c[w],t.pre="option"==w?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+t.join("\x3e\x3c")+"\x3e",t.post="\x3c/"+t.reverse().join("\x3e\x3c/")+
"\x3e");var A;8>=b("ie")&&(A=function(a){a.__dojo_html5_tested="yes";var b=x("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(b){a.createElement(b)});C(b)});e.toDom=function(x,w){w=w||n.doc;var h=w[m];h||(w[m]=h=++g+"",d[h]=w.createElement("div"));8>=b("ie")&&!w.__dojo_html5_tested&&
w.body&&A(w);x+="";var C=x.match(a),s=C?C[1].toLowerCase():"",h=d[h];if(C&&c[s]){C=c[s];h.innerHTML=C.pre+x+C.post;for(C=C.length;C;--C)h=h.firstChild}else h.innerHTML=x;if(1==h.childNodes.length)return h.removeChild(h.firstChild);for(s=w.createDocumentFragment();C=h.firstChild;)s.appendChild(C);return s};e.place=function(a,b,c){b=u.byId(b);"string"==typeof a&&(a=/^\s*</.test(a)?e.toDom(a,b.ownerDocument):u.byId(a));if("number"==typeof c){var d=b.childNodes;!d.length||d.length<=c?b.appendChild(a):
s(a,d[0>c?0:c])}else switch(c){case "before":s(a,b);break;case "after":c=a;(d=b.parentNode)&&(d.lastChild==b?d.appendChild(c):d.insertBefore(c,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":e.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){s(a,b.firstChild);break}default:b.appendChild(a)}return a};var x=e.create=function(a,b,c,d){var g=n.doc;c&&(c=u.byId(c),g=c.ownerDocument);"string"==typeof a&&(a=g.createElement(a));b&&q.set(a,b);c&&e.place(a,
c,d);return a};e.empty=function(a){h(u.byId(a))};var C=e.destroy=function(a){if(a=u.byId(a)){var c=a;a=a.parentNode;c.firstChild&&h(c);a&&(b("ie")&&a.canHaveChildren&&"removeNode"in c?c.removeNode(!1):a.removeChild(c))}}})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(e,t,b){t.switchTo(b);return t})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(e,t,b,n,u,q,s,h,c){var a=t.getObject("dojox.gfx",!0),d=a._base={};a._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};a._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||0>(" "+c+" ").indexOf(" "+b+" "))a.setAttribute("className",c+(c?" ":"")+b)};a._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};d._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b,c;n("ie")&&(c=u.doc.documentElement.style.fontSize||"",c||(u.doc.documentElement.style.fontSize="100%"));var d=h.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},u.body());for(b in a)d.style.fontSize=b,a[b]=16*Math.round(12*d.offsetHeight/16)/12/1E3;
n("ie")&&(u.doc.documentElement.style.fontSize=c);u.body().removeChild(d);return a};var g=null;d._getCachedFontMeasurements=function(a){if(a||!g)g=d._getFontMeasurements();return g};var m=null,w={};d._getTextBox=function(a,b,d){var g,A,s=arguments.length,q;m||(m=h.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},u.body()));g=m;g.className="";A=g.style;A.borderWidth="0";A.margin="0";A.padding="0";A.outline="0";if(1<s&&b)for(q in b)q in w||(A[q]=b[q]);2<s&&d&&(g.className=
d);g.innerHTML=a;g.getBoundingClientRect?(A=g.getBoundingClientRect(),A={l:A.left,t:A.top,w:A.width||A.right-A.left,h:A.height||A.bottom-A.top}):A=c.getMarginBox(g);g.innerHTML="";return A};d._computeTextLocation=function(a,b,c,d){var g={};switch(a.align){case "end":g.x=a.x-b;break;case "middle":g.x=a.x-b/2;break;default:g.x=a.x}g.y=a.y-c*(d?0.75:1);return g};d._computeTextBoundingBox=function(b){if(!a._base._isRendered(b))return{x:0,y:0,width:0,height:0};var c;c=b.getShape();var g=b.getFont()||a.defaultFont;
b=b.getTextWidth();g=a.normalizedLength(g.size);c=d._computeTextLocation(c,b,g,!0);return{x:c.x,y:c.y,width:b,height:g}};d._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var A=0;d._getUniqueId=function(){var a;do a=e._scopeName+"xUnique"+ ++A;while(s.byId(a));return a};d._fixMsTouchAction=function(a){a=a.rawNode;"undefined"!=typeof a.style.msTouchAction&&(a.style.msTouchAction="none")};t.mixin(a,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",
points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",
color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var b={};return function(c){var d=
b[c];if(d)return new d;d=b[c]=new Function;d.prototype=a["default"+c];return new d}}(),normalizeColor:function(a){return a instanceof b?a:new b(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return t.delegate(a);var d={};for(c in a)c in d||(d[c]=t.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");
0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(b){var c=a.getDefault("Font");b=b.split(/\s+/);if(!(5>b.length)){c.style=b[0];c.variant=b[1];c.weight=b[2];var d=b[3].indexOf("/");c.size=0>d?b[3]:b[3].substring(0,d);var g=4;0>d&&("/"==b[4]?g=6:"/"==b[4].charAt(0)&&(g=5));g<b.length&&(c.family=b.slice(g).join(" "))}return c},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return a._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(b){return b*a.px_in_pt()},px2pt:function(b){return b/a.px_in_pt()},normalizedLength:function(b){if(0===b.length)return 0;if(2<b.length){var c=a.px_in_pt(),d=parseFloat(b);switch(b.slice(-2)){case "px":return d;case "pt":return d*c;case "in":return 72*d*c;case "pc":return 12*d*c;case "mm":return d*a.mm_in_pt*c;case "cm":return d*a.cm_in_pt*c}}return parseFloat(b)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(a,b){return a&&b&&a===b},switchTo:function(b){var c="string"==typeof b?a[b]:b;c&&(q.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),function(b){a[b]=c[b]}),"string"==typeof b?a.renderer=b:q.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(b){return a.renderer=a[b]&&a[b].Surface===a.Surface?b:null}))}});return a})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array",
"./config"],function(e,t,b,n){var u=e.Color=function(b){b&&this.setColor(b)};u.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]};t.extend(u,{r:255,g:255,b:255,a:1,_set:function(b,s,h,c){this.r=b;this.g=s;this.b=h;this.a=c},setColor:function(b){t.isString(b)?
u.fromString(b,this):t.isArray(b)?u.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof u||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+b.map(["r","g","b"],function(b){b=this[b].toString(16);return 2>b.length?"0"+b:b},this).join("")},toCss:function(b){var s=this.r+", "+this.g+", "+this.b;return(b?"rgba("+s+", "+this.a:"rgb("+s)+")"},toString:function(){return this.toCss(!0)}});
u.blendColors=e.blendColors=function(q,s,h,c){var a=c||new u;b.forEach(["r","g","b","a"],function(b){a[b]=q[b]+(s[b]-q[b])*h;"a"!=b&&(a[b]=Math.round(a[b]))});return a.sanitize()};u.fromRgb=e.colorFromRgb=function(b,s){var h=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return h&&u.fromArray(h[1].split(/\s*,\s*/),s)};u.fromHex=e.colorFromHex=function(e,s){var h=s||new u,c=4==e.length?4:8,a=(1<<c)-1;e=Number("0x"+e.substr(1));if(isNaN(e))return null;b.forEach(["b","g","r"],function(b){var g=e&a;
e>>=c;h[b]=4==c?17*g:g});h.a=1;return h};u.fromArray=e.colorFromArray=function(b,s){var h=s||new u;h._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));isNaN(h.a)&&(h.a=1);return h.sanitize()};u.fromString=e.colorFromString=function(b,s){var h=u.named[b];return h&&u.fromArray(h,s)||u.fromRgb(b,s)||u.fromHex(b,s)};return u})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(e,t,b,n,u){var q=null;b.add("vml",
function(b,h,c){c.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';b="adj"in c.firstChild;c.innerHTML="";return b});return{load:function(s,h,c){function a(){h(["dojox/gfx/"+d],function(a){e.renderer=d;q=a;c(a)})}if(q&&"force"!=s)c(q);else{var d=u.forceGfxRenderer;s=!d&&(t.isString(u.gfxRenderer)?u.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var g,m;!d&&s.length;)switch(s.shift()){case "svg":"SVGAngle"in n.global&&(d="svg");break;case "vml":b("vml")&&(d="vml");break;case "silverlight":try{b("ie")?
(g=new ActiveXObject("AgControl.AgControl"))&&g.IsVersionSupported("1.0")&&(m=!0):navigator.plugins["Silverlight Plug-In"]&&(m=!0)}catch(w){m=!1}finally{g=null}m&&(d="silverlight");break;case "canvas":n.global.CanvasRenderingContext2D&&(d="canvas")}"canvas"===d&&!1!==u.canvasEvents&&(d="canvasWithEvents");"svg"==d&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(a):a()}}}})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(e,t){var b=e.matrix={},n={};b._degToRad=
function(b){return n[b]||(n[b]=Math.PI*b/180)};b._radToDeg=function(b){return 180*(b/Math.PI)};b.Matrix2D=function(e){if(e)if("number"==typeof e)this.xx=this.yy=e;else if(e instanceof Array){if(0<e.length){for(var q=b.normalize(e[0]),s=1;s<e.length;++s){var h=q,c=b.normalize(e[s]),q=new b.Matrix2D;q.xx=h.xx*c.xx+h.xy*c.yx;q.xy=h.xx*c.xy+h.xy*c.yy;q.yx=h.yx*c.xx+h.yy*c.yx;q.yy=h.yx*c.xy+h.yy*c.yy;q.dx=h.xx*c.dx+h.xy*c.dy+h.dx;q.dy=h.yx*c.dx+h.yy*c.dy+h.dy}t.mixin(this,q)}}else t.mixin(this,e)};t.extend(b.Matrix2D,
{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});t.mixin(b,{identity:new b.Matrix2D,flipX:new b.Matrix2D({xx:-1}),flipY:new b.Matrix2D({yy:-1}),flipXY:new b.Matrix2D({xx:-1,yy:-1}),translate:function(e,q){return 1<arguments.length?new b.Matrix2D({dx:e,dy:q}):new b.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,q){return 1<arguments.length?new b.Matrix2D({xx:e,yy:q}):"number"==typeof e?new b.Matrix2D({xx:e,yy:e}):new b.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var q=Math.cos(e);e=Math.sin(e);return new b.Matrix2D({xx:q,
xy:-e,yx:e,yy:q})},rotateg:function(e){return b.rotate(b._degToRad(e))},skewX:function(e){return new b.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return b.skewX(b._degToRad(e))},skewY:function(e){return new b.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return b.skewY(b._degToRad(e))},reflect:function(e,q){1==arguments.length&&(q=e.y,e=e.x);var s=e*e,h=q*q,c=s+h,a=2*e*q/c;return new b.Matrix2D({xx:2*s/c-1,xy:a,yx:a,yy:2*h/c-1})},project:function(e,q){1==arguments.length&&(q=e.y,e=e.x);var s=
e*e,h=q*q,c=s+h,a=e*q/c;return new b.Matrix2D({xx:s/c,xy:a,yx:a,yy:h/c})},normalize:function(e){return e instanceof b.Matrix2D?e:new b.Matrix2D(e)},isIdentity:function(b){return 1==b.xx&&0==b.xy&&0==b.yx&&1==b.yy&&0==b.dx&&0==b.dy},clone:function(e){var q=new b.Matrix2D,s;for(s in e)"number"==typeof e[s]&&("number"==typeof q[s]&&q[s]!=e[s])&&(q[s]=e[s]);return q},invert:function(e){e=b.normalize(e);var q=e.xx*e.yy-e.xy*e.yx;return e=new b.Matrix2D({xx:e.yy/q,xy:-e.xy/q,yx:-e.yx/q,yy:e.xx/q,dx:(e.xy*
e.dy-e.yy*e.dx)/q,dy:(e.yx*e.dx-e.xx*e.dy)/q})},_multiplyPoint:function(b,e,s){return{x:b.xx*e+b.xy*s+b.dx,y:b.yx*e+b.yy*s+b.dy}},multiplyPoint:function(e,q,s){e=b.normalize(e);return"number"==typeof q&&"number"==typeof s?b._multiplyPoint(e,q,s):b._multiplyPoint(e,q.x,q.y)},multiplyRectangle:function(e,q){var s=b.normalize(e);q=q||{x:0,y:0,width:0,height:0};if(b.isIdentity(s))return{x:q.x,y:q.y,width:q.width,height:q.height};var h=b.multiplyPoint(s,q.x,q.y),c=b.multiplyPoint(s,q.x,q.y+q.height),a=
b.multiplyPoint(s,q.x+q.width,q.y),d=b.multiplyPoint(s,q.x+q.width,q.y+q.height),s=Math.min(h.x,c.x,a.x,d.x),g=Math.min(h.y,c.y,a.y,d.y),m=Math.max(h.x,c.x,a.x,d.x),h=Math.max(h.y,c.y,a.y,d.y);return{x:s,y:g,width:m-s,height:h-g}},multiply:function(e){for(var q=b.normalize(e),s=1;s<arguments.length;++s){var h=q,c=b.normalize(arguments[s]),q=new b.Matrix2D;q.xx=h.xx*c.xx+h.xy*c.yx;q.xy=h.xx*c.xy+h.xy*c.yy;q.yx=h.yx*c.xx+h.yy*c.yx;q.yy=h.yx*c.xy+h.yy*c.yy;q.dx=h.xx*c.dx+h.xy*c.dy+h.dx;q.dy=h.yx*c.dx+
h.yy*c.dy+h.dy}return q},_sandwich:function(e,q,s){return b.multiply(b.translate(q,s),e,b.translate(-q,-s))},scaleAt:function(e,q,s,h){switch(arguments.length){case 4:return b._sandwich(b.scale(e,q),s,h);case 3:return"number"==typeof s?b._sandwich(b.scale(e),q,s):b._sandwich(b.scale(e,q),s.x,s.y)}return b._sandwich(b.scale(e),q.x,q.y)},rotateAt:function(e,q,s){return 2<arguments.length?b._sandwich(b.rotate(e),q,s):b._sandwich(b.rotate(e),q.x,q.y)},rotategAt:function(e,q,s){return 2<arguments.length?
b._sandwich(b.rotateg(e),q,s):b._sandwich(b.rotateg(e),q.x,q.y)},skewXAt:function(e,q,s){return 2<arguments.length?b._sandwich(b.skewX(e),q,s):b._sandwich(b.skewX(e),q.x,q.y)},skewXgAt:function(e,q,s){return 2<arguments.length?b._sandwich(b.skewXg(e),q,s):b._sandwich(b.skewXg(e),q.x,q.y)},skewYAt:function(e,q,s){return 2<arguments.length?b._sandwich(b.skewY(e),q,s):b._sandwich(b.skewY(e),q.x,q.y)},skewYgAt:function(e,q,s){return 2<arguments.length?b._sandwich(b.skewYg(e),q,s):b._sandwich(b.skewYg(e),
q.x,q.y)}});e.Matrix2D=b.Matrix2D;return b})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(e,t){e.add("esri-svg",function(){return-1!==t.renderer.toLowerCase().indexOf("svg")});return e})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(e,
t,b,n,u,q,s,h,c,a,d,g,m,w,A){var x=e([h],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(c,d){this._attrs={};if(c&&n.isString(c))this._url=m.urlToObject(this.url=c);else if(this.url=this._url=null,(d=d||c)&&(d.layerDefinition||d.query))d=null;this.spatialReference=new w(4326);this.initialExtent=new A(-180,-90,180,90,new w(4326));this._map=this._div=null;this.normalization=
!0;d&&(d.id&&(this.id=d.id),!1===d.visible&&(this.visible=!1),a.isDefined(d.opacity)&&(this.opacity=d.opacity),a.isDefined(d.minScale)&&this.setMinScale(d.minScale),a.isDefined(d.maxScale)&&this.setMaxScale(d.maxScale),this.attributionDataUrl=d.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,a.isDefined(d.showAttribution)&&(this.showAttribution=d.showAttribution),this.className=d.className,this.refreshInterval=d.refreshInterval||0);this._errorHandler=n.hitch(this,this._errorHandler);
this.refresh=n.hitch(this,this.refresh);if(this.managedSuspension){var g=this._setMap;this._setMap=function(a){var c=g.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!a.loaded)var d=b.connect(a,"onLoad",this,function(){b.disconnect(d);d=null;this.evaluateSuspension()});return c}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,
refreshInterval:0,_errorHandler:function(a){this.loaded||(this.loadError=a);this.onError(a)},_setMap:function(a,c,d,g){this._map=a;this._lyrZEHandle=b.connect(a,"onZoomEnd",this,this._processMapScale);if(a.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var m=b.connect(a,"onLoad",this,function(){b.disconnect(m);m=null;this._processMapScale()})},_unsetMap:function(a,c){b.disconnect(this._lyrZEHandle);this._toggleRT();this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=
!0},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this._toggleRT(),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(a,b){this.updating&&(this.updating=!1,this.attr("data-updating"),this._toggleRT(!0),this.onUpdateEnd(a,b),this._map&&this._map._decr())},_getToken:function(){var a=this._url,b=this.credential;return a&&a.query&&a.query.token||b&&b.token||void 0},_findCredential:function(){this.credential=
c.id&&this._url&&c.id.findCredential(this._url.path)},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(a){this.setScaleRange(a)},setMaxScale:function(a){this.setScaleRange(null,a)},setScaleRange:function(b,c){var d=a.isDefined(b),g=a.isDefined(c);this.loaded||(this._hasMin=this._hasMin||
d,this._hasMax=this._hasMax||g);var m=this.minScale,x=this.maxScale;this.minScale=(d?b:this.minScale)||0;this.maxScale=(g?c:this.maxScale)||0;if(m!==this.minScale||x!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?
this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this._toggleRT();this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var a=void 0===this._resumedOnce,b=this.className,c=this._attrs,d=this.getNode(),g;if(a){this._resumedOnce=!0;if(b&&d){var m=d.getAttribute("class")||"";RegExp("(^|\\s)"+b+"(\\s|$)","i").test(m)||d.setAttribute("class",m+((m?
" ":"")+b))}if(c&&d)for(g in c)c.hasOwnProperty(g)&&d.setAttribute(g,c[g])}this._toggleRT(!0);this.onResume({firstOccurrence:a});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var a=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();a!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(a){return a?x.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(a,b){if(!a&&
(!this._map||!this._map.loaded))return!1;var c=this._map;a=a||c.getScale();var d=this.minScale,g=this.maxScale,m=!d,x=!g,w;b&&(w=c.width>c.height?c.width:c.height);m||(a<=d?m=!0:b&&(m=Math.abs(d-a)/d<1/w));x||(a>=g?x=!0:b&&(x=Math.abs(g-a)/g<1/w));return m&&x},getAttributionData:function(){var a=this.attributionDataUrl,b=new u(g._dfdCanceller);this.hasAttributionData&&a?(b._pendingDfd=d({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),b._pendingDfd.then(function(a){b.callback(a)},
function(a){b.errback(a)})):(a=Error("Layer does not have attribution data"),a.log=t.isDebug,b.errback(a));return b},getResourceInfo:function(){var a=this.resourceInfo;return n.isString(a)?q.fromJson(a):n.clone(a)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(a,b){var c=this.getNode();if("data-reference"===a&&11>s("ie"))return this;c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));this._attrs&&(null==b?delete this._attrs[a]:this._attrs[a]=b);return this},
setRefreshInterval:function(a){var b=this.refreshInterval;this.refreshInterval=a;this._toggleRT();a&&!this.updating&&!this.suspended&&this._toggleRT(!0);if(b!==a)this.onRefreshIntervalChange();return this},_toggleRT:function(a){a&&this.refreshInterval?(clearTimeout(this._refreshT),this._refreshT=setTimeout(this.refresh,6E4*this.refreshInterval)):this._refreshT&&(clearTimeout(this._refreshT),this._refreshT=null)},setNormalization:function(a){this.normalization=a},setVisibility:function(a){this.visible!==
a&&(this.visible=a,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",a?null:"")},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onError:function(){}});s("extend-esri")&&n.setObject("layers.Layer",x,c);return x})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),
function(e,t,b,n,u,q){e=e([n],{declaredClass:"esri.Evented",registerConnectEvents:function(){var b=this.constructor,h=this.constructor._meta.parents,c=[{}],a={},d,g,m=function(a,b){t.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=a[c];d._meta&&d._meta.parents&&m(d._meta.parents,b);d.prototype._eventMap&&b.push(t.mixin({},d.prototype._eventMap))}return b};if(!b._onMap){m(h,c);c.push(this._eventMap);h=t.mixin.apply(this,c);for(d in this)/^on\w/.test(d)&&t.isFunction(this[d])&&(c=this._hyphenLower(d).toLowerCase(),
h[c]||(a[c]={method:d}));for(g in h)d=this._onCamelCase(g),a[g]={method:d,argKeys:h[g]};b._onMap=a;return b._onMap}},on:function(e,h){if(-1<e.indexOf(",")){for(var c=e.split(/\s*,\s*/),a=c.length,d=[];a--;)d.push(this.on(c[a],h));d.remove=function(){for(var a=0;a<d.length;a++)d[a].remove()};return d}var c=this.constructor._onMap||this.registerConnectEvents(),a="string"==typeof e&&e.toLowerCase(),g=this._onCamelCase(a),m=c&&c[a];return(g=m&&m.method||this[g]&&t.isFunction(this[g])&&g)?m&&t.isArray(m.argKeys)?
(c=this._onArr2Obj(h,c[a].argKeys),b.after(this,g,c,!0)):b.after(this,g,function(a){a=a||{};a.target||(a.target=this);h.call(this,a)},!0):this.inherited(arguments)},emit:function(b,h){var c,a,d,g,m=b.toLowerCase();g=this._onCamelCase(b);var w=this.constructor._onMap||this.registerConnectEvents();g=(d=w&&w[m]&&w[m].method||t.isFunction(this[g])&&g)&&this[d];d&&(w&&w[m])&&this._onObj2Arr(function(){a=Array.prototype.slice.call(arguments)},w[m].argKeys)(h);h=h||{};h.target||(h.target=this);g&&(c=a&&
a.length?a:[h],c=g.apply(this,c));this.inherited(arguments,[b,h]);return c},_onObj2Arr:function(b,h){if(h){var c=this;return function(a){var d,g=[],m=h.length;for(d=0;d<m;d++)g[d]=a[h[d]];b.apply(c,g)}}return b},_onArr2Obj:function(b,h){if(h){var c=this;return function(){var a,d={},g=arguments.length;for(a=0;a<g;a++)d[h[a]]=arguments[a];d.target||(d.target=c);b.call(c,d)}}return b},_hyphenLower:function(b){return b.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(b,c){return(c?"-":"")+b.toLowerCase()})},
_onCamelCase:function(b){return"on"+b.substr(0,1).toUpperCase()+b.substr(1).replace(/\-([a-z])/g,function(b,c){return c.toUpperCase()})}});u("extend-esri")&&(q.Evented=e);return e})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/io/script dojo/io/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,
C){function E(a){a=new q(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function F(m,e,C,y){var q=!1,v=!1,G;A.isDefined(e)&&(u.isObject(e)?(q=!!e.useProxy,v=!!e.usePost,G=e.crossOrigin):q=!!e);m=u.mixin({},m);m._ssl&&(m.url=m.url.replace(/^http:/i,"https:"));e=m.content;var z=m.url,l=C&&m.form,f=P;G=A.isDefined(G)?G:f.useCors;m.load=function(f){var r;f&&(f.error?(r=u.mixin(Error(),f.error),r.log=b.isDebug):"error"===f.status&&(r=u.mixin(Error(),f),r.log=b.isDebug),r&&!A.isDefined(r.httpCode)&&
(r.httpCode=r.code));return r||f};m.error=function(r,k){k&&k.xhr&&k.xhr.abort();r instanceof Error||(r=u.mixin(Error(),r));r.log=b.isDebug;f.errorHandler(r,k);return r};m._token&&(m.content=m.content||{},m.content.token=m._token);var r=0,k;e&&z&&(k=d.objectToQuery(e),r=k.length+z.length+1,w("esri-url-encodes-apostrophe")&&(r=k.replace(/'/g,"%27").length+z.length+1));m.timeout=A.isDefined(m.timeout)?m.timeout:f.timeout;m.handleAs=m.handleAs||"json";try{var B,H,J=G&&x.canUseXhr(m.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(m.url),
Q=x.hasSameOrigin(m.url,window.location.href)||J,S=v||C||r>f.postLength?!0:!1,X=!Q&&-1!==m.handleAs.indexOf("json")&&m.callbackParamName&&!C?!0:!1,aa=x.getProxyRule(m.url)||f.alwaysUseProxy||q||(!X||S)&&!Q?!0:!1;C&&(!w("esri-file-upload")&&!aa&&J)&&(aa=!0);if(aa)if(B=x.getProxyUrl(z,G),H=B.path,B._xo&&(J=!0),!S&&H.length+1+r>f.postLength&&(S=!0),m.url=H+"?"+z,S)m.content=u.mixin(B.query||{},e);else{var D=d.objectToQuery(u.mixin(B.query||{},e));D&&(m.url+="?"+D);m.content=null}if(X&&!S)return!A.isDefined(m.isAsync)&&
4>w("ff")&&(m.isAsync=!0),h.get(N?N(m):m);var E=m.headers;if(J&&(!E||!E.hasOwnProperty("X-Requested-With")))E=m.headers=E||{},E["X-Requested-With"]=null;if(C){var K=m.callbackParamName||"callback.html",F=m.callbackElementName||"textarea",L,I,la,ea,za=l.elements?l.elements.length:0,oa;if(e=m.content)for(L in e)if(la=e[L],A.isDefined(la)){I=null;for(ea=0;ea<za;ea++)if(oa=l.elements[ea],oa.name===L){I=oa;break}I?I.value=la:y?l.append(L,la):l.appendChild(a.create("input",{type:"hidden",name:L,value:la}))}if(w("esri-file-upload"))t.forEach(l.elements,
function(f){f.name===K&&l.removeChild(f)}),m.contentType=!1,m.postData=y?l:new FormData(l),delete m.form;else{l.enctype="multipart/form-data";9>w("ie")&&(l.encoding="multipart/form-data");l.method="post";t.some(l.elements,function(f){return f.name===K})||l.appendChild(a.create("input",{type:"hidden",name:K,value:F}));if(-1!==z.toLowerCase().indexOf("addattachment")||-1!==z.toLowerCase().indexOf("updateattachment"))m.url=z+(-1===z.indexOf("?")?"?":"\x26")+K+"\x3d"+F,aa&&(m.url=H+"?"+m.url);delete m.content}}if(J&&
!m.hasOwnProperty("withCredentials")&&"with-credentials"===P.useCors){y=aa?H:z;var sa=x.canUseXhr(y,!0),ma=-1<sa?P.corsEnabledServers[sa]:null;if(ma&&ma.hasOwnProperty("withCredentials"))ma.withCredentials&&(m.withCredentials=!0);else if(g.id){var pa=g.id.findServerInfo(y);pa&&pa.webTierAuth&&(m.withCredentials=!0)}}m=N?N(m):m;if(S){if(C&&!w("esri-file-upload"))return c.send(m);!aa&&w("safari")&&(m.url+=(-1===m.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+R++);return s.post(m)}return s.get(m)}catch(ya){return C=
new n,C.errback(m.error(ya)),C}}function y(a){var b=P.corsStatus,c=x.canUseXhr(a,!0);-1<c&&P.corsEnabledServers.splice(c,1);b[E(a)]=1;return c}function I(a){var b=P.corsStatus;if(P.corsDetection&&P.useCors)try{var c=E(a);w("esri-cors")&&(a&&-1!==a.toLowerCase().indexOf("/rest/services")&&!x.hasSameOrigin(a,window.location.href)&&!x.canUseXhr(a)&&!b[c])&&(b[c]=-1,s.get({url:a.substring(0,a.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(d){d?
(b[c]=2,x.canUseXhr(a)||P.corsEnabledServers.push(c)):b[c]=1},function(a){b[c]=1}))}catch(d){}}function L(a){N=a}function D(a,c){function d(k){k._pendingDfd=F(a,c,r,f);if(!k._pendingDfd){k.ioArgs=k._pendingDfd&&k._pendingDfd.ioArgs;var l=Error("Deferred object is missing");l.log=b.isDebug;a._usrDfd=null;k.errback(l);k._pendingDfd=null;return k}k._pendingDfd.addCallback(function(f){k.ioArgs=k._pendingDfd&&k._pendingDfd.ioArgs;a._usrDfd=null;k.callback(f);k._pendingDfd=null}).addErrback(function(f){var r,
l,B;f&&(r=f.code,l=f.subcode,B=(B=f.messageCode)&&B.toUpperCase());if(f&&403==r&&(4==l||f.message&&-1<f.message.toLowerCase().indexOf("ssl")&&-1===f.message.toLowerCase().indexOf("permission"))){if(!a._ssl){a._ssl=a._sslFromServer=!0;a._usrDfd=k;D(a,c);return}}else if(f&&415==f.status){if(y(a.url),!a._err415){a._err415=1;a._usrDfd=k;D(a,c);return}}else if(g.id&&-1!==t.indexOf(g.id._errorCodes,r)&&!g.id._isPublic(a.url)&&!v&&(403!=r||-1===t.indexOf(K,B)&&(!A.isDefined(l)||2==l&&a._token))){k._pendingDfd=
g.id.getCredential(a.url,{token:a._token,error:f});k._pendingDfd.addCallback(function(f){a._token=f.token;a._usrDfd=k;a._credential=f;a._ssl=a._sslFromServer||f.ssl;D(a,c)}).addErrback(function(f){a._usrDfd=null;k.errback(f);k._pendingDfd=null});return}k.ioArgs=k._pendingDfd&&k._pendingDfd.ioArgs;a._usrDfd=null;k.errback(f);k._pendingDfd=null})}a.url=x.fixUrl(a.url);"file:"!==window.location.protocol&&(a.url=x.getAbsoluteUrl(a.url));c=c||{};var m,h=a.form,v=c.disableIdentityLookup,q=c._preLookup,
z=!1;if(w("esri-workers")&&!1!==P.useWorkers)if(!0===c.useWorkers||!0===P.useWorkers)z=!0;else if(c.workerOptions){var l=c.workerOptions;if(l.callback||l.worker&&l.worker.worker instanceof Worker)z=!0}var f=h&&h.append,r=h&&(h.elements?t.some(h.elements,function(f){return"file"===f.type}):f),k=-1!==a.url.toLowerCase().indexOf("token\x3d")||a.content&&a.content.token||r&&t.some(h.elements,function(f){return"token"===f.name})?1:0;I(a.url);if(a._usrDfd)m=a._usrDfd;else{m=new n(C._dfdCanceller);m.addCallback(function(f){if((/\/sharing\/rest\/accounts\/self/i.test(a.url)||
/\/sharing\/rest\/portals\/self/i.test(a.url))&&!k&&!a._token&&f.user&&f.user.username){P.webTierAuthServers.push(E(a.url));f=P.corsEnabledServers;var r=x.canUseXhr(a.url,!0),l={host:E(a.url),withCredentials:!0};if(-1===r)f.push(l);else{var B=f[r];"object"===typeof B?B.withCredentials=!0:f.splice(r,1,l)}}if(f=a._credential)if(r=(r=g.id.findServerInfo(f.server))&&r.owningSystemUrl)r=r.replace(/\/?$/,"/sharing"),(f=g.id.findCredential(r,f.userId))&&-1===g.id._getIdenticalSvcIdx(r,f)&&f.resources.splice(0,
0,r)});m.addBoth(function(f){delete a._credential;if(f&&(!w("ie")||!f.nodeType))f._ssl=a._ssl});var B=a.load,H=a.error;B&&m.addCallback(function(f){var r=m._pendingDfd,r=r&&r.ioArgs;return B.call(r&&r.args,f,r)});H&&m.addErrback(function(f){var r=m._pendingDfd,r=r&&r.ioArgs;return H.call(r&&r.args,f,r)})}if(g.id&&!k&&!a._token&&!g.id._isPublic(a.url)&&(!v||q))if(h=g.id.findCredential(a.url))a._token=h.token,a._ssl=h.ssl;z?c.workerOptions&&c.workerOptions.worker?(G||(G=s),s=c.workerOptions.worker,
d(m)):e(["./workers/RequestClient"],function(f){G||(G=s);if(c.workerOptions){var r=c.workerOptions;s=f.getClient(r.callback,r.cbFunction)}else s=f.getClient();d(m)}):(G&&(s=G,G=null),d(m));return m}var G=null,N,P=m.defaults.io,K=["COM_0056","COM_0057"],R=0;D._request=F;D._disableCors=y;D._detectCors=I;D.setRequestPreCallback=L;w("extend-esri")&&(g.request=D,g._request=F,g._disableCors=y,g._detectCors=I,g.setRequestPreCallback=L);return D})},"dojo/_base/url":function(){define(["./kernel"],function(e){var t=
/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,b=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,n=function(){for(var e=arguments,q=[e[0]],s=1;s<e.length;s++)if(e[s]){var h=new n(e[s]+""),q=new n(q[0]+"");if(""==h.path&&!h.scheme&&!h.authority&&!h.query)null!=h.fragment&&(q.fragment=h.fragment),h=q;else if(!h.scheme&&(h.scheme=q.scheme,!h.authority&&(h.authority=q.authority,"/"!=h.path.charAt(0)))){for(var q=(q.path.substring(0,q.path.lastIndexOf("/")+1)+h.path).split("/"),
c=0;c<q.length;c++)"."==q[c]?c==q.length-1?q[c]="":(q.splice(c,1),c--):0<c&&(!(1==c&&""==q[0])&&".."==q[c]&&".."!=q[c-1])&&(c==q.length-1?(q.splice(c,1),q[c-1]=""):(q.splice(c-1,2),c-=2));h.path=q.join("/")}q=[];h.scheme&&q.push(h.scheme,":");h.authority&&q.push("//",h.authority);q.push(h.path);h.query&&q.push("?",h.query);h.fragment&&q.push("#",h.fragment)}this.uri=q.join("");e=this.uri.match(t);this.scheme=e[2]||(e[1]?"":null);this.authority=e[4]||(e[3]?"":null);this.path=e[5];this.query=e[7]||
(e[6]?"":null);this.fragment=e[9]||(e[8]?"":null);null!=this.authority&&(e=this.authority.match(b),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null)};n.prototype.toString=function(){return this.uri};return e._Url=n})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),function(e,t,b,n,u,q,s,h,c,a){t.deprecated("dojo/io/script",
"Use dojo/request/script.","2.0");var d={get:function(b){var m,h=this._makeScriptDeferred(b,function(a){m&&m.cancel()}),e=h.ioArgs;q._ioAddQueryToUrl(e);q._ioNotifyStart(h);m=c.get(e.url,{timeout:b.timeout,jsonp:e.jsonp,checkString:b.checkString,ioArgs:e,frameDoc:b.frameDoc,canAttach:function(a){e.requestId=a.id;e.scriptId=a.scriptId;e.canDelete=a.canDelete;return d._canAttach(e)}},!0);a.around(m,"isValid",function(a){return function(b){d._validCheck(h);return a.call(this,b)}});m.then(function(){h.resolve(h)}).otherwise(function(a){h.ioArgs.error=
a;h.reject(a)});return h},attach:c._attach,remove:c._remove,_makeScriptDeferred:function(a,b){var h=q._ioSetArgs(a,b||this._deferredCancel,this._deferredOk,this._deferredError),e=h.ioArgs;e.id=t._scopeName+"IoScript"+(a.callbackSuffix||this._counter++);e.canDelete=!1;e.jsonp=a.callbackParamName||a.jsonp;e.jsonp&&(e.query=e.query||"",0<e.query.length&&(e.query+="\x26"),e.query+=e.jsonp+"\x3d"+(a.frameDoc?"parent.":"")+t._scopeName+".io.script.jsonp_"+e.id+"._jsonpCallback",e.frameDoc=a.frameDoc,e.canDelete=
!0,h._jsonpCallback=this._jsonpCallback,this["jsonp_"+e.id]=h);h.addBoth(function(a){e.canDelete&&(a instanceof Error?d["jsonp_"+e.id]._jsonpCallback=function(){delete d["jsonp_"+e.id];if(e.requestId)t.global[c._callbacksProperty][e.requestId]()}:d._addDeadScript(e))});return h},_deferredCancel:function(a){a.canceled=!0},_deferredOk:function(a){a=a.ioArgs;return a.json||a.scriptLoaded||a},_deferredError:function(a,b){return a},_deadScripts:[],_counter:1,_addDeadScript:function(a){d._deadScripts.push({id:a.id,
frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(a){if((a=d._deadScripts)&&0<a.length){for(var b=0;b<a.length;b++)d.remove(a[b].id,a[b].frameDoc),delete d["jsonp_"+a[b].id],a[b].frameDoc=null;d._deadScripts=[]}return!0},_ioCheck:function(a){a=a.ioArgs;return a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") !\x3d 'undefined'")},_resHandle:function(a){d._ioCheck(a)?a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},
_jsonpCallback:function(a){this.ioArgs.json=a;if(this.ioArgs.requestId)t.global[c._callbacksProperty][this.ioArgs.requestId](a)}};b.setObject("dojo.io.script",d);return d})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(e,t,b,n,u,q,s,h,c,a,d){function g(a,b){a.canDelete&&C._remove(a.id,b.options.frameDoc,!0)}function m(a){D&&D.length&&(u.forEach(D,function(a){C._remove(a.id,
a.frameDoc);a.frameDoc=null}),D=[]);return a.options.jsonp?!a.data:!0}function w(a){return!!this.scriptLoaded}function A(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function x(a,b){if(this.canDelete){var c=this.response.options;D.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&(c.ioArgs.frameDoc=null);c.frameDoc=null}b?this.reject(b):this.resolve(a)}function C(a,c,d){var h=b.parseArgs(a,b.deepCopy({},c));a=h.url;c=h.options;var e=b.deferred(h,
g,m,c.jsonp?null:c.checkString?A:w,x);q.mixin(e,{id:E+F++,canDelete:!1});c.jsonp&&(RegExp("[?\x26]"+c.jsonp+"\x3d").test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+c.jsonp+"\x3d"+(c.frameDoc?"parent.":"")+E+"_callbacks."+e.id),e.canDelete=!0,L[e.id]=function(a){h.data=a;e.handleResponse(h)});b.notify&&b.notify.emit("send",h,e.promise.cancel);if(!c.canAttach||c.canAttach(e)){var n=C._attach(e.id,a,c.frameDoc);if(!c.jsonp&&!c.checkString)var D=s(n,y,function(a){if("load"===a.type||I.test(n.readyState))D.remove(),
e.scriptLoaded=a})}s.once(n,"error",function(a){e.reject(a);C._remove(e.id,c.frameDoc,!0)});t(e);return d?e:e.promise}a.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var E=e.id.replace(/[\/\.\-]/g,"_"),F=0,y=a("script-readystatechange")?"readystatechange":"load",I=/complete|loaded/,L=n.global[E+"_callbacks"]={},D=[];C.get=C;C._attach=function(a,b,c){c=c||d.doc;
var g=c.createElement("script");g.type="text/javascript";g.src=b;g.id=a;g.async=!0;g.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(g)};C._remove=function(a,b,d){c.destroy(h.byId(a,b));L[a]&&(d?L[a]=function(){delete L[a]}:delete L[a])};C._callbacksProperty=E+"_callbacks";return C})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m){b.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");q=m._iframeName;q=q.substring(0,q.lastIndexOf("_"));var w=n.delegate(m,{create:function(){return w._frame=m.create.apply(m,arguments)},get:null,post:null,send:function(a){var c,d=u._ioSetArgs(a,function(a){c&&c.cancel()},function(a){var d=null;a=a.ioArgs;try{var g=a.handleAs;"xml"===g||"html"===g?d=c.response.data:(d=c.response.text,"json"===g?d=t.fromJson(d):"javascript"===g&&(d=b.eval(d)))}catch(m){d=
m}return d},function(a,b){b.ioArgs._hasError=!0;return a}),w=d.ioArgs,s="GET",y=h.byId(a.form);a.method&&("POST"===a.method.toUpperCase()&&y)&&(s="POST");a={method:s,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:y?null:a.content,data:y?a.content:null,timeout:a.timeout,ioArgs:w};a.method&&(a.method=a.method.toUpperCase());if(e.ioPublish&&b.publish&&!1!==w.args.ioPublish)var q=g.after(m,"_notifyStart",function(a){a.options.ioArgs===w&&(q.remove(),u._ioNotifyStart(d))},
!0);c=m(w.url,a,!0);w._callNext=c._callNext;c.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},_iframeOnload:s.global[q+"_onload"]});n.setObject("dojo.io.iframe",w);return w})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(e,t,b,n,u,q,s,h){function c(a,c){var d=function(d,g){if("string"==typeof g&&(g=b.byId(g),!g))return new c([]);var m="string"==
typeof d?a(d,g):d?d.end&&d.on?d:[d]:[];return m.end&&m.on?m:new c(m)};d.matches=a.match||function(a,b,c){return 0<d.filter([a],b,c).length};d.filter=a.filter||function(a,b,c){return d(b,c).filter(function(b){return-1<u.indexOf(a,b)})};if("function"!=typeof a){var g=a.search;a=function(a,b){return g(b||document,a)}}return d}t.add("array-extensible",function(){return 1==q.delegate([],{length:1}).length&&!t("bug-for-in-skips-shadowed")});var a=Array.prototype,d=a.slice,g=a.concat,m=u.forEach,w=function(a,
b,c){b=[0].concat(d.call(b,0));c=c||e.global;return function(d){b[0]=d;return a.apply(c,b)}},A=function(a){var b=this instanceof x&&t("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var d=b?this:[],g=d.length=c.length,m=0;m<g;m++)d[m]=c[m];if(b)return d;c=d}q._mixin(c,C);c._NodeListCtor=function(a){return x(a)};return c},x=A,C=x.prototype=t("array-extensible")?[]:{};x._wrap=C._wrap=function(a,b,c){a=new (c||this._NodeListCtor||x)(a);return b?
a._stash(b):a};x._adaptAsMap=function(a,b){return function(){return this.map(w(a,arguments,b))}};x._adaptAsForEach=function(a,b){return function(){this.forEach(w(a,arguments,b));return this}};x._adaptAsFilter=function(a,b){return function(){return this.filter(w(a,arguments,b))}};x._adaptWithCondition=function(a,b,c){return function(){var d=arguments,g=w(a,d,c);if(b.call(c||e.global,d))return this.map(g);this.forEach(g);return this}};m(["slice","splice"],function(b){var c=a[b];C[b]=function(){return this._wrap(c.apply(this,
arguments),"slice"==b?this:null)}});m(["indexOf","lastIndexOf","every","some"],function(a){var b=u[a];C[a]=function(){return b.apply(e,[this].concat(d.call(arguments,0)))}});q.extend(A,{constructor:x,_NodeListCtor:x,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return n(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},
concat:function(a){var b=d.call(this,0),c=u.map(arguments,function(a){return d.call(a,0)});return this._wrap(g.apply(b,c),this)},map:function(a,b){return this._wrap(u.map(this,a,b),this)},forEach:function(a,b){m(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=E._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(u.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=q.isFunction(a)?a:q.getObject(a);b=b||{};return this.forEach(function(a){new c(b,
a)})},at:function(){var a=new this._NodeListCtor(0);m(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var E=c(h,A);e.query=c(h,function(a){return A(a)});E.load=function(a,b,d){s.load(a,b,function(a){d(c(a,A))})};e._filterQueryResult=E._filterResult=function(a,b,c){return new A(E.filter(a,b,c))};e.NodeList=E.NodeList=A;return E})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g){function m(a){return!this.isFulfilled()}function w(a){return!!this._finished}function A(a,b){if(!b)try{var c=a.options,d=C.doc(C._frame),g=c.handleAs;if("html"!==g){if("xml"===g)if("html"===d.documentElement.tagName.toLowerCase()){h("a",d.documentElement).orphan();var m=d.documentElement.innerText,m=m.replace(/>\s+</g,"\x3e\x3c");a.text=q.trim(m)}else a.data=d;else a.text=d.getElementsByTagName("textarea")[0].value;u(a)}else a.data=d}catch(x){b=x}b?this.reject(b):
this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function x(a){this._callNext()}function C(a,c,d){var g=n.parseArgs(a,n.deepCreate(y,c),!0);a=g.url;c=g.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");C._frame||(C._frame=C.create(C._iframeName,F+"();"));a=n.deferred(g,null,m,w,A,x);a._callNext=function(){this._calledNext||(this._calledNext=!0,C._currentDfd=null,C._fireNextRequest())};a._legacy=
d;C._dfdQueue.push(a);C._fireNextRequest();b(a);return d?a:a.promise}var E=e.id.replace(/[\/\.\-]/g,"_"),F=E+"_onload";g.global[F]||(g.global[F]=function(){var b=C._currentDfd;if(b){var c=a.byId(b.response.options.form)||b._tmpForm;if(c){for(var g=b._contentToClean,m=0;m<g.length;m++)for(var x=g[m],h=0;h<c.childNodes.length;h++){var w=c.childNodes[h];if(w.name===x){d.destroy(w);break}}b._originalAction&&c.setAttribute("action",b._originalAction);b._originalMethod&&(c.setAttribute("method",b._originalMethod),
c.method=b._originalMethod);b._originalTarget&&(c.setAttribute("target",b._originalTarget),c.target=b._originalTarget)}b._tmpForm&&(d.destroy(b._tmpForm),delete b._tmpForm);b._finished=!0}else C._fireNextRequest()});var y={method:"POST"};C.create=function(a,b,m){if(g.global[a])return g.global[a];if(g.global.frames[a])return g.global.frames[a];m||(c("config-useXDomain")&&!c("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
m=c("config-dojoBlankHtmlUrl")||t.toUrl("dojo/resources/blank.html"));b=d.place('\x3ciframe id\x3d"'+a+'" name\x3d"'+a+'" src\x3d"'+m+'" onload\x3d"'+b+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',g.body());return g.global[a]=b};C.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=g.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;
if(g.doc.frames[b]&&g.doc.frames[b].document)return g.doc.frames[b].document}return null};C.setSrc=function(a,b,c){a=g.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{c?a.location.replace(b):a.location=b}catch(d){}};C._iframeName=E+"_IoIframe";C._notifyStart=function(){};C._dfdQueue=[];C._currentDfd=null;C._fireNextRequest=function(){var b;try{if(!C._currentDfd&&C._dfdQueue.length){do b=C._currentDfd=C._dfdQueue.shift();while(b&&(b.canceled||b.isCanceled&&b.isCanceled())&&C._dfdQueue.length);
if(!b||b.canceled||b.isCanceled&&b.isCanceled())C._currentDfd=null;else{var c=b.response,m=c.options,x=b._contentToClean=[],h=a.byId(m.form),w=n.notify,e=m.data||null,A;!b._legacy&&"POST"===m.method&&!h?h=b._tmpForm=d.create("form",{name:E+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},g.body()):"GET"===m.method&&(h&&-1<c.url.indexOf("?"))&&(A=c.url.slice(c.url.indexOf("?")+1),e=q.mixin(s.queryToObject(A),e));if(h){if(!b._legacy){var y=h;do y=y.parentNode;while(y&&y!==g.doc.documentElement);
y||(h.style.position="absolute",h.style.left="-1000px",h.style.top="-1000px",g.body().appendChild(h));h.name||(h.name=E+"_form")}if(e){var y=function(v,l){d.create("input",{type:"hidden",name:v,value:l},h);x.push(v)},t;for(t in e){var u=e[t];if(q.isArray(u)&&1<u.length)for(A=0;A<u.length;A++)y(t,u[A]);else h[t]?h[t].value=u:y(t,u)}}var F=h.getAttributeNode("action"),W=h.getAttributeNode("method"),v=h.getAttributeNode("target");c.url&&(b._originalAction=F?F.value:null,F?F.value=c.url:h.setAttribute("action",
c.url));if(b._legacy){if(!W||!W.value)W?W.value=m.method:h.setAttribute("method",m.method)}else b._originalMethod=W?W.value:null,W?W.value=m.method:h.setAttribute("method",m.method);b._originalTarget=v?v.value:null;v?v.value=C._iframeName:h.setAttribute("target",C._iframeName);h.target=C._iframeName;w&&w.emit("send",c,b.promise.cancel);C._notifyStart(c);h.submit()}else m="",c.options.data&&(m=c.options.data,"string"!==typeof m&&(m=s.objectToQuery(m))),y=c.url+(-1<c.url.indexOf("?")?"\x26":"?")+m,
w&&w.emit("send",c,b.promise.cancel),C._notifyStart(c),C.setSrc(C._frame,y,!0)}}}catch(O){b.reject(O)}};n.addCommonMethods(C,["GET","POST"]);return C})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(e,t,b,n,u,q,s,h,c){function a(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var d=function(a){return 1==a.length&&
"string"==typeof a[0]},g=function(a){var b=a.parentNode;b&&b.removeChild(a)},m=t.NodeList,w=m._adaptWithCondition,A=m._adaptAsForEach,x=m._adaptAsMap;n.extend(m,{_normalize:function(a,b){var c=!0===a.parse;if("string"==typeof a.template){var d=a.templateFunc||e.string&&e.string.substitute;a=d?d(a.template,a):a}d=typeof a;"string"==d||"number"==d?(a=q.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?n._toArray(a.childNodes):[a]):n.isArrayLike(a)?n.isArray(a)||(a=n._toArray(a)):a=[a];c&&(a._runParse=!0);
return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,c,d){if(!(1!=b.nodeType&&"only"==c))for(var g,m=a.length,h=m-1;0<=h;h--){var x=d?this._cloneNode(a[h]):a[h];if(a._runParse&&e.parser&&e.parser.parse){g||(g=b.ownerDocument.createElement("div"));g.appendChild(x);e.parser.parse(g);for(x=g.firstChild;g.firstChild;)g.removeChild(g.firstChild)}h==m-1?q.place(x,b,c):b.parentNode.insertBefore(x,b);b=x}},position:x(s.position),attr:w(a(h),d),style:w(a(c),d),addClass:A(u.add),removeClass:A(u.remove),
toggleClass:A(u.toggle),replaceClass:A(u.replace),empty:A(q.empty),removeAttr:A(h.remove),marginBox:x(s.getMarginBox),place:function(a,b){var c=t(a)[0];return this.forEach(function(a){q.place(a,c,b)})},orphan:function(a){return(a?t._filterResult(this,a):this).forEach(g)},adopt:function(a,b){return t(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new m;this.map(function(c){t(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var c=
arguments,d=this,g=0;if("string"==typeof a){d=t._filterResult(this,c[0]);if(1==c.length)return d._stash(this);g=1}return this._wrap(b.filter(d,c[g],c[g+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var c=0,d;d=this[c];c++)a.length?this._place(a,d,b,0<c):q.empty(d);return this}});return m})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(e,t,b){function n(b){if("string"==typeof b||b instanceof String){if(b&&!q.test(b))return s[0]=b,s;b=b.split(q);
b.length&&!b[0]&&b.shift();b.length&&!b[b.length-1]&&b.pop();return b}return!b?[]:t.filter(b,function(a){return a})}var u,q=/\s+/,s=[""],h={};return u={contains:function(c,a){return 0<=(" "+b.byId(c).className+" ").indexOf(" "+a+" ")},add:function(c,a){c=b.byId(c);a=n(a);var d=c.className,g,d=d?" "+d+" ":" ";g=d.length;for(var m=0,h=a.length,e;m<h;++m)(e=a[m])&&0>d.indexOf(" "+e+" ")&&(d+=e+" ");g<d.length&&(c.className=d.substr(1,d.length-2))},remove:function(c,a){c=b.byId(c);var d;if(void 0!==a){a=
n(a);d=" "+c.className+" ";for(var g=0,m=a.length;g<m;++g)d=d.replace(" "+a[g]+" "," ");d=e.trim(d)}else d="";c.className!=d&&(c.className=d)},replace:function(c,a,d){c=b.byId(c);h.className=c.className;u.remove(h,d);u.add(h,a);c.className!==h.className&&(c.className=h.className)},toggle:function(c,a,d){c=b.byId(c);if(void 0===d){a=n(a);for(var g=0,m=a.length,h;g<m;++g)h=a[g],u[u.contains(c,h)?"remove":"add"](c,h)}else u[d?"add":"remove"](c,a);return d}}})},"esri/config":function(){define(["dojo/_base/config",
"dojo/topic","dojo/has","./kernel"],function(e,t,b,n){var u={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,
zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:window.Worker&&!1,io:{errorHandler:function(b,e){t.publish("esri.Error",[b])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:"server.arcgisonline.com services.arcgisonline.com www.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com basemaps.arcgis.com elevation3d.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com staticdev.arcgis.com tilesdevext.arcgis.com elevation3ddev.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com".split(" "),
corsDetection:window.cordova?!1:!0,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5}}};b("extend-esri")&&(n.config=u);e.noGlobals||(window.esriConfig=u);return u})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/io-query ./kernel ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(e,t,b,n,u,q,s,h){var c=new b(window.location.href.toLowerCase()),a={},d=q.defaults.io,g=window.location.protocol;
"file:"===g&&(g="http:");a.urlToObject=function(a){var c={},d=new b(a),g=a.indexOf("?");null===d.query?c={path:a,query:null}:(c.path=a.substring(0,g),c.query=n.queryToObject(d.query));d.fragment&&(c.hash=d.fragment,null===d.query&&(c.path=c.path.substring(0,c.path.length-(d.fragment.length+1))));return c};a.getProxyUrl=function(b,c){var g=e.isString(b)?0===e.trim(b).toLowerCase().indexOf("https:"):b,x=d.proxyUrl,s,q,n=h.io.proxyNotSet;if(e.isString(b)&&(q=a.getProxyRule(b)))x=q.proxyUrl;if(!x)throw Error(n);
g&&(!1!==c&&0!==window.location.href.toLowerCase().indexOf("https:"))&&(g=x,0!==g.toLowerCase().indexOf("http")&&(g=a.getAbsoluteUrl(g)),g=g.replace(/^http:/i,"https:"),a.canUseXhr(g)&&(x=g,s=1));x=a.urlToObject(x);x._xo=s;return x};a.addProxy=function(b){var c=a.getProxyRule(b),g;c?g=a.urlToObject(c.proxyUrl):d.alwaysUseProxy&&(g=a.getProxyUrl());g&&(c=a.urlToObject(b),b=g.path+"?"+c.path,(g=n.objectToQuery(e.mixin(g.query||{},c.query)))&&(b+="?"+g));return b};a.addProxyRule=function(b){var c=b.urlPrefix=
a.urlToObject(b.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),g=d.proxyRules,h,e=g.length,s,q=e;for(h=0;h<e;h++)if(s=g[h].urlPrefix,0===c.indexOf(s)){if(c.length===s)return-1;q=h;break}else 0===s.indexOf(c)&&(q=h+1);g.splice(q,0,b);return q};a.getProxyRule=function(b){var c=d.proxyRules,g=c.length,h=a.urlToObject(b).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),e;for(b=0;b<g;b++)if(0===h.indexOf(c[b].urlPrefix)){e=c[b];break}return e};
a.hasSameOrigin=function(a,c,d){a=a.toLowerCase();c=c.toLowerCase();var g=window.location.href.toLowerCase();a=0===a.indexOf("http")?new b(a):g=new b(g);c=0===c.indexOf("http")?new b(c):e.isString(g)?new b(g):g;return(d||a.scheme===c.scheme)&&a.host===c.host&&a.port===c.port};a.canUseXhr=function(b,c){var g=s("esri-phonegap")?!0:!1,h=a.hasSameOrigin,q=d.corsEnabledServers,n,u=-1;!g&&(s("esri-cors")&&q&&q.length)&&(g=t.some(q,function(a,c){var d=a&&"object"===typeof a?a.host:a;return d&&(n=0!==e.trim(d).toLowerCase().indexOf("http"),
h(b,n?"http://"+d:d)||n&&h(b,"https://"+d))?(u=c,!0):!1}));return c?u:g};a.getAbsoluteUrl=function(a){return e.isString(a)&&!/^https?:\/\//i.test(a)?0===a.indexOf("//")?g+a:0===a.indexOf("/")?g+"//"+window.location.host+a:u._appBaseUrl+a:a};a.fixUrl=function(a){/^\/\//i.test(a)&&(a=g+a);return a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")};a.normalize=function(b){b=a._ensureProtocol(b);return b=a._ensureProperProtocolForAGOResource(b)};a._ensureProtocol=function(a){var b;if(!a)return a;/^\/\//i.test(a)&&
(b=c.scheme,a=("file"===b?"https":b)+":"+a);return a};a._ensureProperProtocolForAGOResource=function(a){return"https"===c.scheme&&(/^http\:\/\/server\.arcgisonline\.com(?!:)/i.test(a)||/^http\:\/\/services\.arcgisonline\.com(?!:)/i.test(a)||/^http\:\/\/.+\.arcgis\.com(?!:)/i.test(a))?a.replace(/http:/i,"https:"):a};s("extend-esri")&&(e.mixin(u,a),u._getProxyUrl=a.getProxyUrl,u._getProxiedUrl=a.addProxy,u._hasSameOrigin=a.hasSameOrigin,u._canDoXOXHR=a.canUseXhr,u._getAbsoluteUrl=a.getAbsoluteUrl,u.fixUrl=
a.fixUrl);return a})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(e,t,b){var n={_dfdCanceller:function(b){b.canceled=!0;var e=b._pendingDfd;-1===b.fired&&(e&&-1===e.fired)&&e.cancel();b._pendingDfd=null},_fixDfd:function(b){var e=b.then;b.then=function(b,h,c){if(b){var a=b;b=function(b){return b&&b._argsArray?a.apply(null,b):a(b)}}return e.call(this,b,h,c)};return b},_resDfd:function(b,e,s){var h=e.length;1===h?s?b.errback(e[0]):b.callback(e[0]):1<h?(e._argsArray=
!0,b.callback(e)):b.callback()}};t("extend-esri")&&e.mixin(b,n);return n})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(e,t,b,n){e=e([t],{declaredClass:"esri.Color"});e.toJsonColor=function(b){return b&&[b.r,b.g,b.b,1<b.a?b.a:Math.round(255*b.a)]};e.toDojoColor=function(b){return b&&new t([b[0],b[1],b[2],b[3]/255])};var u,q="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(u=0;u<q.length;u++)e[q[u]]=t[q[u]];b("extend-esri")&&
(n.Color=e);return e})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(e,t,b,n,u){var q={show:function(b){if(b=q.getNode(b))b.style.display="block"},getNode:function(b){return b&&b.domNode||b},hide:function(b){if(b=q.getNode(b))b.style.display="none"},toggle:function(b){if(b=q.getNode(b))b.style.display="none"===b.style.display?"block":"none"},documentBox:8>=u("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:
{w:window.innerWidth,h:window.innerHeight},setScrollable:function(b){if(b=this.getNode(b)){var h=0,c=0,a=0,d=0,g=0,m=0;return[t.connect(b,"ontouchstart",function(w){h=w.touches[0].screenX;c=w.touches[0].screenY;a=b.scrollWidth;d=b.scrollHeight;g=b.clientWidth;m=b.clientHeight}),t.connect(b,"ontouchmove",function(w){w.preventDefault();var e=b.firstChild;e instanceof Text&&(e=b.childNodes[1]);var x=e._currentX||0,q=e._currentY||0,x=x+(w.touches[0].screenX-h);0<x?x=0:0>x&&Math.abs(x)+g>a&&(x=-1*(a-g));
e._currentX=x;q+=w.touches[0].screenY-c;0<q?q=0:0>q&&Math.abs(q)+m>d&&(q=-1*(d-m));e._currentY=q;n.set(e,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+x+"px, "+q+"px)"});h=w.touches[0].screenX;c=w.touches[0].screenY})]}}};u("extend-esri")&&b.mixin(e,q);return q})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(e,t,b,n,u,q){e=e(q,{declaredClass:"esri.symbol.MarkerSymbol",
angle:0,xoffset:0,yoffset:0,size:12,constructor:function(b){b&&t.isObject(b)&&(this.size="auto"===this.size?this.size:n.pt2px(this.size),this.xoffset=n.pt2px(this.xoffset),this.yoffset=n.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(b){this.angle=b;return this},setSize:function(b){this.size=b;return this},setOffset:function(b,h){this.xoffset=b;this.yoffset=h;return this},toJson:function(){var b=n.px2pt(this.size),b=isNaN(b)?void 0:b,h=n.px2pt(this.xoffset),h=isNaN(h)?void 0:
h,c=n.px2pt(this.yoffset),c=isNaN(c)?void 0:c;return t.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:b,angle:this.angle&&-1*this.angle,xoffset:h,yoffset:c})}});b("extend-esri")&&t.setObject("symbol.MarkerSymbol",e,u);return e})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(e,t,b,n,u,q){e=e(null,{declaredClass:"esri.symbol.Symbol",color:new q([0,0,0,1]),type:null,constructor:function(b){if(b&&
t.isObject(b)&&(t.mixin(this,b),this.color&&u.isDefined(this.color[0])&&(this.color=q.toDojoColor(this.color)),(b=this.type)&&0===b.indexOf("esri")))this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[b]},setColor:function(b){this.color=b;return this},toJson:function(){return{color:q.toJsonColor(this.color)}}});b("extend-esri")&&
t.setObject("symbol.Symbol",e,n);return e})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(e,t,b,n,u,q,s,h,c){var a={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},d={style:a.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,xoffset:0,yoffset:0};
e=e(h,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(g,m,h,e){g?t.isString(g)?(this.style=g,m&&(this.size=m),h&&(this.outline=h),e&&(this.color=e)):(this.style=s.valueOf(this._styles,this.style),g.outline&&(this.outline=new c(g.outline))):(t.mixin(this,d),this.size=u.pt2px(this.size),this.outline=new c(this.outline),this.color=
new b(this.color));this.style||(this.style=a.STYLE_CIRCLE)},setStyle:function(a){this.style=a;return this},setPath:function(b){this.path=b;this.setStyle(a.STYLE_PATH);return this},setOutline:function(a){this.outline=a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(a,b,c){this._targetWidth=a;this._targetHeight=b;this._spikeSize=c},getShapeDescriptors:function(){var b,c,h,e=this.style,x=(this.size||u.pt2px(d.size))/
2,q=0-x,s=0+x,n=0-x,y=0+x;switch(e){case a.STYLE_CIRCLE:b={type:"circle",cx:0,cy:0,r:x};c=this.getFill();if(h=this.getStroke())h.style=h.style||"Solid";break;case a.STYLE_CROSS:b={type:"path",path:"M "+q+",0 L "+s+",0 M 0,"+n+" L 0,"+y+" E"};c=null;h=this.getStroke();break;case a.STYLE_DIAMOND:b={type:"path",path:"M "+q+",0 L 0,"+n+" L "+s+",0 L 0,"+y+" L "+q+",0 E"};c=this.getFill();h=this.getStroke();break;case a.STYLE_SQUARE:b={type:"path",path:"M "+q+","+y+" L "+q+","+n+" L "+s+","+n+" L "+s+
","+y+" L "+q+","+y+" E"};c=this.getFill();h=this.getStroke();break;case a.STYLE_X:b={type:"path",path:"M "+q+","+y+" L "+s+","+n+" M "+q+","+n+" L "+s+","+y+" E"};c=null;h=this.getStroke();break;case a.STYLE_PATH:b={type:"path",path:this.path||""},c=this.getFill(),h=this.getStroke()}return{defaultShape:b,fill:c,stroke:h}},toJson:function(){var a=t.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),b=this.outline;b&&(a.outline=b.toJson());a.path=this.path;return s.fixJson(a)}});
t.mixin(e,a);e.defaultProps=d;n("extend-esri")&&(t.setObject("symbol.SimpleMarkerSymbol",e,q),q.symbol.defaultSimpleMarkerSymbol=d);return e})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(e,t,b,n,u,q,s,h){var c={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",
STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},a={color:[0,0,0,1],style:c.STYLE_SOLID,width:1};e=e(h,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",
shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(d,g,m){d?t.isString(d)?(this.style=d,g&&(this.color=g),m&&(this.width=m)):this.style=s.valueOf(this._styles,d.style)||c.STYLE_SOLID:(t.mixin(this,a),this.color=new b(this.color),this.width=u.pt2px(this.width))},setStyle:function(a){this.style=a;return this},getStroke:function(){return this.style===c.STYLE_NULL||0===this.width?null:{color:this.color,
style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return s.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}))}});t.mixin(e,c);e.defaultProps=a;n("extend-esri")&&(t.setObject("symbol.SimpleLineSymbol",e,q),q.symbol.defaultSimpleLineSymbol=a);return e})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
function(e,t,b,n,u,q){e=e(q,{declaredClass:"esri.symbol.LineSymbol",constructor:function(b){t.isObject(b)?this.width=n.pt2px(this.width):this.width=12},setWidth:function(b){this.width=b;return this},toJson:function(){var b=n.px2pt(this.width),b=isNaN(b)?void 0:b;return t.mixin(this.inherited("toJson",arguments),{width:b})}});b("extend-esri")&&t.setObject("symbol.LineSymbol",e,u);return e})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel",
"./Point"],function(e,t,b,n,u){e=e(u,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});b("extend-esri")&&t.setObject("geometry.ScreenPoint",e,n);return e})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(e,t,b,n,u,q,s,h,c,a){var d=function(){return 9>b("ie")?function(a,b,c,d,g,h,e,q,s){var n=[],t=Math.round,G,u=e.length,P,K,R,M,T,U;for(G=0;G<
u;G++)if(P=e[G],M=q?q(P[0][0],P[0][1],s):P[0],1<(R=P.length)){T=t((M[0]-a)*c+g);U=t((b-M[1])*d+h);M=q?q(P[1][0],P[1][1],s):P[1];K=t((M[0]-a)*c+g);M=t((b-M[1])*d+h);n.push("M",T+","+U,"L",K+","+M);for(K=2;K<R;K++)M=q?q(P[K][0],P[K][1],s):P[K],T=t((M[0]-a)*c+g),U=t((b-M[1])*d+h),n.push(T+","+U)}else T=t((M[0]-a)*c+g),U=t((b-M[1])*d+h),n.push("M",T+","+U);return n}:function(a,b,c,d,g,h,e,q,s){var n=[],t,G,u,P,K,R,M=Math.round;t=0;for(u=e?e.length:0;t<u;t++){K=e[t];n.push("M");G=0;for(P=K?K.length:0;G<
P;G++)R=q?q(K[G][0],K[G][1],s):K[G],n.push(M((R[0]-a)*c+g)+","+M((b-R[1])*d+h))}return n}}(),g={toScreenPoint:function(a,b,c,d,g){var h=a.spatialReference,e=d.spatialReference,s=d.x;d=d.y;h&&(e&&!h.equals(e)&&h._canProject(e))&&(h=h.isWebMercator()?u.lngLatToXY(s,d):u.xyToLngLat(s,d,!0),s=h[0],d=h[1]);s=(s-a.xmin)*(b/a.getWidth());d=(a.ymax-d)*(c/a.getHeight());g||(s=Math.round(s),d=Math.round(d));return new q(s,d)},toScreenGeometry:function(b,d,g,x){var q=b.xmin,n=b.ymax,t=d/b.getWidth(),y=g/b.getHeight(),
I=e.forEach,L=Math.round;if(x instanceof u)return new u(L((x.x-q)*t),L((n-x.y)*y));if(x instanceof c){b=new c;var D=b.points;I(x.points,function(a,b){D[b]=[L((a[0]-q)*t),L((n-a[1])*y)]});return b}if(x instanceof a)return new a(L((x.xmin-q)*t),L((n-x.ymin)*y),L((x.xmax-q)*t),L((n-x.ymax)*t));if(x instanceof s){b=new s;var G=b.paths,N;I(x.paths,function(a,b){N=G[b]=[];I(a,function(a,b){N[b]=[L((a[0]-q)*t),L((n-a[1])*y)]})});return b}if(x instanceof h){b=new h;var P=b.rings,K;I(x.rings,function(a,b){K=
P[b]=[];I(a,function(a,b){K[b]=[L((a[0]-q)*t),L((n-a[1])*y)]})});return b}},_toScreenPath:function(a,b,c,g,h,e){var q=g instanceof s,y=a.spatialReference,n=g.spatialReference,t,D;y&&(n&&!y.equals(n)&&y._canProject(n))&&(y.isWebMercator()?t=u.lngLatToXY:(t=u.xyToLngLat,D=!0));return d(a.xmin,a.ymax,b/a.getWidth(),c/a.getHeight(),h,e,q?g.paths:g.rings,t,D)},toMapPoint:function(a,b,c,d){return new u(a.xmin+d.x/(b/a.getWidth()),a.ymax-d.y/(c/a.getHeight()),a.spatialReference)},toMapGeometry:function(b,
d,g,x){var q=b.xmin,n=b.ymax,t=b.spatialReference,y=d/b.getWidth(),I=g/b.getHeight(),L=e.forEach;if(x instanceof u)return new u(q+x.x/y,n-x.y/I,t);if(x instanceof c){b=new c(t);var D=b.points;L(x.points,function(a,b){D[b]=[q+a[0]/y,n-a[1]/I]});return b}if(x instanceof a)return new a(q+x.xmin/y,n-x.ymin/I,q+x.xmax/y,n-x.ymax/I,t);if(x instanceof s){b=new s(t);var G=b.paths,N;L(x.paths,function(a,b){N=G[b]=[];L(a,function(a,b){N[b]=[q+a[0]/y,n-a[1]/I]})});return b}if(x instanceof h){b=new h(t);var P=
b.rings,K;L(x.rings,function(a,b){K=P[b]=[];L(a,function(a,b){K[b]=[q+a[0]/y,n-a[1]/I]})});return b}}};b("extend-esri")&&t.mixin(t.getObject("geometry",!0,n),g);return g})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(e,t,b,n,u,q,s,h,c,a,d){var g={type:"polyline",paths:null};e=e(h,{declaredClass:"esri.geometry.Polyline",constructor:function(a){b.mixin(this,
g);this.paths=[];this._path=0;a&&(b.isArray(a)?this.paths=b.isArray(a[0][0])?a:[a]:a.paths?b.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(a){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];b.isArray(a[0])?t.forEach(a,this._addPointArr,this):t.forEach(a,this._addPoint,this);return this},_addPointArr:function(a){this.paths[this._path].push(a)},_addPoint:function(a){this.paths[this._path].push([a.x,
a.y])},_insertPoints:function(a,b){this.clearCache();this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);t.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new c(this.paths[a][b],this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),this.paths[a][b]=
[c.x,c.y],this},insertPoint:function(a,b,c){if(this._validateInputs(a)&&q.isDefined(b)&&0<=b&&b<=this.paths[a].length)return this.clearCache(),this.paths[a].splice(b,0,[c.x,c.y]),this},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.paths.splice(a,1)[0];var b,d=a.length,g=this.spatialReference;for(b=0;b<d;b++)a[b]=new c(a[b],g);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new c(this.paths[a].splice(b,1)[0],this.spatialReference)},
getExtent:function(){var b;b=this.getCacheValue("_extent");var c=this.getCacheValue("_partwise");if(b)return b=new a(b),b._partwise=c,b;b=this.paths;var d=b.length;if(d&&b[0].length){var g,h,e,q,s,n,t,u,G=q=b[0][0][0],N=s=b[0][0][1],P=Math.min,K=Math.max,R=this.spatialReference,c=[],M,T,U,V;for(n=0;n<d;n++){g=b[n];M=T=g[0]&&g[0][0];U=V=g[0]&&g[0][1];u=g.length;for(t=0;t<u;t++)h=g[t],e=h[0],h=h[1],G=P(G,e),N=P(N,h),q=K(q,e),s=K(s,h),M=P(M,e),U=P(U,h),T=K(T,e),V=K(V,h);c.push(new a({xmin:M,ymin:U,xmax:T,
ymax:V,spatialReference:R?R.toJson():null}))}b={xmin:G,ymin:N,xmax:q,ymax:s,spatialReference:R?R.toJson():null};c=1<c.length?c:null;this.setCacheValue("_extent",b);this.setCacheValue("_partwise",c);b=new a(b);b._partwise=c;return b}},toJson:function(){var a={paths:b.clone(this.paths)},c=this.spatialReference;c&&(a.spatialReference=c.toJson());return a}});e.defaultProps=g;n("extend-esri")&&(b.setObject("geometry.Polyline",e,u),u.geometry.defaultPolyline=g);return e})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(e,t,b,n,u,q,s,h,c){var a={type:"multipoint",points:null};e=e(q,{declaredClass:"esri.geometry.Multipoint",constructor:function(b){t.mixin(this,a);this.points=[];b&&(b.points?t.mixin(this,b):this.spatialReference=b,this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(a){this.clearCache();t.isArray(a)?this.points.push(a):this.points.push([a.x,a.y]);return this},removePoint:function(a){if(this._validateInputs(a))return this.clearCache(),
new s(this.points.splice(a,1)[0],this.spatialReference)},getExtent:function(){var a=this.getCacheValue("_extent");if(a)return new h(a);var a=this.points,b=a.length;if(b){var c=a[0],e,q,x=e=c[0],s=q=c[1],n=Math.min,t=Math.max,y=this.spatialReference,u,L;for(L=0;L<b;L++)c=a[L],u=c[0],c=c[1],x=n(x,u),s=n(s,c),e=t(e,u),q=t(q,c);a={xmin:x,ymin:s,xmax:e,ymax:q,spatialReference:y?y.toJson():null};this.setCacheValue("_extent",a);return new h(a)}},_validateInputs:function(a){return null===a||0>a||a>=this.points.length?
!1:!0},getPoint:function(a){if(this._validateInputs(a))return a=this.points[a],new s(a[0],a[1],this.spatialReference)},setPoint:function(a,b){if(this._validateInputs(a))return this.clearCache(),this.points[a]=[b.x,b.y],this},toJson:function(){var a={points:t.clone(this.points)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});e.defaultProps=a;b("extend-esri")&&(t.setObject("geometry.Multipoint",e,n),n.geometry.defaultMultipoint=a);return e})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),
function(e,t,b,n,u,q){function s(){t.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}s.prototype={addPlugin:function(b,c){var a=this,d=this._plugins,g=new u;try{e([b],function(m){b in d?g.resolve({id:d[b].declaredId||b.replace(/\//g,".")}):(d[b]=m,q(m.add(a,c),function(){var c={id:m.declaredId||b.replace(/\//g,".")};a.emit("plugin-add",c);g.resolve(c)},function(a){g.reject(a)}))})}catch(m){g.reject(m)}return g.promise},removePlugin:function(b){if(b in this._plugins){var c=
this._plugins[b];c.remove(this);delete this._plugins[b];this.emit("plugin-remove",{id:c.declaredId||b.replace(/\//g,".")})}},_pluginsHandler:function(){var h=this;b.some(arguments,function(b){if(b&&b.plugins&&b.plugins instanceof Array){b=b.plugins;var a,d,g;for(g=0;g<b.length;g++)a=b[g],d=a instanceof Object?a.id:a,h.addPlugin(d,a.options);return!0}})}};return s})},"esri/dijit/HomeButton":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/has ../kernel dijit/_WidgetBase dijit/a11yclick dijit/_TemplatedMixin dojo/on dojo/Deferred dojo/text!./templates/HomeButton.html dojo/i18n!../nls/jsapi dojo/dom-class dojo/dom-style".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w){e=t("esri.dijit.HomeButton",[q,h,e],{templateString:d,options:{theme:"HomeButton",map:null,extent:null,fit:!1,visible:!0},constructor:function(a,c){var d=b.mixin({},this.options,a);this.domNode=c;this._i18n=g;this.set("map",d.map);this.set("theme",d.theme);this.set("visible",d.visible);this.set("extent",d.extent);this.set("fit",d.fit);this.watch("theme",this._updateThemeWatch);this.watch("visible",this._visible);this._css={container:"homeContainer",home:"home",
loading:"loading"}},postCreate:function(){this.inherited(arguments);this.own(c(this._homeNode,s,b.hitch(this,this.home)))},startup:function(){this.inherited(arguments);this.map||this.destroy();if(this.map.loaded)this._init();else c.once(this.map,"load",b.hitch(this,function(){this._init()}))},destroy:function(){this.inherited(arguments)},home:function(){var c=new a,d=this.get("extent");this._showLoading();var g={extent:d};d?this.map.extent!==d?this.map.setExtent(d,this.get("fit")).then(b.hitch(this,
function(){this._hideLoading();this.emit("home",g);c.resolve(g)}),b.hitch(this,function(a){a||(a=Error("HomeButton::Error setting map extent"));g.error=a;this.emit("home",g);c.reject(a)})):(this._hideLoading(),this.emit("home",g),c.resolve(g)):(this._hideLoading(),d=Error("HomeButton::home extent is undefined"),g.error=d,this.emit("home",g),c.reject(d));return c.promise},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)},_init:function(){this._visible();this.get("extent")||
this.set("extent",this.map.extent);this.set("loaded",!0);this.emit("load",{})},_showLoading:function(){m.add(this._homeNode,this._css.loading)},_hideLoading:function(){m.remove(this._homeNode,this._css.loading)},_updateThemeWatch:function(a,b,c){m.remove(this.domNode,b);m.add(this.domNode,c)},_visible:function(){this.get("visible")?w.set(this.domNode,"display","block"):w.set(this.domNode,"display","none")}});n("extend-esri")&&b.setObject("dijit.HomeButton",e,u);return e})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D){function G(a){return function(b){h[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}m.add("dijit-legacy-requires",!w.isAsync);m.add("dojo-bidi",!1);m("dijit-legacy-requires")&&C(0,function(){e(["dijit/_base/manager"])});var N={};n=q("dijit._WidgetBase",[E,I],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:G("lang"),dir:"",_setDirAttr:G("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:n.blankGif||e.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+d.substr(5,
d.length-9),(!b.attributeMap||!(d in b.attributeMap))&&c.push(d))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=s.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,A.mixin(this,a));this.postMixInProperties();this.id||(this.id=D.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=y.body(this.ownerDocument);D.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&(d.parentNode&&this.domNode!==d)&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);t.forEach(this.constructor._setterAttrs,
function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(t.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,t.forEach(this.getChildren(),function(a){!a._started&&
(!a._destroyed&&A.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();t.forEach(this._connects,A.hitch(this,"disconnect"));t.forEach(this._supportingWidgets,b);this.domNode&&t.forEach(D.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);
D.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?h.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){t.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;A.isObject(a)?
g.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,d){d=3<=arguments.length?d:this.attributeMap[a];t.forEach(A.isArray(d)?d:[d],function(d){var g=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":A.isFunction(b)&&(b=A.hitch(this,b));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;g.tagName?h.set(g,d,b):g.set(d,b);break;case "innerText":g.innerHTML="";g.appendChild(this.ownerDocument.createTextNode(b));
break;case "innerHTML":g.innerHTML=b;break;case "class":c.replace(g,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(A.isFunction(d))var g=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!A.isFunction(this.focusNode)?"focusNode":"domNode",m=this[d]&&this[d].tagName,h;if(h=m)if(!(h=
N[m])){h=this[d];var x={},v;for(v in h)x[v.toLowerCase()]=!0;h=N[m]=x}v=h;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:v&&c.l in v&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return g||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",
g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,g=this["on"+a];g&&(d=g.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&
x.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,c){var d=this._onMap(a);return d?b.after(this,d,c,!0):this.own(x(this.domNode,a,c))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?D.findWidgets(this.containerNode):
[]},getParent:function(){return D.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(u.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(F.subscribe(a,A.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():d.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=g.get(this.domNode,"display")},placeAt:function(b,c){var d=
!b.tagName&&D.byId(b);d&&d.addChild&&(!c||"number"===typeof c)?d.addChild(this,c):(d=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(c||"")?d.containerNode:d.domNode:s.byId(b,this.ownerDocument),a.place(this.domNode,d,c),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(A.hitch(this,function(){c&&(c=null,this._destroyed||A.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});m("dojo-bidi")&&
n.extend(L);return n})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(e,t,b,n,u){var q=0,s=[],h=0;t=function(){q=1;e._postLoad=e.config.afterOnLoad=!0;c()};var c=function(){if(!h){for(h=1;q&&(!n||0==n._Q.length)&&(b.idle?b.idle():1)&&s.length;){var a=s.shift();try{a()}catch(c){if(c.info=c.message,b.signal)b.signal("error",c);else throw c;}}h=0}};b.on&&b.on("idle",c);n&&(n._onQEmpty=c);var a=e.ready=e.addOnLoad=function(a,b,d){var h=u._toArray(arguments);
"number"!=typeof a?(d=b,b=a,a=1E3):h.shift();d=d?u.hitch.apply(e,h):function(){b()};d.priority=a;for(h=0;h<s.length&&a>=s[h].priority;h++);s.splice(h,0,d);c()},d=e.config.addOnLoad;if(d)a[u.isArray(d)?"apply":"call"](e,d);n?n(t):t();return a})},"dojo/domReady":function(){define(["./has"],function(e){function t(a){c.push(a);h&&b()}function b(){if(!a){for(a=!0;c.length;)try{c.shift()(u)}catch(b){console.error(b,"in domReady callback",b.stack)}a=!1;t._onQEmpty()}}var n=function(){return this}(),u=document,
q={loaded:1,complete:1},s="string"!=typeof u.readyState,h=!!q[u.readyState],c=[],a;t.load=function(a,b,c){t(c)};t._Q=c;t._onQEmpty=function(){};s&&(u.readyState="loading");if(!h){var d=[],g=function(a){a=a||n.event;h||"readystatechange"==a.type&&!q[u.readyState]||(s&&(u.readyState="complete"),h=1,b())},m=function(a,b){a.addEventListener(b,g,!1);c.push(function(){a.removeEventListener(b,g,!1)})};if(!e("dom-addeventlistener")){var m=function(a,b){b="on"+b;a.attachEvent(b,g);c.push(function(){a.detachEvent(b,
g)})},w=u.createElement("div");try{w.doScroll&&null===n.frameElement&&d.push(function(){try{return w.doScroll("left"),1}catch(a){}})}catch(A){}}m(u,"DOMContentLoaded");m(n,"load");"onreadystatechange"in u?m(u,"readystatechange"):s||d.push(function(){return q[u.readyState]});if(d.length){var x=function(){if(!h){for(var a=d.length;a--;)if(d[a]()){g("poller");return}setTimeout(x,30)}};x()}}return t})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(e,
t,b,n){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(b){var e=this._attrPairNames;return e[b]?e[b]:e[b]={s:"_"+b+"Setter",g:"_"+b+"Getter"}},postscript:function(b){b&&this.set(b)},_get:function(b,e){return"function"===typeof this[e.g]?this[e.g]():this[b]},get:function(b){return this._get(b,this._getAttrNames(b))},set:function(b,e){if("object"===typeof b){for(var s in b)b.hasOwnProperty(s)&&"_watchCallbacks"!=s&&this.set(s,b[s]);return this}s=this._getAttrNames(b);var h=this._get(b,
s);s=this[s.s];var c;"function"===typeof s?c=s.apply(this,Array.prototype.slice.call(arguments,1)):this[b]=e;if(this._watchCallbacks){var a=this;n(c,function(){a._watchCallbacks(b,h,e)})}return this},_changeAttrValue:function(b,e){var s=this.get(b);this[b]=e;this._watchCallbacks&&this._watchCallbacks(b,s,e);return this},watch:function(e,q){var s=this._watchCallbacks;if(!s)var h=this,s=this._watchCallbacks=function(a,b,c,e){var q=function(x){if(x){x=x.slice();for(var e=0,w=x.length;e<w;e++)x[e].call(h,
a,b,c)}};q(s["_"+a]);e||q(s["*"])};!q&&"function"===typeof e?(q=e,e="*"):e="_"+e;var c=s[e];"object"!==typeof c&&(c=s[e]=[]);c.push(q);var a={};a.unwatch=a.remove=function(){var a=b.indexOf(c,q);-1<a&&c.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(e,t,b){return b("dijit.Destroyable",null,{destroy:function(b){this._destroyed=!0},own:function(){var b=["destroyRecursive","destroy","remove"];e.forEach(arguments,function(u){function q(){h.remove();
e.forEach(c,function(a){a.remove()})}var s,h=t.before(this,"destroy",function(a){u[s](a)}),c=[];u.then?(s="cancel",u.then(q,q)):e.forEach(b,function(a){"function"===typeof u[a]&&(s||(s=a),c.push(t.after(u,a,q,!0)))})},this);return arguments}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(e,t,b){var n={},u={},q={length:0,add:function(b){if(u[b.id])throw Error("Tried to register widget with id\x3d\x3d"+b.id+" but that id is already registered");u[b.id]=
b;this.length++},remove:function(b){u[b]&&(delete u[b],this.length--)},byId:function(b){return"string"==typeof b?u[b]:b},byNode:function(b){return u[b.getAttribute("widgetId")]},toArray:function(){var b=[],h;for(h in u)b.push(u[h]);return b},getUniqueId:function(e){var h;do h=e+"_"+(e in n?++n[e]:n[e]=0);while(u[h]);return"dijit"==b._scopeName?h:b._scopeName+"_"+h},findWidgets:function(b,h){function c(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var g=b.getAttribute("widgetId");g?(g=
u[g])&&a.push(g):b!==h&&c(b)}}var a=[];c(b);return a},_destroyAll:function(){b._curFocus=null;b._prevFocus=null;b._activeStack=[];e.forEach(q.findWidgets(t.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(b){for(;b;){var h=1==b.nodeType&&b.getAttribute("widgetId");if(h)return u[h];b=b.parentNode}return null},_hash:u};return b.registry=q})},"dijit/main":function(){define(["dojo/_base/kernel"],function(e){return e.dijit})},
"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(e,t,b,n){function u(b){if((b.keyCode===e.ENTER||b.keyCode===e.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(b=b.target;b;b=b.parentNode)if(b.dojoClick)return!0}var q;b(document,"keydown",function(b){u(b)?(q=b.target,b.preventDefault()):q=null});b(document,"keyup",function(h){u(h)&&h.target==q&&(q=null,b.emit(h.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:h.ctrlKey,shiftKey:h.shiftKey,
metaKey:h.metaKey,altKey:h.altKey,_origType:h.type}))});var s=function(h,c){h.dojoClick=!0;return b(h,"click",c)};s.click=s;s.press=function(h,c){var a=b(h,n.press,function(a){("mousedown"!=a.type||t.isLeft(a))&&c(a)}),d=b(h,"keydown",function(a){(a.keyCode===e.ENTER||a.keyCode===e.SPACE)&&c(a)});return{remove:function(){a.remove();d.remove()}}};s.release=function(h,c){var a=b(h,n.release,function(a){("mouseup"!=a.type||t.isLeft(a))&&c(a)}),d=b(h,"keyup",function(a){(a.keyCode===e.ENTER||a.keyCode===
e.SPACE)&&c(a)});return{remove:function(){a.remove();d.remove()}}};s.move=n.move;return s})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(e,t,b,n,u,q,s,h,c,a){function d(a,b,c){return A&&c?function(a,b){return q(a,c,b)}:C?function(c,d){var v=q(c,b,function(a){d.call(this,a);K=(new Date).getTime()}),g=q(c,a,function(a){(!K||(new Date).getTime()>K+1E3)&&d.call(this,a)});return{remove:function(){v.remove();
g.remove()}}}:function(b,c){return q(b,a,c)}}function g(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function m(c,d,m){var h=g(c.target);if(F=!c.target.disabled&&h&&h.dojoClick)if(I=(y="useTarget"==F)?h:c.target,y&&c.preventDefault(),L=c.changedTouches?c.changedTouches[0].pageX-a.global.pageXOffset:c.clientX,D=c.changedTouches?c.changedTouches[0].pageY-a.global.pageYOffset:c.clientY,G=("object"==typeof F?F.x:"number"==typeof F?F:0)||4,N=("object"==typeof F?F.y:"number"==typeof F?F:
0)||4,!E){E=!0;var e=function(v){F=y?b.isDescendant(a.doc.elementFromPoint(v.changedTouches?v.changedTouches[0].pageX-a.global.pageXOffset:v.clientX,v.changedTouches?v.changedTouches[0].pageY-a.global.pageYOffset:v.clientY),I):F&&(v.changedTouches?v.changedTouches[0].target:v.target)==I&&Math.abs((v.changedTouches?v.changedTouches[0].pageX-a.global.pageXOffset:v.clientX)-L)<=G&&Math.abs((v.changedTouches?v.changedTouches[0].pageY-a.global.pageYOffset:v.clientY)-D)<=N};a.doc.addEventListener(d,function(a){e(a);
y&&a.preventDefault()},!0);a.doc.addEventListener(m,function(a){e(a);if(F){P=(new Date).getTime();var c=y?I:a.target;"LABEL"===c.tagName&&(c=b.byId(c.getAttribute("for"))||c);var d=a.changedTouches?a.changedTouches[0]:a,l=document.createEvent("MouseEvents");l._dojo_click=!0;l.initMouseEvent("click",!0,!0,a.view,a.detail,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);setTimeout(function(){q.emit(c,"click",l);P=(new Date).getTime()},0)}},!0);c=function(v){a.doc.addEventListener(v,
function(a){!a._dojo_click&&((new Date).getTime()<=P+1E3&&!("INPUT"==a.target.tagName&&n.contains(a.target,"dijitOffScreen")))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),"click"==v&&(("INPUT"!=a.target.tagName||"radio"==a.target.type||"checkbox"==a.target.type)&&"TEXTAREA"!=a.target.tagName&&"AUDIO"!=a.target.tagName&&"VIDEO"!=a.target.tagName)&&a.preventDefault())},!0)};c("click");c("mousedown");c("mouseup")}}var w=5>s("ios"),A=s("pointer-events")||s("MSPointer"),
x=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=s("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),C=s("touch-events"),E,F,y=!1,I,L,D,G,N,P,K,R;A?c(function(){a.doc.addEventListener(x.down,function(a){m(a,x.move,x.up)},!0)}):C&&c(function(){function b(a){var c=u.delegate(a,{bubbles:!0});6<=s("ios")&&(c.touches=a.touches,c.altKey=a.altKey,c.changedTouches=a.changedTouches,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey,c.shiftKey=a.shiftKey,
c.targetTouches=a.targetTouches);return c}R=a.body();a.doc.addEventListener("touchstart",function(a){K=(new Date).getTime();var b=R;R=a.target;q.emit(b,"dojotouchout",{relatedTarget:R,bubbles:!0});q.emit(R,"dojotouchover",{relatedTarget:b,bubbles:!0});m(a,"touchmove","touchend")},!0);q(a.doc,"touchmove",function(c){K=(new Date).getTime();var d=a.doc.elementFromPoint(c.pageX-(w?0:a.global.pageXOffset),c.pageY-(w?0:a.global.pageYOffset));d&&(R!==d&&(q.emit(R,"dojotouchout",{relatedTarget:d,bubbles:!0}),
q.emit(d,"dojotouchover",{relatedTarget:R,bubbles:!0}),R=d),q.emit(d,"dojotouchmove",b(c))||c.preventDefault())});q(a.doc,"touchend",function(c){K=(new Date).getTime();var d=a.doc.elementFromPoint(c.pageX-(w?0:a.global.pageXOffset),c.pageY-(w?0:a.global.pageYOffset))||a.body();q.emit(d,"dojotouchend",b(c))})});t={press:d("mousedown","touchstart",x.down),move:d("mousemove","dojotouchmove",x.move),release:d("mouseup","dojotouchend",x.up),cancel:d(h.leave,"touchcancel",A?x.cancel:null),over:d("mouseover",
"dojotouchover",x.over),out:d("mouseout","dojotouchout",x.out),enter:h._eventHandler(d("mouseover","dojotouchover",x.over)),leave:h._eventHandler(d("mouseout","dojotouchout",x.out))};return e.touch=t})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(e,t,b,n,u,q,s,h){var c=t("dijit._TemplatedMixin",h,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,
_stringRepl:function(a){var b=this.declaredClass,c=this;return s.substitute(a,this,function(a,h){"!"==h.charAt(0)&&(a=n.getObject(h.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+h);return null==a?"":"!"==h.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=e(this.templatePath,{sanitize:!0}));var a=c.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),d;if(n.isString(a)){if(d=b.toDom(this._stringRepl(a),this.ownerDocument),1!=d.nodeType)throw Error("Invalid template: "+a);}else d=a.cloneNode(!0);this.domNode=d}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});
c._templateCache={};c.getCachedTemplate=function(a,d,g){var m=c._templateCache,h=a,e=m[h];if(e){try{if(!e.ownerDocument||e.ownerDocument==(g||document))return e}catch(x){}b.destroy(e)}a=s.trim(a);if(d||a.match(/\$\{([^\}]+)\}/g))return m[h]=a;d=b.toDom(a,g);if(1!=d.nodeType)throw Error("Invalid template: "+a);return m[h]=d};q("ie")&&u(window,"unload",function(){var a=c._templateCache,d;for(d in a){var g=a[d];"object"==typeof g&&b.destroy(g);delete a[d]}});return c})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(e){return e.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(e,t,b,n){var u;u=function(a,b,c){n(a,{sync:!!b,headers:{"X-Requested-With":null}}).then(c)};var q={},s=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},h={},c={};e.cache=function(a,b,c){var m;"string"==typeof a?/\//.test(a)?(m=a,c=b):m=t.toUrl(a.replace(/\./g,
"/")+(b?"/"+b:"")):(m=a+"",c=b);a=void 0!=c&&"string"!=typeof c?c.value:c;c=c&&c.sanitize;if("string"==typeof a)return q[m]=a,c?s(a):a;if(null===a)return delete q[m],null;m in q||u(m,!0,function(a){q[m]=a});return c?s(q[m]):q[m]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),m=c[0];return(/^\./.test(m)?b(m):m)+(c[1]?"!"+c[1]:"")},load:function(a,b,g){a=a.split("!");var m=1<a.length,e=a[0],A=b.toUrl(a[0]);a="url:"+A;var x=h,n=function(a){g(m?s(a):a)};e in q?x=q[e]:b.cache&&a in b.cache?
x=b.cache[a]:A in q&&(x=q[A]);if(x===h)if(c[A])c[A].push(n);else{var t=c[A]=[n];u(A,!b.async,function(a){q[e]=q[A]=a;for(var b=0;b<t.length;)t[b++](a);delete c[A]})}else n(x)}}})},"dojo/request":function(){define(["./request/default!"],function(e){return e})},"dojo/request/default":function(){define(["exports","require","../has"],function(e,t,b){var n=b("config-requestProvider");n||(n="./xhr");e.getPlatformDefaultId=function(){return"./xhr"};e.load=function(b,e,s,h){t(["platform"==b?"./xhr":n],function(b){s(b)})}})},
"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(e,t,b,n,u,q,s,h,c){var a=u.delegate(h,{mouseenter:q.enter,mouseleave:q.leave,keypress:b._keypress}),d;b=n("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},
_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var d=!0,h=this.attachScope||this,e=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(e)for(var q=e.split(/\s*,\s*/);e=q.shift();)u.isArray(h[e])?
h[e].push(a):h[e]=a,d="containerNode"!=e,this._attachPoints.push(e);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){e=b.split(/\s*,\s*/);for(q=u.trim;b=e.shift();)if(b){var s=null;-1!=b.indexOf(":")?(s=b.split(":"),b=q(s[0]),s=q(s[1])):b=q(b);s||(s=b);this._attachEvents.push(c(a,b,u.hitch(h,s)))}}return d},_attach:function(b,c,h){c=c.replace(/^on/,"").toLowerCase();c="dijitclick"==c?d||(d=e("./a11yclick")):a[c]||c;return s(b,c,h)},_detachTemplateNodes:function(){var a=this.attachScope||
this;t.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];t.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});u.extend(c,{dojoAttachEvent:"",dojoAttachPoint:""});return b})},"esri/dijit/LocateButton":function(){define("require dojo/Evented dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../config dijit/_WidgetBase dijit/a11yclick dijit/_TemplatedMixin dojo/on dojo/Deferred dojo/text!./templates/LocateButton.html dojo/i18n!../nls/jsapi dojo/dom-class dojo/dom-style dojo/dom-attr ../geometry/webMercatorUtils ../geometry/Point ../SpatialReference ../graphic ../symbols/PictureMarkerSymbol ../tasks/ProjectParameters".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D){e=b("esri.dijit.LocateButton",[h,a,t],{templateString:m,options:{theme:"LocateButton",map:null,visible:!0,highlightLocation:!0,symbol:new L(e.toUrl("./images/sdk_gps_location.png"),28,28),infoTemplate:null,scale:null,useTracking:!1,clearOnTrackingStop:!1,setScale:!0,centerAt:!0,timeout:15E3,graphicsLayer:null,geolocationOptions:{maximumAge:0,timeout:15E3,enableHighAccuracy:!0}},constructor:function(a,b){var c=n.mixin({},this.options,a);this.domNode=
b;this._i18n=w;navigator.geolocation||(c.visible=!1);this.set("map",c.map);this.set("theme",c.theme);this.set("visible",c.visible);this.set("scale",c.scale);this.set("highlightLocation",c.highlightLocation);this.set("symbol",c.symbol);this.set("infoTemplate",c.infoTemplate);this.set("geolocationOptions",c.geolocationOptions);this.set("useTracking",c.useTracking);this.set("setScale",c.setScale);this.set("centerAt",c.centerAt);this.set("timeout",c.timeout);this.set("graphicsLayer",c.graphicsLayer);
this.set("clearOnTrackingStop",c.clearOnTrackingStop);this.watch("theme",this._updateThemeWatch);this.watch("visible",this._visible);this.watch("tracking",this._locate);this.watch("useTracking",n.hitch(this,function(){this.get("tracking")&&!this.get("useTracking")&&this._stopTracking();this._setTitle()}));this._css={container:"locateContainer",locate:"zoomLocateButton",loading:"loading",tracking:"tracking"}},postCreate:function(){this.inherited(arguments);this.own(d(this._locateNode,c,n.hitch(this,
this.locate)))},startup:function(){this.inherited(arguments);this.get("map")||this.destroy();if(this.get("map").loaded)this._init();else d.once(this.get("map"),"load",n.hitch(this,function(){this._init()}))},destroy:function(){this._graphicsEvent&&this._graphicsEvent.remove();this._removeWatchPosition();this.inherited(arguments)},clear:function(){var a=this.get("highlightGraphic"),b=this.get("graphicsLayer");a&&(b?b.remove(a):this.get("map").graphics.remove(a),this.set("highlightGraphic",null))},
locate:function(){this.get("useTracking")&&this.set("tracking",!this.get("tracking"));return this._locate()},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)},_setTitle:function(){this.get("useTracking")?this.get("tracking")?C.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.stopTracking):C.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.tracking):C.set(this._locateNode,"title",this._i18n.widgets.locateButton.locate.title)},_removeWatchPosition:function(){this.get("watchId")&&
(navigator.geolocation.clearWatch(this.get("watchId")),this.set("watchId",null));this._removePrivateVars()},_stopTracking:function(){A.remove(this._locateNode,this._css.tracking);this._removeWatchPosition();this.get("clearOnTrackingStop")&&this.clear();this._hideLoading()},_positionToObject:function(a){return a?{coords:n.mixin({},a.coords),timestamp:a.timestamp}:{}},_startTracking:function(){A.add(this._locateNode,this._css.tracking);this._removeWatchPosition();var a=navigator.geolocation.watchPosition(n.hitch(this,
function(a){a=this._positionToObject(a);this._setPosition(a).then(n.hitch(this,function(a){this._locateEvent(a)}),n.hitch(this,function(a){a||(a=Error("LocateButton::Error setting the position."));this._locateError(a)}))}),n.hitch(this,function(a){a||(a=Error("LocateButton::Could not get tracking position."));this._locateError(a)}),this.get("geolocationOptions"));this.set("watchId",a)},_removePrivateVars:function(){this._scale=this._position=this._graphic=null},_getCurrentPosition:function(){var a=
new g;this._removePrivateVars();var b=setTimeout(n.hitch(this,function(){clearTimeout(b);a.reject(Error("LocateButton::time expired for getting location."))}),this.get("timeout"));navigator.geolocation.getCurrentPosition(n.hitch(this,function(c){c=this._positionToObject(c);clearTimeout(b);this._setPosition(c).then(n.hitch(this,function(b){a.resolve(b)}),n.hitch(this,function(b){b||(b=Error("LocateButton::Error setting map position."));a.reject(b)}))}),n.hitch(this,function(b){b||(b=Error("LocateButton::Could not get current position."));
a.reject(b)}),this.get("geolocationOptions"));return a.promise},_locate:function(){var a=new g;this._showLoading();if(navigator.geolocation)this.get("useTracking")?this.get("tracking")?(this._startTracking(),a.resolve({tracking:!0})):(this._stopTracking(),a.resolve({tracking:!1})):this._getCurrentPosition().then(n.hitch(this,function(b){this._locateEvent(b);a.resolve(b)}),n.hitch(this,function(b){b||(b=Error("LocateButton::Could not get current position."));this._locateError(b);a.reject(b)}));else{var b=
Error("LocateButton::geolocation unsupported");this._locateError(b);a.reject(b)}this._setTitle();return a.promise},_projectPoint:function(a){var b=new g,c=this.get("map").spatialReference,d=c.wkid;c.isWebMercator()?(a=E.geographicToWebMercator(a),b.resolve(a)):s.defaults.geometryService&&4326!==d?(d=new D,d.geometries=[a],d.outSR=c,s.defaults.geometryService.project(d).then(n.hitch(this,function(a){a&&a.length?b.resolve(a[0]):b.reject(Error("LocateButton::Point was not projected."))}),function(a){a||
(a=Error("LocateButton::please specify a geometry service on esri/config to project."));b.reject(a)})):b.resolve(a);return b.promise},_getScale:function(a){var b=this.get("scale");return a&&a.coords?b||a.coords.accuracy||5E4:b||5E4},_createPoint:function(a){var b;a&&a.coords&&(b=new F([a.coords.longitude,a.coords.latitude],new y({wkid:4326})));return b},_setPosition:function(a){var b=new g,c,d;this._removePrivateVars();if((this._position=a)&&a.coords){if(c=this._createPoint(a))this._graphic=d=this._createGraphic(c,
a);var m=this._getScale(a);this._scale=m;c?this._projectPoint(c).then(n.hitch(this,function(c){this._graphic=d=this._createGraphic(c,a);var g={graphic:d,scale:m,position:a};this.get("setScale")&&this.get("map").setScale(m);this.get("centerAt")?this.get("map").centerAt(c).then(n.hitch(this,function(){b.resolve(g)}),n.hitch(this,function(a){a||(a=Error("LocateButton::Could not center map."));b.reject(a)})):b.resolve(g)}),n.hitch(this,function(a){a||(a=Error("LocateButton::Error projecting point."));
b.reject(a)})):(c=Error("LocateButton::Invalid point"),b.reject(c))}else c=Error("LocateButton::Invalid position"),b.reject(c);return b.promise},_createGraphic:function(a,b){var c;a&&(c={position:b},c=new I(a,this.get("symbol"),c,this.get("infoTemplate")));return c},_locateEvent:function(a){if(a.graphic){var b=this.get("highlightGraphic"),c=this.get("graphicsLayer");b?(b.setGeometry(a.graphic.geometry),b.setAttributes(a.graphic.attributes),b.setInfoTemplate(a.graphic.infoTemplate),b.setSymbol(a.graphic.symbol)):
(b=a.graphic,this.get("highlightLocation")&&(c?c.add(b):this.get("map").graphics.add(b)));this.set("highlightGraphic",b)}this._hideLoading();this.emit("locate",a)},_locateError:function(a){a={graphic:this._graphic,scale:this._scale,position:this._position,error:a};this._hideLoading();this.emit("locate",a)},_showLoading:function(){this.get("useTracking")||A.add(this._locateNode,this._css.loading)},_hideLoading:function(){this.get("useTracking")||A.remove(this._locateNode,this._css.loading)},_init:function(){this._visible();
this._setTitle();this.get("tracking")&&this.get("useTracking")&&this._locate();this.set("loaded",!0);this.emit("load",{})},_updateThemeWatch:function(a,b,c){A.remove(this.domNode,b);A.add(this.domNode,c)},_visible:function(){this.get("visible")?x.set(this.domNode,"display","block"):x.set(this.domNode,"display","none")}});u("extend-esri")&&n.setObject("dijit.LocateButton",e,q);return e})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),
function(e,t,b,n,u,q,s,h,c){e=e(null,{declaredClass:"esri.Graphic",constructor:function(a,b,g,m){a&&!a.declaredClass?(this.geometry=a.geometry?h.fromJson(a.geometry):null,this.symbol=a.symbol?c.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new s(a.infoTemplate):null):(this.geometry=a,this.symbol=b,this.attributes=g,this.infoTemplate=m)},_shape:null,_graphicsLayer:null,_visible:!0,visible:!0,getDojoShape:function(){return this._shape},getShapes:function(){var a=
[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a},getNode:function(){var a=this._shape&&this._shape.getNode();return a&&a.nodeType?a:null},getNodes:function(){var a=this.getShapes(),b,c,m=a.length,h=[];for(c=0;c<m;c++)(b=a[c]&&a[c].getNode())&&b.nodeType&&h.push(b);return h},getLayer:function(){return this._layer},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;if(a=this._graphicsLayer)a._updateExtent(this),
a._draw(this,!0);return this},setSymbol:function(a,b){var c=this._graphicsLayer,m=this._shape;this.symbol=a;c&&(b&&m&&c._removeShape(this),c._draw(this,!0));return this},setAttributes:function(a){this.attributes=a;return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),b=a&&
a.title;if(t.isFunction(b))b=b.call(a,this);else if(t.isString(b))var c=(a=this.getLayer())&&a._getDateOpts,b=q.substitute(this.attributes,b,{first:!0,dateFormat:c&&c.call(a)});return b},getContent:function(){var a=this.getInfoTemplate(),b=a&&a.content;if(t.isFunction(b))b=b.call(a,this);else if(t.isString(b))var c=(a=this.getLayer())&&a._getDateOpts,b=q.substitute(this.attributes,b,{dateFormat:c&&c.call(a)});return b},attr:function(a,b){var c=this.getNodes(),m,h=c.length;for(m=0;m<h;m++)null==b?
c[m].removeAttribute(a):c[m].setAttribute(a,b);return this},show:function(){this.visible=this._visible=!0;var a,b,c;if(this.getShapes().length){a=this.getNodes();c=a.length;this.attr("data-hidden");for(b=0;b<c;b++)u.show(a[b])}else this._graphicsLayer&&this._graphicsLayer._draw(this,!0);return this},hide:function(){this.visible=this._visible=!1;var a=this._graphicsLayer,b,c;if(a)if("canvas-2d"===a.surfaceType)a._removeShape(this);else if(a=this.getNodes(),c=a.length){this.attr("data-hidden","");for(b=
0;b<c;b++)u.hide(a[b])}return this},toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=t.mixin({},this.attributes));this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a}});e.prototype.getShape=e.prototype.getDojoShape;b("extend-esri")&&(n.Graphic=e);return e})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(e,
t,b,n,u){e=e(null,{declaredClass:"esri.InfoTemplate",constructor:function(b,e){b&&t.isObject(b)&&!t.isFunction(b)?t.mixin(this,b):(this.title=b||"${*}",this.content=e||"${*}")},setTitle:function(b){this.title=b;return this},setContent:function(b){this.content=b;return this},toJson:function(){return u.fixJson({title:this.title,content:this.content})}});b("extend-esri")&&(n.InfoTemplate=e);return e})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(e,t,b,n,u,q,s,h){var c={fromJson:function(a){if(void 0!==a.x&&void 0!==a.y)return new n(a);if(void 0!==a.paths)return new u(a);if(void 0!==a.rings)return new q(a);if(void 0!==a.points)return new s(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new h(a)},getJsonType:function(a){return a instanceof n?"esriGeometryPoint":a instanceof u?"esriGeometryPolyline":a instanceof q?"esriGeometryPolygon":a instanceof h?"esriGeometryEnvelope":a instanceof s?"esriGeometryMultipoint":
null},getGeometryType:function(a){return"esriGeometryPoint"===a?n:"esriGeometryPolyline"===a?u:"esriGeometryPolygon"===a?q:"esriGeometryEnvelope"===a?h:"esriGeometryMultipoint"===a?s:null}};t("extend-esri")&&e.mixin(e.getObject("geometry",!0,b),c);return c})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(e,
t,b,n,u,q,s,h,c,a){var d={fromJson:function(b){var d=null;switch(b.type){case "esriSMS":d=new n(b);break;case "esriPMS":d=new u(b);break;case "esriTS":d=new a(b);break;case "esriSLS":d=void 0!==b.cap?new s(b):new q(b);break;case "esriCLS":d=new s(b);break;case "esriSFS":d=new h(b);break;case "esriPFS":d=new c(b)}return d},getShapeDescriptors:function(a){return a&&a.getShapeDescriptors?a.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};t("extend-esri")&&e.mixin(e.getObject("symbol",
!0,b),d);return d})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(e,t,b,n,u,q,s,h){var c={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};e=e(h,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(a,d,g){a?t.isString(a)?(this.url=a,d&&(this.width=d),g&&(this.height=g)):(this.width=n.pt2px(a.width),this.height=n.pt2px(a.height),
d=a.imageData,!(9>b("ie"))&&d&&(g=this.url,this.url="data:"+(a.contentType||"image")+";base64,"+d,this.imageData=g)):(t.mixin(this,c),this.width=n.pt2px(this.width),this.height=n.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",
x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:"))var c=a,a=b,b=c.indexOf(";base64,")+8,b=c.substr(b);if(t.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=s.getAbsoluteUrl(a);var c=n.px2pt(this.width),c=isNaN(c)?void 0:c,m=n.px2pt(this.height),m=isNaN(m)?void 0:m,a=q.fixJson(t.mixin(this.inherited("toJson",
arguments),{type:"esriPMS",url:a,imageData:b,contentType:this.contentType,width:c,height:m}));delete a.color;delete a.size;a.imageData||delete a.imageData;return a}});e.defaultProps=c;b("extend-esri")&&(t.setObject("symbol.PictureMarkerSymbol",e,u),u.symbol.defaultPictureMarkerSymbol=c);return e})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(e,t,b,n,u,
q,s,h){var c={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},a={color:[0,0,0,1],style:c.STYLE_SOLID,
width:1,cap:c.CAP_BUTT,join:c.JOIN_MITER,miterLimit:10};e=e(h,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(c,g,m,h,e,x){c?t.isString(c)?(this.style=c,g&&(this.color=g),void 0!==m&&(this.width=m),h&&(this.cap=h),e&&(this.join=e),void 0!==x&&(this.miterLimit=x)):(this.cap=s.valueOf(this._caps,c.cap),this.join=
s.valueOf(this._joins,c.join),this.width=u.pt2px(c.width),this.miterLimit=u.pt2px(c.miterLimit)):(t.mixin(this,a),this.color=new b(this.color),this.width=u.pt2px(this.width),this.miterLimit=u.pt2px(this.miterLimit))},setCap:function(a){this.cap=a;return this},setJoin:function(a){this.join=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return t.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===c.JOIN_MITER?this.miterLimit:this.join})},
getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var a=u.px2pt(this.miterLimit),a=isNaN(a)?void 0:a;return s.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});t.mixin(e,c);e.defaultProps=a;n("extend-esri")&&(t.setObject("symbol.CartographicLineSymbol",e,q),q.symbol.defaultCartographicLineSymbol=
a);return e})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(e,t,b,n,u,q,s,h,c,a){var d={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",
STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},g={style:d.STYLE_SOLID,color:[0,0,0,0.25]};e=e(h,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(a,d,h){a?t.isString(a)?(this.style=
a,void 0!==d&&(this.outline=d),void 0!==h&&(this.color=h)):this.style=s.valueOf(this._styles,a.style):(t.mixin(this,g),this.outline=new c(this.outline),this.color=new b(this.color))},setStyle:function(a){this.style=a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var b=this.style;return b===d.STYLE_NULL?null:b===d.STYLE_SOLID?this.color:t.mixin({},u.defaultPattern,{src:a.toUrl("../images/symbol/sfs/"+b+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return s.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});t.mixin(e,d);e.defaultProps=g;n("extend-esri")&&(t.setObject("symbol.SimpleFillSymbol",e,q),q.symbol.defaultSimpleFillSymbol=g);return e})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),
function(e,t,b,n,u,q){e=e(u,{declaredClass:"esri.symbol.FillSymbol",constructor:function(b){b&&(t.isObject(b)&&b.outline)&&(this.outline=new q(b.outline))},setOutline:function(b){this.outline=b;return this},toJson:function(){var b=this.inherited("toJson",arguments);this.outline&&(b.outline=this.outline.toJson());return b}});b("extend-esri")&&t.setObject("symbol.FillSymbol",e,n);return e})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),
function(e,t,b,n,u,q,s,h){var c={xoffset:0,yoffset:0,width:12,height:12};e=e(h,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(a,d,g,m){a?t.isString(a)?(this.url=a,void 0!==d&&(this.outline=d),void 0!==g&&(this.width=g),void 0!==m&&(this.height=m)):(this.xoffset=n.pt2px(a.xoffset),this.yoffset=n.pt2px(a.yoffset),this.width=n.pt2px(a.width),this.height=n.pt2px(a.height),d=a.imageData,!(9>b("ie"))&&d&&(g=this.url,this.url=
"data:"+(a.contentType||"image")+";base64,"+d,this.imageData=g)):(t.mixin(this,c),this.width=n.pt2px(this.width),this.height=n.pt2px(this.height))},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setXScale:function(a){this.xscale=a;return this},setYScale:function(a){this.yscale=a;
return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return t.mixin({},n.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:"))var c=a,a=b,b=c.indexOf(";base64,")+
8,b=c.substr(b);if(t.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=s.getAbsoluteUrl(a);var c=n.px2pt(this.width),c=isNaN(c)?void 0:c,m=n.px2pt(this.height),m=isNaN(m)?void 0:m,h=n.px2pt(this.xoffset),h=isNaN(h)?void 0:h,e=n.px2pt(this.yoffset),e=isNaN(e)?void 0:e,a=q.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:a,imageData:b,contentType:this.contentType,width:c,height:m,xoffset:h,yoffset:e,xscale:this.xscale,yscale:this.yscale}));
a.imageData||delete a.imageData;return a}});e.defaultProps=c;b("extend-esri")&&(t.setObject("symbol.PictureFillSymbol",e,u),u.symbol.defaultPictureFillSymbol=c);return e})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(e,t,b,n,u,q,s,h,c){var a={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:n.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},
d={start:"left",middle:"center",end:"right"},g={left:"start",center:"middle",right:"end",justify:"start"},m={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},w=document.createElement("canvas");e=e(h,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(b,d,g){t.mixin(this,a);this.font=new c(this.font);this.color=new s(this.color);b&&(t.isObject(b)?(t.mixin(this,b),this.color&&q.isDefined(this.color[0])&&(this.color=s.toDojoColor(this.color)),
this.type="textsymbol",this.font=new c(this.font),this.xoffset=n.pt2px(this.xoffset),this.yoffset=n.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=n.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=s.toDojoColor(this.haloColor))):(this.text=b,d&&(this.font=d),g&&(this.color=g)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(a){this.font=a;return this},setSize:function(a){this.font.size=a;return this},setAngle:function(a){this.angle=a;return this},
setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setHaloColor:function(a){this.haloColor=a;return this},setHaloSize:function(a){this.haloSize=a;return this},setAlign:function(a){this.align=a;this.setHorizontalAlignment(a&&d[a.toLowerCase()]||"center");return this},setHorizontalAlignment:function(a){this.horizontalAlignment=a;return this},getSVGAlign:function(){var a=this.horizontalAlignment;return a=a&&g[a.toLowerCase()]||"middle"},setVerticalAlignment:function(a){this.verticalAlignment=
a;return this},getSVGBaseline:function(){var a=this.verticalAlignment;return a&&m[a.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(a){this.decoration=a;this.font||this.setFont(new c);this.font.setDecoration(a);return this},setRotated:function(a){this.rotated=a;return this},setKerning:function(a){this.kerning=a;return this},setText:function(a){this.text=a;return this},getStroke:function(){return null},getFill:function(){return this.color},
getWidth:function(){var a=w&&w.getContext&&w.getContext("2d");if(a){var b=this.font;a.font=(b.style?b.style:n.defaultFont.style)+" "+(b.weight?b.weight:n.defaultFont.weight)+" "+(b.size?b.size:n.defaultFont.size)+"px "+(b.family?b.family:n.defaultFont.family);return a.measureText(this.text).width}var a=this.getHeight(),b=0,c,d;for(c=0;c<this.text.length;c++)d=this.text.charAt(c),b=d==d.toUpperCase()?b+0.7*a:b+0.5*a;return b},getHeight:function(){return n.normalizedLength(this.font.size)},getShapeDescriptors:function(){var a=
this.font,b;a&&(b={},a.size&&(b.size=a.size),a.style&&(b.style=a.style),a.variant&&(b.variant=a.variant),a.decoration&&(b.decoration=a.decoration),a.weight&&(b.weight=a.weight),a.family&&(b.family=a.family));return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||a&&a.decoration,rotated:this.rotated,kerning:this.kerning},font:b,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=n.px2pt(this.xoffset),b=n.px2pt(this.yoffset),
c=n.px2pt(this.haloSize),a=isNaN(a)?void 0:a,b=isNaN(b)?void 0:b,c=isNaN(c)?void 0:c;return q.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:c,haloColor:this.haloColor&&s.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:a,
yoffset:b,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});t.mixin(e,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});e.defaultProps=a;b("extend-esri")&&(t.setObject("symbol.TextSymbol",e,u),u.symbol.defaultTextSymbol=a);return e})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),
function(e,t,b,n,u,q){e=e(null,{declaredClass:"esri.symbol.Font",constructor:function(e,h,c,a,d){e?t.isObject(e)?t.mixin(this,e):(this.size=e,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==h&&(this.style=h),void 0!==c&&(this.variant=c),void 0!==a&&(this.weight=a),void 0!==d&&(this.family=d)):t.mixin(this,n.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>b("ie")&&(this.size&&t.isString(this.size)&&-1<this.size.indexOf("em"))&&(this.size=n.pt2px(12*parseFloat(this.size))+
"px");this.size=this._convert2PxSize(this.size)},setSize:function(b){this.size=this._convert2PxSize(b);return this},_convert2PxSize:function(b){var h;parseFloat(b)==b?h=b:t.isString(b)&&(-1<b.indexOf("pt")?h=n.pt2px(parseFloat(b)):-1<b.indexOf("px")?h=parseFloat(b):-1<b.indexOf("em")?h=n.pt2px(12*parseFloat(b)):-1<b.indexOf("%")&&(h=n.pt2px(0.12*parseFloat(b))));return h},setStyle:function(b){this.style=b;return this},setVariant:function(b){this.variant=b;return this},setWeight:function(b){this.weight=
b;return this},setFamily:function(b){this.family=b;return this},setDecoration:function(b){this.decoration=b;return this},toJson:function(){return q.fixJson({size:n.px2pt(this.size),style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})}});t.mixin(e,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});
b("extend-esri")&&t.setObject("symbol.Font",e,u);return e})},"esri/tasks/ProjectParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),function(e,t,b,n,u,q,s,h){e=e(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJson:function(){var c=b.map(this.geometries,function(a){return a.toJson()}),a={};a.outSR=this.outSR.wkid||n.toJson(this.outSR.toJson());
a.inSR=this.geometries[0].spatialReference.wkid||n.toJson(this.geometries[0].spatialReference.toJson());a.geometries=n.toJson({geometryType:h.getJsonType(this.geometries[0]),geometries:c});this.transformation&&(a.transformation=this.transformation.wkid||n.toJson(this.transformation));s.isDefined(this.transformForward)&&(a.transformForward=this.transformForward);return a}});u("extend-esri")&&t.setObject("tasks.ProjectParameters",e,q);return e})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D){var G={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},N={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},P=n.connect,K=n.disconnect,R=m.create,M=A.set,T=u.hitch,U=w.getMarginBox,V=t.deprecated,W=u.mixin,v=0;t=b(I,{declaredClass:"esri.Map",constructor:function(a,b){W(this,{_slider:null,_navDiv:null,_mapParams:W({attributionWidth:0.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},b||{})});W(this,{isDoubleClickZoom:!1,isShiftDoubleClickZoom:!1,isClickRecenter:!1,isScrollWheelZoom:!1,isPan:!1,isRubberBandZoom:!1,isKeyboardNavigation:!1,isPanArrows:!1,isZoomSlider:!1});u.isFunction(C._css)&&(C._css=C._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var l=F("esri-transforms")&&F("esri-transitions");this.navigationMode=this._mapParams.navigationMode||l&&"css-transforms"||
"classic";"css-transforms"===this.navigationMode&&!l&&(this.navigationMode="classic");this.fadeOnZoom=y.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=b&&b.smartNavigation;if(!y.isDefined(this.smartNavigation)&&F("mac")&&!F("esri-touch")&&!F("esri-pointer")&&!(3.5>=F("ff"))){var f=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);
f&&(y.isDefined(f[1])&&y.isDefined(f[3]))&&(l=parseInt(f[1],10),f=parseInt(f[3],10),this.smartNavigation=10<l||10===l&&6<=f)}this.showAttribution=y.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=P(this,"onLoad",this,"_onLoadInitNavsHandler");var r=R("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(l=u.getObject("esri.dijit.Attribution",!1))this._initAttribution(l,r);else{var k=
v++,B=this;this._rids&&this._rids.push(k);e(["./dijit/Attribution"],function(f){var l=B._rids?q.indexOf(B._rids,k):-1;-1!==l&&(B._rids.splice(l,1),B._initAttribution(f,r))})}this._mapParams.logo&&(l={},6===F("ie")&&(l.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+e.toUrl("./images/map/logo-med.png")+"')"),this._ogol=R("div",{style:l},r),this._setLogoSize(),this._onMapResizeLogo_connect=P(this,"onResize",this,"_setLogoSize"),F("esri-touch")||
(this._ogol_connect=P(this._ogol,"onclick",this,"_openLogoLink")));this.navigationManager=new L(this);b&&b.basemap&&(this._onLoadFix=!0,this.setBasemap(b.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)l=this._getEnclosingResizableWidget(this.container)||window,f=this.resize,this._rszSignal=h.pausable(l,"resize",f),this._oriSignal=h.pausable(window,"orientationchange",f),c.after(l,"resize",f,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);
this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(a){var b=x.getEnclosingWidget(a);return!b?b:b.resize?b:this._getEnclosingResizableWidget(a.parentNode)},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(g.remove(this._ogol,"logo-med"),g.add(this._ogol,"logo-sm")):(g.remove(this._ogol,"logo-sm"),g.add(this._ogol,"logo-med")))},_initAttribution:function(a,b){var l=R("span",{"class":"esriAttribution"},
b,"first");M(l,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(P(l,"onclick",function(){g.contains(this,"esriAttributionOpen")?g.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&g.add(this,"esriAttributionOpen")}));this.attribution=new a({map:this},l)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var a=this._slider;a&&(a.destroy&&!a._destroyed)&&a.destroy();var a=this._navDiv,b=this.attribution;a&&
m.destroy(a);b&&b.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);q.forEach(this._connects,K);clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(a){var b=this.getLevel();
return!this.__tileInfo||!(b===this.getMinZoom()&&0>a||b===this.getMaxZoom()&&0<a)},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var a=-1!==this._getSliderClass(!0).indexOf("Horizontal"),a=[a?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",a?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",a?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];
if(q.some(a,function(f){return!u.getObject(f,!1)})){var a=q.map(a,function(f){return f.replace(/\./g,"/")}),b=v++,l=this;this._rids&&this._rids.push(b);e(a,function(){var f=l._rids?q.indexOf(l._rids,b):-1;-1!==f&&(l._rids.splice(f,1),l._createSlider.apply(l,arguments))})}else a=q.map(a,function(f){return u.getObject(f,!1)}),this._createSlider.apply(this,a)}K(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var a,b,l,f=g.add,r=this.id;this._navDiv=R("div",{id:r+"_navdiv"},
this.root);f(this._navDiv,"navDiv");var k=this.width/2,B=this.height/2,v;for(l in G)b=G[l],a=R("div",{id:r+"_pan_"+l},this._navDiv),f(a,"fixedPan "+b),"up"===l||"down"===l?(v=parseInt(U(a).w,10)/2,M(a,{left:k-v+"px",zIndex:30})):(v=parseInt(U(a).h,10)/2,M(a,{top:B-v+"px",zIndex:30})),this._connects.push(P(a,"onclick",T(this,this[b])));this._onMapResizeNavHandler_connect=P(this,"onResize",this,"_onMapResizeNavHandler");for(l in N)b=N[l],a=R("div",{id:r+"_pan_"+l,style:{zIndex:30}},this._navDiv),f(a,
"fixedPan "+b),this._connects.push(P(a,"onclick",T(this,this[b])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(b,v,l){b=this.id;v/=2;l/=2;var f=a.byId,r,k,B;for(r in G)k=f(b+"_pan_"+r),"up"===r||"down"===r?(B=parseInt(U(k).w,10)/2,M(k,"left",v-B+"px")):(B=parseInt(U(k).h,10)/2,M(k,"top",l-B+"px"))},_createSimpleSlider:function(){if(this._mapParams.slider){var b=this._slider=R("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),v=F("esri-touch")&&!F("ff")?
"touchstart":F("esri-pointer")?navigator.msPointerEnabled?"MSPointerDown":"pointerdown":"onclick",l=R("div",{"class":"esriSimpleSliderIncrementButton"},b),f=R("div",{"class":"esriSimpleSliderDecrementButton"},b);this._addZoomButtonTooltips(l,f);this._incButton=l;this._decButton=f;this._simpleSliderZoomHandler(null,null,null,this.getLevel());l.innerHTML="\x3cspan\x3e+\x3c/span\x3e";f.innerHTML="\x3cspan\x3e\x26ndash;\x3c/span\x3e";8>F("ie")&&g.add(f,"dj_ie67Fix");this._connects.push(P(l,v,this,this._simpleSliderChangeHandler));
this._connects.push(P(f,v,this,this._simpleSliderChangeHandler));"touchstart"==v&&(this._connects.push(P(l,"onclick",this,this._simpleSliderChangeHandler)),this._connects.push(P(f,"onclick",this,this._simpleSliderChangeHandler)));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(P(this,"onZoomEnd",this,this._simpleSliderZoomHandler));10>F("ie")&&a.setSelectable(b,!1);this.root.appendChild(b);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(a){s.stop(a);a=-1!==a.currentTarget.className.indexOf("IncrementButton")?
!0:!1;this._extentUtil({numLevels:a?1:-1})},_simpleSliderZoomHandler:function(a,b,l,f){var r;a=this._incButton;b=this._decButton;-1<f&&f===this.getMaxZoom()?r=a:-1<f&&f===this.getMinZoom()&&(r=b);r?(g.add(r,"esriSimpleSliderDisabledButton"),g.remove(r===a?b:a,"esriSimpleSliderDisabledButton")):(g.remove(a,"esriSimpleSliderDisabledButton"),g.remove(b,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(a){a=a?"Large":"Simple";var b=this._mapParams.sliderOrientation,l=this._mapParams.sliderPosition||
"",b=b&&"horizontal"===b.toLowerCase()?"esri"+a+"SliderHorizontal":"esri"+a+"SliderVertical";if(l)switch(l.toLowerCase()){case "top-left":l="esri"+a+"SliderTL";break;case "top-right":l="esri"+a+"SliderTR";break;case "bottom-left":l="esri"+a+"SliderBL";break;case "bottom-right":l="esri"+a+"SliderBR"}return"esri"+a+"Slider "+b+" "+l},_addZoomButtonTooltips:function(a,b){var l=D.widgets.zoomSlider;d.set(a,"title",l.zoomIn);d.set(b,"title",l.zoomOut)},_createSlider:function(a,b,l){if(this._mapParams.slider){var f=
R("div",{id:this.id+"_zoom_slider"},this.root),r=E.defaults.map,k=this._getSliderClass(!0),B=-1!==k.indexOf("Horizontal"),v=this.getNumLevels();if(0<v){var c,d,g=this._mapParams.sliderLabels,m=!!g,h=!1!==g;if(h){var e=B?"bottomDecoration":"rightDecoration";if(!g){g=[];for(r=0;r<v;r++)g[r]=""}q.forEach([{"class":"esriLargeSliderTicks",container:e,count:v,dijitClass:b},{"class":m&&"esriLargeSliderLabels",container:e,count:v,labels:g,dijitClass:l}],function(r){var k=R("div"),l=r.dijitClass;delete r.dijitClass;
f.appendChild(k);l===b?c=new l(r,k):d=new l(r,k)})}a=this._slider=new a({id:f.id,"class":k,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:v,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},f);a.startup();h&&(c.startup(),d.startup());this._slider_connect=P(a,"onChange",this,"_onSliderChangeHandler");this._connects.push(P(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(P(a._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{a=
this._slider=new a({id:f.id,"class":k,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:r.sliderChangeImmediate,style:"height:50px; z-index:30;"},f);l=a.domNode.firstChild.childNodes;for(r=1;3>=r;r++)M(l[r],"visibility","hidden");a.startup();this._slider_connect=P(a,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(P(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}r=a.incrementButton;l=a.decrementButton;B?this._addZoomButtonTooltips(r,l):
this._addZoomButtonTooltips(l,r);r.style.outline="none";l.style.outline="none";a.sliderHandle.style.outline="none";a._onKeyPress=function(){};if(B=a._movable){var x=B.onMouseDown;B.onMouseDown=function(f){9>F("ie")&&1!==f.button||x.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){K(this._slider_connect);K(this._slidermovestop_connect);this._slider_connect=P(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=P(this._slider._movable,
"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(a){this._extentUtil({targetLevel:a})},_onSliderMoveEndHandler:function(){K(this._slider_connect);K(this._slidermovestop_connect)},_onSliderChangeHandler:function(a){this.setLevel(a)},_updateSliderValue:function(a,b){K(this._slider_connect);var l=this._slider,f=l._onChangeActive;l._onChangeActive=!1;l.set("value",a);l._onChangeActive=f;this._slider_connect=P(l,"onChange",this,b)},_onExtentChangeSliderHandler:function(a,
b,l,f){K(this._slidermovestop_connect);this._updateSliderValue(f.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(a){this._extentUtil({numLevels:0<a?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(a){window.open(E.defaults.map.logoLink,"_blank");s.stop(a)},enableMapNavigation:function(){this.navigationManager.enableNavigation()},disableMapNavigation:function(){this.navigationManager.disableNavigation()},
enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.navigationManager.enableDoubleClickZoom(),this.isDoubleClickZoom=!0)},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.navigationManager.disableDoubleClickZoom(),this.isDoubleClickZoom=!1)},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(V(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),
this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(V(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.navigationManager.enableClickRecenter(),this.isClickRecenter=!0)},disableClickRecenter:function(){this.isClickRecenter&&
(this.navigationManager.disableClickRecenter(),this.isClickRecenter=!1)},enablePan:function(){this.isPan||(this.navigationManager.enablePan(),this.isPan=!0)},disablePan:function(){this.isPan&&(this.navigationManager.disablePan(),this.isPan=!1)},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.navigationManager.enableRubberBandZoom(),this.isRubberBandZoom=!0)},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.navigationManager.disableRubberBandZoom(),this.isRubberBandZoom=!1)},
enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.navigationManager.enableKeyboardNavigation(),this.isKeyboardNavigation=!0)},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.navigationManager.disableKeyboardNavigation(),this.isKeyboardNavigation=!1)},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),
this.isScrollWheelZoom=!1)},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(M(this._slider.domNode||this._slider,"visibility","visible"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(M(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)}});F("extend-esri")&&(C.Map=t);return t})},
"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./PluginTarget ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D,G,N,P,K,R,M,T,U,V,W,v,O,z,l,f,r,k,B,H,J){function Q(k,l){var a=k.lods;a.sort(function(f,r){return f.scale>r.scale?-1:f.scale<r.scale?1:0});var B=[],a=h.filter(a,function(f){if(-1===$(B,f.scale))return B.push(f.scale),!0}),b=l.lods=[],v;h.forEach(a,function(f,k){v=b[k]=new r(f);v.level=k});l.tileInfo=new f(ga(k,{lods:b}))}var S,X=O.toMapPoint,aa=O.toScreenPoint,ka=u.connect,ja=u.disconnect,fa=s.hitch,ca=x.set,$=h.indexOf,ga=s.mixin,la=0,ea=I.defaults.map,
za=ea.layerNamePrefix,oa=ea.graphicsLayerNamePrefix,sa=RegExp("^"+za+"(\\d+)$"),ma=RegExp("^"+oa+"(\\d+)$"),pa=function(){};n=n([G,R],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',invalidBasemap:'Unable to add basemap: "${basemapName}".',
unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],load:["map"],pan:["extent","delta"],"pan-end":["extent",
"delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,
"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(f,r){var k=this;this.registerConnectEvents();ga(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_connects:[],_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,
_cursor:null,_ratioW:1,_ratioH:1,_params:null,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[]});var l=this.container=d.byId(f),B=this.id=g.get(l,"id")||E.getUniqueId(this.declaredClass);m.add(l,"map");var b=A.getContentBox(l),v=m.add,H=w.create;this.position=new T(0,0);this._reposition();var c=this.width=0<b.w?b.w:ea.width,z=this.height=0<
b.h?b.h:ea.height,h=this.root=H("div",{id:B+"_root",style:{width:c+"px",height:z+"px",direction:"ltr"}});v(h,"esriMapContainer");b=this.__container=H("div",{id:B+"_container"},h);ca(b,"position","absolute");v(b,"esriMapContainer");l.appendChild(h);l=this._params=ga({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},r||{});this.wrapAround180=l.wrapAround180;this.optimizePanAnimation=
l.optimizePanAnimation;D.isDefined(l.resizeDelay)&&(this.resizeDelay=l.resizeDelay);l.lods&&(Q({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:l.lods},l),this.__tileInfo=l.tileInfo);this.extent=l.extent;this._extentUtil({mapCenter:l.center,targetLevel:l.zoom,targetScale:l.scale});this.__visibleRect=new V(0,0,c,z);this.__visibleDelta=new V(0,0,c,z);B=this._layersDiv=H("div",{id:B+"_layers"});v(B,"esriMapLayers");b.appendChild(B);
this._zoomAnimDiv=H("div",{style:{position:"absolute"}});l.infoWindow?this.infoWindow=l.infoWindow:(v=this.infoWindow=new J(l.popupOptions,H("div")),v.startup(),v._ootb=!0,ca(v.domNode,"zIndex",40));l.showLabels&&(e(["./layers/LabelLayer"],function(f){S=f;k._createLabelLayer()}),this.on("load",function(){k._createLabelLayer()}));this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:l.showInfoWindowOnClick});this._zoomStartHandler=fa(this,this._zoomStartHandler);this._zoomingHandler=fa(this,
this._zoomingHandler);this._zoomEndHandler=fa(this,this._zoomEndHandler);this._panningHandler=fa(this,this._panningHandler);this._panEndHandler=fa(this,this._panEndHandler);this._endTranslate=fa(this,this._endTranslate);this._timedResize=fa(this,this._timedResize);this._execResize=fa(this,this._execResize);this.resize=fa(this,this.resize);a.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(f){return e.toAbsMid?e.toAbsMid(f):t.id.replace(/\/[^\/]*$/ig,"/")+f},_cleanUp:function(){var f=this.infoWindow;
f&&(f._ootb&&f.destroy?f.destroy():f.unsetMap(this),delete this.infoWindow);ja(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");w.destroy(this.root);this.root=null},_addLayer:function(f,r,k){if(f.id){var a=f.id.match(f instanceof l?ma:sa);a&&a[1]&&(a=Number(a[1]),la<=a&&(la=a+1))}var B=f.id||(f instanceof l?oa:za)+la++;f.id=B;this._layers[B]=f;var b,v;if(r===this.layerIds||r===this.graphicsLayerIds)b=this._layerSize,this._layerSize++;f._isRefLayer="top"===k;k=!D.isDefined(k)||
0>k||k>r.length||"top"===k?r.length:k;0===b&&(this._firstLayerId=B);if(!f._isRefLayer)for(;(v=this.getLayer(r[k-1]))&&v._isRefLayer;)k--;r.splice(k,0,B);var H=fa(this,this._addLayerHandler),c=this;k=this._connects;a=function(){f.loaded?c._onLoadFix?(c._onLoadFix=!1,setTimeout(function(){H(f)},0)):H(f):(c["_"+B+"_addtoken_load"]=ka(f,"onLoad",c,"_addLayerHandler"),c["_"+B+"_addtoken_err"]=ka(f,"onError",c,function(k){H(f,k,r)}))};this.loaded||0===b||f.loaded&&-1===$(this.graphicsLayerIds,B)?a():k.push(ka(this,
"onLoad",a));return f},_addLayerHandler:function(f,r,k){var a=this.id,B=f.id,b=$(f instanceof l?this.graphicsLayerIds:this.layerIds,B),H=b,c=!1,J=this._params;ja(this["_"+B+"_addtoken_load"]);ja(this["_"+B+"_addtoken_err"]);if(r)delete this._layers[B],-1!==b&&(k.splice(b,1),this.onLayerAddResult(f,r));else{-1===b&&(b=$(this._internalLayerIds,B),H=20+b,c=!0);if(B===this._firstLayerId){r=f.spatialReference;if((k=this.extent&&this.extent.spatialReference)&&!k.equals(r)&&(f.tileInfo||!f.url))k=null;k=
this.spatialReference=k||r;this.wrapAround180=this.wrapAround180&&k&&k._isWrappable()?!0:!1;f.tileInfo&&(this.__tileInfo?(r=this.__tileInfo.lods,this.__tileInfo=ga({},f.tileInfo),this.__tileInfo.lods=r):(Q(ga({},f.tileInfo),J),this.__tileInfo=J.tileInfo));if(this.wrapAround180){r=this.__tileInfo;k=k._getInfo();if(!r||Math.abs(k.origin[0]-r.origin.x)>k.dx)this.wrapAround180=!1;this.wrapAround180&&r&&K._addFrameInfo(r,k)}J.units=f.units;if((r=this.__tileInfo&&this.__tileInfo.lods)&&r.length){k=J.minScale;
var b=J.maxScale,d=-1,g=-1,z=!1,S=!1,m;for(m=0;m<r.length;m++)0<k&&(!z&&k>=r[m].scale)&&(d=r[m].level,z=!0),0<b&&(!S&&b>=r[m].scale)&&(g=0<m?r[m-1].level:-1,S=!0);-1===J.minZoom&&(J.minZoom=0===k?r[0].level:d);-1===J.maxZoom&&(J.maxZoom=0===b?r[r.length-1].level:g);for(m=0;m<r.length;m++)J.minZoom===r[m].level&&(J.minScale=r[m].scale),J.maxZoom===r[m].level&&(J.maxScale=r[m].scale)}else J.minZoom=J.maxZoom=J.zoom=-1}f instanceof l?(this._gc||(this._gc=new l._GraphicsContainer,this._gc._setMap(this,
this._layersDiv).id=a+"_gc"),H=f._setMap(this,this._gc._surface),H.id=a+"_"+B,this._layerDivs[B]=H,this._reorderLayers(this.graphicsLayerIds)):(H=f._setMap(this,this._layersDiv,H,this.__LOD),H.id=a+"_"+B,this._layerDivs[B]=H,this._reorderLayers(this.layerIds),!c&&-1!==f.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerAdd(f));B===this._firstLayerId&&(this.graphics=new l({id:a+"_graphics",displayOnPan:J.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(f===this.graphics){k=
this._layers[this._firstLayerId];a=J.zoom;H=J.scale;r=J.center;k=k.initialExtent||k.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&k&&(r&&(r=this._convertGeometry(k,r)),r&&(k=k.centerAt(r)));if(r=this.extent||k&&new U(k.toJson()))-1<a?r=this.__getExtentForLevel(a,null,r).extent:0<H&&(r=v.getExtentForScale(this,H,r));if(!r)return;J=this._fixExtent(r,J.fitExtent);this.extent=J.extent;this.__LOD=J.lod;this.__setExtent(this.extent);
this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}c||(this.onLayerAdd(f),this.onLayerAddResult(f));ja(this[B+"_addLayerHandler_connect"])}},_convertGeometry:function(f,r){var k=f&&f.spatialReference,l=r&&r.spatialReference;k&&(l&&!k.equals(l))&&(k._canProject(l)?k.isWebMercator()?r=z.geographicToWebMercator(r):4326===k.wkid&&(r=z.webMercatorToGeographic(r,!0)):r=null);return r},_reorderLayers:function(f){var r=this.onLayerReorder,k=w.place,l=this._layerDivs,
a=this._layers,B=this._gc?this._gc._surface.getEventSource():null;if(f===this.graphicsLayerIds)h.forEach(f,function(f,b){var v=l[f];v&&(k(v.getEventSource(),B,b),r(a[f],b))});else{var b=this.graphics,v=b?b.id:null,H=this._layersDiv,c;h.forEach(f,function(f,B){c=l[f];f!==v&&c&&(k(c,H,B),r(a[f],B))});this._mapImageLyr&&this._placeMapImageLyr();B&&(B=9>C("ie")?B.parentNode:B,k(B,B.parentNode,f.length))}this.onLayersReordered([].concat(f))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,
this._zoomAnimDiv.anchor)},_zoomingHandler:function(f){var r=parseFloat(f.left),k=parseFloat(f.top);f=new U(r,k-parseFloat(f.height),r+parseFloat(f.width),k,this.spatialReference);r=this.extent.getWidth()/f.getWidth();this.__zoom(f,r,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var f=this._zoomAnimDiv,r=f.extent,k=this.extent.getWidth()/r.getWidth(),l=f.anchor,a=f.newLod,B=f.levelChange;f.extent=f.anchor=f.levelChange=f.startingExtent=f.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(r,
k,l,a,B)},_panningHandler:function(f){if(isNaN(parseFloat(f.left))||isNaN(parseFloat(f.top))){var r=Math.round,k=this._panAnim.node;f.left=-1*(this._delta.x-r(this.width/2))+"px";f.top=-1*(this._delta.y-r(this.height/2))+"px";x.set(k,"left",f.left);x.set(k,"top",f.top)}f=new T(parseFloat(f.left),parseFloat(f.top));r=this.toMap(f);this.onPan(this.extent.offset(this.extent.xmin-r.x,this.extent.ymax-r.y),f)},_panEndHandler:function(f){this.__panning=!1;var r=Math.round;f=new T(-r(parseFloat(f.style.left)),
-r(parseFloat(f.style.top)));var r=f.x,k=f.y,l=this.__visibleRect,a=this.__visibleDelta;l.x+=-r;l.y+=-k;a.x+=-r;a.y+=-k;ca(this._zoomAnimDiv,{left:"0px",top:"0px"});var l=this.extent,a=this._ratioW,B=this._ratioH,l=new U(l.xmin+r/a,l.ymin-k/B,l.xmax+r/a,l.ymax-k/B,this.spatialReference);f.setX(-f.x);f.setY(-f.y);this._delta=this._panAnim=null;this._updateExtent(l);this.onPanEnd(l,f);this._fireExtChg([l,f,!1,this.__LOD])},_fixExtent:function(f,r){for(var k=this._reshapeExtent(f),l=1.25;!0===r&&(k.extent.getWidth()<
f.getWidth()||k.extent.getHeight()<f.getHeight())&&0<k.lod.level&&3>=l;)k=this._reshapeExtent(f.expand(l)),l+=0.25;return k},_getFrameWidth:function(){var f=-1,r=this.spatialReference._getInfo();this.__LOD?(r=this.__LOD._frameInfo)&&(f=r[3]):r&&(f=Math.round(2*r.valid[1]/(this.extent.getWidth()/this.width)));return f},_fixAspectRatio:function(f){var r=f.getWidth(),k=f.getHeight(),l=r/k,a=this.width/this.height,B=0,b=0;this.width>this.height?r>k?a>l?B=k*a-r:b=r/a-k:B=k*a-r:this.width<this.height?r<
k?a>l?B=k*a-r:b=r/a-k:b=r/a-k:r<k?B=k-r:r>k&&(b=r/a-k);B&&(f.xmin-=B/2,f.xmax+=B/2);b&&(f.ymin-=b/2,f.ymax+=b/2);return f},_reshapeExtent:function(f){f=this._fixAspectRatio(f);return this._getAdjustedExtent(f)},_getAdjustedExtent:function(f){if(this.__tileInfo)return K.getCandidateTileInfo(this,this.__tileInfo,f);var r=v.getScale(this,f),k=this.getMinScale(),l=this.getMaxScale(),a=!l||r>=l;k&&!(r<=k)?f=v.getExtentForScale(this,k,f):a||(f=v.getExtentForScale(this,l,f));return{extent:f}},_onBingLayerAdd:function(f){this["__"+
f.id+"_vis_connect"]=u.connect(f,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(f.visible)},_onBingLayerRemove:function(f){u.disconnect(this["__"+f.id+"_vis_connect"]);delete this["__"+f.id+"_vis_connect"];var r=h.some(this.layerIds,function(r){return(f=this._layers[r])&&f.visible&&-1!==f.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(r)},_toggleBingLogo:function(f){f&&!this._bingLogo?(f={left:this._mapParams&&this._mapParams.nav?"25px":""},6===C("ie")&&(f.filter=
"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+e.toUrl("./images/map/bing-logo-lg.png")+"')"),f=this._bingLogo=w.create("div",{style:f},this.root),m.add(f,"bingLogo-lg")):!f&&this._bingLogo&&(w.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(f,r){var k=this._zoomAnim,l=this._panAnim;if(k&&k._active)k.stop(),k._fire("onEnd",[k.node]);else if(l&&l._active){l.stop();this._panAnim=null;var l=l.curve.getValue(l._getStep()),k=
Math.round(parseFloat(l.left)),l=Math.round(parseFloat(l.top)),a=this.navigationManager._dragOrigin;this.__pan(k,l);a&&(a.x-=k,a.y-=l);return}this.__panning=!0;this.onPanStart(this.extent,new T(f,r))},__pan:function(f,r){var k=this.extent,l=this._ratioW,a=this._ratioH;this.onPan(new U(k.xmin-f/l,k.ymin+r/a,k.xmax-f/l,k.ymax+r/a,this.spatialReference),new T(f,r))},__panEnd:function(f,r){var k=this.__visibleRect,l=this.__visibleDelta;k.x+=f;k.y+=r;l.x+=f;l.y+=r;var k=new T(f,r),l=this.extent,a=this._ratioW,
B=this._ratioH,l=new U(l.xmin-f/a,l.ymin+r/B,l.xmax-f/a,l.ymax+r/B,this.spatialReference);this.__panning=!1;this._updateExtent(l);this.onPanEnd(l,k);this._fireExtChg([l,k,!1,this.__LOD])},__zoomStart:function(f,r){this.__zooming=!0;this.onZoomStart(f,1,r,this.__LOD?this.__LOD.level:null)},__zoom:function(f,r,k){this.onZoom(f,r,k)},__zoomEnd:function(f,r,k,l,a){ca(this._layersDiv,{left:"0px",top:"0px"});this._delta=new T(0,0);this.__visibleRect.x=this.__visibleRect.y=0;f=new U(f);this.__LOD=l;this._ratioW=
this.width/f.getWidth();this._ratioH=this.height/f.getHeight();var B=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(f,a);this.onZoomEnd(f,r,k,l?l.level:null);this._fireExtChg([f,B,a,l])},_extentUtil:function(f,r,k,l,a){var B=new q,b,H,c,J,d,Q,g,z,S,m,h=this.width,e=this.height,x,w,A;f&&(b=f.numLevels,H=f.targetLevel,x=D.isDefined(H),c=f.factor,J=f.mapAnchor,d=f.screenAnchor,Q=f.mapCenter,w=f.levelOrFactor,g=f.targetScale,z=D.isDefined(g)&&0<g);r&&(S=r.dx,m=r.dy,Q=r.mapCenter);s.isArray(Q)&&
(Q=new M(Q));var y=this._panAnim;r=(f=this._stopAnim())?f.divExtent:this.extent;var n=this.__tileInfo,C=this._params;if(!this.loaded){if(k)r&&(k=this._convertGeometry(r,k)),k&&(this.extent=k,C.zoom=C.scale=-1,C.center=null);else if(Q||x||z){if(Q)if(r){if(Q=this._convertGeometry(r,Q))this.extent=r.centerAt(Q),C.center=null}else C.center=Q;x&&-1<H?(C.zoom=H,C.scale=-1):z&&(C.scale=g,C.zoom=-1)}B.resolve();return B}if(Q&&(Q=this._convertGeometry(this,Q),!Q)||J&&(J=this._convertGeometry(this,J),!J)||
k&&(k=this._convertGeometry(this,k),!k))return B.reject(),B;y&&(J&&d)&&(J=X(this.extent,h,e,d));f&&(J&&d)&&(J=X(f.divExtent,h,e,d));x&&(n?(b=this.getMinZoom(),x=this.getMaxZoom(),H<b?H=b:H>x&&(H=x),b=H-(f?f.level:this.getLevel())):(b=0<H?-1:1,A=w?H:null));if(!k)if(D.isDefined(b))n?(h=f?f.level:this.getLevel(),e=this.__getExtentForLevel(h+b,Q,r).extent):(e=(f?f.end:this.extent).expand(A||(0<b?0.5*b:2*-b)),A&&Q&&(e=e.centerAt(Q))),e&&(Q?k=e:(h=J||r.getCenter(),S=r.ymax-(e.getHeight()-r.getHeight())*
(h.y-r.ymax)/r.getHeight(),h=r.xmin-(e.getWidth()-r.getWidth())*(h.x-r.xmin)/r.getWidth(),k=new U(h,S-e.getHeight(),h+e.getWidth(),S,this.spatialReference)));else if(z)k=v.getExtentForScale(this,g,r);else if(D.isDefined(c))k=r.expand(c);else if(S||m)f?(k=f.end,J=k.getCenter(),A=aa(k,h,e,J),A.x+=S,A.y+=m,A=X(k,h,e,A),k=k.offset(A.x-J.x,A.y-J.y)):(S=new T(h/2+S,e/2+m),m=X(r,h,e,S),e=r.getWidth(),S=r.getHeight(),h=m.x-e/2,m=m.y-S/2,k=new U(h,m,h+e,m+S,this.spatialReference));k||(Q?(r=f?f.end:r,e=r.getWidth(),
S=r.getHeight(),h=Q.x-e/2,m=Q.y-S/2,k=new U(h,m,h+e,m+S,this.spatialReference)):f&&(k=f.end));k?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,pa),this._extentDfd.reject()),this._extentDfd=B,this.__setExtent(k,null,d,l,f,a)):B.reject();return B},__setExtent:function(f,r,k,l,a,B){try{if(this._firstLayerId)this.extent=f;else{var b=!0,v=this.spatialReference,H=a?a.divExtent:this.extent,c=this._fixExtent(f,l||!1);f=c.extent;var J=f.getWidth(),d=f.getHeight(),Q=Math.round;if(H)var g=
Q(1E6*H.getWidth()),z=Q(1E6*J),S=Q(1E6*H.getHeight()),m=Q(1E6*d),b=g!==z||S!==m;var h,e,X=a&&a.rect,x=a&&a.divExtent;if(ea.zoomDuration&&b&&H){x=x||new U(H);X=X||{left:H.xmin,top:H.ymax,width:H.getWidth(),height:H.getHeight()};e={left:f.xmin,top:f.ymax,width:J,height:d};var w=new M(f.xmin,f.ymax,v),q=new M(f.xmin,f.ymin,v),s=new M(this.extent.xmin,this.extent.ymax,v),A=new M(this.extent.xmin,this.extent.ymin,v);h=W.getLineIntersection(s,w,A,q,v);!h&&!a&&(b=!1)}this._ratioW=this.width/J;this._ratioH=
this.height/d;var y=this._zoomAnimDiv;if(b)if(ca(this._layersDiv,{left:"0px",top:"0px"}),r=new T(0,0),this.__visibleRect.x=this.__visibleRect.y=0,X&&e){this._delta=r;y.id="_zAD";y.startingExtent=x;y.extent=f;y.levelChange=b;y.newLod=c.lod;y.anchor=k?k:!h&&a?a.anchor:aa(this.extent,this.width,this.height,h);var n=this.extent.getWidth()/f.getWidth();C("chrome")&&1024<(1>n?1/n:n)?(this.__zoomStart(x,y.anchor),this.__zoom(x,1,y.anchor),this._fireOnScale(1,y.anchor,!0),this.__zoomEnd(f,n,y.anchor,c.lod,
b)):(this._zoomAnim=N.resize({node:y,start:X,end:e,duration:ea.zoomDuration,rate:ea.zoomRate,beforeBegin:!a?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(n,y.anchor,B))}else this._updateExtent(f,b),this._fireExtChg([this.extent,r,b,this.__LOD=c.lod]);else if(!this.__panning)if(!1===this.loaded||B)this._updateExtent(f,b),this._fireExtChg([this.extent,r,b,this.__LOD=c.lod]);else{this.__panning=!0;X=(new V(0,0,this.width,this.height,
this.spatialReference)).getCenter();X.x=Q(X.x);X.y=Q(X.y);var t=this._delta=this.toScreen(f.getCenter()),ka=Math.abs(X.x-t.x),D=Math.abs(X.y-t.y);this.optimizePanAnimation&&(ka>2*this.width||D>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(f,!1),this.onPanEnd(this.extent,new T(0,0)),this._fireExtChg([this.extent,new T(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,
new T(0,0)),this._panAnim=N.slideTo({node:y,left:X.x-t.x,top:X.y-t.y,duration:ea.panDuration,rate:ea.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play())}}}catch(u){console.error(u)}},_fireOnScale:function(f,r,k){if("css-transforms"===this.navigationMode){var l=this.__visibleDelta;this.onScale(F.scaleAt(f,{x:-1*(this.width/2-(r.x-l.x)),y:-1*(this.height/2-(r.y-l.y))}),k)}},_stopAnim:function(){var f=this._zoomAnim,r=this._panAnim;if(f&&f._active){f.stop();var r=
f.curve.getValue(f._getStep()),k=parseFloat(r.left),l=parseFloat(r.top),f=f.node;return{anchor:f.anchor,start:f.startingExtent,end:f.extent,level:f.newLod&&f.newLod.level,rect:r,divExtent:new U(k,l-parseFloat(r.height),k+parseFloat(r.width),l,this.spatialReference)}}r&&r._active&&(r.stop(),r._fire("onEnd",[r.node]))},__getExtentForLevel:function(f,r,k){var l=this.__tileInfo,l=l&&l.lods;f=D.isDefined(f)?f:0;k=k||this.extent;r=r||k&&k.getCenter();if(l){if(r){k=this.getMinZoom();var a=this.getMaxZoom();
f>a&&(f=a);f<k&&(f=k);f=l[f];l=this.width*f.resolution/2;k=this.height*f.resolution/2;return{extent:new U(r.x-l,r.y-k,r.x+l,r.y+k,r.spatialReference),lod:f}}}else if(k)return{extent:k.expand(!f||1>f?1:f).centerAt(r)}},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var f=--this._jobs;f?0>f&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(f,r){this[f]&&this[f].apply(this,
r)},_updateExtent:function(f,r){this.extent=f;r&&this._setClipRect();var k=this.spatialReference;k&&(k.isWebMercator()?this.geographicExtent=z.webMercatorToGeographic(this._getAvailExtent(),!0):4326===k.wkid&&(this.geographicExtent=new U(this._getAvailExtent().toJson())))},_fireExtChg:function(f){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",f);if(f=this._extentDfd)delete this._extentDfd,f.resolve()},attr:function(f,r){var k=this.container;
k&&(null==r?k.removeAttribute(f):k.setAttribute(f,r));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(f,r,k){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},
onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this._cleanUp(),clearTimeout(this._resizeT),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(f){ca(this.__container,"cursor",this.cursor=
f)},setMapCursor:function(f){this.setCursor(this._cursor=f)},resetMapCursor:function(){this.setCursor(this._cursor)},setInfoWindow:function(f){var r=this.infoWindow;r&&r.unsetMap(this);this.infoWindow=f;this.loaded&&f&&f.setMap(this)},setInfoWindowOnClick:function(f){this._params.showInfoWindowOnClick=f;this.popupManager&&this.popupManager.set("enabled",f)},getInfoWindowAnchor:function(f){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(f)||"upperright"},toScreen:function(f,
r){return aa(this.extent,this.width,this.height,f,r)},toMap:function(f){return X(this.extent,this.width,this.height,f)},addLayer:function(f,r){f&&!this.getLayer(f.id)&&this._addLayer(f,f instanceof l?this.graphicsLayerIds:this.layerIds,r);return f},addLayers:function(f){var r=[],k=f.length,l,a,B=f.length;l=u.connect(this,"onLayerAddResult",function(a,B){-1!==h.indexOf(f,a)&&(k--,r.push({layer:a,success:!B,error:B}),k||(u.disconnect(l),this.onLayersAddResult(r)))});for(a=0;a<B;a++)this.addLayer(f[a]);
return this},removeLayer:function(f,r){var k=f.id,a=f instanceof l?this.graphicsLayerIds:this.layerIds,B=$(a,k);0<=B&&(a.splice(B,1),f instanceof l?(ja(this["_gl_"+f.id+"_click_connect"]),f.loaded&&f._unsetMap(this,this._gc._surface)):f.loaded&&(f._unsetMap(this,this._layersDiv),-1!==f.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(f)),delete this._layers[k],delete this._layerDivs[k],r||this._reorderLayers(a),this.onLayerRemove(f))},removeAllLayers:function(){var f=this.layerIds,r;
for(r=f.length-1;0<=r;r--)this.removeLayer(this._layers[f[r]],1);f=this.graphicsLayerIds;for(r=f.length-1;0<=r;r--)this.removeLayer(this._layers[f[r]],1);this.onLayersRemoved()},reorderLayer:function(f,r){s.isString(f)&&(b.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),f=this.getLayer(f));var k=f.id,a,B=f instanceof l?this.graphicsLayerIds:this.layerIds;0>r?r=0:r>=B.length&&(r=B.length-
1);a=$(B,k);-1===a||a===r||(B.splice(a,1),B.splice(r,0,k),this._reorderLayers(B))},getLayer:function(f){return this._layers[f]},setExtent:function(f,r){f=new U(f.toJson());var k=f.getWidth(),l=f.getHeight();return 0===k&&0===l?this.centerAt(new M({x:f.xmin,y:f.ymin,spatialReference:f.spatialReference&&f.spatialReference.toJson()})):this._extentUtil(null,null,f,r)},centerAt:function(f){return this._extentUtil(null,{mapCenter:f})},centerAndZoom:function(f,r){return this._extentUtil({targetLevel:r,mapCenter:f,
levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:v.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*v.getUnitValueForSR(this.spatialReference)},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},setScale:function(f){return this._extentUtil({targetScale:f})},getLayersVisibleAtScale:function(f){var r=
[];(f=f||this.getScale())&&h.forEach(this.layerIds.concat(this.graphicsLayerIds),function(k){k=this.getLayer(k);k.isVisibleAtScale(f)&&r.push(k)},this);return r},getNumLevels:function(){var f=this.getMinZoom(),r=this.getMaxZoom();return f===r&&0>f?0:r-f+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(f){if(-1<f)return this._extentUtil({targetLevel:f})},getZoom:function(){return this.getLevel()},setZoom:function(f){return this.setLevel(f)},getMinZoom:function(){return this._params.minZoom},
getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(f){var r;s.isObject(f)?(r=f,f=r.title):r=L&&L[f];if(r){this._basemapDfd&&-1===this._basemapDfd.fired&&this._basemapDfd.cancel();var l=[],a=[],B=0;h.forEach(r.baseMapLayers||r.layers,function(f){var r,b={id:f.id,displayLevels:f.displayLevels,opacity:D.isDefined(f.opacity)?f.opacity:null,visible:D.isDefined(f.visibility)?f.visibility:null};if(f.type)switch(f.type){case "OpenStreetMap":r=new H(b)}else{r=f.url;if("https:"===window.location.protocol&&
(-1!==r.search(/^http\:\/\/server\.arcgisonline\.com/i)||-1!==r.search(/^http\:\/\/services\.arcgisonline\.com/i)||-1!==r.search(/^http\:\/\/.+\.arcgis\.com/i)))r=r.replace(/http:/i,"https:");r=new k(r,b)}r&&(l.push(r),a.push(f),f.isReference||B++)},this);if(l.length&&B){var b={basemapName:f,infos:a,layers:l};if(this.loaded){var v=this,c=new q(P._dfdCanceller),J=function(f){c._pendingLayers--;f=h.indexOf(b.layers,this);if(-1<f&&(f=c._layerEvents[f]))u.disconnect(f[0]),u.disconnect(f[1]);0>=c._pendingLayers&&
(delete c._layerEvents,delete v._basemapDfd,0>c.fired&&c.callback(b))};this._basemapDfd=c;c._pendingLayers=0;c._layerEvents={};h.forEach(l,function(f,r){f&&(c._pendingLayers++,f.loaded?J(f):c._layerEvents[r]=[u.connect(f,"onLoad",f,J),u.connect(f,"onError",f,J)])});c.addCallback(fa(this,this._basemapLoaded))}else this._basemapLoaded(b)}}else{f=[];for(var d in L)f.push(d)}},_basemapLoaded:function(f){var r=f.layers,k=f.infos,l=0,a=!0,B;this.loaded&&(h.forEach(r,function(f,r){f.loaded&&(k[r].isReference||
l++)}),a=l);a&&(this.basemapLayerIds&&(B={basemapName:this._basemap,infos:L&&L[this._basemap]&&L[this._basemap].baseMapLayers},B.basemapName||(h.forEach(this.basemapLayerIds,function(f){if(this.getLayer(f)instanceof H)return B.basemapName="osm",B.infos=L&&L.osm&&L.osm.baseMapLayers,!1},this),B.basemapName||(B=null))),this._removeBasemap(),this._basemap=f.basemapName,this.basemapLayerIds=this._addBasemap(r,k),this.attr("data-basemap",this.getBasemap()),this.emit("basemap-change",{current:f,previous:B}))},
_addBasemap:function(f,r){var k=[],l=[],a=0;h.forEach(f,function(f,B){r[B].isReference?k.push(f):(this.addLayer(f,a++),l.push(f.id))},this);k.length&&h.forEach(k,function(f){f.attr("data-reference",!0);this.addLayer(f,"top");l.push(f.id)},this);return l},_removeBasemap:function(){var f=this.basemapLayerIds,r;f&&f.length&&h.forEach(f,function(f){(r=this.getLayer(f))&&this.removeLayer(r)},this)},getBasemap:function(){return this._basemap||""},translate:function(f,r){f=f||0;r=r||0;if(!this._txTimer){this._tx=
this._ty=0;var k=this.toScreen(this.extent.getCenter());this.__panStart(k.x,k.y)}this._tx+=f;this._ty+=r;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var f=this._tx,r=this._ty;this._tx=this._ty=0;this.__panEnd(f,r)},setTimeExtent:function(f){f=(this.timeExtent=f)?new f.constructor(f.toJson()):null;this.onTimeExtentChange(f)},setTimeSlider:function(f){this.timeSlider&&
(ja(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);f&&(this.timeSlider=f,this.setTimeExtent(f.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=ka(f,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(f){if(this.visible!==f){this.visible=f;f||(this._display=this.container.style.display);this.container.style.display=f?this._display:"none";if(this.autoResize){var r=f?"resume":"pause";this._rszSignal[r]();this._oriSignal[r]()}f&&this.resize()}return this},
resize:function(f){clearTimeout(this._resizeT);this._destroyed||(!0===f?this._execResize():this._resizeT=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeT||this._execResize()},_execResize:function(){clearTimeout(this._resizeT);this._resizeT=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var f=this.width,r=this.height,k=x.get(this.container,"display"),l=A.getContentBox(this.container);if(!("none"===k||0>=l.w||
0>=l.h||f===l.w&&r===l.h)){if(k=this._zoomAnim||this._panAnim)k.stop(),k._fire("onEnd",[k.node]);ca(this.root,{width:(this.width=l.w)+"px",height:(this.height=l.h)+"px"});l=this.width;k=this.height;this.attribution&&this.attribution.domNode&&x.set(this.attribution.domNode,"maxWidth",Math.floor(l*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,l,k);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,l,k);var a=new V(this.extent),
f=(new V(a.x,a.y,a.width*(l/f),a.height*(k/r),this.spatialReference)).getExtent();this.onResize(f,l,k);this._extentUtil(null,null,f,null,!0)}},reposition:function(){var f=this.position,r=f.x,k=f.y;this._reposition();f=this.position;if(r!==f.x||k!==f.y)this.onReposition(f.x,f.y)},_reposition:function(){var f=A.position(this.container,!0),r=A.getPadBorderExtents(this.container);this.position.update(f.x+r.l,f.y+r.t)},_setClipRect:function(){delete this._clip;var f=7>=C("ie")||void 0===C("ie")&&7<=C("trident")?
"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var r=this.width,k=this.height,l=this._getFrameWidth(),a=r-l;0<a&&(f=a/2,f="rect(0px,"+(f+l)+"px,"+k+"px,"+f+"px)",k=this.extent.getWidth(),r=k*(l/r),this._clip=[(k-r)/2,r])}ca(this.__container,"clip",f)},_getAvailExtent:function(){var f=this.extent,r=this._clip;if(r){if(!f._clip){var k=new V(f);k.width=r[1];k.x+=r[0];f._clip=k.getExtent()}return f._clip}return f},_fixedPan:function(f,r){return this._extentUtil(null,{dx:f,dy:r})},panUp:function(){return this._fixedPan(0,
-0.75*this.height)},panUpperRight:function(){return this._fixedPan(0.75*this.width,-0.75*this.height)},panRight:function(){return this._fixedPan(0.75*this.width,0)},panLowerRight:function(){return this._fixedPan(0.75*this.width,0.75*this.height)},panDown:function(){return this._fixedPan(0,0.75*this.height)},panLowerLeft:function(){return this._fixedPan(-0.75*this.width,0.75*this.height)},panLeft:function(){return this._fixedPan(-0.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-0.75*
this.width,-0.75*this.height)},enableSnapping:function(f){f=f||{};if("esri.SnappingManager"===f.declaredClass)this.snappingManager=f;else{var r=la++,k=this;this._rids&&this._rids.push(r);e(["./SnappingManager"],function(l){var a=k._rids?h.indexOf(k._rids,r):-1;-1!==a&&(k._rids.splice(a,1),k.snappingManager=new l(s.mixin({map:k},f)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){function f(){r._labels.removeAllFeatureLayers();
h.forEach(r.graphicsLayerIds,function(f){f=r.getLayer(f);"function"===typeof f.applyEdits&&r._labels.addFeatureLayer(f)})}var r=this;!this._labels&&(S&&this.loaded)&&(this._labels=new S({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),f(),this.on("layers-reordered",f))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new B,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var f=
this.layerIds,r=this._layerDivs,k=!1,l,a,B=f.length-1;0<=B;B--)if(l=f[B],a=this.getLayer(l),l=r[l],a&&l&&!a._isReference){w.place(this._mapImageLyr._div,l,"after");k=!0;break}k||w.place(this._mapImageLyr._div,this._layersDiv,"first")}});C("extend-esri")&&(y._CoreMap=n);return n})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(e,t,b){var n=window,u={addOnWindowUnload:function(q,s){e.windowUnloaded||b(n,"unload",e.windowUnloaded=function(){});b(n,"unload",t.hitch(q,s))},
addOnUnload:function(e,s){b(n,"beforeunload",t.hitch(e,s))}};e.addOnWindowUnload=u.addOnWindowUnload;e.addOnUnload=u.addOnUnload;return u})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),function(e,t,b,n,u,q,s,h,c){var a={animateRange:function(a){var c=a.range;return new t.Animation(b.mixin({curve:new t._Line(c.start,c.end)},a))},resize:function(a){var c=a.node=n.byId(a.node),m=a.start,
h=a.end;m||(m=u.getMarginBox(c),c=u.getPadBorderExtents(c),m=a.start={left:m.l+c.l,top:m.t+c.t,width:m.w-c.w,height:m.h-c.h});h||(h=a.anchor?a.anchor:{x:m.left,y:m.top},c=a.size,h=a.end={left:m.left-(c.width-m.width)*(h.x-m.left)/m.width,top:m.top-(c.height-m.height)*(h.y-m.top)/m.height,width:c.width,height:c.height});return t.animateProperty(b.mixin({properties:{left:{start:m.left,end:h.left},top:{start:m.top,end:h.top},width:{start:m.width,end:h.width},height:{start:m.height,end:h.height}}},a))},
slideTo:function(a){var c=a.node=n.byId(a.node),m=q.getComputedStyle,h=null,s=null,x=function(){return function(){var a="absolute"==c.style.position?"absolute":"relative";h="absolute"==a?c.offsetTop:parseInt(m(c).top)||0;s="absolute"==a?c.offsetLeft:parseInt(m(c).left)||0;"absolute"!=a&&"relative"!=a&&(a=u.position(c,!0),h=a.y,s=a.x,c.style.position="absolute",c.style.top=h+"px",c.style.left=s+"px")}}();x();a=t.animateProperty(b.mixin({properties:{top:{start:h,end:a.top||0},left:{start:s,end:a.left||
0}}},a));e.connect(a,"beforeBegin",a,x);return a},flash:function(a){a=b.mixin({end:"#f00",duration:500,count:1},a);a.duration/=2*a.count;var c=n.byId(a.node),m=a.start;m||(m=q.getComputedStyle(c).backgroundColor);var h=a.end,e=[],x=a.count,c={node:c,duration:a.duration};for(a=0;a<x;a++)e.push(t.animateProperty(b.mixin({properties:{backgroundColor:{start:m,end:h}}},c))),e.push(t.animateProperty(b.mixin({properties:{backgroundColor:{start:h,end:m}}},c)));return s.chain(e)}};h("extend-esri")&&b.mixin(b.getObject("fx",
!0,c),a);return a})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(e,t,b,n,u,q,s,h,c){var a=b.mixin,d={},g=d._Line=function(a,b){this.start=a;this.end=b};g.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var m=d.Animation=function(c){a(this,c);b.isArray(this.curve)&&(this.curve=new g(this.curve[0],this.curve[1]))};m.prototype=new n;b.extend(m,{duration:350,repeat:0,rate:20,_percent:0,
_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(t.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,c){this._delayTimer&&this._clearTimer();if(c)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);
var d=a||this.delay,g=b.hitch(this,"_play",c);if(0<d)return this._delayTimer=setTimeout(g,d),this;g();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&
this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},
status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,
this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var w=0,A=null,x={run:function(){}};b.extend(m,{_startTimer:function(){this._timer||(this._timer=q.after(x,"run",b.hitch(this,"_cycle"),!0),w++);A||(A=setInterval(b.hitch(x,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,w--);0>=w&&(clearInterval(A),A=null,
w=0)}});var C=s("ie")?function(a){var b=a.style;!b.width.length&&"auto"==c.get(a,"width")&&(b.width="auto")}:function(){};d._fade=function(g){g.node=h.byId(g.node);var m=a({properties:{}},g);g=m.properties.opacity={};g.start=!("start"in m)?function(){return+c.get(m.node,"opacity")||0}:m.start;g.end=m.end;g=d.animateProperty(m);q.after(g,"beforeBegin",b.partial(C,m.node),!0);return g};d.fadeIn=function(b){return d._fade(a({end:1},b))};d.fadeOut=function(b){return d._fade(a({end:0},b))};d._defaultEasing=
function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var E=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof u&&(c.tempColor=new u)}};E.prototype.getValue=function(a){var c={},d;for(d in this._properties){var g=this._properties[d],m=g.start;m instanceof u?c[d]=u.blendColors(m,g.end,a,g.tempColor).toCss():b.isArray(m)||(c[d]=(g.end-m)*a+m+("opacity"!=d?g.units||"px":0))}return c};d.animateProperty=function(d){var g=d.node=h.byId(d.node);d.easing||(d.easing=e._defaultEasing);
d=new m(d);q.after(d,"beforeBegin",b.hitch(d,function(){var d={},m;for(m in this.properties){if("width"==m||"height"==m)this.node.display="block";var h=this.properties[m];b.isFunction(h)&&(h=h(g));h=d[m]=a({},b.isObject(h)?h:{end:h});b.isFunction(h.start)&&(h.start=h.start(g));b.isFunction(h.end)&&(h.end=h.end(g));var e=0<=m.toLowerCase().indexOf("color"),x=function(a,b){var d={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==d)return d;d=c.get(a,b);return"opacity"==b?+d:e?d:parseFloat(d)};
"end"in h?"start"in h||(h.start=x(g,m)):h.end=x(g,m);e?(h.start=new u(h.start),h.end=new u(h.end)):h.start="opacity"==m?+h.start:parseFloat(h.start)}this.curve=new E(d)}),!0);q.after(d,"onAnimate",b.hitch(c,"set",d.node),!0);return d};d.anim=function(a,b,c,g,h,e){return d.animateProperty({node:a,duration:c||m.prototype.duration,properties:b,easing:g,onEnd:h}).play(e||0)};a(e,d);e._Animation=m;return d})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d){b.isAsync||a(0,function(){d(["./fx/Toggler"])});b=b.fx={};a={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var g=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;n.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};g.prototype=new t;e.extend(g,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();
this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=u.after(this._current,"onAnimate",e.hitch(this,"_onAnimate"),!0),this._onEndCtx=u.after(this._current,"onEnd",e.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var c=u.after(this._current,
"beforeBegin",e.hitch(this,function(){this._fire("beforeBegin")}),!0),d=u.after(this._current,"onBegin",e.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),g=u.after(this._current,"onPlay",e.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();d.remove();g.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=u.after(this._current,"onAnimate",e.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=u.after(this._current,
"onEnd",e.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=u.after(this._current,"onPause",e.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;n.some(this._animations,function(a,b){if(c<=a.duration)return this._current=a,this._index=b,!0;c-=a.duration;return!1},this);this._current&&this._current.gotoPercent(c/
this._current.duration);b&&this.play();return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=u.after(this._current,"onStop",e.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&
this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});e.extend(g,a);b.chain=function(a){return new g(a)};var m=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;n.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(u.after(a,"onEnd",e.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new q.Animation({curve:[0,1],duration:this.duration});var b=this;n.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),
function(a){b._connects.push(u.after(b._pseudoAnimation,a,function(){b._fire(a,arguments)},!0))})};e.extend(m,{_doAction:function(a,b){n.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",
arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;n.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();n.forEach(this._connects,function(a){a.remove()})}});e.extend(m,a);b.combine=function(a){return new m(a)};
b.wipeIn=function(a){var b=a.node=s.byId(a.node),c=b.style,d;a=q.animateProperty(e.mixin({properties:{height:{start:function(){d=c.overflow;c.overflow="hidden";if("hidden"==c.visibility||"none"==c.display)return c.height="1px",c.display="",c.visibility="",1;var a=h.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a));var g=function(){c.height="auto";c.overflow=d};u.after(a,"onStop",g,!0);u.after(a,"onEnd",g,!0);return a};b.wipeOut=function(a){var b=(a.node=s.byId(a.node)).style,
c;a=q.animateProperty(e.mixin({properties:{height:{end:1}}},a));u.after(a,"beforeBegin",function(){c=b.overflow;b.overflow="hidden";b.display=""},!0);var d=function(){b.overflow=c;b.height="auto";b.display="none"};u.after(a,"onStop",d,!0);u.after(a,"onEnd",d,!0);return a};b.slideTo=function(a){var b=null,d=null,g=function(a){return function(){var g=h.getComputedStyle(a),m=g.position;b="absolute"==m?a.offsetTop:parseInt(g.top)||0;d="absolute"==m?a.offsetLeft:parseInt(g.left)||0;"absolute"!=m&&"relative"!=
m&&(g=c.position(a,!0),b=g.y,d=g.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=d+"px")}}(a.node=s.byId(a.node));g();a=q.animateProperty(e.mixin({properties:{top:a.top||0,left:a.left||0}},a));u.after(a,"beforeBegin",g,!0);return a};return b})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(e,t,b,n,u){var q={_addFrameInfo:function(b,h){var c,a,d=2*h.origin[1],g=h.origin[0],m=b.origin.x,w=b.width,q;e.forEach(b.lods,
function(b){c=Math.round(d/b.resolution);a=Math.ceil(c/w);q=Math.floor((g-m)/(w*b.resolution));b._frameInfo||(b._frameInfo=[a,q,q+a-1,c])})},getContainingTileCoords:function(b,h,c){var a=b.origin;c=c.resolution;return{row:Math.floor((a.y-h.y)/(b.height*c)),col:Math.floor((h.x-a.x)/(b.width*c))}},getCandidateTileInfo:function(b,h,c){var a;a=b.width;for(var d=b.height,g=c.xmax-c.xmin,m=c.ymax-c.ymin,e=b.__tileInfo===h,q=e?b.getMinZoom():-1,e=e?b.getMaxZoom():-1,x=-1,C=h.lods,t=Math.abs,F,y,I,e=-1<e?
e:C.length-1,q=-1<q?q:0;q<=e;q++)if(y=C[q])if(I=g>m?t(m-d*y.resolution):t(g-a*y.resolution),0>x||I<=x)F=y,x=I;else break;a=F;F=a.resolution;d=(c.xmin+c.xmax)/2;g=(c.ymin+c.ymax)/2;m=b.width/2*F;F*=b.height/2;d=new u(d-m,g-F,d+m,g+F,c.spatialReference);c=new n(d.xmin,d.ymax,c.spatialReference);e=a.resolution;m=h.width;g=h.height;h=h.origin;b=b.__visibleDelta;F=Math.floor;C=m*e;t=g*e;e=F((h.y-c.y)/t);x=F((c.x-h.x)/C);q=h.y-e*t;h=F(Math.abs((c.x-(h.x+x*C))*m/C))+b.x;b=F(Math.abs((c.y-q)*g/t))+b.y;return{tile:{point:c,
coords:{row:e,col:x},offsets:{x:h,y:b}},lod:a,extent:d}},getTileExtent:function(b,h,c,a){var d=b.origin;h=b.lods[h].resolution;var g=b.width,m=b.height;return new u(a*h*g+d.x,d.y-(c+1)*h*m,(a+1)*h*g+d.x,d.y-c*h*m,b.spatialReference)}};t("extend-esri")&&(b.TileUtils=q);return q})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(e,t,b,n,u,q,s,h,c,a){function d(a){return new c(parseFloat(a.x),
parseFloat(a.y)-parseFloat(a.height),parseFloat(a.x)+parseFloat(a.width),parseFloat(a.y),a.spatialReference)}var g=e(s,{declaredClass:"esri.geometry.Rect",constructor:function(b,c,d,g,h){t.mixin(this,n.defaultRect);t.isObject(b)&&"extent"===b.type&&(c=b.ymax,d=b.getWidth(),g=b.getHeight(),h=b.spatialReference,b=b.xmin);t.isObject(b)?(t.mixin(this,b),this.spatialReference&&(this.spatialReference=a.createSpatialReference(this.spatialReference))):(this.x=b,this.y=c,this.width=d,this.height=g,this.spatialReference=
h);this.verifySR()},getCenter:function(){return new h(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(a,b){return new g(this.x+a,this.y+b,this.width,this.height,this.spatialReference)},intersects:function(a){return a.x+a.width<=this.x||a.y+a.height<=this.y||a.y>=this.y+this.height||a.x>=this.x+this.width?!1:!0},getExtent:function(){return d(this)},update:function(a,b,c,d,g){this.x=a;this.y=b;this.width=c;this.height=d;this.spatialReference=g;this.clearCache();return this}});
b("extend-esri")&&(t.setObject("geometry.Rect",g,u),u.geometry._rectToExtent=d,u.geometry._extentToRect=function(a){return new g(a)});return g})},"esri/geometry/scaleUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../config ../lang ../WKIDUnitConversion".split(" "),function(e,t,b,n,u,q){function s(b,g,m){return b&&g?b.getWidth()/g*(m||a)*c*d.screenDPI:0}function h(b,m,h,e,q){return b.expand(e*m/(((q?h:g.values[g[h]])||a)*c*d.screenDPI)/b.getWidth())}var c=39.37,a=6370997*Math.PI/180,
d=n.defaults,g=q,m={getUnitValueForSR:function(b){return this.getUnitValue(b)||a},getUnitValue:function(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=g.values[g[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(c))&&a[1]&&(d=parseFloat(a[1].split(",")[1]));return d},getScale:function(a,b,c){var d,g,h;1<arguments.length&&u.isDefined(b)&&!b.declaredClass?(d=a,g=b,b=null,h=m.getUnitValue(c)):(d=b||a.extent,g=a.width,h=m.getUnitValue(d&&
d.spatialReference));return s(d,g,h)},getExtentForScale:function(a,b,c){return h(c||a.extent,a.width,m.getUnitValue(a.spatialReference),b,!0)}};t("extend-esri")&&(e.mixin(e.getObject("geometry",!0,b),m),b.geometry._getScale=s,b.geometry._getExtentForScale=h);return m})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(e,t){var b,n={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,
0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,
3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,
3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,
3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,
5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6210:0,6211:0,6316:0,6391:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,
22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,
30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,
102705:2,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,
103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,
103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,
103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(b=2E3;2046>b;b++)n[b]=0;for(b=2056;2066>b;b++)n[b]=0;for(b=2067;2136>b;b++)n[b]=0;for(b=2137;2155>
b;b++)n[b]=0;for(b=2161;2171>b;b++)n[b]=0;for(b=2172;2194>b;b++)n[b]=0;for(b=2195;2199>b;b++)n[b]=0;for(b=2200;2204>b;b++)n[b]=0;for(b=2205;2218>b;b++)n[b]=0;for(b=2222;2225>b;b++)n[b]=1;for(b=2225;2251>b;b++)n[b]=2;for(b=2251;2254>b;b++)n[b]=1;for(b=2257;2265>b;b++)n[b]=2;for(b=2274;2280>b;b++)n[b]=2;for(b=2280;2283>b;b++)n[b]=1;for(b=2283;2290>b;b++)n[b]=2;for(b=2290;2293>b;b++)n[b]=0;for(b=2308;2314>b;b++)n[b]=0;for(b=2315;2463>b;b++)n[b]=0;for(b=2523;2867>b;b++)n[b]=0;for(b=2867;2870>b;b++)n[b]=
1;for(b=2870;2889>b;b++)n[b]=2;for(b=2891;2896>b;b++)n[b]=2;for(b=2896;2899>b;b++)n[b]=1;for(b=2902;2909>b;b++)n[b]=2;for(b=2915;2921>b;b++)n[b]=2;for(b=2921;2924>b;b++)n[b]=1;for(b=2924;2931>b;b++)n[b]=2;for(b=2931;2963>b;b++)n[b]=0;for(b=2964;2969>b;b++)n[b]=2;for(b=2969;2974>b;b++)n[b]=0;for(b=2975;2992>b;b++)n[b]=0;for(b=2995;3052>b;b++)n[b]=0;for(b=3054;3080>b;b++)n[b]=0;for(b=3081;3089>b;b++)n[b]=0;for(b=3092;3102>b;b++)n[b]=0;for(b=3106;3139>b;b++)n[b]=0;for(b=3146;3152>b;b++)n[b]=0;for(b=
3153;3167>b;b++)n[b]=0;for(b=3168;3173>b;b++)n[b]=0;for(b=3174;3204>b;b++)n[b]=0;for(b=3294;3359>b;b++)n[b]=0;for(b=3367;3404>b;b++)n[b]=0;for(b=3408;3417>b;b++)n[b]=0;for(b=3417;3439>b;b++)n[b]=2;for(b=3441;3447>b;b++)n[b]=2;for(b=3447;3451>b;b++)n[b]=0;for(b=3451;3460>b;b++)n[b]=2;for(b=3460;3479>b;b++)n[b]=0;for(b=3554;3560>b;b++)n[b]=0;for(b=3560;3571>b;b++)n[b]=2;for(b=3571;3582>b;b++)n[b]=0;for(b=3594;3598>b;b++)n[b]=0;for(b=3601;3605>b;b++)n[b]=0;for(b=3637;3640>b;b++)n[b]=0;for(b=3665;3668>
b;b++)n[b]=0;for(b=3693;3696>b;b++)n[b]=0;for(b=3701;3728>b;b++)n[b]=0;for(b=3728;3740>b;b++)n[b]=2;for(b=3740;3752>b;b++)n[b]=0;for(b=3753;3761>b;b++)n[b]=2;for(b=3761;3774>b;b++)n[b]=0;for(b=3775;3778>b;b++)n[b]=0;for(b=3779;3782>b;b++)n[b]=0;for(b=3783;3786>b;b++)n[b]=0;for(b=3788;3792>b;b++)n[b]=0;for(b=3797;3803>b;b++)n[b]=0;for(b=3814;3817>b;b++)n[b]=0;for(b=3825;3830>b;b++)n[b]=0;for(b=3832;3842>b;b++)n[b]=0;for(b=3844;3853>b;b++)n[b]=0;for(b=3873;3886>b;b++)n[b]=0;for(b=3890;3894>b;b++)n[b]=
0;for(b=3907;3913>b;b++)n[b]=0;for(b=3942;3951>b;b++)n[b]=0;for(b=3968;3971>b;b++)n[b]=0;for(b=3973;3977>b;b++)n[b]=0;for(b=3986;3990>b;b++)n[b]=0;for(b=3994;3998>b;b++)n[b]=0;for(b=4048;4052>b;b++)n[b]=0;for(b=4056;4064>b;b++)n[b]=0;for(b=4093;4097>b;b++)n[b]=0;for(b=4399;4414>b;b++)n[b]=2;for(b=4418;4434>b;b++)n[b]=2;for(b=4455;4458>b;b++)n[b]=2;for(b=4484;4490>b;b++)n[b]=0;for(b=4491;4555>b;b++)n[b]=0;for(b=4568;4590>b;b++)n[b]=0;for(b=4652;4657>b;b++)n[b]=0;for(b=4766;4801>b;b++)n[b]=0;for(b=
5014;5017>b;b++)n[b]=0;for(b=5069;5073>b;b++)n[b]=0;for(b=5105;5131>b;b++)n[b]=0;for(b=5173;5189>b;b++)n[b]=0;for(b=5253;5260>b;b++)n[b]=0;for(b=5269;5276>b;b++)n[b]=0;for(b=5292;5312>b;b++)n[b]=0;for(b=5329;5332>b;b++)n[b]=0;for(b=5343;5350>b;b++)n[b]=0;for(b=5355;5358>b;b++)n[b]=0;for(b=5387;5390>b;b++)n[b]=0;for(b=5459;5464>b;b++)n[b]=0;for(b=5479;5483>b;b++)n[b]=0;for(b=5518;5521>b;b++)n[b]=0;for(b=5530;5540>b;b++)n[b]=0;for(b=5550;5553>b;b++)n[b]=0;for(b=5562;5584>b;b++)n[b]=0;for(b=5623;5626>
b;b++)n[b]=2;for(b=5631;5640>b;b++)n[b]=0;for(b=5649;5654>b;b++)n[b]=0;for(b=5663;5681>b;b++)n[b]=0;for(b=5682;5686>b;b++)n[b]=0;for(b=5875;5878>b;b++)n[b]=0;for(b=5921;5941>b;b++)n[b]=0;for(b=6050;6126>b;b++)n[b]=0;for(b=6244;6276>b;b++)n[b]=0;for(b=6328;6349>b;b++)n[b]=0;for(b=6350;6355>b;b++)n[b]=0;for(b=20002;20033>b;b++)n[b]=0;for(b=20062;20093>b;b++)n[b]=0;for(b=20135;20139>b;b++)n[b]=0;for(b=20248;20259>b;b++)n[b]=0;for(b=20348;20359>b;b++)n[b]=0;for(b=20436;20441>b;b++)n[b]=0;for(b=20822;20825>
b;b++)n[b]=0;for(b=20934;20937>b;b++)n[b]=0;for(b=21035;21038>b;b++)n[b]=0;for(b=21095;21098>b;b++)n[b]=0;for(b=21148;21151>b;b++)n[b]=0;for(b=21413;21424>b;b++)n[b]=0;for(b=21473;21484>b;b++)n[b]=0;for(b=21780;21783>b;b++)n[b]=0;for(b=21891;21895>b;b++)n[b]=0;for(b=21896;21900>b;b++)n[b]=0;for(b=22171;22178>b;b++)n[b]=0;for(b=22181;22188>b;b++)n[b]=0;for(b=22191;22198>b;b++)n[b]=0;for(b=22234;22237>b;b++)n[b]=0;for(b=22521;22526>b;b++)n[b]=0;for(b=22991;22995>b;b++)n[b]=0;for(b=23028;23039>b;b++)n[b]=
0;for(b=23830;23854>b;b++)n[b]=0;for(b=23866;23873>b;b++)n[b]=0;for(b=23877;23885>b;b++)n[b]=0;for(b=23886;23895>b;b++)n[b]=0;for(b=23946;23949>b;b++)n[b]=0;for(b=24311;24314>b;b++)n[b]=0;for(b=24342;24348>b;b++)n[b]=0;for(b=24370;24375>b;b++)n[b]=10;for(b=24375;24382>b;b++)n[b]=0;for(b=24718;24722>b;b++)n[b]=0;for(b=24817;24822>b;b++)n[b]=0;for(b=24877;24883>b;b++)n[b]=0;for(b=24891;24894>b;b++)n[b]=0;for(b=25391;25396>b;b++)n[b]=0;for(b=25828;25839>b;b++)n[b]=0;for(b=26191;26196>b;b++)n[b]=0;for(b=
26391;26394>b;b++)n[b]=0;for(b=26701;26723>b;b++)n[b]=0;for(b=26729;26800>b;b++)n[b]=2;for(b=26801;26804>b;b++)n[b]=2;for(b=26811;26814>b;b++)n[b]=2;for(b=26847;26871>b;b++)n[b]=2;for(b=26891;26900>b;b++)n[b]=0;for(b=26901;26924>b;b++)n[b]=0;for(b=26929;26947>b;b++)n[b]=0;for(b=26948;26999>b;b++)n[b]=0;for(b=27037;27041>b;b++)n[b]=0;for(b=27205;27233>b;b++)n[b]=0;for(b=27258;27261>b;b++)n[b]=0;for(b=27391;27399>b;b++)n[b]=0;for(b=27561;27565>b;b++)n[b]=0;for(b=27571;27575>b;b++)n[b]=0;for(b=27581;27585>
b;b++)n[b]=0;for(b=27591;27595>b;b++)n[b]=0;for(b=28191;28194>b;b++)n[b]=0;for(b=28348;28359>b;b++)n[b]=0;for(b=28402;28433>b;b++)n[b]=0;for(b=28462;28493>b;b++)n[b]=0;for(b=29118;29123>b;b++)n[b]=0;for(b=29168;29173>b;b++)n[b]=0;for(b=29177;29186>b;b++)n[b]=0;for(b=29187;29196>b;b++)n[b]=0;for(b=29900;29904>b;b++)n[b]=0;for(b=30161;30180>b;b++)n[b]=0;for(b=30491;30495>b;b++)n[b]=0;for(b=30729;30733>b;b++)n[b]=0;for(b=31251;31260>b;b++)n[b]=0;for(b=31265;31269>b;b++)n[b]=0;for(b=31275;31280>b;b++)n[b]=
0;for(b=31281;31298>b;b++)n[b]=0;for(b=31461;31470>b;b++)n[b]=0;for(b=31491;31496>b;b++)n[b]=0;for(b=31917;31923>b;b++)n[b]=0;for(b=31965;32001>b;b++)n[b]=0;for(b=32001;32004>b;b++)n[b]=2;for(b=32005;32032>b;b++)n[b]=2;for(b=32033;32061>b;b++)n[b]=2;for(b=32064;32068>b;b++)n[b]=2;for(b=32074;32078>b;b++)n[b]=2;for(b=32081;32087>b;b++)n[b]=0;for(b=32107;32131>b;b++)n[b]=0;for(b=32133;32159>b;b++)n[b]=0;for(b=32164;32168>b;b++)n[b]=2;for(b=32180;32200>b;b++)n[b]=0;for(b=32201;32261>b;b++)n[b]=0;for(b=
32301;32361>b;b++)n[b]=0;for(b=32601;32663>b;b++)n[b]=0;for(b=32664;32668>b;b++)n[b]=2;for(b=32701;32762>b;b++)n[b]=0;for(b=53001;53005>b;b++)n[b]=0;for(b=53008;53020>b;b++)n[b]=0;for(b=53021;53033>b;b++)n[b]=0;for(b=53042;53047>b;b++)n[b]=0;for(b=54001;54005>b;b++)n[b]=0;for(b=54008;54020>b;b++)n[b]=0;for(b=54021;54033>b;b++)n[b]=0;for(b=54042;54047>b;b++)n[b]=0;for(b=54048;54054>b;b++)n[b]=0;for(b=102001;102041>b;b++)n[b]=0;for(b=102042;102064>b;b++)n[b]=0;for(b=102065;102068>b;b++)n[b]=0;for(b=
102070;102118>b;b++)n[b]=0;for(b=102122;102217>b;b++)n[b]=0;for(b=102221;102378>b;b++)n[b]=0;for(b=102382;102389>b;b++)n[b]=0;for(b=102389;102399>b;b++)n[b]=2;for(b=102401;102445>b;b++)n[b]=0;for(b=102445;102448>b;b++)n[b]=2;for(b=102450;102453>b;b++)n[b]=0;for(b=102461;102469>b;b++)n[b]=2;for(b=102469;102497>b;b++)n[b]=0;for(b=102500;102520>b;b++)n[b]=1;for(b=102520;102525>b;b++)n[b]=0;for(b=102525;102530>b;b++)n[b]=2;for(b=102530;102550>b;b++)n[b]=0;for(b=102570;102589>b;b++)n[b]=0;for(b=102590;102599>
b;b++)n[b]=0;for(b=102601;102604>b;b++)n[b]=0;for(b=102605;102629>b;b++)n[b]=0;for(b=102629;102647>b;b++)n[b]=2;for(b=102648;102701>b;b++)n[b]=2;for(b=102701;102704>b;b++)n[b]=0;for(b=102707;102731>b;b++)n[b]=2;for(b=102733;102759>b;b++)n[b]=2;for(b=102767;102799>b;b++)n[b]=0;for(b=102962;102970>b;b++)n[b]=0;for(b=102971;102974>b;b++)n[b]=0;for(b=102975;102990>b;b++)n[b]=0;for(b=102990;102993>b;b++)n[b]=1;for(b=102997;103003>b;b++)n[b]=0;for(b=103003;103009>b;b++)n[b]=2;for(b=103009;103012>b;b++)n[b]=
0;for(b=103012;103015>b;b++)n[b]=2;for(b=103019;103022>b;b++)n[b]=0;for(b=103022;103025>b;b++)n[b]=2;for(b=103029;103032>b;b++)n[b]=0;for(b=103032;103035>b;b++)n[b]=2;for(b=103065;103069>b;b++)n[b]=0;for(b=103074;103077>b;b++)n[b]=0;for(b=103077;103080>b;b++)n[b]=1;for(b=103080;103083>b;b++)n[b]=0;for(b=103083;103086>b;b++)n[b]=2;for(b=103090;103094>b;b++)n[b]=0;for(b=103097;103100>b;b++)n[b]=0;for(b=103100;103103>b;b++)n[b]=2;for(b=103107;103110>b;b++)n[b]=0;for(b=103110;103113>b;b++)n[b]=2;for(b=
103113;103117>b;b++)n[b]=0;for(b=103117;103121>b;b++)n[b]=2;for(b=103153;103158>b;b++)n[b]=0;for(b=103158;103163>b;b++)n[b]=2;for(b=103163;103166>b;b++)n[b]=0;for(b=103166;103169>b;b++)n[b]=1;for(b=103169;103172>b;b++)n[b]=2;for(b=103186;103189>b;b++)n[b]=0;for(b=103189;103192>b;b++)n[b]=2;for(b=103192;103196>b;b++)n[b]=0;for(b=103196;103200>b;b++)n[b]=2;for(b=103200;103225>b;b++)n[b]=0;for(b=103225;103228>b;b++)n[b]=1;for(b=103232;103238>b;b++)n[b]=0;for(b=103238;103244>b;b++)n[b]=2;for(b=103244;103247>
b;b++)n[b]=0;for(b=103247;103250>b;b++)n[b]=2;for(b=103254;103257>b;b++)n[b]=0;for(b=103257;103260>b;b++)n[b]=2;for(b=103264;103267>b;b++)n[b]=0;for(b=103267;103270>b;b++)n[b]=2;for(b=103300;103376>b;b++)n[b]=0;for(b=103381;103384>b;b++)n[b]=0;for(b=103384;103387>b;b++)n[b]=1;for(b=103387;103390>b;b++)n[b]=0;for(b=103390;103393>b;b++)n[b]=2;for(b=103397;103400>b;b++)n[b]=0;for(b=103400;103472>b;b++)n[b]=2;for(b=103476;103479>b;b++)n[b]=0;for(b=103479;103482>b;b++)n[b]=2;for(b=103486;103489>b;b++)n[b]=
0;for(b=103489;103492>b;b++)n[b]=2;for(b=103492;103496>b;b++)n[b]=0;for(b=103496;103500>b;b++)n[b]=2;for(b=103528;103544>b;b++)n[b]=0;for(b=103544;103549>b;b++)n[b]=2;for(b=103549;103552>b;b++)n[b]=0;for(b=103552;103555>b;b++)n[b]=1;for(b=103555;103558>b;b++)n[b]=2;for(b=103558;103561>b;b++)n[b]=0;for(b=103571;103574>b;b++)n[b]=0;for(b=103574;103577>b;b++)n[b]=2;for(b=103577;103581>b;b++)n[b]=0;for(b=103581;103584>b;b++)n[b]=2;for(b=103600;103695>b;b++)n[b]=0;for(b=103700;103794>b;b++)n[b]=2;for(b=
103794;103872>b;b++)n[b]=0;for(b=103900;103972>b;b++)n[b]=2;e("extend-esri")&&(t.WKIDUnitConversion=n);return n})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(e,t,b,n,u,q,s,h,c){e=e(null,{declaredClass:"esri.layers.TileInfo",constructor:function(a){t.mixin(this,a);this.width=this.cols;this.height=this.rows;a=this.spatialReference;var d=this.origin;a&&(a=this.spatialReference=
new s(a.toJson?a.toJson():a));d&&(this.origin=new h(d.toJson?d.toJson():d),!d.spatialReference&&a&&this.origin.setSpatialReference(new s(a.toJson())));this.lods=b.map(this.lods,function(a){return new c(a)})},toJson:function(){return q.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&b.map(this.lods,function(a){return a.toJson()})})}});
n("extend-esri")&&t.setObject("layers.TileInfo",e,u);return e})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,t,b,n,u){e=e(null,{declaredClass:"esri.layers.LOD",constructor:function(b){t.mixin(this,b)},toJson:function(){return u.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});b("extend-esri")&&t.setObject("layers.LOD",e,n);return e})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A){t=t([d,g],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(a,c){c&&(c.roundrobin&&(e.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),c.tileServers=c.roundrobin),this._setTileServers(c.tileServers),
this._loadCallback=c.loadCallback);this._params=b.mixin({},this._url.query);if(n.some(["servicesdev.arcgisonline.com/arcgis/rest/services","servicesdevext.arcgisonline.com/arcgis/rest/services","services.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"],function(b){return-1<a.toLowerCase().indexOf(b.toLowerCase())})){if(this.resampling=!(c&&!1===c.resampling))this.tileMap=new A(this)}else this.resampling=c&&null!=c.resampling?c.resampling:void 0;this._initLayer=
b.hitch(this,this._initLayer);var d=c&&c.resourceInfo;d?this._initLayer(d):(this._load=b.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(a){if(a&&0<a.length){this.tileServers=a;var b,d=a.length;for(b=0;b<d;b++)a[b]=c.urlToObject(a[b]).path}},_initLayer:function(b,c){this.inherited(arguments);this.resourceInfo=u.toJson(b);this.tileInfo=new m(b.tileInfo);this.resampling=null==this.resampling?!!b.resampling:
this.resampling;!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new a(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;b.timeInfo&&(this.timeInfo=new w(b.timeInfo));var d=this._url.path,g=this._loadCallback,h="file:"===window.location.protocol?"http:":window.location.protocol,e=d.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i),e=e&&
e[2];if(!this.tileServers)if(b.tileServers)this._setTileServers(b.tileServers);else{var q=-1!==d.search(/^https?\:\/\/server\.arcgisonline\.com/i),n=-1!==d.search(/^https?\:\/\/services\.arcgisonline\.com/i);if(q||n)this._setTileServers([d,d.replace(q?/server\.arcgisonline/i:/services\.arcgisonline/i,q?"services.arcgisonline":"server.arcgisonline")])}if(e){e=e.toLowerCase();for(d=0;d<this._agolAttrs.length;d++)if(q=this._agolAttrs[d],q.toLowerCase()===e){this.hasAttributionData=!0;this.attributionDataUrl=
this.attributionDataUrl||h+"//static.arcgis.com/attribution/"+q;break}for(d=0;d<this._referenceLayers.length;d++)if(q=this._referenceLayers[d],q.toLowerCase()===e){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);g&&(delete this._loadCallback,g(this))},getTileUrl:function(a,b,d){var g=this.tileServers,m=this._getToken(),h=this._url.query;a=(g?g[b%g.length]:this._url.path)+"/tile/"+a+"/"+b+"/"+d;this.resampling&&!this.tileMap&&(a+="?blankTile\x3dfalse");h&&(a=this.resampling&&!this.tileMap?
a+("\x26"+s.objectToQuery(h)):a+("?"+s.objectToQuery(h)));if(m&&(!h||!h.token))a+=(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+m;a=this.addTimestampToURL(a);return c.addProxy(a)}});q("extend-esri")&&b.setObject("layers.ArcGISTiledMapServiceLayer",t,h);return t})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I){e=e(I,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(a,c){t.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=c?c.displayLevels:null)?this._displayLevels[0]:0;this.resampling=c?c.resampling:void 0;this._resamplingTolerance=c?c.resamplingTolerance:null;this.exclusionAreas=c?c.exclusionAreas:null;var d=b.hitch;this._addImage=d(this,this._addImage);this._tileLoadHandler=d(this,this._tileLoadHandler);
this._tileErrorHandler=d(this,this._tileErrorHandler);this._popTile=d(this,this._popTile);this._cleanUpRemovedImages=d(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=d(this,this._fireOnUpdateEvent);this._transitionEnd=d(this,this._transitionEnd);this._tileMapCallback=d(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var a=this.tileInfo,b=a.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=a.width;this._tileH=
a.height;var c=this.scales=[],d=this._displayLevels,g="esri.layers.WMTSLayer"===this.declaredClass&&96!=a.dpi,m=-Infinity,h=Infinity,e=this.fullExtent,x=new E(e.xmin,e.ymax),e=new E(e.xmax,e.ymin),q=C.getContainingTileCoords,w,s,v,y=b.length;for(v=0;v<y;v++)if(s=b[v],g&&(s.scale=96*s.scale/a.dpi),w=q(a,x,s),s.startTileRow=0>w.row?0:w.row,s.startTileCol=0>w.col?0:w.col,w=q(a,e,s),s.endTileRow=w.row,s.endTileCol=w.col,!d||-1!==n.indexOf(d,s.level))c[v]=s.scale,m=s.scale>m?s.scale:m,h=s.scale<h?s.scale:
h;g&&(a.dpi=96);-Infinity!==m&&!this._hasMin&&this.setMinScale(m);Infinity!==h&&!this._hasMax&&this.setMaxScale(h);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=A("ie")&&7>A("ie")&&(this.isPNG32||"Mixed"===a.format)},isVisibleAtScale:function(a){return a?I.prototype._isMapAtVisibleScale.call(this,a,!0):!1},_isMapAtVisibleScale:function(a){var b=this.inherited(arguments,[a,!0]);if(b){var c;c=this._map;var b=this.scales,d=c.getScale(),g=!1,m=c.width>c.height?c.width:c.height;for(c=0;c<
b.length;c++)if(Math.abs(b[c]-d)/b[c]<1/m){g=!0;break}b=g}return b},_setMap:function(a,b,d,g){this.inherited(arguments);this._map=a;var h=this._div=q.create("div",null,b),e=a.__visibleDelta,x=t.connect,s=m._css.names,n={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible"},y=w.defaults.map.zoomDuration;"css-transforms"===a.navigationMode?(n[s.transform]=m._css.translate(-e.x,-e.y),c.set(h,n),delete n[s.transform],n[s.transition]=s.transformName+" "+y+"ms ease",c.set(this._active=
q.create("div",null,h),n),this._active._remove=0,this._passives=[]):(n.left=-e.x+"px",n.top=-e.y+"px",c.set(h,n));this._onResizeHandler_connect=x(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=x(this,"onOpacityChange",this,"_opacityChangeHandler");e=this.tileInfo;x=e.spatialReference;s=x._getInfo();(this._wrap=a.wrapAround180&&x._isWrappable()&&Math.abs(s.origin[0]-e.origin.x)<=s.dx)&&C._addFrameInfo(e,s);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();
if(this.suspended&&!a.loaded)var A=t.connect(a,"onLoad",this,function(){t.disconnect(A);A=null;this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension()});return h},_unsetMap:function(a,b){this.suspended||this._suspendImpl();q.destroy(this._div);this._map=this._div=null;var c=t.disconnect;c(this._onResizeHandler_connect);c(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){x.hide(this._div);
clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var a=this._tiles,b=this._tileIds,c=this._loadingList,d,g,m=t.disconnect,h=q.destroy;c&&0<c.count&&(c.forEach(function(b){if(d=a[b])m(d._onload_connect),m(d._onerror_connect),m(d._onabort_connect),d._onload_connect=d._onerror_connect=d._onabort_connect=null}),c.clear(),this._fireUpdateEnd());this._removeList.clear();for(c=b.length-1;0<=c;c--)(d=(g=b[c])&&a[g])&&h(d);if("css-transforms"===this._map.navigationMode){b=this._active;
g=this._passives;var e;this._noDom=0;for(c=g.length-1;0<=c;c--)e=g[c],e._endHandle&&m(e._endHandle),e._matrix=e._multiply=e._endHandle=null,e._marked=e._remove=0,g.splice(c,1),h(e);b._matrix=b._multiply=null;b._marked=b._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new d;this._loadingList=new d;x.show(this._div);
this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(b.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var a=this._map,b=t.connect;if("css-transforms"===a.navigationMode){if(this._onScaleHandler_connect=b(a,"onScale",this,this._onScaleHandler),A("esri-mobile")){this._standby=[];var c=this,d=function(){c._noDom=1};this._onPanStartHandler_connect=b(a,"onPanStart",d);this._onZoomStartHandler_connect=
b(a,"onZoomStart",d)}}else this._onZoomHandler_connect=b(a,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=t.disconnect;a(this._onPanHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onPanStartHandler_connect);a(this._onZoomStartHandler_connect);this._onPanHandler_connect=
this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null},_onResizeHandler:function(a,b,d){a={width:b+"px",height:d+"px"};b=c.set;b(this._div,a);if("css-transforms"===this._map.navigationMode){this._active&&b(this._active,a);for(d=this._passives.length-1;0<=d;d--)b(this._passives[d],a)}},_onExtentChangeHandler:function(a,b,d,e){b=this._map;var x=this._standby,w;clearTimeout(this._wakeTimer);this._wakeTimer=
null;if(!b._isPanningOrZooming()){if("css-transforms"===b.navigationMode){if(d)for(e=this._passives.length-1;0<=e;e--)w=this._passives[e],c.set(w,m._css.names.transition,"none"),w._marked?(this._passives.splice(e,1),w.parentNode&&w.parentNode.removeChild(w),q.destroy(w)):0<w.childNodes.length&&(w._multiply=w._multiply?g.multiply(w._matrix,w._multiply):w._matrix);this._noDom=0;if(x&&x.length)for(e=x.length-1;0<=e;e--)w=x[e],c.set(w,"visibility","visible"),this._popTile(w),x.splice(e,1)}this._fireUpdateStart();
this._rrIndex=0;e=C.getCandidateTileInfo(b,this.tileInfo,a);a=b.__visibleDelta;if(!this._ct||e.lod.level!==this._ct.lod.level||d){w=e&&this._ct&&e.lod.level!==this._ct.lod.level;this._ct=e;var s=this._tiles,n=this._tileIds,y=this._tileBounds,A=this._removeList,t,u=n.length;this._cleanUpRemovedImages();for(e=0;e<u;e++)x=n[e],t=s[x],y[x]=n[e]=null,"css-transforms"===b.navigationMode&&(w&&t.parentNode&&b.fadeOnZoom)&&(t._fadeOut=w,t.parentNode._remove++),A.add(t);d&&(this._tileIds=[],this._tiles=[],
this._tileBounds=[])}e=a.x;d=a.y;"css-transforms"===b.navigationMode?(x={},x[m._css.names.transform]=m._css.translate(e,d),c.set(this._div,x)):c.set(this._div,{left:e+"px",top:d+"px"});this.__coords_dx=e;this.__coords_dy=d;this._updateImages(new F(0,0,a.width,a.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;d=this._tileW;s=this._tileH;a=new F(-a.x,-a.y,a.width,a.height);for(e=this._tileIds.length-1;0<=e;e--)(x=this._tileIds[e])?
(w=this._tiles[x],n=h.getMarginBox(w),n=new F(n.l,n.t,d,s),"css-transforms"===b.navigationMode&&(n.x=w._left,n.y=w._top),a.intersects(n)?this._tileBounds[x]=n:(this._loadingList.contains(x)&&this._popTile(w),q.destroy(w),this._tileIds.splice(e,1),delete this._tileBounds[x],delete this._tiles[x])):(this._tileIds.splice(e,1),delete this._tileBounds[x],delete this._tiles[x])}},_onPanHandler:function(a,b){var d=this._map,g=d.__visibleDelta.offset(b.x,b.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===
d.navigationMode?(d={},d[m._css.names.transform]=m._css.translate(g.x,g.y),c.set(this._div,d),A("esri-mobile")||this._updateImages({x:-g.x,y:-g.y,width:g.width,height:g.height})):(c.set(this._div,{left:g.x+"px",top:g.y+"px"}),this._updateImages({x:-g.x,y:-g.y,width:g.width,height:g.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(a,b){var d,h={},e=m._css.names,x=this._map,s=w.defaults.map.zoomDuration;for(d=this._passives.length-1;0<=d;d--){var n=
this._passives[d];0===n.childNodes.length?(this._passives.splice(d,1),q.destroy(n)):("none"===n.style[e.transition]&&c.set(n,e.transition,e.transformName+" "+s+"ms ease"),c.set(n,e.transition,b?"none":e.transformName+" "+s+"ms ease"),n._matrix=a,h[e.transform]=m._css.matrix(n._multiply?g.multiply(a,n._multiply):a),c.set(n,h))}this._active&&0===this._active.childNodes.length||(c.set(this._active,e.transition,b?"none":e.transformName+" "+s+"ms ease"),this._active._matrix=a,h[e.transform]=m._css.matrix(this._active._matrix),
c.set(this._active,h),this._passives.push(this._active),h={position:"absolute",width:x.width+"px",height:x.height+"px",overflow:"visible"},h[e.transition]=e.transformName+" "+s+"ms ease",c.set(this._active=q.create("div",null,this._div),h),this._active._remove=0,x.fadeOnZoom&&q.place(this._active,this._div,"first"))},_onZoomHandler:function(a,b,d){a=h.getMarginBox(this._div);d=d.offset(-a.l,-a.t);if(!this._previousScale||1===b)this._previousScale=1;var g,m=this._tileW*b,e=this._tileH*b,x=this._tileBounds,
w=this._tiles,q=this._previousScale,s=this._multiple,y=c.set,t,v;if((a=A("ie"))&&8>a)n.forEach(this._tileIds,function(f){v="";g=x[f];t=w[f].style.margin.split(" ");n.forEach(t,function(f){""!==v&&(v+=" ");f=parseFloat(f);v+=f/q*b+"px"});y(w[f],{left:g.x-(m-g.width)*(d.x-g.x)/g.width+"px",top:g.y-(e-g.height)*(d.y-g.y)/g.height+"px",margin:1!==s&&-1===v.indexOf("NaN")?v:"",zoom:b})});else{var C=m*s,z=e*s,l,f;n.forEach(this._tileIds,function(r){v="";g=x[r];l=g.x-(m-g.width)*(d.x-g.x)/g.width;f=g.y-
(e-g.height)*(d.y-g.y)/g.height;t=w[r].style.margin.split(" ");n.forEach(t,function(f){""!==v&&(v+=" ");f=parseFloat(f);v+=f/q*b+"px"});y(w[r],{left:l+"px",top:f+"px",margin:1!==s&&-1===v.indexOf("NaN")?v:"",width:C+"px",height:z+"px"})})}this._previousScale=b},_updateImages:function(a){if(this._ct){var b,c=this._tileW,d=this._tileH,g=this._ct;b=g.lod;var g=g.tile,m=g.offsets,h=g.coords,e=h.row,h=h.col,x=b.level,w=this.opacity,q=this._tileIds,s=this._loadingList,v=this._addImage,y=this._map.id,z=
this.id,l=a.x,f=a.y,r=b.startTileRow,k=b.endTileRow,B=b.startTileCol,H=b.endTileCol,J=n.indexOf,Q,S,X=m.x-this.__coords_dx,aa=m.y-this.__coords_dy;S=c-X+-a.x;var A=d-aa+-a.y;Q=Math.ceil;S=0<S?S%c:c-Math.abs(S)%c;A=0<A?A%d:d-Math.abs(A)%d;l=0<l?Math.floor((l+X)/c):Q((l-(c-X))/c);f=0<f?Math.floor((f+aa)/d):Q((f-(d-aa))/d);aa=l+Q((a.width-S)/c);a=f+Q((a.height-A)/d);var t,C,u;this._wrap&&(t=b._frameInfo,C=t[0],u=t[1],t=t[2]);for(A=l;A<=aa;A++)for(l=f;l<=a;l++)Q=e+l,S=h+A,this._wrap&&(S<u?(S%=C,S=S<u?
S+C:S):S>t&&(S%=C)),!this._isExcluded(x,Q,S)&&(Q>=r&&Q<=k&&S>=B&&S<=H)&&(b=y+"_"+z+"_tile_"+x+"_"+l+"_"+A,-1===J(q,b)&&(s.add(b),q.push(b),v(x,l,Q,A,S,b,c,d,w,g,m)))}},_cleanUpRemovedImages:function(){var a=this._removeList,b=q.destroy,d,g=m._css.names;a.forEach(function(a){a._fadeOut||(a.style.filter="",a.style.zoom=1,b(a))});if("css-transforms"===this._map.navigationMode)for(d=this._passives.length-1;0<=d;d--){var h=this._passives[d];0===h.childNodes.length?(this._passives.splice(d,1),b(h)):this._map.fadeOnZoom&&
(!h._marked&&h._remove===h.childNodes.length)&&(h._marked=1,2048>m._css.getScaleFromMatrix(c.get(h,g.transform))?(c.set(h,g.transition,"opacity 0.65s"),c.set(h,"opacity",0),t.disconnect(h._endHandle),h._endHandle=t.connect(h,g.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:h}))}a.clear()},_transitionEnd:function(a){var b=a.target;"opacity"===a.propertyName&&(t.disconnect(b._endHandle),b._endHandle=null,a=n.indexOf(this._passives,b),-1<a&&this._passives.splice(a,
1),b.parentNode&&b.parentNode.removeChild(b),q.destroy(b))},_addImage:function(a,d,g,h,e,x,w,n,y,A,C){if(this._patchIE)A=this._tiles[x]=q.create("div"),A.id=x,s.add(A,"layerTile"),c.set(A,{left:w*h-C.x+"px",top:n*d-C.y+"px",width:w+"px",height:n+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(a,g,e)+"', sizingMethod\x3d'scale')"}),1>y&&c.set(A,"opacity",y),a=A.appendChild(q.create("div")),c.set(a,{opacity:0,width:w+"px",height:n+"px"}),this._div.appendChild(A),
this._loadingList.remove(x),this._fireOnUpdateEvent();else{A=this._tiles[x]=q.create("img");var u=t.connect;A.id=x;A.alt="";s.add(A,"layerTile");h=w*h-C.x;C=n*d-C.y;d=this._map;var v=m._css.names;w={width:w+"px",height:n+"px",visibility:"hidden"};"css-transforms"===d.navigationMode?(w[v.transform]=m._css.translate(h,C),c.set(A,w),A._left=h,A._top=C):(w.left=h+"px",w.top=C+"px",c.set(A,w));1>y&&c.set(A,"opacity",y);A._onload_connect=u(A,"onload",this,"_tileLoadHandler");A._onerror_connect=u(A,"onerror",
b.hitch(this,"_tileErrorHandler",g,e));A._onabort_connect=u(A,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(a,g,e,x,this._tileMapCallback);else if(x=this.getTileUrl(a,g,e,A))this._failedRequests&&this._failedRequests[x]?(c.set(A,this._failedRequests[x].css),A.src=this._failedRequests[x].src,this._multiple=parseInt(this._failedRequests[x].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,A.src=x);"css-transforms"===d.navigationMode?
this._active.appendChild(A):this._div.appendChild(A)}},_tileMapCallback:function(b,d){var g,m;this.suspended||((m=this._tiles[d.id]||a.byId(d.id))?(this._multiple=2*(d.level-b.level)||1,this.isResampling=1!==this._multiple,g=this.tileMap.style(b,d),c.set(m,g),m.src=this.getTileUrl(b.level,b.row,b.col)):this._popTile(d))},getTileUrl:function(a,b,c){},_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,addTimestampToURL:function(a){var b=this._refreshTS;b&&(a=this._reCheckTS.test(a)?a.replace(this._reReplaceTS,
"$$$1"+b):a+((-1===a.indexOf("?")?"?":"\x26")+"_ts\x3d"+b));return a},refresh:function(){this.suspended||(this._refreshTS=(new Date).getTime(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(a){var b=t.disconnect;b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;this._loadingList.remove(a.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(a){a=a.currentTarget;this._noDom?this._standby.push(a):
(c.set(a,"visibility","visible"),this._popTile(a))},_tileAbortHandler:function(a){a=a.currentTarget;this.onError(Error("Unable to load tile: "+a.src));c.set(a,"visibility","hidden");this._popTile(a)},_tileErrorHandler:function(a,b,d){d=d.currentTarget;var g,m,h=!0;if(this.tileMap||!this.resampling)h=!1;else if(g=new u(d.src),g=g.path.split("/"),g=parseInt(g[g.length-3]),m=this._ct.lod.level-g+1,this._multiple=Math.pow(2,m),g===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&
Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)h=!1;h?(this.isResampling=!0,this._resample(d,a,b)):(this.onError(Error("Unable to load tile: "+d.src)),c.set(d,"visibility","hidden"),this._popTile(d))},_resample:function(a,b,d){var g=(new u(a.src)).path.split("/"),m=this._multiple,h=parseInt(g[g.length-3])-1,e=parseInt(b/m),x=parseInt(d/m),g=d%m,w=b%m,e=this.getTileUrl(h,e,x);b=this.getTileUrl(h+Math.log(m)/Math.LN2,b,d);m={width:this._tileW*m+"px",height:this._tileH*m+"px",margin:"-"+
this._tileW*w+"px 0 0 "+("-"+this._tileH*g+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[b]={src:e,css:m};c.set(a,m);A("chrome")&&a.setAttribute("src",null);a.src=e},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=
c.set,d,g,m;if("css-transforms"===this._map.navigationMode){if(this._active){m=this._active.childNodes;for(d=m.length-1;0<=d;d--)b(m[d],"opacity",a)}for(d=this._passives.length-1;0<=d;d--){m=this._passives[d].childNodes;for(g=m.length-1;0<=g;g--)b(m[g],"opacity",a)}}else{m=this._div.childNodes;for(d=m.length-1;0<=d;d--)b(m[d],"opacity",a)}},setExclusionAreas:function(a){this.exclusionAreas=a;if(this.loaded&&this._map&&this._map.loaded){var b=this._map.spatialReference,c=this.tileInfo,d=c.origin,g=
c.lods,m=g[0].level,h=g[g.length-1].level,e,x,w,q,n,v,s,z,l;if(!this.exclusionAreas||!this.exclusionAreas.length)this._exclusionsPerZoom=null;else{this._exclusionsPerZoom=[];x=0;for(w=a.length;x<w;x++)if(e=a[x],(l=e.geometry)&&"extent"===l.type&&l.xmin<=l.xmax&&l.ymin<=l.ymax){if(!b.equals(l.spatialReference))if(b._canProject(l.spatialReference))b.isWebMercator()?(z=E.lngLatToXY(l.xmin,l.ymin),l=E.lngLatToXY(l.xmax,l.ymax)):(z=E.xyToLngLat(l.xmin,l.ymin,!0),l=E.xyToLngLat(l.xmax,l.ymax,!0)),l=new y(z[0],
z[1],l[0],l[1],b);else continue;s=-1;if(e.minZoom&&-1!==e.minZoom)s=e.minZoom;else if(e.minScale&&-1!==e.minScale){q=0;for(n=g.length;q<n;q++)if(g[q].scale<=e.minScale){s=g[q].level;break}}s=Math.max(s,m);z=-1;if(e.maxZoom&&-1!==e.maxZoom)z=e.maxZoom;else if(e.maxScale&&-1!==e.maxScale){q=0;for(n=g.length;q<n;q++)if(g[q].scale<e.maxScale){z=g[q-1].level;break}else if(g[q].scale===e.maxScale){z=g[q].level;break}}z=-1===z?h:Math.min(z,h);for(e=s;e<=z;e++){q=0;for(n=g.length;q<n;q++)if(g[q].level===
e){v=g[q];break}v&&(this._exclusionsPerZoom[e]||(this._exclusionsPerZoom[e]=[]),q=1/v.resolution/c.rows,n=1/v.resolution/c.cols,this._exclusionsPerZoom[e].push({rowFrom:Math.floor((d.y-l.ymax)*q),rowTo:Math.ceil((d.y-l.ymin)*q),colFrom:Math.floor((l.xmin-d.x)*n),colTo:Math.ceil((l.xmax-d.x)*n)}))}}}this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(a,b,c){var d,g,m;if(!this._exclusionsPerZoom)return!1;d=this._exclusionsPerZoom[a];if(!d)return!1;
g=0;for(m=d.length;g<m;g++)if(a=d[g],b>=a.rowFrom&&b<a.rowTo&&c>=a.colFrom&&c<a.colTo)return!0;return!1}});A("extend-esri")&&b.setObject("layers.TiledMapServiceLayer",e,m);return e})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(e,t,b){b.ArrayList=function(n){var t=[];n&&(t=t.concat(n));this.count=t.length;this.add=function(b){t.push(b);this.count=t.length};this.addRange=function(b){if(b.getIterator)for(b=b.getIterator();!b.atEnd();)this.add(b.get());
else for(var e=0;e<b.length;e++)t.push(b[e]);this.count=t.length};this.clear=function(){t.splice(0,t.length);this.count=0};this.clone=function(){return new b.ArrayList(t)};this.contains=function(b){for(var e=0;e<t.length;e++)if(t[e]==b)return!0;return!1};this.forEach=function(b,n){e.forEach(t,b,n)};this.getIterator=function(){return new b.Iterator(t)};this.indexOf=function(b){for(var e=0;e<t.length;e++)if(t[e]==b)return e;return-1};this.insert=function(b,e){t.splice(b,0,e);this.count=t.length};this.item=
function(b){return t[b]};this.remove=function(b){b=this.indexOf(b);0<=b&&t.splice(b,1);this.count=t.length};this.removeAt=function(b){t.splice(b,1);this.count=t.length};this.reverse=function(){t.reverse()};this.sort=function(b){b?t.sort(b):t.sort()};this.setByIndex=function(b,e){t[b]=e;this.count=t.length};this.toArray=function(){return[].concat(t)};this.toString=function(b){return t.join(b||",")}};return b.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang",
"dojo/_base/array"],function(e,t,b){e=t.getObject("dojox.collections",!0);e.DictionaryEntry=function(b,e){this.key=b;this.value=e;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};e.Iterator=function(e){var t=0;this.element=e[t]||null;this.atEnd=function(){return t>=e.length};this.get=function(){return this.atEnd()?null:this.element=e[t++]};this.map=function(q,s){return b.map(e,q,s)};this.reset=function(){t=0;this.element=e[t]}};e.DictionaryIterator=function(e){var t=
[],q={},s;for(s in e)q[s]||t.push(e[s]);var h=0;this.element=t[h]||null;this.atEnd=function(){return h>=t.length};this.get=function(){return this.atEnd()?null:this.element=t[h++]};this.map=function(c,a){return b.map(t,c,a)};this.reset=function(){h=0;this.element=t[h]}};return e})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(e,
t,b,n,u,q,s,h,c,a){e=e(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);var c=this._params={},h=this._url.query?this._url.query.token:null;h&&(c.token=h)},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){s({url:this._url.path,content:t.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,
initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(d,g){try{this._findCredential();(this.credential&&this.credential.ssl||d&&d._ssl)&&this._useSSL();this.description=d.description;this.copyright=d.copyrightText;this.spatialReference=d.spatialReference&&new h(d.spatialReference);this.initialExtent=d.initialExtent&&new c(d.initialExtent);this.fullExtent=d.fullExtent&&new c(d.fullExtent);this.units=d.units;this.maxRecordCount=d.maxRecordCount;this.maxImageHeight=d.maxImageHeight;
this.maxImageWidth=d.maxImageWidth;this.supportsDynamicLayers=d.supportsDynamicLayers;var m=this.layerInfos=[],e=d.layers,n=this._defaultVisibleLayers=[];b.forEach(e,function(b,c){m[c]=new a(b);b.defaultVisibility&&n.push(b.id)});this.visibleLayers||(this.visibleLayers=n);this.version=d.currentVersion;this.version||(this.version="capabilities"in d||"tables"in d?10:"supportedImageFormatTypes"in d?9.31:9.3);this.capabilities=d.capabilities;q.isDefined(d.minScale)&&!this._hasMin&&this.setMinScale(d.minScale);
q.isDefined(d.maxScale)&&!this._hasMax&&this.setMaxScale(d.maxScale)}catch(x){this._errorHandler(x)}}});n("extend-esri")&&t.setObject("layers.ArcGISMapServiceLayer",e,u);return e})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,t,b,n,u){e=e(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(b){t.mixin(this,b)},toJson:function(){return u.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,
minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});b("extend-esri")&&t.setObject("layers.LayerInfo",e,n);return e})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(e,t,b,n,u,q,s){e=e(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(b){null!==b&&(t.mixin(this,b),b.exportOptions&&(this.exportOptions=new s(b.exportOptions)),
this.timeExtent=null,b.timeExtent&&2===b.timeExtent.length&&(this.timeExtent=new u(b.timeExtent)),this.timeReference=new q(b.timeReference))}});t.mixin(e,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",
UNIT_YEARS:"esriTimeUnitsYears"});b("extend-esri")&&t.setObject("layers.TimeInfo",e,n);return e})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(e,t,b,n){var u=e(null,{declaredClass:"esri.TimeExtent",constructor:function(b){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(b)if(t.isArray(b)){var e=b[0],h=b[1];this.startTime=null===e||"null"===e?null:new Date(e);this.endTime=null===h||"null"===h?null:new Date(h)}else b instanceof
Date&&this._create(b,null)},offset:function(b,e){var h=new u,c=this.startTime,a=this.endTime;c&&(h.startTime=this._getOffsettedDate(c,b,e));a&&(h.endTime=this._getOffsettedDate(a,b,e));return h},intersection:function(b){return this._intersection(this,b)},toJson:function(){var b=[],e=this.startTime;b.push(e?e.getTime():"null");e=this.endTime;b.push(e?e.getTime():"null");return b},_create:function(b,e){this.startTime=b?new Date(b.getTime()):null;this.endTime=e?new Date(e.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},
esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(b,e){if(b&&e){var h=b.startTime,c=b.endTime,a=e.startTime,d=e.endTime,h=h?h.getTime():-Infinity,a=a?a.getTime():-Infinity,c=c?c.getTime():Infinity,d=d?d.getTime():Infinity,g,m;a>=h&&a<=c?g=a:h>=a&&h<=d&&(g=h);c>=a&&c<=d?m=
c:d>=h&&d<=c&&(m=d);if(!isNaN(g)&&!isNaN(m))return h=new u,h.startTime=-Infinity===g?null:new Date(g),h.endTime=Infinity===m?null:new Date(m),h}return null},_getOffsettedDate:function(b,e,h){var c=this._refData;b=new Date(b.getTime());e&&h&&(c=c[h],b[c.setter](b[c.getter]()+e*c.multiplier));return b}});b("extend-esri")&&(n.TimeExtent=u);return u})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.layers.TimeReference",
constructor:function(b){b&&t.mixin(this,b)}});b("extend-esri")&&t.setObject("layers.TimeReference",e,n);return e})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,t,b,n,u){e=e(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(b){b&&t.mixin(this,b)},toJson:function(){return u.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,
useTime:this.useTime})}});b("extend-esri")&&t.setObject("layers.LayerTimeOptions",e,n);return e})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(e,t,b,n,u,q,s){return e(null,{declaredClass:"esri.layers.TileMap",constructor:function(b){this.layer=b;this._tileMaps={}},getTile:function(b,c,a,d,g){b={id:d,level:b,row:c,col:a};c=this._getResamplingBudget();0<c?this._process({tile:b,requestedTile:b,
callback:g,resamplingBudget:c}):(g||this.callback).call(this,b,b)},statusOf:function(b,c,a){var d=this._getResamplingBudget();b={level:b,row:c,col:a};if(0===d)return 1;for(;0<=d;){c=this._tileToTileMap(b);if(!this._tileMaps[c.uid])return-1;c=this._tileMaps[c.uid];if(!c.promise.isFulfilled())return-1;if(this._isTileAvailable(b,c))return 1;b=this._parentTile(b);if(!b)break;d--}return 0},style:function(b,c){if(!(b.level===c.level&&b.row===c.row&&b.col===c.col)){for(var a=this.layer.tileInfo,d=a.lods,
g=a.cols,a=a.rows,m,e,q=d.length-1;!m||!e;)!m&&d[q].level===b.level&&(m=d[q]),!e&&d[q].level===c.level&&(e=d[q]),q--;d=Math.round(m.resolution/e.resolution);return{width:g*d+"px",height:a*d+"px",margin:"-"+c.row%d*a+"px 0 0 -"+c.col%d*g+"px","will-change":"transform"}}},_process:function(b){var c=b.tile,a=this._tileToTileMap(c),d=this._parentTile(c);this._getTileMap(a).then(t.hitch(this,function(g){a=g;this._isTileAvailable(c,a)?(b.callback||this.callback).call(this,c,b.requestedTile):0<b.resamplingBudget&&
d?(b.resamplingBudget--,b.tile=d,this._process(b)):(b.callback||this.callback).call(this,b.requestedTile,b.requestedTile)}),t.hitch(this,function(){(b.callback||this.callback).call(this,b.requestedTile,b.requestedTile)}))},_getTileMap:function(b){var c,a,d,g,m=null;this._tileMaps[b.uid]?(b=this._tileMaps[b.uid],c=b.promise):(this._tileMaps[b.uid]=b,a=new n,q({url:this._getTileMapUrl(b.level,b.row,b.col),handleAs:"json",callbackParamName:"callback",timeout:3E3,load:function(c){t.mixin(b,c);if(b.data&&
0<b.data.length){g=b.data.length;if(1===g)m=b.data[0];else{m=b.data[0];for(d=1;d<g;d++)if(b.data[d]!==m){m=null;break}}null!==m&&(delete b.data,b.value=m)}a.resolve(b)},error:function(b){a.reject()}}),c=b.promise=a.promise);return c},_parentTile:function(e){var c=this.layer.tileInfo.lods,a,d,g=null;b.some(c,function(b,c){return e.level===b.level?(a=b,d=c,!0):!1});0<d&&(c=c[d-1],g={id:e.id,level:c.level,row:Math.floor(e.row*a.resolution/c.resolution+0.01),col:Math.floor(e.col*a.resolution/c.resolution+
0.01)});return g},_tileToTileMap:function(b){var c=8*Math.floor(b.row/8),a=8*Math.floor(b.col/8);return{uid:b.level+"_"+c+"_"+a,level:b.level,row:c,col:a}},_isTileAvailable:function(b,c){var a,d;c.valid?void 0!==c.value?a=c.value:(a=c.location.left,d=c.location.top,a=(b.row-d)*c.location.width+(b.col-a),a=a<c.data.length?c.data[a]:0):a=0;return a},_getTileMapUrl:function(b,c,a){var d=this.layer,g=d.tileServers,m=d._getToken(),e=d._url.query;b=(g?g[c%g.length]:d._url.path)+"/tilemap/"+b+"/"+c+"/"+
a+"/8/8";e&&(b+="?"+u.objectToQuery(e));if(m&&(!e||!e.token))b+=(-1===b.indexOf("?")?"?":"\x26")+"token\x3d"+m;b=d.addTimestampToURL(b);return s.addProxy(b)},_getResamplingBudget:function(){var b=this.layer,c=0;if(b.resampling&&(c=b._resamplingTolerance,null===c||void 0===c))c=b.tileInfo.lods.length;return c}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m){var w=e([m],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(a){this.inherited(arguments,[null,a]);this._mapImages=[];var c=b.hitch;this._panStart=c(this,this._panStart);this._pan=c(this,this._pan);this._extentChange=c(this,this._extentChange);this._zoom=c(this,this._zoom);this._zoomStart=c(this,this._zoomStart);this._scale=c(this,this._scale);this._resize=c(this,this._resize);t.connect(this,"onSuspend",this,this._onSuspend);
t.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(a){var b=this._mapImages.push(a),b=b-1;a._idx=b;a._layer=this;this._div&&this._createImage(a,b)},removeImage:function(a){if(a){var b=a._idx,c=this._mapImages;if(c[b]===a){delete c[b];if(b=a._node)this._clearEvents(b),b.e_idx=b.e_bl=b.e_tr=b.e_l=b.e_t=b.e_w=b.e_h=null,b.parentNode&&(b.parentNode.removeChild(b),u.destroy(b));a._node=a._idx=a._layer=null}}},removeAllImages:function(){var a=this._mapImages,
b,c=a.length;for(b=0;b<c;b++){var d=a[b];d&&this.removeImage(d)}this._mapImages=[]},getImages:function(){var a=this._mapImages,b=[],c,d=a.length;for(c=0;c<d;c++)a[c]&&b.push(a[c]);return b},setOpacity:function(a){this.opacity!=a&&(this._opacityChanged(this.opacity=a),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(a){var b=this._div,d,g;if(b)if(!c("ie")||8<c("ie"))q.set(b,"opacity",a);else{g=b.childNodes;d=g.length;for(b=0;b<d;b++)q.set(g[b],"opacity",a)}},_createImage:function(a,
b){var d=u.create("img");q.set(d,{position:"absolute"});1>a.opacity?q.set(d,"opacity",a.opacity):8>=c("ie")&&q.set(d,"opacity",this.opacity);a.rotation&&!(9>c("ie"))&&q.set(d,s._css.names.transform,s._css.rotate(360-a.rotation));a._node=d;d.e_idx=b;d.e_layer=this;d.e_load=t.connect(d,"onload",w.prototype._imageLoaded);d.e_error=t.connect(d,"onerror",w.prototype._imageError);d.e_abort=t.connect(d,"onabort",w.prototype._imageError);d.src=a.href},_imageLoaded:function(a,b){var c=b||a.target||a.currentTarget,
d=c.e_layer,g=d._mapImages[c.e_idx],m=d._map;m&&(m.__zooming||m.__panning||!d._sr)?d._standby.push(c):(d._clearEvents(c),g&&g._node===c&&m&&d._attach(g))},_imageError:function(a){a=a.target||a.currentTarget;var b=a.e_layer,c=b._mapImages[a.e_idx];b._clearEvents(a);c&&(c._node=null)},_clearEvents:function(a){var b=t.disconnect;b(a.e_load);b(a.e_error);b(a.e_abort);a.e_load=a.e_error=a.e_abort=a.e_layer=null},_attach:function(a){var b=a.extent,c=b.spatialReference,m=this._sr,e=this._div,h=a._node,w=
new d({x:b.xmin,y:b.ymin,spatialReference:c}),b=new d({x:b.xmax,y:b.ymax,spatialReference:c});m.equals(c)||(m.isWebMercator()&&4326===c.wkid?(w=g.geographicToWebMercator(w),b=g.geographicToWebMercator(b)):c.isWebMercator()&&4326===m.wkid&&(w=g.webMercatorToGeographic(w),b=g.webMercatorToGeographic(b)));h.e_bl=w;h.e_tr=b;a.visible&&(this._setPos(h,e._left,e._top),(this._active||e).appendChild(h))},_setPos:function(a,b,c){var d=a.e_bl,g=a.e_tr,m=this._map,d=m.toScreen(d),g=m.toScreen(g);b=d.x-b;c=g.y-
c;var e=Math.abs(g.x-d.x),d=Math.abs(d.y-g.y),g={width:e+"px",height:d+"px"},h=this._mapImages[a.e_idx];"css-transforms"===m.navigationMode?g[s._css.names.transform]=s._css.translate(b,c)+(h.rotation?" "+s._css.rotate(360-h.rotation):""):(g.left=b+"px",g.top=c+"px");q.set(a,g);a.e_l=b;a.e_t=c;a.e_w=e;a.e_h=d},managedSuspension:!0,_setMap:function(b,d){this.inherited(arguments);var g=this._div=u.create("div",null,d),m=s._css.names,e={position:"absolute"},h=b.__visibleDelta;if(!c("ie")||8<c("ie"))e.opacity=
this.opacity;"css-transforms"===b.navigationMode?(e[m.transform]=s._css.translate(h.x,h.y),q.set(g,e),g._left=h.x,g._top=h.y,e={position:"absolute",width:b.width+"px",height:b.height+"px",overflow:"visible"},this._active=u.create("div",null,g),q.set(this._active,e),this._passive=u.create("div",null,g),q.set(this._passive,e)):(g._left=0,g._top=0,q.set(g,e));this._standby=[];m=this._mapImages;h=m.length;for(e=0;e<h;e++){var w=m[e];w._node||this._createImage(w,w._idx)}a.hide(g);return g},_unsetMap:function(a,
b){this._disconnect();var c=this._div;if(c){var d=this._mapImages,g,m=d.length;for(g=0;g<m;g++){var e=d[g];if(e){var h=e._node;h&&(this._clearEvents(h),h.e_idx=h.e_bl=h.e_tr=h.e_l=h.e_t=h.e_w=h.e_h=null);e._node=null}}b.removeChild(c);u.destroy(c)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();a.hide(this._div)},_onResume:function(b){b.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());
b=this._map;var c=this._div,d=b.__visibleDelta;"css-transforms"===b.navigationMode&&(c._left=d.x,c._top=d.y,q.set(c,s._css.names.transform,s._css.translate(c._left,c._top)));this._redraw("css-transforms"===b.navigationMode);this._connect(b);a.show(c)},_connect:function(a){if(!this._connections){var b=t.connect,c="css-transforms"===a.navigationMode;this._connections=[b(a,"onPanStart",this._panStart),b(a,"onPan",this._pan),b(a,"onExtentChange",this._extentChange),c&&b(a,"onZoomStart",this._zoomStart),
c?b(a,"onScale",this._scale):b(a,"onZoom",this._zoom),c&&b(a,"onResize",this._resize)]}},_disconnect:function(){this._connections&&(n.forEach(this._connections,t.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(a,b){var c=this._div;c._left=this._panL+b.x;c._top=this._panT+b.y;"css-transforms"===this._map.navigationMode?q.set(c,s._css.names.transform,s._css.translate(c._left,c._top)):q.set(c,{left:c._left+"px",top:c._top+
"px"})},_extentChange:function(a,b,c){c?this._redraw("css-transforms"===this._map.navigationMode):b&&this._pan(a,b);this._processStandbyList()},_processStandbyList:function(){var a,b=this._standby;if(b&&b.length)for(a=b.length-1;0<=a;a--)this._imageLoaded(null,b[a]),b.splice(a,1)},_redraw:function(a){if(a){a=this._passive;var b=s._css.names;q.set(a,b.transition,"none");this._moveImages(a,this._active);q.set(a,b.transform,"none")}a=this._active||this._div;var b=this._div._left,c=this._div._top,d,g=
a.childNodes.length,m;for(d=0;d<g;d++)m=a.childNodes[d],this._setPos(m,b,c)},_zoom:function(a,b,c){a=this._div;var d=a._left,g=a._top,m,e=a.childNodes.length,h;for(m=0;m<e;m++){h=a.childNodes[m];var w=h.e_w*b,n=h.e_h*b,s=(c.x-d-h.e_l)*(w-h.e_w)/h.e_w,t=(c.y-g-h.e_t)*(n-h.e_h)/h.e_h,s=isNaN(s)?0:s,t=isNaN(t)?0:t;q.set(h,{left:h.e_l-s+"px",top:h.e_t-t+"px",width:w+"px",height:n+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(a,b){var c=a.childNodes,
d;d=c.length;if(0<d)for(d-=1;0<=d;d--)b.appendChild(c[d])},_scale:function(a,b){var c=s._css.names,d=this._passive;q.set(d,c.transition,b?"none":c.transformName+" "+h.defaults.map.zoomDuration+"ms ease");s._css.matrix(a);q.set(d,c.transform,s._css.matrix(a))},_resize:function(a,b,c){q.set(this._active,{width:b+"px",height:c+"px"});q.set(this._passive,{width:b+"px",height:c+"px"})}});c("extend-esri")&&b.setObject("layers.MapImageLayer",w,s);return w})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(e,t,b,n,u,q,s,h,c){e=e(h,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(a){this.spatialReference=new q({wkid:102100});this.tileInfo=new c({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},
{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,
resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817},{level:19,scale:1128.497176,resolution:0.298582141647617}]});this.fullExtent=
new s({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.initialExtent=new s({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=a&&a.tileServers||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=a?a.displayLevels:null;this.copyright=a&&a.copyright||
"Map data \x26copy; OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(a=a&&a.loadCallback)&&a(this)},getTileUrl:function(a,b,c){a=this.tileServers[b%this.serversLength]+"/"+a+"/"+c+"/"+b+".png";a=this.addTimestampToURL(a);return u.addProxy(a)}});b("extend-esri")&&t.setObject("layers.OpenStreetMapLayer",e,n);return e})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom dojo/has!extend-esri?./PopupTemplate dojo/has!extend-esri?./PopupRenderer".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D,G){e=e([L,D,h],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(b,c){this.initialize();t.mixin(this,b);this.domNode=a.byId(c);var m=this._nls=t.mixin({},G.widgets.popup),e=this.domNode;g.add(e,"esriPopup");(this._isRTL=!w.isBodyLtr())&&
A.set(e,"direction","rtl");d.set(e,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+m.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+m.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+m.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
m.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+m.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d"+m.NLS_zoomTo+" class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+m.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=u.query(".sizer",e);m=u.query(".titlePane",e)[0];a.setSelectable(m,!1);this._title=u.query(".title",m)[0];this._prevFeatureButton=u.query(".prev",m)[0];this._nextFeatureButton=u.query(".next",m)[0];this._maxButton=u.query(".maximize",m)[0];this._spinner=u.query(".spinner",m)[0];this._contentPane=u.query(".contentPane",e)[0];this._positioner=u.query(".esriPopupWrapper",e)[0];this._pointer=u.query(".pointer",e)[0];this._outerPointer=u.query(".outerPointer",e)[0];this._actionList=u.query(".actionsPane .actionList",
e)[0];this._eventConnections=[n.connect(u.query(".close",m)[0],"onclick",this,this.hide),n.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),n.connect(this._nextFeatureButton,"onclick",this,this.selectNext),n.connect(this._maxButton,"onclick",this,this._toggleSize),n.connect(u.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),n.connect(this,"onClearFeatures",this,this._featuresCleared),n.connect(this,"onSelectionChange",this,this._featureSelected),n.connect(this,
"onDfdComplete",this,this._updateUI)];q("esri-touch")&&(e=F.setScrollable(this._contentPane),this._eventConnections.push(e[0],e[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(a){this.inherited(arguments);m.place(this.domNode,a.root);this.highlight&&this.enableHighlight(a);this._maxHeight=A.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(a){if(this.popupWindow){if(!E.isDefined(a)||
""===a)a="\x26nbsp;";this.destroyDijits(this._title);this.place(a,this._title);this.isShowing&&(this.startupDijits(this._title),this.reposition())}},setContent:function(a){if(this.popupWindow){if(!E.isDefined(a)||""===a)a="\x26nbsp;";this.destroyDijits(this._contentPane);this.place(a,this._contentPane);this.isShowing&&(this.startupDijits(this._contentPane),this.reposition())}},show:function(a,b){if(this.popupWindow)if(this._delayHide=!1,a){var c=this.map,d;a.spatialReference?(this.location=a,d=c.toScreen(a)):
(this.location=c.toMap(a),d=a);var g=c._getFrameWidth();if(-1!==g&&(d.x%=g,0>d.x&&(d.x+=g),c.width>g))for(c=(c.width-g)/2;d.x<c;)d.x+=g;this._maximized?this.restore():this._setPosition(d);b&&b.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this.startupDijits(this._contentPane),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),
this._unfollowMap(),this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(a,b){this.popupWindow&&(this._sizers.style({width:a+"px"}),A.set(this._contentPane,"maxHeight",b+"px"),this._maxHeight=b,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&(this.location&&!this._maximized&&this.isShowing)&&this._setPosition(this.map.toScreen(this.location))},maximize:function(){var a=this.map;if(a&&!this._maximized&&this.popupWindow){this._maximized=
!0;var b=this._maxButton;g.remove(b,"maximize");g.add(b,"restore");d.set(b,"title",this._nls.NLS_restore);var b=this.marginLeft,c=this.marginTop,m=a.width-2*b,a=a.height-2*c;A.set(this.domNode,{left:this._isRTL?null:b+"px",right:this._isRTL?b+"px":null,top:c+"px",bottom:null});A.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=A.get(this._sizers[0],"width");this._savedHeight=A.get(this._contentPane,"maxHeight");this._sizers.style({width:m+"px"});A.set(this._contentPane,
{maxHeight:a-65+"px",height:a-65+"px"});this._showPointer("");this._unfollowMap();g.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&this._maximized&&this.popupWindow){this._maximized=!1;var a=this._maxButton;g.remove(a,"restore");g.add(a,"maximize");d.set(a,"title",this._nls.NLS_maximize);A.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();
g.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);this.destroyDijits(this._content);b.forEach(this._eventConnections,n.disconnect);m.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=
this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(){this.inherited(arguments);this._updateUI()},postscript:null,_highlightSetter:function(a){var b=this.highlight,c=this.map;this.highlight=a;if(c&&a!==b)if(a){if(this.enableHighlight(c),a=this.features&&this.features[this.selectedIndex])this.updateHighlight(c,a),this.showHighlight()}else this.disableHighlight(c)},
_pagingControlsSetter:function(a){var b=this.pagingControls,c=this.map;this.pagingControls=a;c&&a!==b&&this._updatePagingControls()},_pagingInfoSetter:function(a){var b=this.pagingInfo,c=this.map;this.pagingInfo=a;c&&(a!==b&&this.features&&this.features.length)&&this._updatePagingInfo()},_popupWindowSetter:function(a){var b=this.popupWindow,c=this.map;this.popupWindow=a;c&&a!==b&&(a?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(a){var b=this.anchor;
this.anchor=a;this.map&&a!==b&&this.reposition()},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var a=this.selectedIndex;if(0<=a){var b=this.features[a].getContent(),c;!this.titleInBody&&b&&t.isString(b.id)&&(c=x.byId(b.id))&&(c.set&&/_PopupRenderer/.test(c.declaredClass))&&c.set("showTitle",!1);this.setContent(b);
this.updateHighlight(this.map,this.features[a]);this.showHighlight()}},_toggleVisibility:function(a){this._setVisibility(a);this.isShowing=a},_setVisibility:function(a){A.set(this.domNode,"visibility",a?"visible":"hidden");g.toggle(this.domNode,"esriPopupVisible",a)},_waitAndHide:function(a){var b=this;this._delayHide=!0;setTimeout(function(){b._delayHide&&(b._delayHide=!1,b.hide())},a)},_followMap:function(){this._unfollowMap();var a=this.map;this._handles=[n.connect(a,"onPanStart",this,this._onPanStart),
n.connect(a,"onPan",this,this._onPan),n.connect(a,"onZoomStart",this,this._onZoomStart),n.connect(a,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var a=this._handles;a&&(b.forEach(a,n.disconnect),this._handles=null)},_onPanStart:function(){var a=this.domNode.style;this._panOrigin={left:a.left,top:a.top,right:a.right,bottom:a.bottom}},_onPan:function(a,b){var c=this._panOrigin,d=b.x,g=b.y,m=c.left,e=c.top,h=c.right,c=c.bottom;m&&(m=parseFloat(m)+d+"px");e&&(e=parseFloat(e)+
g+"px");h&&(h=parseFloat(h)-d+"px");c&&(c=parseFloat(c)-g+"px");A.set(this.domNode,{left:m,top:e,right:h,bottom:c})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(a,b,c){c&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_setPosition:function(a){var b=a.x,c=a.y;a=this.offsetX||0;var d=this.offsetY||0,g=0,m=0,e=w.position(this.map.container,!0),h=e.w,
x=e.h,v="Left",q="bottom",z=w.getContentBox(this._positioner),l=z.w/2,f=z.h/2,r=A.get(this._sizers[0],"height")+this._maxHeight+A.get(this._sizers[2],"height"),k=r/2,B=0,H=0,J=b,Q=c,S=this.anchor.toLowerCase();if("auto"===S){if(S=s.getBox)S=S(),B=Math.max(S.l,e.x),h=Math.min(S.l+S.w,e.x+e.w),H=Math.max(S.t,e.y),x=Math.min(S.t+S.h,e.y+e.h),J+=e.x,Q+=e.y;e=Q-H>=r;r=x-Q>=r;S=h-J>=z.w;z=J-B>=z.w;Q-H>k&&x-Q>=k&&(S?(q="",v="Left"):z&&(q="",v="Right"));v&&q&&(J-B>l&&h-J>=l)&&(e?(v="",q="bottom"):r&&(v="",
q="top"));v&&q&&(S&&e?(v="Left",q="bottom"):S&&r?(v="Left",q="top"):z&&r?(v="Right",q="top"):z&&e&&(v="Right",q="bottom"))}else q=v="",-1!==S.indexOf("top")?q="bottom":-1!==S.indexOf("bottom")&&(q="top"),-1!==S.indexOf("left")?v="Right":-1!==S.indexOf("right")&&(v="Left");k=q+v;switch(k){case "top":case "bottom":m=14;break;case "Left":case "Right":g=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":m=14,g=-16}A.set(this.domNode,{left:b+"px",top:c+"px",right:null,bottom:null});
b={left:null,right:null,top:null,bottom:null};v?b[v.toLowerCase()]=g+a+"px":b.left=-l+"px";q?b[q]=m+d+"px":b.top=-f+"px";A.set(this._positioner,b);this._showPointer(k)},_showPointer:function(a){g.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));g.remove(this._outerPointer,["right","left","hidden"]);"Right"===a||"Left"===a?(a=a.toLowerCase(),g.add(this._outerPointer,a)):g.add(this._pointer,a)},_setPagerCallbacks:function(a,b,c){if(this.pagingControls&&
!(a===this&&(!this._pagerScope||this._pagerScope===this))&&a!==this._pagerScope){this._pagerScope=a;a===this&&(b=this.selectPrevious,c=this.selectNext);var d=this._eventConnections;n.disconnect(d[1]);n.disconnect(d[2]);b&&(d[1]=n.connect(this._prevFeatureButton,"onclick",a,b));c&&(d[2]=n.connect(this._nextFeatureButton,"onclick",a,c))}},_getLocation:function(a){var c=this.map,d,g,m=0,e;if(a=a&&a.geometry)switch(a.type){case "point":d=a;break;case "multipoint":d=a.getPoint(0);g=a.getExtent();break;
case "polyline":d=a.getPoint(0,0);g=a.getExtent();-1!==c._getFrameWidth()&&(b.forEach(a.paths,function(a){a=(new y({paths:[a,c.spatialReference]})).getExtent();var b=Math.abs(a.ymax-a.ymin),d=Math.abs(a.xmax-a.xmin),b=d>b?d:b;b>m&&(m=b,e=a)}),e.spatialReference=g.spatialReference,g=e);break;case "polygon":d=a.getPoint(0,0),g=a.getExtent(),-1!==c._getFrameWidth()&&(b.forEach(a.rings,function(a){a=(new I({rings:[a,c.spatialReference]})).getExtent();var b=Math.abs(a.ymax-a.ymin),d=Math.abs(a.xmax-a.xmin),
b=d>b?d:b;b>m&&(m=b,e=a)}),e.spatialReference=g.spatialReference,g=e)}return[d,g]},_zoomToFeature:function(a){a.preventDefault();var b=this.features,c=this.selectedIndex;a=this.map;if(b){c=this._getLocation(b[c]);b=c[0];c=c[1];b||(b=this.location);if(!c||!c.intersects(this.location))this.location=b;if(c&&c.getWidth()&&c.getHeight())a.setExtent(c,!0);else{var d=a.getNumLevels(),c=a.getLevel(),g=a.getMaxZoom(),m=this.zoomFactor||1;0<d?c!==g&&(d=c+m,d>g&&(d=g),a.navigationManager._wheelZoom({value:d-
c,mapPoint:b},!0)):a.navigationManager._wheelZoom({value:2*(1/Math.pow(2,m)),mapPoint:b},!0)}}},_updatePagingControls:function(){var a=this._prevFeatureButton,b=this._nextFeatureButton,c=this.selectedIndex,d=this.features?this.features.length:0;this.pagingControls&&1<d?(0===c?g.add(a,"hidden"):g.remove(a,"hidden"),c===d-1?g.add(b,"hidden"):g.remove(b,"hidden")):(g.add(a,"hidden"),g.add(b,"hidden"))},_updatePagingInfo:function(){var a=this.features?this.features.length:0,b=this._nls,c="\x26nbsp;";
this.pagingInfo&&(1<a&&b.NLS_pagingInfo)&&(c=E.substitute({index:this.selectedIndex+1,total:a},b.NLS_pagingInfo));if(a&&(b=this.getSelectedFeature(),a=b.getInfoTemplate(),b=b.getTitle(),(!a||/esri\.InfoTemplate/.test(a.declaredClass)||!this.titleInBody)&&b))c=b+("\x26nbsp;"===c?"":" "+c);this.setTitle(c)},_updateUI:function(){if(this.popupWindow){var a=this.features,b=this.deferreds,c=a?a.length:0,d=this._spinner,m=this._actionList,e=this._nls;this._updatePagingControls();this._updatePagingInfo();
c?g.remove(m,"hidden"):g.add(m,"hidden");b&&b.length?a?g.remove(d,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+e.NLS_searching+"...\x3c/div\x3e"):(g.add(d,"hidden"),c||(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+e.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay)))}}});q("extend-esri")&&t.setObject("dijit.Popup",e,C);return e})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),
function(e,t,b,n,u,q,s){t.add("rtl-adjust-position-for-verticalScrollBar",function(c,a){var d=b.body(a),g=s.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},d,"last"),m=s.create("div",{style:{overflow:"hidden",direction:"ltr"}},g,"last"),e=0!=u.position(m).x;g.removeChild(m);d.removeChild(g);return e});t.add("position-fixed-support",function(c,a){var d=b.body(a),g=s.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},d,"last"),m=s.create("span",{style:{position:"fixed",left:"0",top:"0"}},g,"last"),e=u.position(m).x!=u.position(g).x;g.removeChild(m);d.removeChild(g);return e});var h={getBox:function(c){c=c||b.doc;var a="BackCompat"==c.compatMode?b.body(c):c.documentElement,d=u.docScroll(c);if(t("touch")){var g=h.get(c);c=g.innerWidth||a.clientWidth;a=g.innerHeight||a.clientHeight}else c=a.clientWidth,a=a.clientHeight;return{l:d.x,t:d.y,w:c,h:a}},get:function(b){if(t("ie")&&
h!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(c,a){try{c=n.byId(c);var d=c.ownerDocument||b.doc,g=b.body(d),m=d.documentElement||g.parentNode,e=t("ie"),h=t("webkit");if(!(c==g||c==m))if(!t("mozilla")&&(!e&&!h&&!t("opera")&&!t("trident"))&&"scrollIntoView"in c)c.scrollIntoView(!1);else{var x="BackCompat"==d.compatMode,s=Math.min(g.clientWidth||
m.clientWidth,m.clientWidth||g.clientWidth),E=Math.min(g.clientHeight||m.clientHeight,m.clientHeight||g.clientHeight),d=h||x?g:m,F=a||u.position(c),y=c.parentNode,h=function(a){return 6>=e||7==e&&x?!1:t("position-fixed-support")&&"fixed"==q.get(a,"position").toLowerCase()},I=this,L=function(a,l,f){"BODY"==a.tagName||"HTML"==a.tagName?I.get(a.ownerDocument).scrollBy(l,f):(l&&(a.scrollLeft+=l),f&&(a.scrollTop+=f))};if(!h(c))for(;y;){y==g&&(y=d);var D=u.position(y),G=h(y),N="rtl"==q.getComputedStyle(y).direction.toLowerCase();
if(y==d){D.w=s;D.h=E;if(d==m&&(e||t("trident"))&&N)D.x+=d.offsetWidth-D.w;if(0>D.x||!e||9<=e||t("trident"))D.x=0;if(0>D.y||!e||9<=e||t("trident"))D.y=0}else{var P=u.getPadBorderExtents(y);D.w-=P.w;D.h-=P.h;D.x+=P.l;D.y+=P.t;var K=y.clientWidth,R=D.w-K;0<K&&0<R&&(N&&t("rtl-adjust-position-for-verticalScrollBar")&&(D.x+=R),D.w=K);K=y.clientHeight;R=D.h-K;0<K&&0<R&&(D.h=K)}G&&(0>D.y&&(D.h+=D.y,D.y=0),0>D.x&&(D.w+=D.x,D.x=0),D.y+D.h>E&&(D.h=E-D.y),D.x+D.w>s&&(D.w=s-D.x));var M=F.x-D.x,T=F.y-D.y,U=M+F.w-
D.w,V=T+F.h-D.h,W,v;if(0<U*M&&(y.scrollLeft||y==d||y.scrollWidth>y.offsetHeight)){W=Math[0>M?"max":"min"](M,U);if(N&&(8==e&&!x||9<=e||t("trident")))W=-W;v=y.scrollLeft;L(y,W,0);W=y.scrollLeft-v;F.x-=W}if(0<V*T&&(y.scrollTop||y==d||y.scrollHeight>y.offsetHeight))W=Math.ceil(Math[0>T?"max":"min"](T,V)),v=y.scrollTop,L(y,0,W),W=y.scrollTop-v,F.y-=W;y=y!=d&&!G&&y.parentNode}}}catch(O){console.error("scrollIntoView: "+O),c.scrollIntoView(!1)}}};e.setObject("dojo.window",h);return h})},"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d){e=e(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var a=t.hitch;this.__set_title=a(this,this.__set_title);this.__err_title=a(this,this.__err_title);this.__set_content=a(this,this.__set_content);this.__err_content=a(this,this.__err_content)},setMap:function(a){this.map=a},unsetMap:function(a){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},
place:function(b,c){a.isDefined(b)?t.isObject(b)?q.place(b,c,"only"):c.innerHTML=b:c.innerHTML=""},startupDijits:function(a){this._processDijits(a)},destroyDijits:function(a){this._processDijits(a,!0)},_processDijits:function(a,c){if(a&&1===a.children.length){var d=a.children[0];if(d){var e=h.byNode(d),d=e?[e]:h.findWidgets(d);b.forEach(d,function(a){if(c){if(a._started&&!a._destroyed)try{a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy()}catch(b){}}else if(!a._started)try{a.startup()}catch(d){}})}}},
__registerMapListeners:function(){this.__unregisterMapListeners();var a=this.map;this.__handles=[n.connect(a,"onPan",this,this.__onMapPan),n.connect(a,"onZoomStart",this,this.__onMapZmStart),n.connect(a,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var a=this.__handles;a&&(b.forEach(a,n.disconnect,n),this.__handles=null)},__onMapPan:function(a,b){this.move(b,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new d(this.coords));this.hide(null,
!0)},__onMapExtChg:function(a,b,c){a=this.map;var d=this.mapCoords;d?this.show(d,null,!0):(b=c?a.toScreen(this.__mcoords):this.coords.offset(b&&b.x||0,b&&b.y||0),this.show(b,null,!0))},__setValue:function(b,c){this[b].innerHTML="";var d="_dfd"+b,e=this[d];e&&-1===e.fired&&(e.cancel(),this[d]=null);a.isDefined(c)&&(c instanceof u?(this[d]=c,c.addCallbacks(this["__set"+b],this["__err"+b])):this.__render(b,c))},__set_title:function(a){this._dfd_title=null;this.__render("_title",a)},__err_title:function(a){this._dfd_title=
null},__set_content:function(a){this._dfd_content=null;this.__render("_content",a)},__err_content:function(a){this._dfd_content=null},__render:function(a,b){var c=this[a];this.place(b,c);this.isShowing&&(this.startupDijits(c),"_title"===a&&this._adjustContentArea&&this._adjustContentArea())}});s("extend-esri")&&(c.InfoWindowBase=e);return e})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented dojo/has!extend-esri?./PopupInfo".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E){function F(a){return"sizeInfo"===a.type}e=e(E,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",t.hitch(this,this._resetUpdateEndListeners));this.on("dfd-complete",
t.hitch(this,this._processFeatures));this.on("set-features",t.hitch(this,this._processFeatures))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners()},setFeatures:function(a){if(a&&a.length){this.clearFeatures();var c,d;a[0]instanceof u?d=a:c=a;c?this._updateFeatures(null,c):(this.deferreds=d,d=d.slice(0),b.forEach(d,function(a){a.addBoth(t.hitch(this,this._updateFeatures,a))},this))}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=
0;var a=this.selectedIndex;this.selectedIndex=-1;if(-1<a)this.onSelectionChange();this.onClearFeatures()},getSelectedFeature:function(){var a=this.features;if(a)return a[this.selectedIndex]},select:function(a){0>a||a>=this.count||(this.selectedIndex=a,this.onSelectionChange())},enableHighlight:function(a){this._highlighted=a.graphics.add(new h(new c(0,0,a.spatialReference)));this._highlighted.hide();this.markerSymbol||(a=this.markerSymbol=new m,a.setStyle(m.STYLE_TARGET),a._setDim(16,16,0),a.setOutline(new A(w.STYLE_SOLID,
new n([0,255,255]),2,A.CAP_ROUND,A.JOIN_ROUND)),a.setColor(new n([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new w(w.STYLE_SOLID,new n([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new x(x.STYLE_NULL,new w(w.STYLE_SOLID,new n([0,255,255]),2),new n([0,0,0,0])))},disableHighlight:function(a){var b=this._highlighted;b&&(b.hide(),a.graphics.remove(b),delete this._highlighted);this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var a=this.features&&this.features[this.selectedIndex];
this._highlighted&&(a&&a.geometry)&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},updateHighlight:function(b,c){var d=c.geometry,g=this._highlighted;if(!d||!g)g&&g.hide();else{g.hide();!g._graphicsLayer&&b&&b.graphics.add(g);g.setGeometry(a.fromJson(d.toJson()));var m;switch(d.type){case "point":case "multipoint":var e=c.getLayer(),d=c.symbol||e&&e._getSymbol(c);if(e&&d){var h,x,w=0,q=0,n=0;m=!c.symbol?e._getRenderer(c):null;if(e=this._getSizeInfo(m))h=
x=m.getSize(c,{sizeInfo:e,shape:d.style,resolution:b&&b.getResolutionInMeters&&b.getResolutionInMeters()});else switch(d.type){case "simplemarkersymbol":h=x=d.size||0;break;case "picturemarkersymbol":h=d.width||0,x=d.height||0}w=d.xoffset||0;q=d.yoffset||0;n=d.angle||0;m=this.markerSymbol;m.setOffset(0,0);m.setAngle(0);h&&x&&m._setDim(h+1,x+1,0);m.setOffset(w,q);m.setAngle(n)}break;case "polyline":m=this.lineSymbol;break;case "polygon":m=this.fillSymbol}g.setSymbol(m)}},showClosestFirst:function(a){var b=
this.features;if(b&&b.length){if(1<b.length){var c,m=Infinity,e=-1,h,x=d.getLength,w,q=a.spatialReference,n,s;a=a.normalize();for(c=b.length-1;0<=c;c--)if(h=b[c].geometry){n=h.spatialReference;w=0;try{s="point"===h.type?h:h.getExtent().getCenter(),s=s.normalize(),q&&(n&&!q.equals(n)&&q._canProject(n))&&(s=q.isWebMercator()?g.geographicToWebMercator(s):g.webMercatorToGeographic(s)),w=x(a,s)}catch(t){}0<w&&w<m&&(m=w,e=c)}0<e&&(b.splice(0,0,b.splice(e,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=
a)},_unbind:function(a){a=b.indexOf(this.deferreds,a);if(-1!==a)return this.deferreds.splice(a,1),!this.deferreds.length?(this.deferreds=null,2):1},_fireComplete:function(a){var b=this._marked;b&&(this._marked=null,this.showClosestFirst(b));this.onDfdComplete(a)},_updateFeatures:function(a,c){if(a){if(this.deferreds){var d=this._unbind(a);if(d)if(c&&c instanceof Error){if(this._fireComplete(c),2===d)this.onSetFeatures()}else if(c&&c.length)if(this.features){var g=b.filter(c,function(a){return-1===
b.indexOf(this.features,a)},this);this.features=this.features.concat(g);this.count=this.features.length;this._fireComplete();if(2===d)this.onSetFeatures()}else{this.features=c;this.count=c.length;this.selectedIndex=0;this._fireComplete();if(2===d)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),2===d)this.onSetFeatures()}}else this.features=c,this.count=c.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(a){return a?a.sizeInfo||b.filter(a.visualVariables,
F)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};b.forEach(this._updateEndHandles,function(a){a.remove()});this._updateEndHandles=[]},_processFeatures:function(){b.forEach(this.features,function(a){if((a=a.getLayer())&&!this._featureLayers[a.id]&&(1===a.currentMode||0===a.currentMode&&6===a.mode)&&a.objectIdField&&a.hasXYFootprint&&a.queryFeatures&&("esriGeometryPolygon"===a.geometryType||"esriGeometryPolyline"===a.geometryType||a.hasXYFootprint()))this._featureLayers[a.id]=
a,a=a.on("update-end",t.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(a)},this)},_fLyrUpdateEndHandler:function(a){if(!a.error){var c=this,d=a.target,g=d.getSelectedFeatures(),m=0===d.currentMode&&6===d.mode,e={},h=[];b.forEach(this.features,function(a){if(a.getLayer()===d){var b=a.attributes[d.objectIdField];e[b]=a;h.push(b)}});h.length&&(a=new C,a.objectIds=h,d.queryFeatures(a,function(a){b.forEach(a.features,function(a){var c=e[a.attributes[d.objectIdField]],h=!1;c.geometry!==
a.geometry?(c.setGeometry(a.geometry),h=!0):m&&(g&&-1!==b.indexOf(g,a))&&(h=!0);h&&(this._highlighted&&c===this.getSelectedFeature())&&this._highlighted.setGeometry(a.geometry)},c)}))}}});q("extend-esri")&&(s.PopupBase=e);return e})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship dojo/has!extend-esri?./QueryTask dojo/has!extend-esri?./RelationshipQuery dojo/has!extend-esri?./StatisticDefinition".split(" "),
function(e,t,b,n,u,q,s,h){var c=e(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=c.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",
kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(a){var d={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=a&&a.geometry||this.geometry,m=this.objectIds,e=this.outFields,h=this.outSpatialReference,x=this.groupByFieldsForStatistics,
q=this.orderByFields,t=this.outStatistics;a=this.distance;g&&(d.geometry=g,d.geometryType=s.getJsonType(g),d.inSR=g.spatialReference.wkid||n.toJson(g.spatialReference.toJson()));m&&(d.objectIds=m.join(","));e&&(d.outFields=e.join(","));this.returnDistinctValues&&(d.returnDistinctValues=!0);x&&(d.groupByFieldsForStatistics=x.join(","));q&&(d.orderByFields=q.join(","));if(t){var u=[];b.forEach(t,function(a){u.push(a.toJson())});d.outStatistics=n.toJson(u)}h?d.outSR=h.wkid||n.toJson(h.toJson()):g&&(d.outSR=
g.spatialReference.wkid||n.toJson(g.spatialReference.toJson()));g=this.timeExtent;d.time=g?g.toJson().join(","):null;if((g=this.relationParam)&&this.spatialRelationship===c.SPATIAL_REL_RELATION)d.relationParam=g;a&&(d.distance=this.distance,this.hasOwnProperty("units")?d.units=this._units[this.units]||this._units.meters:(console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),d.units=this._units.meters));this.hasOwnProperty("start")&&(d.resultOffset=this.start,d.resultRecordCount=
10,""===d.where&&(d.where="1\x3d1"));this.hasOwnProperty("num")&&(d.resultRecordCount=this.num);d.pixelSize=this.pixelSize?n.toJson(this.pixelSize.toJson()):null;d.multipatchOption=this.multipatchOption;this.quantizationParameters&&(d.quantizationParameters=n.toJson(this.quantizationParameters));d._ts=this._ts;return d}});t.mixin(c,h);u("extend-esri")&&t.setObject("tasks.Query",c,q);return c})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(e,
t,b){var n={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};t("extend-esri")&&e.setObject("tasks._SpatialRelationship",
n,b);return n})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(e){return{add:function(t,b){t.popupManager||(t.popupManager=new e(b),t.popupManager.setMap(t))},remove:function(e){var b=e.popupManager;b&&(b.unsetMap(),e.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/has dojo/on dojo/promise/all dojo/Stateful require".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A){var x;h=h(w,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(b){this._mapClickHandler=a.hitch(this,this._mapClickHandler)},setMap:function(a){if(this.map)if(a!==this.map)this.unsetMap();else return;this.map=a;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(a){var b;
if(a&&(b=a.getLayer()))if(a=b.id,this._featureLayersCache[a]){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.getLayer(a))}return b},_enabledSetter:function(a){this.enabled=a;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(a){var b=this.map.infoWindow,c=a.graphic;b&&this.map.loaded&&
(b.clearFeatures&&b.setFeatures?this._showPopup(a):c&&c.getInfoTemplate()&&this._showInfoWindow(c,a.mapPoint))},_showPopup:function(a){var b=this.map,d=b.infoWindow,g=this,m=[],h=[b.graphics].concat(s.map(b.graphicsLayerIds,b.getLayer,b));s.forEach(h,function(a){a&&(a.loaded&&a.infoTemplate&&!a.suspended)&&m.push(a)});var x=[];s.forEach(b.layerIds,function(a){(a=b.getLayer(a))&&(a.loaded&&!a.suspended)&&(g._isImageServiceLayer(a)&&a.infoTemplate?m.push(a):("esri.layers.ArcGISDynamicMapServiceLayer"===
a.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===a.declaredClass)&&a.infoTemplates&&x.push(a))});this._getSubLayerFeatureLayers(x).then(function(h){m=m.concat(h);h=null;a.graphic&&(a.graphic.getInfoTemplate()&&!g._isImageServiceLayer(a.graphic._layer))&&(h=a.graphic);if(m.length||h){var x=g._calculateClickTolerance(m),w=a.screenPoint,q=b.toMap(new t(w.x-x,w.y+x)),x=b.toMap(new t(w.x+x,w.y-x)),n=new e(q.x,q.y,x.x,x.y,b.spatialReference);if(n=n.intersects(b.extent)){var A=new u,D=!!h,L=!0,
q=s.map(m,function(d){var m;A.timeExtent=d.useMapTime?b.timeExtent:null;if(g._isImageServiceLayer(d))A.geometry=a.mapPoint,L=!1,m=d.queryVisibleRasters(A,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),m.addCallback(function(){var a=d.getVisibleRasters();D=D||0<a.length;return a});else if(g._featureLayersCache[d.id]||"function"===typeof d.queryFeatures&&(0===d.currentMode||1===d.currentMode))A.geometry=n,m=d.queryFeatures(A),m.addCallback(function(a){a=a.features;D=D||0<a.length;
return a});else{m=new c;var v=s.filter(d.graphics,function(a){return a&&a.visible&&n.intersects(a.geometry)});D=D||0<v.length;m.resolve(v)}return m});h&&(x=new c,x.resolve([h]),q.unshift(x));!s.some(q,function(a){return!a.isFulfilled()})&&!D?(d.hide(),d.clearFeatures()):(d.setFeatures(q),d.show(a.mapPoint,{closestFirst:L}))}}})},_getSubLayerFeatureLayers:function(a,b){var d=b||new c,e=[],h=a.length,w=Math.floor(this.map.extent.getWidth()/this.map.width),q=this.map.getScale(),t=!1,u=this,P=0;a:for(;P<
h;P++){var K=a[P],R=K.dynamicLayerInfos||K.layerInfos;if(R){var M=null;if(K._params&&(K._params.layers||K._params.dynamicLayers))M=K.visibleLayers;for(var M=n._getVisibleLayers(R,M),T=n._getLayersForScale(q,R),U=R.length,V=0;V<U;V++){var W=R[V],v=W.id,O=K.infoTemplates[v];if(!W.subLayerIds&&O&&O.infoTemplate&&-1<s.indexOf(M,v)&&-1<s.indexOf(T,v)){if(!x){t=!0;break a}var z=K.id+"_"+v,l=this._featureLayersCache[z];if(!l||!l.loadError)l||((l=O.layerUrl)||(l=W.source?this._getLayerUrl(K.url,"/dynamicLayer"):
this._getLayerUrl(K.url,v)),l=new x(l,{id:z,drawMode:!1,mode:x.MODE_SELECTION,outFields:this._getOutFields(O.infoTemplate),resourceInfo:O.resourceInfo,source:W.source}),this._featureLayersCache[z]=l),l.setDefinitionExpression(K.layerDefinitions&&K.layerDefinitions[v]),l.setGDBVersion(K.gdbVersion),l.setInfoTemplate(O.infoTemplate),l.setMaxAllowableOffset(w),l.setUseMapTime(!!K.useMapTime),K.layerDrawingOptions&&(K.layerDrawingOptions[v]&&K.layerDrawingOptions[v].renderer)&&l.setRenderer(K.layerDrawingOptions[v].renderer),
e.push(l)}}}}if(t){var f=new c;A(["./layers/FeatureLayer"],function(r){x=r;f.resolve()});f.then(function(){u._getSubLayerFeatureLayers(a,d)})}else{var r=[];s.forEach(e,function(f){if(!f.loaded){var a=new c;g.once(f,"load, error",function(){a.resolve()});r.push(a.promise)}});r.length?m(r).then(function(){e=s.filter(e,function(f){return!f.loadError&&f.isVisibleAtScale(q)});d.resolve(e)}):(e=s.filter(e,function(f){return f.isVisibleAtScale(q)}),d.resolve(e))}return d.promise},_getLayerUrl:function(a,
b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;a.info&&"esri.dijit.PopupTemplate"===a.declaredClass?(b=[],s.forEach(a.info.fieldInfos,function(a){var c=a.fieldName&&a.fieldName.toLowerCase();c&&("shape"!==c&&0!==c.indexOf("relationships/"))&&b.push(a.fieldName)})):b=["*"];return b},_calculateClickTolerance:function(a){var b=6,c,d;s.forEach(a,function(a){if(c=a.renderer)"esri.renderer.SimpleRenderer"===c.declaredClass?((d=c.symbol)&&
d.xoffset&&(b=Math.max(b,Math.abs(d.xoffset))),d&&d.yoffset&&(b=Math.max(b,Math.abs(d.yoffset)))):("esri.renderer.UniqueValueRenderer"===c.declaredClass||"esri.renderer.ClassBreaksRenderer"===c.declaredClass)&&s.forEach(c.infos,function(a){(d=a.symbol)&&d.xoffset&&(b=Math.max(b,Math.abs(d.xoffset)));d&&d.yoffset&&(b=Math.max(b,Math.abs(d.yoffset)))})});return b},_showInfoWindow:function(b,c){var d=this.map.infoWindow,g=b.geometry,g=g&&"point"===g.type?g:c,m=b.getContent();d.setTitle(b.getTitle());
if(m&&a.isString(m.id)){var e=q.byId(m.id);e&&(e.set&&/_PopupRenderer/.test(e.declaredClass))&&e.set("showTitle",!1)}d.setContent(m);d.show(g)},_isImageServiceLayer:function(a){return"esri.layers.ArcGISImageServiceLayer"===a.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===a.declaredClass}});d("extend-esri")&&(b.PopupManager=h);return h})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(e,t,b,n,u){var q={_serializeLayerDefinitions:function(e){var h=
[],c=!1,a=/[:;]/;if(e&&(t.forEach(e,function(b,d){b&&(h.push([d,b]),!c&&a.test(b)&&(c=!0))}),0<h.length)){var d;c?(d={},t.forEach(h,function(a){d[a[0]]=a[1]}),d=b.toJson(d)):(d=[],t.forEach(h,function(a){d.push(a[0]+":"+a[1])}),d=d.join(";"));return d}return null},_serializeTimeOptions:function(e,h){if(e){var c=[];t.forEach(e,function(a,d){if(a){var g=a.toJson();h&&-1!==t.indexOf(h,d)&&(g.useTime=!1);c.push('"'+d+'":'+b.toJson(g))}});if(c.length)return"{"+c.join(",")+"}"}},_getVisibleLayers:function(b,
e){var c=[],a,d,g;if(!b)return c;if(e){c=e.concat();for(g=0;g<b.length;g++)a=b[g],d=t.indexOf(b,a.id),a.subLayerIds&&-1<d&&(c.splice(d,1),c=c.concat(a.subLayerIds))}else c=this._getDefaultVisibleLayers(b);return c},_getDefaultVisibleLayers:function(b){var e=[],c;if(!b)return e;for(c=0;c<b.length;c++)0<=b[c].parentLayerId&&-1===t.indexOf(e,b[c].parentLayerId)&&t.some(b,function(a){return a.id===b[c].parentLayerId})||b[c].defaultVisibility&&e.push(b[c].id);return e},_getLayersForScale:function(b,e){var c=
[];if(0<b&&e){var a;for(a=0;a<e.length;a++)if(!(0<=e[a].parentLayerId&&-1===t.indexOf(c,e[a].parentLayerId)&&t.some(e,function(b){return b.id===e[a].parentLayerId}))&&0<=e[a].id){var d=!0,g=e[a].maxScale,m=e[a].minScale;if(0<g||0<m)0<g&&0<m?d=g<=b&&b<=m:0<g?d=g<=b:0<m&&(d=b<=m);d&&c.push(e[a].id)}}return c}};n("extend-esri")&&e.mixin(u,q);return q})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(e,t,b){var n=e.some;return function(e){var q,s;e instanceof
Array?s=e:e&&"object"===typeof e&&(q=e);var h,c=[];if(q){s=[];for(var a in q)Object.hasOwnProperty.call(q,a)&&(c.push(a),s.push(q[a]));h={}}else s&&(h=[]);if(!s||!s.length)return(new t).resolve(h);var d=new t;d.promise.always(function(){h=c=null});var g=s.length;n(s,function(a,e){q||c.push(e);b(a,function(a){d.isFulfilled()||(h[c[e]]=a,0===--g&&d.resolve(h))},d.reject);return d.isFulfilled()});return d.promise}})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff",
"./_base/window"],function(e,t,b,n,u){var q=u.doc.documentElement;u=n("ie");var s=n("opera"),h=Math.floor,c=n("ff"),a=e.boxModel.replace(/-/,""),s={dj_quirks:n("quirks"),dj_opera:s,dj_khtml:n("khtml"),dj_webkit:n("webkit"),dj_safari:n("safari"),dj_chrome:n("chrome"),dj_gecko:n("mozilla"),dj_ios:n("ios"),dj_android:n("android")};u&&(s.dj_ie=!0,s["dj_ie"+h(u)]=!0,s.dj_iequirks=n("quirks"));c&&(s["dj_ff"+h(c)]=!0);s["dj_"+a]=!0;var d="",g;for(g in s)s[g]&&(d+=g+" ");q.className=t.trim(q.className+" "+
d);b(function(){if(!e.isBodyLtr()){var a="dj_rtl dijitRtl "+d.replace(/ /g,"-rtl ");q.className=t.trim(q.className+" "+a+"dj_rtl dijitRtl "+d.replace(/ /g,"-rtl "))}});return n})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L){var D=n.connect,G=n.disconnect,N=m("chrome"),P=m("safari"),K=[s.NUMPAD_PLUS,61,187,s.NUMPAD_MINUS,173,189,s.UP_ARROW,s.NUMPAD_8,s.RIGHT_ARROW,s.NUMPAD_6,s.DOWN_ARROW,s.NUMPAD_2,s.LEFT_ARROW,s.NUMPAD_4,s.PAGE_UP,s.NUMPAD_9,s.PAGE_DOWN,s.NUMPAD_3,s.END,s.NUMPAD_1,s.HOME,s.NUMPAD_7];e=e(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(b,e){this.map=b;t.mixin(this,e);var h=b.__container;m("esri-pointer")?(this.pointerEvents=
new d(h,{map:b}),this.eventModel="pointer"):m("esri-touch")?(m("ios")||(this.mouseEvents=new c(h,{map:b})),this.touchEvents=new a(h,{map:b,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new c(h,{map:b}),this.eventModel="mouse");this._zoomRect=new x(null,new L(g.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=t.hitch(this,this._adjustPinch);this._adjustPinchEnd=t.hitch(this,this._adjustPinchEnd)},_panInit:function(a){var b=this.mouseEvents;q.isLeft(a)&&
(this.map.isPan&&!a.shiftKey)&&(this._dragOrigin=new E(0,0),t.mixin(this._dragOrigin,a.screenPoint),this._panStartHandle=D(b,"onMouseDragStart",this,this._panStart),this._panHandle=D(b,"onMouseDrag",this,this._pan),this._panEndHandle=D(b,"onMouseUp",this,this._panEnd),(N||P)&&a.preventDefault())},_panStart:function(a){this.map.setCursor("move");this.map.__panStart(a.screenPoint.x,a.screenPoint.y)},_pan:function(a){this.map.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)},
_panEnd:function(a){G(this._panStartHandle);G(this._panHandle);G(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var b=this.map;b.__panning&&(b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y),b.resetMapCursor())},_zoomInit:function(a){var b=this.map,c=this.pointerEvents||this.mouseEvents;if((q.isLeft(a)||a.pointerType)&&b.isRubberBandZoom&&a.shiftKey)b.setCursor("crosshair"),this._dragOrigin=t.mixin({},a.screenPoint),this._zoomDir=a.ctrlKey||
a.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=D(c,"onSwipeMove",this,this._zoom),this._zoomEndHandle=D(c,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=D(c,"onMouseDrag",this,this._zoom),this._zoomEndHandle=D(c,"onMouseUp",this,this._zoomEnd)),N&&a.preventDefault()},_zoom:function(a){var b=this.map,c=this._normalizeRect(a).offset(b.__visibleRect.x,b.__visibleRect.y);a=b.graphics;var d=this._zoomRect;d.geometry||b.setCursor("crosshair");d.geometry&&a.remove(d,!0);var g=b.toMap(new E(c.x,
c.y)),c=b.toMap(new E(c.x+c.width,c.y+c.height)),c=new y(g.x,g.y,c.x-g.x,g.y-c.y,b.spatialReference);c._originOnly=!0;d.setGeometry(c);a.add(d,!0)},_zoomEnd:function(a){var b=this._zoomRect,c=this.map,d=c.extent,g=c.spatialReference;G(this._zoomHandle);G(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(c._canZoom(this._zoomDir)&&b.getDojoShape()){c.graphics.remove(b);b.geometry=null;a=this._normalizeRect(a);a.x+=c.__visibleRect.x;a.y+=c.__visibleRect.y;if(-1===this._zoomDir){var m=
d.getWidth();a=(m*c.width/a.width-m)/2;g=new F(d.xmin-a,d.ymin-a,d.xmax+a,d.ymax+a,g)}else d=c.toMap({x:a.x,y:a.y+a.height}),a=c.toMap({x:a.x+a.width,y:a.y}),g=new F(d.x,d.y,a.x,a.y,g);c._extentUtil(null,null,g)}b.getDojoShape()&&c.graphics.remove(b,!0);this._zoomDir=0;c.resetMapCursor()},_wheelZoom:function(a,b){var c=this.map;if(!b){if(c.smartNavigation&&!a.shiftKey&&!c._isPanningOrZooming()){c.disableScrollWheelZoom();this._setScrollWheelPan(!0);this._wheelPan(a);return}var d=a.timeStamp;if(!w.isDefined(d)||
0>=d)d=(new Date).getTime();if(100>(this._mwts?d-this._mwts:d))return;this._mwts=d}c._canZoom(a.value)&&c._extentUtil({numLevels:a.value,mapAnchor:a.mapPoint,screenAnchor:a.screenPoint})},_wheelPan:function(a){var b=this.map;if(a.shiftKey&&!b._isPanningOrZooming())this._setScrollWheelPan(!1),b.enableScrollWheelZoom(),this._wheelZoom(a);else{var c=0,d=0;m("ff")?a.axis===a.HORIZONTAL_AXIS?c=-a.detail:d=-a.detail:(c=a.wheelDeltaX,d=a.wheelDeltaY);b.translate(c,d)}},_setScrollWheelPan:function(a){this.map.isScrollWheelPan=
a;this.mouseEvents.enableMouseWheel(a);G(this._mwMacHandle);this._mwMacHandle=null;a&&(this._mwMacHandle=D(this.mouseEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(a.mapPoint)},_recenterZoom:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&(a.value=a.ctrlKey||a.metaKey?-1:1,this._wheelZoom(a,!0))},_dblClickZoom:function(a){this.map._isPanningOrZooming()||(a.value=1,this._wheelZoom(a,!0))},_twoFingerTap:function(a){this.map._isPanningOrZooming()||
(a.value=-1,this._wheelZoom(a,!0))},_keyDown:function(a){var c=a.keyCode,d=this.map;if(-1!==b.indexOf(K,c)){if(c===s.NUMPAD_PLUS||61===c||187===c)d._extentUtil({numLevels:1});else if(c===s.NUMPAD_MINUS||173===c||189===c)d._extentUtil({numLevels:-1});else{d.__panning||d.__panStart(0,0);switch(c){case s.UP_ARROW:case s.NUMPAD_8:this._keyDy+=10;break;case s.RIGHT_ARROW:case s.NUMPAD_6:this._keyDx-=10;break;case s.DOWN_ARROW:case s.NUMPAD_2:this._keyDy-=10;break;case s.LEFT_ARROW:case s.NUMPAD_4:this._keyDx+=
10;break;case s.PAGE_UP:case s.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case s.PAGE_DOWN:case s.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case s.END:case s.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case s.HOME:case s.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}d.__pan(this._keyDx,this._keyDy)}u.stop(a)}},_keyEnd:function(a){var b=this.map;b.__panning&&a.keyCode!==s.SHIFT&&(b.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(a){var b=
this.map,b=b._zoomAnim||b._panAnim;if(a.shiftKey)return!1;b&&b._active&&(b.stop(),b._fire("onEnd",[b.node]));this._dragOrigin=new E(0,0);t.mixin(this._dragOrigin,a.screenPoint);G(this._swipeHandle);G(this._swipeEndHandle);this._swipeHandle=D(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=D(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd)},_swipe:function(a){var b=this.map;b.__panning?(this._panX=a.screenPoint.x,this._panY=a.screenPoint.y,
b.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)):(b.setCursor("move"),b.__panStart(a.screenPoint.x,a.screenPoint.y))},_swipeEnd:function(a){G(this._swipeHandle);G(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var b=this.map;b.__panning&&(b.resetMapCursor(),b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y))},_pinchInit:function(a){var b=this.map,c=b._zoomAnim||b._panAnim;c&&c._active?(c.stop(),c._fire("onEnd",[c.node])):
b.__panning&&(a.screenPoint=new E(this._panX,this._panY),a.mapPoint=b.toMap(a.screenPoint),this._swipeEnd(a));G(this._pinchHandle);G(this._pinchEndHandle);this._pinchHandle=D(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=D(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(a){var b=this.map;a.screenPoints&&(this.currLength=I.getLength(a.screenPoints[0],a.screenPoints[1]),b.__zooming?(a=this.currLength/this._length,this._zoomStartExtent=
this.__scaleExtent(b.extent,a,this._dragOrigin),b.__zoom(this._zoomStartExtent,a,this._dragOrigin)):(this._dragOrigin=new E((a.screenPoints[0].x+a.screenPoints[1].x)/2,(a.screenPoints[0].y+a.screenPoints[1].y)/2),this._length=this.currLength,b.__zoomStart(b.extent,this._dragOrigin)),b._fireOnScale(this.currLength/this._length,this._dragOrigin,!0))},_pinchEnd:function(a){a=this.map;G(this._pinchHandle);G(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;if(a.__zooming&&null===a._zoomAnim){var b=
this.currLength/this._length,c=a.extent.getWidth();this._zoomAnimAnchor=a.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor);if(a.__tileInfo){var d=C.getCandidateTileInfo(a,a.__tileInfo,this._zoomStartExtent),m=a.__getExtentForLevel(d.lod.level,this._zoomAnimAnchor),e=a.getMinZoom(),v=a.getMaxZoom(),h=m.extent,m=m.lod,z=c/h.getWidth(),l=d.lod.level;1>b?z>b&&l--:z<b&&l++;l<e?l=e:l>v&&(l=v);l!==d.lod.level&&(m=a.__getExtentForLevel(l,this._zoomAnimAnchor),
h=m.extent,m=m.lod);this._zoomEndExtent=h;this._zoomEndLod=m;a._zoomAnim=A.animateRange({range:{start:c/this._zoomStartExtent.getWidth(),end:z},duration:g.defaults.map.zoomDuration,rate:g.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});a._zoomAnim.play();a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),
this._adjustPinchEnd()}},_adjustPinch:function(a){var b=this.__scaleExtent(this.map.extent,a,this._zoomAnimAnchor);this.map.__zoom(b,a,this._dragOrigin)},_adjustPinchEnd:function(){var a=this.map,b=a.extent.getWidth()/this._zoomEndExtent.getWidth(),c=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor),d=this._dragOrigin,g=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=a._zoomAnim=this._zoomAnimAnchor=null;a.__zoomEnd(c,b,d,g,!0)},__scaleExtent:function(a,
b,c){c=c||a.getCenter();b=a.expand(b);var d=a.xmin-(b.getWidth()-a.getWidth())*(c.x-a.xmin)/a.getWidth();c=a.ymax-(b.getHeight()-a.getHeight())*(c.y-a.ymax)/a.getHeight();return new F(d,c-b.getHeight(),d+b.getWidth(),c,a.spatialReference)},_normalizeRect:function(a){a=a.screenPoint;var b=this._dragOrigin.x,c=this._dragOrigin.y;a=new y((a.x<b?a.x:b)-this.map.__visibleRect.x,(a.y<c?a.y:c)-this.map.__visibleRect.y,Math.abs(a.x-b),Math.abs(a.y-c));delete a.spatialReference;0===a.width&&(a.width=1);0===
a.height&&(a.height=1);return a},setImmediateClick:function(a){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(a);break;case "touch":this.touchEvents.setImmediateTap(a);this.mouseEvents&&this.mouseEvents.setImmediateClick(a);break;case "pointer":this.pointerEvents.setImmediateTap(a)}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=D(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=D(this.mouseEvents,
"onMouseDown",this,this._panInit);this._swipeInitHandle=D(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=D(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){G(this._panInitHandle);this._panInitHandle=null;G(this._swipeInitHandle);this._swipeInitHandle=null},enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?D(this.pointerEvents,"onSwipeStart",this,this._zoomInit):D(this.mouseEvents,
"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){G(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=D(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},disablePinchZoom:function(){G(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=D(this.mouseEvents||
this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){G(this._wheelHandle);this._wheelHandle=null},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=D(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=D(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=D(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=
D(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=D(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=D(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){G(this._dblClickHandle);G(this._zoomOutHandle);this._dblTapHandle&&G(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();
this._sDblClickHandle=D(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},disableShiftDoubleClickZoom:function(){G(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=D(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){G(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=
D(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=D(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){G(this._keyHandle);G(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableNavigation:function(){var a=this.map;a&&a.loaded&&(a.enableDoubleClickZoom(),a.enableClickRecenter(),a.enablePan(),a.enableRubberBandZoom(),this.enablePinchZoom(),a.enableKeyboardNavigation(),a.smartNavigation?this._setScrollWheelPan(!0):
a.enableScrollWheelZoom())},disableNavigation:function(){var a=this.map;a&&a.loaded&&(a.disableDoubleClickZoom(),a.disableClickRecenter(),a.disablePan(),a.disableRubberBandZoom(),this.disablePinchZoom(),a.disableKeyboardNavigation(),a.disableScrollWheelZoom(),a.smartNavigation&&this._setScrollWheelPan(!1))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var a,b=[this._panInitHandle,this._panStartHandle,
this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(a=0;a<b.length;a++)G(b[a]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=
this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});m("extend-esri")&&(h.MapNavigationManager=e);return e})},
"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(e,t,b,n,u,q,s,h,c,a){var d=u.connect,g=u.disconnect;e=e([h],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==n("mac")?1:3,wheelDivisor:2>n("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(a,c){this.node=
a;b.mixin(this,c);var g=function(a){q.stop(a);return!1};n("mozilla")&&t.style(a,"MozUserSelect","none");this._handles=[d(a,"onselectstart",g),d(a,"ondragstart",g),d(a,"onmouseenter",this,this._onMouseEnterHandler),d(a,"onmouseleave",this,this._onMouseLeaveHandler),d(a,"onmousedown",this,this._onMouseDownHandler),d(a,"onclick",this,this._onClickHandler),d(a,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=d(a,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=
d(a,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=b.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(g=this.map)?g.isScrollWheelZoom||g.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(a,b){if(!this._preventClick||!("onClick"===a||"onDblClick"===a)){if(this[a])this[a](b);if(this.map&&this.map[a])this.map[a](b)}},_processEvent:function(b){b=q.fix(b,b.target);var d=this.map,g=d&&d.position;g&&("DOMMouseScroll"===
b.type&&3>n("ff")?b.screenPoint=new a(window.scrollX+b.screenX-g.x,window.scrollY+b.screenY-g.y):b.screenPoint=new a(b.pageX-g.x,b.pageY-g.y),b.mapPoint=d.extent?d.toMap(b.screenPoint):new c);b.numPoints=0;return b},_onMouseEnterHandler:function(a){g(this._onKeyDown_connect);g(this._onKeyUp_connect);this._onKeyDown_connect=d(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=d(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(a))},_onMouseLeaveHandler:function(a){g(this._onKeyDown_connect);
g(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(a))},_onMouseMoveHandler:function(a){this._dragEnd?this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(a))},_onMouseDownHandler:function(a){g(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);g(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=d(document,"onmousemove",this,this._onMouseDragHandler);
this._startX=a.pageX;this._startY=a.pageY;this._fire("onMouseDown",this._processEvent(a))},_onMouseUpHandler:function(a){var b=this.node;b.releaseCapture&&b.releaseCapture();g(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;g(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=d(b,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(a))},_onMouseDragHandler:function(a){g(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=
d(document,"onmousemove",this,this._onMouseDraggingHandler);g(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=d(document,"onmouseup",this,this._onDragMouseUpHandler);this._docLeaveConnect=d(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(a))},_onMouseDraggingHandler:function(a){q.stop(a);this._fire("onMouseDrag",this._processEvent(a))},_onDragMouseUpHandler:function(a){var b=this.node;b.releaseCapture&&b.releaseCapture();this._dragEnd=
!0;g(this._docLeaveConnect);g(this._onMouseDragHandler_connect);g(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=d(b,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=d(b,"onmouseup",this,this._onMouseUpHandler);a=this._processEvent(a);this._fire("onMouseDragEnd",a);this._fire("onMouseUp",a)},_onDocMouseOut:function(a){var b=9>n("ie")?a.toElement:a.relatedTarget,c=b&&b.nodeName.toLowerCase();(!b||
n("chrome")&&"html"===c)&&this._onDragMouseUpHandler(a)},_onClickHandler:function(a){a=this._processEvent(a);if(!(a.pageX!==this._startX||a.pageY!==this._startY)){clearTimeout(this._clickTimer);var b={},c="movementX"in a,d;for(d in a)if(!c||"webkitMovementX"!==d&&"webkitMovementY"!==d)b[d]=a[d];this._clickEvent=b;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>n("ie")&&(this._clickEvent.graphic=s._ieGraphic,delete s._ieGraphic);
this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(a){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(a))},_onMouseWheelHandler:function(a){var b=this.map;(b?b.isScrollWheelZoom||b.isScrollWheelPan:this.preventPageScroll)&&q.stop(a);var b=n("ff")||n("mozilla")?-a.detail/this.mozWheelDivisor:a.wheelDelta/this.wheelDivisor,c=Math.abs(b),c=c<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;a.value=0>b?-c:c;this._fire("onMouseWheel",this._processEvent(a))},
_onKeyDownHandler:function(a){this._fire("onKeyDown",a)},_onKeyUpHandler:function(a){this._fire("onKeyUp",a)},enableMouseWheel:function(a){g(this._scrollHandle);this._scrollHandle=d(this.node,n("ff")||n("mozilla")?a?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(a){this.doubleClickDuration=a?0:this._initialDuration},preventClickEvents:function(a){this._preventClick=a},destroy:function(){var a=this._handles.concat([this._onMouseMoveHandler_connect,
this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),b;for(b=0;b<a.length;b++)g(a[b]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});n("extend-esri")&&(s.MouseEvents=e);return e})},
"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(e,t,b,n,u,q,s,h){e.byId=t.byId;e.isDescendant=t.isDescendant;e.setSelectable=t.setSelectable;e.getAttr=n.get;e.setAttr=n.set;e.hasAttr=n.has;e.removeAttr=n.remove;e.getNodeProp=n.getNodeProp;e.attr=function(b,a,d){return 2==arguments.length?n["string"==typeof a?"get":"set"](b,a):n.set(b,a,d)};e.hasClass=q.contains;e.addClass=q.add;e.removeClass=
q.remove;e.toggleClass=q.toggle;e.replaceClass=q.replace;e._toDom=e.toDom=s.toDom;e.place=s.place;e.create=s.create;e.empty=function(b){s.empty(b)};e._destroyElement=e.destroy=function(b){s.destroy(b)};e._getPadExtents=e.getPadExtents=h.getPadExtents;e._getBorderExtents=e.getBorderExtents=h.getBorderExtents;e._getPadBorderExtents=e.getPadBorderExtents=h.getPadBorderExtents;e._getMarginExtents=e.getMarginExtents=h.getMarginExtents;e._getMarginSize=e.getMarginSize=h.getMarginSize;e._getMarginBox=e.getMarginBox=
h.getMarginBox;e.setMarginBox=h.setMarginBox;e._getContentBox=e.getContentBox=h.getContentBox;e.setContentSize=h.setContentSize;e._isBodyLtr=e.isBodyLtr=h.isBodyLtr;e._docScroll=e.docScroll=h.docScroll;e._getIeDocumentElementOffset=e.getIeDocumentElementOffset=h.getIeDocumentElementOffset;e._fixIeBiDiScrollLeft=e.fixIeBiDiScrollLeft=h.fixIeBiDiScrollLeft;e.position=h.position;e.marginBox=function(b,a){return a?h.setMarginBox(b,a):h.getMarginBox(b)};e.contentBox=function(b,a){return a?h.setContentSize(b,
a):h.getContentBox(b)};e.coords=function(c,a){e.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");c=t.byId(c);var d=b.getComputedStyle(c),d=h.getMarginBox(c,d),g=h.position(c,a);d.x=g.x;d.y=g.y;return d};e.getProp=u.get;e.setProp=u.set;e.prop=function(b,a,d){return 2==arguments.length?u["string"==typeof a?"get":"set"](b,a):u.set(b,a,d)};e.getStyle=b.get;e.setStyle=b.set;e.getComputedStyle=b.getComputedStyle;e.__toPixelValue=e.toPixelValue=b.toPixelValue;e.style=function(c,a,d){switch(arguments.length){case 1:return b.get(c);
case 2:return b["string"==typeof a?"get":"set"](c,a)}return b.set(c,a,d)};return e})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(e,t,b,n,u,q,s,h,c){e=e([s],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(a,c){this.node=a;b.mixin(this,c);t.setSelectable(a,!1);
this._touchStart=b.hitch(this,this._touchStart);this._touchMove=b.hitch(this,this._touchMove);this._touchEnd=b.hitch(this,this._touchEnd);this._touchCancel=b.hitch(this,this._touchCancel);a.addEventListener("touchstart",this._touchStart,!1);a.addEventListener("touchmove",this._touchMove,!1);a.addEventListener("touchend",this._touchEnd,!1);a.addEventListener("touchcancel",this._touchCancel,!1);this.map&&n("ios")&&(this._mouseOver=b.hitch(this,this._mouseOver),this._mouseOut=b.hitch(this,this._mouseOut),
this._mouseDown=b.hitch(this,this._mouseDown),this._mouseUp=b.hitch(this,this._mouseUp),this._mouseClick=b.hitch(this,this._mouseClick),a.addEventListener("mouseover",this._mouseOver,!1),a.addEventListener("mouseout",this._mouseOut,!1),a.addEventListener("mousedown",this._mouseDown,!1),a.addEventListener("mouseup",this._mouseUp,!1),a.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(a){var b=
this._touches,c,e=a.changedTouches.length,h,q,x,s,t=(new Date).getTime();if(!n("android")||!n("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&b[a.changedTouches[0].identifier])){this._addTouch(a);for(c=0;c<e;c++)h=a.changedTouches[c],q=b[h.identifier]={},q.startX=h.pageX,q.startY=h.pageY,q.startTS=t,-1===this._touchIds.indexOf(h.identifier)&&this._touchIds.push(h.identifier);this._swipeActive&&
(x=this._nodeTouches[0]);this._pinchActive&&(s=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,x))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[x,s]))):2===this._numTouches?this._swipeActive&&(x&&(q=b[this._touchIds[0]],q.startX=x.pageX,q.startY=x.pageY,q.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,x))):this._swipeActive?(this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(a,x))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[x,s])))}},_touchMove:function(a){a.preventDefault();this._updateTouch(a);var b=this._touches,c,e=a.changedTouches.length,h,q,x,s;if(!n("android")||!n("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&b[a.changedTouches[0].identifier]&&
1<this._touchIds.length)){for(c=0;c<e;c++)if(h=a.changedTouches[c],q=b[h.identifier]){x=Math.abs(h.pageX-q.startX);h=Math.abs(h.pageY-q.startY);if(!q.moved&&(x>=this.tapRadius||h>=this.tapRadius))q.moved=q.absMoved=!0;s=s?s:q.moved}1===this._numTouches?(c=a.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(a,c)):s&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(a,c)))):2===this._numTouches&&(c=this._nodeTouches[0],e=this._nodeTouches[1],
this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(a,[c,e])):s&&(s=b[c.identifier],q=b[e.identifier],b=Math.abs(s.startX-q.startX),s=Math.abs(s.startY-q.startY),b=Math.sqrt(b*b+s*s),s=Math.abs(c.pageX-e.pageX),q=Math.abs(c.pageY-e.pageY),s=Math.sqrt(s*s+q*q),Math.abs(s-b)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(a,[c,e])))))}},_touchEnd:function(a){this._removeTouch(a);var b=this._touches,c=a.changedTouches,e,h=c.length,q,x,n=(new Date).getTime(),
s=this._touchIds;for(e=0;e<h;e++)if(x=b[c[e].identifier])x.absMoved&&(q=!0),x.pageX=c[e].pageX,x.pageY=c[e].pageY,x.endTS=n;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,c[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,c));else{if(!q){h=Infinity;q=-Infinity;var n=Infinity,t=-Infinity,y=this.tapStartTolerance,u=[],L=!0;for(e=0;e<s.length;e++)x=
b[s[e]],u.push(x),x.startTS<h&&(h=x.startTS),x.startTS>q&&(q=x.startTS),x.endTS<n&&(n=x.endTS),x.endTS>t&&(t=x.endTS),delete b[s[e]];if(1===u.length&&c[0]&&(b=Math.abs(c[0].pageX-u[0].startX),c=Math.abs(c[0].pageY-u[0].startY),b>=this.tapRadius||c>=this.tapRadius))L=!1;L&&(Math.abs(q-h)<=y&&Math.abs(t-n)<=y)&&this._basicTap(a,u)}}else 1===this._numTouches&&this._pinchActive&&(e=this._nodeTouches[0],x=b[e.identifier],x.startX=e.pageX,x.startY=e.pageY,this._pinchActive=x.moved=!1,this._fire("onPinchEnd",
this._processTouchEvent(a,[c[0],e])))},_touchCancel:function(a){this._numTouches&&this._touchEnd(a)},_basicTap:function(a,b){var c=(new Date).getTime(),e=this;a=this._processTouchEvent(a,b);this._taps.push({touchInfos:b,ts:c,event:a});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",a);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var a=e;e=null;clearTimeout(a._tapTimer);a._analyzeTap()},2===this._taps.length?this.doubleTapDuration/
2:this.doubleTapDuration)},_analyzeTap:function(a){var b=this._taps,c=b[0],e=b[1],h=c.touchInfos,q=e&&e.touchInfos;b.length&&(a||(this._taps=[]),c&&e?h.length===q.length?e.ts-c.ts<=this.doubleTapDuration?(1===h.length?(a=Math.abs(h[0].startX-q[0].startX),h=Math.abs(h[0].startY-q[0].startY),h=a<=this.doubleTapRadius&&h<=this.doubleTapRadius):h=!0,h?this._processedDoubleTap(b):this._processedTap(e)):this._processedTap(e):this._processedTap(e):this._processedTap(c||e))},_processedTap:function(a){var b=
a.event;this._fire("onProcessedTap",b);1===a.touchInfos.length?this._fire("onTap",this._fixEvent(b)):2===a.touchInfos.length&&this._fire("onTwoFingerTap",b)},_processedDoubleTap:function(a){var b=1===a[1].touchInfos.length,c;b&&(c=[this._fixEvent(a[0].event),this._fixEvent(a[1].event)],c[1].relatedEvents=c);a=[a[0].event,a[1].event];a[1].relatedEvents=a;this._fire("onProcessedDoubleTap",a[1]);b&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",c[1]))},_addTouch:function(a){var b=a.changedTouches,
c=this._nodeTouches,e,h,q;this._numTouches+=b.length;for(a=0;a<b.length;a++){h=c.length;q=!1;for(e=0;e<h&&!(q=c[e].identifier===b[a].identifier);e++);q?this._numTouches--:c.push(b[a])}for(a=c.length-1;0<=a;a--)u.isDescendant(c[a].target,document.body)||(c.splice(a,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(a){var b=[],c=[],e=a.changedTouches,h=this._nodeTouches;this._numTouches-=e.length;0>this._numTouches&&(this._numTouches=0);for(a=0;a<e.length;a++)b.push(e[a].identifier);
for(a=h.length-1;0<=a;a--)-1!==b.indexOf(h[a].identifier)&&c.push(h.splice(a,1)[0]);return c},_updateTouch:function(a){var b=[],c,e=a.changedTouches,h=this._nodeTouches;for(a=0;a<e.length;a++)b.push(e[a].identifier);for(a=0;a<h.length;a++)c=b.indexOf(h[a].identifier),-1!==c&&h.splice(a,1,e[c])},_mouseOver:function(a){this._fire("onMouseOver",this._processMouseEvent(a))},_mouseOut:function(a){this._fire("onMouseOut",this._processMouseEvent(a))},_mouseDown:function(a){this._fire("onMouseDown",this._processMouseEvent(a))},
_mouseUp:function(a){this._fire("onMouseUp",this._processMouseEvent(a))},_mouseClick:function(a){this._fire("onClick",this._processMouseEvent(a))},_fire:function(a,b){if("onDblClick"===a&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var c=this;setTimeout(function(){c.mouseEvents.preventClickEvents(!1)},350)}if(this[a])this[a](b);if(this.map&&this.map[a])this.map[a](b)},_fixEvent:function(a){var b={},c;for(c in a)b[c]=a[c];this.map&&(b.screenPoint=b.screenPoints[0],b.mapPoint=b.mapPoints[0]);
return b},_processTouchEvent:function(a,d){var g=this.map,e=g&&g.position,q=0;if(e&&d)if(b.isArray(d)){var n,x;a.screenPoints=[];a.mapPoints=[];for(n=0;n<d.length;n++)d[n]?(x=new c(d[n].pageX-e.x,d[n].pageY-e.y),a.screenPoints.push(x),a.mapPoints.push(g.extent?g.toMap(x):new h)):q++}else a.screenPoint=new c(d.pageX-e.x,d.pageY-e.y),a.mapPoint=g.extent?g.toMap(a.screenPoint):new h;a.numPoints=d?b.isArray(d)?d.length-q:1:0;return a},_processMouseEvent:function(a){var b=this.map,g=b&&b.position;g&&(a.screenPoint=
new c(a.pageX-g.x,a.pageY-g.y),a.mapPoint=b.extent?b.toMap(a.screenPoint):new h);return a},setImmediateTap:function(a){this._immediate=a},destroy:function(){var a=this.node;a.removeEventListener("touchstart",this._touchStart,!1);a.removeEventListener("touchmove",this._touchMove,!1);a.removeEventListener("touchend",this._touchEnd,!1);a.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(a.removeEventListener("mouseover",this._mouseOver,!1),a.removeEventListener("mouseout",this._mouseOut,
!1),a.removeEventListener("mousedown",this._mouseDown,!1),a.removeEventListener("mouseup",this._mouseUp,!1),a.removeEventListener("click",this._mouseClick,!1));t.setSelectable(a,!0);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null}});n("extend-esri")&&(q.TouchEvents=e);return e})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(e,t,b,n,u,q,s,h){e=e([q],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==n("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(b,a){this.node=b;t.mixin(this,a);void 0!==b.style.msTouchAction?b.style.msTouchAction="none":void 0!==b.style.touchAction&&(b.style.touchAction="none");var d=navigator.msPointerEnabled,g=function(a){a.preventDefault()};
b.addEventListener("selectstart",g,!1);b.addEventListener("dragstart",g,!1);this._pointerDown=t.hitch(this,this._pointerDown);this._pointerMove=t.hitch(this,this._pointerMove);this._pointerUp=t.hitch(this,this._pointerUp);this._pointerCancel=t.hitch(this,this._pointerCancel);b.addEventListener(d?"MSPointerDown":"pointerdown",this._pointerDown,!1);b.addEventListener(d?"MSPointerMove":"pointermove",this._pointerMove,!1);b.addEventListener(d?"MSPointerUp":"pointerup",this._pointerUp,!1);b.addEventListener(d?
"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=t.hitch(this,this._mouseOver),this._mouseOut=t.hitch(this,this._mouseOut),this._mouseLeave=t.hitch(this,this._mouseLeave),this._mouseDown=t.hitch(this,this._mouseDown),this._mouseUp=t.hitch(this,this._mouseUp),this._mouseClick=t.hitch(this,this._mouseClick),this._mouseWheel=t.hitch(this,this._mouseWheel),this._mouseMove=t.hitch(this,this._mouseMove),this._mouseEnter=t.hitch(this,this._mouseEnter),this._onKeyDown=
t.hitch(this,this._onKeyDown),this._onKeyUp=t.hitch(this,this._onKeyUp),b.addEventListener("mouseover",this._mouseOver,!1),b.addEventListener("mouseout",this._mouseOut,!1),b.addEventListener("mouseleave",this._mouseLeave,!1),b.addEventListener("mousedown",this._mouseDown,!1),b.addEventListener("mouseup",this._mouseUp,!1),b.addEventListener("click",this._mouseClick,!1),b.addEventListener("mousewheel",this._mouseWheel,!1),b.addEventListener("mousemove",this._mouseMove,!1),b.addEventListener("mouseenter",
this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(c){if(-1<b.indexOf(this._touchIds,c.pointerId))this._pointerUp(c);else{var a=this._touches,d=c.target,g=c.pointerId,e=this._touchIds,h,q=(new Date).getTime();h=a[g]={};h.pointerId=g;h.startX=h.pageX=c.pageX;h.startY=h.pageY=c.pageY;h.startTS=q;e.push(g);this._numTouches++;d.setPointerCapture?d.setPointerCapture(g):d.msSetPointerCapture&&d.msSetPointerCapture(g);d=a[e[0]];
a=a[e[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(d&&(d.startX=d.pageX,d.startY=d.pageY,d.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,d))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,d))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,[d,a]))))}},_pointerMove:function(b){var a=this._touches,d=this._touchIds,g,e,h;if((g=a[b.pointerId])&&!(g.pageX===
b.pageX&&g.pageY===b.pageY)){g.pageX=b.pageX;g.pageY=b.pageY;e=Math.abs(g.pageX-g.startX);h=Math.abs(g.pageY-g.startY);if(!g.moved&&(e>=this.tapRadius||h>=this.tapRadius))g.moved=g.absMoved=!0;if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(b,b)):g.moved&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(b,b)));else if(2===this._numTouches)if(g=a[d[0]],a=a[d[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(b,[g,
a]));else if(g.moved||a.moved)d=Math.abs(g.startX-a.startX),e=Math.abs(g.startY-a.startY),d=Math.sqrt(d*d+e*e),e=Math.abs(g.pageX-a.pageX),h=Math.abs(g.pageY-a.pageY),e=Math.sqrt(e*e+h*h),Math.abs(e-d)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(b,[g,a])))}},_pointerUp:function(c){var a=this._touches,d,g=this.node,e=c.target,h=c.pointerId,q=this._touchIds,x=q.slice(0),n=b.map(x,function(b){return a[b]}),s=(new Date).getTime();if(d=a[h])if(d.pageX=c.pageX,
d.pageY=c.pageY,d.endTS=s,this._numTouches--,e.releasePointerCapture?e.releasePointerCapture(h):e.msReleasePointerCapture&&e.msReleasePointerCapture(h),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(c,c));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,c));else{if(!d.absMoved){var e=Infinity,h=-Infinity,q=Infinity,s=-Infinity,t=this.tapStartTolerance,
y;for(y=0;y<x.length;y++)d=n[y],d.startTS<e&&(e=d.startTS),d.startTS>h&&(h=d.startTS),d.endTS<q&&(q=d.endTS),d.endTS>s&&(s=d.endTS);Math.abs(h-e)<=t&&Math.abs(s-q)<=t&&this._basicTap(c,n)}}else 1===this._numTouches&&this._pinchActive&&(q.splice(b.indexOf(q,c.pointerId),1),delete a[c.pointerId],d=a[q[0]],d.startX=d.pageX,d.startY=d.pageY,d.moved=!1,document.msElementsFromPoint&&(x=document.msElementsFromPoint(d.pageX,d.pageY),b.some(x,function(a){return a===g})||(this._touches={},this._touchIds=[],
this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(c,[c,d])))},_pointerCancel:function(b){this._numTouches&&this._pointerUp(b)},_basicTap:function(b,a){var d=(new Date).getTime(),g=this,e=this._immediate;b=this._processTouchEvent(b,a);this._taps.push({touchInfos:a,ts:d,event:b});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",b);clearTimeout(this._tapTimer);d=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=
setTimeout(function(){var a=g;g=null;clearTimeout(a._tapTimer);a._analyzeTap(e)},e?0:d)},_analyzeTap:function(b){var a=this._taps,d=a[0],g=a[1],e=d.touchInfos,h=g&&g.touchInfos;a.length&&(b||(this._taps=[]),d&&g?e.length===h.length?g.ts-d.ts<=this.doubleTapDuration?(1===e.length?(b=Math.abs(e[0].startX-h[0].startX),e=Math.abs(e[0].startY-h[0].startY),e=b<=this.doubleTapRadius&&e<=this.doubleTapRadius):e=!0,e?this._processedDoubleTap(a):this._processedTap(g)):this._processedTap(g):this._processedTap(g):
this._processedTap(d||g))},_processedTap:function(b){var a=b.event;this._fire("onProcessedTap",a);1===b.touchInfos.length?this._fire("onTap",this._fixEvent(a)):2===b.touchInfos.length&&this._fire("onTwoFingerTap",a)},_processedDoubleTap:function(b){var a=1===b[1].touchInfos.length,d;a&&(d=[this._fixEvent(b[0].event),this._fixEvent(b[1].event)],d[1].relatedEvents=d);b=[b[0].event,b[1].event];b[1].relatedEvents=b;this._fire("onProcessedDoubleTap",b[1]);a&&(this._fire("onDoubleTap",d[1]),this._fire("onDblClick",
d[1]))},_mouseOver:function(b){this._fire("onMouseOver",this._processMouseEvent(b))},_mouseMove:function(b){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(b)):this._fire("onMouseMove",this._processMouseEvent(b))},_mouseOut:function(b){this._fire("onMouseOut",this._processMouseEvent(b))},_mouseLeave:function(b){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(event))},_mouseDown:function(b){this._downX=
b.pageX;this._downY=b.pageY;this._fire("onMouseDown",this._processMouseEvent(b));0===b.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(b)))},_mouseUp:function(b){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(b)));this._fire("onMouseUp",this._processMouseEvent(b))},_mouseClick:function(b){Math.abs(b.pageX-this._downX)<=this.clickRadius&&Math.abs(b.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(b))},
_mouseWheel:function(b){var a=this.map;(a?a.isScrollWheelZoom||a.isScrollWheelPan:this.preventPageScroll)&&b.preventDefault();var a=b.wheelDelta?b.wheelDelta/this.wheelDivisor:-b.detail/this.mozWheelDivisor,d=Math.abs(a),d=d<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;b.value=0>a?-d:d;this._fire("onMouseWheel",this._processMouseEvent(b))},_mouseEnter:function(b){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",
this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(b))},_onKeyDown:function(b){this._fire("onKeyDown",b)},_onKeyUp:function(b){this._fire("onKeyUp",b)},_fire:function(b,a){if(this[b])this[b](a);if(this.map&&this.map[b])this.map[b](a)},_fixEvent:function(b){var a={},d;for(d in b)a[d]=b[d];a.preventDefault=function(){b.preventDefault()};a.stopPropagation=function(){b.stopPropagation()};this.map&&(a.screenPoint=a.screenPoints[0],
a.mapPoint=a.mapPoints[0]);return a},_processTouchEvent:function(b,a){var d=this.map,g=d&&d.position,e=0;if(g&&a)if(t.isArray(a)){var q,n;b.screenPoints=[];b.mapPoints=[];for(q=0;q<a.length;q++)a[q]?(n=new h(a[q].pageX-g.x,a[q].pageY-g.y),b.screenPoints.push(n),b.mapPoints.push(d.extent?d.toMap(n):new s)):e++}else b.screenPoint=new h(a.pageX-g.x,a.pageY-g.y),b.mapPoint=d.extent?d.toMap(b.screenPoint):new s;b.numPoints=a?t.isArray(a)?a.length-e:1:0;return b},_processMouseEvent:function(b){var a=this.map,
d=a&&a.position;d&&(b.screenPoint=new h(b.pageX-d.x,b.pageY-d.y),b.mapPoint=a.extent?a.toMap(b.screenPoint):new s);return b},setImmediateTap:function(b){this._immediate=b},destroy:function(){var b=this.node;b.removeEventListener("MSPointerDown",this._pointerDown,!1);b.removeEventListener("MSPointerMove",this._pointerMove,!1);b.removeEventListener("MSPointerUp",this._pointerUp,!1);b.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(b.removeEventListener("mouseover",this._mouseOver,
!1),b.removeEventListener("mousemove",this._mouseMove,!1),b.removeEventListener("mouseout",this._mouseOut,!1),b.removeEventListener("mouseleave",this._mouseLeave,!1),b.removeEventListener("mousedown",this._mouseDown,!1),b.removeEventListener("mouseup",this._mouseUp,!1),b.removeEventListener("click",this._mouseClick,!1),b.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});n("extend-esri")&&
(u.PointerEvents=e);return e})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff ../kernel ../config ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D,G,N,P,K,R,M,T){function U(f){return A({url:Y.arcgisUrl+"/"+f.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function V(f,r){var a={f:"json"};r&&(a.token=r);return A({url:f,content:a,callbackParamName:"callback"},{disableIdentityLookup:!0})}function W(f){f.itemProperties.layerDefinition&&(f.layerDefinition?(f.layerDefinition.drawingInfo||(f.layerDefinition.drawingInfo=f.itemProperties.layerDefinition.drawingInfo),
w.isDefined(f.layerDefinition.definitionExpression)||(f.layerDefinition.definitionExpression=f.itemProperties.layerDefinition.definitionExpression),w.isDefined(f.layerDefinition.minScale)||(f.layerDefinition.minScale=f.itemProperties.layerDefinition.minScale),w.isDefined(f.layerDefinition.maxScale)||(f.layerDefinition.maxScale=f.itemProperties.layerDefinition.maxScale)):f.layerDefinition=f.itemProperties.layerDefinition);f.itemProperties.popupInfo&&(!f.popupInfo&&!f.disablePopup)&&(f.popupInfo=f.itemProperties.popupInfo);
w.isDefined(f.itemProperties.showLabels)&&!w.isDefined(f.showLabels)&&(f.showLabels=f.itemProperties.showLabels);w.isDefined(f.itemProperties.showLegend)&&!w.isDefined(f.showLegend)&&(f.showLegend=f.itemProperties.showLegend);w.isDefined(f.itemProperties.refreshInterval)&&!w.isDefined(f.refreshInterval)&&(f.refreshInterval=f.itemProperties.refreshInterval)}function v(f){W(f);f.itemProperties.layerDefinition&&f.layerDefinition&&(!w.isDefined(f.layerDefinition.maximumTrackPoints)&&w.isDefined(f.itemProperties.layerDefinition.maximumTrackPoints)&&
(f.layerDefinition.maximumTrackPoints=f.itemProperties.layerDefinition.maximumTrackPoints),!f.layerDefinition.definitionGeometry&&f.itemProperties.layerDefinition.definitionGeometry&&(f.layerDefinition.definitionGeometry=f.itemProperties.layerDefinition.definitionGeometry));f.itemProperties.purgeOptions&&!f.purgeOptions&&(f.purgeOptions=f.itemProperties.purgeOptions)}function O(f,r){var a=new u,k=f.itemData,l=[],B=[];b.forEach(k.operationalLayers,function(f){if(f.itemId&&!f.type){var r=f.url.toLowerCase();
-1<r.indexOf("/featureserver")||-1<r.indexOf("/mapserver/")?(B.push(f),l.push(U(f))):-1<r.indexOf("/mapserver")&&-1===r.indexOf("/mapserver/")&&(!f.layers||!w.isDefined(f.minScale)&&!w.isDefined(f.maxScale))?(B.push(f),l.push(U(f))):-1<r.indexOf("/imageserver")&&!w.isDefined(f.minScale)&&!w.isDefined(f.maxScale)?(B.push(f),l.push(U(f))):-1<r.indexOf("/streamserver")&&(B.push(f),l.push(U(f)))}});k.baseMap&&k.baseMap.baseMapLayers&&b.forEach(k.baseMap.baseMapLayers,function(f){f.itemId&&"VectorTileLayer"!==
f.layerType&&(B.push(f),l.push(U(f)))});if(0<l.length){var H={};(new c(l)).addCallback(function(r){b.forEach(B,function(f,a){var k=r[a][1];if(k&&!(k instanceof Error)&&(H[f.itemId]=k,!f.type)){var l=f.url.toLowerCase();if((-1<l.indexOf("/featureserver")||-1<l.indexOf("/mapserver/"))&&k.layers)b.forEach(k.layers,function(r){if(l.match("/featureserver/"+r.id+"$")=="/featureserver/"+r.id||l.match("/mapserver/"+r.id+"$")=="/mapserver/"+r.id)f.itemProperties=r,W(f)});else if(-1<l.indexOf("/streamserver"))f.itemProperties=
k,v(f);else if(-1<l.indexOf("/mapserver"))k.layers&&!f.layers&&(f.layers=k.layers),w.isDefined(k.minScale)&&!w.isDefined(f.minScale)&&(f.minScale=k.minScale),w.isDefined(k.maxScale)&&!w.isDefined(f.maxScale)&&(f.maxScale=k.maxScale),w.isDefined(k.refreshInterval)&&!w.isDefined(f.refreshInterval)&&(f.refreshInterval=k.refreshInterval),k.visibleLayers&&!f.visibleLayers&&(f.visibleLayers=k.visibleLayers);else if(-1<l.indexOf("/imageserver")&&(w.isDefined(k.minScale)&&!w.isDefined(f.minScale)&&(f.minScale=
k.minScale),w.isDefined(k.maxScale)&&!w.isDefined(f.maxScale)&&(f.maxScale=k.maxScale),w.isDefined(k.refreshInterval)&&!w.isDefined(f.refreshInterval)&&(f.refreshInterval=k.refreshInterval),k.popupInfo&&(!f.popupInfo&&!f.disablePopup)&&(f.popupInfo=k.popupInfo),k.renderingRule&&!f.renderingRule&&(f.renderingRule=k.renderingRule,k.renderingRule.functionName&&(f.renderingRule.rasterFunction=k.renderingRule.functionName)),k.bandIds&&!f.bandIds&&(f.bandIds=k.bandIds),k.mosaicRule&&!f.mosaicRule&&(f.mosaicRule=
k.mosaicRule),k.format&&!f.format&&(f.format=k.format),w.isDefined(k.compressionQuality)&&!w.isDefined(f.compressionQuality)&&(f.compressionQuality=k.compressionQuality),k.layerDefinition&&k.layerDefinition.definitionExpression&&(!w.isDefined(f.layerDefinition)||!w.isDefined(f.layerDefinition.definitionExpression))))f.layerDefinition=f.layerDefinition||{},f.layerDefinition.definitionExpression=k.layerDefinition.definitionExpression}});f.relatedItemsData=H;a.callback(f)})}else a.callback(f);return a}
function z(a,b){var l=new u,B=a.itemData,v=B.baseMap.baseMapLayers[0];if("BingMapsAerial"===v.type||"BingMapsRoad"===v.type||"BingMapsHybrid"===v.type)if(v.portalUrl&&g.id)delete b.bingMapsKey,g.id.checkSignInStatus(E.urlToObject(Y.arcgisUrl).path).then(t.hitch(null,function(a,k,b,l,B){V(v.portalUrl,B.token).then(t.hitch(null,f,a,k,b,l),t.hitch(null,r,a,k,b,l))},a,b,B,l),t.hitch(null,function(a,k,b,l,B){V(v.portalUrl).then(t.hitch(null,f,a,k,b,l),t.hitch(null,r,a,k,b,l))},a,b,B,l));else if(b.bingMapsKey){var H=
new xa({bingMapsKey:b.bingMapsKey,mapStyle:xa.MAP_STYLE_AERIAL});n.connect(H,"onLoad",t.hitch(this,function(){l.callback([a,b])}));n.connect(H,"onError",function(f){delete b.bingMapsKey;a.itemData=k(B);v=a.itemData.baseMap.baseMapLayers[0];v.errors=[];v.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});l.callback([a,b])})}else a.itemData=k(B),v=a.itemData.baseMap.baseMapLayers[0],v.errors=[],v.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),
l.callback([a,b]);else l.callback([a,b]);return l}function l(f){var r=new u,a,k;f=f.itemData;var b=f.baseMap&&f.baseMap.baseMapLayers;if(d("ie")||hb&&!hb.supported())for(f=0;f<b.length;f++){var l=b[f];if(!l.isReference){"VectorTileLayer"===l.layerType&&(a=l.itemId,k=f);break}}a?na(a,!1).addBoth(function(f){var a=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;f&&(f.item&&a.test(f.item.url))&&(b[k]={id:"FB_"+l.id,layerType:"ArcGISTiledMapServiceLayer",
opacity:"opacity"in l?l.opacity:1,visibility:"visibility"in l?l.visibility:!0,url:"http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});r.resolve()}):r.resolve();return r}function f(f,a,b,l,B){B.bingKey?(a.bingMapsKey=B.bingKey,B=new xa({bingMapsKey:a.bingMapsKey,mapStyle:xa.MAP_STYLE_AERIAL}),n.connect(B,"onLoad",t.hitch(this,function(){l.callback([f,a])})),n.connect(B,"onError",function(r){delete a.bingMapsKey;f.itemData=k(b);r=f.itemData.baseMap.baseMapLayers[0];
r.errors=[];r.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});l.callback([f,a])})):r(f,a,b,l)}function r(f,r,a,b){delete r.bingMapsKey;f.itemData=k(a);a=f.itemData.baseMap.baseMapLayers[0];a.errors=[];a.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});b.callback([f,r])}function k(f){f.baseMap="BingMapsAerial"===f.baseMap.baseMapLayers[0].type?
{title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:"BingMapsRoad"===f.baseMap.baseMapLayers[0].type?{title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:{title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},
{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};return f}function B(f,r,a,k){var l=f.dynamicLayerInfos||f.layerInfos,B=r.layers;if(B&&l)if(k.usePopupManager){var v;b.forEach(l,function(f){var r=f.id;if(!f.subLayerIds)for(f=0;f<B.length;f++){var k=B[f];if(k.id===r&&k.popupInfo){v||(v={});v[r]={infoTemplate:new a(k.popupInfo),layerUrl:k.layerUrl};break}}});v&&
f.setInfoTemplates(v)}else{var H=[],c=[],J=[],d=[],Q=[],g=[];b.forEach(l,function(r){var a=r.id;if(!r.subLayerIds&&-1!==b.indexOf(f.visibleLayers,a))for(r=0;r<B.length;r++){var k=B[r];if(k.id===a){c.push(a);H.push(k.popupInfo);J.push(k.layerUrl||"");k.layerDefinition&&k.layerDefinition.definitionExpression?d.push(k.layerDefinition.definitionExpression):d.push("");Q.push(w.isDefined(k.minScale)?k.minScale:null);g.push(w.isDefined(k.maxScale)?k.maxScale:null);break}}});H.length&&(f.__popups=H,f.__popupIds=
c,f.__popupUrls=J,f.__popupWhereClauses=d,f.__popupMinScales=Q,f.__popupMaxScales=g,f.__resourceInfo=r.resourceInfo)}}function H(f){if(!f)return!1;var r=(new s(Y.arcgisUrl)).authority;return-1!==f.indexOf(".arcgis.com/")||-1!==f.indexOf(r)}function J(f){return!f?!1:-1!==f.indexOf("/services.arcgisonline.com/")||-1!==f.indexOf("/server.arcgisonline.com/")}function Q(f){if("https:"===location.protocol&&(H(f)||J(f)))f=f.replace("http:","https:");return f}function S(f,r,a){var k=[],l;f.displayLevels||
(k=b.map(f.resourceInfo.tileInfo.lods,function(f){return f.level}));f.exclusionAreas&&(l=t.clone(f.exclusionAreas),l=b.map(l,function(f){f.geometry=new y(f.geometry);return f}));k=new R(Q(f.url),{resourceInfo:f.resourceInfo,opacity:f.opacity,visible:f.visibility,displayLevels:f.displayLevels||k,id:f.id,minScale:f.minScale,maxScale:f.maxScale,refreshInterval:f.refreshInterval,exclusionAreas:l});a.ignorePopups||B(k,f,r,a);return k}function X(f,r){if(!f||!r||0===r.length)return[];var a=","+r+",",k=[],
b,l=",";for(b=0;b<f.length;b++)if(null!==f[b].subLayerIds){if(-1===a.indexOf(","+f[b].id+",")||-1<l.indexOf(","+f[b].id+","))l+=f[b].subLayerIds.toString()+","}else-1<a.indexOf(","+f[b].id+",")&&-1===l.indexOf(","+f[b].id+",")&&k.push(f[b].id);return k}function aa(f,r,a){var k=new Ua;k.format="png24";f.resourceInfo&&(f.resourceInfo.supportedImageFormatTypes&&-1<f.resourceInfo.supportedImageFormatTypes.indexOf("PNG32"))&&(k.format="png32");var k=new da(Q(f.url),{resourceInfo:f.resourceInfo,opacity:f.opacity,
visible:f.visibility,id:f.id,imageParameters:k,minScale:f.minScale,maxScale:f.maxScale,refreshInterval:f.refreshInterval}),l=f.visibleLayers;if(!f.visibleLayers){var v="";b.forEach(k.layerInfos,function(f){f.defaultVisibility&&(v+=(0<v.length?",":"")+f.id)});l=v}if(f.layers&&0<f.layers.length){var H=[],c=[],J,d=[],g,z;b.forEach(f.layers,function(r){r.layerDefinition&&r.layerDefinition.definitionExpression&&(H[r.id]=r.layerDefinition.definitionExpression);if(r.layerDefinition&&r.layerDefinition.source){J=
null;z=r.layerDefinition.source;if("mapLayer"===z.type){var a=b.filter(f.resourceInfo.layers,function(f){return f.id===z.mapLayerId});a.length&&(J=t.mixin(a[0],r))}else J=t.mixin({},r);J&&(J.source=z,delete J.popupInfo,J=new wa(J),f.visibleLayers&&(a="string"==typeof f.visibleLayers?f.visibleLayers.split(","):f.visibleLayers,-1<b.indexOf(a,r.id)?J.defaultVisibility=!0:J.defaultVisibility=!1),c.push(J))}r.layerDefinition&&(r.layerDefinition.source&&r.layerDefinition.drawingInfo)&&(g=new Qa(r.layerDefinition.drawingInfo),
d[r.id]=g)},this);0<H.length&&k.setLayerDefinitions(H);0<c.length?(k.setDynamicLayerInfos(c,!0),0<d.length&&k.setLayerDrawingOptions(d,!0)):(l=X(k.layerInfos,l),k.setVisibleLayers(l))}else l=X(k.layerInfos,l),k.setVisibleLayers(l);a.ignorePopups||B(k,f,r,a);return k}function ka(f,r,a){var k=new Ka;k.bandIds=f.bandIds;null!=f.format&&(k.format=f.format,null!=f.compressionQuality&&(k.compressionQuality=f.compressionQuality));if(f.renderingRule&&f.renderingRule.rasterFunction){var b=new Wa(f.renderingRule);
k.renderingRule=b}f.mosaicRule&&(b=new Pa(f.mosaicRule),k.mosaicRule=b);w.isDefined(f.noData)&&(k.noData=f.noData);w.isDefined(f.noDataInterpretation)&&(k.noDataInterpretation=f.noDataInterpretation);w.isDefined(f.interpolation)&&(k.interpolation=f.interpolation);b=f.layerType?"ArcGISImageServiceVectorLayer"===f.layerType:!1;w.isDefined(f.layerType)||(b=f.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===f.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===
f.resourceInfo.serviceDataType));k={resourceInfo:f.resourceInfo,opacity:f.opacity,visible:f.visibility,id:f.id,imageServiceParameters:k,minScale:f.minScale,maxScale:f.maxScale,refreshInterval:f.refreshInterval};k=b?new ta(Q(f.url),k):new Z(Q(f.url),k);f.layerDefinition&&(f.layerDefinition.drawingInfo&&f.layerDefinition.drawingInfo.renderer&&(b=D.fromJson(f.layerDefinition.drawingInfo.renderer),k.setRenderer(b)),f.layerDefinition.definitionExpression&&k.setDefinitionExpression(f.layerDefinition.definitionExpression,
!0));!a.ignorePopups&&f.popupInfo&&k.setInfoTemplate(new r(f.popupInfo));return k}function ja(f,r,a){var k=[102113,102100,3857],l=a||new x(r[0].layerObject.fullExtent.spatialReference),B=new x(f.resourceInfo.fullExtent.spatialReference);return l.wkt==B.wkt&&(l.wkid==B.wkid||w.isDefined(l.latestWkid)&&l.latestWkid==B.wkid||w.isDefined(B.latestWkid)&&l.wkid==B.latestWkid||w.isDefined(l.latestWkid)&&l.latestWkid==B.latestWkid)||l.wkid&&B.wkid&&b.some(k,function(f){return f===B.wkid})&&b.some(k,function(f){return f===
l.wkid})?!0:!1}function fa(f,r,a){if(!r[0].layerObject.tileInfo)return!1;f=f.resourceInfo.tileInfo;r=r[0].layerObject.tileInfo;a=a.width>a.height?a.width:a.height;for(var k=!1,b=!1,l=0;l<f.lods.length;l++){for(var B=f.lods[l].scale/f.dpi,v=0;v<r.lods.length;v++){var H=r.lods[v].scale/r.dpi;if(Math.abs(H-B)/H<1/a)if(k){b=!0;break}else k=!0}if(b)break}return b||k&&(1===f.lods.length||1===r.lods.length)?!0:!1}function ca(f,r,a,k,l,B){var v,c=a._clazz;if("OpenStreetMap"===f.type)v=new Ia({id:f.id,opacity:f.opacity,
visible:null!==f.visibility&&void 0!==f.visibility?f.visibility:!0});else if("WMS"===f.type){var J=[],d=[];b.forEach(f.layers,function(f){d.push(new vb({name:f.name,title:f.title,legendURL:f.legendURL}));J.push(f.name)},this);f.visibleLayers&&(J=f.visibleLayers);k={extent:new y(f.extent[0][0],f.extent[0][1],f.extent[1][0],f.extent[1][1],new x({wkid:4326})),layerInfos:d,version:f.version,maxWidth:f.maxWidth,maxHeight:f.maxHeight,getMapURL:f.mapUrl,spatialReferences:f.spatialReferences,title:f.title,
copyright:f.copyright,minScale:f.minScale||0,maxScale:f.maxScale||0,format:f.format};v=new ub(f.url,{id:f.id,visibleLayers:J,format:"png",transparent:f.baseMapLayer?!1:!0,opacity:f.opacity,visible:null!==f.visibility?f.visibility:!0,resourceInfo:k,refreshInterval:f.refreshInterval});v.spatialReference.wkid=k.spatialReferences[0]}else if("KML"===f.type){a=f.url;if(g.id&&(c=g.id.findCredential(E.urlToObject(Y.arcgisUrl).path))){var z=Y.arcgisUrl.substring(Y.arcgisUrl.indexOf("//")+2,Y.arcgisUrl.indexOf("/",
Y.arcgisUrl.indexOf("//")+3)),e=z.split("."),e=e[e.length-2]+"."+e[e.length-1];r=a.indexOf(e);-1<r&&(a="https://"+z+a.substring(r+e.length),a+="?token\x3d"+c.token)}v=new Ha(a,{id:f.id,visible:null!==f.visibility?f.visibility:!0,outSR:k,refreshInterval:f.refreshInterval});n.connect(v,"onLoad",function(){(f.opacity||0===f.opacity)&&v.setOpacity(f.opacity);w.isDefined(f.minScale)&&w.isDefined(f.maxScale)&&v.setScaleRange(f.minScale,f.maxScale);f.visibleFolders&&b.forEach(v.folders,function(r){-1<b.indexOf(f.visibleFolders,
r.id)?v.setFolderVisibility(r,!0):v.setFolderVisibility(r,!1)},this)})}else"WebTiledLayer"===f.type?(v=new tb(f.templateUrl,{id:f.id,visible:null!==f.visibility?f.visibility:!0,opacity:f.opacity,copyright:f.copyright,fullExtent:f.fullExtent&&new y(f.fullExtent),initialExtent:f.fullExtent&&new y(f.fullExtent),subDomains:f.subDomains,tileInfo:f.tileInfo?new rb(f.tileInfo):null,refreshInterval:f.refreshInterval}),n.connect(v,"onLoad",function(){(w.isDefined(f.minScale)||w.isDefined(f.maxScale))&&v.setScaleRange(f.minScale,
f.maxScale)})):"GeoRSS"===f.type?(v=new Ga(f.url,{id:f.id,opacity:f.opacity,outSpatialReference:k,refreshInterval:f.refreshInterval}),n.connect(v,"onLoad",function(){!1===f.visibility&&v.hide();w.isDefined(f.minScale)&&w.isDefined(f.maxScale)&&v.setScaleRange(f.minScale,f.maxScale);var r=v.getFeatureLayers();b.forEach(r,function(a){f.pointSymbol&&"esriGeometryPoint"===a.geometryType?(a.renderer.symbol=L.fromJson(f.pointSymbol),1===r.length&&(v.pointSymbol=L.fromJson(f.pointSymbol))):f.lineSymbol&&
"esriGeometryPolyline"===a.geometryType?(a.renderer.symbol=L.fromJson(f.lineSymbol),1===r.length&&(v.polylineSymbol=L.fromJson(f.lineSymbol))):f.polygonSymbol&&"esriGeometryPolygon"===a.geometryType&&(a.renderer.symbol=L.fromJson(f.polygonSymbol),1===r.length&&(v.polygonSymbol=L.fromJson(f.polygonSymbol)))})})):"CSV"==f.type&&f.url?(k={layerDefinition:f.layerDefinition,columnDelimiter:f.columnDelimiter,id:f.id?f.id:null,visible:null!==f.visibility?f.visibility:!0,opacity:f.opacity,refreshInterval:f.refreshInterval},
f.locationInfo&&(k.latitudeFieldName=f.locationInfo.latitudeFieldName,k.longitudeFieldName=f.locationInfo.longitudeFieldName),a.ignorePopups||(k.infoTemplate=new G(f.popupInfo?f.popupInfo:va.generateDefaultPopupInfo(f))),v=new qa(f.url,k)):"VectorTileLayer"===f.layerType&&f.styleUrl?v=new sb(f.styleUrl,{id:f.id,minScale:f.minScale,maxScale:f.maxScale,opacity:f.opacity,visible:f.visibility}):f.layerDefinition&&!f.url?(k=q.fromJson(q.toJson(f)),delete k.id,delete k.opacity,delete k.visibility,v=new M(k,
{id:f.id,opacity:f.opacity,visible:f.visibility,outFields:["*"],autoGeneralize:!0}),!a.ignorePopups&&k.popupInfo&&v.setInfoTemplate(new c(k.popupInfo)),ea(v)):"BingMapsAerial"===f.type||"BingMapsRoad"===f.type||"BingMapsHybrid"===f.type?a.bingMapsKey?(k=xa.MAP_STYLE_AERIAL_WITH_LABELS,"BingMapsAerial"===f.type?k=xa.MAP_STYLE_AERIAL:"BingMapsRoad"===f.type&&(k=xa.MAP_STYLE_ROAD),v=new xa({bingMapsKey:a.bingMapsKey,mapStyle:k,opacity:f.opacity,id:f.id}),n.connect(v,"onError",t.hitch(this,function(f){f.errors=
f.errors||[];f.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+f.type+"]"})},f))):(f.errors=f.errors||[],f.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+f.type+"]"})):f.resourceInfo&&f.resourceInfo.mapName?v=!0===f.resourceInfo.singleFusedMapCache&&(f.baseMapLayer||ja(f,r,k)&&fa(f,l,B))?S(f,c,a):aa(f,c,a):f.resourceInfo&&f.resourceInfo.pixelSizeX?
v=!0===f.resourceInfo.singleFusedMapCache&&(f.baseMapLayer||ja(f,r,k)&&fa(f,l,B))?S(f,c,a):ka(f,c,a):f.resourceInfo&&"Feature Layer"===f.resourceInfo.type?(f.capabilities&&(f.resourceInfo.capabilities=f.capabilities),v=new M(Q(f.url),{resourceInfo:f.resourceInfo,opacity:f.opacity,visible:f.visibility,id:f.id,mode:H(f.url)?M.MODE_AUTO:w.isDefined(f.mode)?f.mode:M.MODE_ONDEMAND,editable:!1===a.editable?!1:void 0,outFields:["*"],autoGeneralize:!0,refreshInterval:f.refreshInterval}),!a.ignorePopups&&
f.popupInfo&&v.setInfoTemplate(new c(f.popupInfo)),f.layerDefinition&&(f.layerDefinition.drawingInfo&&f.layerDefinition.drawingInfo.renderer&&(k=D.fromJson(f.layerDefinition.drawingInfo.renderer),k.isMaxInclusive=!0,v.setRenderer(k)),f.layerDefinition.drawingInfo&&f.layerDefinition.drawingInfo.labelingInfo&&(k=b.map(f.layerDefinition.drawingInfo.labelingInfo,function(f){return new Va(f)}),v.setLabelingInfo(k)),f.layerDefinition.definitionExpression&&v.setDefinitionExpression(f.layerDefinition.definitionExpression),
w.isDefined(f.layerDefinition.minScale)&&v.setMinScale(f.layerDefinition.minScale),w.isDefined(f.layerDefinition.maxScale)&&v.setMaxScale(f.layerDefinition.maxScale)),ea(v)):f.resourceInfo&&f.resourceInfo.streamUrls&&(k={resourceInfo:f.resourceInfo,opacity:f.opacity,visible:f.visibility,id:f.id},f.layerDefinition&&(e=f.layerDefinition.drawingInfo,f.layerDefinition.definitionGeometry&&(z=z||{},z.geometry=f.layerDefinition.definitionGeometry),w.isDefined(f.layerDefinition.definitionExpression)&&(z=
z||{},z.where=f.layerDefinition.definitionExpression),w.isDefined(f.layerDefinition.maximumTrackPoints)&&(k.maximumTrackPoints=f.layerDefinition.maximumTrackPoints)),z&&(k.filter=z),f.purgeOptions&&(k.purgeOptions=f.purgeOptions),v=new qb(Q(f.url),k),e&&e.renderer&&(k=e.renderer,v.setRenderer(D.fromJson(k))),!a.ignorePopups&&f.popupInfo&&v.setInfoTemplate(new c(f.popupInfo)),f.layerDefinition&&(w.isDefined(f.layerDefinition.minScale)&&v.setMinScale(f.layerDefinition.minScale),w.isDefined(f.layerDefinition.maxScale)&&
v.setMaxScale(f.layerDefinition.maxScale)),h.once(v,"error",function(r){f.errors.push({message:"Error loading stream layer. Check websocket url"})}));v&&(v.arcgisProps={title:f.title},f.baseMapLayer&&(f.isReference?(v.attr("data-reference",!0),v._basemapGalleryLayerType="reference"):v._basemapGalleryLayerType="basemap"));return v}function $(f,r,a,k,l){b.forEach(f,function(b,B){if(b.url&&!b.type){if(0===B||f[0].layerObject)b.layerObject=ca(b,f,r,a,k,l)}else b.layerObject=ca(b,f,r,a,k,l)});var B=b.filter(f,
function(f){return!f.isReference}),v=b.filter(f,function(f){return!!f.isReference});return f=B.concat(v)}function ga(f){var r=null;f=f[0];f.url&&!f.type?f.resourceInfo.spatialReference&&(r=new x,f.resourceInfo.spatialReference.wkid&&(r.wkid=f.resourceInfo.spatialReference.wkid),f.resourceInfo.spatialReference.wkt&&(r.wkt=f.resourceInfo.spatialReference.wkt)):f.type&&(-1<f.type.indexOf("BingMaps")||"OpenStreetMap"==f.type?r=new x({wkid:102100}):"WMS"==f.type&&(r=new x({wkid:f.spatialReferences[0]})));
return r}function la(f,r,a,k,l,B,v,H){b.forEach(r,function(r){r.url&&!r.type&&(r.resourceInfo=f[r.deferredsPos][1],delete r.deferredsPos)});B=B||ga(r);r=$(r,a,B,v,H);l.callback(r);return l}function ea(f){!window.CanvasRenderingContext2D&&(f.renderer&&"esri.renderer.HeatmapRenderer"===f.renderer.declaredClass)&&f.setRenderer(D.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:0.75,type:"esriSLS",
style:"esriSLSSolid"}}}))}function za(f,r){var a=Q(f);return A({url:a,content:{f:"json"},callbackParamName:"callback",error:function(f,k){f.message=f.message?f.message+(" [url:"+a+"]"):"[url:"+a+"]";r.push(f);m.defaults.io.errorHandler(f,k)}})}function oa(f){var r=Y.arcgisUrl+"/"+f.itemId+"/data";return A({url:r,content:{f:"json"},callbackParamName:"callback",error:function(a,k){a.message=a.message?a.message+(" [url:"+r+"]"):"[url:"+r+"]";f.errors=f.errors||[];f.errors.push(a);m.defaults.io.errorHandler(a,
k)}})}function sa(f,r,a){var k=new u;if((!a.featureCollection||!a.featureCollection.layers)&&!a.layers)return f.errors=f.errors||[],f.errors.push({message:"Invalid Feature Collection item data. [item id: "+f.itemId+"]"}),k.errback(),k;a.layers&&(a.featureCollection={layers:a.layers},delete a.layers,w.isDefined(a.showLegend)&&(a.featureCollection.showLegend=a.showLegend,delete a.showLegend));ma(f,a.featureCollection,r).then(function(r){a.featureCollection=r;f.featureCollection&&f.featureCollection.layers?
b.forEach(a.featureCollection.layers,function(r,a){var k=f.featureCollection.layers[a];if(!k.poupInfo&&!k.layerDefinition)k.popupInfo=r.popupInfo,k.layerDefinition=r.layerDefinition;else if(k.layerDefinition){if(w.isDefined(k.layerDefinition.minScale)&&w.isDefined(k.layerDefinition.maxScale)&&(k.layerDefinition.minScale!==r.layerDefinition.minScale||k.layerDefinition.maxScale!==r.layerDefinition.maxScale))delete r.layerDefinition.minscale,delete r.layerDefinition.maxScale;k.layerDefinition.drawingInfo&&
q.toJson(k.layerDefinition.drawingInfo)!==q.toJson(r.layerDefinition.drawingInfo)&&delete r.layerDefinition.drawingInfo;k.layerDefinition.showLegend!==r.layerDefinition.showLegend&&delete r.layerDefinition.showLegend;k.layerDefinition=t.mixin(k.layerDefinition,r.layerDefinition)}else k.layerDefinition=r.layerDefinition;k.featureSet=r.featureSet;k.nextObjectId=r.nextObjectId}):(f.featureCollection=f.featureCollection||{},f.featureCollection=t.mixin(f.featureCollection,a.featureCollection));k.callback(f)});
return k}function ma(f,r,a){var k=new u;e(["./csv"],function(l){var B=[];b.forEach(r.layers,function(f){f.featureSet&&(f.featureSet.features&&f.featureSet.features.length&&f.featureSet.features[0].geometry&&f.featureSet.features[0].geometry.spatialReference)&&(f.deferredsPos=B.length,B.push(l.projectFeatureCollection(f,a,f.featureSet.features[0].geometry.spatialReference)))});(new c(B)).addCallback(function(){b.forEach(r.layers,function(r){w.isDefined(r.deferredsPos)&&(B[r.deferredsPos].results&&
B[r.deferredsPos].results.length?r=B[r.deferredsPos].results[0]:(r.errors=r.errors||[],r.errors.push({message:"Errors projecting feature collection. ["+f.title+" - "+r.layerDefinition.name+"]"})),delete r.deferredsPos)});k.callback(r)})});return k}function pa(f,r,a,k,l){var B=new u,v=new u,H=[],J;b.forEach(f.operationalLayers,function(f){f.itemId&&"Feature Collection"==f.type&&H.push(oa(f).then(t.hitch(null,sa,f,a)))});0===H.length?ya(f,r,a,k,v,l):(J=new c(H),J.addCallback(function(b){ya(f,r,a,k,
v,l)}));v.then(function(f){H=[];b.forEach(f,function(f){f=f.layerObject;if(f instanceof M&&!f.loaded&&!f.loadError){var r=new u;h.once(f,"load, error",function(){r.callback(f)});H.push(r)}});if(H.length){var r=new u;J=new c(H);J.addCallback(function(){r.callback(f)});return r.promise}return f}).then(function(f){var r=[];b.forEach(f,function(f){if(f.layerObject instanceof M){var a=f.layerObject;a.loaded&&(a.labelingInfo&&(f.showLabels||a._collection))&&r.push(a)}});r.length?e(["../layers/LabelLayer"],
function(a){var k=new a;b.forEach(r,function(f){k.addFeatureLayer(f)});f.push({layerObject:k});B.callback(f)}):B.callback(f)});return B}function ya(f,r,a,k,l,B){var v=[],H=[],J=[];b.forEach(f.operationalLayers,function(f,r){if(f.featureCollection&&f.featureCollection.layers){var a=f.featureCollection.layers.length;b.forEach(f.featureCollection.layers,function(k,l){var B=!0;f.visibleLayers&&-1==b.indexOf(f.visibleLayers,l)&&(B=!1);k.visibility=f.visibility&&B;k.opacity=f.opacity;k.id=(f.id||"operational"+
r)+"_"+l;f.title&&(k.title=1===a||!k.layerDefinition.name||f.title===k.layerDefinition.name?f.title:f.title+" - "+k.layerDefinition.name);J.push(k)},this)}else J.push(f)});b.forEach(f.baseMap.baseMapLayers,function(f,r){f.baseMapLayer=!0;f.id=f.id||"base"+r;v.push(f)});b.forEach(J,function(f,r){f.id=f.id||"operational"+r;v.push(f)});b.forEach(v,function(f){f.url&&!f.type&&(f.deferredsPos=H.length,f.errors=f.errors||[],H.push(za(f.url,f.errors)))});0===H.length?(a=a||ga(v),v=$(v,r,a,k,B),l.callback(v)):
(new c(H)).addCallback(function(f){la(f,v,r,H,l,a,k,B)});return l}function Da(f,r,a,k){var l=f.minScale,B=f.maxScale;if(10.1>=a.version&&r)for(f=r.length-1;0<=f;f--){if(r[f].id==k)if(0==l&&0<r[f].minScale?l=r[f].minScale:0<l&&0==r[f].minScale?l=a.minScale:0<l&&0<r[f].minScale&&(l=Math.min(l,r[f].minScale)),B=Math.max(a.maxScale||0,r[f].maxScale||0),a.setScaleRange(l,B),-1<r[f].parentLayerId)k=r[f].parentLayerId;else break}else 10.1<a.version&&(b.forEach(f.layerInfos,function(f){f.id==k&&(0==l&&0<
f.minScale?l=f.minScale:0<l&&0==f.minScale||0<l&&0<f.minScale&&(l=Math.min(l,f.minScale)),B=Math.max(B||0,f.maxScale||0))}),a.setScaleRange(l,B))}function Ea(f,r,a,k){var l=f.url,B=f.__popupIds,v=f.__popupUrls,H=f.__popupWhereClauses,c=f.__popupMinScales,J=f.__popupMaxScales,d=f.__resourceInfo,g=[];b.forEach(f.__popups,function(k,z){if(k){var S,e=[];b.forEach(k.fieldInfos,function(f){"shape"!==f.fieldName.toLowerCase()&&e.push(f.fieldName)});if(f.dynamicLayerInfos&&0<f.dynamicLayerInfos.length){var h=
b.filter(f.dynamicLayerInfos,function(f){return B[z]==f.id})[0].source;S=new M(l+"/dynamicLayer",{id:f.id+"_"+B[z],source:h,outFields:e,mode:M.MODE_SELECTION,infoTemplate:k&&new a(k),drawMode:!1,visible:f.visible,autoGeneralize:!0});var m=function(a,k){0<H[a].length&&k.setDefinitionExpression(H[a]);if(!w.isDefined(c[a])&&!w.isDefined(J[a]))Da(f,r||d.layers,k,B[a]);else if(w.isDefined(f.minScale)||w.isDefined(f.maxScale)){var b=f.minScale,l=f.maxScale;0==b&&0<c[a]?b=c[a]:0<b&&0==c[a]||0<b&&0<c[a]&&
(b=Math.min(b,c[a]));l=Math.max(l||0,J[a]||0);k.setScaleRange(b,l)}else k.setScaleRange(c[a],J[a])};S.loaded?m(z,S):n.connect(S,"onLoad",function(f){m(z,S)})}else{var X=null,x=l+"/"+B[z];if(v[z].length)x=v[z];else if(r)for(h=0;h<r.length;h++)if(r[h].id===B[z]){X=r[h];break}S=new M(Q(x),{id:f.id+"_"+B[z],outFields:e,mode:M.MODE_SELECTION,infoTemplate:k&&new a(k),drawMode:!1,visible:f.visible,resourceInfo:X,autoGeneralize:!0});S.loaded?(0<H[z].length&&S.setDefinitionExpression(H[z]),Da(f,r||d.layers,
S,B[z])):n.connect(S,"onLoad",function(a){0<H[z].length&&S.setDefinitionExpression(H[z]);Da(f,r||d.layers,a,B[z])})}g.push(S)}});0<g.length&&(n.connect(f,"onVisibilityChange",t.hitch(this,function(f,r){b.forEach(f,function(f){r?f.show():f.hide()})},g)),n.connect(k,"onLayerRemove",t.hitch(this,function(f,r,a){f.id===a.id&&b.forEach(r,function(f){k.removeLayer(f)})},f,g)));delete f.__popups;delete f.__popupIds;delete f.__popupUrls;delete f.__popupWhereClauses;delete f.__popupMinScales;delete f.__popupMaxScales;
delete f.__resourceInfo;return g}function ra(f){return A({url:Q(f.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Fa(f,r,a){var k=[];b.forEach(f,function(f){var r=f.__popups;r&&(1<r.length&&10<=f.version)&&(f.__deferredsPos=k.length,k.push(ra(f)))});var l=[];0<k.length?(new c(k)).addCallback(function(k){b.forEach(f,function(f){f.__popups&&0<f.__popups.length&&(f.__deferredsPos||0===f.__deferredsPos?(l=l.concat(Ea(f,k[f.__deferredsPos][1].layers,a,r)),delete f.__deferredsPos):
l=l.concat(Ea(f,null,a,r)))});r.addLayers(l)}):(b.forEach(f,function(f){f.__popups&&0<f.__popups.length&&(l=l.concat(Ea(f,null,a,r)))}),r.addLayers(l))}function Ja(f){b.forEach(f,function(f){var r=f.layer;r.toJson&&(f=r.toJson(),f.featureSet&&(r.name&&-1<r.name.indexOf("Text"))&&b.forEach(f.featureSet.features,function(f,a){if(f.attributes.TEXT){var k=r.graphics[a];k.symbol.setText(f.attributes.TEXT);f.symbol.horizontalAlignment&&(k.symbol.align=f.symbol.horizontalAlignment);k.setSymbol(k.symbol);
k.setAttributes(f.attributes)}},this))})}function La(f){var r=6;b.forEach(f,function(f){if(f=f.renderer)"esri.renderer.SimpleRenderer"===f.declaredClass?((f=f.symbol)&&f.xoffset&&(r=Math.max(r,Math.abs(f.xoffset))),f&&f.yoffset&&(r=Math.max(r,Math.abs(f.yoffset)))):("esri.renderer.UniqueValueRenderer"===f.declaredClass||"esri.renderer.ClassBreaksRenderer"===f.declaredClass)&&b.forEach(f.infos,function(f){(f=f.symbol)&&f.xoffset&&(r=Math.max(r,Math.abs(f.xoffset)));f&&f.yoffset&&(r=Math.max(r,Math.abs(f.yoffset)))})});
return r}function Ma(f){var r=this,a=r.infoWindow,k=f.graphic;if(r.loaded){a.hide();a.clearFeatures();var l=[];b.forEach(r.graphicsLayerIds,function(f){if((f=r.getLayer(f))&&f instanceof M&&f.loaded&&f.visible)f.clearSelection(),f.infoTemplate&&!f.suspended&&l.push(f)});b.forEach(r.layerIds,function(f){(f=r.getLayer(f))&&(-1!==f.declaredClass.indexOf("ArcGISImageServiceLayer")&&f.loaded&&f.visible&&f.infoTemplate)&&l.push(f)});k=k&&k.getInfoTemplate()?k:null;if(l.length||k){var B=La(l),v=f.screenPoint,
H=r.toMap(new F(v.x-B,v.y+B)),B=r.toMap(new F(v.x+B,v.y-B)),H=new y(H.x,H.y,B.x,B.y,r.spatialReference),c=new P;c.geometry=H;c.timeExtent=r.timeExtent;var J=!0,H=b.map(l,function(r){var a;-1!==r.declaredClass.indexOf("ArcGISImageServiceLayer")?(c.geometry=f.mapPoint,J=!1,a=r.queryVisibleRasters(c,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),a.addCallback(function(){return r.getVisibleRasters()})):(a=r.selectFeatures(c),a.addCallback(function(){return r.getSelectedFeatures()}));
return a});k&&(B=new u,B.callback([k]),H.splice(0,0,B));if(!b.some(H,function(f){return-1===f.fired})){var d=k?1:0;b.forEach(l,function(f){d=-1!==f.declaredClass.indexOf("ArcGISImageServiceLayer")?d+f.getVisibleRasters().length:d+f.getSelectedFeatures().length});if(!d)return}a.setFeatures(H);a.show(f.mapPoint,{closestFirst:J})}}}function lb(f,r){var k=r.mapOptions||{},l;k.infoWindow||(l=new N({visibleWhenEmpty:!1},a.create("div")),k.infoWindow=l);!w.isDefined(k.showInfoWindowOnClick)&&!r.usePopupManager&&
(k.showInfoWindowOnClick=!1);k=new C(f,k);n.connect(k,"onLayersAddResult",Ja);return k}function ua(f,r,a,k,l,B){var v,H,c,J;k.map?(v=k.map,H=k.clickEventHandle,c=k.clickEventListener,J=k.errors):(v=lb(k,l),!l.ignorePopups&&(!l.disableClickBehavior&&!l.usePopupManager)&&(H=n.connect(v,"onClick",Ma),c=Ma));v.addLayers(f);!l.ignorePopups&&!l.usePopupManager&&Fa(f,v,l._clazz);var d=J||[];b.forEach(r,function(f){f.errors&&(d=d.concat(f.errors))},this);v.loaded?B.callback({map:v,itemInfo:a,errors:d,clickEventHandle:H,
clickEventListener:c}):n.connect(v,"onLoad",function(){B.callback({map:v,itemInfo:a,errors:d,clickEventHandle:H,clickEventListener:c})})}function Aa(f,r,a,k,l){var B=[];b.forEach(l,function(f){t.isArray(f.layerObject)?b.forEach(f.layerObject,function(f){B.push(f)}):B.push(f.layerObject)});if("BingMapsAerial"===l[0].type||"BingMapsRoad"===l[0].type||"BingMapsHybrid"===l[0].type)var v=setInterval(function(){if(l[0].layerObject&&l[0].layerObject.loaded)clearInterval(v),Ba(f,r,a,k,l,B);else if(l[0].errors){clearInterval(v);
var b="";l[0].errors&&l[0].errors.length&&(b=" ("+l[0].errors[0].message+")");k.errback(Error(T.arcgis.utils.baseLayerError+b))}},10);else if(!B[0]&&l[0].baseMapLayer){var H="";l[0].errors&&l[0].errors.length&&(H=" ("+l[0].errors[0].message+")");k.errback(Error(T.arcgis.utils.baseLayerError+H))}else Ba(f,r,a,k,l,B)}function Ba(f,r,a,k,l,B){try{var v=a.mapOptions||{};a.mapOptions=v;var H=f.item;B=b.filter(B,w.isDefined);if(H)if(H.extent&&H.extent.length)if(v.extent)ua(B,l,f,r,a,k);else{var c=new y(H.extent[0][0],
H.extent[0][1],H.extent[1][0],H.extent[1][1],new x({wkid:4326})),J=B[0].spatialReference;4326===J.wkid?(v.extent=c,ua(B,l,f,r,a,k)):102100===J.wkid||102113===J.wkid||3857===J.wkid?(c.xmin=Math.max(c.xmin,-180),c.xmax=Math.min(c.xmax,180),c.ymin=Math.max(c.ymin,-89.99),c.ymax=Math.min(c.ymax,89.99),v.extent=I.geographicToWebMercator(c),ua(B,l,f,r,a,k)):a.geometryServiceURL||m.defaults.geometryService?(a.geometryServiceURL?new K(a.geometryServiceURL):m.defaults.geometryService).project([c],J,function(b){b=
b[0];v.extent=v.extent||b;ua(B,l,f,r,a,k)},function(){ua(B,l,f,r,a,k)}):k.errback(Error(T.arcgis.utils.geometryServiceError))}else ua(B,l,f,r,a,k);else ua(B,l,f,r,a,k)}catch(d){k.errback(d)}}function ha(f){var r=[];b.forEach(f.operationalLayers,function(f){f.featureCollection?r.push({featureCollection:f.featureCollection,visibility:f.visibility,title:f.title}):f.layerObject&&r.push({layer:f.layerObject,visibility:f.visibility,title:f.title})});return r}function ba(f){var r=[];f=f.baseMap.baseMapLayers.concat(f.operationalLayers);
b.forEach(f,function(f){var a={};if(f.featureCollection&&"CSV"!==f.type)!0===f.featureCollection.showLegend&&b.forEach(f.featureCollection.layers,function(k){!1!==k.showLegend&&(a={layer:k.layerObject,title:f.title,defaultSymbol:k.renderer&&k.renderer.defaultSymbol&&k.renderer.defaultLabel?!0:!1},1<f.featureCollection.layers.length&&(a.title+=" - "+k.layerDefinition.name),r.push(a))});else if(f.baseMapLayer&&!0===f.showLegend&&f.layerObject||!f.baseMapLayer&&!1!==f.showLegend&&f.layerObject&&!(f.layerObject instanceof
M&&f.layerObject.mode===M.MODE_SELECTION)){var k=f.layerObject.renderer,l=f.layerObject.declaredClass,k=!k||k&&k.defaultSymbol&&k.defaultLabel?!0:!1;if(10.1>f.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===l||"esri.layers.ArcGISTiledMapServiceLayer"===l)||"esri.layers.ArcGISImageServiceLayer"===l)k=!0;a={layer:f.layerObject,title:f.title,defaultSymbol:k};f.layers&&(l=b.map(b.filter(f.layers,function(f){return!1===f.showLegend}),function(f){return f.id}),l.length&&(a.hideLayers=
l));r.push(a)}});return r}function ia(f,r){function a(f,r){b.forEach(f,function(f,a){switch(f){case Na:da=r[a];break;case Oa:Z=r[a];break;case Ra:ta=r[a];break;case ib:va=r[a];break;case Sa:qa=r[a];break;case jb:wa=r[a];break;case Ta:Ga=r[a];break;case kb:Ua=r[a];break;case Xa:Ka=r[a];break;case Ya:Ha=r[a];break;case Za:Va=r[a];break;case mb:Qa=r[a];break;case $a:Pa=r[a];break;case ab:Ia=r[a];break;case bb:Wa=r[a];break;case cb:qb=r[a];break;case nb:rb=r[a];break;case ob:hb=r[a];break;case db:sb=
r[a];break;case eb:xa=r[a];break;case fb:tb=r[a];break;case gb:ub=r[a];break;case pb:vb=r[a]}})}var k=new u,l=f.itemData,B=[];l.baseMap&&l.baseMap.baseMapLayers&&(B=B.concat(l.baseMap.baseMapLayers));l.operationalLayers&&(B=B.concat(l.operationalLayers));for(var l=b.map(B,function(f){return f&&f.layerType}),v=[],H=[],B=!1,c=0;c<l.length;c++){switch(l[c]){case "ArcGISFeatureLayer":-1===b.indexOf(v,Za)&&v.push(Za);break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===b.indexOf(v,
Oa)&&(v.push(Oa),H.push(Xa),H.push($a),H.push(bb));break;case "ArcGISImageServiceVectorLayer":-1===b.indexOf(v,Ra)&&(v.push(Ra),H.push(Xa),H.push($a),H.push(bb));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===b.indexOf(v,Na)&&(v.push(Na),H.push(jb),H.push(kb),H.push(mb));break;case "ArcGISStreamLayer":-1===b.indexOf(v,cb)&&v.push(cb);break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===b.indexOf(v,eb)&&v.push(eb);break;case "CSV":-1===b.indexOf(v,Sa)&&
(v.push(Sa),H.push(ib));break;case "GeoRSS":-1===b.indexOf(v,Ta)&&v.push(Ta);break;case "KML":-1===b.indexOf(v,Ya)&&v.push(Ya);break;case "OpenStreetMap":-1===b.indexOf(v,ab)&&v.push(ab);break;case "VectorTileLayer":-1===b.indexOf(v,db)&&(v.push(db),d("ie")||H.push(ob));break;case "WebTiledLayer":-1===b.indexOf(v,fb)&&(v.push(fb),H.push(nb));break;case "WMS":-1===b.indexOf(v,gb)&&(v.push(gb),H.push(pb));break;default:B=!0}if(B)break}B&&(v=wb,H=xb);v.length?e(v,function(){a(v,arguments);H.length?e(H,
function(){a(H,arguments);k.resolve()}):k.resolve()}):k.resolve();return k}function Ca(f,r,a,k){var B=k.itemData,v=r.layerMixins,H=v&&v.length;if(H){var c=function(f){for(var r=0;r<H;r++){var a=v[r];if(a.mixin)if(a.hasOwnProperty("id")){if(f.id===a.id){t.mixin(f,a.mixin);break}}else if(f.url===a.url){t.mixin(f,a.mixin);break}}};b.forEach(B.baseMap&&B.baseMap.baseMapLayers,c);b.forEach(B.operationalLayers,c)}ia(k,r).then(function(){return l(k,r)}).then(function(){return z(k,r)}).then(function(r){var k=
r[0],l=r[1];if(!k.itemData.operationalLayers||0===k.itemData.operationalLayers.length)O(k,l).addCallback(function(r){pa(r.itemData,l).addCallback(t.hitch(null,Aa,r,f,l,a))});else{var B=new u,v=k.itemData.baseMap.baseMapLayers.slice(),H=b.filter(k.itemData.baseMap.baseMapLayers,function(f){return!f.isReference});r={item:k.item,itemData:{baseMap:{baseMapLayers:H}}};k.itemData.baseMap.baseMapLayers=b.filter(k.itemData.baseMap.baseMapLayers,function(f){return f.isReference});O(r,l).addCallback(function(r){pa(r.itemData,
l).addCallback(t.hitch(null,Aa,r,f,l,B))});B.then(function(f){O(k,l).addCallback(function(r){pa(r.itemData,l,f.map.spatialReference,H,f.map).addCallback(function(k){r.itemData.baseMap.baseMapLayers=v;Aa(r,f,l,a,k)})})},t.hitch(a,a.errback))}})}function na(f,r){"undefined"===typeof r&&(r=!0);Y._arcgisUrl&&0<Y._arcgisUrl.length&&(Y.arcgisUrl=Y._arcgisUrl);var a=Y.arcgisUrl+"/"+f,k={},l=new u;A({url:a,content:{f:"json"},callbackParamName:"callback",load:function(f){k.item=f;r?A({url:a+"/data",content:{f:"json"},
callbackParamName:"callback",load:function(f){k.itemData=f;l.callback(k)},error:function(f){l.errback(f)}}):l.callback(k)},error:function(f){l.errback(f)}});return l}var Y,da,Z,ta,va,qa,wa,Ga,Ua,Ka,Ha,Va,Qa,Pa,Ia,Wa,qb,rb,hb,sb,xa,tb,ub,vb,Na="../layers/ArcGISDynamicMapServiceLayer",Oa="../layers/ArcGISImageServiceLayer",Ra="../layers/ArcGISImageServiceVectorLayer",ib="./csv",Sa="../layers/CSVLayer",jb="../layers/DynamicLayerInfo",Ta="../layers/GeoRSSLayer",kb="../layers/ImageParameters",Xa="../layers/ImageServiceParameters",
Ya="../layers/KMLLayer",Za="../layers/LabelClass",mb="../layers/LayerDrawingOptions",$a="../layers/MosaicRule",ab="../layers/OpenStreetMapLayer",bb="../layers/RasterFunction",cb="../layers/StreamLayer",nb="../layers/TileInfo",ob="../layers/vector-tile",db="../layers/VectorTileLayer",eb="../virtualearth/VETiledLayer",fb="../layers/WebTiledLayer",gb="../layers/WMSLayer",pb="../layers/WMSLayerInfo",wb=[Na,Oa,Ra,Sa,Ta,Ya,Za,ab,cb,db,eb,fb,gb],xb=[ib,jb,kb,Xa,mb,$a,bb,nb,ob,pb];Y={arcgisUrl:location.protocol+
"//www.arcgis.com/sharing/rest/content/items",getItem:na,createMap:function(f,r,a){var k=new u;a=a||{};var l=a.infoTemplateClass;a._clazz=l&&(t.isObject(l)?l:t.getObject(l))||G;t.isString(f)?na(f).addCallback(t.hitch(null,Ca,r,a,k)).addErrback(t.hitch(k,k.errback)):Ca(r,a,k,f);return k},getLayerList:function(f){return f&&f.itemInfo&&f.itemInfo.itemData?ha(f.itemInfo.itemData):[]},getLegendLayers:function(f){return f&&f.itemInfo&&f.itemInfo.itemData?ba(f.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:O,
_getItemData:U,_getBingKey:V,_portalUrlResponse:f,_portalUrlFailure:r,_processFSItemProperties:W,_processSSItemProperties:v,_getLayers:pa,_preBuildLayerObjects:la,_buildLayerObjects:$,_preCreateMap:Aa,_getMapSR:ga,_createMap:ua,_addSelectionLayers:Fa,_createSelectionFeatureLayers:Ea,_getServiceInfo:za,_getFeatureCollectionItem:oa,_mergeFeatureCollectionItem:sa,_projectFeatureCollection:ma,_getLayersInfo:ra,_initLayer:ca,_loadAsCached:S,_loadAsDynamic:aa,_processPopups:B,_onLayersAddResult:Ja,_sameSpatialReferenceAsBasemap:ja,
_sameTilingSchemeAsBasemap:fa,_showPopup:Ma,_calculateClickTolerance:La,_getVisibleFeatureLayers:X,_updateLayerScaleInfo:Da,_checkUrl:Q,_isHostedService:H,_isAgolService:J,_getLegendLayers:ba};t.setObject("arcgis.utils",Y,g);return Y})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(e,t,b){e.DeferredList=function(e,u,q,s,h){var c=[];t.call(this);var a=this;0===e.length&&!u&&this.resolve([0,[]]);var d=0;b.forEach(e,function(b,h){function w(b,g){c[h]=
[b,g];d++;d===e.length&&a.resolve(c)}b.then(function(b){u?a.resolve([h,b]):w(!0,b)},function(b){q?a.reject(b):w(!1,b);if(s)return null;throw b;})})};e.DeferredList.prototype=new t;e.DeferredList.prototype.gatherResults=function(n){n=new e.DeferredList(n,!1,!0,!1);n.addCallback(function(e){var q=[];b.forEach(e,function(b){q.push(b[1])});return q});return n};return e.DeferredList})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C){var E={fromJson:function(b){var g;switch(b.type||""){case "simple":g=new h(b);break;case "uniqueValue":g=new c(b);break;case "classBreaks":g=new a(b);break;case "vectorField":g=new d(b);break;case "scaleDependent":g=this._scaleDependentFromJson(b);break;case "dotDensity":g=this._dotDensityFromJson(b);break;case "temporal":g=this._temporalFromJson(b);break;case "heatmap":g=this._heatmapFromJson(b)}return g},_scaleDependentFromJson:function(a){var b={},c=
a.minScale;b.rendererInfos=e.map(a.rendererInfos,function(a){var b=a.maxScale;a={minScale:c,maxScale:b,renderer:a.renderer&&this.fromJson(a.renderer)};c=b;return a},this);return new m(b)},_dotDensityFromJson:function(a){a.backgroundColor&&t.isArray(a.backgroundColor)&&(a.backgroundColor=q.toDojoColor(a.backgroundColor));0<a.dotSize&&(a.dotSize=n.pt2px(a.dotSize));a.fields&&e.forEach(a.fields,function(a){a&&t.isArray(a.color)&&(a.color=q.toDojoColor(a.color))});a.legendOptions&&(a.legendOptions.backgroundColor&&
t.isArray(a.legendOptions.backgroundColor)&&(a.legendOptions.backgroundColor=q.toDojoColor(a.legendOptions.backgroundColor)),a.legendOptions.outline&&(a.legendOptions.outline=s.fromJson(a.legendOptions.outline)));a.outline&&(a.outline=s.fromJson(a.outline));return new g(a)},_temporalFromJson:function(a){var b,c,d;a=a||{};b=this.fromJson(a.observationRenderer);c=a.latestObservationRenderer?this.fromJson(a.latestObservationRenderer):null;d=a.trackRenderer?this.fromJson(a.trackRenderer):null;a=this._agerFromJson(a.observationAger);
return new x(b,c,d,a)},_agerFromJson:function(a){var b;a=a||{};a.colorRange||a.sizeRange||a.alphaRange?b=this._timeRampFromJson(a):a.agerClassBreakInfos&&(b=this._timeClassBreaksFromJson(a));return b},_timeRampFromJson:function(a){var b,c,d;a.colorRange&&1<a.colorRange.length&&(b=[q.toDojoColor(a.colorRange[0]),q.toDojoColor(a.colorRange[1])]);a.sizeRange&&1<a.sizeRange.length&&(c=[a.sizeRange[0],a.sizeRange[1]]);a.alphaRange&&1<a.alphaRange.length&&(d=[a.alphaRange[0]/255,a.alphaRange[1]/255]);return new A(b,
c,d)},_timeClassBreaksFromJson:function(a){var b=a.agerClassBreakInfos,c,d,g=[],e;c=w.UNIT_DAYS;switch(a.timeUnits){case "esriTimeUnitsSeconds":c=w.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":c=w.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":c=w.UNIT_HOURS;break;case "esriTimeUnitsMinutes":c=w.UNIT_MINUTES;break;case "esriTimeUnitsMonths":c=w.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":c=w.UNIT_WEEKS;break;case "esriTimeUnitsYears":c=w.UNIT_YEARS}for(e=0;e<b.length;e+=1)a=b[e],d={minAge:0,
maxAge:a.oldestAge||Infinity},a.color&&(d.color=q.toDojoColor(a.color)),a.alpha&&(d.alpha=a.alpha/255),d.size=a.size,g[e]=d;return new w(g,c)},_heatmapFromJson:function(a){var b=a.colorStops;b&&b instanceof Array&&e.forEach(b,function(a){a.color=q.toDojoColor(a.color)});return new C(a)}};b("extend-esri")&&t.mixin(t.getObject("renderer",!0,u),E);return E})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),
function(e,t,b,n,u,q,s){e=e(s,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(b){if(b&&!b.declaredClass){var c=b;this.symbol=(b=c.symbol)&&(b.declaredClass?b:q.fromJson(b));this.label=c.label;this.description=c.description}else this.symbol=b},getSymbol:function(b){return this.symbol},toJson:function(){var b=t.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return u.fixJson(b)}});b("extend-esri")&&
t.setObject("renderer.SimpleRenderer",e,n);return e})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color".split(" "),function(e,t,b,n,u,q,s){var h=Math.PI;e=e(null,{declaredClass:"esri.renderer.Renderer",constructor:function(b){this._ipDataCache={};if(b&&!b.declaredClass){this.rotationInfo=b.rotationInfo;if(!this.rotationInfo){var a=b.rotationType,d=b.rotationExpression;if(a||d)this.rotationInfo={type:a,expression:d}}this.setRotationInfo(this.rotationInfo);
this.setSizeInfo(this._readSizeInfo(b.sizeInfo));this.setColorInfo(this._readColorInfo(b.colorInfo));this.setOpacityInfo(this._readOpacityInfo(b.transparencyInfo));this.setVisualVariables(this._readVariables(b.visualVariables));this.setAuthoringInfo(b.authoringInfo)}this.getSymbol=t.hitch(this,this.getSymbol)},getSymbol:function(b){},_readSizeInfo:function(b){if(b){var a=b.minSize,d=b.maxSize;a&&"number"===typeof a&&(b.minSize=u.pt2px(a));d&&"number"===typeof d&&(b.maxSize=u.pt2px(d))}return b},_readColorInfo:function(c){c&&
(b.forEach(c.colors,function(a,b){t.isArray(a)&&(c.colors[b]=s.toDojoColor(a))}),b.forEach(c.stops,function(a,b){a.color&&t.isArray(a.color)&&(c.stops[b].color=s.toDojoColor(a.color))}));return c},_readOpacityInfo:function(c){var a;c&&(a=t.mixin({},c),a.transparencyValues&&(a.opacityValues=b.map(a.transparencyValues,function(a){return 1-a/100}),delete a.transparencyValues),a.stops&&(a.stops=b.map(a.stops,function(a){a=t.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));
return a},_readVariables:function(c){c&&(c=b.map(c,function(a){"sizeInfo"===a.type?a=this._readSizeInfo(a):"colorInfo"===a.type?a=this._readColorInfo(a):"transparencyInfo"===a.type&&(a=this._readOpacityInfo(a),a.type="opacityInfo");return a},this));return c},setAuthoringInfo:function(b){this.authoringInfo=b},setRotationInfo:function(b){if(b=this.rotationInfo="string"===typeof b?{field:b}:b){if(b.expression&&!t.isFunction(b.expression)&&!b.field){var a=b.expression.match(this.rotationRE);a&&a[1]&&
(b.field=a[1])}b.rotationType=b.type}return this},rotationRE:/^\[([^\]]+)\]$/i,getRotationAngle:function(b,a){var d=this._getVarInfo(a&&a.rotationInfo,"rotationInfo").variable,g="arithmetic"===this._getRotationType(d),d=d.field,e=b.attributes,h=0;d&&(t.isFunction(d)?h=d.apply(this,arguments):e&&(h=e[d]||0),h=(h+(g?-90:0))*(g?-1:1));return h},_getRotationType:function(b){return b&&("rotationInfo"===b.type?b.rotationType:b.type)},setVisualVariables:function(c){var a=this._ipDataCache;b.forEach(this.visualVariables,
function(b,c){a.hasOwnProperty(c)&&(a[c]=null)},this);this.visualVariables=c;b.some(c,function(a){return!!a.target})&&c.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});b.forEach(c,function(b,c){"colorInfo"===b.type?a[c]=this._processColorInfo(b):"opacityInfo"===b.type?a[c]=this._processOpacityInfo(b):"sizeInfo"===b.type&&(a[c]=this._processSizeInfo(b))},this);return this},getVisualVariableValues:function(c){var a=this.visualVariables,d;a&&(d=b.map(a,function(a){var b;switch(a.type){case "sizeInfo":b=
this.getSize(c,{sizeInfo:a});break;case "colorInfo":b=this.getColor(c,{colorInfo:a});break;case "opacityInfo":b=this.getOpacity(c,{opacityInfo:a});break;case "rotationInfo":b=this.getRotationAngle(c,{rotationInfo:a})}return{variable:a,value:b}},this));return d},hasVisualVariables:function(b,a){return b?!!this.getVisualVariablesForType(b,a):!(!this.getVisualVariablesForType("sizeInfo",a)&&!this.getVisualVariablesForType("colorInfo",a)&&!this.getVisualVariablesForType("opacityInfo",a)&&!this.getVisualVariablesForType("rotationInfo",
a))},getVisualVariablesForType:function(c,a){var d=this.visualVariables,g;!a&&this[c]?("rotationInfo"===c&&(this[c].rotationType=this[c].type),g=[this[c]]):d&&(g=b.filter(d,function(b){return b.type===c&&("string"===typeof a?b.target===a:!1===a?!b.target:!0)}))&&0===g.length&&(g=void 0);return g},setSizeInfo:function(b){this.sizeInfo=this.proportionalSymbolInfo=b;this._ipDataCache.sizeInfo=this._processSizeInfo(b);return this},_processSizeInfo:function(b){return b&&{root:this._interpolateData(b),
minSize:this._interpolateData(b.minSize),maxSize:this._interpolateData(b.maxSize)}},_getVarInfo:function(c,a){var d;c&&c.type===a?(d=b.indexOf(this.visualVariables,c),c=this.visualVariables[d]):(d=a,c=this[a]);return{variable:c,cacheKey:d}},setProportionalSymbolInfo:function(b){this.setSizeInfo(b);return this},getSize:function(b,a){var d=this._getVarInfo(a&&a.sizeInfo,"sizeInfo"),g=d.variable,d=this._ipDataCache[d.cacheKey],e=null;if(g)var h=g.minSize,e=g.maxSize,h="object"===typeof h&&h?this._getSize(b,
h,d&&d.minSize,a):h,e="object"===typeof e&&e?this._getSize(b,e,d&&d.maxSize,a):e,e=this._getSize(b,g,d&&d.root,a,[h,e]);return e},_getSize:function(b,a,d,g,e){var q=b.attributes,n=a.field,x=a.expression,s=a.stops,u=0,F="number"===typeof b,y=F?b:null;if(n||x){var I=g&&g.scale,L=e?e[0]:a.minSize,D=e?e[1]:a.maxSize,G=a.minDataValue,N=a.maxDataValue,P=a.valueUnit||"unknown",K=a.valueRepresentation,R=a.scaleBy,M=a.normalizationField,T=q?parseFloat(q[M]):void 0,U=g&&g.shape;x?y="view.scale"===x.toLowerCase()?
I:null:"number"!==typeof y&&(t.isFunction(n)?y=n.apply(this,arguments):q&&(y=q[n]));if(null==y||M&&!F&&(isNaN(T)||0===T))return null;!isNaN(T)&&!F&&(y/=T);if(s)D=this._lookupData(y,d),y=D[0],L=D[1],y===L?u=s[y].size:(y=s[y].size,s=s[L].size,u=y+(s-y)*D[2]);else if(null!=L&&null!=D&&null!=G&&null!=N)y<=G?u=L:y>=N?u=D:(s=(y-G)/(N-G),"area"===R&&U?(L=(y="circle"===U)?h*Math.pow(L/2,2):L*L,D=y?h*Math.pow(D/2,2):D*D,s=L+s*(D-L),u=y?2*Math.sqrt(s/h):Math.sqrt(s)):u=L+s*(D-L));else if("unknown"===P)null!=
L&&null!=G&&(L&&G?(s=y/G,u="circle"===U?2*Math.sqrt(s*Math.pow(L/2,2)):"square"===U||"diamond"===U||"image"===U?Math.sqrt(s*Math.pow(L,2)):s*L):u=y+(L||G),u=u<L?L:u,null!=D&&u>D&&(u=D));else{s=(g&&g.resolution?g.resolution:1)*this._meterIn[P];if("area"===K)u=Math.sqrt(y/h)/s,u*=2;else if(u=y/s,"radius"===K||"distance"===K)u*=2;null!=L&&u<L&&(u=L);null!=D&&u>D&&(u=D)}}else u=s&&s[0]&&s[0].size,null==u&&(u=a.minSize);return u=isNaN(u)?0:u},getSizeRangeAtScale:function(b,a){var d,g=this._getVarInfo(b,
"sizeInfo"),e=this._ipDataCache[g.cacheKey],h={scale:a};if((b=g.variable)&&a){var q=b.minSize,g=b.maxSize,q="object"===typeof q&&q?this._getSize({},q,e&&e.minSize,h):q,e="object"===typeof g&&g?this._getSize({},g,e&&e.maxSize,h):g;if(null!=q||null!=e)d={minSize:q,maxSize:e}}return d},setColorInfo:function(b){this.colorInfo=b;this._ipDataCache.colorInfo=this._processColorInfo(b);return this},_processColorInfo:function(c){c&&(b.forEach(c.colors,function(a,b){t.isArray(a)&&(c.colors[b]=new s(a))}),b.forEach(c.stops,
function(a,b){a.color&&t.isArray(a.color)&&(c.stops[b].color=new s(a.color))}));return this._interpolateData(c)},getColor:function(b,a){var d=this._getVarInfo(a&&a.colorInfo,"colorInfo");return this._getColorComponent(b,d.variable,this._ipDataCache[d.cacheKey])},setOpacityInfo:function(b){this.opacityInfo=b;this._ipDataCache.opacityInfo=this._processOpacityInfo(b);return this},_processOpacityInfo:function(b){return this._interpolateData(b)},getOpacity:function(b,a){var d=this._getVarInfo(a&&a.opacityInfo,
"opacityInfo");return this._getColorComponent(b,d.variable,this._ipDataCache[d.cacheKey],!0)},_getColorComponent:function(b,a,d,g,e){var h=b.attributes,q=a&&a.field,x="number"===typeof b,n=x?b:null,s;if(q){var u=a.normalizationField,y=h?parseFloat(h[u]):void 0;"number"!==typeof n&&(t.isFunction(q)?n=q.apply(this,arguments):h&&(n=h[q]));if(null!=n&&(!u||x||!isNaN(y)&&0!==y))!isNaN(y)&&!x&&(n/=y),s=g?this._getOpacity(n,a,d):this._getColor(n,a,d)}else a&&(h=a.stops,g?(s=h&&h[0]&&h[0].opacity,null==s&&
(s=a.opacityValues&&a.opacityValues[0])):s=h&&h[0]&&h[0].color||a.colors&&a.colors[0]);e&&(e.data=n,e.value=s);return e||s},_interpolateData:function(c){var a;if(c)if(c.colors||c.opacityValues){var d=(c.colors||c.opacityValues).length,g=c.minDataValue,e=(c.maxDataValue-g)/(d-1);a=[];for(c=0;c<d;c++)a[c]=g+c*e}else c.stops&&(a=b.map(c.stops,function(a){return a.value}));return a},_getOpacity:function(b,a,d){b=this._lookupData(b,d);var g;a=a||this.opacityInfo;b&&(d=b[0],g=b[1],d===g?g=this._getOpacValue(a,
d):(d=this._getOpacValue(a,d),a=this._getOpacValue(a,g),g=d+(a-d)*b[2]));return g},_getOpacValue:function(b,a){return b.opacityValues?b.opacityValues[a]:b.stops[a].opacity},_getColor:function(b,a,d){b=this._lookupData(b,d);var g;a=a||this.colorInfo;b&&(g=b[0],d=b[1],g=g===d?this._getColorObj(a,g):s.blendColors(this._getColorObj(a,g),this._getColorObj(a,d),b[2]));return g},_getColorObj:function(b,a){return b.colors?b.colors[a]:b.stops[a].color},_lookupData:function(c,a){var d;if(a){var g=0,e=a.length-
1;b.some(a,function(a,b){if(c<a)return e=b,!0;g=b;return!1});d=[g,e,(c-a[g])/(a[e]-a[g])]}return d},_meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:6.21371E-4,"nautical-miles":5.39957E-4,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:0.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(b){if(b){b=t.mixin({},b);var a=b.minSize,d=b.maxSize;a&&(b.minSize="number"===typeof a?u.px2pt(a):t.clone(a));d&&(b.maxSize="number"===typeof d?u.px2pt(d):t.clone(d));if(a=b.legendOptions)if(b.legendOptions=
t.mixin({},a),a=a.customValues)b.legendOptions.customValues=a.slice(0)}return b},_writeColorInfo:function(c){c&&(c=t.mixin({},c),c.colors&&(c.colors=b.map(c.colors,function(a){return s.toJsonColor(a)})),c.stops&&(c.stops=b.map(c.stops,function(a){a=t.mixin({},a);a.color&&(a.color=s.toJsonColor(a.color));return a})));return c},_writeOpacityInfo:function(c){var a;c&&(a=t.mixin({},c),a.opacityValues&&(a.transparencyValues=b.map(a.opacityValues,function(a){return 100*(1-a)}),delete a.opacityValues),a.stops&&
(a.stops=b.map(a.stops,function(a){a=t.mixin({},a);a.transparency=100*(1-a.opacity);delete a.opacity;return a})));return a},toJson:function(){var c=this.visualVariables,a=t.clone(this.authoringInfo),d=this.getVisualVariablesForType("rotationInfo",!1),g=(d=d&&d[0])&&d.field,g=d&&(d.expression||g&&(t.isFunction(g)?g:"["+g+"]"));c&&(c=b.map(c,function(a){"sizeInfo"===a.type?a=this._writeSizeInfo(a):"colorInfo"===a.type?a=this._writeColorInfo(a):"opacityInfo"===a.type?(a=this._writeOpacityInfo(a),a.type=
"transparencyInfo"):"rotationInfo"===a.type&&(a=t.mixin({},a));return a},this));a&&b.forEach(a.visualVariables,function(a){"opacityInfo"===a.type&&(a.type="transparencyInfo")});return{rotationType:g&&(this._getRotationType(d)||"geographic"),rotationExpression:g,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:c,authoringInfo:a}}});n("extend-esri")&&t.setObject("renderer.Renderer",e,
q);return e})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(e,t,b,n,u,q,s,h){e=e(h,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(b,a,d,g,e){this.values=[];this._symbols={};this.infos=[];b&&!b.declaredClass?(a=b,this.defaultSymbol=(b=a.defaultSymbol)&&(b.declaredClass?b:s.fromJson(b)),this.attributeField=a.field1,this.attributeField2=
a.field2,this.attributeField3=a.field3,this.fieldDelimiter=a.fieldDelimiter,this.defaultLabel=a.defaultLabel,a.backgroundFillSymbol&&(this.backgroundFillSymbol=s.fromJson(a.backgroundFillSymbol)),t.forEach(a.uniqueValueInfos,this._addValueInfo,this)):(this.defaultSymbol=b,this.attributeField=a,this.attributeField2=d,this.attributeField3=g,this.fieldDelimiter=e);this._multiple=!!this.attributeField2},addValue:function(c,a){var d=b.isObject(c)?c:{value:c,symbol:a};this._addValueInfo(d)},removeValue:function(b){var a=
t.indexOf(this.values,b);-1!==a&&(this.values.splice(a,1),delete this._symbols[b],this.infos.splice(a,1))},getUniqueValueInfo:function(c){var a=this.attributeField,d=c.attributes,g,e;this._multiple?(c=this.attributeField2,g=this.attributeField3,e=[],a&&e.push(d[a]),c&&e.push(d[c]),g&&e.push(d[g]),a=e.join(this.fieldDelimiter||"")):a=b.isFunction(a)?a(c):d[a];return this._symbols[a]},getSymbol:function(b){return(b=this.getUniqueValueInfo(b))&&b.symbol||this.defaultSymbol},_addValueInfo:function(b){var a=
b.value;this.values.push(a);this.infos.push(b);var d=b.symbol;d&&!d.declaredClass&&(b.symbol=s.fromJson(d));this._symbols[a]=b},toJson:function(){var c=q.fixJson,a;a={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:t.map(this.infos||[],function(a){a=b.mixin({},a);a.symbol=a.symbol&&a.symbol.toJson();a.value+=
"";return c(a)})};this.backgroundFillSymbol&&(a.backgroundFillSymbol=this.backgroundFillSymbol.toJson());a=b.mixin(this.inherited(arguments),a);return c(a)}});n("extend-esri")&&b.setObject("renderer.UniqueValueRenderer",e,u);return e})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(e,t,b,n,u,q,s,h){e=e(h,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(b,
a){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(b&&!b.declaredClass){var d=b;this.attributeField=d.field;this.defaultSymbol=(b=d.defaultSymbol)&&(b.declaredClass?b:s.fromJson(b));this.backgroundFillSymbol=(b=d.backgroundFillSymbol)&&(b.declaredClass?b:s.fromJson(b));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],d,this);var g=d.minValue;(d=d.classBreakInfos)&&(d[0]&&q.isDefined(d[0].classMaxValue))&&
t.forEach(d,function(a){var b=a.classMaxValue;a.minValue=g;g=a.maxValue=b},this);t.forEach(d,this._addBreakInfo,this)}else this.defaultSymbol=b,this.attributeField=a},addBreak:function(c,a,d){c=b.isObject(c)?c:{minValue:c,maxValue:a,symbol:d};this._addBreakInfo(c)},removeBreak:function(b,a){var d,g=this.breaks,e,h=g.length,q=this._symbols;for(e=0;e<h;e++)if(d=g[e],d[0]==b&&d[1]==a){g.splice(e,1);delete q[b+"-"+a];this.infos.splice(e,1);break}},clearBreaks:function(){this.breaks=[];this._symbols={};
this.infos=[]},getBreakIndex:function(c){var a=this.attributeField,d=c.attributes,g=this.breaks,e=g.length,h=this.isMaxInclusive;if(b.isFunction(a))c=a(c);else{c=parseFloat(d[a]);var a=this.normalizationType,q;if(a)if(q=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===a)c=Math.log(c)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(q))c=100*(c/q);else if("field"===a)if(!isNaN(c)&&!isNaN(d))c/=d;else return-1}for(d=0;d<e;d++)if(a=g[d],a[0]<=c&&(h?c<=a[1]:c<a[1]))return d;
return-1},getBreakInfo:function(b){b=this.getBreakIndex(b);return-1!==b?this.infos[b]:null},getSymbol:function(b){return(b=this.breaks[this.getBreakIndex(b)])?this._symbols[b[0]+"-"+b[1]]:this.defaultSymbol},setMaxInclusive:function(b){this.isMaxInclusive=b},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],
["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],_copy:function(b,a,d){t.forEach(b,function(b){var c=b.split(":"),e,h,q;1<c.length&&(b=c[0],e=this["_"+b+"Enums"],"rest"===c[1]?(h="1",q="0"):"sdk"===c[1]&&(h="0",q="1"));c=a[b];if(void 0!==c&&(d[b]=c,e&&h)){var n,s=e.length;for(n=0;n<s;n++)if(e[n][h]===c){d[b]=e[n][q];break}}},this)},_addBreakInfo:function(b){var a=b.minValue,d=b.maxValue;this.breaks.push([a,
d]);this.infos.push(b);var g=b.symbol;g&&!g.declaredClass&&(b.symbol=s.fromJson(g));this._symbols[a+"-"+d]=b.symbol},toJson:function(){var c=this.infos||[],a=q.fixJson,d=c[0]&&c[0].minValue,g=this.backgroundFillSymbol,c=b.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:g&&g.toJson(),minValue:-Infinity===d?-Number.MAX_VALUE:d,classBreakInfos:t.map(c,function(c){c=b.mixin({},c);c.symbol=
c.symbol&&c.symbol.toJson();c.classMaxValue=Infinity===c.maxValue?Number.MAX_VALUE:c.maxValue;delete c.minValue;delete c.maxValue;return a(c)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,c);c.hasOwnProperty("normalizationType")&&!c.normalizationType&&delete c.normalizationType;c.hasOwnProperty("classificationMethod")&&!c.classificationMethod&&delete c.classificationMethod;return a(c)}});n("extend-esri")&&b.setObject("renderer.ClassBreaksRenderer",
e,u);return e})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m,w){var A=e(h,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(a){q.isDefined(a)||
(a={});a.attributeField=a.attributeField||"Magnitude";a.rotationInfo=a.rotationInfo||this._getRotationInfo(a);e.safeMixin(this,a);this.style=this.style||A.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:m.fromJson(this.singleArrowSymbol));this.renderer=new c(this._getDefaultSymbol(),a.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(a){return this.renderer&&
this.renderer.getSymbol(a)},setVisualVariables:function(a){a=n.filter(a,function(a){if("sizeInfo"===a.type)return q.isDefined(this._updateSizeInfo(a))},this);this.inherited(arguments);return this},setSizeInfo:function(a){this._updateSizeInfo(a);this.inherited(arguments);return this},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);return this},setColorInfo:function(a){return this},_updateRenderer:function(a){return!q.isDefined(this.renderer)?Error("Invalid Renderer!"):a===A.STYLE_SINGLE_ARROW?
this._createSingleArrowRenderer():a===A.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():a===A.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():a===A.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():a===A.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():a===A.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():a===A.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():a===A.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():a===A.STYLE_SCALAR?this._createSimpleScalarRenderer():
a===A.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer()},_updateSizeInfo:function(a){return a&&q.isDefined(a.minSize)&&q.isDefined(a.maxSize)&&q.isDefined(a.minDataValue)&&q.isDefined(a.maxDataValue)?(this.style===A.STYLE_WIND_BARBS&&(a.minSize=a.maxSize),a.field=a.field||"Magnitude",a.type="sizeInfo",a):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new s([56,168,0]));var a=[0,1E-6,3.5,7,10.5,14];if(q.isDefined(this.minDataValue)&&
q.isDefined(this.maxDataValue)){var b=(this.maxDataValue-this.minDataValue)/5,a=[],c,d;d=this.minDataValue;for(c=0;6>c;c++)a[c]=d,d+=b}this._addBreaks(a,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new s([214,47,39]));this._addBreaks([0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,
28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new s([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,
29]])},_createBeaufortFeetRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];n.forEach(a,function(b,c){a[c]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new s([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,
32.7];n.forEach(a,function(b,c){a[c]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new s([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];n.forEach(a,function(b,c){a[c]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new s([214,
47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new s([177,177,177]));this._addBreaks([0,0.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new s([177,177,177]));
this._addBreaks([0,0.25,0.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new d({url:w.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var b=[],c,e;for(c=0;150>=c;c+=5)b.push(c);e="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var h=new d({url:w.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=h;for(c=0;c<b.length-1;c++)0==c?this.renderer.addBreak({minValue:b[c],maxValue:b[c+1],symbol:h}):this.renderer.addBreak({minValue:b[c],maxValue:b[c+1],symbol:(new a).setPath(e[c]).setOutline((new g).setWidth(1.5)).setSize(20).setColor(new s([0,0,0,255]))})},_getDefaultSymbol:function(b){return(new a).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new g).setWidth(0)).setSize(20).setColor(b||
new s([0,92,230]))},_getRotationInfo:function(a){var b=a&&a.flowRepresentation||A.FLOW_FROM,c=a&&a.rotationField||"Direction",d=A.FLOW_FROM;return{field:function(a){a=a.attributes[c];return b===d?a:a+180},type:"geographic"}},_addBreaks:function(a,b){if(!q.isDefined(this.renderer))return Error("Invalid Renderer!");if(!a||!b||!a.length||!b.length||!(a.length>=b.length))return Error("AddBreaks: Input arguments break values and colors not valid");var c;for(c=0;c<b.length;c++)this.renderer.addBreak({minValue:a[c],
maxValue:a[c+1],symbol:this._getDefaultSymbol(new s(b[c]))})},toJson:function(){var a=t.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation});this.renderer&&(this.renderer.defaultSymbol&&this.style===A.STYLE_SINGLE_ARROW)&&(a.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return q.fixJson(a)}});t.mixin(A,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",STYLE_CLASSIFIED_ARROW:"classified_arrow",
STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});b("extend-esri")&&t.setObject("renderer.VectorFieldRenderer",A,u);return A})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m){e=e(a,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(a){this.dotSize=a.dotSize||3;this.dotValue=a.dotValue;this.fields=a.fields;this.outline=a.outline;this.backgroundColor=a.backgroundColor;this.exactCount=a.exactCount||!0;this.dotShape=a.dotShape||"square";this.legendOptions=a.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(a){var b,c;this._currentGraphic=a;if(!this._supportsCanvas)return null;this._map||(this._map=a.getLayer()._map,this._objectIdField=a.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",t.hitch(this,function(a){this._currentMapScale=this._map.getScale();this._currentResolution=a.extent.getWidth()/this._map.width;
this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]])return b=this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]],c=this._getShapeProperties(a),b.setOffset(c.dx,c.dy),b;b=this._generateFieldsCount(this.fields,a.attributes,this.dotValue);c=this._getShapeProperties(a);b=new d(this._generateImageSrc(c.width,c.height,b,c.minXY,c.maxXY),this.outline,c.width,c.height);b.setOffset(c.dx,
c.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]]=b},_generateFieldsCount:function(a,b,c){var d,g;for(g=a.length-1;0<=g;g--)d=b[a[g].name]/c,a[g].numPoints=Math.round(d);return a},_getShapeProperties:function(a){var b,c,d,g;b=a.geometry.getExtent();b.contains(this._map.extent)&&(b=this._map.extent);d=Math.ceil(b.getWidth()/this._currentResolution);g=Math.ceil(b.getHeight()/this._currentResolution);
c=this._map.toScreen(new m(b.xmin,b.ymin,b.spatialReference));b=this._map.toScreen(new m(b.xmax,b.ymax,b.spatialReference));a=a.getLayer().getNode().getCTM();return{minXY:c,maxXY:b,dx:(c.x-a.e)%d,dy:(b.y-a.f)%g,width:d,height:g}},_generateImageSrc:function(a,b,c,d,g,e){var h=this.dotSize,m,q,n;this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);m=this._canvas.getContext("2d");if(e=e||this.backgroundColor)m.fillStyle=e.toCss(!0),m.fillRect(0,0,a,b),m.fill();
for(e=c.length-1;0<=e;e--){m.fillStyle=c[e].color.toCss(!0);for(q=c[e].numPoints-1;0<=q;q--)n=this._getRandomPoint(a,b,d,g),"square"===this.dotShape?m.fillRect(n.x,n.y,h,h):"circle"===this.dotShape&&(m.beginPath(),m.arc(n.x,n.y,h/2,0,2*Math.PI,!0)),m.fill()}return this._canvas.toDataURL()},_initCanvas:function(a,b){var c=n.create("canvas",{id:"canvas",width:a+"px",height:b+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(c);return c},_getRandomInt:function(a,
b){return Math.floor(Math.random()*(b-a+1)+a)},_getRandomPoint:function(a,b,c,d){var e={},h=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&a*b>this._exactCountMinArea){do e.x=this._getRandomInt(c.x,d.x),e.y=this._getRandomInt(d.y,c.y),a=new g(e.x,e.y),a=this._checkPointShapeBounds(a,this.dotSize+h,this._currentGraphic.geometry),!0===a&&(e.x-=c.x,e.y-=d.y);while(!1===a)}else e.x=this._getRandomInt(0,a),e.y=this._getRandomInt(0,b);return e},_checkPointShapeBounds:function(a,
b,c){var d=null,d=!1,g=!0,e=0;do{switch(e){case 1:a.x+=b;break;case 2:a.y+=b;break;case 3:a.x-=b}d=this._map.toMap(a);d=c.contains(d);!1===d&&(g=!1);e+=1}while(3>=e&&!0===g);return d},setDotSize:function(a){0<a&&(this.dotSize=a)},setDotValue:function(a){0<a&&(this.dotValue=a)},setOutline:function(a){this.outline=a},setBackgroundColor:function(a){this.backgroundColor=a},toJson:function(){var a=t.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:c.toJsonColor(this.backgroundColor),
dotShape:this.dotShape,dotSize:0<this.dotSize?q.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:b.map(this.fields,function(a){return h.fixJson({color:c.toJsonColor(a.color),name:a.name})}),legendOptions:this.legendOptions&&h.fixJson({backgroundColor:c.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});
return h.fixJson(a)}});u("extend-esri")&&t.setObject("renderer.DotDensityRenderer",e,s);return e})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(e,t,b,n,u,q,s){e=e(s,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(b){this.setRendererInfos(b&&b.rendererInfos||[])},setRendererInfos:function(b){this.rendererInfos=b;this._setRangeType();return this},getSymbol:function(b){var c=
this.getRendererInfo(b);return c&&c.renderer&&c.renderer.getSymbol(b)},getRendererInfo:function(b){b=b.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(b.getZoom()):this.getRendererInfoByScale(b.getScale())},getRendererInfoByZoom:function(b){var c,a=this.rendererInfos,d,g=0;do c=a[g],b>=c.minZoom&&b<=c.maxZoom&&(d=c),g++;while(!d&&g<a.length);return d},getRendererInfoByScale:function(b){var c,a=this.rendererInfos,d,g=0,e,q,n,x;do c=a[g],e=c.minScale,q=c.maxScale,n=!e,x=
!q,!n&&b<=e&&(n=!0),!x&&b>=q&&(x=!0),n&&x&&(d=c),g++;while(!d&&g<a.length);return d},addRendererInfo:function(b){var c,a=0,d,g=this.rendererInfos,e=b.hasOwnProperty("minZoom")?"minZoom":"minScale",q=g.length;do{d=g[a];if(q===a||b[e]<d[e])g.splice(a,0,b),this._setRangeType(),c=!0;a++}while(!c&&a<q);return this},_setRangeType:function(){var b=this.rendererInfos;if(b=b&&b[0])this.rangeType=b.hasOwnProperty("minZoom")?"zoom":b.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;
var e=this.rendererInfos||[],c=e[0]&&e[0].minScale,e=b.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<c?c:0,rendererInfos:t.map(e,function(a){return q.fixJson({maxScale:0<a.maxScale?a.maxScale:0,renderer:a.renderer&&a.renderer.toJson()})})});return q.fixJson(e)}});n("extend-esri")&&b.setObject("renderer.ScaleDependentRenderer",e,u);return e})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(e,t,b,n,u,q,s,h,c,a){var d=e(a,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(a,b){this.infos=a;this.timeUnits=b||"day";a.sort(function(a,b){return a.minAge<b.minAge?-1:a.minAge>b.minAge?1:0})},getAgedSymbol:function(a,b){var c=b.getLayer(),d=b.attributes,e=s.isDefined;a=h.fromJson(a.toJson());var q=c._map.timeExtent.endTime;if(!q)return a;var n=u.difference(new Date(d[c._startTimeField]),q,this.timeUnits);t.some(this.infos,function(b){if(n>=b.minAge&&n<=b.maxAge){var c=
b.color,d=b.size;b=b.alpha;c&&a.setColor(c);e(d)&&this._setSymbolSize(a,d);e(b)&&a.color&&(a.color.a=b);return!0}},this);return a},toJson:function(){var a={agerClassBreakInfos:[]},b,d,e;a.timeUnits=this._getRestUnits(this.timeUnits);for(b=0;b<this.infos.length;b+=1)d=this.infos[b],e={},e.oldestAge=Infinity===d.maxAge?null:d.maxAge,e.size=d.size,d.color&&(e.color=c.toJsonColor(d.color)),d.alpha&&(e.alpha=Math.round(255*d.alpha)),a.agerClassBreakInfos[b]=e;return a},_getRestUnits:function(a){var b=
"esriTimeUnitsDays";switch(a){case d.UNIT_SECONDS:b="esriTimeUnitsSeconds";break;case d.UNIT_MILLISECONDS:b="esriTimeUnitsMilliseconds";break;case d.UNIT_HOURS:b="esriTimeUnitsHours";break;case d.UNIT_MINUTES:b="esriTimeUnitsMinutes";break;case d.UNIT_MONTHS:b="esriTimeUnitsMonths";break;case d.UNIT_WEEKS:b="esriTimeUnitsWeeks";break;case d.UNIT_YEARS:b="esriTimeUnitsYears"}return b}});b.mixin(d,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",
UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});n("extend-esri")&&b.setObject("renderer.TimeClassBreaksAger",d,q);return d})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(b,e){},_setSymbolSize:function(b,e){switch(b.type){case "simplemarkersymbol":b.setSize(e);break;case "picturemarkersymbol":b.setWidth(e);b.setHeight(e);break;case "simplelinesymbol":case "cartographiclinesymbol":b.setWidth(e);
break;case "simplefillsymbol":case "picturefillsymbol":b.outline&&b.outline.setWidth(e)}}});b("extend-esri")&&t.setObject("renderer.SymbolAger",e,n);return e})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(e,t,b,n,u,q,s,h){e=e(h,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(b,a,d){this.colorRange=b;this.sizeRange=a;this.alphaRange=d},getAgedSymbol:function(c,
a){var d=a.getLayer(),g=a.attributes;c=q.fromJson(c.toJson());var e=d._map.timeExtent,h=e.startTime,e=e.endTime;if(!h||!e)return c;h=h.getTime();e=e.getTime();d=new Date(g[d._startTimeField]);d=d.getTime();d<h&&(d=h);h=e===h?1:(d-h)/(e-h);if(d=this.sizeRange)g=d[0],e=d[1],d=Math.abs(e-g)*h,this._setSymbolSize(c,g<e?g+d:g-d);if(d=this.colorRange){var e=d[0],n=d[1],x=Math.round,g=new b,s=e.r,t=n.r,d=Math.abs(t-s)*h;g.r=x(s<t?s+d:s-d);s=e.g;t=n.g;d=Math.abs(t-s)*h;g.g=x(s<t?s+d:s-d);s=e.b;t=n.b;d=Math.abs(t-
s)*h;g.b=x(s<t?s+d:s-d);e=e.a;n=n.a;d=Math.abs(n-e)*h;g.a=e<n?e+d:e-d;c.setColor(g)}g=c.color;if((d=this.alphaRange)&&g)e=d[0],n=d[1],d=Math.abs(n-e)*h,g.a=e<n?e+d:e-d;return c},toJson:function(){var b={};this.sizeRange&&(b.sizeRange=this.sizeRange);this.colorRange&&(b.colorRange=[s.toJsonColor(this.colorRange[0]),s.toJsonColor(this.colorRange[1])]);this.alphaRange&&(b.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return b}});n("extend-esri")&&t.setObject("renderer.TimeRampAger",
e,u);return e})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(e,t,b,n,u){e=e(u,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(b,e,h,c){this.observationRenderer=b;this.latestObservationRenderer=e;this.trackRenderer=h;this.observationAger=c},getSymbol:function(b){var e=b.getLayer(),h=this.getObservationRenderer(b),c=h&&h.getSymbol(b),a=this.observationAger;e.timeInfo&&(e._map.timeExtent&&
h===this.observationRenderer&&a&&c)&&(c=a.getAgedSymbol(c,b));return c},getObservationRenderer:function(b){return 0===b.getLayer()._getKind(b)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var b={type:"temporal"};b.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(b.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(b.trackRenderer=this.trackRenderer.toJson());this.observationAger&&
(b.observationAger=this.observationAger.toJson());return b}});b("extend-esri")&&t.setObject("renderer.TemporalRenderer",e,n);return e})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(e,t,b,n,u,q,s,h,c,a){e=e([a],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,
field:null,fieldOffset:null,colorStops:null,constructor:function(a){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof a&&(a=JSON.parse(a)),t.mixin(this,a),this._canvas=null,!this.colors&&!this.colorStops&&(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:0.75,color:"rgba(255, 140, 0, 1)"},{ratio:0.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(a){if(!this._supportsCanvas)return!1;var b=
a.attributes.imageData;a=a.attributes.size;if(!a)return null;var c=this._getContext(a[0],a[1]),e=c.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):new Uint8Array(b.buffer));if(window.CanvasPixelArray&&e.data instanceof window.CanvasPixelArray)for(var q=e.data,n=q.length;n--;)q[n]=b[n];else e.data.set(b);
c.putImageData(e,0,0);return new h(c.canvas.toDataURL(),a[0],a[1])},setColors:function(a){if(a&&(a instanceof Array||a.colors))this.gradient=this._generateGradient(a.colors||a),this.colors=a;return this},setColorStops:function(a){if(a&&(a instanceof Array||a.colorStops))this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a;return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=
a;return this},setFieldOffset:function(a){this.fieldOffset=a;return this},setBlurRadius:function(a){this.blurRadius=a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var a=t.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(a.fieldOffset=this.fieldOffset);
b.forEach(a.colorStops,function(a){a.color=c.toJsonColor(a.color)});return s.fixJson(a)},_getContext:function(a,b){this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);return this._canvas.getContext("2d")},_initCanvas:function(a,b){var c=n.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: -10000px; top: 0px;"},null);c.width=a;c.height=b;document.body.appendChild(c);return c},_generateGradient:function(a,b){b||(b=
512);for(var c=this._colorsToStops(a),e=this._getContext(1,b||512),h=e.createLinearGradient(0,0,0,b),q=0,n;q<c.length;q++)n=c[q],h.addColorStop(n.ratio,n.color.toCss(!0));e.fillStyle=h;e.fillRect(0,0,1,b);return e.getImageData(0,0,1,b).data},_colorsToStops:function(a){var c=[];if(!a[0])return c;if(null!=a[0].ratio)c=b.map(a,function(a){return{ratio:a.ratio,color:this._toColor(a.color)}},this);else if(null!=a[0].value){var e=Infinity,c=-Infinity,h=0,q;for(q=0;q<a.length;q++){var n=a[q].value;n<e&&
(e=n);n>c&&(c=n)}h=c-e;this.maxPixelIntensity=c;this.minPixelIntensity=e;c=b.map(a,function(a){var b=a.value;a=this._toColor(a.color);return{value:b,ratio:(b-e)/h,color:a}},this)}else var s=a.length-1,c=b.map(a,function(a,b){return{color:this._toColor(a),ratio:b/s}},this);return c},_toColor:function(a){!a.toRgba&&!a.declaredClass&&(a=new c(a));return a}});u("extend-esri")&&t.setObject("renderer.HeatmapRenderer",e,q);return e})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),
function(e,t,b,n,u,q,s,h){e=e([q,s],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(b,a){t.mixin(this,a);this.initialize(b,a)},getTitle:function(b){var a;this.info&&(a=this.titleHasRelatedFields?"":this._getPopupValues(b,!0).title);return a||""},getContent:function(b){return this.info?(new h({template:this,graphic:b,chartTheme:this.chartTheme},n.create("div"))).domNode:""}});b("extend-esri")&&t.setObject("dijit.PopupTemplate",e,u);return e})},
"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x){e=e(null,{declaredClass:"esri.PopupInfo",initialize:function(a,c){if(a){t.mixin(this,c);this.info=a;this.title=this.getTitle;this.content=this.getContent;var d=this._fieldLabels=
{},g=this._fieldsMap={};a.fieldInfos&&b.forEach(a.fieldInfos,function(a){var b=a.fieldName.toLowerCase();d[b]=a.label;g[b]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(a.title&&-1!==a.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return n.fromJson(n.toJson(this.info))},getTitle:function(){},getContent:function(){},getFieldInfo:function(a){var c;b.some(this.info&&this.info.fieldInfos,function(b){b.fieldName===a&&(c=b);return!!c});return c},getComponents:function(a){var c=
this.info,d=new s,g,e;c.fieldInfos&&(e=b.filter(c.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));e&&0<e.length&&(g=this._getRelatedRecords({graphic:a,fieldsInfo:e}));g?g.always(t.hitch(this,function(){d.resolve(this._getPopupValues(a))})):d.resolve(this._getPopupValues(a));return d.promise},getAttachments:function(a){var b=a.getLayer();a=a.attributes;if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&(a=a&&a[b.objectIdField]))return b.queryAttachmentInfos(a)},
_getPopupValues:function(c,d){var g=this.info,e=c.getLayer(),h=t.clone(c.attributes)||{},m=t.clone(h),q=g.fieldInfos,n="",x="",s,w,u,A,T,U=e&&e._getDateOpts&&e._getDateOpts().properties,U=U&&U.slice(0),V={dateFormat:{properties:U,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo)for(A in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(A)){var W=this._relatedInfo[A],v=this._relatedLayersInfo[A];W&&(b.forEach(W.relatedFeatures,function(f){for(T in f.attributes)if(f.attributes.hasOwnProperty(T)&&
"esriRelCardinalityOneToOne"===v.relation.cardinality){var a=this._toRelatedFieldName([v.relation.id,T]);h[a]=m[a]=f.attributes[T]}},this),b.forEach(W.relatedStatsFeatures,function(f){for(T in f.attributes)if(f.attributes.hasOwnProperty(T)){var a=this._toRelatedFieldName([v.relation.id,T]);h[a]=m[a]=f.attributes[T]}},this))}q&&b.forEach(q,function(f){w=f.fieldName;var a=this._getLayerFieldInfo(e,w);a&&(w=f.fieldName=a.name);m[w]=this._formatValue(m[w],w,V);U&&(f.format&&f.format.dateFormat)&&(f=b.indexOf(U,
w),-1<f&&U.splice(f,1))},this);if(e){A=e.types;var O=(W=e.typeIdField)&&h[W];for(w in h)if(h.hasOwnProperty(w)&&-1===w.indexOf(this._relatedFieldPrefix)&&(u=h[w],a.isDefined(u))){var z=this._getDomainName(e,c,A,O,w,u);a.isDefined(z)?m[w]=z:w===W&&(z=this._getTypeName(e,c,u),a.isDefined(z)&&(m[w]=z))}}g.title&&(n=this._processFieldsInLinks(this._fixTokens(g.title,e),h),n=t.trim(a.substitute(m,n,V)||""));if(d)return{title:n};g.description&&(x=this._processFieldsInLinks(this._fixTokens(g.description,
e),h),x=t.trim(a.substitute(m,x,V)||""));q&&(s=[],b.forEach(q,function(f){(w=f.fieldName)&&f.visible&&s.push([f.label||w,a.substitute(m,"${"+w+"}",V)||""])}));var l,f;g.mediaInfos&&(l=[],b.forEach(g.mediaInfos,function(r){f=0;u=r.value;switch(r.type){case "image":var k=u.sourceURL,k=k&&t.trim(a.substitute(h,this._fixTokens(k,e)));f=!!k;break;case "piechart":case "linechart":case "columnchart":case "barchart":var B,k=u.normalizeField;u.fields=b.map(u.fields,function(f){return(B=this._getLayerFieldInfo(e,
f))?B.name:f},this);k&&(B=this._getLayerFieldInfo(e,k),u.normalizeField=B?B.name:k);f=b.some(u.fields,function(f){return a.isDefined(h[f])||-1!==f.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(f){r=t.clone(r);u=r.value;var k=r.title?this._processFieldsInLinks(this._fixTokens(r.title,e),h):"",v=r.caption?this._processFieldsInLinks(this._fixTokens(r.caption,e),h):"";r.title=k?t.trim(a.substitute(m,k,V)||""):"";r.caption=v?t.trim(a.substitute(m,v,V)||""):"";if("image"===
r.type)u.sourceURL=a.substitute(h,this._fixTokens(u.sourceURL,e)),u.linkURL&&(u.linkURL=t.trim(a.substitute(h,this._fixTokens(u.linkURL,e))||""));else{var c,d;b.forEach(u.fields,function(f,a){if(-1!==f.indexOf(this._relatedFieldPrefix))d=this._getRelatedChartInfos(f,u,h,V),d instanceof Array?u.fields=d:u.fields[a]=d;else{var r=h[f],r=void 0===r?null:r;c=h[u.normalizeField]||0;r&&c&&(r/=c);u.fields[a]={y:r,tooltip:(this._fieldLabels[f.toLowerCase()]||f)+":\x3cbr/\x3e"+this._formatValue(r,f,V,!!c)}}},
this)}l.push(r)}},this));return{title:n,description:x,hasDescription:!!g.description,fields:s&&s.length?s:null,mediaInfos:l&&l.length?l:null,formatted:m,editSummary:e&&e.getEditSummary?e.getEditSummary(c):""}},_getRelatedChartInfos:function(a,c,d,g){var e,h,m,q,n,x;e=[];x=this._fromRelatedFieldName(a);n=x[0];h=this._relatedInfo[n];n=this._relatedLayersInfo[n];h&&b.forEach(h.relatedFeatures,function(b){b=b.attributes;var h,n;for(n in b)if(b.hasOwnProperty(n)&&n===x[1]){h={};q=b[n];c.normalizeField&&
(m=-1!==c.normalizeField.indexOf(this._relatedFieldPrefix)?b[this._fromRelatedFieldName(c.normalizeField)[1]]:d[c.normalizeField]);q&&m&&(q/=m);if(c.tooltipField)if(-1!==c.tooltipField.indexOf(this._relatedFieldPrefix)){var s=this._fromRelatedFieldName(c.tooltipField)[1];h.tooltip=b[s]&&"string"===typeof b[s]?b[s]+":\x3cbr/\x3e"+this._formatValue(q,b[s],g,!!m):s+":\x3cbr/\x3e"+this._formatValue(q,s,g,!!m)}else h.tooltip=(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(q,c.tooltipField,
g,!!m);else h.tooltip=q;h.y=q;e.push(h)}},this);return"esriRelCardinalityOneToMany"===n.relation.cardinality||"esriRelCardinalityManyToMany"===n.relation.cardinality?e:e[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,_fixTokens:function(a,b){var c=this;return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,d,g){a=c._getLayerFieldInfo(b,g);return"$"+(a?"{"+a.name+"}":d)})},_encodeAttributes:function(a){a=
t.clone(a)||{};var b,c;for(b in a)if((c=a[b])&&"string"===typeof c)c=encodeURIComponent(c).replace(/\'/g,"\x26apos;"),a[b]=c;return a},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b),d=this;a&&(a=a.replace(this._reHref,function(a,g){return d._addValuesToHref(a,g,b,c)}).replace(this._reHrefApos,function(a,g){return d._addValuesToHref(a,g,b,c)}));return a},_addValuesToHref:function(b,c,d,g){c=c&&t.trim(c);return a.substitute(c&&0===c.indexOf("${")?d:g,b)},_getLayerFieldInfo:function(a,
b){return a&&a.getField?a.getField(b):null},_formatValue:function(c,d,g,e){var h=this._fieldsMap[d.toLowerCase()],m=h&&h.format;d=-1!==b.indexOf(g.dateFormat.properties,d);var q="number"===typeof c&&!d&&(!m||!m.dateFormat);if(!a.isDefined(c)||!h||!a.isDefined(m))return q?this._forceLTR(c):c;var n="",h=[],s=m.hasOwnProperty("places")||m.hasOwnProperty("digitSeparator"),w=m.hasOwnProperty("digitSeparator")?m.digitSeparator:!0;if(s&&!d)n="NumberFormat",h.push("places: "+(a.isDefined(m.places)&&(!e||
0<m.places)?Number(m.places):"Infinity")),h.length&&(n+="("+h.join(",")+")");else if(m.dateFormat)n="DateFormat"+this._insertOffset(this._dateFormats[m.dateFormat]||this._dateFormats.shortDateShortTime);else return q?this._forceLTR(c):c;var u=this._applyFormatting(c,n,g);s&&-1<c.constructor.toString().indexOf("Array")&&(u="",b.forEach(c,t.hitch(this,function(a){u=u+this._applyFormatting(a,n,g)+" "})));s&&!w&&x.group&&(u=u.replace(RegExp("\\"+x.group,"g"),""));return q?this._forceLTR(u):u},_applyFormatting:function(b,
c,d){return a.substitute({myKey:b},"${myKey:"+c+"}",d)||""},_forceLTR:function(a){var b=h("ie");return b&&10>=b?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+a+"\x3c/span\x3e"},_insertOffset:function(b){b&&(b=a.isDefined(this.utcOffset)?b.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):b);return b},_getDomainName:function(a,b,c,d,g,e){return(a=a.getDomain&&a.getDomain(g,{feature:b}))&&a.codedValues?a.getName(e):null},_getTypeName:function(a,b,c){return(a=a.getType&&a.getType(b))&&a.name},_getRelatedRecords:function(a){var b=
a.graphic,c=new s,d;this._relatedLayersInfo?this._queryRelatedLayers(b).then(t.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),t.hitch(this,this._handlerErrorResponse,c)):this._getRelatedLayersInfo(a).then(t.hitch(this,function(a){for(d in a)a.hasOwnProperty(d)&&a[d]&&(this._relatedLayersInfo[d].relatedLayerInfo=a[d]);this._queryRelatedLayers(b).then(t.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),t.hitch(this,this._handlerErrorResponse,c))}),t.hitch(this,this._handlerErrorResponse,
c));return c.promise},_getRelatedLayersInfo:function(a){var d=a.fieldsInfo,e,h,m={};e=a.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});b.forEach(d,function(a){var c,d,g,h;c=this._fromRelatedFieldName(a.fieldName);d=c[0];c=c[1];d&&(this._relatedLayersInfo[d]||(b.some(e.relationships,function(a){if(a.id==d)return h=a,!0}),h&&(this._relatedLayersInfo[d]={relation:h,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[d]&&(this._relatedLayersInfo[d].relatedFields.push(c),
a.statisticType&&(g=new A,g.statisticType=a.statisticType,g.onStatisticField=c,g.outStatisticFieldName=c,this._relatedLayersInfo[d].outStatistics.push(g))))},this);for(h in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(h)&&this._relatedLayersInfo[h]&&(a=this._relatedLayersInfo[h].relation,a=e.url.replace(/[0-9]+$/,a.relatedTableId),this._relatedLayersInfo[h].relatedLayerUrl=a,m[h]=g({url:a,content:{f:"json"},callbackParamName:"callback"}));return c(m)},_queryRelatedLayers:function(a){var b=
{},d;for(d in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(d)&&(b[d]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[d]}));return c(b)},_queryRelatedLayer:function(a){var d,g,e,h,q,n,x,s,t,u;d=a.graphic;g=d.getLayer().url.match(/[0-9]+$/g)[0];s=a.relatedInfo;x=s.relatedLayerInfo;t=s.relatedLayerUrl;u=s.relation;b.some(x.relationships,function(a){if(a.relatedTableId===parseInt(g,10))return e=a,!0},this);e&&(a=new m,b.some(x.fields,function(a){if(a.name===e.keyField)return q=
-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)?"number":"string",!0}),h="string"===q?e.keyField+"\x3d'"+d.attributes[u.keyField]+"'":e.keyField+"\x3d"+d.attributes[u.keyField],a.where=h,a.outFields=s.relatedFields,s.outStatistics&&(0<s.outStatistics.length&&x.supportsStatistics)&&(n=new m,n.where=a.where,n.outFields=a.outFields,n.outStatistics=s.outStatistics),d=new w(t),h=[],h.push(d.execute(a)),n&&h.push(d.execute(n)));return c(h)},
_setRelatedRecords:function(b,c){this._relatedInfo=[];for(var d in c)if(c.hasOwnProperty(d)&&c[d]){var g=c[d];this._relatedInfo[d]={};this._relatedInfo[d].relatedFeatures=g[0].features;a.isDefined(g[1])&&(this._relatedInfo[d].relatedStatsFeatures=g[1].features)}},_handlerErrorResponse:function(a,b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+
a[0]+"/"+a[1]);return b}});q("extend-esri")&&(d.PopupInfo=d.PopupInfoTemplate=e);return e})},"esri/tasks/QueryTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m){e=e(g,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],
"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(a,b){this._handler=t.hitch(this,this._handler);this._relationshipQueryHandler=t.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=t.hitch(this,this._executeForIdsHandler);this._countHandler=t.hitch(this,this._countHandler);this._extentHandler=t.hitch(this,this._extentHandler);this.source=b&&b.source;this.gdbVersion=b&&b.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",
c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(a,b,c,d,g){var e=g.assembly;a=this._encode(t.mixin({},this._url.query,{f:"json"},a.toJson(e&&e[0])));
var m=this._handler,q=this._errorHandler;this.source&&(e={source:this.source.toJson()},a.layer=u.toJson(e));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return h({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,d){m(a,d,b,c,g.dfd)},error:function(a){q(a,c,g.dfd)},callbackSuffix:d},this.requestOptions)},executeRelationshipQuery:function(a,b,d){a=this._encode(t.mixin({},this._url.query,{f:"json"},a.toJson()));var g=this._relationshipQueryHandler,e=this._errorHandler;
this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var m=new n(c._dfdCanceller);m._pendingDfd=h({url:this._url.path+"/queryRelatedRecords",content:a,callbackParamName:"callback",load:function(a,c){g(a,c,b,d,m)},error:function(a){e(a,d,m)}},this.requestOptions);return m},executeForIds:function(a,b,c,d){var g=d.assembly;a=this._encode(t.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},a.toJson(g&&g[0])));var e=this._executeForIdsHandler,m=this._errorHandler;this.source&&(g={source:this.source.toJson()},
a.layer=u.toJson(g));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return h({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,g){e(a,g,b,c,d.dfd)},error:function(a){m(a,c,d.dfd)}},this.requestOptions)},executeForCount:function(a,b,c,d){var g=d.assembly;a=this._encode(t.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJson(g&&g[0])));var e=this._countHandler,m=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=u.toJson(g));
this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return h({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,g){e(a,g,b,c,d.dfd)},error:function(a){m(a,c,d.dfd)}},this.requestOptions)},executeForExtent:function(a,b,c,d){var g=d.assembly;a=this._encode(t.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJson(g&&g[0])));var e=this._extentHandler,m=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=u.toJson(g));this.gdbVersion&&
(a.gdbVersion=this.gdbVersion);return h({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,g){e(a,g,b,c,d.dfd)},error:function(a){m(a,c,d.dfd)}},this.requestOptions)},_handler:function(a,b,c,d,g){try{var e=new m(a);this._successHandler([e],"onComplete",c,g)}catch(h){this._errorHandler(h,d,g)}},_relationshipQueryHandler:function(a,c,d,g,e){try{var h=a.geometryType,q=a.spatialReference,n={};b.forEach(a.relatedRecordGroups,function(a){var b={};b.geometryType=h;b.spatialReference=
q;b.features=a.relatedRecords;b=new m(b);if(null!=a.objectId)n[a.objectId]=b;else for(var c in a)a.hasOwnProperty(c)&&"relatedRecords"!==c&&(n[a[c]]=b)});this._successHandler([n],"onExecuteRelationshipQueryComplete",d,e)}catch(s){this._errorHandler(s,g,e)}},_executeForIdsHandler:function(a,b,c,d,g){try{this._successHandler([a.objectIds],"onExecuteForIdsComplete",c,g)}catch(e){this._errorHandler(e,d,g)}},_countHandler:function(a,b,c,d,g){try{var e,h=a.features,m=a.objectIds;if(m)e=m.length;else{if(h)throw Error("Unable to perform query. Please check your parameters.");
e=a.count}this._successHandler([e],"onExecuteForCountComplete",c,g)}catch(q){this._errorHandler(q,d,g)}},_extentHandler:function(b,c,d,g,e){try{b.extent&&(b.extent=new a(b.extent)),this._successHandler([b],"onExecuteForExtentComplete",d,e)}catch(h){this._errorHandler(h,g,e)}}});d._createWrappers(e);q("extend-esri")&&t.setObject("tasks.QueryTask",e,s);return e})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d){function g(a,b){return Math.ceil((a-b)/(2*b))}function m(a,b){var c=a.paths||a.rings,d,g,e=c.length,h;for(d=0;d<e;d++){h=c[d].length;for(g=0;g<h;g++){var m=a.getPoint(d,g);a.setPoint(d,g,m.offset(b,0))}}return a}function w(a,b){if(!(a instanceof h||a instanceof c))throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var d=a instanceof h,g=[],
m;e.forEach(d?a.paths:a.rings,function(a){g.push(m=[]);m.push([a[0][0],a[0][1]]);var c,d,e,h,q,v,n,z,l,f,r,k;for(q=0;q<a.length-1;q++){c=a[q][0];d=a[q][1];e=a[q+1][0];h=a[q+1][1];n=Math.sqrt((e-c)*(e-c)+(h-d)*(h-d));z=(h-d)/n;l=(e-c)/n;f=n/b;if(1<f){for(v=1;v<=f-1;v++)k=v*b,r=l*k+c,k=z*k+d,m.push([r,k]);v=(n+Math.floor(f-1)*b)/2;r=l*v+c;k=z*v+d;m.push([r,k])}m.push([e,h])}});return d?new h({paths:g,spatialReference:a.spatialReference}):new c({rings:g,spatialReference:a.spatialReference})}function A(b,
c,d){c&&(b=w(b,1E6),b=a.webMercatorToGeographic(b,!0));d&&(b=m(b,d));return b}function x(a,b,c){var d=a.x||a[0],e;d>b?(e=g(d,b),a.x?a=a.offset(e*-2*b,0):a[0]=d+e*-2*b):d<c&&(e=g(d,c),a.x?a=a.offset(e*-2*c,0):a[0]=d+e*-2*c);return a}function C(a,b){var c=-1;e.forEach(b.cutIndexes,function(d,h){var m=b.geometries[h];e.forEach(m.rings||m.paths,function(a,b){e.some(a,function(c){if(!(180>c[0])){c=0;var d,e=a.length,v;for(d=0;d<e;d++)v=a[d][0],c=v>c?v:c;c=Number(c.toFixed(9));c=-360*g(c,180);e=a.length;
for(d=0;d<e;d++)v=m.getPoint(b,d),m.setPoint(b,d,v.offset(c,0))}return!0})});d===c?m.rings?e.forEach(m.rings,function(b){a[d]=a[d].addRing(b)}):e.forEach(m.paths,function(b){a[d]=a[d].addPath(b)}):(c=d,a[d]=m)});return a}function E(n,s,t,w){var u=new b;u.addCallbacks(t,w);s=s||q.defaults.geometryService;var y=[],E=[],F,U,L,I,v,O,z,l,f=0;e.forEach(n,function(a){if(a)if(F||(F=a.spatialReference,U=F._getInfo(),I=(L=F._isWebMercator())?2.0037508342788905E7:180,v=L?-2.0037508342788905E7:-180,O=L?102100:
4326,z=new h({paths:[[[I,v],[I,I]]],spatialReference:{wkid:O}}),l=new h({paths:[[[v,v],[v,I]]],spatialReference:{wkid:O}})),U){var r=d.fromJson(a.toJson()),b=a.getExtent();"point"===a.type?y.push(x(r,I,v)):"multipoint"===a.type?(r.points=e.map(r.points,function(f){return x(f,I,v)}),y.push(r)):"extent"===a.type?(r=b._normalize(null,null,U),y.push(r.rings?new c(r):r)):b?(a=g(b.xmin,v)*2*I,r=0===a?r:m(r,a),b=b.offset(a,0),b.intersects(z)&&b.xmax!==I?(f=b.xmax>f?b.xmax:f,r=A(r,L),E.push(r),y.push("cut")):
b.intersects(l)&&b.xmin!==v?(f=b.xmax*2*I>f?b.xmax*2*I:f,r=A(r,L,360),E.push(r),y.push("cut")):y.push(r)):y.push(r)}else y.push(a);else y.push(a)});t=new h;w=g(f,I);for(var r=-90,k=w;0<w;){var B=-180+360*w;t.addPath([[B,r],[B,-1*r]]);r*=-1;w--}0<E.length&&0<k?s?s.cut(E,t,function(f){E=C(E,f);var r=[];e.forEach(y,function(f,b){if("cut"===f){var k=E.shift();n[b].rings&&1<n[b].rings.length&&k.rings.length>=n[b].rings.length?(y[b]="simplify",r.push(k)):y[b]=!0===L?a.geographicToWebMercator(k):k}});0<
r.length?s.simplify(r,function(f){e.forEach(y,function(r,b){"simplify"===r&&(y[b]=!0===L?a.geographicToWebMercator(f.shift()):f.shift())});u.callback(y)},function(f){u.errback(f)}):u.callback(y)},function(f){u.errback(f)}):u.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(e.forEach(y,function(f,r){if("cut"===f){var b=E.shift();y[r]=!0===L?a.geographicToWebMercator(b):b}}),u.callback(y));return u}function F(a,b,c,d){var g=!1,h;t.isObject(a)&&a&&(t.isArray(a)?
a.length&&((h=a[0]&&a[0].declaredClass)&&-1!==h.indexOf("Graphic")?(a=e.map(a,function(a){return a.geometry}),g=a.length?!0:!1):h&&-1!==h.indexOf("esri.geometry.")&&(g=!0)):(h=a.declaredClass)&&-1!==h.indexOf("FeatureSet")?(a=e.map(a.features||[],function(a){return a.geometry}),g=a.length?!0:!1):h&&-1!==h.indexOf("esri.geometry.")&&(g=!0));g&&b.push({index:c,property:d,value:a})}function y(a,b){var c=[];e.forEach(b,function(b){var d=b.i,g=a[d];b=b.p;var h;if(t.isObject(g)&&g)if(b)if("*"===b[0])for(h in g)g.hasOwnProperty(h)&&
F(g[h],c,d,h);else e.forEach(b,function(a){F(t.getObject(a,!1,g),c,d,a)});else F(g,c,d)});return c}function I(a,b){var c=0,d={};e.forEach(b,function(b){var g=b.index,e=b.property,h=b.value,m=h.length||1,q=a.slice(c,c+m);t.isArray(h)||(q=q[0]);c+=m;delete b.value;e?(d[g]=d[g]||{},d[g][e]=q):d[g]=q});return d}var L={normalizeCentralMeridian:E,_foldCutResults:C,_prepareGeometryForCut:A,_offsetMagnitude:g,_pointNormalization:x,_updatePolyGeometry:m,_straightLineDensify:w,_createWrappers:function(a){var c=
t.isObject(a)?a.prototype:t.getObject(a+".prototype");e.forEach(c.__msigns,function(a){var d=c[a.n];c[a.n]=function(){var c=this,g=[],h,m=new b(s._dfdCanceller);a.f&&s._fixDfd(m);for(h=0;h<a.c;h++)g[h]=arguments[h];var q={dfd:m};g.push(q);var n,x=[],v;c.normalization&&!c._isTable&&(n=y(g,a.a),e.forEach(n,function(a){x=x.concat(a.value)}),x.length&&(v=E(x)));v?(m._pendingDfd=v,v.addCallbacks(function(a){m.canceled||(q.assembly=I(a,n),m._pendingDfd=d.apply(c,g))},function(b){var v=c.declaredClass;v&&
-1!==v.indexOf("FeatureLayer")?c._resolve([b],null,g[a.e],m,!0):c._errorHandler(b,g[a.e],m)})):m._pendingDfd=d.apply(c,g);return m}})},_disassemble:y,_addToBucket:F,_reassemble:I};n("extend-esri")&&t.mixin(t.getObject("geometry",!0,u),L);return L})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(e,t,b,n,u,q,s,h){e=e(h,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],
complete:["result"]},constructor:function(b,a){b&&t.isString(b)&&(this._url=s.urlToObject(this.url=b));a&&a.requestOptions&&(this.requestOptions=a.requestOptions);this.normalization=!0;this._errorHandler=t.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var b=this._url,a=/^http:/i;this.url&&(this.url=this.url.replace(a,"https:"));b&&b.path&&(b.path=b.path.replace(a,"https:"))},_encode:function(c,a,d){var g,e,h={},q,n;for(q in c)if("declaredClass"!==q&&(g=c[q],e=typeof g,
null!==g&&void 0!==g&&"function"!==e))if(t.isArray(g)){h[q]=[];n=g.length;for(e=0;e<n;e++)h[q][e]=this._encode(g[e])}else"object"===e?g.toJson&&(e=g.toJson(d&&d[q]),"esri.tasks.FeatureSet"===g.declaredClass&&e.spatialReference&&(e.sr=e.spatialReference,delete e.spatialReference),h[q]=a?e:b.toJson(e)):h[q]=g;return h},_successHandler:function(b,a,d,g){a&&this[a].apply(this,b);d&&d.apply(null,b);g&&q._resDfd(g,b)},_errorHandler:function(b,a,d){this.onError(b);a&&a(b);d&&d.errback(b)},setNormalization:function(b){this.normalization=
b},onError:function(){}});n("extend-esri")&&(u.Task=e);return e})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(e,t,b,n,u,q,s,h,c,a,d){e=e(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(c){if(c){t.mixin(this,c);var e=this.features,q=c.spatialReference,n=a.getGeometryType(c.geometryType),q=this.spatialReference=
new h(q);this.geometryType=c.geometryType;c.fields&&(this.fields=c.fields);b.forEach(e,function(a,b){var c=a.geometry&&a.geometry.spatialReference;e[b]=new s(n&&a.geometry?new n(a.geometry):null,a.symbol&&d.fromJson(a.symbol),a.attributes);e[b].geometry&&!c&&e[b].geometry.setSpatialReference(q)});this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(b){var d={};this.displayFieldName&&(d.displayFieldName=this.displayFieldName);
this.fields&&(d.fields=this.fields);this.spatialReference?d.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(d.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(d.geometryType=a.getJsonType(this.features[0].geometry)),d.features=c._encodeGraphics(this.features,b));d.exceededTransferLimit=this.exceededTransferLimit;d.transform=this.transform;return q.fixJson(d)},_hydrate:function(){var a=
this.transform,b=this.geometryType;if(a&&b)for(var c=this.features,d=a.translate[0],e=a.translate[1],h=a.scale[0],q=a.scale[1],n=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var d,g,e,h,m,q,n,s;d=0;for(g=a.length;d<g;d++){m=a[d];e=0;for(h=m.length;e<h;e++)q=m[e],0<e?(n+=q[0],s+=q[1]):(n=q[0],s=q[1]),q[0]=b(n),q[1]=c(s)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=
b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,g,e,h,m;d=0;for(g=a.length;d<g;d++)e=a[d],0<d?(h+=e[0],m+=e[1]):(h=e[0],m=e[1]),e[0]=b(h),e[1]=c(m)}}(b,function(a){return a*h+d},function(a){return e-a*q}),a=0,b=c.length;a<b;a++)c[a].geometry&&n(c[a].geometry);this.transform=null},quantize:function(a){if(!this.geometryType)return this.transform=null,this;var b=a.translate[0],c=a.translate[1],d=a.scale[0],e=a.scale[1],
h=this.features,q=function(a,b,c){var d,g,e,h,m,q,n=[];d=0;for(g=a.length;d<g;d++)if(e=a[d],0<d){if(q=b(e[0]),e=c(e[1]),q!==h||e!==m)n.push([q-h,e-m]),h=q,m=e}else h=b(e[0]),m=c(e[1]),n.push([h,m]);return 0<n.length?n:null},n=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y);return a};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){var d,g,e,h,m;e=a.rings||a.paths;m=[];d=0;for(g=e.length;d<g;d++)h=e[d],(h=q(h,b,c))&&m.push(h);return 0<
m.length?(a.rings?a.rings=m:a.paths=m,a):null};if("esriGeometryMultipoint"===a)return function(a){var d;d=q(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("esriGeometryEnvelope"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-b)/d)},function(a){return Math.round((c-a)/e)}),s,t;s=0;for(t=h.length;s<t;s++)h[s].geometry&&(n(h[s].geometry)||h[s].setGeometry(null));this.transform=a;return this}});n("extend-esri")&&t.setObject("tasks.FeatureSet",e,u);return e})},
"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(e,t,b,n,u){var q={graphicsExtent:function(b){var e=b[0].geometry,c=e.getExtent(),a,d,g=b.length;null===c&&(c=new u(e.x,e.y,e.x,e.y,e.spatialReference));for(d=1;d<g;d++)a=(e=b[d].geometry).getExtent(),null===a&&(a=new u(e.x,e.y,e.x,e.y,e.spatialReference)),c=c.union(a);return 0>c.getWidth()&&0>c.getHeight()?null:c},getGeometries:function(b){return t.map(b,function(b){return b.geometry})},
_encodeGraphics:function(b,e){var c=[],a,d,g;t.forEach(b,function(b,q){a=b.toJson();d={};a.geometry&&(g=e&&e[q],d.geometry=g&&g.toJson()||a.geometry);a.attributes&&(d.attributes=a.attributes);c[q]=d});return c}};b("extend-esri")&&e.mixin(n,q);return q})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,
onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});b("extend-esri")&&t.setObject("tasks.StatisticDefinition",e,n);return e})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y){var I=0;t=t([F,A,x],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=n.mixin({},y.widgets.popup)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(n.hitch(this,this._handleComponentsSuccess),n.hitch(this,this._handleComponentsError))},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+
1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var b=this._mediaInfos,c=b.length,g=this.domNode,e=this._prevMedia,h=this._nextMedia;if(1<c){var m=0,n=0;u.forEach(b,function(a){"image"===a.type?m++:-1!==a.type.indexOf("chart")&&n++});m&&(a.set(this._imageCount,"innerHTML",m),q.query(".summary .image",g).removeClass("hidden"));n&&(a.set(this._chartCount,"innerHTML",n),q.query(".summary .chart",g).removeClass("hidden"))}else q.query(".summary",
g).addClass("hidden"),d.add(e,"hidden"),d.add(h,"hidden");b=this._mediaPtr;0===b?d.add(e,"hidden"):d.remove(e,"hidden");b===c-1?d.add(h,"hidden"):d.remove(h,"hidden");this._destroyFrame()},_displayMedia:function(){var b=this._mediaInfos[this._mediaPtr],c=b.title,g=b.caption,h=q.query(".mediaSection .hzLine",this.domNode)[0];a.set(this._mediaTitle,"innerHTML",c);d[c?"remove":"add"](this._mediaTitle,"hidden");a.set(this._mediaCaption,"innerHTML",g);d[g?"remove":"add"](this._mediaCaption,"hidden");d[c&&
g?"remove":"add"](h,"hidden");this._rid=null;if("image"===b.type)this._showImage(b.value);else{var m=this,c=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],g=b.value.theme||this.chartTheme;n.isString(g)&&(g=g.replace(/\./gi,"/"),-1===g.indexOf("/")&&(g="dojox/charting/themes/"+g));g||(g="./Rainbow");c.push(g);try{var s=this._rid=I++;e(c,function(a,c,d){s===m._rid&&(m._rid=null,m._showChart(b.type,b.value,a,c,d))})}catch(x){}}},_preventNewTab:function(a){return(a=a&&n.trim(a).toLowerCase())&&
(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_showImage:function(a){d.add(this._mediaFrame,"image");var c=m.get(this._gallery,"height"),e;a.linkURL&&(e=g.create("a",{href:a.linkURL,target:this._preventNewTab(a.linkURL)?"":"_blank"},this._mediaFrame));g.create("img",{className:"esriPopupMediaImage",src:a.sourceURL},e||this._mediaFrame);var h=q.query(".esriPopupMediaImage",this._mediaFrame)[0],n=this,s;s=b.connect(h,"onload",function(){b.disconnect(s);s=null;n._imageLoaded(h,c)})},_showChart:function(a,
b,c,e,h){d.remove(this._mediaFrame,"image");c=this._chart=new c(g.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});h&&c.setTheme(h);switch(a){case "piechart":c.addPlot("default",{type:"Pie",labels:!1});c.addSeries("Series A",b.fields);break;case "linechart":c.addPlot("default",{type:"Markers"});c.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});u.forEach(b.fields,function(a,b){a.x=
b+1});c.addSeries("Series A",b.fields);break;case "columnchart":c.addPlot("default",{type:"Columns",gap:3});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.addSeries("Series A",b.fields);break;case "barchart":c.addPlot("default",{type:"Bars",gap:3}),c.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),c.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),c.addSeries("Series A",b.fields)}this._action=new e(c);c.render()},_destroyFrame:function(){this._rid=
null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);a.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,b){var c=a.height;c<b&&(c=Math.round((b-c)/2),m.set(a,"marginTop",c+"px"))},_attListHandler:function(b,c){if(b===this._dfd){this._dfd=null;var d="";!(c instanceof Error)&&(c&&c.length)&&u.forEach(c,function(a){d+="\x3cli\x3e";d+="\x3ca href\x3d'"+E.addProxy(a.url)+"' target\x3d'_blank'\x3e"+(a.name||"[No name]")+"\x3c/a\x3e";
d+="\x3c/li\x3e"});a.set(this._attachmentsList,"innerHTML",d||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_handleComponentsSuccess:function(b){if(b){var g=this.showTitle?b.title:"",e=b.description,h=b.fields,m=b.mediaInfos,s=this.domNode,x=this._nls,t=this,y=this.template,A=this.graphic;this._prevMedia.title=x.NLS_prevMedia;this._nextMedia.title=x.NLS_nextMedia;a.set(this._title,"innerHTML",g);g||d.add(this._title,"hidden");!b.hasDescription&&h&&(e="",u.forEach(h,function(a){e+="\x3ctr valign\x3d'top'\x3e";
e+="\x3ctd class\x3d'attrName'\x3e"+w.encode(a[0])+"\x3c/td\x3e";e+="\x3ctd class\x3d'attrValue'\x3e"+a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+x.NLS_moreInfo+"\x3c/a\x3e")+"\x3c/td\x3e";e+="\x3c/tr\x3e"}),e&&(e="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+e+"\x3c/table\x3e"));a.set(this._description,"innerHTML",e);e||d.add(this._description,"hidden");q.query("a",this._description).forEach(function(b){t._preventNewTab(b.href)?
"_blank"===b.target&&a.remove(b,"target"):a.set(b,"target","_blank")});g&&e?q.query(".mainSection .hzLine",s).removeClass("hidden"):g||e?q.query(".mainSection .hzLine",s).addClass("hidden"):q.query(".mainSection",s).addClass("hidden");if(g=this._dfd=y.getAttachments(A))g.addBoth(n.hitch(this,this._attListHandler,g)),a.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+x.NLS_searching+"...\x3c/li\x3e"),q.query(".attachmentsSection",s).removeClass("hidden");m&&m.length&&(q.query(".mediaSection",s).removeClass("hidden"),
c.setSelectable(this._mediaFrame,!1),this._mediaInfos=m,this._mediaPtr=0,this._updateUI(),this._displayMedia());b.editSummary&&(a.set(this._editSummary,"innerHTML",b.editSummary),m&&m.length&&d.remove(this._mediaBreak,"hidden"),d.remove(this._editSummarySection,"hidden"))}},_handleComponentsError:function(a){}});s("extend-esri")&&n.setObject("dijit._PopupRenderer",t,C);return t})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(e){var t=e.getObject("dojox.html.entities",!0),b=
function(b,e){var n,h;if(e._encCache&&e._encCache.regexp&&e._encCache.mapper&&e.length==e._encCache.length)n=e._encCache.mapper,h=e._encCache.regexp;else{n={};h=["["];var c;for(c=0;c<e.length;c++)n[e[c][0]]="\x26"+e[c][1]+";",h.push(e[c][0]);h.push("]");h=RegExp(h.join(""),"g");e._encCache={mapper:n,regexp:h,length:e.length}}return b=b.replace(h,function(a){return n[a]})},n=function(b,e){var n,h;if(e._decCache&&e._decCache.regexp&&e._decCache.mapper&&e.length==e._decCache.length)n=e._decCache.mapper,
h=e._decCache.regexp;else{n={};h=["("];var c;for(c=0;c<e.length;c++){var a="\x26"+e[c][1]+";";c&&h.push("|");n[a]=e[c][0];h.push(a)}h.push(")");h=RegExp(h.join(""),"g");e._decCache={mapper:n,regexp:h,length:e.length}}return b=b.replace(h,function(a){return n[a]})};t.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];t.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],
["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],
["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd",
"Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7",
"divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3",
"Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],
["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],
["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],
["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],
["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];t.encode=function(e,q){e&&(q?e=b(e,q):(e=b(e,t.html),e=b(e,t.latin)));
return e};t.decode=function(b,e){b&&(e?b=n(b,e):(b=n(b,t.html),b=n(b,t.latin)));return b};return t})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m){function w(){}function A(a){return function(c,d,g,e){return c&&"string"==typeof d&&c[d]==w?c.on(d.substring(2).toLowerCase(),
s.hitch(g,e)):a.apply(b,arguments)}}e.around(b,"connect",A);q.connect&&e.around(q,"connect",A);e=n("dijit._Widget",[d,g,m],{onClick:w,onDblClick:w,onKeyDown:w,onKeyPress:w,onKeyUp:w,onMouseDown:w,onMouseMove:w,onMouseOut:w,onMouseOver:w,onMouseLeave:w,onMouseEnter:w,onMouseUp:w,constructor:function(a){this._toConnect={};for(var b in a)this[b]===w&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,
this._toConnect[a]);delete this._toConnect},on:function(a,c){return this[this._onMap(a)]===w?b.connect(this.domNode,a.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){q.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){q.deprecated(this.declaredClass+
"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?h("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});u("dijit-legacy-requires")&&c(0,function(){require(["dijit/_base"])});return e})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(e,t,b,n,u,q){e=n("dijit._OnDijitClickMixin",
null,{connect:function(b,e,c){return this.inherited(arguments,[b,"ondijitclick"==e?q:e,c])}});e.a11yclick=q;return e})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(e,t,b,n){n.extend(t,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return b("dijit._FocusMixin",null,{_focusManager:e})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C){var E,F,y=new (t([g,s],{curNode:null,activeStack:[],constructor:function(){var a=h.hitch(this,function(a){b.isDescendant(this.curNode,a)&&this.set("curNode",null);b.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});e.before(q,"empty",a);e.before(q,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var g=this,e=a.document&&a.document.body;if(e){var h=d("pointer-events")?"pointerdown":d("MSPointer")?
"MSPointerDown":d("touch-events")?"mousedown, touchstart":"mousedown",m=c(a.document,h,function(a){if(!a||!(a.target&&null==a.target.parentNode))g._onTouchNode(b||a.target,"mouse")}),q=c(e,"focusin",function(a){if(a.target.tagName){var c=a.target.tagName.toLowerCase();"#document"==c||"body"==c||(A.isFocusable(a.target)?g._onFocusNode(b||a.target):g._onTouchNode(b||a.target))}}),n=c(e,"focusout",function(a){g._onBlurNode(b||a.target)});return{remove:function(){m.remove();q.remove();n.remove();e=m=
q=n=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<E+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(h.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<F+100||(this._clearActiveWidgetsTimer=setTimeout(h.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){F=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);u.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var d=n.get(a,"dijitPopupParent");if(d)a=x.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===m.body())break;a=w.get(a.ownerDocument).frameElement}else{var g=a.getAttribute&&a.getAttribute("widgetId"),e=g&&x.byId(g);e&&!("mouse"==b&&e.get("disabled"))&&c.unshift(g);a=a.parentNode}}}catch(h){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(E=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,g=a.length-1;if(a[g]!=c[d]){this.set("activeStack",a);var e;for(e=d;0<=e&&c[e]!=a[e];e--)if(d=x.byId(c[e]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),
this.emit("widget-blur",d,b);for(e++;e<=g;e++)if(d=x.byId(a[e]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));a(function(){var a=y.registerWin(w.get(document));d("ie")&&c(window,"unload",function(){a&&(a.remove(),a=null)})});C.focus=function(a){y.focus(a)};for(var I in y)/^_/.test(I)||(C.focus[I]="function"==typeof y[I]?h.hitch(y,I):y[I]);y.watch(function(a,b,c){C.focus[a]=c});return y})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(e,t,b,n,u,q,s){var h={_isElementShown:function(c){var a=n.get(c);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=b.get(c,"type")},hasDefaultTabStop:function(c){switch(c.nodeName.toLowerCase()){case "a":return b.has(c,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var a;try{var d=c.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;a=d.body}catch(g){try{a=c.contentWindow.document.body}catch(e){return!1}}return a&&
("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==c.contentEditable}},effectiveTabIndex:function(c){return b.get(c,"disabled")?void 0:b.has(c,"tabIndex")?+b.get(c,"tabIndex"):h.hasDefaultTabStop(c)?0:void 0},isTabNavigable:function(b){return 0<=h.effectiveTabIndex(b)},isFocusable:function(b){return-1<=h.effectiveTabIndex(b)},_getTabNavigable:function(c){function a(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}var d,g,e,n,s,x,t={},u=h._isElementShown,F=h.effectiveTabIndex,y=function(c){for(c=c.firstChild;c;c=c.nextSibling)if(!(1!=c.nodeType||9>=q("ie")&&"HTML"!==c.scopeName||!u(c))){var h=F(c);if(0<=h){if(0==h)d||(d=c),g=c;else if(0<h){if(!e||h<n)n=h,e=c;if(!s||h>=x)x=h,s=c}h=a(c);b.get(c,"checked")&&h&&(t[h]=c)}"SELECT"!=c.nodeName.toUpperCase()&&y(c)}};u(c)&&y(c);return{first:t[a(d)]||d,last:t[a(g)]||g,lowest:t[a(e)]||e,highest:t[a(s)]||s}},getFirstInTabbingOrder:function(b,
a){var d=h._getTabNavigable(t.byId(b,a));return d.lowest?d.lowest:d.first},getLastInTabbingOrder:function(b,a){var d=h._getTabNavigable(t.byId(b,a));return d.last?d.last:d.highest}};u.mixin(s,h);return h})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(e,t,b,n){b(function(){t("highcontrast")&&e.add(n.body(),"dijit_a11y")});return t})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(e,t,b,n,u,q,s){u.add("highcontrast",function(){var b=s.doc.createElement("div");b.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(t.blankGif||e.toUrl("./resources/blank.gif"))+'");';s.body().appendChild(b);var c=n.getComputedStyle(b),a=c.backgroundImage,c=c.borderTopColor==c.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);8>=u("ie")?b.outerHTML="":s.body().removeChild(b);return c});q(function(){u("highcontrast")&&
b.add(s.body(),"dj_a11y")});return u})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),function(e,t,b,n,u,q,s){q.extend(e,{waiRole:"",waiState:""});return u("dijit._Templated",[t,b],{widgetsInTemplate:!1,constructor:function(){s.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},
_processNode:function(b,c){var a=this.inherited(arguments),d=c(b,"waiRole");d&&b.setAttribute("role",d);(d=c(b,"waiState"))&&n.forEach(d.split(/\s*,\s*/),function(a){-1!=a.indexOf("-")&&(a=a.split("-"),b.setAttribute("aria-"+a[0],a[1]))});return a}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(e,t,b,n,u){return b("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,
contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);u.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(n.hitch(this,function(b){this._startupWidgets=b;for(var e=0;e<b.length;e++)this._processTemplateNode(b[e],function(b,a){return b[a]},
function(b,a,d){return a in b?b.connect(b,a,d):b.on(a,d,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,e,h){return e(b,"dojoType")||e(b,"data-dojo-type")?!0:this.inherited(arguments)},
startup:function(){e.forEach(this._startupWidgets,function(b){b&&(!b._started&&b.startup)&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x){function C(a){return eval("("+a+")")}function E(a){var b=a._nameCaseMap,c=a.prototype;
if(!b||b._extendCnt<y){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=y}return b}function F(a,c){var d=a.join();if(!I[d]){for(var g=[],h=0,m=a.length;h<m;h++){var q=a[h];g[g.length]=I[q]=I[q]||b.getObject(q)||~q.indexOf("/")&&(c?c(q):e(q))}h=g.shift();I[d]=g.length?h.createSubclass?h.createSubclass(g):h.extend.apply(h,g):h}return I[d]}new Date("X");var y=0;c.after(b,"extend",function(){y++},!0);var I={},L={_clearCache:function(){y++;I={}},_functionFromScript:function(a,
b){var c="",d="",g=a.getAttribute(b+"args")||a.getAttribute("args"),e=a.getAttribute("with"),g=(g||"").split(/\s*,\s*/);e&&e.length&&n.forEach(e.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(g,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||t._scopeName)+"Type",g="data-"+(c.scope||t._scopeName)+"-",e=g+"type",h=g+"mixins",m=[];n.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(e)||a.getAttribute(d);if(c){var g=a.getAttribute(h),c=g?
[c].concat(g.split(/\s*,\s*/)):[c];m.push({node:a,types:c})}});return this._instantiate(m,b,c)},_instantiate:function(b,c,d,g){function e(a){!c._started&&!d.noStart&&n.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}b=n.map(b,function(a){var b=a.ctor||F(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return g?a(b).then(e):e(b)},construct:function(a,
g,e,q,s,x){function u(f){l&&b.setObject(l,f);for(O=0;O<H.length;O++)c[H[O].advice||"after"](f,H[O].method,b.hitch(f,H[O].func),!0);for(O=0;O<J.length;O++)J[O].call(f);for(O=0;O<Q.length;O++)f.watch(Q[O].prop,Q[O].func);for(O=0;O<S.length;O++)A(f,S[O].event,S[O].func);return f}var y=a&&a.prototype;q=q||{};var F={};q.defaults&&b.mixin(F,q.defaults);x&&b.mixin(F,x);var I;m("dom-attributes-explicit")?I=g.attributes:m("dom-attributes-specified-flag")?I=n.filter(g.attributes,function(f){return f.specified}):
(x=(/^input$|^img$/i.test(g.nodeName)?g:g.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),I=n.map(x.split(/\s+/),function(f){var a=f.toLowerCase();return{name:f,value:"LI"==g.nodeName&&"value"==f||"enctype"==a?g.getAttribute(a):g.getAttributeNode(a).value}}));var L=q.scope||t._scopeName;x="data-"+L+"-";var v={};"dojo"!==L&&(v[x+"props"]="data-dojo-props",v[x+"type"]="data-dojo-type",v[x+"mixins"]="data-dojo-mixins",v[L+"type"]=
"dojoType",v[x+"id"]="data-dojo-id");for(var O=0,z,L=[],l,f;z=I[O++];){var r=z.name,k=r.toLowerCase();z=z.value;switch(v[k]||k){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":f=z;break;case "data-dojo-id":case "jsid":l=z;break;case "data-dojo-attach-point":case "dojoattachpoint":F.dojoAttachPoint=z;break;case "data-dojo-attach-event":case "dojoattachevent":F.dojoAttachEvent=z;break;case "class":F["class"]=g.className;break;case "style":F.style=g.style&&
g.style.cssText;break;default:if(r in y||(r=E(a)[k]||r),r in y)switch(typeof y[r]){case "string":F[r]=z;break;case "number":F[r]=z.length?Number(z):NaN;break;case "boolean":F[r]="false"!=z.toLowerCase();break;case "function":""===z||-1!=z.search(/[^\w\.]+/i)?F[r]=new Function(z):F[r]=b.getObject(z,!1)||new Function(z);L.push(r);break;default:k=y[r],F[r]=k&&"length"in k?z?z.split(/\s*,\s*/):[]:k instanceof Date?""==z?new Date(""):"now"==z?new Date:d.fromISOString(z):k instanceof h?t.baseUrl+z:C(z)}else F[r]=
z}}for(I=0;I<L.length;I++)v=L[I].toLowerCase(),g.removeAttribute(v),g[v]=null;if(f)try{f=C.call(q.propsThis,"{"+f+"}"),b.mixin(F,f)}catch(B){throw Error(B.toString()+" in data-dojo-props\x3d'"+f+"'");}b.mixin(F,e);s||(s=a&&(a._noScript||y._noScript)?[]:w("\x3e script[type^\x3d'dojo/']",g));var H=[],J=[],Q=[],S=[];if(s)for(O=0;O<s.length;O++)v=s[O],g.removeChild(v),e=v.getAttribute(x+"event")||v.getAttribute("event"),q=v.getAttribute(x+"prop"),f=v.getAttribute(x+"method"),L=v.getAttribute(x+"advice"),
I=v.getAttribute("type"),v=this._functionFromScript(v,x),e?"dojo/connect"==I?H.push({method:e,func:v}):"dojo/on"==I?S.push({event:e,func:v}):F[e]=v:"dojo/aspect"==I?H.push({method:f,advice:L,func:v}):"dojo/watch"==I?Q.push({prop:q,func:v}):J.push(v);a=(s=a.markupFactory||y.markupFactory)?s(F,g,a):new a(F,g);return a.then?a.then(u):u(a)},scan:function(a,b){function c(f){if(!f.inherited){f.inherited={};var a=f.node,r=c(f.parent),a={dir:a.getAttribute("dir")||r.dir,lang:a.getAttribute("lang")||r.lang,
textDir:a.getAttribute(w)||r.textDir},b;for(b in a)a[b]&&(f.inherited[b]=a[b])}return f.inherited}var d=[],h=[],m={},q=(b.scope||t._scopeName)+"Type",s="data-"+(b.scope||t._scopeName)+"-",x=s+"type",w=s+"textdir",s=s+"mixins",u=a.firstChild,v=b.inherited;if(!v){var y=function(f,a){return f.getAttribute&&f.getAttribute(a)||f.parentNode&&y(f.parentNode,a)},v={dir:y(a,"dir"),lang:y(a,"lang"),textDir:y(a,w)},z;for(z in v)v[z]||delete v[z]}for(var v={inherited:v},l,f;;)if(u)if(1!=u.nodeType)u=u.nextSibling;
else if(l&&"script"==u.nodeName.toLowerCase())(r=u.getAttribute("type"))&&/^dojo\/\w/i.test(r)&&l.push(u),u=u.nextSibling;else if(f)u=u.nextSibling;else{var r=u.getAttribute(x)||u.getAttribute(q);z=u.firstChild;if(!r&&(!z||3==z.nodeType&&!z.nextSibling))u=u.nextSibling;else{f=null;if(r){var k=u.getAttribute(s);l=k?[r].concat(k.split(/\s*,\s*/)):[r];try{f=F(l,b.contextRequire)}catch(B){}f||n.forEach(l,function(f){~f.indexOf("/")&&!m[f]&&(m[f]=!0,h[h.length]=f)});k=f&&!f.prototype._noScript?[]:null;
v={types:l,ctor:f,parent:v,node:u,scripts:k};v.inherited=c(v);d.push(v)}else v={node:u,scripts:l,parent:v};l=k;f=u.stopParser||f&&f.prototype.stopParser&&!b.template;u=z}}else{if(!v||!v.node)break;u=v.node.nextSibling;f=!1;v=v.parent;l=v.scripts}var H=new g;h.length?(b.contextRequire||e)(h,function(){H.resolve(n.filter(d,function(f){if(!f.ctor)try{f.ctor=F(f.types,b.contextRequire)}catch(a){}for(var r=f.parent;r&&!r.types;)r=r.parent;var k=f.ctor&&f.ctor.prototype;f.instantiateChildren=!(k&&k.stopParser&&
!b.template);f.instantiate=!r||r.instantiate&&r.instantiateChildren;return f.instantiate}))}):H.resolve(d);return H.promise},_require:function(a,c){var d=C("{"+a.innerHTML+"}"),h=[],m=[],q=new g,n=c&&c.contextRequire||e,s;for(s in d)h.push(s),m.push(d[s]);n(m,function(){for(var a=0;a<h.length;a++)b.setObject(h[a],arguments[a]);q.resolve(arguments)});return q.promise},_scanAmd:function(a,b){var c=new g,d=c.promise;c.resolve(!0);var e=this;w("script[type\x3d'dojo/require']",a).forEach(function(a){d=
d.then(function(){return e._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(a,c){var d;!c&&a&&a.rootNode?(c=a,d=c.rootNode):a&&b.isObject(a)&&!("nodeType"in a)?c=a:d=a;d=d?q.byId(d):s.body();c=c||{};var g=c.template?{template:!0}:{},e=[],h=this,m=this._scanAmd(d,c).then(function(){return h.scan(d,c)}).then(function(a){return h._instantiate(a,g,c,!0)}).then(function(a){return e=e.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});b.mixin(e,
m);return e}};t.parser=L;u.parseOnLoad&&x(100,L,"parse");return L})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(e,t){var b={};e.setObject("dojo.date.stamp",b);b.fromISOString=function(e,u){b._isoRegExp||(b._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var q=b._isoRegExp.exec(e),s=null;if(q){q.shift();q[1]&&q[1]--;q[6]&&(q[6]*=1E3);u&&(u=new Date(u),t.forEach(t.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return u["get"+a]()}),function(a,b){q[b]=q[b]||a}));s=new Date(q[0]||1970,q[1]||0,q[2]||1,q[3]||0,q[4]||0,q[5]||0,q[6]||0);100>q[0]&&s.setFullYear(q[0]||1970);var h=0,c=q[7]&&q[7].charAt(0);"Z"!=c&&(h=60*(q[8]||0)+(Number(q[9])||0),"-"!=c&&(h*=-1));c&&(h-=s.getTimezoneOffset());h&&s.setTime(s.getTime()+6E4*h)}return s};b.toISOString=function(b,e){var q=function(a){return 10>a?"0"+a:a};e=e||{};var s=[],h=e.zulu?"getUTC":"get",c="";"time"!=e.selector&&(c=b[h+"FullYear"](),c=["0000".substr((c+
"").length)+c,q(b[h+"Month"]()+1),q(b[h+"Date"]())].join("-"));s.push(c);if("date"!=e.selector){c=[q(b[h+"Hours"]()),q(b[h+"Minutes"]()),q(b[h+"Seconds"]())].join(":");h=b[h+"Milliseconds"]();e.milliseconds&&(c+="."+(100>h?"0":"")+q(h));if(e.zulu)c+="Z";else if("time"!=e.selector)var h=b.getTimezoneOffset(),a=Math.abs(h),c=c+((0<h?"-":"+")+q(Math.floor(a/60))+":"+q(a%60));s.push(c)}return s.join("T")};return b})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(e,t,b,n,u,q){return e([q,u],{_onMap:function(b){var e=this.constructor._onMap,c;if(!e||!e.FINAL)delete this.constructor._onMap,e=this.registerConnectEvents(),e.FINAL=!0;b=b.toLowerCase();e[b]?c=this[e[b].method]:(b=this._onCamelCase(b),this[b]&&(c=b));return c},on:function(b,e){var c=this._onMap(b),a=b.replace(/\-/g,""),d="on"+a in this.domNode;return c||!d?this.inherited(arguments):this.own(n(this.domNode,a,e))[0]},emit:function(b,e,c){var a,d,g,m=b.toLowerCase(),q=this.constructor._onMap||
this.registerConnectEvents();d=this[this._onMap(m)];e=e||{};e.target||(e.target=this);d&&(q&&q[m])&&(this._onObj2Arr(function(){a=Array.prototype.slice.call(arguments)},q[m].argKeys)(e),g=t.mixin({},arguments),g[2]=a,g[0]=q[m].name.replace(/^on/,""));return this.inherited(g||arguments)}})})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A){e=e(a,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=t.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=
a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);
this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJson());
return{geometryType:A.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,c,d){var g=A.getGeometryType(c);a=a.geometries;var e=[],h={spatialReference:d.toJson()},m=t.mixin;b.forEach(a,function(a,b){e[b]=new g(m(a,h))});return e},_toProjectGeometry:function(a){var b=a.spatialReference.toJson();return a instanceof d?new m({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new g({paths:[[].concat(a.points)],spatialReference:b})},
_fromProjectedGeometry:function(a,b,c){return"esriGeometryEnvelope"===b?(a=a.rings[0],new d(a[0][0],a[0][1],a[2][0],a[2][1],c)):new w({points:a.paths[0],spatialReference:c.toJson()})},project:function(a,b,d,g){var e=t.mixin({},this._url.query,{f:"json"}),m;a.geometries?(g=d,d=b,b=a.outSR,m=a.geometries[0],e=t.mixin(e,a.toJson())):(m=a[0],e=t.mixin(e,{outSR:b.wkid||n.toJson(b.toJson()),inSR:m.spatialReference.wkid||n.toJson(m.spatialReference.toJson()),geometries:n.toJson(this._encodeGeometries(a))}));
var q=A.getJsonType(m),s=this._projectHandler,w=this._errorHandler,N=new u(c._dfdCanceller);N._pendingDfd=h({url:this._url.path+"/project",content:e,callbackParamName:"callback",load:function(a,c){s(a,c,q,b,d,g,N)},error:function(a){w(a,g,N)}});return N},_projectHandler:function(a,b,c,d,g,e,h){try{var m=this._decodeGeometries(a,c,d);this._successHandler([m],"onProjectComplete",g,h)}catch(q){this._errorHandler(q,e,h)}},onProjectComplete:function(){},simplify:function(a,b,d){var g=a[0].spatialReference,
e=t.mixin({},this._url.query,{f:"json",sr:g.wkid?g.wkid:n.toJson(g.toJson()),geometries:n.toJson(this._encodeGeometries(a))}),m=A.getJsonType(a[0]),q=this._simplifyHandler,s=this._errorHandler,w=new u(c._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/simplify",content:e,callbackParamName:"callback",load:function(a,c){q(a,c,m,g,b,d,w)},error:function(a){s(a,d,w)}});return w},_simplifyHandler:function(a,b,c,d,g,e,h){try{var m=this._decodeGeometries(a,c,d);this._successHandler([m],"onSimplifyComplete",
g,h)}catch(q){this._errorHandler(q,e,h)}},onSimplifyComplete:function(){},convexHull:function(a,b,d){var g=a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:n.toJson(g.toJson()),geometries:n.toJson(this._encodeGeometries(a))});var e=this._convexHullHandler,m=this._errorHandler,q=new u(c._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(a,c){e(a,c,g,b,d,q)},error:function(a){m(a,d,q)}});return q},_convexHullHandler:function(a,
b,c,d,g,e){try{var h=A.fromJson(a.geometry).setSpatialReference(c);this._successHandler([h],"onConvexHullComplete",d,e)}catch(m){this._errorHandler(m,g,e)}},onConvexHullComplete:function(){},union:function(a,b,d){var g=a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:n.toJson(g.toJson()),geometries:n.toJson(this._encodeGeometries(a))});var e=this._unionHandler,m=this._errorHandler,q=new u(c._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/union",content:a,callbackParamName:"callback",
load:function(a,c){e(a,c,g,b,d,q)},error:function(a){m(a,d,q)}});return q},_unionHandler:function(a,b,c,d,g,e){try{var h=A.fromJson(a.geometry).setSpatialReference(c);this._successHandler([h],"onUnionComplete",d,e)}catch(m){this._errorHandler(m,g,e)}},onUnionComplete:function(){},autoComplete:function(a,b,d,g){var e=a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:n.toJson(e.toJson()),polygons:n.toJson(this._encodeGeometries(a).geometries),polylines:n.toJson(this._encodeGeometries(b).geometries)});
var m=this._autoCompleteHandler,q=this._errorHandler,s=new u(c._dfdCanceller);s._pendingDfd=h({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,e,d,g,s)},error:function(a){q(a,g,s)}});return s},_autoCompleteHandler:function(a,b,c,d,g,e){try{var h=a.geometries;a=[];var q,n=h.length;for(q=0;q<n;q++)a[q]=new m({spatialReference:c,rings:h[q].rings});this._successHandler([a],"onAutoCompleteComplete",d,e)}catch(s){this._errorHandler(s,g,e)}},onAutoCompleteComplete:function(){},
reshape:function(a,b,d,g){var e=a.spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:n.toJson(e.toJson()),target:n.toJson({geometryType:A.getJsonType(a),geometry:a.toJson()}),reshaper:n.toJson(b.toJson())});var m=this._reshapeHandler,q=this._errorHandler,s=new u(c._dfdCanceller);s._pendingDfd=h({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,e,d,g,s)},error:function(a){q(a,g,s)}});return s},_reshapeHandler:function(a,b,c,d,g,e){try{var h=A.fromJson(a.geometry).setSpatialReference(c);
this._successHandler([h],"onReshapeComplete",d,e)}catch(m){this._errorHandler(m,g,e)}},onReshapeComplete:function(){},cut:function(a,d,g,e){var m=a[0].spatialReference,q=b.map(a,function(a){return a.toJson()});a=t.mixin({},this._url.query,{f:"json",sr:n.toJson(m.toJson()),target:n.toJson({geometryType:A.getJsonType(a[0]),geometries:q}),cutter:n.toJson(d.toJson())});var s=this._cutHandler,w=this._errorHandler,G=new u(c._dfdCanceller);G._pendingDfd=h({url:this._url.path+"/cut",content:a,callbackParamName:"callback",
load:function(a,b){s(a,b,m,g,e,G)},error:function(a){w(a,e,G)}});return G},_cutHandler:function(a,c,d,g,e,h){try{var m=a.geometries,q={};q.cutIndexes=a.cutIndexes;q.geometries=[];b.forEach(m,function(a){q.geometries.push(A.fromJson(a).setSpatialReference(d))});this._successHandler([q],"onCutComplete",g,h)}catch(n){this._errorHandler(n,e,h)}},onCutComplete:function(){},intersect:function(a,b,d,g){var e=a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:n.toJson(e.toJson()),geometries:n.toJson(this._encodeGeometries(a)),
geometry:n.toJson({geometryType:A.getJsonType(b),geometry:b.toJson()})});var m=this._intersectHandler,q=this._errorHandler,s=new u(c._dfdCanceller);s._pendingDfd=h({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,e,d,g,s)},error:function(a){q(a,g,s)}});return s},_intersectHandler:function(a,c,d,g,e,h){try{var m=[];b.forEach(a.geometries,function(a){m.push(A.fromJson(a).setSpatialReference(d))});this._successHandler([m],"onIntersectComplete",g,h)}catch(q){this._errorHandler(q,
e,h)}},onIntersectComplete:function(){},difference:function(a,b,d,g){var e=a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:n.toJson(e.toJson()),geometries:n.toJson(this._encodeGeometries(a)),geometry:n.toJson({geometryType:A.getJsonType(b),geometry:b.toJson()})});var m=this._differenceHandler,q=this._errorHandler,s=new u(c._dfdCanceller);s._pendingDfd=h({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,e,d,g,s)},error:function(a){q(a,
g,s)}});return s},_differenceHandler:function(a,c,d,g,e,h){try{var m=[];b.forEach(a.geometries,function(a){m.push(A.fromJson(a).setSpatialReference(d))});this._successHandler([m],"onDifferenceComplete",g,h)}catch(q){this._errorHandler(q,e,h)}},onDifferenceComplete:function(){},buffer:function(a,b,d){var g=t.mixin({},this._url.query,{f:"json"},a.toJson()),e=a.outSpatialReference||a.geometries[0].spatialReference,m=this._bufferHandler,q=this._errorHandler,n=new u(c._dfdCanceller);n._pendingDfd=h({url:this._url.path+
"/buffer",content:g,callbackParamName:"callback",load:function(a,c){m(a,c,e,b,d,n)},error:function(a){q(a,d,n)}});return n},_bufferHandler:function(a,b,c,d,g,e){try{var h=a.geometries;a=[];var q,n=h.length;for(q=0;q<n;q++)a[q]=new m({spatialReference:c,rings:h[q].rings});this._successHandler([a],"onBufferComplete",d,e)}catch(s){this._errorHandler(s,g,e)}},onBufferComplete:function(){},areasAndLengths:function(a,b,d){a=t.mixin({},this._url.query,{f:"json"},a.toJson());var g=this._areasAndLengthsHandler,
e=this._errorHandler,m=new u(c._dfdCanceller);m._pendingDfd=h({url:this._url.path+"/areasAndLengths",content:a,callbackParamName:"callback",load:function(a,c){g(a,c,b,d,m)},error:function(a){e(a,d,m)}});return m},_areasAndLengthsHandler:function(a,b,c,d,g){try{this._successHandler([a],"onAreasAndLengthsComplete",c,g)}catch(e){this._errorHandler(e,d,g)}},onAreasAndLengthsComplete:function(){},lengths:function(a,b,d){a=t.mixin({},this._url.query,{f:"json"},a.toJson());var g=this._lengthsHandler,e=this._errorHandler,
m=new u(c._dfdCanceller);m._pendingDfd=h({url:this._url.path+"/lengths",content:a,callbackParamName:"callback",load:function(a,c){g(a,c,b,d,m)},error:function(a){e(a,d,m)}});return m},_lengthsHandler:function(a,b,c,d,g){try{this._successHandler([a],"onLengthsComplete",c,g)}catch(e){this._errorHandler(e,d,g)}},onLengthsComplete:function(){},labelPoints:function(a,d,g){var e=b.map(a,function(a){return a.toJson()}),m=a[0].spatialReference,e=t.mixin({},this._url.query,{f:"json",sr:m.wkid?m.wkid:n.toJson(m.toJson()),
polygons:n.toJson(e)}),q=this._labelPointsHandler,s=this._errorHandler,w=new u(c._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/labelPoints",content:e,callbackParamName:"callback",load:function(b,c){q(b,c,a,m,d,g,w)},error:function(a){s(a,g,w)}});return w},_labelPointsHandler:function(a,c,d,g,e,h,m){try{var q=[];b.forEach(a.labelPoints,function(a){q.push(A.fromJson(a).setSpatialReference(g))});this._successHandler([q],"onLabelPointsComplete",e,m)}catch(n){this._errorHandler(n,h,m)}},onLabelPointsComplete:function(){},
relation:function(a,b,d){a=t.mixin({},this._url.query,{f:"json"},a.toJson());var g=this._relationHandler,e=this._errorHandler,m=new u(c._dfdCanceller);m._pendingDfd=h({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(a,c){g(a,c,b,d,m)},error:function(a){e(a,d,m)}});return m},_relationHandler:function(a,b,c,d,g){try{this._successHandler([a.relations],"onRelationComplete",c,g)}catch(e){this._errorHandler(e,d,g)}},onRelationComplete:function(){},trimExtend:function(a,
b,d){var g=t.mixin({},this._url.query,{f:"json"},a.toJson()),e=a.sr,m=this._trimExtendHandler,q=this._errorHandler,n=new u(c._dfdCanceller);n._pendingDfd=h({url:this._url.path+"/trimExtend",content:g,callbackParamName:"callback",load:function(a,c){m(a,c,e,b,d,n)},error:function(a){q(a,d,n)}});return n},_trimExtendHandler:function(a,b,c,d,e,h){try{var m=a.geometries;a=[];var q,n=m.length;for(q=0;q<n;q++)a[q]=new g({spatialReference:c,paths:m[q].paths});this._successHandler([a],"onTrimExtendComplete",
d,h)}catch(s){this._errorHandler(s,e,h)}},onTrimExtendComplete:function(){},densify:function(a,b,d){var g=t.mixin({},this._url.query,{f:"json"},a.toJson()),e=a.geometries[0].spatialReference,m=this._densifyHandler,q=this._errorHandler,n=new u(c._dfdCanceller);n._pendingDfd=h({url:this._url.path+"/densify",content:g,callbackParamName:"callback",load:function(a,c){m(a,c,e,b,d,n)},error:function(a){q(a,d,n)}});return n},_densifyHandler:function(a,c,d,g,e,h){try{var m=[];b.forEach(a.geometries,function(a){m.push(A.fromJson(a).setSpatialReference(d))});
this._successHandler([m],"onDensifyComplete",g,h)}catch(q){this._errorHandler(q,e,h)}},onDensifyComplete:function(){},generalize:function(a,b,d){var g=t.mixin({},this._url.query,{f:"json"},a.toJson()),e=a.geometries[0].spatialReference,m=this._generalizeHandler,q=this._errorHandler,n=new u(c._dfdCanceller);n._pendingDfd=h({url:this._url.path+"/generalize",content:g,callbackParamName:"callback",load:function(a,c){m(a,c,e,b,d,n)},error:function(a){q(a,d,n)}});return n},_generalizeHandler:function(a,
c,d,g,e,h){try{var m=[];b.forEach(a.geometries,function(a){m.push(A.fromJson(a).setSpatialReference(d))});this._successHandler([m],"onGeneralizeComplete",g,h)}catch(q){this._errorHandler(q,e,h)}},onGeneralizeComplete:function(){},offset:function(a,b,d){var g=t.mixin({},this._url.query,{f:"json"},a.toJson()),e=a.geometries[0].spatialReference,m=this._offsetHandler,q=this._errorHandler,n=new u(c._dfdCanceller);n._pendingDfd=h({url:this._url.path+"/offset",content:g,callbackParamName:"callback",load:function(a,
c){m(a,c,e,b,d,n)},error:function(a){q(a,d,n)}});return n},_offsetHandler:function(a,c,d,g,e,h){try{var m=[];b.forEach(a.geometries,function(a){m.push(A.fromJson(a).setSpatialReference(d))});this._successHandler([m],"onOffsetComplete",g,h)}catch(q){this._errorHandler(q,e,h)}},onOffsetComplete:function(){},distance:function(a,b,d){var g=t.mixin({},this._url.query,{f:"json"},a.toJson()),e=a.geometry1.spatialReference,m=this._distanceHandler,q=this._errorHandler,n=new u(c._dfdCanceller);n._pendingDfd=
h({url:this._url.path+"/distance",content:g,callbackParamName:"callback",load:function(a,c){m(a,c,e,b,d,n)},error:function(a){q(a,d,n)}});return n},_distanceHandler:function(a,b,c,d,g,e){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",d,e)}catch(h){this._errorHandler(h,g,e)}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,b,d){var g={};t.isObject(a.sr)?g.sr=a.sr.wkid||n.toJson(a.sr.toJson()):g.sr=a.sr;g.coordinates=n.toJson(a.coordinates);g.conversionType=a.conversionType||
"MGRS";g.conversionMode=a.conversionMode;g.numOfDigits=a.numOfDigits;g.rounding=a.rounding;g.addSpaces=a.addSpaces;a=t.mixin({},this._url.query,{f:"json"},g);var e=this._toGeoCoordinateHandler,m=this._errorHandler,q=new u(c._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,c){e(a,c,b,d,q)},error:function(a){m(a,d,q)}});return q},_toGeoCoordinateHandler:function(a,b,c,d,g){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",
c,g)}catch(e){this._errorHandler(e,d,g)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(a,b,d){var g={};t.isObject(a.sr)?g.sr=a.sr.wkid||n.toJson(a.sr.toJson()):g.sr=a.sr;g.strings=n.toJson(a.strings);g.conversionType=a.conversionType||"MGRS";g.conversionMode=a.conversionMode;a=t.mixin({},this._url.query,{f:"json"},g);var e=this._fromGeoCoordinateHandler,m=this._errorHandler,q=new u(c._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/fromGeoCoordinateString",content:a,
callbackParamName:"callback",load:function(a,c){e(a,c,b,d,q)},error:function(a){m(a,d,q)}});return q},_fromGeoCoordinateHandler:function(a,b,c,d,g){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",c,g)}catch(e){this._errorHandler(e,d,g)}},onFromGeoCoordinateStringComplete:function(){}});t.mixin(e,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});q("extend-esri")&&t.setObject("tasks.GeometryService",e,s);return e})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/sniff dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/promise/all ../kernel ../lang ../request ../config ../deferredUtils ../SpatialReference ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./FeatureType ./FeatureTemplate ./FeatureEditResult ./LabelClass ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./TrackManager ./HeatmapManager dojo/i18n!../nls/jsapi dojo/has!extend-esri?./agscommon".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D,G,N,P,K,R,M,T,U,V,W,v,O,z,l,f,r,k,B,H,J,Q,S,X,aa,ka,ja,fa){var ca=F.defaults,$=b(l,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],
"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]},constructor:function(f,a){this._preventInit||this._initFeatureLayer(f,a)},_initFeatureLayer:function(f,a){this.i18n=fa;a=a||{};this.showLabels=null!=a.showLabels?a.showLabels:!0;
this._outFields=a.outFields;this._defnExpr=a.definitionExpression;this._loadCallback=a.loadCallback;var r=a._usePatch;this._usePatch=null===r||void 0===r?!0:r;this._trackIdField=a.trackIdField;this.objectIdField=a.objectIdField;this._maxOffset=null!=a.maxAllowableOffset?a.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=a.quantize?a.quantize:!0;this._optEditable=a.editable;this._optAutoGen=a.autoGeneralize;this.editSummaryCallback=a.editSummaryCallback;this.userId=a.userId;this.userIsAdmin=
a.userIsAdmin;this.useMapTime=a.hasOwnProperty("useMapTime")?!!a.useMapTime:!0;this.source=a.source;this.gdbVersion=a.gdbVersion;this.orderByFields=a.orderByFields;this.maxPointCountForAuto=null!=a.maxPointCountForAuto?a.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=a.maxRecordCountForAuto?a.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=a.maxVertexCountForAuto?a.maxVertexCountForAuto:this.maxVertexCountForAuto;this.generalizeForScale=
null!=a.generalizeForScale?a.generalizeForScale:this.generalizeForScale;this.queryPagination=null!=a.queryPagination?a.queryPagination:this.url?this.reHostedFS.test(this.url):!1;this.multipatchOption=a.multipatchOption;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var b=$,r=this.mode=C.isDefined(a.mode)?a.mode:b.MODE_ONDEMAND;this._isStream&&(this.mode=r=b.MODE_STREAM);switch(r){case b.MODE_SNAPSHOT:this.currentMode=
b.MODE_SNAPSHOT;this._mode=new Q(this);this._isSnapshot=!0;break;case b.MODE_ONDEMAND:case b.MODE_AUTO:this.currentMode=b.MODE_ONDEMAND;this._tileWidth=a.tileWidth||512;this._tileHeight=a.tileHeight||512;this._mode=new S(this);this.latticeTiling=a.latticeTiling;break;case b.MODE_SELECTION:this.currentMode=b.MODE_SELECTION;this._mode=new X(this);this._isSelOnly=!0;break;case b.MODE_STREAM:this.currentMode=b.MODE_STREAM,this._mode=new aa(this),this._isStream=!0}this._initLayer=u.hitch(this,this._initLayer);
this._selectHandler=u.hitch(this,this._selectHandler);this._editable=!1;if(u.isObject(f)&&f.layerDefinition)return this._collection=!0,this.mode=this._isStream?b.MODE_STREAM:b.MODE_SNAPSHOT,this._initLayer(f),this;this._task=new M(this.url,{source:this.source,gdbVersion:this.gdbVersion});r=this._url.path;this._fserver=!1;-1!==r.search(/\/FeatureServer\//i)&&(this._fserver=!0);this.mode===b.MODE_AUTO&&this.reHostedFS.test(this.url)&&this._queryLimit();(b=a.resourceInfo)?this._initLayer(b):(this.source&&
(b={source:this.source.toJson()},this._url.query=u.mixin(this._url.query,{layer:s.toJson(b)})),this.gdbVersion&&(this._url.query=u.mixin(this._url.query,{gdbVersion:this.gdbVersion})),E({url:r,content:u.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler}));this.registerConnectEvents()},_initLayer:function(b,l){if(b||l){this._json=b;this._findCredential();if(this.credential&&this.credential.ssl||b&&b._ssl)this._useSSL(),this._task._useSSL();
this.version=b.currentVersion;this.version||(this.version="capabilities"in b||"drawingInfo"in b||"hasAttachments"in b||"htmlPopupType"in b||"relationships"in b||"timeInfo"in b||"typeIdField"in b||"types"in b?10:9.3);this._collection&&(this._isStream||(this.currentMode=$.MODE_SNAPSHOT,this._mode=new Q(this)),this._isSnapshot=!0,this._featureSet=b.featureSet,this._nextId=b.nextObjectId,b=b.layerDefinition);this.geometryType=b.geometryType;"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===
this.geometryType&&(this.multipatchOption="xyFootprint");if(b.hasOwnProperty("capabilities")){var v=this.capabilities=b.capabilities;v&&-1!==v.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);C.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._json=s.toJson(this._json);if(this.isEditable())this._setMaxOffset(null);
else if(this.mode!==$.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))this._autoGeneralize=C.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===$.MODE_ONDEMAND||this.mode===$.MODE_AUTO,delete this._optAutoGen;var v=b.effectiveMinScale||b.minScale,H=b.effectiveMaxScale||b.maxScale;!this._hasMin&&v&&this.setMinScale(v);!this._hasMax&&H&&this.setMaxScale(H);this.layerId=b.id;this.name=b.name;this.description=b.description;
this.copyright=b.copyrightText;this.type=b.type;this.displayField=b.displayField;this.defaultDefinitionExpression=b.definitionExpression;this.fullExtent=new W(b.extent);this.initialExtent=new W(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new I(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=b.defaultVisibility;if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=b.hasM||!1;
this.hasZ=b.hasZ||!1;this.indexedFields=b.indexedFields;this.maxRecordCount=b.maxRecordCount;this.canModifyLayer=b.canModifyLayer;this.supportsStatistics=b.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:b.supportsAdvancedQueries;this.supportsCalculate=b.supportsCalculate;this.supportsAttachmentsByUploadId=b.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=b.supportsCoordinatesQuantization;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
b.hasLabels;this.canScaleSymbols=b.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=b.supportsRollbackOnFailure;this.syncCanReturnChanges=b.syncCanReturnChanges;this.isDataVersioned=b.isDataVersioned;this.editFieldsInfo=b.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=b.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=b.relationships;
this.allowGeometryUpdates=C.isDefined(b.allowGeometryUpdates)?b.allowGeometryUpdates:!0;this.advancedQueryCapabilities=b.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;for(var c=this.fields=[],H=b.fields,v=0;v<H.length;v++)c.push(new f(H[v]));if(!this.objectIdField&&(this.objectIdField=b.objectIdField,!this.objectIdField)){H=
b.fields;for(v=0;v<H.length;v++)if(c=H[v],"esriFieldTypeOID"===c.type){this.objectIdField=c.name;break}}if(!C.isDefined(this._nextId)){H=this.objectIdField;c=-1;if(this._collection&&H)for(var d=(v=this._featureSet)&&v.features,g=d?d.length:0,e,v=0;v<g;v++)e=(e=d[v].attributes)&&e[H],e>c&&(c=e);this._nextId=c+1}this.globalIdField=b.globalIdField;if(v=this.typeIdField=b.typeIdField)if(v=!this._getField(v)&&this._getField(v,!0))this.typeIdField=v.name;this.visibilityField=b.visibilityField;if(H=b.defaultSymbol)this.defaultSymbol=
N.fromJson(H);var z=this.types=[],S=b.types,h,m,c=(v=this.editFieldsInfo)&&v.creatorField,d=v&&v.editorField;e=c||d;g=[];if(S)for(v=0;v<S.length;v++)h=new k(S[v]),m=h.templates,e&&(m&&m.length)&&(g=g.concat(m)),z.push(h);S=b.templates;h=this.templates=[];if(S)for(v=0;v<S.length;v++)z=new B(S[v]),e&&g.push(z),h.push(z);for(v=0;v<g.length;v++)if(e=u.getObject("prototype.attributes",!1,g[v]))c&&delete e[c],d&&delete e[d];if(v=b.timeInfo)this.timeInfo=new r(v),this._startTimeField=v.startTimeField,this._endTimeField=
v.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?v.trackIdField=this._trackIdField:this._trackIdField=v.trackIdField;this.hasAttachments=!this._collection&&b.hasAttachments?!0:!1;this.htmlPopupType=b.htmlPopupType;var v=b.drawingInfo,X;if((c=v&&v.labelingInfo)&&!this.labelingInfo)this.labelingInfo=q.map(c,function(f){return new J(f)}),this._fixLabelExpr();if(!this.renderer)if(v&&v.renderer){if(X=v.renderer,this.setRenderer(R.fromJson(X)),"classBreaks"===
X.type&&this.renderer.setMaxInclusive(!0),!this._collection){var n=X.type,H=[];X=this.renderer;switch(n){case "simple":H.push(X.symbol);break;case "uniqueValue":case "classBreaks":H.push(X.defaultSymbol),H=H.concat(q.map(X.infos,function(f){return f.symbol}))}var H=q.filter(H,C.isDefined),aa=this._url.path+"/images/",t=this._getToken();q.forEach(H,function(f){var a=f.url;a&&(-1===a.search(/https?\:/)&&-1===a.indexOf("data:")&&(f.url=aa+a),t&&-1!==f.url.search(/https?\:/)&&(f.url+="?token\x3d"+t))})}}else if(H)S=
this.types,0<S.length?(X=new K(this.defaultSymbol,this.typeIdField),q.forEach(S,function(f){X.addValue(f.id,f.symbol)})):X=new P(this.defaultSymbol),this.setRenderer(X);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":n=new L;break;case "esriGeometryPolyline":n=new D;break;case "esriGeometryPolygon":n=new G;break;default:this.hasXYFootprint()&&(n=new G)}this.setRenderer(n?new P(n):null)}n=v&&v.transparency||0;!this.hasOwnProperty("opacity")&&
0<n&&(this.opacity=1-n/100);if((a("ie")||7<=a("trident")||a("safari"))&&this.isEditable()&&10.02>this.version)this._ts=!0;this.statistics=b.statistics;this._fixRendererFields();this._checkFields();this._updateCaps();var x=function(){this.currentMode!==$.MODE_SNAPSHOT&&(this.queryPagination=!1);null!=this._maxOffset&&!this._isFractionalOffsetAllowed()&&this._setMaxOffset(this._maxOffset);this.loaded=!0;this.onLoad(this);var f=this._loadCallback;f&&(delete this._loadCallback,f(this))};this._collection?
(n=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new U(n)),this._fcAdded=!0,x.call(this)):this._forceIdentity(this._limitPromise?function(){var f=this;this._limitPromise.then(function(a){f._checkMode(a)});this._limitPromise.always(function(){f._limitPromise=null;x.call(f)})}:x)}},setShowLabels:function(f){this.showLabels=f;this.onShowLabelsChange()},onShowLabelsChange:function(){},onRendererChange:function(f){this.inherited(arguments);var a=this._map;this._ager=!(!f||!f.observationAger||
!f.observationRenderer);f&&"colors"in f&&"blurRadius"in f&&"maxPixelIntensity"in f?"esriGeometryPoint"==this.geometryType&&(!this._heatmapManager&&a)&&(this._heatmapManager=new ja(this),this._heatmapManager.initialize(a)):this.renderer&&this.renderer.getRendererInfo?q.some(this.renderer.rendererInfos,function(f){return f.renderer&&"colors"in f.renderer&&"blurRadius"in f.renderer})||(this._heatmapManager=null):this._heatmapManager=null;if(f){var r=[],a=q.filter([f,f.observationRenderer,f.latestObservationRenderer,
f.trackRenderer],C.isDefined),b=function(f){return null!=f&&"function"!=typeof f&&f};q.forEach(a,function(f){var a=b(f.attributeField),k=b(f.attributeField2);f=b(f.attributeField3);!1!==a&&r.push(a);!1!==k&&r.push(k);!1!==f&&r.push(f)});this._rendererFields=r}else this._rendererFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._rendererFields),this._collection&&(this._typesDirty=!0))},redraw:function(){this.inherited(arguments);this._trackManager&&this._trackManager.container&&
this._trackManager.container.redraw()},_evalSDRenderer:function(){this.inherited(arguments);var f=this._getRenderer();this._ager=!(!f||!f.observationAger||!f.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(f&&f.trackRenderer)},_setMap:function(f){var a=this.inherited(arguments),r=this._mode,b=this;r&&r.initialize(f);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=
this.on("graphic-node-add",function(f){f=f.graphic.attributes;(f=b._selectedFeatures[f&&f[b.objectIdField]])&&f.attr("data-selected","")});return a},_unsetMap:function(f){var a=this._mode;a&&a.suspend();this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);n.disconnect(this._zoomConnect);n.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this._toggleTime(!1);this.inherited("_unsetMap",arguments)},refresh:function(){this._needsRefresh=!1;var f=this._mode;f&&f.refresh()},
hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return q.filter(this._getOutFields(),function(f){return"*"===f||!!this._getField(f)},this)},getField:function(f){return this._getField(f,!0)},getDomain:function(f,a){var r,b,k=a&&a.feature,l=k&&this.typeIdField&&k.attributes&&k.attributes[this.typeIdField];null!=l&&q.some(this.types,function(a){if(a.id==l){if((r=a.domains&&a.domains[f])&&"inherited"===r.type)r=
this._getLayerDomain(f),b=!0;return!0}return!1},this);!b&&!r&&(r=this._getLayerDomain(f));return r},_getLayerDomain:function(f){var a;q.some(this.fields,function(r){r.name===f&&(a=r.domain);return!!a});return a},getType:function(f){var a,r=f&&this.typeIdField&&f.attributes&&f.attributes[this.typeIdField];q.some(this.types,function(f){f.id==r&&(a=f);return!!a});return a},setEditable:function(f){if(!this._collection)return this;if(!this.loaded)return this._optEditable=f,this;var a=this._editable;this._editable=
f;this._updateCaps();if(a!==f)this.onCapabilitiesChange();return this},getEditCapabilities:function(f){var a={canCreate:!1,canUpdate:!1,canDelete:!1};if(!this.loaded||!this.isEditable())return a;var r=f&&f.feature;f=f&&f.userId;var b=q.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],u.trim),k=-1<q.indexOf(b,"editing"),l=k&&-1<q.indexOf(b,"create"),a=k&&-1<q.indexOf(b,"update"),b=k&&-1<q.indexOf(b,"delete"),B=this.ownershipBasedAccessControlForFeatures,v=this.editFieldsInfo,H=v&&
v.creatorField,v=v&&v.realm,r=(r=r&&r.attributes)&&H?r[H]:void 0,c=!!this.userIsAdmin,H=!B||c||!(!B.allowOthersToUpdate&&!B.allowUpdateToOthers),B=!B||c||!(!B.allowOthersToDelete&&!B.allowDeleteToOthers);if(c||k&&!l&&!a&&!b)l=a=b=!0;k={canCreate:l,canUpdate:a,canDelete:b};null===r?(k.canUpdate=a&&H,k.canDelete=b&&B):""!==r&&r&&((f=f||this.getUserId())&&v&&(f=f+"@"+v),f.toLowerCase()!==r.toLowerCase()&&(k.canUpdate=a&&H,k.canDelete=b&&B));return k},getUserId:function(){var f;this.loaded&&(f=this.credential&&
this.credential.userId||this.userId||"");return f},setUserIsAdmin:function(f){this.userIsAdmin=f},setEditSummaryCallback:function(f){this.editSummaryCallback=f},getEditSummary:function(f,a,r){r=C.isDefined(r)?r:(new Date).getTime();var b="";r=this.getEditInfo(f,a,r);(a=a&&a.callback||this.editSummaryCallback)&&(r=a(f,r)||"");if(u.isString(r))b=r;else{if(r){f=r.action;a=r.userId;var k=r.timeValue,l=0;f&&l++;a&&l++;C.isDefined(k)&&l++;1<l&&(b=("edit"===f?"edit":"create")+(a?"User":"")+(C.isDefined(k)?
r.displayPattern:""))}b=b&&C.substitute(r,this.i18n.layers.FeatureLayer[b])}return b},getEditInfo:function(f,a,r){if(this.loaded){r=C.isDefined(r)?r:(new Date).getTime();a=a&&a.action||"last";var b=this.editFieldsInfo,k=b&&b.creatorField,l=b&&b.creationDateField,B=b&&b.editorField,b=b&&b.editDateField,B=(f=f&&f.attributes)&&B?f[B]:void 0,b=f&&b?f[b]:null,k=this._getEditData(f&&k?f[k]:void 0,f&&l?f[l]:null,r);r=this._getEditData(B,b,r);var v;switch(a){case "creation":v=k;break;case "edit":v=r;break;
case "last":v=r||k}v&&(v.action=v===r?"edit":"creation");return v}},_getEditData:function(f,a,r){var b,k,l;C.isDefined(a)&&(k=r-a,l=0>k?"Full":6E4>k?"Seconds":12E4>k?"Minute":36E5>k?"Minutes":72E5>k?"Hour":864E5>k?"Hours":6048E5>k?"WeekDay":"Full");if(void 0!==f||l)b=b||{},b.userId=f,l&&(f=c.format,r=new Date(a),b.minutes=Math.floor(k/6E4),b.hours=Math.floor(k/36E5),b.weekDay=f(r,{datePattern:"EEEE",selector:"date"}),b.formattedDate=f(r,{selector:"date"}),b.formattedTime=f(r,{selector:"time"}),b.displayPattern=
l,b.timeValue=a);return b},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},setMaxAllowableOffset:function(f){this.isEditable()||this._setMaxOffset(f,!0);return this},getMaxAllowableOffset:function(){var f=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:f},_setMaxOffset:function(f,a){if(null==f)return delete this._maxOffset,delete this._quantizationParameters,this;if(this.quantize&&this.supportsCoordinatesQuantization)"esriGeometryPolyline"===
this.geometryType?this._maxOffset=f:delete this._maxOffset,this._quantizationParameters={mode:"view",originPosition:"upperLeft",tolerance:f,extent:this.fullExtent};else{if(!this._isFractionalOffsetAllowed()||!a)f=Math.floor(f);isNaN(f)||0===f?delete this._maxOffset:this._maxOffset=f;delete this._quantizationParameters}return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(f){f=
(f=f&&f.split("-"))&&f[0]&&f[0].toLowerCase();return-1!==q.indexOf(this._langsWithDot,f)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(f){if(this.loaded){if(!this.isEditable()&&this.mode!==$.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))(this._autoGeneralize=f)?(this._autoSnapshot&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)}else this._optAutoGen=f;return this},
setGDBVersion:function(f){if(!this._collection&&f!==this.gdbVersion&&(f||this.gdbVersion))this.gdbVersion=f,this._task.gdbVersion=f,this._url.query=u.mixin(this._url.query,{gdbVersion:f}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange();return this},setDefinitionExpression:function(f){this._defnExpr=f;(f=this._mode)&&f.propertyChangeHandler(1);return this},getDefinitionExpression:function(){return this._defnExpr},setTimeDefinition:function(f){this._isSnapshot&&
(this._timeDefn=f,(f=this._mode)&&f.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(f,a){this._timeOffset=f;this._timeOffsetUnits=a;var r=this._mode;r&&r.propertyChangeHandler(0);return this},setUseMapTime:function(f){this.useMapTime=f;this._toggleTime(!this.suspended);(f=this._mode)&&f.propertyChangeHandler(0)},selectFeatures:function(f,a,r,b){a=a||$.SELECTION_NEW;f=this._getShallowClone(f);var k=this._map,l,B=this,v=y._fixDfd(new h(y._dfdCanceller));
f.outFields=this.getOutFields();f.returnGeometry=!0;f.multipatchOption=this.multipatchOption;k&&(f.outSpatialReference=new I(k.spatialReference.toJson()));if(!this._applyQueryFilters(f,!0))return l={features:[]},this._selectHandler(l,a,r,b,v),v;if(k=this._canDoClientSideQuery(f))v._pendingDfd=w(this._doQuery(f,k)),v._pendingDfd.then(function(f){l={features:f};B._selectHandler(l,a,r,b,v)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,
b,v,!0),v;var H=this;this._ts&&(f._ts=(new Date).getTime());(v._pendingDfd=this._task.execute(f)).addCallbacks(function(f){H._selectHandler(f,a,r,b,v)},function(f){H._resolve([f],null,b,v,!0)})}return v},getSelectedFeatures:function(){var f=this._selectedFeatures,a=[],r;for(r in f)f.hasOwnProperty(r)&&a.push(f[r]);return a},clearSelection:function(f){var a=this._selectedFeatures,r=this._mode,b;for(b in a)a.hasOwnProperty(b)&&(this._unSelectFeatureIIf(b,r),r._removeFeatureIIf(b));this._selectedFeatures=
{};this._isSelOnly&&r._applyTimeFilter(!0);if(!f)this.onSelectionClear();return this},setSelectionSymbol:function(f){if(this._selectionSymbol=f){var a=this._selectedFeatures,r;for(r in a)a.hasOwnProperty(r)&&a[r].setSymbol(f)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(f){f?(this.labelingInfo=f,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this.onLabelingInfoChange()},_fixLabelExpr:function(){var f=/\[([^\[\]]+)\]/ig,
a,r=this,b=function(f,a){var b=r._getField(a,!0);return"["+(b&&b.name||a)+"]"};q.forEach(this.labelingInfo,function(r){if(a=r.labelExpression)r.labelExpression=a.replace(f,b)})},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(f,a,r,b,k,l){var B=l.assembly,v=l.dfd;this._applyNormalized(f,B&&B[0]);this._applyNormalized(a,B&&B[1]);this.onBeforeApplyEdits(f,a,r);var H={},c=this.objectIdField,B={f:"json"},J=!1;if(this._collection)l={},l.addResults=f?q.map(f,function(){J=!0;
return{objectId:this._nextId++,success:!0}},this):null,l.updateResults=a?q.map(a,function(f){J=!0;var a=f.attributes[c];H[a]=f;return{objectId:a,success:!0}},this):null,l.deleteResults=r?q.map(r,function(f){J=!0;return{objectId:f.attributes[c],success:!0}},this):null,J?this._editHandler(l,f,H,b,k,v):this._resolve([l.addResults,l.updateResults,l.deleteResults],null,b,v);else{f&&0<f.length&&(B.adds=this._convertFeaturesToJson(f,0,1),J=!0);if(a&&0<a.length){for(l=0;l<a.length;l++){var d=a[l];H[d.attributes[c]]=
d}B.updates=this._convertFeaturesToJson(a,0,0,1);J=!0}if(r&&0<r.length){a=[];for(l=0;l<r.length;l++)a.push(r[l].attributes[c]);B.deletes=a.join(",");J=!0}if(J){var Q=this;return E({url:this._url.path+"/applyEdits",content:u.mixin(B,this._url.query),callbackParamName:"callback",load:function(a){Q._editHandler(a,f,H,b,k,v)},error:function(f){Q._resolve([f],null,k,v,!0)}},{usePost:!0})}this._resolve([],null,b,v)}},queryFeatures:function(f,a,r){return this._query("execute","onQueryFeaturesComplete",f,
a,r)},queryRelatedFeatures:function(f,a,r){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",f,a,r)},queryIds:function(f,a,r){return this._query("executeForIds","onQueryIdsComplete",f,a,r)},queryCount:function(f,a,r){return this._query("executeForCount","onQueryCountComplete",f,a,r)},queryExtent:function(f,a,r){return this._query("executeForExtent","onQueryExtentComplete",f,a,r)},queryAttachmentInfos:function(f,a,r){var b=this._url.path+"/"+f+"/attachments",k=new h(y._dfdCanceller),
l=this;k._pendingDfd=E({url:b,content:u.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(r){r=r.attachmentInfos;var B;q.forEach(r,function(a){B=d.objectToQuery({gdbVersion:l._url.query&&l._url.query.gdbVersion,layer:l._url.query&&l._url.query.layer,token:l._getToken()});a.url=b+"/"+a.id+(B?"?"+B:"");a.objectId=f});l._resolve([r],"onQueryAttachmentInfosComplete",a,k)},error:function(f){l._resolve([f],null,r,k,!0)}});return k},addAttachment:function(f,a,r,b){return this._sendAttachment("add",
f,a,r,b)},updateAttachment:function(f,a,r,b,k){r.appendChild(g.create("input",{type:"hidden",name:"attachmentId",value:a}));return this._sendAttachment("update",f,r,b,k)},deleteAttachments:function(f,a,r,b){var k=this._url.path+"/"+f+"/deleteAttachments",l=new h(y._dfdCanceller),B=this;a={f:"json",attachmentIds:a.join(",")};l._pendingDfd=E({url:k,content:u.mixin(a,this._url.query),callbackParamName:"callback",load:u.hitch(this,function(a){a=a.deleteAttachmentResults;a=q.map(a,function(a){a=new H(a);
a.attachmentId=a.objectId;a.objectId=f;return a});B._resolve([a],"onDeleteAttachmentsComplete",r,l)}),error:function(f){B._resolve([f],null,b,l,!0)}},{usePost:!0});return l},addType:function(f){var a=this.types;if(a){if(q.some(a,function(a){return a.id==f.id?!0:!1}))return!1;a.push(f)}else this.types=[f];return this._typesDirty=!0},deleteType:function(f){if(this._collection){var a=this.types;if(a){var r=-1;q.some(a,function(a,b){return a.id==f?(r=b,!0):!1});if(-1<r)return this._typesDirty=!0,a.splice(r,
1)[0]}}},toJson:function(){var f=this._json;if(f=u.isString(f)?s.fromJson(f):u.clone(f)){var f=f.layerDefinition?f:{layerDefinition:f},a=f.layerDefinition,r=this._collection;if(r&&this._typesDirty){a.types=q.map(this.types||[],function(f){return f.toJson()});var b=this.renderer,k=this.labelingInfo,l=a.drawingInfo;if((b||k)&&!l)l=a.drawingInfo={};l&&(b&&-1===b.declaredClass.indexOf("TemporalRenderer"))&&(l.renderer=b.toJson());k&&(l.labelingInfo=q.map(k,function(f){return f.toJson()}))}b=null;if(!r||
this._fcAdded)b={geometryType:a.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};f.featureSet=u.mixin({},f.featureSet||{},b);f.featureSet.transform&&(k=f.featureSet.transform,delete f.featureSet.transform,b=new U(f.featureSet),b.quantize(k),f.featureSet=b.toJson());r&&(f.nextObjectId=this._nextId,a.capabilities=this.capabilities);return f}},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},
onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},_forceIdentity:function(f){function a(f){var r=["allowOthersToUpdate",
"allowOthersToDelete","allowOthersToQuery"];return f&&q.some(r,function(a){return f.hasOwnProperty(a)&&!f[a]})}var r=this,b,k=this._url&&this._url.path;b=k&&k.toLowerCase().indexOf("/rest/services");(this.userIsAdmin||a(this.ownershipBasedAccessControlForFeatures))&&!this._getToken()&&-1<b&&x.id?(b=k.substring(0,b)+"/rest/info",E({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(f){if(f.owningSystemUrl)return x.id.checkSignInStatus(f.owningSystemUrl+"/sharing")}).then(function(f){if(f)return x.id.getCredential(k)}).then(function(f){f&&
r._findCredential()}).always(function(){f.call(r)})):f.call(this)},_checkMode:function(f){var a=this.geometryType,r=this.maxRecordCount;f=(f=f&&f.features&&f.features[0])&&f.attributes&&f.attributes.exceedslimit;if(this.mode===$.MODE_AUTO&&!this.isEditable()&&0===f&&(this.queryPagination||("esriGeometryPolyline"===a||"esriGeometryPolygon"===a||"esriGeometryMultipoint"===a||this.hasXYFootprint())&&r>=this.maxRecordCountForAuto||"esriGeometryPoint"===a&&r>=this.maxPointCountForAuto))this.currentMode=
$.MODE_SNAPSHOT,this._mode=new Q(this),this._isSnapshot=this._autoSnapshot=!0},_queryLimit:function(){var f=this,a=new h;this._limitPromise=a.promise;setTimeout(function(){var r=new T,b=new V;b.statisticType="exceedslimit";b.maxPointCount=f.maxPointCountForAuto;b.maxRecordCount=f.maxRecordCountForAuto;b.maxVertexCount=f.maxVertexCountForAuto;b.outStatisticFieldName="exceedslimit";r.outStatistics=[b];f.queryFeatures(r).promise.then(function(f){a.resolve(f)},function(f){a.reject(f)})},0)},_updateCaps:function(){var f=
this._editable,a=u.trim(this.capabilities||""),r=q.map(a?a.split(","):[],u.trim),b=q.map(a?a.toLowerCase().split(","):[],u.trim),a=q.indexOf(b,"editing"),k,b={Create:q.indexOf(b,"create"),Update:q.indexOf(b,"update"),Delete:q.indexOf(b,"delete")};if(f&&-1===a)r.push("Editing");else if(!f&&-1<a){f=[a];for(k in b)-1<b[k]&&f.push(b[k]);f.sort();for(k=f.length-1;0<=k;k--)r.splice(f[k],1)}this.capabilities=r.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);
this._toggleTime(!1);var f=this._mode;f&&f.suspend()},onResume:function(f){this.inherited(arguments);this._toggleTime(!0);var a=this._mode,r=this._map,b=this._getRenderer();if(f.firstOccurrence){this._fixRendererFields();this._checkFields();this.clearSelection();if(this.timeInfo&&!this._trackManager&&(this._trackIdField||b&&(b.latestObservationRenderer||b.trackRenderer)))this._trackManager=new ka(this),this._trackManager.initialize(r);b&&("colors"in b&&"blurRadius"in b&&"maxPixelIntensity"in b)&&
("esriGeometryPoint"==this.geometryType&&!this._heatmapManager)&&(this._heatmapManager=new ja(this),this._heatmapManager.initialize(r));if(this._autoSnapshot&&this._autoGeneralize&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint())&&!this.isEditable()&&null==this.getMaxAllowableOffset())b=this.generalizeForScale,this._calculatedScale=b=this.maxScale?this.maxScale:this.minScale?Math.min(b,this.minScale):Math.min(b,z.getScale(r,this.initialExtent)),
this._calcMaxOffset=r.extent.getWidth()/r.width/r.getScale()*b;this._zoomConnect=n.connect(r,"onZoomEnd",this,this._zoomEndHandler);this._updateMaxOffset();this._needsRefresh=!1;a&&a.startup()}else this._zoomEndHandler(),a&&a.resume()},_zoomEndHandler:function(){var f=this._map;this._updateMaxOffset();this._prevScale=f.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var f=this._map;f&&f.loaded&&this._autoGeneralize&&(this._autoSnapshot?(f=this.getMaxAllowableOffset(),
this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=f!=this.getMaxAllowableOffset())):this._setMaxOffset(f.extent.getWidth()/f.width,!f.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var f=this._map.getScale(),a=this._calculatedScale,r=this._calcMaxOffset,b=this._prevScale;return f>=a&&(null==b||b<a)?r:f<a&&(null==b||b>=a)?null:this.getMaxAllowableOffset()}},_toggleTime:function(f){var a=this._map;f&&this.timeInfo&&
this.useMapTime&&a?(this._mapTimeExtent=a.timeExtent,this._timeConnect||(this._timeConnect=n.connect(a,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,n.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(f){this._mapTimeExtent=f;(f=this._mode)&&f.propertyChangeHandler(0)},_getOffsettedTE:function(f){var a=this._timeOffset,r=this._timeOffsetUnits;return f&&a&&r?f.offset(-1*a,r):f},_getTimeOverlap:function(f,a){return f&&a?f.intersection(a):
f||a},_getTimeFilter:function(f){var a=this.getTimeDefinition(),r;if(a&&(r=this._getTimeOverlap(a,null),!r))return[!1];if(f){if(f=r?this._getTimeOverlap(f,r):f,!f)return[!1]}else f=r;return[!0,f]},_getAttributeFilter:function(f){var a=this.getDefinitionExpression();return f?a?"("+a+") AND ("+f+")":f:a},_applyQueryFilters:function(f,a){f.where=this._getAttributeFilter(f.where);f.maxAllowableOffset||(f.maxAllowableOffset=this._maxOffset);f.quantizationParameters=this._quantizationParameters;a&&this.supportsAdvancedQueries&&
(f.orderByFields=f.orderByFields||this.getOrderByFields());if(this.timeInfo){var r=this._getTimeFilter(f.timeExtent);if(r[0])f.timeExtent=r[1];else return!1}return!0},_add:function(f){var a=this._selectionSymbol,r=f.attributes,b=this.visibilityField;a&&this._isSelOnly&&f.setSymbol(a);if(b&&r&&r.hasOwnProperty(b))f[r[b]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(f){var a=[],r=this._map,b;if(!(this._isTable||
!r&&!this._collection))if(!f.text&&!(f.where&&f.where!==this.getDefinitionExpression()||f.orderByFields&&f.orderByFields.length&&(b=this.getOrderByFields()||[])&&f.orderByFields.join()!==b.join()||f.outStatistics||f.returnDistinctValues)){b=this._isSnapshot;var k=this._isSelOnly,l=f.geometry;if(l)if(!k&&f.spatialRelationship===T.SPATIAL_REL_INTERSECTS&&"extent"===l.type&&(b||r.extent.contains(l)))a.push(1);else return;if(r=f.objectIds)if(b)a.push(2);else{var l=r.length,B=this._mode,v=0,H;for(H=0;H<
l;H++)B._getFeature(r[H])&&v++;if(v===l)a.push(2);else return}if(this.timeInfo)if(f=f.timeExtent,r=this._mapTimeExtent,b)f&&a.push(3);else if(k){if(f)return}else if(r)if(-1!==q.indexOf(a,2))f&&a.push(3);else if(-1!==q.indexOf(a,1))f==r&&a.push(3);else return;else if(0<a.length)f&&a.push(3);else if(f)return;return 0<a.length?a:null}},_getAbsMid:function(f){return e.toAbsMid?e.toAbsMid(f):t.id.replace(/\/[^\/]*$/ig,"/")+f},_doQuery:function(f,a,r){var b=[],k=this.objectIdField,l=this,B=new h,v=new h,
H=this.graphics;if(-1!==q.indexOf(a,1)){var c=this.spatialIndex||this._map&&this._map.spatialIndex,J,d=f.geometry._normalize(null,!0);null==c&&ca.autoSpatialIndexing?J=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(u.hitch(this,u.partial(this._getFromIndex,d,c)),function(f){v.resolve(u.hitch(this,u.partial(this._filterByExtent,H,d)))}):c&&(J=this._getFromIndex(d,c));J?J.then(function(f){for(var a=0;a<f.length;a++)f[a].results&&(b=b.concat(f[a].results));v.resolve(b)}).otherwise(function(f){v.reject(f)}):
v.resolve(this._filterByExtent(H,d))}else v.resolve(H);v.then(function(v){b=v;if(-1!==q.indexOf(a,2)){var H=f.objectIds;b=q.filter(b,function(f){return-1<q.indexOf(H,f.attributes[k])})}-1!==q.indexOf(a,3)&&l.timeInfo&&(v=f.timeExtent,b=l._filterByTime(b,v.startTime,v.endTime).match);r&&(b=q.map(b,function(f){return f.attributes[k]},this));B.resolve(b)});return B},_getFromIndex:function(f,a){a=a||this.spatialIndex||this._map.spatialIndex;f instanceof Array||(f=[f]);var r=this.id;return A(q.map(f,function(f){return a.intersects(f,
r)}))},_filterByExtent:function(f,a){for(var r=[],b=0,k=f.length;b<k;b++){var l=f[b],B=l.geometry;B&&(this.normalization&&a.length?(a[0].intersects(B)||a[1].intersects(B))&&r.push(l):a.intersects(B)&&r.push(l))}return r},_filterByTime:function(f,a,r){var b=this._startTimeField,k=this._endTimeField,l;this._twoTimeFields||(l=b||k);var B=C.isDefined,v=[],H=[],c,J=f.length,d,Q;a=a?a.getTime():-Infinity;r=r?r.getTime():Infinity;if(l)for(c=0;c<J;c++)d=f[c],Q=d.attributes,b=Q[l],b>=a&&b<=r?v.push(d):H.push(d);
else for(c=0;c<J;c++)d=f[c],Q=d.attributes,l=Q[b],Q=Q[k],l=B(l)?l:-Infinity,Q=B(Q)?Q:Infinity,l>=a&&l<=r||Q>=a&&Q<=r||a>=l&&r<=Q?v.push(d):H.push(d);return{match:v,noMatch:H}},_resolve:function(f,a,r,b,k){a&&this[a].apply(this,f);r&&r.apply(null,f);b&&y._resDfd(b,f,k)},_getShallowClone:function(f){var a=new T,r;for(r in f)f.hasOwnProperty(r)&&(a[r]=f[r]);return a},_query:function(f,a,r,b,k){var l=this,B=this._map,v=new h(y._dfdCanceller),H=r,c,J;if("executeRelationshipQuery"!==f){var H=this._getShallowClone(r),
d=this.getOutFields();H.outFields||(H.outFields=d);H.outFields&&H.outFields.length&&(J=-1<q.indexOf(d,"*")?!1:!q.every(H.outFields,function(f){return-1<q.indexOf(d,f)}));H.returnGeometry=r.hasOwnProperty("returnGeometry")?r.returnGeometry:!r.outStatistics;H.returnGeometry&&(H.multipatchOption=this.multipatchOption);var Q;B&&(r=B&&B.spatialReference,(B=H.outSpatialReference)?c=!B.equals(r):H.outSpatialReference=new I(r.toJson()));if(!this._applyQueryFilters(H,"execute"===f&&!H.outStatistics)){switch(f){case "execute":Q=
new U({features:[]});break;case "executeForIds":Q=[];break;case "executeForCount":Q=0;break;case "executeForExtent":Q={}}this._resolve([Q],a,b,v);return v}if(r="executeForExtent"!==f&&!c&&!J&&this._canDoClientSideQuery(H))return v._pendingDfd=w(this._doQuery(H,r,"executeForIds"===f||"executeForCount"===f)),v._pendingDfd.then(function(r){switch(f){case "execute":Q=new U;Q.features=r;break;case "executeForIds":Q=r;break;case "executeForCount":Q=r.length}l._resolve([Q],a,b,v)}),v}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+
this.invalidParams)],null,k,v,!0),v;this._ts&&(H._ts=(new Date).getTime());(v._pendingDfd=this._task[f](H)).addCallbacks(function(r){var k=!!H.outStatistics||c||J;if("execute"===f||"executeRelationshipQuery"===f){var B,d;if("execute"===f){B=r.features;d=B.length;for(d-=1;0<=d;d--)if(B[d]._layer=l,!k&&!l._isTable){var Q=l._mode._getFeature(B[d].attributes[l.objectIdField]);Q&&B.splice(d,1,Q)}}else for(Q in r)if(r.hasOwnProperty(Q)){B=r[Q].features;d=B.length;for(d-=1;0<=d;d--)B[d]._layer=l}}l._resolve([r],
a,b,v)},function(f){l._resolve([f],null,k,v,!0)});return v},_convertFeaturesToJson:function(f,a,r,b){var k=[],l=this._selectionSymbol,B=this.visibilityField,v,H=this.objectIdField;if(this.loaded&&(r||b))v=q.filter(this.fields,function(f){return!1===f.editable&&(!b||f.name!==H)});for(r=0;r<f.length;r++){var c=f[r],J={},d=c.geometry,Q=c.attributes,g=c.symbol;if(d&&(!b||!this.loaded||this.allowGeometryUpdates))J.geometry=d.toJson();B?(J.attributes=Q=u.mixin({},Q),Q[B]=c.visible?1:0):Q&&(J.attributes=
u.mixin({},Q));J.attributes&&(v&&v.length)&&q.forEach(v,function(f){delete J.attributes[f.name]});g&&g!==l&&(J.symbol=g.toJson());k.push(J)}return a?k:s.toJson(k)},_selectHandler:function(f,a,r,b,k){var l;b=$;switch(a){case b.SELECTION_NEW:this.clearSelection(!0);l=!0;break;case b.SELECTION_ADD:l=!0;break;case b.SELECTION_SUBTRACT:l=!1}b=f.features;var B=this._mode,v=[],H=this.objectIdField,c,J;if(l)for(l=0;l<b.length;l++)c=b[l],J=c.attributes[H],c=B._addFeatureIIf(J,c),v.push(c),this._selectFeatureIIf(J,
c,B);else for(l=0;l<b.length;l++)c=b[l],J=c.attributes[H],this._unSelectFeatureIIf(J,B),J=B._removeFeatureIIf(J),v.push(J||c);this._isSelOnly&&B._applyTimeFilter(!0);this._resolve([v,a,f.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",r,k);if(f.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(f,a,r){var b=this._selectedFeatures,k=b[f];k||(r._incRefCount(f),b[f]=a,this._isTable||(this._setSelectSymbol(a),a.attr("data-selected","")));return k||
a},_unSelectFeatureIIf:function(f,a){var r=this._selectedFeatures[f];r&&(a._decRefCount(f),delete this._selectedFeatures[f],this._isTable||(this._setUnSelectSymbol(r),r.attr("data-selected")));return r},_isSelected:function(f){},_setSelectSymbol:function(f){var a=this._selectionSymbol;a&&!this._isSelOnly&&f.setSymbol(a)},_setUnSelectSymbol:function(f){var a=this._selectionSymbol;a&&!this._isSelOnly&&a===f.symbol&&f.setSymbol(null,!0)},_getOutFields:function(){var f=[this.objectIdField,this.typeIdField,
this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields).concat(this.dataAttributes),f=q.filter(f,function(f,a,r){return!!f&&q.indexOf(r,f)===a}),a=u.clone(this._outFields);if(a){if(-1!==q.indexOf(a,"*"))return a;q.forEach(f,function(f){-1===q.indexOf(a,f)&&a.push(f)});return a}return f},_checkFields:function(f){var a=f||this._getOutFields();q.forEach(a,function(f){"*"!==f&&this._getField(f)},this);!f&&(!this._isTable&&!this._fserver&&!this._collection&&
!this._isStream)&&q.some(this.fields,function(f){return f&&"esriFieldTypeGeometry"===f.type?!0:!1})},_fixFieldCase:function(f,a,r){var b=f&&f[a],k;if(b&&!u.isFunction(b)){if(k=!this._getField(b)&&this._getField(b,!0))b=f[a]=k.name;r&&r.push(b)}return b},_fixRendererFields:function(){var f=this.renderer;this._orderBy=null;if(f&&0<this.fields.length){var a=[],r,f=q.filter([f,f.observationRenderer,f.latestObservationRenderer,f.trackRenderer],C.isDefined),b=[].concat(f);q.forEach(f,function(f){q.forEach(f.rendererInfos,
function(f){f.renderer&&b.push(f.renderer)})});q.forEach(b,function(f){this._fixFieldCase(f,"attributeField",a);this._fixFieldCase(f,"attributeField2",a);this._fixFieldCase(f,"attributeField3",a);this._fixFieldCase(f.rotationInfo,"field",a);if((r=this._fixFieldCase(f.sizeInfo,"field",a))&&!this._orderBy)this._orderBy=[r+" DESC"];this._fixFieldCase(f.sizeInfo,"normalizationField",a);this._fixFieldCase(f.colorInfo,"field",a);this._fixFieldCase(f.colorInfo,"normalizationField",a);this._fixFieldCase(f.field,
"field",a);this._fixFieldCase(f.opacityInfo,"field",a);this._fixFieldCase(f.opacityInfo,"normalizationField",a);q.forEach(f.visualVariables,function(f){r=this._fixFieldCase(f,"field",a);"sizeInfo"===f.type&&(r&&!this._orderBy)&&(this._orderBy=[r+" DESC"]);this._fixFieldCase(f,"normalizationField",a)},this);if(!this._orderBy&&f.addBreak&&!u.isFunction(f.attributeField)&&(f.backgroundFillSymbol||this._hasSizeDiff(f)))this._orderBy=[f.attributeField+" DESC"]},this);this._rendererFields=q.filter(a,C.isDefined)}},
_hasSizeDiff:function(f){var a=Number.MAX_VALUE,r=-Number.MAX_VALUE,b,k;q.forEach(f.infos,function(f){if(k=f.symbol){b=0;switch(k.type){case "simplemarkersymbol":b=k.size;break;case "picturemarkersymbol":b=(k.width+k.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":b=k.width;break;case "simplefillsymbol":case "picturefillsymbol":b=k.outline&&k.outline.width}b&&(a=Math.min(a,b),r=Math.max(r,b))}});return a!==Number.MAX_VALUE&&r!==-Number.MAX_VALUE&&1<Math.abs(r-a)},getOrderByFields:function(){var f=
this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&f?q.filter(f,function(f){f=f.split(" ")[0];return!!this._getField(f,!0)},this):null},_getField:function(f,a){var r=this.fields;if(!r||0===r.length)return null;var b;a&&(f=f.toLowerCase());q.some(r,function(r){var k=!1;(k=a?r&&r.name.toLowerCase()===f?!0:!1:r&&r.name===f?!0:!1)&&(b=r);return k});return b},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:q.map(q.filter(this.fields,function(f){return!!(f&&"esriFieldTypeDate"===
f.type)}),function(f){return f.name})});return this._dtOpts},_applyNormalized:function(f,a){f&&a&&q.forEach(f,function(f,r){f&&a[r]&&f.setGeometry(a[r])})},_editHandler:function(f,a,r,b,k,l){k=f.addResults;var B=f.updateResults;f=f.deleteResults;var c,J,d,Q,g=this.objectIdField,e=this._mode,z=this._isTable;c=this.editFieldsInfo;var S=this.getOutFields()||[],h=c&&c.creatorField,m=c&&c.creationDateField,X=c&&c.editorField,n=c&&c.editDateField;c=c&&c.realm;-1===q.indexOf(S,"*")&&(h&&-1===q.indexOf(S,
h)&&(h=null),m&&-1===q.indexOf(S,m)&&(m=null),X&&-1===q.indexOf(S,X)&&(X=null),n&&-1===q.indexOf(S,n)&&(n=null));var S=m||n?(new Date).getTime():null,s=h||X?this.getUserId():void 0;s&&c&&(s=s+"@"+c);if(k)for(c=0;c<k.length;c++)k[c]=new H(k[c]),z||(J=k[c],J.success&&(J=J.objectId,d=a[c],(Q=d._graphicsLayer)&&Q!==this&&Q.remove(d),Q=d.attributes||{},Q[g]=J,h&&(Q[h]=s),X&&(Q[X]=s),m&&(Q[m]=S),n&&(Q[n]=S),d.setAttributes(Q),e._init&&e.drawFeature(d)));if(B)for(c=0;c<B.length;c++)if(B[c]=new H(B[c]),!z&&
(J=B[c],J.success)){J=J.objectId;d=r[J];if(a=e._getFeature(J))a.geometry!==d.geometry&&d.geometry&&a.setGeometry(v.fromJson(d.geometry.toJson())),a.attributes!==d.attributes&&d.attributes&&a.setAttributes(u.mixin(a.attributes,d.attributes)),this._repaint(a,J);d=a||d;Q=d.attributes||{};X&&(Q[X]=s);n&&(Q[n]=S);d.setAttributes(Q)}if(f){r=[];for(c=0;c<f.length;c++)if(f[c]=new H(f[c]),!z&&(J=f[c],J.success&&(J=J.objectId,d=e._getFeature(J))))this._unSelectFeatureIIf(J,e)&&r.push(d),d._count=0,e._removeFeatureIIf(J);
if(0<r.length)this.onSelectionComplete(r,$.SELECTION_SUBTRACT)}this._resolve([k,B,f],"onEditsComplete",b,l)},_sendAttachment:function(f,a,r,b,k){var l=this;return E({url:this._url.path+"/"+a+"/"+("add"===f?"addAttachment":"updateAttachment"),form:r,content:u.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(r){var k="add"===f?"onAddAttachmentComplete":"onUpdateAttachmentComplete";r=new H(r["add"===f?"addAttachmentResult":
"updateAttachmentResult"]);r.attachmentId=r.objectId;r.objectId=a;l._resolve([r],k,b);return r}).addErrback(function(f){l._resolve([f],null,k,null,!0)})},_repaint:function(f,a,r){a=C.isDefined(a)?a:f.attributes[this.objectIdField];(!(a in this._selectedFeatures)||!this._selectionSymbol)&&f.setSymbol(f.symbol,r)},_getKind:function(f){var a=this._trackManager;return a?a.isLatestObservation(f)?1:0:0}});u.mixin($,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,
MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});O._createWrappers($);a("extend-esri")&&u.setObject("layers.FeatureLayer",$,x);return $})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./RangeDomain ./CodedValueDomain".split(" "),function(e,t,b,n,u,q){e=e(null,{declaredClass:"esri.layers.Field",constructor:function(b){if(b&&t.isObject(b)&&
(this.name=b.name,this.type=b.type,this.alias=b.alias,this.length=b.length,this.editable=b.editable,this.nullable=b.nullable,(b=b.domain)&&t.isObject(b)))switch(b.type){case "range":this.domain=new u(b);break;case "codedValue":this.domain=new q(b)}}});b("extend-esri")&&t.setObject("layers.Field",e,n);return e})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(e,t,b,n,u,q){e=e([q],{declaredClass:"esri.layers.RangeDomain",
constructor:function(b){b&&t.isObject(b)&&(this.minValue=b.range[0],this.maxValue=b.range[1])},toJson:function(){var b=this.inherited(arguments);b.range=[this.minValue,this.maxValue];return u.fixJson(b)}});b("extend-esri")&&t.setObject("layers.RangeDomain",e,n);return e})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,t,b,n,u){e=e(null,{declaredClass:"esri.layers.Domain",constructor:function(b){b&&t.isObject(b)&&(this.name=
b.name,this.type=b.type)},toJson:function(){return u.fixJson({name:this.name,type:this.type})}});b("extend-esri")&&t.setObject("layers.Domain",e,n);return e})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(e,t,b,n,u,q,s){e=e([s],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(b){b&&t.isObject(b)&&(this.codedValues=b.codedValues)},getName:function(e){var c;b.some(this.codedValues,
function(a){a.code==e&&(c=a.name);return!!c});return c},toJson:function(){var b=this.inherited(arguments);b.codedValues=t.clone(this.codedValues);return q.fixJson(b)}});n("extend-esri")&&t.setObject("layers.CodedValueDomain",e,u);return e})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "),function(e,t,b,n,u,q,s,h,c,a,d){e=
e(null,{declaredClass:"esri.layers.FeatureType",constructor:function(b){if(b&&t.isObject(b)){this.id=b.id;this.name=b.name;var e=b.symbol;e&&(this.symbol=s.fromJson(e));var e=b.domains,q,n=this.domains={};for(q in e)if(e.hasOwnProperty(q)){var x=e[q];switch(x.type){case "range":n[q]=new h(x);break;case "codedValue":n[q]=new c(x);break;case "inherited":n[q]=new a(x)}}if(q=b.templates){e=this.templates=[];for(b=0;b<q.length;b++)e.push(new d(q[b]))}}},toJson:function(){var a={id:this.id,name:this.name,
symbol:this.symbol&&this.symbol.toJson()},c,d=this.domains,e=this.templates,h=q.fixJson;if(d){var n=a.domains={};for(c in d)d.hasOwnProperty(c)&&(n[c]=d[c]&&d[c].toJson());h(n)}e&&(a.templates=b.map(e,function(a){return a.toJson()}));return h(a)}});n("extend-esri")&&t.setObject("layers.FeatureType",e,u);return e})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(e,t,b,n,u){e=e([u],{declaredClass:"esri.layers.InheritedDomain"});
b("extend-esri")&&t.setObject("layers.InheritedDomain",e,n);return e})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(e,t,b,n,u,q){e=e(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(b){b&&t.isObject(b)&&(this.name=b.name,this.description=b.description,this.drawingTool=b.drawingTool,b=b.prototype,this.prototype=new q(b.geometry,null,b.attributes))},toJson:function(){return u.fixJson({name:this.name,
description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()})}});t.mixin(e,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",
TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});b("extend-esri")&&t.setObject("layers.FeatureTemplate",e,n);return e})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.layers.FeatureEditResult",
constructor:function(b){b&&t.isObject(b)&&(this.objectId=b.objectId,this.success=b.success,b.success||(b=b.error,this.error=Error(),this.error.code=b.code,this.error.message=b.description))}});b("extend-esri")&&t.setObject("layers.FeatureEditResult",e,n);return e})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),function(e,t,b,n,u,q,s,h){e=e(null,{declaredClass:"esri.layers.LabelClass",
labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight",
"center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong",
"below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(b){if(b&&
(t.mixin(this,b),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=q.valueOf(this._labelPlacementLookup,b.labelPlacement)),b.format&&(this.format=b.format),b.fieldInfos&&(this.fieldInfos=b.fieldInfos),b.symbol&&(this.symbol="esriSHD"===b.symbol.type?new h(b.symbol):new s(b.symbol)),b=this.sizeInfo))b.minSize&&(b.minSize=n.pt2px(b.minSize)),b.maxSize&&(b.maxSize=n.pt2px(b.maxSize))},getSymbol:function(){return this.symbol},toJson:function(){var b=this.sizeInfo;b&&
(b=t.mixin({},b),b.minSize&&(b.minSize=n.px2pt(b.minSize)),b.maxSize&&(b.maxSize=n.px2pt(b.maxSize)));b={labelExpression:this.labelExpression,labelExpressionInfo:this.labelExpressionInfo&&t.clone(this.labelExpressionInfo),format:this.format,fieldInfos:this.fieldInfos,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:b,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:
this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return q.fixJson(b)}});b("extend-esri")&&t.setObject("layers.LabelClass",e,u);return e})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(e,t,b,n,u,q,s,h,c){var a={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};e=e(h,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,
255,255,1],width:32,height:32,font:n.defaultFont,constructor:function(c,g,e,h,q){c?t.isString(c)?(this.url=c,g&&(this.color=g),e&&(this.width=e),h&&(this.height=h),void 0!==q&&(this.font=q)):(this.width=n.pt2px(c.width),this.height=n.pt2px(c.height),g=c.imageData,!(9>b("ie"))&&g&&(e=this.url,this.url="data:"+(c.contentType||"image")+";base64,"+g,this.imageData=e)):t.mixin(this,a)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=a;return this},
setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,
stroke:null}},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:"))var e=a,a=b,b=e.indexOf(";base64,")+8,b=e.substr(b);var a=s.getAbsoluteUrl(a),e=n.px2pt(this.width),e=isNaN(e)?void 0:e,h=n.px2pt(this.height),h=isNaN(h)?void 0:h,a=q.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:a,imageData:b,contentType:this.contentType,width:e,height:h}));this.font?(b=new c(this.font),a.font=b.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;return a}});
e.defaultProps=a;b("extend-esri")&&(t.setObject("symbol.ShieldLabelSymbol",e,u),u.symbol.defaultShieldLabelSymbol=a);return e})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../tasks/query ./RenderMode".split(" "),function(e,t,b,n,u,q,s){e=e([s],{declaredClass:"esri.layers._SnapshotMode",constructor:function(b){this.featureLayer=b;this.pagination=b.queryPagination;this._featureMap={};this._drawFeatures=t.hitch(this,this._drawFeatures);
this._queryErrorHandler=t.hitch(this,this._queryErrorHandler)},startup:function(){this.pagination=this.pagination&&null!=this.featureLayer.maxRecordCount;this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},propertyChangeHandler:function(b){this._init&&(b?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},drawFeature:function(b){var c=b.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(c,b);this._incRefCount(c)},resume:function(){this.propertyChangeHandler(0)},
refresh:function(){var b=this.featureLayer;b._collection?(b._fireUpdateStart(),b._refresh(!0),b._fireUpdateEnd()):this._fetchAll()},_getRequestId:function(b){return("_"+b.name+b.layerId+b._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchAll:function(){var b=this.featureLayer;!b._collection&&!b.suspended&&(b._fireUpdateStart(),this._clearIIf(),this._sendRequest())},_sendRequest:function(b){var c=this.map,a=this.featureLayer,d=a.getDefinitionExpression(),e=new q;e.outFields=a.getOutFields();e.where=d||
"1\x3d1";e.returnGeometry=!0;e.outSpatialReference=new u(c.spatialReference.toJson());e.timeExtent=a.getTimeDefinition();e.maxAllowableOffset=a._maxOffset;e.quantizationParameters=a._quantizationParameters;a._ts&&(e._ts=(new Date).getTime());e.orderByFields=a.supportsAdvancedQueries?a.getOrderByFields():null;e.multipatchOption=a.multipatchOption;this.pagination&&(this._start=e.start=null==b?0:b,e.num=a.maxRecordCount);var m;a._usePatch&&(m=this._getRequestId(a),this._cancelPendingRequest(null,m));
a._task.execute(e,this._drawFeatures,this._queryErrorHandler,m)},_drawFeatures:function(b){this._purgeRequests();var c=b.features,a=this.featureLayer,d=a.objectIdField,e,m=c.length,q=b.exceededTransferLimit&&!a._collection,n=a._selectedFeatures,s=a.mode===a.constructor.MODE_AUTO,t,u,F;for(e=0;e<m;e++)u=c[e],F=u.attributes[d],t=this._addFeatureIIf(F,u),this._incRefCount(F),s&&(t!==u&&n[F])&&(t.setGeometry(u.geometry),t.setAttributes(u.attributes));this._applyTimeFilter(!0);if(!this.pagination||!q)a._fireUpdateEnd(null,
b.exceededTransferLimit?{queryLimitExceeded:!0}:null);q&&(this.pagination&&this._sendRequest(this._start+a.maxRecordCount),a.onQueryLimitExceeded())},_queryErrorHandler:function(b){this._purgeRequests();var c=this.featureLayer;c._errorHandler(b);c._fireUpdateEnd(b)}});b("extend-esri")&&t.setObject("layers._SnapshotMode",e,n);return e})},"esri/layers/RenderMode":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/io/script ../kernel".split(" "),function(e,
t,b,n,u,q,s){t=t(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(e._scopeName||"dojo")+"IoScript"},initialize:function(b){this.map=b;this._init=!0},startup:function(){},propertyChangeHandler:function(b){},destroy:function(){this._init=!1},drawFeature:function(b){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(b){(b=this._featureMap[b])&&b._count++},_decRefCount:function(b){(b=this._featureMap[b])&&b._count--},_getFeature:function(b){return this._featureMap[b]},
_addFeatureIIf:function(b,c){var a=this._featureMap,d=a[b],e=this.featureLayer;d||(a[b]=c,e._add(c),c._count=0);return d||c},_removeFeatureIIf:function(b){var c=this._featureMap[b],a=this.featureLayer;if(c){if(c._count)return;delete this._featureMap[b];a._remove(c)}return c},_clearIIf:function(){var b;b=this.featureLayer;var c=b.graphics,a=b._selectedFeatures,d=b.objectIdField;for(b=c.length-1;0<=b;b--){var e=c[b],m=e.attributes[d];m in a?e._count=1:(e._count=0,this._removeFeatureIIf(m))}},_isPending:function(b){return q[this._prefix+
b]?!0:!1},_cancelPendingRequest:function(b,c){if(b=b||q[this._prefix+c])try{b.cancel(),q._validCheck(b)}catch(a){}},_purgeRequests:function(){q._validCheck(null)},_toggleVisibility:function(b){var c=this.featureLayer,a=c.graphics,d=b?"show":"hide",e,m=a.length;b=b&&c._ager;for(e=0;e<m;e++){var q=a[e];q[d]();b&&c._repaint(q)}},_applyTimeFilter:function(b){var c=this.featureLayer;if(c.timeInfo&&!c.suspended){b||c._fireUpdateStart();var a=c._trackManager;a&&a.clearTracks();var d=c.getTimeDefinition(),
e=c._getOffsettedTE(c._mapTimeExtent);e?(e=c._getTimeOverlap(d,e))?(d=c._filterByTime(c.graphics,e.startTime,e.endTime),a&&a.addFeatures(d.match),n.forEach(d.match,function(a){var b=a._shape;a.visible||(a.show(),(b=a._shape)&&b._moveToFront());c._ager&&b&&c._repaint(a)}),n.forEach(d.noMatch,function(a){a.visible&&a.hide()})):this._toggleVisibility(!1):(a&&a.addFeatures(c.graphics),this._toggleVisibility(!0));a&&(a.moveLatestToFront(),a.drawTracks());b||c._fireUpdateEnd()}}});u("extend-esri")&&b.setObject("layers._RenderMode",
t,s);return t})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(e,t,b,n,u,q,s,h,c,a){e=e([c],{declaredClass:"esri.layers._OnDemandMode",constructor:function(a){this.featureLayer=a;this._featureMap={};this._queryErrorHandler=b.hitch(this,this._queryErrorHandler)},initialize:function(b){this.inherited(arguments);var c=this.featureLayer,
e=c._srInfo;this._gridLayer=new a(new s(e?e.valid[0]:b.extent.xmin,e?e.valid[1]:b.extent.ymax,b.spatialReference),{width:c._tileWidth,height:c._tileHeight},{width:b.width,height:b.height},e);this._cellMap={};this._gridLayer.setResolution(b.extent)},startup:function(){this._ioQueue=[];this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(a){this._init&&2>a&&this._zoomHandler()},destroy:function(){this._disableConnectors();this.inherited(arguments)},
drawFeature:function(a){var b=this._gridLayer,c=a.geometry,e=[];if(c)for(var e=b.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells,b=this._cellMap,h,q=a.attributes[this.featureLayer.objectIdField],n,s,t,c=0;c<e.length;c++)h=e[c],n=h.latticeID,s=h.row,t=h.col,n?h=b[n]=b[n]||h:(b[s]=b[s]||{},h=b[s][t]=b[s][t]||h),h.features=h.features||[],h.features.push(a),this._addFeatureIIf(q,a),this._incRefCount(q)},suspend:function(){this._init&&this._disableConnectors()},
resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},_enableConnectors:function(){var a=this.map;this._zoomConnect=t.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=t.connect(a,"onPanEnd",this,this._panHandler);this._resizeConnect=t.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){t.disconnect(this._zoomConnect);t.disconnect(this._panConnect);t.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);
var a=this.featureLayer,b=this.map;a.suspended||(a._fireUpdateStart(),this._clearIIf(),(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(a){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&a)},_getRequestId:function(a,b){return("_"+a.name+a.layerId+a._ulid+"_"+b.resolution+"_"+(b.latticeID||b.row+"_"+b.col)).replace(/[^a-zA-Z0-9\_]+/g,"_")},_sendRequest:function(a){this._exceeds=
!1;var b=this.featureLayer,c=this.map;a=a||c.extent;c=this._gridLayer.getCellsInExtent(a,b.latticeTiling).cells;if(!b.isEditable())var e=this._cellMap,c=n.filter(c,function(a){if(a.lattice){if(e[a.latticeID])return!1}else if(e[a.row]&&e[a.row][a.col])return!1;return!0});var q=b.getOutFields(),s=b.getDefinitionExpression(),t=b._getOffsettedTE(b._mapTimeExtent),u=b.supportsAdvancedQueries?b.getOrderByFields():null,F=b._usePatch,y=this._ioQueue,I,L=this,D=this._drawFeatures,G,N,P;this._pending=this._pending||
0;for(I=0;I<c.length;I++){G=c[I];N=new h;N.geometry=G.extent||G.lattice;N.outFields=q;N.where=s;b.latticeTiling&&G.extent&&(N.spatialRelationship=h.SPATIAL_REL_CONTAINS);N.returnGeometry=!0;N.timeExtent=t;b._ts&&(N._ts=(new Date).getTime());N.orderByFields=u;N.multipatchOption=b.multipatchOption;N.maxAllowableOffset=b._maxOffset;N.quantizationParameters=b._quantizationParameters;P=null;if(F&&(P=this._getRequestId(b,G),this._isPending(P)))continue;this._pending++;y.push(b._task.execute(N,function(){var a=
G;return function(b){D.apply(L,[b,a])}}.call(this),this._queryErrorHandler,P))}this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,b){this._exceeds=this._exceeds||a.exceededTransferLimit;this._finalizeIO();var c=this.map.extent,e=b.extent,h=b.row,q=b.col,n=this.featureLayer.objectIdField,s=a.features,t=this._gridLayer,u=this._cellMap,I=b.latticeID,L=I?u[I]:u[h]&&u[h][q];if(b.resolution!=t._resolution||(I?I!==t.getLatticeID(c):!t.intersects(e,c)))L&&this._removeCell(h,q,I);else if(L)this._updateCell(L,
s);else{b.features=s;I?u[I]=b:(u[h]=u[h]||{},u[h][q]=b);e=s.length;for(c=0;c<e;c++)h=s[c],q=h.attributes[n],this._addFeatureIIf(q,h),this._incRefCount(q)}this._endCheck()},_queryErrorHandler:function(a){this._finalizeIO();this.featureLayer._errorHandler(a);this._endCheck(!0)},_finalizeIO:function(){this._purgeRequests();this._pending--},_endCheck:function(a){if(0===this._pending){this._processIOQueue();var b=this.featureLayer,c=b._trackManager;c&&(c.clearTracks(),c.addFeatures(b.graphics),b._ager&&
n.forEach(b.graphics,function(a){a._shape&&b._repaint(a)}),c.moveLatestToFront(),c.drawTracks());this.featureLayer._fireUpdateEnd(a&&Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)b.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=n.filter(this._ioQueue,function(a){return-1<a.fired?!1:!0});a&&n.forEach(this._ioQueue,this._cancelPendingRequest)},_removeOldCells:function(a){var b=this._cellMap,c=this._gridLayer,
e,h;for(e in b)if(b[e]){var q=b[e],n=q.latticeID,s=0,t=0;if(n)s++,n!==c.getLatticeID(a)&&(this._removeCell(null,null,n),t++);else for(h in q)q[h]&&(s++,c.intersects(q[h].extent,a)||(this._removeCell(e,h),t++));t===s&&delete b[e]}},_updateCell:function(a,b){var c=this.featureLayer,e=c.objectIdField,c=c._selectedFeatures,h,q=b.length;a.features=a.features||[];for(h=0;h<q;h++){var n=b[h],s=n.attributes[e],t=this._addFeatureIIf(s,n);t===n?(this._incRefCount(s),a.features.push(t)):s in c||(t.setGeometry(n.geometry),
t.setAttributes(n.attributes))}},_removeCell:function(a,b,c){var e=this._cellMap,h=this.featureLayer,q=h.objectIdField,n=c?e[c]:e[a]&&e[a][b];if(n){c?delete e[c]:delete e[a][b];a=n.features;for(b=0;b<a.length;b++)c=a[b].attributes[q],this._decRefCount(c),c in h._selectedFeatures||this._removeFeatureIIf(c)}}});u("extend-esri")&&b.setObject("layers._OnDemandMode",e,q);return e})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/Polyline".split(" "),
function(e,t,b,n,u,q,s,h){e=e(null,{declaredClass:"esri.layers._GridLayout",constructor:function(b,a,d,e){this.origin=b;this.cellWidth=a.width;this.cellHeight=a.height;this.mapWidth=d.width;this.mapHeight=d.height;this.srInfo=e},setResolution:function(b){this._resolution=(b.xmax-b.xmin)/this.mapWidth;this.srInfo&&(b=Math.round(2*this.srInfo.valid[1]/this._resolution),b=Math.round(b/this.cellWidth),this._frameStats=[b,0,b-1])},getCellCoordinates:function(b){var a=this._resolution,d=this.origin;return{row:Math.floor((d.y-
b.y)/(this.cellHeight*a)),col:Math.floor((b.x-d.x)/(this.cellWidth*a))}},normalize:function(b){var a=this._frameStats;if(a){var d=a[0],e=a[1],a=a[2];b<e?(b%=d,b=b<e?b+d:b):b>a&&(b%=d)}return b},intersects:function(c,a){var d=this.srInfo;return d?b.some(a._getParts(d),function(a){return c.intersects(a.extent)}):c.intersects(a)},getCellExtent:function(b,a){var d=this._resolution,e=this.origin,h=this.cellWidth,n=this.cellHeight;return new s(a*h*d+e.x,e.y-(b+1)*n*d,(a+1)*h*d+e.x,e.y-b*n*d,new q(e.spatialReference.toJson()))},
getLatticeID:function(b){var a=this.getCellCoordinates({x:b.xmin,y:b.ymax}),d=this.getCellCoordinates({x:b.xmax,y:b.ymin});b=a.row;var e=d.row,a=this.normalize(a.col),d=this.normalize(d.col);return b+"_"+e+"_"+a+"_"+d},sorter:function(b,a){return b<a?-1:1},getCellsInExtent:function(b,a){var d=this.getCellCoordinates({x:b.xmin,y:b.ymax}),e=this.getCellCoordinates({x:b.xmax,y:b.ymin}),m=d.row,q=e.row,d=d.col,e=e.col,n=[],s,t,u,F=[],y=[],I,L,D,G=[];for(s=m;s<=q;s++)for(t=d;t<=e;t++)u=this.normalize(t),
b=this.getCellExtent(s,u),n.push({row:s,col:u,extent:b,resolution:this._resolution}),a&&(F.push(b.xmin,b.xmax),y.push(b.ymin,b.ymax));d=this.normalize(d);e=this.normalize(e);F.sort(this.sorter);y.sort(this.sorter);t=F.length;for(s=t-1;0<=s;s--)s<t-1&&F[s]===F[s+1]&&F.splice(s,1);t=y.length;for(s=t-1;0<=s;s--)s<t-1&&y[s]===y[s+1]&&y.splice(s,1);if(F.length&&y.length){u=F[0];I=F[F.length-1];L=y[0];D=y[y.length-1];t=F.length;for(s=0;s<t;s++)G.push([[F[s],D],[F[s],L]]);t=y.length;for(s=0;s<t;s++)G.push([[u,
y[s]],[I,y[s]]]);s=new h({paths:G,spatialReference:this.origin.spatialReference.toJson()});n.push({latticeID:m+"_"+q+"_"+d+"_"+e,lattice:s,resolution:this._resolution})}return{minRow:m,maxRow:q,minCol:d,maxCol:e,cells:n}}});n("extend-esri")&&t.setObject("layers._GridLayout",e,u);return e})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(e,t,b,n,u){e=e([u],{declaredClass:"esri.layers._SelectionMode",constructor:function(b){this.featureLayer=
b;this._featureMap={}},propertyChangeHandler:function(b){this._init&&0===b&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)}});b("extend-esri")&&t.setObject("layers._SelectionMode",e,n);return e})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),function(e,t,b,n,u,q,s,h,c,a){e=e([a],{declaredClass:"esri.layers._StreamMode",
constructor:function(a,b){this.featureLayer=a;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=t.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;a.purgeOptions&&(a.purgeOptions.age&&"number"===typeof a.purgeOptions.age)&&(this._maxFeatureAge=1E3*Math.ceil(60*a.purgeOptions.age));this._drawFeatures=t.hitch(this,this._drawFeatures);this._queryErrorHandler=t.hitch(this,
this._queryErrorHandler)},startup:function(){},propertyChangeHandler:function(a){this._init&&(0===a?this._applyTimeFilter():3===a&&this._redrawAllTracks())},drawFeature:function(a){var b=this.featureLayer,c=b.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));b._joinField&&this._getFeature(a.attributes[c])?this._drawBuffer.updates.push({oid:a.attributes[c],updates:a}):this._drawBuffer.adds.push(a)},resume:function(){this.propertyChangeHandler(0)},
refresh:function(){var a=this.featureLayer;a&&(!a._relatedUrl&&!a._keepLatestUrl?(a._fireUpdateStart(),a.clear(),a._fireUpdateEnd()):(a._fireUpdateStart(),a._refreshing=!0,a.disconnect(),a.clear(),a._relatedQueried=!1,a._keepLatestQueried=!1,a.connect()))},_drawFeatures:function(a,b){this._purgeRequests();var c=this.featureLayer;c._create(a.features||[]);c._fireUpdateEnd(null,b)},_applyTimeFilter:function(a){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(a){var c=this.featureLayer,
e=c.objectIdField;a&&b.forEach(a,function(a){a=a.attributes[e];c._unSelectFeatureIIf(a,this);this._decRefCount(a);this._removeFeatureIIf(a)},this)},_addFeatures:function(a){var c=this.featureLayer,e=c._endTimeField,h=c._startTimeField,q,n,s,t=[],u=[],y=[];q=c._trackManager;n=c.objectIdField;if(q)for(s in a=q.addFeatures(a),a)a.hasOwnProperty(s)&&(t.push(s),a[s].adds&&(u=u.concat(a[s].adds)),a[s].deletes&&(y=y.concat(a[s].deletes)));else u=a;b.forEach(u,function(a){var b=a.attributes[n],c;c=e&&a.attributes[e];
!c&&this._maxFeatureAge&&(c=h&&a.attributes[h]?a.attributes[h]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);c&&(c=1E3*Math.ceil(c/1E3),this._featuresByTime[c]?this._featuresByTime[c].push(b):this._featuresByTime[c]=[b]);this._addFeatureIIf(b,a);this._incRefCount(b)},this);y.length&&this._removeFeatures(y);q&&q.refreshTracks(t)},_updateFeatures:function(a){var c=this.featureLayer,e,h,q=[];e=c._trackManager;h=c._trackIdField;b.forEach(a,function(a){var b=a.updates;a=this._getFeature(a.oid);var d;
if(a){b.geometry&&a.setGeometry(b.geometry);b=b.attributes||{};for(d in b)b.hasOwnProperty(d)&&(a.attributes[d]=b[d]);a.visible=this._checkFeatureTimeIntersects(a);e&&a.attributes[h]?q.push(a.attributes[h]):c._repaint(a,null,!0)}},this);q.length&&e.refreshTracks(q)},_redrawAllTracks:function(){var a=this.featureLayer._trackManager,b;if(a&&(b=a.trimTracks())&&0<b.length)this._removeFeatures(b),a.refreshTracks()},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var a=this._drawBuffer,b=a.adds.splice(0,
a.adds.length),c=a.updates.splice(0,a.updates.length),a=this.featureLayer;if(!a)return!1;a.updating||a._fireUpdateStart();this._addFeatures(b);this._updateFeatures(c);if((b=this._getExpiredFeatures())&&b.length)this._removeFeatures(b),a._trackManager&&a._trackManager.removeFeatures(b);a._purge();a._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var a=this._timeoutId,b=this._drawBuffer,c=b.adds,b=b.updates;a&&clearTimeout(a);c.splice(0,c.length);b.splice(0,b.length);this._timeoutId=
null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(a){a=a||0===a?a:200;0>a&&(a=200);this._refreshRate=a},_checkFeatureTimeIntersects:function(a){var b=this.featureLayer,c=b.getMap(),c=c?c.timeExtent:null;return!c||!b.timeInfo||!b.timeInfo.startTimeField&&!b.timeInfo.endTimeField?!0:0<b._filterByTime([a],c.startTime,c.endTime).match.length},_getRequestId:function(a){return("_"+
a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchArchive:function(a){var b=this.featureLayer,e,n,t,x,u;b._fireUpdateStart();if(a&&this.map){e=new h(a);n=new s;a=this.map;t=b.getFilter()||{};x=t.where||"1\x3d1";u=t.geometry?c.fromJson(t.geometry):null;t=t.outFields?t.outFields.split(","):["*"];n.geometry=u;n.where=x;n.outFields=t;n.returnGeometry=!0;n.outSpatialReference=new q(a.spatialReference.toJson());b._usePatch&&(a=this._getRequestId(b),this._cancelPendingRequest(null,a));var E=
0,F=this,y=null,I=function(a){E++;e.execute(n).then(function(b){a(null,b)},function(b){a(b)})},L=function(a,c){a?2<=E||!b._relatedUrl?F._queryErrorHandler(Error("Could not get features from related feature service")):(y={relatedFeatureWarning:"Querying related feature service using the current filter failed. All related features are displayed, and the filter is appled to the stream service only"},n.where="1\x3d1",I(L)):F._drawFeatures(c,y)};I(L)}else return this._fireUpdateEnd({error:"Archive data cannot be fetched if no feature service url is provided or if the layer is not added to a map"}),
!1},_queryErrorHandler:function(a){this._purgeRequests();var b=this.featureLayer;b._errorHandler(a);b._fireUpdateEnd(a)},_getExpiredFeatures:function(){var a,c,e,h=[],q=[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return q;a=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=c=1E3*Math.ceil(Date.now()/1E3);if(a&&a!==c)for(e=this._featuresByTime;a<=c;a+=1E3)e[a]&&(h=h.concat(e[a]),delete e[a]);b.forEach(h,function(a){(a=this._getFeature(a))&&q.push(a)},this);return q}});
n("extend-esri")&&t.setObject("layers._StreamMode",e,u);return e})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),function(e,t,b,n,u,q,s,h){e=e(null,{declaredClass:"esri.layers._TrackManager",constructor:function(b){this.layer=b;this.trackMap={};this.trackLineMap={}},initialize:function(b){this.map=b;var a=this.layer,d=a._getRenderer(),d=d&&d.trackRenderer;if("esriGeometryPoint"===
a.geometryType){var e=this.container=new h._GraphicsLayer({id:a.id+"_tracks",_child:!0});e.loaded=!0;e.onLoad(e);e._setMap(b,a._div);e.setRenderer(d)}},addFeatures:function(c){var a=this.trackMap,d=this.layer,e=d._trackIdField,h=[];b.forEach(c,function(c){var d=c.attributes[e];(a[d]=a[d]||[]).push(c);-1===b.indexOf(h,d)&&h.push(d)});var q=d._startTimeField,n=d.objectIdField,s=function(a,b){var c=a.attributes[q],d=b.attributes[q];return c===d?a.attributes[n]<b.attributes[n]?-1:1:c<d?-1:1};b.forEach(h,
function(b){a[b].sort(s)})},trimTracks:function(c){function a(a){for(a=d[a]||[];a.length>e;)h.push(a.shift())}var d=this.trackMap,e=this.layer.maximumTrackPoints||0,h=[],q;if(!e)return h;if(c)b.forEach(c,function(b){a(b)});else for(q in d)d.hasOwnProperty(q)&&a(q);return h},drawTracks:function(c){function a(a){var b=h[a],c,u,x;u=d.trackLineMap[a];e.remove(u);delete d.trackLineMap[a];if(!b||2>b.length)return!1;u=[];for(c=b.length-1;0<=c;c--)(x=b[c].geometry)&&u.push([x.x,x.y]);b={};b[t]=a;1<u.length&&
(u=new q(new s({paths:[u],spatialReference:n}),null,b),e.add(u),d.trackLineMap[a]=u)}var d=this,e=this.container,h,n,t,u;if(e)if(h=this.trackMap,n=this.map.spatialReference,t=this.layer._trackIdField,c)b.forEach(c,function(b){a(b)});else for(u in h)h.hasOwnProperty(u)&&a(u)},refreshTracks:function(c){function a(a){var b,c;d.drawTracks([a]);if(q&&q.latestObservationRenderer){a=e[a]||[];b=a.length;for(c=0;c<b;c++)h._repaint(a[c],null,!0)}}var d=this,e=this.trackMap,h=this.layer,q=h._getRenderer(),n;
if(c)b.forEach(c,function(b){a(b)});else for(n in e)e.hasOwnProperty(n)&&a(n);this.moveLatestToFront()},moveLatestToFront:function(c){b.forEach(this.getLatestObservations(c),function(a){var b=a._shape;b&&b._moveToFront();this._repaint(a,null,!0)},this.layer)},getLatestObservations:function(c){function a(a){a=h[a];return a[a.length-1]}var d=[],e=this.layer._getRenderer(),h=this.trackMap,q;if(!e.latestObservationRenderer)return d;if(c)b.forEach(c,function(b){d.push(a(b))});else for(q in h)h.hasOwnProperty(q)&&
d.push(a(q));return d},clearTracks:function(c){var a=this.getLatestObservations(c),d=this.container,e;c?b.forEach(c,function(a){delete this.trackMap[a];d&&(e=this.trackLineMap[a],d.remove(e),delete this.trackLineMap[a])},this):(this.trackMap={},this.trackLineMap={},d&&d.clear());b.forEach(a,function(a){this._repaint(a,null,!0)},this.layer)},isLatestObservation:function(b){var a=this.trackMap[b.attributes[this.layer._trackIdField]];return a?a[a.length-1]===b:!1},destroy:function(){var b=this.container;
b&&(b.clear(),b._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=this.container=null}});n("extend-esri")&&t.setObject("layers._TrackManager",e,u);return e})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m){function w(){}function A(a){var b=
a.layer;return{geometry:a.geometry,attributes:a.attributes,getLayer:function(){return b}}}e=e(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(a){this.sourceLayer=a;this._hndls=[]},initialize:function(a){this.map=a;var b=this.sourceLayer,c=b.renderer;b.setDrawMode(!1);this.imageLayer=a._getMapImageLyr();var e=this;this.heatmapRenderer=c instanceof d?c:(c.getRendererInfoByZoom(a.getZoom())||
c.getRendererInfoByScale(a.getScale())).renderer;this._setupDraw=this._setupDraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);u(["../workers/heatmapCalculator"],
function(a){e._calculator=new a(t.mixin({width:e.map.width,height:e.map.height},e._getOptions()));e._setupRenderer();e.heatmapRenderer.getStats=a.calculateStats;e.heatmapRenderer.getHistogramData=a.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(a){var b=a.renderer,c=b instanceof d;this.heatmapRenderer?
c?this.heatmapRenderer=b:this._removeRenderer(a):c&&(this.heatmapRenderer=b,this.sourceLayer&&this.map&&this._setupRenderer())},_handleOpacityChange:function(a){a=a.opacity;var b=this._getImageBySourceId(this.sourceLayer.id);b&&b.setOpacity(a)},_setupRenderer:function(){var a=this._hndls,c=this.sourceLayer,d=this.map,e=this;c._originalDraw=c._draw;c._draw=w;c._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);a.push(c.on("update-end",this._setupDraw));
a.push(c.on("suspend",function(a){(a=e._getImageBySourceId(e.sourceLayer.id))&&a.hide()}));a.push(c.on("resume",function(a){(a=e._getImageBySourceId(e.sourceLayer.id))&&a.show()}));a.push(b.after(c,"redraw",this._setupDraw));a.push(d.on("layer-remove",function(a){a.layer==c&&((a=e._getImageBySourceId(e.sourceLayer.id))&&e.imageLayer.removeImage(a),e._removeRenderer({target:c}))}));c._collection&&a.push(c.on("graphic-add",function(a){e._reprojectFeature(a.graphic);e._setupDraw()}));1!==c.mode&&(a.push(d.on("resize, pan-end",
this._setupDraw)),a.push(d.on("zoom-end",this._setupDraw)));a.push(c.on("opacity-change",this._handleOpacityChange));this.imageLayer.suspended&&this.imageLayer.resume();c.graphics&&c.graphics.length&&(c.graphics[0].geometry&&!d.spatialReference.equals(c.graphics[0].geometry.spatialReference)&&n.forEach(c.graphics,function(a){this._reprojectFeature(a)}.bind(this)),this._setupDraw())},_setupDraw:function(){if(!this._drawTimer){var a=this;this._drawTimer=setTimeout(function(){clearTimeout(a._drawTimer);
a._drawTimer=null;a.sourceLayer._getRenderer().isInstanceOf(d)&&a.recalculateHeatmap()},16)}},_removeRenderer:function(a){var b=a.target;b._draw=b._originalDraw;delete b._originalDraw;b.setDrawMode(!0);this._removeHandlers();this._hndls=[];var c=this._getImageBySourceId(this.sourceLayer.id);c&&this.imageLayer.removeImage(c);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;b.renderer!=a.renderer&&b.renderer.getRendererInfo?this.heatmapRenderer=null:
(b.redraw(),this.destroy())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(a){if(a&&a.geometry){var b=a.geometry,d=this.map.spatialReference;d.equals(b.spatialReference)||(b=c.project(b,d),null!=b&&(a.geometry=b))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var b=this.sourceLayer,c=this.map,d=this.heatmapRenderer,e=this.map.extent,h=this.map.width,m=this.map.height,q=this._calculator,
n=this,s=function(g){g=n._getScreenPoints(g.features,c,b);g=q.calculateImageData(t.mixin({screenPoints:g,mapinfo:{extent:[e.xmin,e.ymin,e.xmax,e.ymax],resolution:c.getResolution()},width:h,height:m},n._getOptions()));g=d.getSymbol(A({geometry:c.extent,attributes:{size:[h,m],imageData:g},layer:b}));g=new a({extent:c.extent,href:g.url,opacity:0,sourceId:b.id});n._swapMapImages(g,n._getImageBySourceId(b.id));b.suspended&&g.hide()},u={geometry:c.extent,timeExtent:b.useMapTime?c.timeExtent:void 0,spatialRelationship:g.SPATIAL_REL_INTERSECTS};
null!=b._canDoClientSideQuery(u)?b.queryFeatures(u,s):s({features:b.graphics})},_getScreenPoints:function(a,b,c){var d=[],e=a.length,g=0,m=0,q,s=new h(b.extent.xmin,b.extent.ymax,b.spatialReference),t=b.toScreen(s),u=t.x,t=t.y,w=b.getResolution(),A;for((m=b.extent.getCacheValue("_parts"))&&(A=n.map(m,function(a){return c._intersects(b,a.extent)[0]}));e--;)m=a[e],m.geometry&&(q={x:Math.ceil((m.geometry.x-s.x)/w+u),y:Math.floor((s.y-m.geometry.y)/w-t),attributes:m.attributes},A&&(m=1<A.length&&q.x<
-A[0]?A[1]:A[0],q.x+=m),d[g++]=q);return d},_getImageBySourceId:function(a){var b=this.imageLayer.getImages(),b=n.filter(b,function(b){return b.sourceId==a});if(b.length)return b[b.length-1]},_swapMapImages:function(a,b){function c(){d.removeImage(b)}var d=this.imageLayer,e=this.sourceLayer.opacity||1;d.addImage(a);m.anim(a._node,{opacity:e},null,null,function(){a.opacity=e});null!=b&&m.anim(b._node,{opacity:0},null,null,c)},_removeHandlers:function(){if(null!=this._hndls)for(var a=this._hndls.length;a--;)this._hndls[a].remove()},
_getOptions:function(){var a=this.heatmapRenderer;return{blurRadius:a.blurRadius,gradient:a.gradient,maxPixelIntensity:a.maxPixelIntensity,minPixelIntensity:a.minPixelIntensity,field:a.field,fieldOffset:a.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var a=this.sourceLayer.graphics,b=a.length,c;b--;)c=a[b],c._shape=c._offsets=void 0}});s("extend-esri")&&t.setObject("layers.HeatmapManager",e,q);return e})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),
function(e,t,b,n,u,q,s){e=e(null,{declaredClass:"esri.layers.MapImage",constructor:function(b){t.mixin(this,b);this.extent=new s(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var b=this._node,c=this._layer,a;if(b){if(a=c&&c._div)c.suspended||c._setPos(b,a._left,a._top),(c._active||a).appendChild(b);q.show(b)}}},hide:function(){if(this.visible){this.visible=!1;var b=this._node;b&&(q.hide(b),
b.parentNode&&b.parentNode.removeChild(b))}},setOpacity:function(e){var c=this._node;this.opacity=e;c&&b.set(c,"opacity",e)}});n("extend-esri")&&t.setObject("layers.MapImage",e,u);return e})},"esri/dijit/OverviewMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/html dojo/has dojo/dom-class dojo/dom-style dojo/dnd/Moveable dijit/_Widget dijit/_Templated ../map ../geometry/Point ../geometry/ScreenPoint ../layers/TiledMapServiceLayer ../layers/DynamicMapServiceLayer ../layers/VectorTileLayer ../layers/ArcGISTiledMapServiceLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/OpenStreetMapLayer ../virtualearth/VETiledLayer ../kernel ../config ../domUtils dojo/text!./templates/OverviewMap.html dojo/i18n!../nls/jsapi".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D,G,N,P){e=e([c,a],{declaredClass:"esri.dijit.OverviewMap",widgetsInTemplate:!0,templateString:N,constructor:function(a,c){t.mixin(this,P.widgets.overviewMap);a=a||{};if(a.map){var d={};c&&(this._detached=!0,d=n.coords(c,!0));this.map=a.map;this.baseLayer=a.baseLayer;this.width=a.width||d.w||this.map.width/4;this.height=a.height||d.h||this.map.height/4;this.attachTo=a.attachTo||"top-right";this.expandFactor=a.expandFactor||2;this.color=a.color||
"#000000";this.opacity=a.opacity||0.5;this.maximizeButton=!!a.maximizeButton;this.visible=!!a.visible;if(this.map.loaded)this._initialSetup();else var e=b.connect(this.map,"onLoad",this,function(){b.disconnect(e);e=null;this._initialSetup()});this._detached&&(this.visible=!0);this._maximized=!1}else console.error("esri.dijit.OverviewMap: "+this.NLS_noMap)},startup:function(){this.inherited(arguments);(!this.domNode.parentNode||9>u("ie")&&"DIV"!==this.domNode.parentNode.nodeName)&&this.map.container.appendChild(this.domNode);
this._detached?(s.set(this._body,"display","block"),s.set(this._controllerDiv,"display","none"),s.set(this._maximizerDiv,"display","none"),this.map.loaded?this._initialize():b.connect(this.map,"onLoad",this,this._initialize)):("bottom"===this.attachTo.split("-")[0]&&this.domNode.insertBefore(this._maximizerDiv,this._controllerDiv),this.maximizeButton||q.add(this._maximizerDiv,"ovwDisabledButton"),q.add(this.domNode,{"top-left":"ovwTL","top-right":"ovwTR","bottom-left":"ovwBL","bottom-right":"ovwBR"}[this.attachTo]),
q.add(this._controllerDiv,"ovwShow"),q.add(this._maximizerDiv,"ovwMaximize"),this.visible&&this.map.loaded&&(this.visible=!1,this.show()));s.set(this._focusDiv,"opacity",this.opacity)},destroy:function(){this._deactivate();this.overviewMap&&this.overviewMap.destroy();this.overviewMap=this.baseLayer=null;this.inherited(arguments)},resize:function(a){a&&!(0>=a.w||0>=a.h)&&this._resize(a.w,a.h)},show:function(){if(!this.visible){var a=this._controllerDiv;a.title=this.NLS_hide;q.remove(a,"ovwShow");q.add(a,
"ovwHide");G.show(this._body);G.show(this._maximizerDiv);this._initialize();this.visible=!0}},hide:function(){if(this.visible){var a=this._controllerDiv;a.title=this.NLS_show;q.remove(a,"ovwHide");q.add(a,"ovwShow");this._maximized&&this._maximizeHandler();G.hide(this._body);G.hide(this._maximizerDiv);this._deactivate();this.visible=!1}},_initialSetup:function(){if(this._mainMapLayer=this.map.getLayer(this.map.layerIds[0])){var a=this.baseLayer||this._mainMapLayer,c=this.map.spatialReference,d=a.spatialReference;
if(d.wkid!==c.wkid&&d.wkt!==c.wkt)console.error("esri.dijit.OverviewMap: "+this.NLS_invalidSR);else{c=a.declaredClass;if(a instanceof w)if(-1!==c.indexOf("VETiledLayer"))this.baseLayer=new I({resourceInfo:a.getResourceInfo(),culture:a.culture,mapStyle:a.mapStyle,bingMapsKey:a.bingMapsKey});else if(-1!==c.indexOf("OpenStreetMapLayer"))this.baseLayer=new y({tileServers:a.tileServers});else if(-1!==c.indexOf("WebTiledLayer")){var c=a.initialExtent,d=a.fullExtent,e=a.tileInfo;this.baseLayer=new a.constructor(a.urlTemplate,
{initialExtent:c&&new c.constructor(c.toJson()),fullExtent:d&&new d.constructor(d.toJson()),tileInfo:e&&new e.constructor(e.toJson()),tileServers:a.tileServers&&a.tileServers.slice(0)})}else this.baseLayer=new C(a.url,{resourceInfo:a.getResourceInfo()});else if(a instanceof A)-1!==c.indexOf("ArcGISImageServiceLayer")?this.baseLayer=new F(a.url):(this.baseLayer=new E(a.url),this.baseLayer.setImageFormat("png24"));else if(a instanceof x)a="http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer",
"https:"===location.protocol&&(a=a.replace("http:","https:")),this.baseLayer=new C(a,{});else{console.error("esri.dijit.OverviewMap: "+this.NLS_invalidType);return}!this._detached&&(this.visible&&this._controllerDiv)&&(a=function(){this.visible=!1;this.show()},this.baseLayer.loaded?a.call(this):b.connect(this.baseLayer,"onLoad",this,a))}}else console.error("esri.dijit.OverviewMap: "+this.NLS_noLayer)},_visibilityHandler:function(){this.visible?this.hide():this.show()},_maximizeHandler:function(){var a=
this._maximizerDiv;this._maximized?(a.title=this.NLS_maximize,q.remove(a,"ovwRestore"),q.add(a,"ovwMaximize"),this._resize(this.width,this.height)):(a.title=this.NLS_restore,q.remove(a,"ovwMaximize"),q.add(a,"ovwRestore"),this._resize(this.map.width,this.map.height));this._maximized=!this._maximized},_resize:function(a,b){s.set(this._body,{width:a+"px",height:b+"px"});var c=D.defaults.map.panDuration,d=this.overviewMap;D.defaults.map.panDuration=0;d&&(d.resize(!0),d.centerAt(this._focusExtent.getCenter()));
D.defaults.map.panDuration=c},_initialize:function(){if(this.overviewMap)this._activate();else{var a,c;c=9>u("ie")?this._body.firstChild:this._body.firstElementChild;this.overviewMap=a=new d(c,{slider:!1,showAttribution:!1,logo:!1,lods:this._overviewLods,wrapAround180:this.map.wrapAround180});b.connect(a,"onLoad",this,function(){this._map_resize_override=t.hitch(a,this._map_resize_override);a.disableMapNavigation();this._activate()});a.addLayer(this.baseLayer)}},_activate:function(){var a=this.map,
c=this.overviewMap;this._moveableHandle=new h(this._focusDiv);this._soeConnect=b.connect(a,"onExtentChange",this,this._syncOverviewMap);this._ufoConnect=b.connect(a,"onPan",this,this._updateFocus);this._oecConnect=b.connect(c,"onExtentChange",this,this._ovwExtentChangeHandler);this._opaConnect=b.connect(c,"onPan",this,this._ovwPanHandler);this._ozsConnect=b.connect(c,"onZoomStart",this,function(){G.hide(this._focusDiv)});this._ozeConnect=b.connect(c,"onZoomEnd",this,function(){G.show(this._focusDiv)});
this._omsConnect=b.connect(this._moveableHandle,"onMoveStop",this,this._moveStopHandler);this._syncOverviewMap(a.extent,null,null,null)},_deactivate:function(){b.disconnect(this._soeConnect);b.disconnect(this._ufoConnect);b.disconnect(this._oecConnect);b.disconnect(this._opaConnect);b.disconnect(this._ozsConnect);b.disconnect(this._ozeConnect);b.disconnect(this._omsConnect);this._moveableHandle&&this._moveableHandle.destroy()},_syncOverviewMap:function(a,b,c,d){this._suspendPanHandling?this._suspendPanHandling=
!1:(this._focusExtent=a,this.overviewMap.setExtent(a.expand(this.expandFactor),!0))},_updateFocus:function(a){this._suspendPanHandling||(this._focusExtent=a,this._drawFocusDiv(a))},_drawFocusDiv:function(a,b){var c=this.overviewMap,d=c.toScreen(new g(a.xmin,a.ymax,c.spatialReference)),e=c.toScreen(new g(a.xmax,a.ymin,c.spatialReference)),c=e.x-d.x,e=e.y-d.y,h=!0;c>this.overviewMap.width&&e>this.overviewMap.height&&(h=!1);s.set(this._focusDiv,{left:d.x+(b?b.x:0)+"px",top:d.y+(b?b.y:0)+"px",width:c+
"px",height:e+"px",display:h?"block":"none"})},_moveStopHandler:function(a){var b=this._moveableHandle.node.style;a=this._focusExtent;var c=this.overviewMap,b=c.toMap(new m(parseInt(b.left,10),parseInt(b.top,10))),d=new g(a.xmin,a.ymax,c.spatialReference);this._focusExtent=a.offset(b.x-d.x,b.y-d.y);this._maximized?this._maximizeHandler():c.centerAt(this._focusExtent.getCenter());this._suspendPanHandling=!0;this.map.setExtent(this._focusExtent)},_ovwExtentChangeHandler:function(){this._drawFocusDiv(this._focusExtent)},
_ovwPanHandler:function(a,b){this._drawFocusDiv(this._focusExtent,b)}});u("extend-esri")&&t.setObject("dijit.OverviewMap",e,L);return e})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g){return t("dojo.dnd.Moveable",[q],{handle:"",delay:0,skip:!1,constructor:function(a,e){this.node=n.byId(a);e||(e={});this.handle=e.handle?n.byId(e.handle):
null;this.handle||(this.handle=this.node);this.delay=0<e.delay?e.delay:0;this.skip=e.skip;this.mover=e.mover?e.mover:d;this.events=[s(this.handle,c.press,b.hitch(this,"onMouseDown")),s(this.handle,"dragstart",b.hitch(this,"onSelectStart")),s(this.handle,"selectstart",b.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){e.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(d){if(!this.skip||!a.isFormElement(d)){if(this.delay)this.events.push(s(this.handle,
c.move,b.hitch(this,"onMouseMove")),s(this.handle,c.release,b.hitch(this,"onMouseUp"))),this._lastX=d.pageX,this._lastY=d.pageY;else this.onDragDetected(d);d.stopPropagation();d.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(b){if(!this.skip||
!a.isFormElement(b))b.stopPropagation(),b.preventDefault()},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){h.publish("/dnd/move/start",a);u.add(g.body(),"dojoMove");u.add(this.node,"dojoMoveItem")},onMoveStop:function(a){h.publish("/dnd/move/stop",a);u.remove(g.body(),"dojoMove");u.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},
onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(e,t,b,n){var u=b.getObject("dojo.dnd",!0);u.getCopyKeyState=function(b){return b[e("mac")?"metaKey":"ctrlKey"]};u._uniqueId=0;u.getUniqueId=function(){var b;do b=t._scopeName+"Unique"+ ++u._uniqueId;while(n.byId(b));return b};u._empty={};u.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+
" ")};return u})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m){return t("dojo.dnd.Mover",[c],{constructor:function(c,e,g){function h(a){a.preventDefault();a.stopPropagation()}this.node=q.byId(c);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;e=this.host=g;c=c.ownerDocument;this.events=[a(c,
d.move,b.hitch(this,"onFirstMove")),a(c,d.move,b.hitch(this,"onMouseMove")),a(c,d.release,b.hitch(this,"onMouseUp")),a(c,"dragstart",h),a(c.body,"selectstart",h)];m.autoScrollStart(c);if(e&&e.onMoveStart)e.onMoveStart(this)},onMouseMove:function(a){m.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(n("webkit")&&n("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();
a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,d=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=s.getMarginBox(this.node);c=u.doc.body;var e=h.getComputedStyle(c),g=s.getMarginBox(c,e),e=s.getContentBox(c,e);c=b.l-(e.l-g.l);b=b.t-(e.t-g.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(d&&d.onFirstMove)d.onFirstMove(this,
a);this.events.shift().remove()},destroy:function(){e.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(e,t,b,n,u,q){var s={};e.setObject("dojo.dnd.autoscroll",s);s.getViewport=q.getBox;s.V_TRIGGER_AUTOSCROLL=32;s.H_TRIGGER_AUTOSCROLL=32;s.V_AUTOSCROLL_VALUE=16;s.H_AUTOSCROLL_VALUE=
16;var h,c=b.doc,a=Infinity,d=Infinity;s.autoScrollStart=function(e){c=e;h=q.getBox(c);e=b.body(c).parentNode;a=Math.max(e.scrollHeight-h.h,0);d=Math.max(e.scrollWidth-h.w,0)};s.autoScroll=function(e){var m=h||q.getBox(c),n=b.body(c).parentNode,t=0,u=0;e.clientX<s.H_TRIGGER_AUTOSCROLL?t=-s.H_AUTOSCROLL_VALUE:e.clientX>m.w-s.H_TRIGGER_AUTOSCROLL&&(t=Math.min(s.H_AUTOSCROLL_VALUE,d-n.scrollLeft));e.clientY<s.V_TRIGGER_AUTOSCROLL?u=-s.V_AUTOSCROLL_VALUE:e.clientY>m.h-s.V_TRIGGER_AUTOSCROLL&&(u=Math.min(s.V_AUTOSCROLL_VALUE,
a-n.scrollTop));window.scrollBy(t,u)};s._validNodes={div:1,p:1,td:1};s._validOverflow={auto:1,scroll:1};s.autoScrollNodes=function(a){for(var c,d,e,h,q,E,F=0,y=0,I=a.target;I;){if(1==I.nodeType&&I.tagName.toLowerCase()in s._validNodes){e=u.getComputedStyle(I);h=e.overflow.toLowerCase()in s._validOverflow;q=e.overflowX.toLowerCase()in s._validOverflow;E=e.overflowY.toLowerCase()in s._validOverflow;if(h||q||E)c=n.getContentBox(I,e),d=n.position(I,!0);if(h||q){e=Math.min(s.H_TRIGGER_AUTOSCROLL,c.w/2);
q=a.pageX-d.x;if(t("webkit")||t("opera"))q+=b.body().scrollLeft;F=0;0<q&&q<c.w&&(q<e?F=-e:q>c.w-e&&(F=e),I.scrollLeft+=F)}if(h||E){h=Math.min(s.V_TRIGGER_AUTOSCROLL,c.h/2);E=a.pageY-d.y;if(t("webkit")||t("opera"))E+=b.body().scrollTop;y=0;0<E&&E<c.h&&(E<h?y=-h:E>c.h-h&&(y=h),I.scrollTop+=y)}if(F||y)return}try{I=I.parentNode}catch(L){I=null}}s.autoScroll(a)};return s})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/xml/parser dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w){var A=c.defaults.map.zoomDuration;e=e(m,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(a,c){this.useMapTime=c&&c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0;var d=b.hitch;this._exportMapImageHandler=d(this,this._exportMapImageHandler);this._imgSrcFunc=d(this,this._imgSrcFunc);this._divAlphaImageFunc=d(this,this._divAlphaImageFunc);this._tileLoadHandler=d(this,this._tileLoadHandler);this._tileErrorHandler=
d(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(b,c,d){this.inherited(arguments);this._map=b;var e=this._div=n.create("div",null,c),g=h._css.names,m={position:"absolute",width:b.width+"px",height:b.height+"px",overflow:"visible",opacity:this.opacity},q=a("ie"),s=t.connect,w=b.__visibleDelta;8===q&&delete m.opacity;"css-transforms"===b.navigationMode?(m[g.transform]=h._css.translate(w.x,w.y),u.set(e,m),this._left=w.x,this._top=w.y):(m.left="0px",m.top=
"0px",u.set(e,m),this._left=this._top=0);u.set(e,m);this._onResizeHandler_connect=s(b,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=s(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!b.loaded)var A=t.connect(b,"onLoad",this,function(){t.disconnect(A);A=null;this.evaluateSuspension()});return e},_unsetMap:function(a,b){n.destroy(this._div);this._map=this._div=null;var c=t.disconnect;
c(this._onResizeHandler_connect);c(this._opacityChangeHandler_connect);this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(a,b,c){u.set(this._div,{width:b+"px",height:c+"px"});this._onExtentChangeHandler(a)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();g.hide(this._div);
clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var a=this._map;this._toggleTime();"css-transforms"===a.navigationMode&&(a=a.__visibleDelta,this._left=a.x,this._top=a.y,u.set(this._div,h._css.names.transform,h._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(b.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},
_enableDrawConnectors:function(){var a=t.connect,b=this._map;b&&(this._onPanHandler_connect=a(b,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=a(b,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===b.navigationMode?this._onScaleHandler_connect=a(b,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=a(b,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var a=t.disconnect;a(this._onPanHandler_connect);a(this._onExtentChangeHandler_connect);
a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var a=this._map;this.timeInfo&&this.useMapTime&&a&&!this.suspended?(this._timeConnect||(this._timeConnect=t.connect(a,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(a.timeExtent)):(t.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(a){this._params&&
(this._params.time=a?a.toJson().join(","):null)},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._dragOrigin,d=this._map.__visibleDelta,e=this._img;e&&("css-transforms"===this._map.navigationMode?(this._left=d.x+b.x,this._top=d.y+b.y,u.set(this._div,h._css.names.transform,h._css.translate(this._left,this._top))):u.set(e,{left:c.x+b.x+"px",top:c.y+b.y+"px"}))},_onExtentChangeHandler:function(b,c,d){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var e=
this._map,g=this._img,m=g&&g.style,q=this._dragOrigin;if(c&&!d&&g&&(c.x!==this._panDx||c.y!==this._panDy))"css-transforms"===e.navigationMode?(c=e.__visibleDelta,this._left=c.x,this._top=c.y,u.set(this._div,h._css.names.transform,h._css.translate(this._left,this._top))):u.set(g,{left:q.x+c.x+"px",top:q.y+c.y+"px"});g?(q.x=parseInt(m.left,10),q.y=parseInt(m.top,10)):q.x=q.y=0;"css-transforms"===e.navigationMode&&(d&&g)&&(u.set(g,h._css.names.transition,"none"),g._multiply=g._multiply?s.multiply(g._matrix,
g._multiply):g._matrix);this._fireUpdateStart();if(d=this._img_loading)if(t.disconnect(d._onload_connect),t.disconnect(d._onerror_connect),t.disconnect(d._onabort_connect),n.destroy(d),this._img_loading=null,d=this._jsonRequest){try{d.cancel()}catch(w){}this._jsonRequest=null}10<=this.version&&e.wrapAround180&&(b=b._normalize(!0));if(this.isPNG32)g=this._img_loading=n.create("div"),g.id=e.id+"_"+this.id+"_"+(new Date).getTime(),u.set(g,{position:"absolute",left:"0px",top:"0px",width:e.width+"px",
height:e.height+"px"}),g=g.appendChild(n.create("div")),u.set(g,{opacity:0,width:e.width+"px",height:e.height+"px"}),this.getImageUrl(b,e.width,e.height,this._divAlphaImageFunc);else{d=this._img_loading=n.create("img");c=h._css.names;var G=a("ie"),N={position:"absolute",width:e.width+"px",height:e.height+"px"};8===G&&(N.opacity=this.opacity);"css-transforms"===e.navigationMode?(N[c.transform]=h._css.translate(-this._left,-this._top),d._tdx=-this._left,d._tdy=-this._top,N[c.transition]=c.transformName+
" "+A+"ms ease"):(N.left="0px",N.top="0px");d.id=e.id+"_"+this.id+"_"+(new Date).getTime();u.set(d,N);d._onload_connect=t.connect(d,"onload",this,"_onLoadHandler");d._onerror_connect=t.connect(d,"onerror",this,"_onErrorHandler");d._onabort_connect=t.connect(d,"onabort",this,"_onErrorHandler");this._startRect={left:q.x,top:q.y,width:g?parseInt(m.width,10):e.width,height:g?parseInt(m.height,10):e.height,zoom:m&&m.zoom?parseFloat(m.zoom):1};this.getImageUrl(b,e.width,e.height,this._imgSrcFunc)}}},_onTimeExtentChangeHandler:function(a){this.suspended||
(this._setTime(a),this.refresh(!0))},getImageUrl:function(a,b,c,d){},_imgSrcFunc:function(a){this._img_loading.src=a},_divAlphaImageFunc:function(a){u.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+a+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(a){a=a.currentTarget;var b=t.disconnect,c=this._map;b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);!c||c.__panning||c.__zooming?
n.destroy(a):(q.removeChildren(this._div),this._img=a,this._startRect={left:0,top:0,width:c.width,height:c.height,zoom:1},this._div.appendChild(a),this.suspended||g.show(this._div),a._onload_connect=a._onerror_connect=a._onabort_connect=this._img_loading=null,a=this._dragOrigin,a.x=a.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(a){a=a.currentTarget;var b=t.disconnect;u.set(a,"visibility","hidden");b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=
a._onerror_connect=a._onabort_connect=null;a=Error("Unable to load image: "+a.src);this.onError(a);this._fireUpdateEnd(a)},setUseMapTime:function(a,b){this.useMapTime=a;this._toggleTime();b||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(a,b){var c={},d=h._css.names,e=this._img;if(e){u.set(e,d.transition,b?"none":d.transformName+" "+A+"ms ease");e._matrix=a;a=e._multiply?s.multiply(a,e._multiply):a;if(e._tdx||e._tdy)a=s.multiply(a,
{xx:1,xy:0,yx:0,yy:1,dx:e._tdx,dy:e._tdy});c[d.transform]=h._css.matrix(a);u.set(e,c)}},_onZoomHandler:function(b,c,d){b=this._startRect;var e=b.width*c,g=b.height*c,h=this._img,m=a("ie");h&&(m&&8>m?u.set(h,{left:b.left-(e-b.width)*(d.x-b.left)/b.width+"px",top:b.top-(g-b.height)*(d.y-b.top)/b.height+"px",zoom:c*b.zoom}):u.set(h,{left:b.left-(e-b.width)*(d.x-b.left)/b.width+"px",top:b.top-(g-b.height)*(d.y-b.top)/b.height+"px",width:e+"px",height:g+"px"}))},_exportMapImage:function(a,b,e){var g=this._exportMapImageHandler;
b.token=this._getToken();d({url:a,content:b,callbackParamName:"callback",load:function(a,b){g(a,b,e)},error:c.defaults.io.errorHandler})},_exportMapImageHandler:function(a,b,c){a=new w(a);this.onMapImageExport(a);c&&c(a)},onMapImageExport:function(){},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(b){var c=8===a("ie")?this._img:this._div;u.set(c,"opacity",b)}});a("extend-esri")&&b.setObject("layers.DynamicMapServiceLayer",
e,h);return e})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(e){e.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(t,b){var n=e.doc,u;b=b||"text/xml";if(t&&e.trim(t)&&"DOMParser"in e.global){u=(new DOMParser).parseFromString(t,b);n=u.documentElement;if("parsererror"==n.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==n.namespaceURI){var q=n.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml",
"sourcetext")[0];q&&(q=q.firstChild.data);throw Error("Error parsing text "+n.firstChild.data+" \n"+q);}return u}if("ActiveXObject"in e.global){n=function(b){return"MSXML"+b+".DOMDocument"};n=["Microsoft.XMLDOM",n(6),n(4),n(3),n(2)];e.some(n,function(b){try{u=new ActiveXObject(b)}catch(c){return!1}return!0});if(t&&u&&(u.async=!1,u.loadXML(t),n=u.parseError,0!==n.errorCode))throw Error("Line: "+n.line+"\nCol: "+n.linepos+"\nReason: "+n.reason+"\nError Code: "+n.errorCode+"\nSource: "+n.srcText);if(u)return u}else if(n.implementation&&
n.implementation.createDocument){if(t&&e.trim(t)&&n.createElement){q=n.createElement("xml");q.innerHTML=t;var s=n.implementation.createDocument("foo","",null);e.forEach(q.childNodes,function(b){s.importNode(b,!0)});return s}return n.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(t,b){if(1<arguments.length)return dojox.xml.parser.replaceChildren(t,(t.ownerDocument||e.doc).createTextNode(b)),b;if(void 0!==t.textContent)return t.textContent;var n="";t&&e.forEach(t.childNodes,
function(b){switch(b.nodeType){case 1:case 5:n+=dojox.xml.parser.textContent(b);break;case 3:case 2:case 4:n+=b.nodeValue}});return n};dojox.xml.parser.replaceChildren=function(t,b){var n=[];e.isIE&&e.forEach(t.childNodes,function(b){n.push(b)});dojox.xml.parser.removeChildren(t);e.forEach(n,e.destroy);e.isArray(b)?e.forEach(b,function(b){t.appendChild(b)}):t.appendChild(b)};dojox.xml.parser.removeChildren=function(e){for(var b=e.childNodes.length;e.hasChildNodes();)e.removeChild(e.firstChild);return b};
dojox.xml.parser.innerXML=function(e){return e.innerXML?e.innerXML:e.xml?e.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):null};return dojox.xml.parser})},"esri/layers/VectorTileLayer":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/url dojo/dom-construct dojo/dom-style dojo/has dojo/Deferred ../lang ../domUtils ../urlUtils ../kernel ../config ../request ../SpatialReference ../geometry/Extent ./layer ./TileInfo ./unitBezier".split(" "),function(e,
t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F){var y=t(C,{declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:["World_Basemap"],_eventMap:{"style-change":["style"]},constructor:function(f,a){this._displayLevels=a?a.displayLevels:null;this._serviceOverrides={};a&&(a.tileServers&&a.tileServers.length)&&(this._serviceOverrides.tileServers=a.tileServers.map(function(f){return z.isMapboxUrl(f)?f:d.getAbsoluteUrl(d.urlToObject(f).path)},this));if("string"===typeof f){var b=z.isMapboxUrl(f),l=b?f:d.getAbsoluteUrl(f);
if(!b&&(b=/token=([^&]+)/i.exec(l)))l=d.urlToObject(f).path,this._serviceOverrides.credential={url:l,token:b[1]};urlOrObbject=l}this.setStyle(f);this.registerConnectEvents()},setStyle:function(f){if(f)return this._loadStyle(f)},opacity:1,setOpacity:function(f){if(this.opacity!=f)this.onOpacityChange(this.opacity=f)},onOpacityChange:function(){},refresh:function(){},_loadStyle:function(f){return(new h).resolve().then(function(){var f=new h;null==s("ie")||9<s("ie")?I?I.supported()?f.resolve():f.reject(Error("layer not supported"),
!0):e(["./vector-tile"],function(a){I=a;I.supported()?f.resolve():f.reject(Error("layer not supported"),!0)}):f.reject(Error("layer not supported"),!0);return f.promise}).then(function(){I.tokenHandler?L=I.tokenHandler:(L=new l,I.tokenHandler=L);this._serviceOverrides&&this._serviceOverrides.credential&&L.addToken(this._serviceOverrides.credential);return z.loadMetadata(f,this._serviceOverrides)}.bind(this)).then(b.hitch(this,function(a){var b=a.layerDefinition;this.serviceUrl=a.serviceUrl||null;
this.styleUrl=a.styleUrl||null;b?(this.spatialReference=b.initialExtent&&b.initialExtent.spatialReference&&new A(b.initialExtent.spatialReference),this.initialExtent=b.initialExtent&&new x(b.initialExtent),this.fullExtent=b.fullExtent&&new x(b.fullExtent),this.version=b.currentVersion,this.tileInfo=new E(b.tileInfo),c.isDefined(b.minScale)&&!this._hasMin&&this.setMinScale(b.minScale),c.isDefined(b.maxScale)&&!this._hasMax&&this.setMaxScale(b.maxScale),b=null,f&&(b=d.urlToObject(a.serviceUrl).path.toLowerCase(),
b=this._getDefaultAttribution(this._getMapName(b))),b&&(this.attributionDataUrl=b,this.hasAttributionData=!0)):(this.spatialReference=K,this.initialExtent=R,this.fullExtent=M,this.tileInfo=P,this.version=null);for(var b=this.tileInfo.lods,l=this.scales=[],v=this._displayLevels,J=-Infinity,e=Infinity,z,h=0,m=b.length;h<m;h++)if(z=b[h],!v||-1!==v.indexOf(z.level))l[h]=z.scale,J=z.scale>J?z.scale:J,e=z.scale<e?z.scale:e;-Infinity!==J&&!this._hasMin&&this.setMinScale(J);Infinity!==e&&!this._hasMax&&this.setMaxScale(e);
this.style=a.style;this.gl&&(I.identityManager=g.id,this._applyGLStyle(this.style));this.onStyleChange(this.style)})).then(b.hitch(this,function(){!this.loaded&&!this.loadError&&(this.loaded=!0,this.onLoad(this))})).otherwise(b.hitch(this,function(f){this._errorHandler(f);throw f;}))},_setMap:function(f,a,k){this.inherited(arguments);this._map=f;var l=this._div=u.create("div",null,a);q.set(l,{position:"absolute",width:f.width+"px",height:f.height+"px",overflow:"visible",opacity:this.opacity});this._onResizeHandle=
f.on("resize",b.hitch(this,this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",b.hitch(this,this._opacityChangeHandler));I.identityManager=g.id;this.gl=new I.Renderer({container:l});this.gl.setSize(f.width,f.height);this._applyGLStyle(this.style);this.evaluateSuspension();if(this.suspended&&!f.loaded)var v=f.on("load",b.hitch(this,function(){v.remove();this.evaluateSuspension()}));return l},_unsetMap:function(f,a){this.gl.remove();this.gl=null;u.destroy(this._div);this._map=this._div=
null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._disableDrawConnectors();this._animation&&(this._animation.stop(),this._animation=null);this.inherited(arguments)},_applyGLStyle:function(f){var a=this.gl;a&&(f?(f.animationLoop=a.animationLoop,a.setStyle(f),f._loaded&&(Object.getOwnPropertyNames(f.sources).forEach(function(f){this.fire("source.add",{source:this.sources[f]})},f),
f.fire("load"),f.sprite.loaded()&&f.fire("change"))):a.setStyle(null))},_enableDrawConnectors:function(){var f=this._map;f&&(this._panHandle=f.on("pan",b.hitch(this,this._onPanExtentChangeHandler)),this._extentChangeHandle=f.on("extent-change",b.hitch(this,this._onPanExtentChangeHandler)),this._onScaleHandle=f.on("scale",b.hitch(this,this._onScaleHandler)))},_disableDrawConnectors:function(){this._onScaleHandle=this._onScaleHandle&&this._onScaleHandle.remove()&&null;this._panHandle=this._panHandle&&
this._panHandle.remove()&&null;this._extentChangeHandle=this._extentChangeHandle&&this._extentChangeHandle.remove()&&null},_getZoom:function(f,a){var b=this.tileInfo.lods,l=null,v=null;a=0;var c=b.length-1;for(a;a<c;a++){l=b[a];v=b[a+1];if(l.scale<=f)return a;if(v.scale===f)return a+1;if(l.scale>f&&v.scale<f){a=a+1-(f-v.scale)/(l.scale-v.scale);a=Math.ceil(a)-Math.log(Math.abs(Math.ceil(a)-a+1))/Math.LN2;if(0.995<a-Math.floor(a)||0.005>a-Math.floor(a))a=Math.round(a);return a}}return f>b[0].scale?
b[0].level:b[b.length-1].level},_isMapAtVisibleScale:function(){var f=this.inherited(arguments);if(f){for(var a=this._map,f=this.scales,b=a.getScale(),l=!1,a=a.width>a.height?a.width:a.height,v=0,c=f.length;v<c;v++)if(Math.abs(f[v]-b)/f[v]<1/a){l=!0;break}f=l}return f},_getMapName:function(f){return(f=f.match(/^https?\:\/\/(basemaps|basemapsbeta)\.arcgis\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i))&&f[2]},_getDefaultAttribution:function(f){if(f){var a;f=f.toLowerCase();
for(var b=0,l=this._mapsWithAttribution.length;b<l;b++)if(a=this._mapsWithAttribution[b],-1<a.toLowerCase().indexOf(f))return"file:"===window.location.protocol?"http:":window.location.protocol+"//static.arcgis.com/attribution/Vector/"+a}},onStyleChange:function(f){},_opacityChangeHandler:function(f){this.gl&&(this._div.style.opacity=f.opacity)},_onResizeHandler:function(f){if(this.gl){var a=f.extent.getCenter();this.gl.setSize(f.width,f.height);this.gl.jumpTo({center:[a.getLongitude(),a.getLatitude()]});
this._div.style.width=f.width+"px";this._div.style.height=f.height+"px"}},onSuspend:function(){this.inherited(arguments);a.hide(this._div);this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);if(this.gl&&this.style){a.show(this._div);var f=this._map,b=this._getZoom(f.getScale()),f=f.extent.getCenter();this._animate(f,b,!0)}this._enableDrawConnectors()},_onPanExtentChangeHandler:function(f){var a=this._getZoom(this._map.getScale());f=f.extent.getCenter();this._animate(f,a,!0)},
_onScaleHandler:function(f){var a=this._map,b=a._zoomAnimDiv.anchor,l=a._zoomAnimDiv.extent.getCenter(),a=this._getZoom(a._zoomAnimDiv.newLod.scale,a._zoomAnimDiv.newLod.level);this._animate(l,a,f.immediate,b)},_animate:function(f,a,b,l){this._animation&&(this._animation.stop(),this._animation=null);this._animation=v(this.gl,f.getLongitude(),f.getLatitude(),a,b,this._map,l)}}),I=null,L=null;C=Object.freeze||function(f){};for(var D=[],G=0;20>G;G++){var N=78271.51696402048/Math.pow(2,G);D.push({level:G,
scale:Math.floor(3779.527559055118*N),resolution:N})}var P=new E({rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:D});C(P);var K=new A(102100);C(K);var R=new x(-2.003750834E7,-2.003750834E7,2.003750834E7,2.003750834E7,K);C(R);var M=new x(-2.003750834E7,-2.003750834E7,2.003750834E7,2.003750834E7,K);C(M);var T=function(){var f,a=window.performance||{},b=a.now||a.webkitNow||a.msNow||a.oNow||a.mozNow;if(void 0!==b)return function(){return b.call(a)};
f=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-f}}();C=s("ff");var D=s("ie"),G=s("webkit"),N=s("opera"),U=(new Date).getTime(),V=window.requestAnimationFrame;V||(V=window[(G&&"webkit"||C&&"moz"||N&&"o"||D&&"ms")+"RequestAnimationFrame"])||(V=function(f){var a=T(),b=Math.max(0,16-(a-U)),l=window.setTimeout(function(){f(T())},b);U=a+b;return l});var W=
F.ease,v=function(f,a,b,l,v,c,d){if(v=v||0===m.defaults.map.zoomDuration)return f.jumpTo({center:[a,b],zoom:Math.ceil(l)-Math.log(Math.abs(Math.ceil(l)-l+1))/Math.LN2}),null;var e=!0,g=m.defaults.map.zoomDuration,z=f.transform.center.lat,h=f.transform.center.lng,q=f.transform.zoom,n=T()+16,s=d?[d.x-c.width/2,d.y-c.height/2]:null,t=function(){if(e){var v=(T()+16-n)/g;1<=v&&(v=1,e=!1);var v=W(v),c=q+(l-q)*v,c=Math.ceil(c)-Math.log(Math.abs(Math.ceil(c)-c+1))/Math.LN2;s?f.zoomTo(c,{animate:!1,offset:s}):
f.jumpTo({center:[h+(a-h)*v,z+(b-z)*v],zoom:c});e&&V(t)}};t();return{stop:function(){e=!1}}},O=t(String,{constructor:function(f,a){this.value=f;this.token=a},valueOf:function(){var f=this.value,a=this.token;if(!a){var b=g.id&&g.id.findCredential(f);b&&b.token&&(a=b.token)}a&&(f+=(-1===f.indexOf("?")?"?":"\x26")+"token\x3d"+a);return f},toString:function(){return this.valueOf()},replace:function(f,a){return String.prototype.replace.call(this.valueOf(),f,a)}}),z={loadMetadata:function(f,a){var b=null,
l=null,v=a&&a.credential;return(new h).resolve(f).then(function(){I.config.ACCESS_TOKEN=y.ACCESS_TOKEN;if("string"!==typeof f)return f;z.isMapboxUrl(f)?(l=f,b=I.normalizeStyleURL(f)):l=b=d.normalize(f).replace(/\/*$/,"");z._corsify(b);b=z._appendToken(b,v);return w({url:b,content:{f:"json"},handleAs:"json"})}).then(function(f){return z._processMetadata(l,f,a)}).then(function(f){return z._loadStyle(f,a)})},isMapboxUrl:function(f){return-1<f.search(/^mapbox:\/\/styles\//)},_appendToken:function(f,a){return!a||
!a.token?f:f+=(-1===f.indexOf("?")?"?":"\x26")+"token\x3d"+a.token},_configureStyle:function(f,a){var b=f.layerDefinition,l=f.style,v=f.serviceUrl,c=f.styleUrl,d=z._getAbsolutePath,e=z._corsify;if(b&&l&&l.sources.esri){var g=b.tilejson||"2.0.0",h=b.tileInfo&&b.tileInfo.format||"pbf",m=b.tileMap?e(d(b.tileMap,v)):null,q=(b.tiles||[]).map(function(f){return new O(z._getAbsolutePath(f,v),a&&a.credential&&a.credential.token)});l.sources.esri={type:"vector",scheme:"xyz",tilejson:g,format:h,index:m,tiles:q,
description:b.description,name:b.name};q.forEach(e);l.glyphs=e(d(l.glyphs,c));l.sprite=e(d(l.sprite,c))}return{style:l,layerDefinition:b,serviceUrl:v,styleUrl:c}},_loadStyle:function(f,a){var k=new h,l=f.style,v=l.sources;a&&a.tileServers&&Object.getOwnPropertyNames(v).forEach(b.hitch(this,function(b){b=v[b];var k=a.tileServers.map(function(b){return new O(z._getAbsolutePath(b,f.serviceUrl,a))});b.tiles=k;k.forEach(z._corsify)}));I.identityManager=g.id;var l=new I.Style(l),c=function(){l.off("load",
c);l.off("error",d);f.style=l;k.resolve(f)},d=function(f){l.off("load",c);l.off("error",d);k.reject(f)};l.on("load",c);l.on("error",d);return k.promise},_getAbsolutePath:function(f,a){var b;a=d.urlToObject(a||"").path;if(/^https?:\/\//i.test(f))b=f;else{if(0===f.indexOf("//"))return location.protocol+f;a=a.replace(/(\/+\w+\.\w+)$/,"");/\/+$/.test(a)||(a+="/");0===f.indexOf("/")&&(f=f.substring(1));b=a+f}return d.normalize(b)},_corsify:function(f){f=f.valueOf();var a=m.defaults.io.corsEnabledServers;
if(!d.canUseXhr(f)){var b=new n(f),b=(b.host+(b.port?":"+b.port:"")).toLowerCase();-1===a.indexOf(b)&&a.push(b)}return f},_processMetadata:function(f,a,k){var l={},v,c,d=z._getAbsolutePath,e=z._configureStyle,g=z._corsify,h=k&&k.credential;delete a._ssl;if(a.currentVersion)return v=f,c=d(a.defaultStyles,v),w({url:z._appendToken(c,h),content:{f:"json"},handleAs:"json"}).then(b.hitch(this,function(f){return e({style:f,layerDefinition:a,styleUrl:c,serviceUrl:v},k)}));l=a;c=f;return a.sources.esri&&a.sources.esri.url?
(v=g(d(a.sources.esri.url,c)),w({url:z._appendToken(v,h),content:{f:"json"},handleAs:"json"}).then(b.hitch(this,function(f){return e({style:l,layerDefinition:f,styleUrl:c,serviceUrl:v},k)}))):e({style:l})}},l=t([],{constructor:function(){this._credentials=[]},addToken:function(f){if(!f||!f.url||!f.token)return!1;var a=this.getServiceRoot(f.url);this._credentials.push({rootUrl:a,token:f.token})},findCredential:function(f){var a=-1,b=this._credentials,l=this.getServiceRoot(f);b.some(function(f,b){if(f.rootUrl===
l)return a=b,!0});return-1<a?b[a]:null},getServiceRoot:function(f){var a=/(.+\/rest\/services\/.*\/?vectortileserver)/i,b=/(.+\/sharing\/.*)/i;return a.test(f)?f.match(a)[1].toLowerCase():b.test(f)?f.match(b)[1].toLowerCase():null},shareSameService:function(f,a){f=this.getServiceRoot(f);a=this.getServiceRoot(a);f=f.substr(f.indexOf(":"));a=a.substr(a.indexOf(":"));return f===a}});y.ACCESS_TOKEN=null;return y})},"esri/layers/unitBezier":function(){define([],function(){var e=function(b,e,t,q){function s(b,
d){var e,g,m,q;d=null==d?1E-6:d;m=b;for(g=0;8>g;g++){q=((a*m+c)*m+h)*m-b;if(Math.abs(q)<d)return m;e=(3*a*m+2*c)*m+h;if(1E-6>Math.abs(e))break;m-=q/e}e=0;g=1;m=b;if(m<e)return e;if(m>g)return g;for(;e<g;){q=((a*m+c)*m+h)*m;if(Math.abs(q-b)<d)break;b>q?e=m:g=m;m=0.5*(g-e)+e}return m}var h=3*b,c=3*(t-b)-h,a=1-h-c,d=3*e,g=3*(q-e)-d,m=1-d-g;return function(a,b){var c=s(a,b);return((m*c+g)*c+d)*c}},t=/^cubic-bezier\((.*)\)/;e.parse=function(b){var n=e[b]||null;if(!n&&(b=t.exec(b)))b=b[1].split(",").map(function(b){return parseFloat(b.trim())}),
4===b.length&&!b.some(function(b){return isNaN(b)})&&(n=e.apply(e,b));return n};e.ease=e(0.25,0.1,0.25,1);e.linear=e(0,0,1,1);e.easeIn=e["ease-in"]=e(0.42,0,1,1);e.easeOut=e["ease-out"]=e(0,0,0.58,1);e.easeInOut=e["ease-in-out"]=e(0.42,0,0.58,1);return e})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F){e=e([m,w],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(a,b,c){a=b&&b.imageParameters;var d=t.hitch;if(a){var e=a.layerDefinitions;e&&this.setLayerDefinitions(e);a.layerOption===C.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(a.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=d(this,this._setIsPNG32);this.dpi=a&&a.dpi||96;this.imageFormat=
a&&a.format||"png8";this.imageTransparency=a&&!1===a.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=b&&b.gdbVersion;this._params.gdbVersion=this.gdbVersion;t.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},a?a.toJson():{});this.getImageUrl=d(this,this.getImageUrl);this._initLayer=d(this,this._initLayer);this._load=d(this,this._load);this.useMapImage=b?b.useMapImage:!1;this._loadCallback=b&&b.loadCallback;(b=b&&b.resourceInfo)?this._initLayer(b):
(void 0===c||!1===c)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(a,b){this.inherited(arguments);a.timeInfo&&(this.timeInfo=new A(a.timeInfo));this.loaded=!0;this.onLoad(this);var c=this._loadCallback;c&&(delete this._loadCallback,c(this))},getImageUrl:function(b,d,e,g){var m=this._url.path+"/export?",s=this._params,u=b.spatialReference.wkid||n.toJson(b.spatialReference.toJson()),w=this._errorHandler;delete s._ts;t.mixin(s,{bbox:b.xmin+
","+b.ymin+","+b.xmax+","+b.ymax,bboxSR:u,imageSR:u,size:d+","+e},this.disableClientCaching?{_ts:(new Date).getTime()}:{});s.layerDefs&&(b=s.layerDefs,delete s.layerDefs,t.mixin(s,{layerDefs:b}));var x=s.token=this._getToken();b=a.addProxy(m+q.objectToQuery(t.mixin({},s,{f:"image"})));b.length>h.defaults.io.postLength||this.useMapImage?this._jsonRequest=c({url:m,content:t.mixin(s,{f:"json"}),callbackParamName:"callback",load:function(b){b=b.href;x&&(b+=-1===b.indexOf("?")?"?token\x3d"+x:"\x26token\x3d"+
x);g(a.addProxy(b))},error:w}):g(b)},_setIsPNG32:function(){var a=this.imageFormat.toLowerCase(),b=u("ie");this.isPNG32=b&&6===b&&("png32"===a||"png24"===a)&&this.imageTransparency},_setTime:function(a){var c=this.timeInfo;a=this._params.time=a?a.toJson().join(","):null;if(10.02>this.version&&c)if(a)this._params.layerTimeOptions=d._serializeTimeOptions(this.layerTimeOptions);else{var e=this.layerInfos;if(e){var g=this.layerTimeOptions,h=g?g.slice(0):[],m=[];b.forEach(e,function(a){a.subLayerIds||
m.push(a.id)});m.length&&(b.forEach(m,function(a){if(!h[a]){var b=new x;b.useTime=!1;h[a]=b}}),this._params.layerTimeOptions=d._serializeTimeOptions(h,m))}}10.02<=this.version&&c&&(!a&&!c.hasLiveData)&&(this._params.time="null,null")},setDPI:function(a,b){this.dpi=this._params.dpi=a;b||this.refresh(!0)},setImageFormat:function(a,b){this.imageFormat=this._params.format=a;this._setIsPNG32();b||this.refresh(!0)},setImageTransparency:function(a,b){this.imageTransparency=this._params.transparent=a;this._setIsPNG32();
b||this.refresh(!0)},setVisibleLayers:function(a,b){this.visibleLayers=a;this._params.layers=C.LAYER_OPTION_SHOW+":"+(a.length?a.join():"-1");this._updateDynamicLayers();b||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(a){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();a||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(a,
b){this.layerDefinitions=a;this._params.layerDefs=d._serializeLayerDefinitions(a);this._updateDynamicLayers();b||this.refresh(!0)},setDefaultLayerDefinitions:function(a){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();a||this.refresh(!0)},setDisableClientCaching:function(a){this.disableClientCaching=a},setLayerTimeOptions:function(a,b){this.layerTimeOptions=a;this._params.layerTimeOptions=d._serializeTimeOptions(a);this._updateDynamicLayers();b||this.refresh(!0)},refresh:function(a){if(a)this.inherited(arguments);
else{var b=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=b}},setLayerDrawingOptions:function(a,b){this.layerDrawingOptions=a;this._updateDynamicLayers();b||this.refresh(!0)},setDynamicLayerInfos:function(a,b){a&&0<a.length?(this.dynamicLayerInfos=a,this.visibleLayers=d._getDefaultVisibleLayers(a),this.onVisibleLayersChange(this.visibleLayers)):this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();b||this.refresh(!0)},
createDynamicLayerInfosFromLayerInfos:function(){var a=[],c;b.forEach(this.layerInfos,function(b){c=new E(b.toJson());c.source=new F({mapLayerId:b.id});a.push(c)});return a},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){if(!this.dynamicLayerInfos||0===this.dynamicLayerInfos.length)this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos();var a;a=
this.dynamicLayerInfos;var c=[],e=this._map&&g.getScale(this._map),h=this.visibleLayers,m=e?d._getLayersForScale(e,a):h;b.forEach(a,function(a){if(!a.subLayerIds){var d,e=a.id;if(-1!==b.indexOf(h,e)&&-1!==b.indexOf(m,e)){d={id:e,name:a.name};d.source=a.source&&a.source.toJson();var g;this.layerDefinitions&&this.layerDefinitions[e]&&(g=this.layerDefinitions[e]);g&&(d.definitionExpression=g);var q;this.layerDrawingOptions&&this.layerDrawingOptions[e]&&(q=this.layerDrawingOptions[e]);q&&(d.drawingInfo=
q.toJson());var n;this.layerTimeOptions&&this.layerTimeOptions[e]&&(n=this.layerTimeOptions[e]);n&&(d.layerTimeOptions=n.toJson());d.minScale=a.minScale||0;d.maxScale=a.maxScale||0;c.push(d)}}},this);a=n.toJson(c);if(!this._params.dynamicLayers||this._params.dynamicLayers.length!==a.length||this._params.dynamicLayers!==a)this._params.dynamicLayers=a,this._onDynamicLayersChange(this._params.dynamicLayers)}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):
this._params.dynamicLayers=null},_onExtentChangeHandler:function(a,b,c){c&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(a,b,c){this._map=a;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(a,b){this.gdbVersion=a;this._params.gdbVersion=a;this.onGDBVersionChange();b||this.refresh(!0)},exportMapImage:function(a,b){var c=h.defaults.map,c=t.mixin({size:c.width+","+c.height},this._params,a?a.toJson(this.normalization):
{},{f:"json"});delete c._ts;if(c.layerDefs){var d=c.layerDefs;delete c.layerDefs;t.mixin(c,{layerDefs:d})}this._exportMapImage(this._url.path+"/export",c,b)}});u("extend-esri")&&t.setObject("layers.ArcGISDynamicMapServiceLayer",e,s);return e})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(e,t,b,n,u,q,s,h){t=t(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=
[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(b){this.bbox&&e.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var a=this.bbox||this.extent,a=a&&b&&a._normalize(!0);b=this.layerOption;var d=a?a.spatialReference.wkid||n.toJson(a.spatialReference.toJson()):null,g=this.imageSpatialReference,a={dpi:this.dpi,format:this.format,
transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:a?a.xmin+","+a.ymin+","+a.xmax+","+a.ymax:null,bboxSR:d,layers:b?b+":"+this.layerIds.join(","):null,imageSR:g?g.wkid||n.toJson(g.toJson()):d};a.layerDefs=h._serializeLayerDefinitions(this.layerDefinitions);b=this.timeExtent;a.time=b?b.toJson().join(","):null;a.layerTimeOptions=h._serializeTimeOptions(this.layerTimeOptions);return s.filter(a,function(a){if(null!==a)return!0})}});b.mixin(t,{LAYER_OPTION_SHOW:"show",
LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});u("extend-esri")&&b.setObject("layers.ImageParameters",t,q);return t})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(e,t,b,n,u,q,s,h){e=e(q,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(b){b&&(b.source?
b="mapLayer"===b.source.type?new s(b.source):new h(b.source):(b=new s,b.mapLayerId=this.id),this.source=b)},toJson:function(){var b=this.inherited(arguments);b.source=this.source&&this.source.toJson();return u.fixJson(b)}});b("extend-esri")&&t.setObject("layers.DynamicLayerInfo",e,n);return e})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(e,t,b,n,u,q){e=e(q,{declaredClass:"esri.layers.LayerMapSource",
type:"mapLayer",toJson:function(){return u.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});b("extend-esri")&&t.setObject("layers.LayerMapSource",e,n);return e})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(b){b&&t.mixin(this,b)},toJson:function(){}});b("extend-esri")&&t.setObject("layers.LayerSource",
e,n);return e})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),function(e,t,b,n,u,q,s,h,c,a){e=e(q,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(b){if(b&&b.dataSource){switch(b.dataSource.type){case "table":b=new s(b.dataSource);break;case "queryTable":b=new h(b.dataSource);break;case "joinTable":b=new c(b.dataSource);
break;case "raster":b=new a(b.dataSource);break;default:b=b.dataSource}this.dataSource=b}},toJson:function(){var a={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return u.fixJson(a)}});b("extend-esri")&&t.setObject("layers.LayerDataSource",e,n);return e})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(e,t,b,n,u,q){e=e(q,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return u.fixJson({type:"table",
workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});b("extend-esri")&&t.setObject("layers.TableDataSource",e,n);return e})},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.layers.DataSource",constructor:function(b){b&&t.mixin(this,b)},toJson:function(){}});b("extend-esri")&&t.setObject("layers.DataSource",e,n);return e})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),
function(e,t,b,n,u,q,s){e=e(q,{declaredClass:"esri.layers.QueryDataSource",constructor:function(b){b&&(b.oidFields&&t.isString(b.oidFields)&&(this.oidFields=b.oidFields.split(",")),b.spatialReference&&(this.spatialReference=new s(b.spatialReference)))},toJson:function(){var b={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var c;c="point"===
this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;b.geometryType=c}return u.fixJson(b)}});b("extend-esri")&&t.setObject("layers.QueryDataSource",e,n);return e})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),
function(e,t,b,n,u,q,s,h,c,a){var d=e(q,{declaredClass:"esri.layers.JoinDataSource",constructor:function(a){a&&(a.leftTableSource&&(this.leftTableSource=this._createLayerSource(a.leftTableSource)),a.rightTableSource&&(this.rightTableSource=this._createLayerSource(a.rightTableSource)))},_createLayerSource:function(b){var e;if("mapLayer"===b.type)e=new s(b);else{e={type:"dataLayer"};var q;switch(b.dataSource.type){case "table":q=new h(b.dataSource);break;case "queryTable":q=new c(b.dataSource);break;
case "joinTable":q=new d(b.dataSource);break;case "raster":q=new a(b.dataSource);break;default:q=b.dataSource}e.dataSource=q;e.toJson=function(){var a={type:"dataLayer",dataSource:q.toJson()};return u.fixJson(a)}}return e},toJson:function(){var a={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey},b;b="left-outer-join"===this.joinType.toLowerCase()?
"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;a.joinType=b;return u.fixJson(a)}});b("extend-esri")&&t.setObject("layers.JoinDataSource",d,n);return d})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(e,t,b,n,u,q){e=e(q,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return u.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});
b("extend-esri")&&t.setObject("layers.RasterDataSource",e,n);return e})},"esri/layers/ArcGISImageServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../config ./DynamicMapServiceLayer ./ImageServiceLayerMixin".split(" "),function(e,t,b,n,u,q,s){e=e([q,s],{declaredClass:"esri.layers.ArcGISImageServiceLayer",constructor:function(b,c){this._initialize(b,c);this.useMapImage=c&&c.useMapImage||!1},refresh:function(b){if(b)this.inherited(arguments);else{var c=this.disableClientCaching;
this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=c}},exportMapImage:function(b,c){var a=u.defaults.map,a=t.mixin({size:a.width+","+a.height},this._params,b?b.toJson(this.normalization):{},{f:"json"});delete a._ts;this._exportMapImage(this._url.path+"/exportImage",a,c)}});b("extend-esri")&&t.setObject("layers.ArcGISImageServiceLayer",e,n);return e})},"esri/layers/ImageServiceLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D,G,N,P,K,R,M,T){e=e(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_eventMap:{"rendering-change":!0,"mosaic-rule-change":!0},constructor:function(a,b){this.useMapTime=b&&b.hasOwnProperty("useMapTime")?!!b.useMapTime:!0},_initialize:function(a,b){this._url=A.urlToObject(a);this.raster=new L(a);this.infoTemplate=b&&b.infoTemplate;var c=b&&b.imageServiceParameters;
this.format=c&&c.format;this.compressionTolerance=c&&c.compressionTolerance?c.compressionTolerance:0.01;this.interpolation=c?c.interpolation:null;this.compressionQuality=c?c.compressionQuality:null;this.bandIds=c?c.bandIds:null;this.mosaicRule=c?c.mosaicRule:null;this.renderingRule=c?c.renderingRule:null;this.useMapDimensionValue=b&&b.hasOwnProperty("useMapDimensionValue")?!!b.useMapDimensionValue:!0;this.activeMapDimensions=b&&b.activeMapDimensions;this._params=t.mixin({},this._url.query,{f:"image",
interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},c?c.toJson():{});this.pixelFilter=b&&b.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=t.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=t.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=t.hitch(this,this._initLayer);this._queryVisibleRastersHandler=
t.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._loadCallback=b&&b.loadCallback;(c=b&&b.resourceInfo)?this._initLayer(c):m({url:this._url.path,content:t.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(a,b){if(!(null===a||void 0===a)){this._findCredential();(this.credential&&
this.credential.ssl||a&&a._ssl)&&this._useSSL();var c=this.minScale,v=this.maxScale;t.mixin(this,a);this.minScale=c;this.maxScale=v;this.initialExtent=this.fullExtent=this.extent=new x(a.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);for(var d=this.minValues,e=this.maxValues,l=this.meanValues,f=this.stdvValues,r=this.bands=[],c=0,v=this.bandCount;c<v;c++)r[c]={min:d[c],max:e[c],mean:l[c],stddev:f[c]};
this.timeInfo=(c=this.timeInfo)&&c.timeExtent?new P(c):null;v=this.fields=[];if(d=a.fields)for(c=0;c<d.length;c++)v.push(new K(d[c]));this.version=a.currentVersion;this.version||(this.version="fields"in a||"objectIdField"in a||"timeInfo"in a?10:9.3);g.isDefined(a.minScale)&&!this._hasMin&&this.setMinScale(a.minScale);g.isDefined(a.maxScale)&&!this._hasMax&&this.setMaxScale(a.maxScale);c={};a.defaultMosaicMethod?(c.method=a.defaultMosaicMethod,c.operation=a.mosaicOperator,c.sortField=a.sortField,c.sortValue=
a.sortValue):c.method=F.METHOD_NONE;this.defaultMosaicRule=new F(c);this.defaultMosaicRule.ascending=!0;this._setDefaultRenderingRule(!0);this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(t.hitch(this,function(f){f&&(f.features&&0<f.features.length)&&(this._rasterAttributeTableFeatures=t.clone(f.features));f&&(f.fields&&
0<f.fields.length)&&(this._rasterAttributeTableFields=t.clone(f.fields))}));this._isVectorData()&&!g.isDefined(this.pixelFilter)&&(this.vectorFieldPixelFilter=new G,this.vectorFieldPixelFilter.isDataUV="esriImageServiceDataTypeVector-UV"===this.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,this.getKeyProperties().then(t.hitch(this,this._setFlowRepresentation)));this.loaded=!0;this.onLoad(this);if(c=this._loadCallback)delete this._loadCallback,c(this)}},
getKeyProperties:function(){var a=this._url.path+"/keyProperties",c=new b(w._dfdCanceller);10<this.version?(c._pendingDfd=m({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),c._pendingDfd.then(function(a){c.callback(a)},function(a){c.errback(a)})):(a=Error("Layer does not have key properties"),a.log=q.isDebug,c.errback(a));return c},getRasterAttributeTable:function(){var a=this._url.path+"/rasterAttributeTable",c=new b(w._dfdCanceller);10<this.version&&this.hasRasterAttributeTable?
(c._pendingDfd=m({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),c._pendingDfd.then(function(a){c.callback(a)},function(a){c.errback(a)})):(a=Error("Layer does not support raster attribute table"),a.log=q.isDebug,c.errback(a));return c},_getRasterAttributeTableFeatures:function(){var a=new b;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return a.resolve(this._rasterAttributeTableFeatures),a;if(10<this.version&&this.hasRasterAttributeTable)return a=
this.getRasterAttributeTable(),a.then(t.hitch(this,function(a){a&&(a.features&&0<a.features.length)&&(this._rasterAttributeTableFeatures=t.clone(a.features))})),a;a.resolve(this._rasterAttributeTableFeatures);return a},getCustomRasterFields:function(a){var b=a?a.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;a=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var c={name:this._rasterFieldPrefix+"ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:a},
v={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:a},d={name:this._rasterFieldPrefix+"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},e=this.fields?t.clone(this.fields):[];a=e.length;e[a]=v;if(10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||!this.rasterFunctionInfos.length||this._isRasterFunctionInfoAvailable("none")))a++,
e[a]=d;if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)a++,e[a]=c;if(g.isDefined(this.pixelFilter)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType))c={name:this._rasterFieldPrefix+"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},v={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},
a++,e[a]=c,a++,e[a]=v;this._rasterAttributeTableFields&&0<this._rasterAttributeTableFields.length&&(a=n.filter(this._rasterAttributeTableFields,function(f){return"esriFieldTypeOID"!==f.type&&"value"!==f.name.toLowerCase()}),a=n.map(a,function(f){var a=t.clone(f);a.name=b+f.name;return a}),e=e.concat(a));var l=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&n.forEach(this.rasterFunctionInfos,function(f){f&&(f.name&&"none"!==f.name.toLowerCase())&&
(f={name:l+f.name.replace(/ /gi,"_"),alias:f.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},e.push(f))});return e},_prepareGetImageParameters:function(a,b,c,v){v=g.isDefined(v)?v:this._params;var d=a.spatialReference.wkid||u.toJson(a.spatialReference.toJson(!1));delete v._ts;t.mixin(v,{bbox:a.xmin+","+a.ymin+","+a.xmax+","+a.ymax,imageSR:d,bboxSR:d,size:b+","+c},this.disableClientCaching?{_ts:(new Date).getTime()}:{});delete v.compressionTolerance;v.format&&"LERC"===v.format.toUpperCase()&&
(v.compressionTolerance=this.compressionTolerance);v.token=this._getToken()},getImageUrl:function(a,b,e,v,h){h=g.isDefined(h)?h:this._params;this._prepareGetImageParameters(a,b,e,h);a=t.clone(h);this._cleanupRequestParams(a);b=this._url.path+"/exportImage?";e=A.addProxy(b+c.objectToQuery(t.mixin(a,{f:"image"})));var z=a.token;e.length>d.defaults.io.postLength||this.useMapImage?this._jsonRequest=m({url:b,content:t.mixin(a,{f:"json"}),callbackParamName:"callback",load:function(a,f){var b=a.href;z&&
(b+=-1===b.indexOf("?")?"?token\x3d"+z:"\x26token\x3d"+z);v(A.addProxy(b))},error:this._errorHandler}):v(e)},onRenderingChange:function(){},onMosaicRuleChange:function(){},setInterpolation:function(a,b){this.interpolation=this._params.interpolation=a;b||this.refresh(!0)},setCompressionQuality:function(a,b){this.compressionQuality=this._params.compressionQuality=a;b||this.refresh(!0)},setCompressionTolerance:function(a,b){this.compressionTolerance=a;b||this.refresh(!0)},setBandIds:function(a,b){var c=
!1;this.bandIds!==a&&(c=!0);this.bandIds=a;this._params.bandIds=a.join(",");if(c&&!b)this.onRenderingChange();b||this.refresh(!0)},setDefaultBandIds:function(a){this.bandIds=this._params.bandIds=null;a||this.refresh(!0)},setDisableClientCaching:function(a){this.disableClientCaching=a},setMosaicRule:function(a,b){var c=!1;this.mosaicRule!==a&&(c=!0);this.mosaicRule=a;this._params.mosaicRule=u.toJson(a.toJson());if(c&&!b)this.onMosaicRuleChange();b||this.refresh(!0)},setRenderingRule:function(a,b){var c=
!1;this.renderingRule!==a&&(c=!0);this.renderingRule=a;this._params.renderingRule=a?u.toJson(a.toJson()):null;if(c&&!b)this.onRenderingChange();b||this.refresh(!0)},setImageFormat:function(a,b){this.format=this._params.format=a;b||this.refresh(!0)},setInfoTemplate:function(a){this.infoTemplate=a},setDefinitionExpression:function(a,b){var c=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?c=this.defaultMosaicRule.toJson():c.method=F.METHOD_NONE);c.where=a;c=new F(c);
this.setMosaicRule(c,b);return this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null},setPixelFilter:function(a){this.pixelFilter=a},getPixelData:function(a){return a?(this._useBrowserDecoding()&&(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),this.originalPixelData):this.pixelData},redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},queryVisibleRasters:function(a,
c,d,v){var e=this._map,g=w._fixDfd(new b(w._dfdCanceller));this._visibleRasters=[];var l,f,r=!0,k=this.infoTemplate?this.infoTemplate.info:null,B=k?this.infoTemplate.info.fieldInfos:null;if(B&&0<B.length){r=!1;for(l=0;l<B.length;l++)if((f=B[l])&&f.fieldName.toLowerCase()!==this._rasterFieldPrefix.toLowerCase()+"servicepixelvalue"&&(f.visible||k.title&&-1<k.title.toLowerCase().indexOf(f.fieldName.toLowerCase()))){r=!0;break}}var H=(f=this._removeVisualizationStretchFunction(this.renderingRule))&&f.functionName,
J=[];if(10.4<=this.version){var Q=!1;if(this.rasterFunctionInfos&&B){var S=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;n.forEach(this.rasterFunctionInfos,function(f){var a=S+f.name.replace(/ /gi,"_");n.some(B,function(f){return f.visible&&f.fieldName===a})&&(Q=Q||H&&H===f.name,J.push(new y({rasterFunction:f.name})))})}f&&!Q&&J.push(f)}l=new T;l.geometry=a.geometry;l.returnGeometry=this._map.spatialReference.equals(this.spatialReference);l.returnCatalogItems=r;l.timeExtent=a.timeExtent;
l.mosaicRule=this.mosaicRule||null;l.renderingRule=10.4>this.version&&f||null;l.renderingRules=J||null;e&&(a=new C((e.extent.xmax-e.extent.xmin)/(2*e.width),(e.extent.ymax-e.extent.ymin)/(2*e.height),e.extent.spatialReference),l.pixelSize=a);c.requestParams=l;var h=this;a=new M(this.url);(g._pendingDfd=a.execute(l)).addCallbacks(function(f){h._queryVisibleRastersHandler(f,c,d,v,g)},function(f){h._resolve([f],null,v,g,!0)});return g},_queryVisibleRastersHandler:function(a,b,c,v,d){function e(){var a=
this.getCustomRasterFields(b),B=this._getDomainFields(a),v=b?b.returnDomainValues:!1,H=b&&b.rasterAttributeTableFieldPrefix,J,Q,z,S,h,m,X,s,u;this._getRasterAttributeTableFeatures().then(t.hitch(this,function(a){for(J=0;J<k.length;J++){M=k[J];M.setInfoTemplate(this.infoTemplate);M._layer=this;if(l){u=l.replace(/ /gi,"").split(",");Q=l;z=u;r&&r.length>=J&&(Q=r[J].replace(/ /gi,", "),z=r[J].split(" "));M.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=z;M.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=
u;f&&(M.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=f.replace(/ /gi,"").split(","));if(this.pixelFilter){var b=new D({height:1,width:1,pixelType:"F32",pixels:[],statistics:[]});n.forEach(z,function(f){b.addData({pixels:[f],statistics:{minValue:f,maxValue:f,noDataValue:null}})});this.pixelFilter({pixelBlock:b,extent:new x(0,0,0,0,this._map.spatialReference)});if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)M.attributes[this._rasterFieldPrefix+
"Magnitude"]=b.pixels[0][0],M.attributes[this._rasterFieldPrefix+"Direction"]=b.pixels[1][0]}n.forEach(q,function(f){M.attributes[f.name]=f.value});if(a&&0<a.length&&(S=n.filter(a,function(f){if(f&&f.attributes)return f.attributes.hasOwnProperty("Value")?f.attributes.Value==Q:f.attributes.VALUE==Q}),0<S.length&&(h=t.clone(S[0]),H&&h))){s={};for(m in h.attributes)h.attributes.hasOwnProperty(m)&&(X=H+m,s[X]=h.attributes[m]);h.attributes=s;M.attributes=t.mixin(M.attributes,h.attributes)}}v&&(B&&0<B.length)&&
n.forEach(B,function(f){if(f){var a=M.attributes[f.name];g.isDefined(a)&&(a=this._getDomainValue(f.domain,a),g.isDefined(a)&&(M.attributes[f.name]=a))}},this);N.push(M);this._visibleRasters.push(M)}this._resolve([N,null,!0],null,c,d)}))}var l=a.value,f=a.value,r,k,B=0,H=0,J=this,Q=this.objectIdField,S,h,q=[];v=b.requestParams.renderingRules;var s=a.processedValues,w=this.renderingRule&&dojo.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());if(v&&s&&v.length===s.length){var A=
this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;n.forEach(v,function(f,a){if(f.functionName){var b={name:A+f.functionName.replace(/ /gi,"_"),value:s[a].replace(/ /gi,"").split(",")};q.push(b);w&&w===dojo.toJson(f.toJson())&&(l=s[a])}})}v=this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:!0;if(a.catalogItems){var y=0,G,C,K=a.catalogItems.features.length;
h=0;k=Array(K);r=Array(K);S=Array(K);for(B=0;B<K;B++)-1<a.properties.Values[B].toLowerCase().indexOf("nodata")&&h++;G=K-h;for(B=0;B<K;B++)h=!0,-1<a.properties.Values[B].toLowerCase().indexOf("nodata")?(C=G++,v||(h=!1,k.length--,r.length--,S.length--)):C=y++,h&&(k[C]=a.catalogItems.features[B],r[C]=a.properties.Values[B],S[C]=k[C].attributes[Q])}this._visibleRasters=[];var M;if((a=-1<l.toLowerCase().indexOf("nodata"))&&!v)k=[],r=[],S=[];l&&(!k&&!a)&&(Q="ObjectId",k=[],M=new R(new x(this.fullExtent),
null,{ObjectId:0}),k.push(M));var N=[];k?!this._map.spatialReference.equals(this.spatialReference)&&S&&0<S.length?m({url:this._url.path+"/query",content:{f:"json",objectIds:S.join(","),returnGeometry:!0,outSR:u.toJson(J._map.spatialReference.toJson()),outFields:Q},handleAs:"json",callbackParamName:"callback",load:function(f){if(0===f.features.length)J._resolve([N,null,null],null,c,d);else{for(B=0;B<f.features.length;B++)for(H=0;H<k.length;H++)k[H].attributes[Q]==f.features[B].attributes[Q]&&(k[H].geometry=
new E(f.features[B].geometry),k[H].geometry.setSpatialReference(J._map.spatialReference));e.call(J)}},error:function(f){J._resolve([N,null,null],null,c,d)}}):e.call(this):this._resolve([N,null,null],null,c,d)},getVisibleRasters:function(){var a=this._visibleRasters,b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},_getDomainFields:function(a){if(a){var b=[];n.forEach(a,function(a){if(a.domain){var v={};v.name=a.name;v.domain=a.domain;b.push(v)}});return b}},_getDomainValue:function(a,
b){if(a&&a.codedValues){var c;n.some(a.codedValues,function(a){return a.code===b?(c=a.name,!0):!1});return c}},_requestData:function(a,b,c){this._rasterReadPromise&&this._rasterReadPromise.cancel();a=t.clone(a);var v=a._normalize(!0);this._prepareGetImageParameters(v,b,c);b=t.clone(this._params);this._cleanupRequestParams(b);b.extent=a;c=null;this._useBrowserDecoding()&&(c=new N({ctx:this._context}));b={imageServiceParameters:b,nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,decodeFunc:c?
t.hitch(c,"decode"):null};this._rasterReadPromise=this.raster.read(b,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(a){if(!this._rasterReadPromise||!this._rasterReadPromise.isCanceled())this.originalPixelData=a,this.hasDataChanged=!0,this._setPixelData(a)},_setPixelData:function(a){a=this._clonePixelData(a);this.pixelFilter&&this.pixelFilter(a);this.pixelData=a;if(!this._rasterReadPromise||!this._rasterReadPromise.isCanceled())this._drawPixelData(),this._rasterReadPromise=
null},_drawPixelData:function(){},_requestDataErrorHandler:function(a){},_clonePixelData:function(a){if(null===a||void 0===a)return a;var b={};a.extent&&(b.extent=t.clone(a.extent));a=a.pixelBlock;if(null===a||void 0===a)return b;b.pixelBlock=a.clone();return b},_getPixelBlockFromCanvas:function(a,b,c){a=a.getImageData(0,0,b,c).data;for(var v=b*c,d=0,e=0,l=new Uint8Array(v),f=new Uint8Array(v),r=new Uint8Array(v),k=new Uint8Array(v),B=Infinity,H=Infinity,J=Infinity,Q=-Infinity,g=-Infinity,h=-Infinity,
m,q,n,d=0;d<v;d++)m=a[e++],q=a[e++],n=a[e++],B=B<m?B:m,Q=Q>m?Q:m,H=H<q?H:q,g=g>q?g:q,J=J<n?J:n,h=h>n?h:n,l[d]=m,f[d]=q,r[d]=n,k[d]=a[e++]&1;return new D({width:b,height:c,pixels:[l,f,r],pixelType:"U8",mask:k,statistics:[{minValue:B,maxValue:Q},{minValue:H,maxValue:g},{minValue:J,maxValue:h}]})},_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"==this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var a=
this._url.path+"/multiDimensionalInfo",c=new b(w._dfdCanceller);if(this._multidimensionalInfo)return c.resolve(this._multidimensionalInfo),c;10.3<=this.version&&this.hasMultidimensions?(c._pendingDfd=m({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),c._pendingDfd.then(t.hitch(this,function(a){this._multidimensionalInfo=a.multidimensionalInfo;c.callback(a.multidimensionalInfo)}),function(a){c.errback(a)})):(a=Error("Layer does not support multidimensional info"),a.log=q.isDebug,
c.errback(a));return c},getDefaultMultidimensionalDefinition:function(){var a,c,d,v=[],e=new b(w._dfdCanceller);if(this._defaultMultidimensionalDefinition)return e.resolve(this._defaultMultidimensionalDefinition),e;e._pendingDfd=this.getMultidimensionalInfo();e._pendingDfd.then(t.hitch(this,function(b){a=b;c=a.variables[0].dimensions;for(d in c)c.hasOwnProperty(d)&&(c[d].hasRanges&&!0==c[d].hasRanges?v.push(new I({variableName:"",dimensionName:c[d].name,isSlice:!1,values:[c[d].values[0]]})):v.push(new I({variableName:"",
dimensionName:c[d].name,isSlice:!0,values:[c[d].extent[0]]})));this._defaultMultidimensionalDefinition=v;e.callback(v)}),function(a){e.errback(a)});return e},_setDefaultMultidimensionalDefinition:function(a){var b,c={};this.getDefaultMultidimensionalDefinition().then(t.hitch(this,function(v){b=v;0<b.length&&(this.mosaicRule?(c=t.clone(this.mosaicRule),c.multidimensionalDefinition=b):this.defaultMosaicRule?(c=t.clone(this.defaultMosaicRule),c.multidimensionalDefinition=b):c=new F({multidimensionalDefinition:b}),
this.setMosaicRule(c,a))}))},_setDefaultRenderingRule:function(a){var b={};if(!this.renderingRule&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&"none"!==this.rasterFunctionInfos[0].name.toLowerCase())b.rasterFunction=this.rasterFunctionInfos[0].name;else if(!this.renderingRule&&"esri.layers.ArcGISImageServiceVectorLayer"==this.declaredClass&&10.3<this.version){var c="esriImageServiceDataTypeVector-UV"===this.serviceDataType?
7:10;b.rasterFunction="Resample";b.rasterFunctionArguments={ResamplingType:c,InputCellSize:{x:this.pixelSizeX,y:this.pixelSizeY}}}b.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new y(b),this.setRenderingRule(this.defaultRenderingRule,a))},_cleanupRequestParams:function(a){if(!a)return a;if(a.time&&a.mosaicRule){var b=new F(u.fromJson(a.mosaicRule));if(b&&b.multidimensionalDefinition&&0<b.multidimensionalDefinition.length){var c=n.filter(b.multidimensionalDefinition,function(a){return"StdTime"!==
a.dimensionName});b.multidimensionalDefinition=c;a.mosaicRule=u.toJson(b.toJson())}}var b="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent".split(" "),v;for(v in b)a.hasOwnProperty(b[v])&&delete a[b[v]];return a},_removeVisualizationStretchFunction:function(a){var b=a&&a.functionName;if(!b||"stretch"!==b.toLowerCase())return a;var c=a.functionArguments.Raster;return c&&c.functionName&&n.some(this.rasterFunctionInfos,function(a){return c.functionName===a.name})?
c:a},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType},_isVectorData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType},_isRasterFunctionInfoAvailable:function(a){return n.some(a&&(this.rasterFunctionInfos||[]),function(b){return b&&b.name&&
b.name.toLowerCase()===a.toLowerCase()})},_createPixelData:function(a){a=new D({width:2,height:2,pixels:a,pixelType:this.pixelType,statistics:a});var b=this.fullExtent.getCenter(),b=new x(b.x,b.y,b.x+this.pixelSizeX,b.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:a,extent:b}},_resolve:function(a,b,c,v,d){b&&this[b].apply(this,a);c&&c.apply(null,a);v&&w._resDfd(v,a,d)},_toggleTime:function(){var a=this._map;this.timeInfo&&this.useMapTime&&a&&!this.suspended?(this._timeConnect||(this._timeConnect=
s.connect(a,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(a.timeExtent)):(s.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(a,b){this.useMapTime=a;this._toggleTime();!b&&this._map&&this.refresh(!0)},_setTime:function(a){this._params&&(this._params.time=a?a.toJson().join(","):null)},_onTimeExtentChangeHandler:function(a){this.suspended||(this._setTime(a),this.refresh(!0))}});h("extend-esri")&&t.setObject("layers.ImageServiceLayerMixin",
e,a);return e})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point".split(" "),function(e,t,b,n,u,q){var s=e(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,multidimensionalDefinition:[],constructor:function(b){t.isObject(b)&&(t.mixin(this,b),b.mosaicMethod&&(this.method=b.mosaicMethod),this.method&&
"esri"!==this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),b.mosaicOperation&&(this.operation=b.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),b.fids&&(this.objectIds=b.fids),b.viewpoint&&(this.viewpoint=new q(b.viewpoint)),this.multidimensionalDefinition=b.multidimensionalDefinition||[])},toJson:function(){var b=null,c=this.multidimensionalDefinition?this.multidimensionalDefinition.length:
0;if(c)for(var b=[],a=0;a<c;a++)b.push("esri.layers.DimensionalDefinition"===this.multidimensionalDefinition[a].declaredClass?this.multidimensionalDefinition[a].toJson():this.multidimensionalDefinition[a]);b={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation,multidimensionalDefinition:b};return u.filter(b,
function(a){if(null!==a)return!0})},_getMethodEnum:function(b){if(b){var c=s.METHOD_NONE;switch(b.toLowerCase()){case "byattribute":c=s.METHOD_ATTRIBUTE;break;case "center":c=s.METHOD_CENTER;break;case "lockraster":c=s.METHOD_LOCKRASTER;break;case "nadir":c=s.METHOD_NADIR;break;case "northwest":c=s.METHOD_NORTHWEST;break;case "seamline":c=s.METHOD_SEAMLINE;break;case "viewpoint":c=s.METHOD_VIEWPOINT}return c}},_getOperatorEnum:function(b){if(b)switch(b.toLowerCase()){case "first":return s.OPERATION_FIRST;
case "last":return s.OPERATION_LAST;case "max":return s.OPERATION_MAX;case "min":return s.OPERATION_MIN;case "blend":return s.OPERATION_BLEND;case "mean":return s.OPERATION_MEAN;case "sum":return s.OPERATION_SUM}}});t.mixin(s,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",
OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});b("extend-esri")&&t.setObject("layers.MosaicRule",s,n);return s})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,t,b,n,u){var q=e(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,
outputPixelType:null,constructor:function(b){if(t.isObject(b)){var e=0;this.functionName=b.rasterFunction;this.functionArguments=t.clone(b.rasterFunctionArguments||b.arguments);t.mixin(this,b);if(b=this.functionArguments)if(b.Raster=this._toRasterFunction(b.Raster),b.Raster2=this._toRasterFunction(b.Raster2),b.DEM=this._toRasterFunction(b.DEM),b.FillRaster=this._toRasterFunction(b.FillRaster),b.Rasters&&b.Rasters.length)for(e=0;e<b.Rasters.length;e++)b.Rasters[e]=this._toRasterFunction(b.Rasters[e])}},
_toRasterFunction:function(b){return b&&(b.rasterFunction||b.functionName)?new q(b):b},_rfToJson:function(b){b&&"esri.layers.RasterFunction"===b.declaredClass&&(b=b.toJson());return b},toJson:function(){var b=t.clone(this.functionArguments||this.arguments);if(b&&(b.Raster=this._rfToJson(b.Raster),b.Raster2=this._rfToJson(b.Raster2),b.DEM=this._rfToJson(b.DEM),b.FillRaster=this._rfToJson(b.FillRaster),b.Rasters&&b.Rasters.length)){var e,c=[];for(e=0;e<b.Rasters.length;e++)c.push(this._rfToJson(b.Rasters[e]));
b.Rasters=c}return u.filter({rasterFunction:this.functionName,rasterFunctionArguments:b,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(a){if(null!==a&&void 0!==a)return!0})}});b("extend-esri")&&t.setObject("layers.RasterFunction",q,n);return q})},"esri/layers/DimensionalDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(e,t,b,n,u){e=e(null,{declaredClass:"esri.layers.DimensionalDefinition",
variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(b){t.isObject(b)&&t.mixin(this,b)},toJson:function(){return u.filter({variableName:this.variableName,dimensionName:this.dimensionName,values:this.values,isSlice:this.isSlice},function(b){return null!==b})}});b("extend-esri")&&t.setObject("layers.DimensionalDefinition",e,n);return e})},"esri/layers/Raster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x){var C,E,F;t=t(a,{declaredClass:"esri.layers.Raster",imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(a){if(!a)throw"Image Service URL is not defined";this.imageServiceUrl=a;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(a,c,e){var g=this,m=
new n(w._dfdCanceller);if(10>h("ie"))throw"This browser is not supported.";if(!a.imageServiceParameters)throw"Insufficient parameters to read data";var s=b.clone(a.imageServiceParameters),t=a.pixelType;u.some(this.validPixelTypes,function(a){return a===t})||(s.pixelType="F32");u.some(this.validFormats,function(a){return a.toLowerCase()===s.format.toLowerCase()})||(s.format="lerc");var x=a.decodeFunc,A;this._prepareGetImageParameters(s);m._pendingDfd=d({url:this.imageServiceUrl+"/exportImage",handleAs:"arraybuffer",
content:b.mixin(s,{f:"image"}),load:function(a){var b=s.format.toUpperCase();"BSQ"!==b&&"BIP"!==b&&(b=g._getFormat(a));if("ERROR"===b)a=Error(String.fromCharCode.apply(null,new Uint8Array(a))),a.log=q.isDebug,g._resolve([a],null,e,m,!0);else{if(void 0===x||null===x)x=g._getFormatDecoderDfd(b);x?x(a,{width:s.width,height:s.height,planes:null,pixelType:t,noDataValue:s.noData}).then(function(a){A={pixelBlock:a,extent:s.extent};g._resolve([A,s],"onRasterReadComplete",c,m)},function(a){g._resolve([a],
null,e,m,!0)}):(a=Error("Format '"+s.format+"' is not supported."),a.log=q.isDebug,g._resolve([a],null,e,m,!0))}},error:function(a){g._resolve([a],null,e,m,!0)}});return m.promise},onRasterReadComplete:function(){},_prepareGetImageParameters:function(a){if(a.size&&a.bbox){var c=a.size.split(",");a.width=parseFloat(c[0]);a.height=parseFloat(c[1]);a.extent||(c=a.bbox.split(","),a.extent=new g(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]),new m(a.bboxSR)))}else{if(!a.width||Math.floor(a.width)!==
a.width||!a.height||Math.floor(a.height)!==a.height)throw"Incorrect Image Dimensions";if(!a.extent||"esri.geometry.Extent"!==a.extent.declaredClass)throw"Incorrect extent";var c=a.extent,d=c.spatialReference.wkid||s.toJson(c.spatialReference.toJson());delete a._ts;b.mixin(a,{bbox:c.xmin+","+c.ymin+","+c.xmax+","+c.ymax,imageSR:d,bboxSR:d,size:a.width+","+a.height},a.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(a,b,c){var d=a.ymax-a.ymin,e=a.xmax-a.xmin;c>=b?a.ymax=
a.ymin+e*b/c:(e=d*c/b,a.xmax=a.xmin+e);return a},_resolve:function(a,b,c,d,e){b&&this[b].apply(this,a);c&&c.apply(null,a);d&&w._resDfd(d,a,e)},_getFormatDecoderDfd:function(a){var c=null;switch(a){case "LERC":c=this._decodeLerc;break;case "JPEG":c=this._decodeJpeg;break;case "PNG":c=this._decodePng;break;case "BSQ":c=this._decodeBsq;break;case "BIP":c=this._decodeBip}c=b.hitch(this,c);return function(a,b){var d=new n;try{var e=c(a,b);d.resolve(e)}catch(g){d.reject(g)}return d}},_getFormat:function(a){a=
new Uint8Array(a,0,10);var b="";255===a[0]&&216===a[1]?b="JPEG":137===a[0]&&80===a[1]&&78===a[2]&&71===a[3]?b="PNG":67===a[0]&&110===a[1]&&116===a[2]&&90===a[3]&&73===a[4]&&109===a[5]&&97===a[6]&&103===a[7]&&101===a[8]&&32===a[9]?b="LERC":-1<String.fromCharCode.apply(null,a).toLowerCase().indexOf("error")&&(b="ERROR");return b},_validateDecodeParams:function(a){if(!a.height||Math.floor(a.height)!==a.height)throw"Height not provided.";if(!a.width||Math.floor(a.width)!==a.width)throw"Width not provided.";
},_decodeJpeg:function(a,b){if(!C)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(b);var c=(new C).decode(a);if(c.height!==b.height||c.width!==b.width)throw"The decoded image dimensions are incorrect.";var d=[],e,g;for(e=0;e<c.pixels.length;e++)g=c.pixels[e],d.push(this._calculateBandStatistics(g));return new A({width:c.width,height:c.height,pixels:c.pixels,pixelType:"U8",mask:c.mask,statistics:d})},_decodePng:function(a,b){if(!E)throw"The png decoder module is not loaded.";
this._validateDecodeParams(b);var c=new Uint8Array(a),d=new E(c),c=new Uint8Array(4*b.width*b.height);d.copyToImageData(c,d.decodePixels());for(var e=d=0,g,e=new Uint8Array(b.width*b.height),d=0;d<b.width*b.height;d++)e[d]=c[4*d+3];for(var h=new A({width:b.width,height:b.height,pixels:[],pixelType:"U8",mask:e,statistics:[]}),d=0;3>d;d++){g=new Uint8Array(b.width*b.height);for(e=0;e<b.width*b.height;e++)g[e]=c[4*e+d];h.addData({pixels:g,statistics:this._calculateBandStatistics(g)})}return h},_decodeBsq:function(a,
b){if(!F)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(b);I=b.noDataValue;b.pixelType=L(b.pixelType);var c=F.decodeBSQ(a,{bandCount:b.planes,width:b.width,height:b.height,pixelType:y,noDataValue:I}),d=[],e,g=null;for(e=0;e<c.pixels.length;e++)g=c.pixels[e],d.push(this._calculateBandStatistics(g));return new A({width:b.width,height:b.height,pixels:c.pixels,pixelType:b.pixelType,mask:c.maskData,statistics:d})},_decodeBip:function(a,b){this._validateDecodeParams(b);I=b.noDataValue;
b.pixelType=L(b.pixelType);var c=F.decodeBIP(a,{bandCount:b.planes,width:b.width,height:b.height,pixelType:y,noDataValue:I}),d=[],e,g=null;for(e=0;e<c.pixels.length;e++)g=c.pixels[e],d.push(this._calculateBandStatistics(g));return new A({width:b.width,height:b.height,pixels:c.pixels,pixelType:b.pixelType,mask:c.maskData,statistics:d})},_decodeLerc:function(a,b){this._validateDecodeParams(b);I=b.noDataValue;b.pixelType=L(b.pixelType);for(var c=0,d,e=0,g,h=a.byteLength-10;e<h;){var m=x.decode(a,{inputOffset:e,
encodedMaskData:d,returnMask:0===c?!0:!1,returnEncodedMask:0===c?!0:!1,returnFileInfo:!0,pixelType:y,noDataValue:I}),e=m.fileInfo.eofOffset;0===c&&(d=m.encodedMaskData,g=new A({width:b.width,height:b.height,pixels:[],pixelType:b.pixelType,mask:m.maskData,statistics:[]}));c++;if(m.height!==b.height||m.width!==b.width)throw"The decoded image dimensions are incorrect";g.addData({pixels:m.pixelData,statistics:{minValue:m.minValue,maxValue:m.maxValue,noDataValue:m.noDataValue}})}return g},_calculateBandStatistics:function(a){var b=
Infinity,c=-Infinity,d=a.length,e,g=0;for(e=0;e<d;e++)g=a[e],b=g<b?g:b,c=g>c?g:c;return{minValue:b,maxValue:c}},_loadRasterFormatModules:function(){10>h("ie")||e(["./rasterFormats/JpgPlus","./rasterFormats/Png","./rasterFormats/Raw"],function(a,b,c){C=a;E=b;F=c})}});var y=null,I=null,L=function(a){"U1"===a||"U2"===a||"U4"===a||"U8"===a?(a="U8",I=Math.pow(2,8)-1,y=Uint8Array):"U16"===a?(I=I||Math.pow(2,16)-1,y=Uint16Array):"U32"===a?(I=I||Math.pow(2,32)-1,y=Uint32Array):"S8"===a?(I=I||0-Math.pow(2,
7),y=Int8Array):"S16"===a?(I=I||0-Math.pow(2,15),y=Int16Array):"S32"===a?(I=I||0-Math.pow(2,31),y=Int32Array):y=Float32Array;return a};h("extend-esri")&&b.setObject("layers.Raster",t,c);return t})},"esri/layers/PixelBlock":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],constructor:function(b){if(b){if(!b.width||Math.floor(b.width)!==
b.width)throw"PixelBlock: incorrect width";if(!b.height||Math.floor(b.height)!==b.height)throw"PixelBlock: incorrect height";if(!b.pixels||!b.statistics)throw"PixelBlock: pixel data or statistics not present";this.width=b.width;this.height=b.height;this.pixels=b.pixels;this.pixelType=b.pixelType||null;this.statistics=b.statistics;this.mask=b.mask||null}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?console.error("Inconsistent pixel data and statistics"):this.statistics.length},
addData:function(b){if(!b.pixels||!b.statistics)throw"Pixel data or statistics are not present";if(b.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(b.statistics);this.pixels.push(b.pixels)},getAsRGBA:function(){var b=new ArrayBuffer(4*this.width*this.height);switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(b);break;default:this._fillFrom8Bit(b)}return new Uint8ClampedArray(b)},
getAsRGBAFloat:function(){var b=new Float32Array(4*this.width*this.height);this._fillFrom32Bit(b);return b},clone:function(){var b=new this.constructor;b.width=this.width;b.height=this.height;b.pixelType=this.pixelType;this.mask&&(b.mask=new Uint8Array(this.mask));var e,n;if(this.pixels){b.pixels=[];n=this.pixels.length;for(e=0;e<n;e++)b.pixels[e]=new Float32Array(this.pixels[e])}if(this.statistics){b.statistics=[];n=this.statistics.length;for(e=0;e<n;e++)b.statistics[e]=t.clone(this.statistics[e])}return b},
_fillFrom8Bit:function(b){var e=this.pixels,n=this.mask;if(!b||!e||!e.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");var h,c,a;h=c=a=e[0];3<=e.length&&(c=e[1],a=e[2]);var e=new Uint32Array(b),d=this.width*this.height;if(h.length!==d)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");if(n&&n.length===d)for(b=0;b<d;b++)n[b]&&(e[b]=-16777216|a[b]<<16|c[b]<<8|h[b]);else for(b=0;b<d;b++)e[b]=-16777216|a[b]<<16|c[b]<<8|h[b]},_fillFromNon8Bit:function(b){var e=
this.pixels,n=this.mask,h=this.statistics;if(!b||!e||!e.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");var c=1,a=0;h&&0<h.length?(a=h[0].minValue,c=255/(h[0].maxValue-h[0].minValue)):(c=255,"S8"===this.pixelType?(a=-128,c=127):"U16"===this.pixelType?c=65535:"S16"===this.pixelType?(a=-32768,c=32767):"U32"===this.pixelType?c=4294967295:"S32"===this.pixelType?(a=-2147483648,c=2147483647):"F32"===this.pixelType?(a=-3.4*1E39,c=3.4*1E39):"F64"===this.pixelType&&
(a=-Number.MAX_VALUE,c=Number.MAX_VALUE),c=255/(c-a));b=new Uint32Array(b);var h=this.width*this.height,d,g,m;d=e[0];if(d.length!==h)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");if(3<=e.length)if(g=e[1],m=e[2],n&&n.length===h)for(e=0;e<h;e++)n[e]&&(b[e]=-16777216|(m[e]-a)*c<<16|(g[e]-a)*c<<8|(d[e]-a)*c);else for(e=0;e<h;e++)b[e]=-16777216|(m[e]-a)*c<<16|(g[e]-a)*c<<8|(d[e]-a)*c;else if(n&&n.length===h)for(e=0;e<h;e++)g=(d[e]-a)*c,n[e]&&(b[e]=-16777216|g<<16|g<<8|g);
else for(e=0;e<h;e++)g=(d[e]-a)*c,b[e]=-16777216|g<<16|g<<8|g},_fillFrom32Bit:function(b){var e=this.pixels,n=this.mask;if(!b||!e||!e.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");var h,c,a;h=c=a=e[0];3<=e.length&&(c=e[1],a=e[2]);var d=this.width*this.height;if(h.length!==d)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");var g=0;if(n&&n.length===d)for(e=0;e<d;e++)b[g++]=h[e],b[g++]=c[e],b[g++]=a[e],b[g++]=n[e];else for(e=0;e<
d;e++)b[g++]=h[e],b[g++]=c[e],b[g++]=a[e],b[g++]=255}});b("extend-esri")&&t.setObject("layers.PixelBlock",e,n);return e})},"esri/layers/rasterFormats/LercCodec":function(){define([],function(){var e={defaultNoDataValue:-3.4027999387901484E38,decode:function(b,n){var u;n=n||{};var q=n.inputOffset||0,s=n.encodedMaskData||null===n.encodedMaskData,h={},c=new Uint8Array(b,q,10);h.fileIdentifierString=String.fromCharCode.apply(null,c);if("CntZImage"!=h.fileIdentifierString.trim())throw"Unexpected file identifier string: "+
h.fileIdentifierString;var q=q+10,a=new DataView(b,q,24);h.fileVersion=a.getInt32(0,!0);h.imageType=a.getInt32(4,!0);h.height=a.getUint32(8,!0);h.width=a.getUint32(12,!0);h.maxZError=a.getFloat64(16,!0);q+=24;if(!s)if(a=new DataView(b,q,16),h.mask={},h.mask.numBlocksY=a.getUint32(0,!0),h.mask.numBlocksX=a.getUint32(4,!0),h.mask.numBytes=a.getUint32(8,!0),h.mask.maxValue=a.getFloat32(12,!0),q+=16,0<h.mask.numBytes){var s=new Uint8Array(Math.ceil(h.width*h.height/8)),a=new DataView(b,q,h.mask.numBytes),
c=a.getInt16(0,!0),d=2,g=0;do{if(0<c)for(;c--;)s[g++]=a.getUint8(d++);else for(var m=a.getUint8(d++),c=-c;c--;)s[g++]=m;c=a.getInt16(d,!0);d+=2}while(d<h.mask.numBytes);if(-32768!==c||g<s.length)throw"Unexpected end of mask RLE encoding";h.mask.bitset=s;q+=h.mask.numBytes}else 0==(h.mask.numBytes|h.mask.numBlocksY|h.mask.maxValue)&&(s=new Uint8Array(Math.ceil(h.width*h.height/8)),h.mask.bitset=s);a=new DataView(b,q,16);h.pixels={};h.pixels.numBlocksY=a.getUint32(0,!0);h.pixels.numBlocksX=a.getUint32(4,
!0);h.pixels.numBytes=a.getUint32(8,!0);h.pixels.maxValue=a.getFloat32(12,!0);q+=16;s=h.pixels.numBlocksX;c=h.pixels.numBlocksY;s+=0<h.width%s?1:0;c+=0<h.height%c?1:0;h.pixels.blocks=Array(s*c);d=1E9;for(m=g=0;m<c;m++)for(var w=0;w<s;w++){var A=0,a=new DataView(b,q,Math.min(10,b.byteLength-q)),x={};h.pixels.blocks[g++]=x;var C=a.getUint8(0);A++;x.encoding=C&63;if(3<x.encoding)throw"Invalid block encoding ("+x.encoding+")";if(2===x.encoding)q++,d=Math.min(d,0);else{if(0!==C&&2!==C){C>>=6;x.offsetType=
C;if(2===C)x.offset=a.getInt8(1),A++;else if(1===C)x.offset=a.getInt16(1,!0),A+=2;else if(0===C)x.offset=a.getFloat32(1,!0),A+=4;else throw"Invalid block offset type";d=Math.min(x.offset,d);if(1===x.encoding)if(C=a.getUint8(A),A++,x.bitsPerPixel=C&63,C>>=6,x.numValidPixelsType=C,2===C)x.numValidPixels=a.getUint8(A),A++;else if(1===C)x.numValidPixels=a.getUint16(A,!0),A+=2;else if(0===C)x.numValidPixels=a.getUint32(A,!0),A+=4;else throw"Invalid valid pixel count type";}q+=A;if(3!=x.encoding)if(0===
x.encoding){a=(h.pixels.numBytes-1)/4;if(a!==Math.floor(a))throw"uncompressed block has invalid length";A=new ArrayBuffer(4*a);C=new Uint8Array(A);C.set(new Uint8Array(b,q,4*a));A=new Float32Array(A);for(C=0;C<A.length;C++)d=Math.min(d,A[C]);x.rawData=A;q+=4*a}else 1===x.encoding&&(a=Math.ceil(x.numValidPixels*x.bitsPerPixel/8),A=Math.ceil(a/4),A=new ArrayBuffer(4*A),C=new Uint8Array(A),C.set(new Uint8Array(b,q,a)),x.stuffedData=new Uint32Array(A),q+=a)}}h.pixels.minValue=d;h.eofOffset=q;var q=null!=
n.noDataValue?n.noDataValue:e.defaultNoDataValue,c=n.encodedMaskData,A=n.returnMask,d=0,g=h.pixels.numBlocksX,m=h.pixels.numBlocksY,w=Math.floor(h.width/g),x=Math.floor(h.height/m),a=2*h.maxZError,c=c||(h.mask?h.mask.bitset:null),E,s=new (n.pixelType||Float32Array)(h.width*h.height);A&&c&&(E=new Uint8Array(h.width*h.height));for(var A=new Float32Array(w*x),F,y,C=0;C<=m;C++){var I=C!==m?x:h.height%m;if(0!==I)for(var L=0;L<=g;L++){var D=L!==g?w:h.width%g;if(0!==D){var G=C*h.width*x+L*w,N=h.width-D,
P=h.pixels.blocks[d],K,R;if(2>P.encoding){if(0===P.encoding)K=P.rawData;else{K=P.stuffedData;R=P.bitsPerPixel;F=P.numValidPixels;y=P.offset;var M=a,T=A,U=h.pixels.maxValue,V=(1<<R)-1,W=0,v=void 0,O=0,z=void 0,l=void 0,f=Math.ceil((U-y)/M),v=4*K.length-Math.ceil(R*F/8);K[K.length-1]<<=8*v;for(v=0;v<F;v++)0===O&&(l=K[W++],O=32),O>=R?(z=l>>>O-R&V,O-=R):(O=R-O,z=(l&V)<<O&V,l=K[W++],O=32-O,z+=l>>>O),T[v]=z<f?y+z*M:U;K=A}R=0}else u=2===P.encoding?0:P.offset;var r;if(c)for(y=0;y<I;y++){G&7&&(r=c[G>>3],r<<=
G&7);for(F=0;F<D;F++)G&7||(r=c[G>>3]),r&128?(E&&(E[G]=1),s[G++]=2>P.encoding?K[R++]:u):(E&&(E[G]=0),s[G++]=q),r<<=1;G+=N}else if(2>P.encoding)for(y=0;y<I;y++){for(F=0;F<D;F++)s[G++]=K[R++];G+=N}else for(y=0;y<I;y++){for(F=0;F<D;F++)s[G++]=u;G+=N}if(1===P.encoding&&R!==P.numValidPixels)throw"Block and Mask do not match";d++}}}u=E;E={width:h.width,height:h.height,pixelData:s,minValue:h.pixels.minValue,maxValue:h.pixels.maxValue,noDataValue:q};u&&(E.maskData=u);n.returnEncodedMask&&h.mask&&(E.encodedMaskData=
h.mask.bitset?h.mask.bitset:null);if(n.returnFileInfo&&(E.fileInfo=t(h),n.computeUsedBitDepths)){u=E.fileInfo;r=h.pixels.numBlocksX*h.pixels.numBlocksY;K={};for(R=0;R<r;R++)q=h.pixels.blocks[R],0===q.encoding?K.float32=!0:1===q.encoding?K[q.bitsPerPixel]=!0:K[0]=!0;h=Object.keys(K);u.bitDepths=h}return E}},t=function(b){return{fileIdentifierString:b.fileIdentifierString,fileVersion:b.fileVersion,imageType:b.imageType,height:b.height,width:b.width,maxZError:b.maxZError,eofOffset:b.eofOffset,mask:b.mask?
{numBlocksX:b.mask.numBlocksX,numBlocksY:b.mask.numBlocksY,numBytes:b.mask.numBytes,maxValue:b.mask.maxValue}:null,pixels:{numBlocksX:b.pixels.numBlocksX,numBlocksY:b.pixels.numBlocksY,numBytes:b.pixels.numBytes,maxValue:b.pixels.maxValue,minValue:b.pixels.minValue,noDataValue:this.noDataValue}}};return e})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),function(e,t,b,n,u,q){e=e(null,
{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(b){t.mixin(this,b);this.isDataUV=b&&b.isDataUV?b.isDataUV:!1;this.computeMagnitudeAndDirection=t.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},setUnits:function(b,e){this.inputUnit=b;this.outputUnit=e;this.unitConversionFactor=1;this._updateUnitConvFactor()},
_updateUnitConvFactor:function(){var b=q.indexOf(this.speedUnits,this.inputUnit),e=q.indexOf(this.speedUnits,this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=b&&0<=e){var c=[1,0.277778,0.514444,0.3048,0.44704,0];this.unitConversionFactor=c[b]/c[e]}},computeMagnitudeAndDirection:function(b){if(!u.isDefined(b))throw"Could not compute magnitude and direction. No pixel data is available.";var e=b.pixelBlock;if(!u.isDefined(e)||2!==e.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";
var c=b.extent,a=(c.xmax-c.xmin)/e.width,d=(c.ymax-c.ymin)/e.height,g=c.xmin+a/2,c=c.ymax-d/2;e.statistics[0].minValue=0;e.statistics[0].maxValue=0;var m=180/Math.PI,q=[],n=0,t=0,C=0,E=!u.isDefined(e.mask),F,y,I,L,D,G,N,P;D=N=Infinity;G=P=-Infinity;for(n=0;n<e.height;n++)for(t=0;t<e.width;t++,C++)if(q.push([g+a*t,c-d*n]),E||e.mask[C])I=F=e.pixels[0][C]*this.unitConversionFactor,L=y=e.pixels[1][C],this.isDataUV&&(I=Math.sqrt(F*F+y*y),L=90-m*Math.atan2(y,F),e.pixels[0][C]=I*this.unitConversionFactor,
e.pixels[1][C]=L),I>G&&(G=I),I<D&&(D=I),L>P&&(P=L),L<N&&(N=L);e.statistics[0].maxValue=G;e.statistics[0].minValue=D;e.statistics[1].maxValue=P;e.statistics[1].minValue=N;b.locations=q;return b}});b("extend-esri")&&t.setObject("layers.pixelFilters.VectorFieldPixelFilter",e,n);return e})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define(["require","dojo/_base/declare","dojo/Deferred","dojo/sniff"],function(e,t,b,n){var u;return t(null,{constructor:function(b){this.ctx=b.ctx;this._loadRasterFormatModule()},
decode:function(e,n){if(!n.width||!n.height)throw"Native decoding requires the image format, width and height";var h=new b,c,a=new Uint8Array(e),d=this._getFormat(e);if("error"===d)throw"invalid format";"jpeg"===d&&(c=this._getMask(a,n));var g="",m,t;for(m=0;m<a.length;m+=65535)t=a.subarray(m,m+65535>a.length-1?a.length-1:m+65535),g+=String.fromCharCode.apply(null,t);var a="data:image/"+d+";base64,"+window.btoa(g),u=new Image,x;u.src=a;var C=this;u.onload=function(){C.ctx.clearRect(0,0,n.width,n.height);
C.ctx.drawImage(u,0,0);var a=C.ctx.getImageData(0,0,u.width,u.height);x=a.data;if(c)for(m=0;m<c.length;m++)x[4*m+3]=c[m]?255:0;C.ctx.putImageData(a,0,0);h.resolve(null)};u.onerror=function(){h.reject("cannot load image")};return h},_getFormat:function(b){b=new Uint8Array(b,0,10);var e="error";255===b[0]&&216===b[1]?e="jpeg":137===b[0]&&(80===b[1]&&78===b[2]&&71===b[3])&&(e="png");return e},_getMask:function(b,e){var h;try{if(!u)throw"The zlib decoder module is not loaded.";var c=0,a=0,d=Math.round(b.length/
2);1===d%2&&(d+=1);for(var g=b.length-2,c=d;c<g&&!(255===b[c]&&217===b[c+1]);c++);d=c+=2;if(d<b.length-1){var m=(new u(b.subarray(d))).getBytes();h=new Uint8Array(e.width*e.height);for(c=d=0;c<m.length;c++)for(a=7;0<=a;a--)h[d++]=m[c]>>a&1}}catch(n){}return h},_loadRasterFormatModule:function(){10>n("ie")||e(["./Zlib"],function(b){u=b})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),
function(e,t,b,n,u,q,s,h){e=e(s,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(b){this._url.path+="/identify";this._handler=t.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(b,a,d,e,m){try{var q=new h(b);this._successHandler([q],"onComplete",d,m)}catch(n){this._errorHandler(n,e,m)}},execute:function(b,a,d,e){var h=e.assembly;b=this._encode(t.mixin({},this._url.query,{f:"json"},b.toJson(h&&h[0])));var q=this._handler,
n=this._errorHandler;return u({url:this._url.path,content:b,callbackParamName:"callback",load:function(b,c){q(b,c,a,d,e.dfd)},error:function(a){n(a,d,e.dfd)}})},onComplete:function(){}});q._createWrappers(e);b("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyTask",e,n);return e})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),function(e,t,b,n,u,q){e=e(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",
constructor:function(b){b.catalogItems&&(this.catalogItems=new q(b.catalogItems));b.location&&(this.location=u.fromJson(b.location));this.catalogItemVisibilities=b.catalogItemVisibilities;this.name=b.name;this.objectId=b.objectId;this.value=b.value;this.processedValues=b.processedValues;this.properties=b.properties}});b("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyResult",e,n);return e})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),
function(e,t,b,n,u,q,s,h){e=e(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,toJson:function(c){var a=c&&c.geometry||this.geometry;c={geometry:a,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?b.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?
b.toJson(this.renderingRule.toJson()):null};a&&(c.geometryType=h.getJsonType(a));a=this.timeExtent;c.time=a?a.toJson().join(","):null;s.isDefined(this.pixelSizeX)&&s.isDefined(this.pixelSizeY)?c.pixelSize=b.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(c.pixelSize=this.pixelSize?b.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(c.renderingRules=b.toJson(n.map(this.renderingRules,function(a){return a.toJson()})));return c}});u("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyParameters",
e,q);return e})},"esri/virtualearth/VETiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/_base/config dojo/has dojo/string dojo/_base/Deferred ../kernel ../urlUtils ../SpatialReference ../layers/TileInfo ../layers/TiledMapServiceLayer ../geometry/Extent ../request".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A){e=e(m,{declaredClass:"esri.virtualearth.VETiledLayer",constructor:function(b){try{b=t.mixin({bingMapsKey:null,culture:"en-US"},b||{});
var c=window.location.protocol;"file:"===c&&(c="http:");this.url=c+"//dev.virtualearth.net/REST/v1";this._url=a.urlToObject(this.url);this.spatialReference=new d({wkid:102100});this.tileInfo=new g({rows:256,cols:256,dpi:96,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,
resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,
scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]});this.initialExtent=this.fullExtent=new w(-2.0037508342787E7,-2.003750834278E7,
2.003750834278E7,2.0037508342787E7,new d({wkid:102100}));t.mixin(this,b);this.hasAttributionData=this.showAttribution;this._initLayer=t.hitch(this,this._initLayer);this._errorHandler=t.hitch(this,this._errorHandler);this._getTileInfo=t.hitch(this,this._getTileInfo);if(this.bingMapsKey)this._getTileInfo();else throw Error("BingMapsKey must be provided.");}catch(e){throw this.onError(e),e;}},_unsetMap:function(a,b){this.inherited("_unsetMap",arguments)},_getTileInfo:function(){if(this.mapStyle){var a=
this._url.path+"/Imagery/Metadata/"+this.mapStyle;if(this.bingMapsKey){var b=this.resourceInfo;!this.loaded&&b?this._initLayer(b):A({url:a,content:t.mixin({},{key:this.bingMapsKey,ss:!0,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,error:this._errorHandler})}}},_initLayer:function(a,c){if(200!==a.statusCode){var d=Error();d.code=a.statusCode;d.message=a.statusDescription;d.details=a.errorDetails;d.authenticationResultCode=a.authenticationResultCode;
this.onError(d)}else try{this.resourceInfo=b.toJson(a);var d=a.resourceSets[0].resources[0],e=d.imageUrl.replace("{","${");this.tileServers=n.map(d.imageUrlSubdomains,function(a){var b=window.location.protocol;"file:"===b&&(b="http:");return s.substitute(e,{subdomain:a}).replace("http:",b)});this._tsLength=this.tileServers.length;if(this.loaded)this.refresh(),this.onMapStyleChange();else{this.copyright=this.copyright||"\x26copy; 2012 Microsoft Corporation and its data suppliers";this.loaded=!0;this.onLoad(this);
var g=this.loadCallback;g&&(delete this.loadCallback,g(this))}}catch(h){this.onError(h)}},getAttributionData:function(){var a=new h,c=b.fromJson(this.resourceInfo),d;this.hasAttributionData&&c&&(d=t.getObject("resourceSets.0.resources.0.imageryProviders",!1,c));d?a.callback({contributors:d}):(c=Error("Layer does not have attribution data"),c.log=u.isDebug,a.errback(c));return a},getTileUrl:function(a,b,c){return s.substitute(this.tileServers[b%this._tsLength].replace(/\{/g,"${"),{quadkey:this._getQuadKey(a,
b,c),culture:this.culture,token:this.bingMapsKey})},_getQuadKey:function(a,b,c){var d="",e,g;for(g=a;0<g;g--)a="0",e=1<<g-1,0!=(c&e)&&a++,0!=(b&e)&&(a++,a++),d+=a;return d},setMapStyle:function(a){this.mapStyle=a;this._getTileInfo()},setCulture:function(a){this.culture=a;this._getTileInfo()},setBingMapsKey:function(a){this.bingMapsKey=a},onMapStyleChange:function(){}});t.mixin(e,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});q("extend-esri")&&t.setObject("virtualearth.VETiledLayer",
e,c);return e})},"esri/geometry/geometryEngine":function(){define("require exports esri/kernel esri/geometry/Geometry esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Point esri/geometry/Extent esri/geometry/Multipoint dojo/_base/lang".split(" "),function(e,t,b,n,u,q,s,h,c,a){function d(a){if(void 0===s.fromJson){if(void 0!==a.x&&void 0!==a.y)return new s(a);if(void 0!==a.paths)return new q(a);if(void 0!==a.rings)return new u(a);if(void 0!==a.points)return new c(a);if(void 0!==a.xmin&&void 0!==
a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new h(a)}else{if(void 0!==a.x&&void 0!==a.y)return s.fromJson(a);if(void 0!==a.paths)return q.fromJson(a);if(void 0!==a.rings)return u.fromJson(a);if(void 0!==a.points)return c.fromJson(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return h.fromJson(a)}}function g(a){if(void 0===s.fromJson){if(void 0!==a.x&&void 0!==a.y)return new s(a);if(void 0!==a.paths)return new q(a);if(void 0!==a.rings)return new u(a);if(void 0!==a.points)return new c(a);
if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new h(a)}else{if(void 0!==a.x&&void 0!==a.y)return s.fromJSON(a);if(void 0!==a.paths)return q.fromJSON(a);if(void 0!==a.rings)return u.fromJSON(a);if(void 0!==a.points)return c.fromJSON(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return h.fromJSON(a)}}function m(a,b){var c;if(null==a||void 0===a||"number"===typeof a)return a;var l=a.toString();if(""===l)return null;if(2==b){if(c=T[l],void 0!==
c)return c}else if(0==b){c=M[l];if(void 0!==c)return c;c=U[a];if(void 0!==c)return c}else if(3==b&&(c=M[l],void 0!==c))return c;if(1==b&&(c=U[a],void 0!==c))return c;if(!0===/^\d+$/.test(l))return parseInt(l);throw Error("Unrecognised Unit Type");}function w(a){if(void 0!==a&&null!==a)switch(a){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function A(a,b){if(null===a||void 0===a||a.u())return null;switch(a.F()){case y.j.Point:var d=
new s(a.lk(),a.mk(),b);if(K){var l=a.hasAttribute(y.xf.M);a.hasAttribute(y.xf.Z)&&d.set("z",a.kO());l&&d.set("m",a.MN())}return d;case y.j.Polygon:var d=a.hasAttribute(y.xf.Z),l=a.hasAttribute(y.xf.M),f=x(a,d,l),d=new u({rings:f,hasZ:d,hasM:l});K?d.set("spatialReference",b):d.setSpatialReference(b);d.setCacheValue("_geVersion",a);return d;case y.j.Polyline:return d=a.hasAttribute(y.xf.Z),l=a.hasAttribute(y.xf.M),f=x(a,d,l),d=new q({paths:f,hasZ:d,hasM:l}),K?d.set("spatialReference",b):d.setSpatialReference(b),
d.setCacheValue("_geVersion",a),d;case y.j.MultiPoint:var d=a.hasAttribute(y.xf.Z),l=a.hasAttribute(y.xf.M),r=f=null;d&&(f=a.oc(y.xf.Z));l&&(r=a.oc(y.xf.M));var k=new y.b,B=a.G(),H=new c(b);K&&(H.set("hasZ",d),H.set("hasM",l));for(var J=0;J<B;J++){a.A(J,k);var e=[k.x,k.y];d&&e.push(f.get(J));l&&e.push(r.get(J));H.addPoint(e)}H.setCacheValue("_geVersion",a);return H;case y.j.Envelope:return f=a.hasAttribute(y.xf.Z),d=a.hasAttribute(y.xf.M),l=new h(a.S.w,a.S.D,a.S.C,a.S.H,b),K&&(f&&(f=a.Ah(y.xf.Z,0),
l.set("zmin",f.ra),l.set("zmax",f.wa)),d&&(f=a.Ah(y.xf.M,0),l.set("mmin",f.ra),l.set("mmax",f.wa))),l.setCacheValue("_geVersion",a),l}return null}function x(a,b,c){var l=[],f=a.fa(),r=null,k=null;b&&(r=a.oc(y.xf.Z));c&&(k=a.oc(y.xf.M));for(var B=new y.b,H=0;H<f;H++){for(var J=a.Fa(H),d=a.Ia(H),e=0,g=0,h=NaN,m=NaN,q=NaN,n=NaN,s=a.wc(H),t=[],u=J;u<J+d;u++){a.A(u,B);var n=q=NaN,w=[B.x,B.y];b&&(q=r.get(u),w.push(q));c&&(f=k.get(u),w.push(n));u==J&&s&&(e=B.x,g=B.y,h=q,m=n);t.push(w)}!s||e==B.x&&g==B.y&&
(!b||isNaN(h)&&isNaN(q)||h==q)&&(!c||isNaN(m)&&isNaN(n)||m==n)||t.push(t[0].slice(0));l.push(t)}return l}function C(a){var b=a._geVersion;if(null==b||void 0==b){if(Object.freeze&&Object.isFrozen(a))return 102100===a.wkid?W:4326===a.wkid?V:y.Nf.create(a.wkid);-1!=a.wkid&&null!==a.wkid&&void 0!==a.wkid?(b=y.Nf.create(a.wkid),a._geVersion=b):""!==a.wkt&&void 0!==a.wkt&&null!==a.wkt&&(b=y.Nf.ML(a.wkt),a._geVersion=b)}return b}function E(a){if(null==a)return null;var b=a.getCacheValue("_geVersion");if(null==
b||void 0==b)b=y.Qb.HL(a),a.setCacheValue("_geVersion",b);return b}function F(a){return null===a.spatialReference?null:C(a.spatialReference)}var y;(function(a){var b=function(){function f(){}f.Sk=!1;f.ht=!1;f.Zv="";return f}();a.ah=b;if("undefined"!==typeof window)a.ah.Zv="browser","Float64Array"in window&&(a.ah.ht=!0),"ArrayBuffer"in window&&(a.ah.Sk=!0);else if("undefined"!==typeof process)b.Zv="node",a.ah.Sk=!0,a.ah.ht=!0;else{b.Zv="browser";try{var c=new ArrayBuffer(0);new Uint8Array(c);a.ah.Sk=
!0;a.ah.ht=!0}catch(l){a.ah.Sk=!1}}})(y||(y={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Point=33]="Point";a[a.Line=322]="Line";a[a.Envelope=197]="Envelope";a[a.MultiPoint=550]="MultiPoint";a[a.Polyline=1607]="Polyline";a[a.Polygon=1736]="Polygon"})(a.j||(a.j={}));var b=a.j;(function(a){a[a.enumMild=0]="enumMild";a[a.enumMedium=1]="enumMedium";a[a.enumHot=2]="enumHot"})(a.rH||(a.rH={}));var c=function(){function l(){this.description=null;this.Tx=0}l.prototype.F=function(){return 0};
l.prototype.gb=function(){return-1};l.prototype.Qf=function(f){this.rc();f!=this.description&&this.om(f)};l.prototype.om=function(){};l.prototype.Ik=function(f){this.rc();f!=this.description&&(f=a.Pd.PN(this.description,f),f!=this.description&&this.om(f))};l.prototype.hasAttribute=function(f){return this.description.hasAttribute(f)};l.prototype.Oe=function(f){this.rc();this.description.hasAttribute(f)||(f=a.Pd.ON(this.description,f),this.om(f))};l.prototype.Ah=function(){return null};l.prototype.Dp=
function(){};l.prototype.s=function(){};l.prototype.Dn=function(){};l.prototype.ed=function(f){this.s(f)};l.prototype.u=function(){return!0};l.prototype.Ka=function(){};l.prototype.Pe=function(){};l.prototype.Qa=function(){return null};l.prototype.copyTo=function(){};l.prototype.Mh=function(){return 0};l.prototype.ac=function(){return 0};l.prototype.WC=function(){return this.hasAttribute(1)};l.ve=function(f){return((f&192)>>6)+1>>1};l.Lm=function(f){return 0!=(f&32)};l.oT=function(f){return 0!=(f&
64)};l.RO=function(f){return 0!=(f&128)};l.Mc=function(f){return 0!=(f&256)};l.Th=function(f){return 0!=(f&512)};l.Lc=function(f){return 0!=(f&1024)};l.prototype.wm=function(){var f=this.Qa();this.copyTo(f);return f};l.prototype.Rf=function(){return null};l.Zj=function(f){var a=f.Qa();f.copyTo(a);return a};l.prototype.rc=function(){0<=this.Tx&&(this.Tx+=2147483649)};l.Uu=function(f){var r=f.F();if(l.Th(r))return f.G();if(f.u())return 0;if(r==b.Envelope)return 4;if(r==b.Point)return 1;if(l.Mc(r))return 2;
throw a.g.sa("missing type");};return l}();a.U=c})(y||(y={}));(function(a){var b=function(){function b(){this.y=this.x=0}b.Pa=function(a,f){var r=new b;r.x=a;r.y=f;return r};b.prototype.na=function(a,f){this.x=a;this.y=f};b.prototype.K=function(a){this.x=a.x;this.y=a.y};b.prototype.Bq=function(a,f){return this.x===a&&this.y===f};b.prototype.Vw=function(a){return 2.220446049250313E-16>=Math.abs(this.x-a.x)&&2.220446049250313E-16>=Math.abs(this.y-a.y)};b.prototype.vb=function(a){return this.x===a.x&&
this.y===a.y};b.prototype.mc=function(a){return a==this?!0:a instanceof b?this.x==a.x&&this.y==a.y:!1};b.prototype.sub=function(a){this.x-=a.x;this.y-=a.y};b.prototype.qc=function(a,f){this.x=a.x-f.x;this.y=a.y-f.y};b.prototype.add=function(a,f){void 0!==f?(this.x=a.x+f.x,this.y=a.y+f.y):(this.x+=a.x,this.y+=a.y)};b.prototype.zp=function(){this.x=-this.x;this.y=-this.y};b.prototype.pr=function(a){this.x=-a.x;this.y=-a.y};b.prototype.NO=function(a,f,b){this.x=a.x*(1-b)+f.x*b;this.y=a.y*(1-b)+f.y*b};
b.prototype.Er=function(a,f){this.x=this.x*a+f.x;this.y=this.y*a+f.y};b.prototype.CR=function(a,f,b){this.x=f.x*a+b.x;this.y=f.y*a+b.y};b.prototype.scale=function(a){this.x*=a;this.y*=a};b.prototype.compare=function(a){return this.y<a.y?-1:this.y>a.y?1:this.x<a.x?-1:this.x>a.x?1:0};b.prototype.normalize=function(){var a=this.length();0==a&&(this.x=1,this.y=0);this.x/=a;this.y/=a};b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};b.prototype.Sp=function(){return this.x*this.x+
this.y*this.y};b.Gb=function(a,f){return Math.sqrt(this.$b(a,f))};b.Xv=function(a,f,b,k){a-=b;f-=k;return Math.sqrt(a*a+f*f)};b.prototype.ml=function(a){return this.x*a.x+this.y*a.y};b.prototype.uA=function(a){return Math.abs(this.x*a.x)+Math.abs(this.y*a.y)};b.prototype.Ai=function(a){return this.x*a.y-this.y*a.x};b.prototype.Dr=function(a,f){var b=-this.x*f+this.y*a;this.x=this.x*a+this.y*f;this.y=b};b.prototype.st=function(){var a=this.x;this.x=-this.y;this.y=a};b.prototype.zD=function(a){this.x=
-a.y;this.y=a.x};b.prototype.Ip=function(){var a=this.x;this.x=this.y;this.y=-a};b.prototype.FA=function(){this.y=this.x=NaN};b.prototype.ov=function(){return isNaN(this.x)};b.prototype.os=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3};b.aq=function(a,f){var b=a.os(),k=f.os();return k==b?(b=a.Ai(f),0>b?1:0<b?-1:0):b<k?-1:1};b.GT=function(a,f){return b.aq(a,f)};b.$b=function(a,f){var b=a.x-f.x,k=a.y-f.y;return b*b+k*k};b.prototype.toString=function(){return"("+this.x+" , "+this.y+
")"};b.prototype.Eh=function(){this.y=this.x=NaN};b.prototype.xJ=function(){if(this.ov())return NaN;switch(0){case 0:return Math.abs(this.x)>=Math.abs(this.y)?Math.abs(this.x):Math.abs(this.y);case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:return Math.pow(Math.pow(this.x,0)+Math.pow(this.y,0),1/0)}};b.prototype.offset=function(a,f){var r=b.Gb(a,f),k=b.Pa(this.x,this.y);if(0==r)return b.Gb(k,a);var B=new b;B.K(f);B.sub(a);k.sub(a);return k.Ai(B)/
r};b.zn=function(b,f,r){var k=new a.$k;k.set(f.x);k.sub(b.x);var B=new a.$k;B.set(r.y);B.sub(b.y);var c=new a.$k;c.set(f.y);c.sub(b.y);var J=new a.$k;J.set(r.x);J.sub(b.x);k.yp(B);c.yp(J);k.sub(c);if(!k.Cq())return r=k.value(),0>r?-1:0<r?1:0;k=new a.Tn(f.x);B=new a.Tn(b.x);c=new a.Tn(b.y);k=k.mr(B);b=new a.Tn(r.y);b=b.mr(c);f=new a.Tn(f.y);f=f.mr(c);r=new a.Tn(r.x);r=r.mr(B);k=k.Up(b);f=f.Up(r);k=k.Up(f);return k.uP()?-1:k.mO()?1:0};b.prototype.ic=function(){return a.J.Rh(a.J.Rh())};return b}();a.b=
b})(y||(y={}));(function(a){var b=function(){function a(b){this.Nv=this.Nr=0;this.DS=b}a.prototype.reset=function(){this.Nv=this.Nr=0};a.prototype.add=function(a){a-=this.Nv;var f=this.Nr+a;this.Nv=f-this.Nr-a;this.Nr=f};a.prototype.sub=function(a){this.add(-a)};a.prototype.rl=function(){return this.DS+this.Nr};return a}();a.$u=b;b=function(){function a(){}a.KT=function(a,f){return 0<=f?Math.abs(a):-Math.abs(a)};a.sign=function(a){return 0>a?-1:0<a?1:0};a.gH=function(a){return a-360*Math.floor(a/
360)};a.round=function(a){return Math.floor(a+0.5)};a.Sy=function(a){return a*a};a.tt=function(a,f,b){var k;0.5>=b?k=a+(f-a)*b:k=f-(f-a)*(1-b);return k};a.BD=function(a,f,b,k){0.5>=b?(k.x=a.x+(f.x-a.x)*b,k.y=a.y+(f.y-a.y)*b):(k.x=f.x-(f.x-a.x)*(1-b),k.y=f.y-(f.y-a.y)*(1-b))};a.sP=function(a,f,b,k,B,v){0.5>=B?(v.x=a+(b-a)*B,v.y=f+(k-f)*B):(v.x=b-(b-a)*(1-B),v.y=k-(k-f)*(1-B))};return a}();a.vi=b})(y||(y={}));var I=self.__extends||function(a,b){function c(){this.constructor=a}for(var l in b)b.hasOwnProperty(l)&&
(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c};(function(a){var b=function(b){function l(){b.call(this);this.ia=this.ma=this.ka=this.oa=0;this.ga=null}I(l,b);l.prototype.Nb=function(){return a.b.Pa(this.oa,this.ka)};l.prototype.gt=function(a){a.x=this.oa;a.y=this.ka};l.prototype.fd=function(a){this.gl(0,a)};l.prototype.My=function(f,b){this.gl(0,a.b.Pa(f,b))};l.prototype.Fn=function(a){this.wA(0,a)};l.prototype.setStart=function(a){this.CA(0,a)};l.prototype.ft=function(a,b){return this.zd(0,
a,b)};l.prototype.Ly=function(a,b,k){this.pm(0,a,b,k)};l.prototype.pc=function(){return a.b.Pa(this.ma,this.ia)};l.prototype.tw=function(a){a.x=this.ma;a.y=this.ia};l.prototype.wd=function(a){this.gl(1,a)};l.prototype.Ok=function(f,b){this.gl(1,a.b.Pa(f,b))};l.prototype.Cn=function(a){this.wA(1,a)};l.prototype.setEnd=function(a){this.CA(1,a)};l.prototype.Vs=function(a,b){return this.zd(1,a,b)};l.prototype.By=function(a,b,k){this.pm(1,a,b,k)};l.prototype.gb=function(){return 1};l.prototype.u=function(){return this.tc()};
l.prototype.Ka=function(){};l.prototype.Mh=function(){return 0};l.prototype.Ha=function(a,b,k,l,v){return this.vJ(a,b,k,l,v)};l.prototype.kc=function(a,b){return 0!=this.cq(a,b,!1)};l.prototype.Dq=function(a,b){return this.ps(a,b,!1)};l.prototype.ps=function(){return null};l.prototype.tc=function(){return!1};l.prototype.qv=function(f){this.rc();if(null==this.ga&&0<f)this.ga=a.J.Lh(2*f);else if(null!=this.ga&&this.ga.length<2*f){for(var b=this.ga.slice(0),k=this.ga.length;k<2*f;k++)b[k]=0;this.ga=
b}};l.JI=function(a,b,k){if(0<k)var l=0;for(var v=0;v<k;v++)b[0+l]=a[0],l++};l.prototype.gl=function(a,b){0!=a?(this.ma=b.x,this.ia=b.y):(this.oa=b.x,this.ka=b.y)};l.prototype.om=function(f){if(null!=this.ga){for(var b=a.Pd.hu(f,this.description),k=[],B=l.Xk(this.description,0),c=l.Xk(this.description,1),J=l.Xk(f,0),d=l.Xk(f,1),e=0,g=1,z=f.Ba;g<z;g++){var h=f.Id(g),m=a.qa.Xa(h);if(-1==b[g])for(var q=a.qa.ue(h),h=0;h<m;h++)k[J+e]=q,k[d+e]=q,e++;else{q=this.description.fj(b[g])-2;for(h=0;h<m;h++)k[J+
e]=this.ga[B+q],k[d+e]=this.ga[c+q],e++,q++}}this.ga=k}this.description=f};l.prototype.wA=function(f,b){if(this.tc())throw a.g.sa("empty geometry");b.Qf(this.description);b.tc()&&b.jo();for(var k=0;k<this.description.Ba;k++)for(var l=this.description.Gd(k),c=0,J=a.qa.Xa(l);c<J;c++){var d=this.zd(f,l,c);b.setAttribute(l,c,d)}};l.prototype.CA=function(f,b){this.rc();if(b.tc())throw a.g.sa("empty geometry");for(var k=b.description,l=0,c=k.Ba;l<c;l++)for(var J=k.Gd(l),d=a.qa.Xa(J),e=0;e<d;e++){var g=
b.md(J,e);this.pm(f,J,e,g)}};l.prototype.zd=function(f,b,k){if(this.tc())throw a.g.sa("This operation was performed on an Empty Geometry.");if(0==b)return 0!=f?0!=k?this.ia:this.ma:0!=k?this.ka:this.oa;if(k>=a.qa.Xa(b))throw a.g.Vc();var B=this.description.zf(b);return 0<=B?(null!=this.ga&&this.qv(this.description.me.length-2),this.ga[l.Xk(this.description,f)+this.description.fj(B)-2+k]):a.qa.ue(b)};l.prototype.pm=function(f,b,k,B){this.rc();if(k>=a.qa.Xa(b))throw a.g.Vc();var c=this.description.zf(b);
0>c&&(this.Oe(b),c=this.description.zf(b));0==b?0!=f?0!=k?this.ia=B:this.ma=B:0!=k?this.ka=B:this.oa=B:(null==this.ga&&this.qv(this.description.me.length-2),this.ga[l.Xk(this.description,f)+this.description.fj(c)-2+k]=B)};l.prototype.copyTo=function(f){if(f.F()!=this.F())throw a.g.O();f.description=this.description;f.qv(this.description.me.length-2);l.JI(this.ga,f.ga,2*(this.description.me.length-2));f.oa=this.oa;f.ka=this.ka;f.ma=this.ma;f.ia=this.ia;f.rc();this.co(f)};l.prototype.Ah=function(f,
b){var k=new a.Od;if(this.tc())return k.Ka(),k;k.ra=this.zd(0,f,b);k.wa=k.ra;k.Pj(this.zd(1,f,b));return k};l.prototype.XE=function(a){this.tc()?a.Ka():(a.ra=this.zd(0,0,0),a.wa=a.ra,a.Pj(this.zd(1,0,0)))};l.prototype.tu=function(f,b){b.Qf(this.description);b.jc(this.Lb(f));for(var k=1,l=this.description.Ba;k<l;k++)for(var c=this.description.Gd(k),J=a.qa.Xa(c),d=0;d<J;d++){var e=this.md(f,c,d);b.setAttribute(c,d,e)}};l.prototype.rJ=function(a){if(this.description!=a.description||this.oa!=a.oa||this.ma!=
a.ma||this.ka!=a.ka||this.ia!=a.ia)return!1;for(var b=0;b<2*(this.description.me.length-2);b++)if(this.ga[b]!=a.ga[b])return!1;return!0};l.prototype.kD=function(){return this.oa==this.ma&&this.ka==this.ia};l.prototype.reverse=function(){var f=this.oa;this.oa=this.ma;this.ma=f;f=this.ka;this.ka=this.ia;this.ia=f;for(var f=1,b=this.description.Ba;f<b;f++)for(var k=this.description.Id(f),l=0,c=a.qa.Xa(k);l<c;l++){var J=this.zd(0,k,l),d=this.zd(1,k,l);this.pm(0,k,l,d);this.pm(1,k,l,J)}};l.prototype.cq=
function(f,b,k){var l=f.F();switch(this.F()){case a.j.Line:if(l==a.j.Line)return a.zb.wJ(this,f,b,k);throw a.g.xa();default:throw a.g.xa();}};l.prototype.vJ=function(f,b,k,l,c){var J=f.F();switch(this.F()){case a.j.Line:if(J==a.j.Line)return a.zb.nv(this,f,b,k,l,c);throw a.g.xa();default:throw a.g.xa();}};l.prototype.jv=function(){return null};l.Xk=function(a,b){return b*(a.me.length-2)};l.prototype.Lb=function(f,b){if(void 0===b){var k=new a.b;this.Lb(f,k);return k}a.vi.sP(this.oa,this.ka,this.ma,
this.ia,f,b)};l.prototype.Hd=function(){return null};l.prototype.TC=function(){return null};l.prototype.mt=function(){return null};l.prototype.mg=function(){return null};l.prototype.mD=function(){return null};l.prototype.Pf=function(){return null};l.prototype.rA=function(a,b){return void 0!==b?this.Qu(b)-this.Qu(a):this.Qu(a)};l.prototype.co=function(){};l.prototype.ym=function(){return null};l.prototype.Bi=function(){};l.prototype.md=function(){return null};l.prototype.xe=function(){return null};
l.prototype.Qu=function(){return null};l.prototype.AD=function(){return null};l.prototype.Gb=function(a,b){if(!b&&0!=this.cq(a,0,!1))return 0;var k=1.7976931348623157E308,l,v=0;l=this.Nb();v=a.Hd(l,!1);l.sub(a.Lb(v));l=l.length();l<k&&(k=l);l=this.pc();v=a.Hd(l,!1);l.sub(a.Lb(v));l=l.length();l<k&&(k=l);l=a.Nb();v=this.Hd(l,!1);l.sub(this.Lb(v));l=l.length();l<k&&(k=l);l=a.pc();v=this.Hd(l,!1);l.sub(this.Lb(v));l=l.length();l<k&&(k=l);return k};l.prototype.Rf=function(){return a.Hh.il(this,null)};
return l}(a.U);a.fA=b})(y||(y={}));new y.b;(function(a){(function(a){a[a.Unknown=-1]="Unknown";a[a.Not=0]="Not";a[a.Weak=1]="Weak";a[a.Strong=2]="Strong"})(a.tH||(a.tH={}));(function(a){a[a.DirtyIsKnownSimple=1]="DirtyIsKnownSimple";a[a.IsWeakSimple=2]="IsWeakSimple";a[a.IsStrongSimple=4]="IsStrongSimple";a[a.DirtyOGCFlags=8]="DirtyOGCFlags";a[a.DirtyVerifiedStreams=32]="DirtyVerifiedStreams";a[a.DirtyExactIntervals=64]="DirtyExactIntervals";a[a.DirtyLooseIntervals=128]="DirtyLooseIntervals";a[a.DirtyIntervals=
192]="DirtyIntervals";a[a.DirtyIsEnvelope=256]="DirtyIsEnvelope";a[a.DirtyLength2D=512]="DirtyLength2D";a[a.DirtyRingAreas2D=1024]="DirtyRingAreas2D";a[a.DirtyCoordinates=1993]="DirtyCoordinates";a[a.DirtyAllInternal=65535]="DirtyAllInternal";a[a.DirtyAll=16777215]="DirtyAll"})(a.cH||(a.cH={}));var b=function(b){function l(){b.call(this);this.El=65535;this.ua=0;this.rg=-1;this.qb=null}I(l,b);l.prototype.co=function(){};l.prototype.pv=function(){};l.prototype.wv=function(){};l.prototype.G=function(){return this.ua};
l.prototype.u=function(){return this.tc()};l.prototype.tc=function(){return 0==this.ua};l.prototype.gj=function(a){return 0!=(this.El&a)};l.prototype.yf=function(a,b){this.El=b?this.El|a:this.El&~a};l.prototype.lc=function(){this.gj(32)&&this.EJ()};l.prototype.Ru=function(){if(this.tc())throw a.g.sa("This operation was performed on an Empty Geometry.");};l.prototype.Td=function(f,b){if(0>f||f>=this.ua)throw a.g.sa("index out of bounds");this.lc();b.Qf(this.description);b.u()&&b.jo();for(var k=0;k<
this.description.Ba;k++)for(var l=this.description.Gd(k),c=0,J=a.qa.Xa(l);c<J;c++){var d=this.Ca[k].Bh(J*f+c);b.setAttribute(l,c,d)}};l.prototype.Hu=function(f,b){this.lc();for(var k=b.description,l=0;l<k.Ba;l++)for(var c=k.Gd(l),J=a.qa.Xa(c),d=0;d<J;d++){var e=b.md(c,d);this.setAttribute(c,f,d,e)}};l.prototype.A=function(f,b){if(0>f||f>=this.G())throw a.g.Vc();this.lc();this.Ca[0].fc(2*f,b)};l.prototype.Ga=function(f){var b=new a.b;this.A(f,b);return b};l.prototype.vc=function(a,b){this.Ca[0].fc(2*
a,b)};l.prototype.jc=function(f,b,k){if(0>f||f>=this.ua)throw a.g.Vc();this.lc();var l=this.Ca[0];void 0!==k?(l.write(2*f,b),l.write(2*f+1,k)):l.Sn(2*f,b);this.de(1993)};l.prototype.Kw=function(f){if(0>f||f>=this.G())throw a.g.Vc();this.lc();var b=this.Ca[0],k=new a.fe;k.x=b.read(2*f);k.y=b.read(2*f+1);k.z=this.hasAttribute(1)?this.Ca[1].Bh(f):a.qa.ue(1);return k};l.prototype.Oy=function(f,b){if(0>f||f>=this.G())throw a.g.Vc();this.Oe(1);this.lc();this.de(1993);var k=this.Ca[0];k.write(2*f,b.x);k.write(2*
f+1,b.y);this.Ca[1].Uk(f,b.z)};l.prototype.md=function(f,b,k){if(0>b||b>=this.ua)throw a.g.Vc();var l=a.qa.Xa(f);if(k>=l)throw a.g.Vc();this.lc();var c=this.description.zf(f);return 0<=c?this.Ca[c].Bh(b*l+k):a.qa.ue(f)};l.prototype.nC=function(a,b,k){return this.md(a,b,k)};l.prototype.setAttribute=function(f,b,k,l){if(0>b||b>=this.ua)throw a.g.Vc();var c=a.qa.Xa(f);if(k>=c)throw a.g.Vc();this.Oe(f);this.lc();f=this.description.zf(f);this.de(1993);this.Ca[f].Uk(b*c+k,l)};l.prototype.oc=function(a){this.Ru();
this.Oe(a);this.lc();return this.Ca[this.description.zf(a)]};l.prototype.bm=function(f,b){if(null!=b&&a.qa.Qh(f)!=b.Qh())throw a.g.O();this.Oe(f);var k=this.description.zf(f);null==this.Ca&&(this.Ca=a.Bc.$x(this.description.Ba));this.Ca[k]=b;this.de(16777215)};l.prototype.om=function(f){var b=null;if(null!=this.Ca)for(var k=a.Pd.hu(f,this.description),b=[],l=0,c=f.Ba;l<c;l++)-1!=k[l]&&(b[l]=this.Ca[k[l]]);this.description=f;this.Ca=b;this.rg=-1;this.de(16777215)};l.prototype.IA=function(f){this.rs(!0);
f instanceof a.i?this.S.s(f):this.S.Dn(f)};l.prototype.DJ=function(f){this.rs(!1);f instanceof a.i?this.S.s(f):this.S.Dn(f)};l.prototype.Dp=function(a){this.rs(!0);this.S.copyTo(a)};l.prototype.s=function(a){this.IA(a)};l.prototype.Dn=function(a){this.IA(a)};l.prototype.ed=function(a){this.DJ(a)};l.prototype.Ah=function(f,b){var k=new a.Od;if(this.tc())return k.Ka(),k;this.rs(!0);return this.S.Ah(f,b)};l.prototype.ic=function(){var f=this.description.ic();if(!this.tc())for(var b=this.G(),k=0,l=this.description.Ba;k<
l;k++)f=this.Ca[k].jj(f,0,b*a.qa.Xa(this.description.Gd(k)));return f};l.prototype.mc=function(f){if(f==this)return!0;if(!(f instanceof l&&this.description.mc(f.description))||this.tc()!=f.tc())return!1;if(this.tc())return!0;var b=this.G();if(b!=f.G())return!1;for(var k=0;k<this.description.Ba;k++){var B=this.description.Id(k),c=this.oc(B),J=f.oc(B);if(!c.mc(J,0,b*a.qa.Xa(B)))return!1}return!0};l.prototype.copyTo=function(f){if(f.F()!=this.F())throw a.g.O();this.tA(f)};l.prototype.tA=function(f){this.lc();
f.description=this.description;f.Ca=null;var b=this.description.Ba,k=null;if(null!=this.Ca)for(var k=[],l=0;l<b;l++)null!=this.Ca[l]&&(k[l]=this.Ca[l].Gp(this.G()*a.qa.Xa(this.description.Gd(l))));null!=this.S?(f.S=this.S.Qa(),this.S.copyTo(f.S)):f.S=null;f.ua=this.ua;f.El=this.El;f.Ca=k;try{this.co(f)}catch(c){throw f.Ka(),a.g.AI();}};l.prototype.EA=function(){this.ua=0;this.rg=-1;this.Ca=null;this.de(16777215)};l.prototype.de=function(a){16777215==a&&(this.rg=-1,this.pv());this.El|=a;this.jJ();
this.rc()};l.prototype.rs=function(f){this.lc();if(this.gj(192))if(null==this.S?this.S=new a.Wj(this.description):this.S.Qf(this.description),this.u())this.S.Ka();else{this.vv(f);for(var b=1;b<this.description.Ba;b++)for(var k=this.description.Gd(b),l=a.qa.Xa(k),c=this.Ca[b],J=0;J<l;J++){var d=new a.Od;d.Ka();for(var e=0;e<this.ua;e++){var g=c.Bh(e*l+J);d.Eb(g)}this.S.setInterval(k,J,d)}f&&this.yf(192,!1)}};l.prototype.vv=function(){this.S.Ka();for(var f=this.Ca[0],b=new a.b,k=0;k<this.ua;k++)f.fc(2*
k,b),this.S.Eb(b)};l.prototype.um=function(f){f.Ka();for(var b=this.Ca[0],k=new a.b,l=0;l<this.ua;l++)b.fc(2*l,k),f.Eb(k)};l.prototype.EJ=function(){if(this.rg<this.ua){null==this.Ca&&(this.Ca=a.Bc.$x(this.description.Ba));this.rg=2147483647;for(var f=0;f<this.description.Ba;f++){var b=this.description.Gd(f);if(null!=this.Ca[f]){var k=a.qa.Xa(b),l=a.J.truncate(this.Ca[f].size/k);l<this.ua&&(l=a.J.truncate(this.rg>this.ua+5?(5*this.ua+3)/4:this.ua),this.Ca[f].resize(l*k,a.qa.ue(b)));l<this.rg&&(this.rg=
l)}else this.Ca[f]=a.Bc.Sv(b,this.ua),this.rg=this.ua}}this.wv();this.yf(32,!1)};l.prototype.io=function(f){if(0>f)throw a.g.O();f!=this.ua&&(this.ua=f,this.de(65535))};l.prototype.sj=function(a){if(!this.gj(1)){if(!this.gj(2))return 0;if(this.SP>=a)return this.gj(8)?1:2}return-1};l.prototype.hg=function(f,b){this.SP=b;if(-1==f)this.yf(1,!0),this.yf(8,!0);else if(this.yf(1,!1),this.yf(8,!0),0==f)this.yf(2,!1),this.yf(4,!1);else if(1==f)this.yf(2,!0),this.yf(4,!1);else if(2==f)this.yf(2,!0),this.yf(4,
!0);else throw a.g.sa("internal error.");};l.prototype.jJ=function(){null!=this.qb&&(this.qb=null)};l.prototype.uJ=function(f,b,k,l){if(0>f||f>=this.ua)throw a.g.sa("index out of bounds");if(0>b||b>=this.ua)throw a.g.sa("index out of bounds");this.lc();l.Qf(this.description);l.u()&&l.jo();for(var c=0;c<this.description.Ba;c++)for(var J=this.description.Gd(c),d=0,e=a.qa.Xa(J);d<e;d++){var g=this.Ca[c].Bh(e*f+d),z=this.Ca[c].Bh(e*b+d);l.setAttribute(J,d,a.vi.tt(g,z,k))}};l.prototype.lv=function(a,b){var k=
this.Ca[0].f,l=k[2*a]-k[2*b],k=k[2*a+1]-k[2*b+1];return Math.sqrt(l*l+k*k)};l.prototype.bh=function(f,b){if(0>f||f>=this.ua)throw a.g.Vc();if(b.u())throw a.g.O();this.lc();for(var k=b.description,l=0;l<k.Ba;l++)for(var c=k.Id(l),J=a.qa.Xa(c),d=0;d<J;d++){var e=b.md(c,d);this.setAttribute(c,f,d,e)}};l.prototype.iv=function(){return null};l.prototype.dj=function(){return null};return l}(a.U);a.Vr=b})(y||(y={}));(function(a){var b=function(){function b(){this.eb=this.Rm=null;this.Ol=124234251;this.Bt=
!0;this.Ae=-1;this.eb=new a.Gc(7);this.Rm=null}b.prototype.In=function(a){this.Rm=a};b.prototype.kM=function(){this.Bt=!1};b.prototype.ee=function(a){this.eb.ee(a)};b.prototype.lq=function(a){var f=this.eb.ce();this.lS(f);this.nS(a,f);return f};b.prototype.eM=function(a){this.eb.Kc(a)};b.prototype.addElement=function(a,f){var b;-1==f?(-1==this.Ae&&(this.Ae=this.lq(-1)),b=this.Ae):b=f;return this.MA(a,0,b)};b.prototype.PA=function(a){-1==this.Ae&&(this.Ae=this.lq(-1));return this.MA(a,1,this.Ae)};
b.prototype.rm=function(a){var f;-1==this.Ae&&(this.Ae=this.lq(-1));f=this.Ae;var b=this.eb.f;if(-1==f||-1==b[7*f])return a=this.eb.Qj([-1,-1,-1,a,this.dk(),-1,-1]),b=this.eb.f,b[7*f]=a,this.lo(-1,a,f,b),a;var k=-1==f?-1:b[7*f+2];a=this.eb.Qj([-1,-1,k,a,this.dk(),-1,-1]);b=this.eb.f;b[7*k+1]=a;this.Ev(a,b);-1===b[7*a+2]&&(b[7*f]=a);this.lo(-1,a,f,b);return a};b.prototype.us=function(b,f,r,k){var B=-1;-1==B&&(-1==this.Ae&&(this.Ae=this.lq(-1)),B=this.Ae);var c=this.eb.f;if(-1==B||-1==c[7*B])return r=
this.eb.Qj([-1,-1,-1,r,this.dk(),-1,-1]),c=this.eb.f,c[7*B]=r,this.lo(-1,r,B,c),r;var J;k?(k=-1!=f?this.Rm.compare(this,r,f):-1,J=-1!=b?this.Rm.compare(this,r,b):1):(k=-1,J=1);if(0==k||0==J)return c[7*B+3]=0==k?f:b,-1;(-1!=f&&-1!=b?this.Ol>a.J.Zx(this.Ol)>>1:-1!=f)?b=f:k=J;J=-1;for(f=!0;;){if(0>k)if(J=c[7*b],-1!=J)b=J;else{J=b;f=this.eb.Qj([-1,-1,b,r,this.dk(),-1,-1]);c=this.eb.f;c[7*b]=f;break}else if(J=c[7*b+1],-1!=J)b=J;else{J=c[7*b+6];f=this.eb.Qj([-1,-1,b,r,this.dk(),-1,-1]);c=this.eb.f;c[7*
b+1]=f;break}f&&(k*=-1,f=!1)}this.Ev(f,c);-1===c[7*f+2]&&(c[7*B]=f);this.lo(J,f,B,c);return f};b.prototype.tC=function(){return this.wN(this.Ae)};b.prototype.ld=function(a,f){var b;b=-1==f?this.Ae:f;this.Bt?this.dM(a,b):this.ZS(a,b)};b.prototype.search=function(a,f){for(var b=this.ct(f);-1!=b;){var k=this.Rm.compare(this,a,b);if(0==k)return b;b=0>k?this.ik(b):this.Io(b)}return-1};b.prototype.FR=function(a){for(var f=this.ct(-1),b=-1;-1!=f;){var k=a.compare(this,f);if(0==k)return f;0>k?f=this.ik(f):
(b=f,f=this.Io(f))}return b};b.prototype.sF=function(a){for(var f=this.ct(-1),b=-1;-1!=f;){var k=a.compare(this,f);if(0==k)return f;0>k?(b=f,f=this.ik(f)):f=this.Io(f)}return b};b.prototype.ea=function(a){return this.eb.P(a,3)};b.prototype.ik=function(a){return this.eb.P(a,0)};b.prototype.Io=function(a){return this.eb.P(a,1)};b.prototype.getParent=function(a){return this.eb.P(a,2)};b.prototype.cb=function(a){return this.eb.P(a,6)};b.prototype.he=function(a){return this.eb.P(a,5)};b.prototype.hc=function(a){return-1==
a?this.gk(this.Ae):this.gk(a)};b.prototype.uc=function(a){return-1==a?this.sq(this.Ae):this.sq(a)};b.prototype.gO=function(a){return-1==a?this.QC(this.Ae):this.QC(a)};b.prototype.Vi=function(a,f){this.Ay(a,f)};b.prototype.ct=function(a){return-1==a?this.MC(this.Ae):this.MC(a)};b.prototype.clear=function(){this.eb.Nh(!1);this.Ae=-1};b.prototype.size=function(a){return-1==a?this.OC(this.Ae):this.OC(a)};b.prototype.oK=function(a,f){for(var b=f[7*a],k=f[7*a+1],B=f[7*a+4];-1!=b||-1!=k;){var c=-1!=b?f[7*
b+4]:2147483647,k=-1!=k?f[7*k+4]:2147483647,v=Math.min(c,k);if(B<=v)break;c<=k?this.oF(b,f):this.nF(a,f);b=f[7*a];k=f[7*a+1]}};b.prototype.Ev=function(a,f){if(this.Bt)for(var b=f[7*a+4],k=f[7*a+2];-1!=k&&f[7*k+4]>b;)f[7*k]==a?this.oF(a,f):this.nF(k,f),k=f[7*a+2]};b.prototype.nF=function(a,f){var b=f[7*a+1],k;f[7*b+2]=f[7*a+2];f[7*a+2]=b;k=f[7*b];f[7*a+1]=k;-1!=k&&(f[7*k+2]=a);f[7*b]=a;k=f[7*b+2];-1!=k&&(f[7*k]==a?f[7*k]=b:f[7*k+1]=b)};b.prototype.oF=function(a,f){var b=f[7*a+2],k;f[7*a+2]=f[7*b+2];
f[7*b+2]=a;k=f[7*a+1];f[7*b]=k;-1!=k&&(f[7*k+2]=b);f[7*a+1]=b;k=f[7*a+2];-1!=k&&(f[7*k]===b?f[7*k]=a:f[7*k+1]=a)};b.prototype.Uj=function(a,f){this.eb.N(a,2,f)};b.prototype.Fy=function(a,f){this.eb.N(a,0,f)};b.prototype.Jy=function(a,f){this.eb.N(a,1,f)};b.prototype.Iy=function(a,f){this.eb.N(a,5,f)};b.prototype.Fu=function(a,f){this.eb.N(a,6,f)};b.prototype.VF=function(a,f){this.eb.N(f,0,a)};b.prototype.lS=function(a){this.eb.N(a,4,0)};b.prototype.nS=function(a,f){this.eb.N(f,5,a)};b.prototype.MC=
function(a){return-1==a?-1:this.eb.P(a,0)};b.prototype.gk=function(a){return-1==a?-1:this.eb.P(a,1)};b.prototype.sq=function(a){return-1==a?-1:this.eb.P(a,2)};b.prototype.wN=function(a){return-1==a?-1:this.eb.P(a,3)};b.prototype.OC=function(a){return-1==a?0:this.eb.P(a,4)};b.prototype.QC=function(a){return this.eb.P(a,5)};b.prototype.nu=function(a){return this.eb.Qj([-1,-1,-1,a,this.dk(),-1,-1])};b.prototype.ck=function(a){-1!=a&&this.eb.Kc(a)};b.prototype.dk=function(){this.Ol=a.J.Zx(this.Ol);return this.Ol&
1073741823};b.prototype.MA=function(a,f,b){var k=this.eb.f;if(-1==b||-1==k[7*b])return a=this.eb.Qj([-1,-1,-1,a,this.dk(),-1,-1]),k=this.eb.f,k[7*b]=a,this.lo(-1,a,b,k),a;for(var B=-1==b?-1:k[7*b],c=-1;;)if(c=-1==f?1:this.Rm.compare(this,a,B),0>c)if(c=this.ik(B),-1!=c)B=c;else{c=B;a=this.eb.Qj([-1,-1,B,a,this.dk(),-1,-1]);k=this.eb.f;k[7*B]=a;break}else{if(1==f&&0==c)return k[7*b+3]=B,-1;c=k[7*B+1];if(-1!=c)B=c;else{c=k[7*B+6];a=this.eb.Qj([-1,-1,B,a,this.dk(),-1,-1]);k=this.eb.f;k[7*B+1]=a;break}}this.Ev(a,
k);-1===k[7*a+2]&&(k[7*b]=a);this.lo(c,a,b,k);return a};b.prototype.lo=function(a,f,b,k){var B;-1!=a?(B=k[7*a+5],k[7*a+5]=f):B=-1==b?-1:k[7*b+2];k[7*f+5]=B;-1!=B&&(k[7*B+6]=f);k[7*f+6]=a;a==(-1==b?-1:k[7*b+1])&&(k[7*b+1]=f);-1==a&&(k[7*b+2]=f);k[7*b+4]=(-1==b?0:k[7*b+4])+1};b.prototype.qy=function(a,f){var b=this.eb.f,k=b[7*a+5],B=b[7*a+6];-1!=k?b[7*k+6]=B:b[7*f+1]=B;-1!=B?b[7*B+5]=k:b[7*f+2]=k;b[7*f+4]=-1===f?-1:b[7*f+4]-1};b.prototype.ZS=function(b,f){this.qy(b,f);var r=this.ik(b),k=this.Io(b),
B=this.getParent(b),c=b;if(-1!=r&&-1!=k){this.Ol=a.J.Zx(this.Ol);var J;J=1073741823<this.Ol?this.cb(b):this.he(b);var d=this.getParent(J)==b;this.eb.Ou(b,J,0);this.eb.Ou(b,J,1);this.eb.Ou(b,J,2);-1!=B?this.ik(B)==b?this.Fy(B,J):this.Jy(B,J):this.VF(J,f);d?(r==J?(this.Fy(J,b),this.Uj(k,J)):k==J&&(this.Jy(J,b),this.Uj(r,J)),this.Uj(b,J),B=J):(this.Uj(r,J),this.Uj(k,J),B=this.getParent(b),c=J);r=this.ik(b);k=this.Io(b);-1!=r&&this.Uj(r,b);-1!=k&&this.Uj(k,b)}r=-1!=r?r:k;-1==B?this.VF(r,f):this.ik(B)==
c?this.Fy(B,r):this.Jy(B,r);-1!=r&&this.Uj(r,B);this.ck(b,f)};b.prototype.dM=function(a,f){var b=this.eb.f;b[7*a+4]=2147483647;var k=-1,B=-1,c=-1===f?-1:b[7*f],v=c==a;v&&(k=b[7*c],B=b[7*c+1],-1==k&&-1==B)?(this.qy(c,f),this.ck(c,f),b[7*f]=-1):(this.oK(a,b),c=b[7*a+2],-1!=c&&(b[7*c]==a?b[7*c]=-1:b[7*c+1]=-1),this.qy(a,f),this.ck(a,f),v&&(b[7*f]=-1==k||-1!=b[7*k+2]?B:k))};b.prototype.Ay=function(a,f){this.eb.N(a,3,f)};return b}();a.bj=b})(y||(y={}));(function(a){var b=function(){function b(a,f){void 0!==
a&&this.L(a,f)}b.prototype.L=function(a,f){this.ra=a;this.wa=f;this.normalize()};b.prototype.normalize=function(){if(!isNaN(this.ra)){if(this.ra>this.wa){var a=this.ra;this.ra=this.wa;this.wa=a}isNaN(this.wa)&&this.Ka()}};b.prototype.Ka=function(){this.wa=this.ra=NaN};b.prototype.u=function(){return isNaN(this.ra)};b.prototype.Eb=function(a){"number"===typeof a?this.u()?this.wa=this.ra=a:this.Pj(a):a.u()||(this.u()?(this.ra=a.ra,this.wa=a.wa):(this.ra>a.ra&&(this.ra=a.ra),this.wa<a.wa&&(this.wa=a.wa),
this.ra>this.wa&&this.Ka()))};b.prototype.Pj=function(a){a<this.ra?this.ra=a:a>this.wa&&(this.wa=a)};b.prototype.contains=function(a){return"number"===typeof a?a>=this.ra&&a<=this.wa:a.ra>=this.ra&&a.wa<=this.wa};b.prototype.Ha=function(a){this.u()||a.u()?this.Ka():(this.ra<a.ra&&(this.ra=a.ra),this.wa>a.wa&&(this.wa=a.wa),this.ra>this.wa&&this.Ka())};b.prototype.R=function(a){this.u()||(this.ra-=a,this.wa+=a,this.wa<this.ra&&this.Ka())};b.prototype.kv=function(){return this.u()?2.220446049250313E-14:
2.220446049250313E-14*(Math.abs(this.ra)+Math.abs(this.wa)+1)};b.prototype.xy=function(a,f){a>f?(this.ra=f,this.wa=a):(this.ra=a,this.wa=f)};b.prototype.Ry=function(b){return a.J.Jr(b,this.ra,this.wa)};b.prototype.ba=function(){return this.wa-this.ra};b.prototype.Af=function(){return 0.5*(this.ra+this.wa)};b.prototype.mc=function(a){return a==this?!0:a instanceof b?this.u()&&a.u()?!0:this.ra!=a.ra||this.wa!=a.wa?!1:!0:!1};b.prototype.ic=function(){return a.J.Rh(a.J.Rh())};return b}();a.Od=b})(y||
(y={}));(function(a){var b=new a.Od,c=new a.Od,l=function(){return function(){this.$d=null;this.Lf=-1;this.jb=new a.zb;this.tx=55555555;this.Dt=this.Et=!1;this.$h=new a.Od;this.$h.xy(0,0)}}();a.WT=l;var f=function(){function f(b,r,c){this.a=b;this.Nj=NaN;this.mE=this.qp=0;this.nE=NaN;this.la=r;this.rp=10*r;this.oE=this.pE=NaN;this.Zf=!1;this.Cl=this.lr=this.vn=this.fr=this.er=-1;this.kx=c;this.Qx=new l;this.vE=new l;b=Math.min(a.J.truncate(3*b.qd/2),67);Math.min(7,b)}f.prototype.$C=function(a,f,b,
r){a.$d=null===r?null:r[b[5*f]];a.Dt=null!=a.$d;a.Dt||(r=b[5*f+2],-1!==r&&this.a.fR(b[5*f],b[5*r],a.jb),a.$d=a.jb,a.$h.xy(a.jb.oa,a.jb.ma),a.$h.wa+=this.la,a.jb.KE(),a.Et=a.jb.ia==a.jb.ka,a.Et||(a.tx=(a.jb.ma-a.jb.oa)/(a.jb.ia-a.jb.ka)))};f.prototype.sL=function(a,f){var b=a.cq(f,this.la,!0);if(0!=b)return 2==b?this.$v():this.Oh();a.gt(D);a.tw(G);f.gt(N);f.tw(P);L.na(this.qp,this.Nj);D.vb(N)&&this.Nj==D.y?0>G.compare(P)?L.K(G):L.K(P):D.vb(P)&&this.Nj==D.y?0>G.compare(N)?L.K(G):L.K(N):N.vb(G)&&this.Nj==
N.y?0>D.compare(P)?L.K(D):L.K(P):G.vb(P)&&this.Nj==G.y&&(0>D.compare(N)?L.K(D):L.K(N));return a.xe(L.y,L.x)<f.xe(L.y,L.x)?-1:1};f.prototype.qL=function(a,f){if(a.jb.ka==f.jb.ka&&a.jb.oa==f.jb.oa)return a.jb.ia==f.jb.ia&&a.jb.ma==f.jb.ma?this.kx?this.$v():0:this.HB(a,f);if(a.jb.ia==f.jb.ia&&a.jb.ma==f.jb.ma)return this.GB(a,f);var b=this.GB(a,f),r=this.HB(a,f);return 0>b&&0>r?-1:0<b&&0<r?1:this.Oh()};f.prototype.lL=function(a,f){if(a.ma>f.ma){if(f.ma>f.oa&&f.ia-f.ka<2*this.la&&a.Kh(f.ma,f.ia,this.la))return this.Oh()}else if((f.ia-
f.ka)/(f.ma-f.oa)*(a.ma-a.oa)<this.rp&&f.Kh(a.ma,a.ia,this.la))return this.Oh();return 1};f.prototype.mL=function(a,f){if(a.oa<f.oa){if(f.ma>f.oa&&f.ia-f.ka<2*this.la&&a.Kh(f.ma,f.ia,this.la))return this.Oh()}else if((f.ia-f.ka)/(f.ma-f.oa)*(a.oa-a.ma)<this.rp&&f.Kh(a.oa,a.ka,this.la))return this.Oh();return-1};f.prototype.nL=function(f,b){var r=new a.b;r.qc(b.pc(),b.Nb());r.Ip();r.normalize();var l=new a.b;l.qc(f.Nb(),b.Nb());var c=new a.b;c.qc(f.pc(),b.Nb());var l=l.ml(r),r=c.ml(r),c=Math.abs(l),
d=Math.abs(r);if(c<d){if(c<this.rp&&b.Kh(f.oa,f.ka,this.la))return this.Oh()}else if(d<this.rp&&b.Kh(f.ma,f.ia,this.la))return this.Oh();return 0>l&&0>r?-1:0<l&&0<r?1:this.Oh()};f.prototype.FB=function(a,f){return a.ka==f.ka&&a.oa==f.oa?this.lL(a,f):a.ia==f.ia&&a.ma==f.ma?this.mL(a,f):this.nL(a,f)};f.prototype.oL=function(a,f){return a.ia==f.ia&&a.ma==f.ma&&a.ka==f.ka&&a.oa==f.oa?this.kx?this.$v():0:this.Oh()};f.prototype.GB=function(a,f){var b=1;if(a.jb.ka<f.jb.ka){var b=-1,r=a;a=f;f=r}var r=a.jb,
l=f.jb,c=r.oa-l.oa,v=f.tx*(r.ka-l.ka),d=this.rp;return c<v-d?-b:c>v+d?b:l.Kh(r.oa,r.ka,this.la)?this.Oh():c<v?-b:b};f.prototype.HB=function(a,f){var b=1;if(f.jb.ia<a.jb.ia){var b=-1,r=a;a=f;f=r}var r=a.jb,l=f.jb,c=r.ma-l.oa,v=f.tx*(r.ia-l.ka),d=this.rp;return c<v-d?-b:c>v+d?b:l.Kh(r.ma,r.ia,this.la)?this.Oh():c<v?-b:b};f.prototype.$v=function(){this.Zf=!0;this.ei=new a.xd(5,this.vn,this.lr);return-1};f.prototype.Oh=function(){this.Zf=!0;this.kx?this.ei=new a.xd(4,this.vn,this.lr):this.lr=this.vn=
this.fr=this.er=-1;return-1};f.prototype.rL=function(a,f,r,l){if(this.Zf)return-1;var v=this.nE==this.Nj&&this.mE==this.qp,d;v&&a==this.er?d=this.oE:(d=NaN,this.er=-1);v&&f==this.fr?v=this.pE:(v=NaN,this.fr=-1);r.$d.XE(b);l.$d.XE(c);if(b.wa<c.ra)return-1;if(c.wa<b.ra)return 1;this.nE=this.Nj;this.mE=this.qp;isNaN(d)&&(this.er=a,this.oE=d=r.$d.xe(this.Nj,this.qp));isNaN(v)&&(this.fr=f,this.pE=v=l.$d.xe(this.Nj,this.qp));return Math.abs(d-v)<=this.la?this.sL(r.$d,l.$d):d<v?-1:d>v?1:0};f.prototype.jq=
function(){this.Zf=!1};f.prototype.rl=function(){return this.ei};f.prototype.XF=function(a,f){this.Nj=a;this.qp=f;this.lr=this.vn=this.fr=this.er=-1};f.prototype.compare=function(a,f,b){if(this.Zf)return-1;a=a.ea(b);this.Cl=b;return this.JB(f,f,a,a)};f.prototype.JB=function(a,f,b,r){var l;this.vn==f?l=this.Qx:(this.vn=f,l=this.Qx,this.Qx.Lf=a,this.$C(l,f,this.a.dd.f,this.a.He));var c;null==c&&(this.lr=r,c=this.vE,this.vE.Lf=b,this.$C(c,r,this.a.dd.f,this.a.He));if(l.Dt||c.Dt)return this.rL(f,r,l,
c);if(l.$h.wa<c.$h.ra)return-1;if(c.$h.wa<l.$h.ra)return 1;a=l.Et?1:0;a|=c.Et?2:0;return 0==a?this.qL(l,c):1==a?this.FB(l.jb,c.jb):2==a?-1*this.FB(c.jb,l.jb):this.oL(l.jb,c.jb)};return f}();a.hA=f})(y||(y={}));(function(a){var b=function(){function b(l,f){this.a=l;this.la=f;this.Zf=!1;this.vn=-1;this.$h=new a.Od;this.np=new a.b;this.np.Eh();this.Wd=new a.zb;this.Cl=-1;this.Bx=1.7976931348623157E308}b.prototype.jq=function(){this.Zf=!1;this.Bx=1.7976931348623157E308};b.prototype.bh=function(a){this.np.K(a)};
b.prototype.compare=function(a,f){return this.KB(f,a.ea(f))};b.prototype.KB=function(b,f){var r=null!=this.a.dc(f);r||(this.a.Pc(f,this.Wd),this.$h.xy(this.Wd.oa,this.Wd.ma));if(r)throw a.g.sa("not implemented");if(this.np.x+this.la<this.$h.ra)return-1;if(this.np.x-this.la>this.$h.wa)return 1;if(this.Wd.ka==this.Wd.ia)return this.Cl=b,this.Zf=!0,0;this.Wd.KE();var k=this.Wd.Nb(),r=new a.b;r.qc(this.Wd.pc(),k);r.Ip();var B=new a.b;B.qc(this.np,k);k=r.ml(B);k/=r.length();return k<10*-this.la?-1:k>10*
this.la?1:this.Wd.Dq(this.np,this.la)&&(r=Math.abs(k),r<this.Bx&&(this.Cl=b,this.Bx=r),this.Zf=!0,r<0.25*this.la)?0:0>k?-1:1};return b}();a.II=b})(y||(y={}));(function(a){function b(a,f,r,k){r=new Float64Array(a.subarray(r,k));a.set(r,f)}var c=function(){function b(f){this.Ta=this.Xf=!1;this.f=[];var r=f;2>r&&(r=2);this.f=a.J.Lh(r,b.pb);this.size=f}b.Zc=function(a,r){b.pb=r;var k=new b(a);b.pb=0;return k};b.lj=function(a){var r=new b(0);r.f=a.f.slice(0);r.size=a.size;return r};b.W=function(a,r){var k=
new b(0);k.size=a.size;k.size>r&&(k.size=r);k.f=a.f.slice(0,k.size);return k};b.prototype.yb=function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};b.prototype.set=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};b.prototype.Sn=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b.x;this.f[f+1]=b.y};b.prototype.add=
function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Gp=function(a){return b.W(this,a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(f,b){void 0===b&&(b=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(f<=this.size){if(a.J.truncate(5*f/4)<this.f.length){var k=this.f.slice(0,f);this.f=k}}else if(f>this.f.length){a.J.truncate(64>f?Math.max(2*f,4):5*f/4);for(var k=this.f.slice(0),l=this.f.length;l<f;l++)k[l]=
b;this.f=k}this.size=f};b.prototype.df=function(f){(null==this.f||f>this.f.length)&&this.resize(f);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=f};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(f,b,k){for(var l=this.size;b<l&&b<k;b++)f=a.J.Rh(this.read(b));return f};b.prototype.mc=function(a,r,k){if(null==a||!(a instanceof b))return!1;var B=this.size,c=a.size;if(k>B||k>c&&B!=c)return!1;for(k>B&&(k=B);r<k;r++)if(this.read(r)!=
a.read(r))return!1;return!0};b.prototype.nk=function(f,b,k,l,c,d,e){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();var g=this.size-e;g<l&&this.resize(this.size+l-g);for(g=0;g<e-f;g++)this.f[f+l+g]=this.f[f+g];this.f==b.f&&f<k&&(k+=l);if(c)for(g=0;g<l;g++)this.f[g+f]=b.f[k+g];else{c=l;for(e=0;e<l;e+=d){c-=d;for(g=0;g<d;g++)this.f[f+e+g]=b.f[k+c+g]}}};b.prototype.ul=function(f,b,k,l){if(this.Ta)throw a.g.ya();l-=f;for(var c=this.f.slice(f,f+l),d=0;d<l;d++)this.f[f+k+d]=c[d];for(l=0;l<
k;l++)this.f[f+l]=b};b.prototype.lg=function(f,b,k){if(this.Ta)throw a.g.ya();for(var l=this.f.slice(f,f+(k-f)),c=0;c<k-f;c++)this.f[c+f+2]=l[c];this.f[f]=b.x;this.f[f+1]=b.y};b.prototype.km=function(f,b,k,l,c,d){if(0>f||0>b||0>l)throw a.g.O();if(!c&&(0>=d||0!=b%d))throw a.g.O();if(k.size<l+b)throw a.g.O();if(0!=b)if(this.size<b+f&&this.resize(b+f),k==this)this.xi(f,b,l,c,d);else if(c)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l++;else if(l=l+b-d,1==d)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l--;else{c=0;for(b=
a.J.truncate(b/d);c<b;c++){for(var e=0;e<d;e++)this.f[f+e]=k.f[l+e];f+=d;l-=d}}};b.prototype.oj=function(f,b,k){if(this.Ta)throw a.g.ya();if(f+b>this.size)throw a.g.ya();if(0<k-(f+b)){k-=f+b;for(var l=this.f.slice(f+b,f+k+b),c=0;c<k;c++)this.f[f+c]=l[c]}this.size-=b};b.prototype.Hp=function(f,b,k){if(this.Ta)throw a.g.ya();if(1>k||0!=b%k)throw a.g.ya();for(var l=b>>1,c=0;c<l;c+=k){b-=k;for(var d=0;d<k;d++){var e=this.f[f+c+d];this.f[f+c+d]=this.f[f+b+d];this.f[f+b+d]=e}}};b.prototype.dh=function(f,
b,k){if(0>b||0>k||0>b||k+b>this.size)throw a.g.O();for(var l=b;l<b+k;l++)this.f[l]=f};b.prototype.xi=function(f,b,k,l,c){if(!l||f!=k){for(var d=0;d<b;d++)this.f[f+d]=this.f[k+d];if(!l){k=f;f=f+b-c;l=0;for(b=a.J.truncate(b/2);l<b;l++){for(d=0;d<c;d++){var e=this.f[k+d];this.f[k+d]=this.f[f+d];this.f[f+d]=e}k+=c;f-=c}}}};b.prototype.Yp=function(f,b,k,l,c){if(0>f||0>b||0>l)throw a.g.O();if(0!=b){this.size<(b<<1)+f&&this.resize((b<<1)+f);c||(f+=b-1<<1);c=c?2:-2;for(b+=l;l<b;l++)this.f[f]=k[l].x,this.f[f+
1]=k[l].y,f+=c}};b.prototype.Fp=function(f,b,k,l,c){if(0>f||0>b||0>l||this.size<b+f)throw a.g.O();if(c)for(c=0;c<b;c++)k[l+c]=this.f[f+c];else for(l=l+b-1;f<b;f++)k[l]=this.f[f],l--};b.prototype.clear=function(a){a?this.resize(0):this.df(0)};b.prototype.yd=function(a,b,k){var l=this.f.slice(0,a),c=this.f.slice(b);a=this.f.slice(a,b).sort(k);this.f.length=0;this.f.push.apply(this.f,l.concat(a).concat(c))};b.prototype.Qh=function(){return 1};b.pb=0;return b}();a.rd=c;c=function(){function l(a){this.Ta=
this.Xf=!1;this.f=null;var b=a;2>b&&(b=2);this.f=new Float64Array(b);this.size=a}l.Zc=function(a,b){var k=new l(a),c=a,v=k.f;2>c&&(c=2);if(0!==b)for(var d=0;d<c;d++)v[d]=b;return k};l.lj=function(a){var b=new l(0);b.f=new Float64Array(a.f);b.size=a.size;return b};l.W=function(a,b){var k=new l(0);k.size=a.size;k.size>b&&(k.size=b);var c=k.size;2>c&&(c=2);k.f=new Float64Array(c);k.f.set(a.f.length<=c?a.f:a.f.subarray(0,c),0);return k};l.prototype.yb=function(a){0>=a||(null==this.f?this.f=new Float64Array(a):
a<=this.f.length||(0<this.f.length?(a=new Float64Array(a),a.set(this.f),this.f=a):this.f=new Float64Array(a)))};l.prototype.read=function(a){return this.f[a]};l.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};l.prototype.get=function(a){return this.f[a]};l.prototype.write=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};l.prototype.set=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};l.prototype.Sn=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b.x;this.f[f+1]=b.y};l.prototype.add=
function(a){this.resize(this.size+1);this.f[this.size-1]=a};l.prototype.Gp=function(a){return l.W(this,a)};l.prototype.Bh=function(a){return this.read(a)};l.prototype.resize=function(f,b){void 0===b&&(b=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(f<=this.size){if(30<this.f.length&&5*f/4<this.f.length){var k=new Float64Array(this.f,0,f);this.f=k}}else{f>this.f.length&&(k=a.J.truncate(64>f?Math.max(2*f,4):5*f/4),k=new Float64Array(k),k.set(this.f),
this.f=k);for(var k=this.f,l=this.size;l<f;l++)k[l]=b}this.size=f};l.prototype.df=function(f){(null==this.f||f>this.f.length)&&this.resize(f);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=f};l.prototype.Uk=function(a,b){this.write(a,b)};l.prototype.jj=function(f,b,k){for(var l=this.size;b<l&&b<k;b++)f=a.J.Rh(this.read(b));return f};l.prototype.mc=function(a,b,k){if(null==a||!(a instanceof l))return!1;var c=this.size,v=a.size;if(k>c||k>v&&c!=v)return!1;
for(k>c&&(k=c);b<k;b++)if(this.read(b)!=a.read(b))return!1;return!0};l.prototype.nk=function(f,r,k,l,c,d,e){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();var g=this.size-e;g<l&&this.resize(this.size+l-g);b(this.f,f+l,f,f+(e-f));this.f==r.f&&f<k&&(k+=l);if(c)this.f.set(r.f.subarray(k,k+l),f);else{c=l;for(e=0;e<l;e+=d){c-=d;for(g=0;g<d;g++)this.f[f+e+g]=r.f[k+c+g]}}};l.prototype.ul=function(f,r,k,l){if(this.Ta)throw a.g.ya();l-=f;b(this.f,f+l,f,f+l);for(l=0;l<k;l++)this.f[f+l]=r};l.prototype.lg=
function(f,r,k){if(this.Ta)throw a.g.ya();b(this.f,f+2,f,f+(k-f));this.f[f]=r.x;this.f[f+1]=r.y};l.prototype.km=function(f,b,k,l,c,d){if(0>f||0>b||0>l)throw a.g.O();if(!c&&(0>=d||0!=b%d))throw a.g.O();if(k.size<l+b)throw a.g.O();if(0!=b)if(this.size<b+f&&this.resize(b+f),k==this)this.xi(f,b,l,c,d);else if(c)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l++;else if(l=l+b-d,1==d)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l--;else{c=0;for(b=a.J.truncate(b/d);c<b;c++){for(var e=0;e<d;e++)this.f[f+e]=k.f[l+e];f+=d;l-=
d}}};l.prototype.oj=function(f,r,k){if(this.Ta)throw a.g.ya();if(f+r>this.size)throw a.g.ya();0<k-(f+r)&&b(this.f,f,f+r,f+(k-(f+r))+r);this.size-=r};l.prototype.Hp=function(f,b,k){if(this.Ta)throw a.g.ya();if(1>k||0!=b%k)throw a.g.ya();for(var l=b>>1,c=0;c<l;c+=k){b-=k;for(var d=0;d<k;d++){var e=this.f[f+c+d];this.f[f+c+d]=this.f[f+b+d];this.f[f+b+d]=e}}};l.prototype.dh=function(f,b,k){if(0>b||0>k||0>b||k+b>this.size)throw a.g.O();for(var l=b;l<b+k;l++)this.f[l]=f};l.prototype.xi=function(f,b,k,l,
c){if(!l||f!=k)if(this.f.set(this.f.subarray(k,k+b),f),!l){k=f;f=f+b-c;l=0;for(b=a.J.truncate(b/2);l<b;l++){for(var d=0;d<c;d++){var e=this.f[k+d];this.f[k+d]=this.f[f+d];this.f[f+d]=e}k+=c;f-=c}}};l.prototype.Yp=function(f,b,k,l,c){if(0>f||0>b||0>l)throw a.g.O();if(0!=b){this.size<(b<<1)+f&&this.resize((b<<1)+f);c||(f+=b-1<<1);c=c?2:-2;for(b+=l;l<b;l++)this.f[f]=k[l].x,this.f[f+1]=k[l].y,f+=c}};l.prototype.Fp=function(f,b,k,l,c){if(0>f||0>b||0>l||this.size<b+f)throw a.g.O();if(c)for(c=0;c<b;c++)k[l+
c]=this.f[f+c];else for(l=l+b-1;f<b;f++)k[l]=this.f[f],l--};l.prototype.clear=function(a){a?this.resize(0):this.df(0)};l.prototype.yd=function(a,b,k){Array.prototype.sort.call(this.f.subarray(a,b),k)};l.prototype.Qh=function(){return 1};return l}();a.QG=c})(y||(y={}));!0===y.ah.Sk&&!0===y.ah.ht&&(y.rd=y.QG);(function(a){function b(a,f,r,k){r=new Int32Array(a.subarray(r,k));a.set(r,f)}a.sT=function(){return function(){this.random=1973}}();var c=function(){function b(f){this.Ta=this.Xf=!1;this.f=[];
var r=f;2>r&&(r=2);this.f=this.f=a.J.Lh(r,b.pb);this.size=f}b.Zc=function(a,r){b.pb=r;var k=new b(a);b.pb=0;return k};b.lj=function(a){var r=new b(0);r.f=a.f.slice(0);r.size=a.size;return r};b.W=function(a,r){var k=new b(0);k.size=a.size;k.size>r&&(k.size=r);k.f=a.f.slice(0,k.size);return k};b.prototype.yb=function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(f,
b){if(this.Ta)throw a.g.ya();this.f[f]=b};b.prototype.set=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};b.prototype.Sn=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b.x;this.f[f+1]=b.y};b.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Gp=function(a){return b.W(this,a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(f,b){void 0===b&&(b=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");
if(f<=this.size){if(a.J.truncate(5*f/4)<this.f.length){var k=this.f.slice(0,f);this.f=k}}else if(f>this.f.length){a.J.truncate(64>f?Math.max(2*f,4):5*f/4);for(var k=this.f.slice(0),l=this.f.length;l<f;l++)k[l]=b;this.f=k}this.size=f};b.prototype.df=function(f){(null==this.f||f>this.f.length)&&this.resize(f);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=f};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(f,b,k){for(var l=this.size;b<
l&&b<k;b++)f=a.J.kg(this.read(b),f);return f};b.prototype.mc=function(a,r,k){if(null==a||!(a instanceof b))return!1;var c=this.size,v=a.size;if(k>c||k>v&&c!=v)return!1;for(k>c&&(k=c);r<k;r++)if(this.read(r)!=a.read(r))return!1;return!0};b.prototype.nk=function(f,b,k,l,c,d,e){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();for(var g=0;g<e-f;g++)this.f[f+l+g]=this.f[f+g];this.f==b.f&&f<k&&(k+=l);if(c)for(g=0;g<l;g++)this.f[g+f]=b.f[k+g];else{c=l;for(e=0;e<l;e+=d){c-=d;for(g=0;g<d;g++)this.f[f+
e+g]=b.f[k+c+g]}}};b.prototype.ul=function(f,b,k,l){if(this.Ta)throw a.g.ya();l-=f;for(var c=this.f.slice(f,f+l),d=0;d<l;d++)this.f[f+k+d]=c[d];for(l=0;l<k;l++)this.f[f+l]=b};b.prototype.lg=function(f,b,k){if(this.Ta)throw a.g.ya();for(var l=this.f.slice(f,f+(k-f)),c=0;c<k-f;c++)this.f[c+f+2]=l[c];this.f[f]=b.x;this.f[f+1]=b.y};b.prototype.km=function(f,b,k,l,c,d){if(0>f||0>b||0>l)throw a.g.O();if(!c&&(0>=d||0!=b%d))throw a.g.O();if(k.size<l+b)throw a.g.O();if(0!=b)if(this.size<b+f&&this.resize(b+
f),k==this)this.xi(f,b,l,c,d);else if(c)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l++;else if(l=l+b-d,1==d)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l--;else{c=0;for(b=a.J.truncate(b/d);c<b;c++){for(var e=0;e<d;e++)this.f[f+e]=k.f[l+e];f+=d;l-=d}}};b.prototype.oj=function(f,b,k){if(this.Ta)throw a.g.ya();if(f+b>this.size)throw a.g.ya();if(0<k-(f+b)){k-=f+b;for(var l=this.f.slice(f+b,f+k+b),c=0;c<k;c++)this.f[f+c]=l[c]}this.size-=b};b.prototype.Hp=function(f,b,k){if(this.Ta)throw a.g.ya();if(1>k||0!=b%k)throw a.g.ya();
for(var l=b>>1,c=0;c<l;c+=k){b-=k;for(var d=0;d<k;d++){var e=this.f[f+c+d];this.f[f+c+d]=this.f[f+b+d];this.f[f+b+d]=e}}};b.prototype.dh=function(f,b,k){if(0>b||0>k||0>b||k+b>this.size)throw a.g.O();for(var l=b;l<b+k;l++)this.f[l]=f};b.prototype.xi=function(f,b,k,l,c){if(!l||f!=k){for(var d=0;d<b;d++)this.f[f+d]=this.f[k+d];if(!l){k=f;f=f+b-c;l=0;for(b=a.J.truncate(b/2);l<b;l++){for(d=0;d<c;d++){var e=this.f[k+d];this.f[k+d]=this.f[f+d];this.f[f+d]=e}k+=c;f-=c}}}};b.prototype.Yp=function(f,b,k,l,
c){if(0>f||0>b||0>l)throw a.g.O();if(0!=b){this.size<(b<<1)+f&&this.resize((b<<1)+f);c||(f+=b-1<<1);c=c?2:-2;for(b+=l;l<b;l++)this.f[f]=k[l].x,this.f[f+1]=k[l].y,f+=c}};b.prototype.Fp=function(f,b,k,l,c){if(0>f||0>b||0>l||this.size<b+f)throw a.g.O();if(c)for(c=0;c<b;c++)k[l+c]=this.f[f+c];else for(l=l+b-1;f<b;f++)k[l]=this.f[f],l--};b.prototype.clear=function(a){a?this.resize(0):this.df(0)};b.prototype.yd=function(a,b,k){var l=this.f.slice(0,a),c=this.f.slice(b);a=this.f.slice(a,b).sort(k);this.f.length=
0;this.f.push.apply(this.f,l.concat(a).concat(c))};b.prototype.Qh=function(){return 2};b.prototype.uc=function(){return this.f[this.size-1]};b.prototype.bf=function(){this.resize(this.size-1)};b.prototype.JF=function(a){this.f[this.size-1]=a};b.prototype.QE=function(a){a<this.size-1&&(this.f[a]=this.f[this.size-1]);this.resize(this.size-1)};b.prototype.Ps=function(a){for(var b=0,k=this.size;b<k;b++)if(this.f[b]==a)return b;return-1};b.prototype.Mw=function(a){return 0<=this.Ps(a)};b.pb=0;return b}();
a.ha=c;c=function(){function l(a){this.Ta=this.Xf=!1;this.f=null;var b=a;2>b&&(b=2);this.f=new Int32Array(b);this.size=a}l.Zc=function(a,b){var k=new l(a),c=a,v=k.f;2>c&&(c=2);if(0!==b)for(var d=0;d<c;d++)v[d]=b;return k};l.lj=function(a){var b=new l(0);b.f=new Int32Array(a.f);b.size=a.size;return b};l.W=function(a,b){var k=new l(0);k.size=a.size;k.size>b&&(k.size=b);var c=k.size;2>c&&(c=2);k.f=new Int32Array(c);k.f.set(a.f.length<=c?a.f:a.f.subarray(0,c),0);return k};l.prototype.yb=function(a){0>=
a||(null==this.f?this.f=new Int32Array(a):a<=this.f.length||(0<this.f.length?(a=new Int32Array(a),a.set(this.f),this.f=a):this.f=new Int32Array(a)))};l.prototype.read=function(a){return this.f[a]};l.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};l.prototype.get=function(a){return this.f[a]};l.prototype.write=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};l.prototype.set=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};l.prototype.Sn=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=
b.x;this.f[f+1]=b.y};l.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};l.prototype.Gp=function(a){return l.W(this,a)};l.prototype.Bh=function(a){return this.read(a)};l.prototype.resize=function(f,b){void 0===b&&(b=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(f<=this.size){if(30<this.f.length&&5*f/4<this.f.length){var k=new Int32Array(this.f,0,f);this.f=k}}else{f>this.f.length&&(k=a.J.truncate(64>f?Math.max(2*f,4):5*f/4),
k=new Int32Array(k),k.set(this.f),this.f=k);for(var k=this.f,l=this.size;l<f;l++)k[l]=b}this.size=f};l.prototype.df=function(f){(null==this.f||f>this.f.length)&&this.resize(f);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=f};l.prototype.Uk=function(a,b){this.write(a,b)};l.prototype.jj=function(f,b,k){for(var l=this.size;b<l&&b<k;b++)f=a.J.kg(this.read(b),f);return f};l.prototype.mc=function(a,b,k){if(null==a||!(a instanceof l))return!1;var c=
this.size,v=a.size;if(k>c||k>v&&c!=v)return!1;for(k>c&&(k=c);b<k;b++)if(this.read(b)!=a.read(b))return!1;return!0};l.prototype.nk=function(f,r,k,l,c,d,e){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();b(this.f,f+l,f,f+(e-f));this.f==r.f&&f<k&&(k+=l);if(c)this.f.set(r.f.subarray(k,k+l),f);else{c=l;for(e=0;e<l;e+=d){c-=d;for(var g=0;g<d;g++)this.f[f+e+g]=r.f[k+c+g]}}};l.prototype.ul=function(f,r,k,l){if(this.Ta)throw a.g.ya();l-=f;b(this.f,f+l,f,f+l);for(l=0;l<k;l++)this.f[f+l]=r};l.prototype.lg=
function(f,r,k){if(this.Ta)throw a.g.ya();b(this.f,f+2,f,f+(k-f));this.f[f]=r.x;this.f[f+1]=r.y};l.prototype.km=function(f,b,k,l,c,d){if(0>f||0>b||0>l)throw a.g.O();if(!c&&(0>=d||0!=b%d))throw a.g.O();if(k.size<l+b)throw a.g.O();if(0!=b)if(this.size<b+f&&this.resize(b+f),k==this)this.xi(f,b,l,c,d);else if(c)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l++;else if(l=l+b-d,1==d)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l--;else{c=0;for(b=a.J.truncate(b/d);c<b;c++){for(var e=0;e<d;e++)this.f[f+e]=k.f[l+e];f+=d;l-=
d}}};l.prototype.oj=function(f,r,k){if(this.Ta)throw a.g.ya();if(f+r>this.size)throw a.g.ya();0<k-(f+r)&&b(this.f,f,f+r,f+(k-(f+r))+r);this.size-=r};l.prototype.Hp=function(f,b,k){if(this.Ta)throw a.g.ya();if(1>k||0!=b%k)throw a.g.ya();for(var l=b>>1,c=0;c<l;c+=k){b-=k;for(var d=0;d<k;d++){var e=this.f[f+c+d];this.f[f+c+d]=this.f[f+b+d];this.f[f+b+d]=e}}};l.prototype.dh=function(f,b,k){if(0>b||0>k||0>b||k+b>this.size)throw a.g.O();for(var l=b;l<b+k;l++)this.f[l]=f};l.prototype.xi=function(f,b,k,l,
c){if(!l||f!=k)if(this.f.set(this.f.subarray(k,k+b),f),!l){k=f;f=f+b-c;l=0;for(b=a.J.truncate(b/2);l<b;l++){for(var d=0;d<c;d++){var e=this.f[k+d];this.f[k+d]=this.f[f+d];this.f[f+d]=e}k+=c;f-=c}}};l.prototype.Yp=function(f,b,k,l,c){if(0>f||0>b||0>l)throw a.g.O();if(0!=b){this.size<(b<<1)+f&&this.resize((b<<1)+f);c||(f+=b-1<<1);c=c?2:-2;for(b+=l;l<b;l++)this.f[f]=k[l].x,this.f[f+1]=k[l].y,f+=c}};l.prototype.Fp=function(f,b,k,l,c){if(0>f||0>b||0>l||this.size<b+f)throw a.g.O();if(c)for(c=0;c<b;c++)k[l+
c]=this.f[f+c];else for(l=l+b-1;f<b;f++)k[l]=this.f[f],l--};l.prototype.clear=function(a){a?this.resize(0):this.df(0)};l.prototype.yd=function(a,b,k){10>b-a?l.$i(this.f,a,b,k):l.$g(this.f,a,b-1,k)};l.prototype.Qh=function(){return 2};l.prototype.uc=function(){return this.f[this.size-1]};l.prototype.bf=function(){this.resize(this.size-1)};l.prototype.JF=function(a){this.f[this.size-1]=a};l.prototype.QE=function(a){a<this.size-1&&(this.f[a]=this.f[this.size-1]);this.resize(this.size-1)};l.prototype.Ps=
function(a){for(var b=0,k=this.size;b<k;b++)if(this.f[b]==a)return b;return-1};l.prototype.Mw=function(a){return 0<=this.Ps(a)};l.$i=function(a,b,k,l){for(var c=b;c<k;c++){for(var v=a[c],d=c-1;d>=b&&0<l(a[d],v);)a[d+1]=a[d],d--;a[d+1]=v}};l.Wf=function(a,b,k){var l=a[k];a[k]=a[b];a[b]=l};l.$g=function(a,b,k,c){if(!(b>=k))for(;;){if(9>k-b){l.$i(a,b,k+1,c);break}var v=a[b];l.Wf(a,b,k);for(var d=b,e=b;e<k;e++)0>=c(a[e],v)&&(l.Wf(a,d,e),d+=1);l.Wf(a,d,k);d-b<k-d?(l.$g(a,b,d-1,c),b=d+1):(l.$g(a,d+1,k,
c),k=d-1)}};return l}();a.Wu=c})(y||(y={}));!0===y.ah.Sk&&(y.ha=y.Wu);(function(a){function b(a,f,r,k){r=new Int8Array(a.subarray(r,k));a.set(r,f)}var c=function(){function b(f){this.Ta=this.Xf=!1;this.f=[];var r=f;2>r&&(r=2);this.f=a.J.Lh(r,b.pb);this.size=f}b.Zc=function(a,r){b.pb=r;var k=new b(a);b.pb=0;return k};b.lj=function(a){var r=new b(0);r.f=a.f.slice(0);r.size=a.size;return r};b.W=function(a,r){var k=new b(0);k.size=a.size;k.size>r&&(k.size=r);k.f=a.f.slice(0,k.size);return k};b.prototype.yb=
function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};b.prototype.set=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b};b.prototype.Sn=function(f,b){if(this.Ta)throw a.g.ya();this.f[f]=b.x;this.f[f+1]=b.y};b.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Gp=function(a){return b.W(this,
a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(f,b){void 0===b&&(b=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(f<=this.size){if(a.J.truncate(5*f/4)<this.f.length){var k=this.f.slice(0,f);this.f=k}}else if(f>this.f.length){a.J.truncate(64>f?Math.max(2*f,4):5*f/4);for(var k=this.f.slice(0),l=this.f.length;l<f;l++)k[l]=b;this.f=k}this.size=f};b.prototype.df=function(f){(null==this.f||f>this.f.length)&&this.resize(f);
if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=f};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(f,b,k){for(var l=this.size;b<l&&b<k;b++)f=a.J.kg(this.read(b),f);return f};b.prototype.mc=function(a,r,k){if(null==a||!(a instanceof b))return!1;var c=this.size,v=a.size;if(k>c||k>v&&c!=v)return!1;for(k>c&&(k=c);r<k;r++)if(this.read(r)!=a.read(r))return!1;return!0};b.prototype.nk=function(f,b,k,l,c,d,e){if(this.Ta)throw a.g.ya();
if(!c&&(1>d||0!=l%d))throw a.g.O();for(var g=0;g<e-f;g++)this.f[f+l+g]=this.f[f+g];this.f==b.f&&f<k&&(k+=l);if(c)for(g=0;g<l;g++)this.f[g+f]=b.f[k+g];else{c=l;for(e=0;e<l;e+=d){c-=d;for(g=0;g<d;g++)this.f[f+e+g]=b.f[k+c+g]}}};b.prototype.ul=function(f,b,k,l){if(this.Ta)throw a.g.ya();l-=f;for(var c=this.f.slice(f,f+l),d=0;d<l;d++)this.f[f+k+d]=c[d];for(l=0;l<k;l++)this.f[f+l]=b};b.prototype.lg=function(f,b,k){if(this.Ta)throw a.g.ya();for(var l=this.f.slice(f,f+(k-f)),c=0;c<k-f;c++)this.f[c+f+2]=
l[c];this.f[f]=b.x;this.f[f+1]=b.y};b.prototype.km=function(f,b,k,l,c,d){if(0>f||0>b||0>l)throw a.g.O();if(!c&&(0>=d||0!=b%d))throw a.g.O();if(k.size<l+b)throw a.g.O();if(0!=b)if(this.size<b+f&&this.resize(b+f),k==this)this.xi(f,b,l,c,d);else if(c)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l++;else if(l=l+b-d,1==d)for(c=0;c<b;c++)this.f[f]=k.f[l],f++,l--;else{c=0;for(b=a.J.truncate(b/d);c<b;c++){for(var e=0;e<d;e++)this.f[f+e]=k.f[l+e];f+=d;l-=d}}};b.prototype.oj=function(f,b,k){if(this.Ta)throw a.g.ya();
if(f+b>this.size)throw a.g.ya();if(0<k-(f+b)){k-=f+b;for(var l=this.f.slice(f+b,f+k+b),c=0;c<k;c++)this.f[f+c]=l[c]}this.size-=b};b.prototype.Hp=function(f,b,k){if(this.Ta)throw a.g.ya();if(1>k||0!=b%k)throw a.g.ya();for(var l=b>>1,c=0;c<l;c+=k){b-=k;for(var d=0;d<k;d++){var e=this.f[f+c+d];this.f[f+c+d]=this.f[f+b+d];this.f[f+b+d]=e}}};b.prototype.dh=function(f,b,k){if(0>b||0>k||0>b||k+b>this.size)throw a.g.O();for(var l=b;l<b+k;l++)this.f[l]=f};b.prototype.xi=function(f,b,k,l,c){if(!l||f!=k){for(var d=
0;d<b;d++)this.f[f+d]=this.f[k+d];if(!l){k=f;f=f+b-c;l=0;for(b=a.J.truncate(b/2);l<b;l++){for(d=0;d<c;d++){var e=this.f[k+d];this.f[k+d]=this.f[f+d];this.f[f+d]=e}k+=c;f-=c}}}};b.prototype.Yp=function(b,r,k,l,c){if(0>b||0>r||0>l)throw a.g.O();if(0!=r){this.size<(r<<1)+b&&this.resize((r<<1)+b);c||(b+=r-1<<1);c=c?2:-2;for(r+=l;l<r;l++)this.f[b]=k[l].x,this.f[b+1]=k[l].y,b+=c}};b.prototype.Fp=function(b,r,k,l,c){if(0>b||0>r||0>l||this.size<r+b)throw a.g.O();if(c)for(c=0;c<r;c++)k[l+c]=this.f[b+c];else for(l=
l+r-1;b<r;b++)k[l]=this.f[b],l--};b.prototype.clear=function(a){a?this.resize(0):this.df(0)};b.prototype.yd=function(a,b,k){var l=this.f.slice(0,a),c=this.f.slice(b);a=this.f.slice(a,b).sort(k);this.f.length=0;this.f.push.apply(this.f,l.concat(a).concat(c))};b.prototype.Qh=function(){return 1};b.prototype.wy=function(b,r){if(this.Ta)throw a.g.sa("invalid call. Attribute Stream is read only.");this.f[b]|=r};b.prototype.BB=function(b,r){if(this.Ta)throw a.g.sa("invalid call. Attribute Stream is read only.");
this.f[b]&=~r};b.pb=0;return b}();a.Wk=c;c=function(){function l(a){this.f=null;var b=a;2>b&&(b=2);this.f=new Int8Array(b);this.size=a}l.Zc=function(a,b){var k=new l(a),c=a,v=k.f;2>c&&(c=2);if(0!==b)for(var d=0;d<c;d++)v[d]=b;return k};l.lj=function(a){var b=new l(0);b.f=new Int8Array(a.f);b.size=a.size;return b};l.W=function(a,b){var k=new l(0);k.size=a.size;k.size>b&&(k.size=b);var c=k.size;2>c&&(c=2);k.f=new Int8Array(c);k.f.set(a.f.length<=c?a.f:a.f.subarray(0,c),0);return k};l.prototype.yb=function(a){0>=
a||(null==this.f?this.f=new Int8Array(a):a<=this.f.length||(0<this.f.length?(a=new Int8Array(a),a.set(this.f),this.f=a):this.f=new Int8Array(a)))};l.prototype.read=function(a){return this.f[a]};l.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};l.prototype.get=function(a){return this.f[a]};l.prototype.write=function(b,r){if(this.Ta)throw a.g.ya();this.f[b]=r};l.prototype.set=function(b,r){if(this.Ta)throw a.g.ya();this.f[b]=r};l.prototype.Sn=function(b,r){if(this.Ta)throw a.g.ya();this.f[b]=
r.x;this.f[b+1]=r.y};l.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};l.prototype.Gp=function(a){return l.W(this,a)};l.prototype.Bh=function(a){return this.read(a)};l.prototype.resize=function(b,r){void 0===r&&(r=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var k=new Int8Array(this.f,0,b);this.f=k}}else{b>this.f.length&&(k=a.J.truncate(64>b?Math.max(2*b,4):5*b/4),
k=new Int8Array(k),k.set(this.f),this.f=k);for(var k=this.f,l=this.size;l<b;l++)k[l]=r}this.size=b};l.prototype.df=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};l.prototype.Uk=function(a,b){this.write(a,b)};l.prototype.jj=function(b,r,k){for(var l=this.size;r<l&&r<k;r++)b=a.J.kg(this.read(r),b);return b};l.prototype.mc=function(a,b,k){if(null==a||!(a instanceof l))return!1;var c=this.size,
v=a.size;if(k>c||k>v&&c!=v)return!1;for(k>c&&(k=c);b<k;b++)if(this.read(b)!=a.read(b))return!1;return!0};l.prototype.nk=function(f,r,k,l,c,d,e){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();b(this.f,f+l,f,f+(e-f));this.f==r.f&&f<k&&(k+=l);if(c)this.f.set(r.f.subarray(k,k+l),f);else{c=l;for(e=0;e<l;e+=d){c-=d;for(var g=0;g<d;g++)this.f[f+e+g]=r.f[k+c+g]}}};l.prototype.ul=function(f,r,k,l){if(this.Ta)throw a.g.ya();l-=f;b(this.f,f+l,f,f+l);for(l=0;l<k;l++)this.f[f+l]=r};l.prototype.lg=
function(f,r,k){if(this.Ta)throw a.g.ya();b(this.f,f+2,f,f+(k-f));this.f[f]=r.x;this.f[f+1]=r.y};l.prototype.km=function(b,r,k,l,c,d){if(0>b||0>r||0>l)throw a.g.O();if(!c&&(0>=d||0!=r%d))throw a.g.O();if(k.size<l+r)throw a.g.O();if(0!=r)if(this.size<r+b&&this.resize(r+b),k==this)this.xi(b,r,l,c,d);else if(c)for(c=0;c<r;c++)this.f[b]=k.f[l],b++,l++;else if(l=l+r-d,1==d)for(c=0;c<r;c++)this.f[b]=k.f[l],b++,l--;else{c=0;for(r=a.J.truncate(r/d);c<r;c++){for(var e=0;e<d;e++)this.f[b+e]=k.f[l+e];b+=d;l-=
d}}};l.prototype.oj=function(f,r,k){if(this.Ta)throw a.g.ya();if(f+r>this.size)throw a.g.ya();0<k-(f+r)&&b(this.f,f,f+r,f+(k-(f+r))+r);this.size-=r};l.prototype.Hp=function(b,r,k){if(this.Ta)throw a.g.ya();if(1>k||0!=r%k)throw a.g.ya();for(var l=r>>1,c=0;c<l;c+=k){r-=k;for(var d=0;d<k;d++){var e=this.f[b+c+d];this.f[b+c+d]=this.f[b+r+d];this.f[b+r+d]=e}}};l.prototype.dh=function(b,r,k){if(0>r||0>k||0>r||k+r>this.size)throw a.g.O();for(var l=r;l<r+k;l++)this.f[l]=b};l.prototype.xi=function(b,r,k,l,
c){if(!l||b!=k)if(this.f.set(this.f.subarray(k,k+r),b),!l){k=b;b=b+r-c;l=0;for(r=a.J.truncate(r/2);l<r;l++){for(var d=0;d<c;d++){var e=this.f[k+d];this.f[k+d]=this.f[b+d];this.f[b+d]=e}k+=c;b-=c}}};l.prototype.Yp=function(b,r,k,l,c){if(0>b||0>r||0>l)throw a.g.O();if(0!=r){this.size<(r<<1)+b&&this.resize((r<<1)+b);c||(b+=r-1<<1);c=c?2:-2;for(r+=l;l<r;l++)this.f[b]=k[l].x,this.f[b+1]=k[l].y,b+=c}};l.prototype.Fp=function(b,r,k,l,c){if(0>b||0>r||0>l||this.size<r+b)throw a.g.O();if(c)for(c=0;c<r;c++)k[l+
c]=this.f[b+c];else for(l=l+r-1;b<r;b++)k[l]=this.f[b],l--};l.prototype.clear=function(a){a?this.resize(0):this.df(0)};l.prototype.yd=function(a,b,k){b=this.f.subarray(a,b);Array.prototype.sort.call(b,k);this.f.set(b,a)};l.prototype.wy=function(b,r){if(this.Ta)throw a.g.sa("invalid call. Attribute Stream is read only.");this.f[b]|=r};l.prototype.BB=function(b,r){if(this.Ta)throw a.g.sa("invalid call. Attribute Stream is read only.");this.f[b]&=~r};l.prototype.Qh=function(){return 1};return l}();a.Xu=
c})(y||(y={}));!0===y.ah.Sk&&(y.Wk=y.Xu);(function(a){var b=function(){function b(){}b.so=function(b,f){return a.Wk.Zc(b,f)};b.kl=function(b,f){return a.rd.Zc(b,f)};b.Rv=function(b,f,r){switch(b){case 1:b=a.rd.Zc(f,r);break;case 2:b=a.ha.Zc(f,r);break;case 4:b=a.Wk.Zc(f,r);break;default:throw a.g.xa();}return b};b.Sv=function(l,f){return b.Rv(a.qa.Qh(l),f*a.qa.Xa(l),a.qa.ue(l))};b.Dg=function(b,f){return a.ha.Zc(b,f)};b.$x=function(a){for(var b=0,r=[],b=0;b<a;b++)r.push(null);return r};return b}();
a.Bc=b})(y||(y={}));(function(a){var b=function(){function b(){}b.so=function(b,f){return a.Xu.Zc(b,f)};b.kl=function(b,f){return a.rd.Zc(b,f)};b.Rv=function(b,f,r){switch(b){case 1:b=a.rd.Zc(f,r);break;case 2:b=a.Wu.Zc(f,r);break;case 4:b=a.Xu.Zc(f,r);break;default:throw a.g.xa();}return b};b.Sv=function(b,f){return a.Bc.Rv(a.qa.Qh(b),f*a.qa.Xa(b),a.qa.ue(b))};b.Dg=function(b,f){return a.Wu.Zc(b,f)};b.$x=function(a){for(var b=0,r=[],b=0;b<a;b++)r.push(null);return r};return b}();a.RG=b})(y||(y={}));
!0===y.ah.Sk&&(y.Bc=y.RG);(function(a){a.da=function(){return function(a){void 0===a&&(a=0);this.o=a}}()})(y||(y={}));(function(a){var b=function(){function a(){}a.ob=function(b,r){return 0<=r?a.I(b):-a.I(b)};a.I=function(a){return 0>a?-a:a};a.Ih=function(a){return 3.552713678800501E-15>a};a.Xz=function(b,r,k){return a.I(b-r)<=k*(1+(a.I(b)+a.I(r))/2)};a.T=function(b,r){return a.Xz(b,r,3.552713678800501E-15)};a.vI=function(b){return 3.552713678800501E-15>=a.I(b)};a.Wc=function(b){return a.vI(b)};return a}();
a.l=b;var c=function(){function l(){}l.lm=function(a,r){var k=b.I(a),l=b.I(r),c=0;0!=k+l&&(k>l?(c=l/k,c=k*Math.sqrt(1+c*c)):(c=k/l,c=l*Math.sqrt(1+c*c)));return c};l.Cp=function(a,r,k,c,v){for(var d=[0,0,0],e=[0,0,0],g=0;2>=g;g++)r[g]-=a[g],k[g]-=r[g];k=d[1]*e[2]-d[2]*e[1];r=d[2]*e[0]-d[0]*e[2];d=d[0]*e[1]-d[1]*e[0];a=-1*(k*a[0]+r*a[1]+d*a[2]);c[0]=k;c[1]=r;c[2]=d;c[3]=a;e=l.jm(c);c[0]/=e;c[1]/=e;c[2]/=e;c[3]/=e;0!=v&&(e=b.Wc(d)?b.Wc(a)?b.ob(1,r):-b.ob(1,a):b.ob(1,d),e*=b.ob(1,v),c[0]*=e,c[1]*=e,
c[2]*=e,c[3]*=e)};l.Tu=function(a,b,k){k[0]=a[1]*b[2]-b[1]*a[2];k[1]=a[2]*b[0]-b[2]*a[0];k[2]=a[0]*b[1]-b[0]*a[1]};l.Pr=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};l.jm=function(a){return l.lm(l.lm(a[0],a[1]),a[2])};l.xm=function(a,b,k,c,v,d){var e=l.n(1,a,b),g=Math.cos(b);c.o=(e+0)*g*Math.cos(k);v.o=(e+0)*g*Math.sin(k);d.o=(e*(1-a)+0)*Math.sin(b)};l.IK=function(a,r,k,c,v,d,e){var g=l.lm(r,k),h=1*Math.sqrt(1-a),z=h/1;if(b.T(g,0))d.o=0,v.o=b.ob(1.570796326794897,c),e.o=b.I(c)-h;else{d.o=Math.atan2(k,
r);k=Math.atan2(1*c,h*g);d=Math.cos(k);var m=Math.sin(k);r=h*a/(1-a);a*=1;k=Math.atan2(c+r*m*m*m,g-a*d*d*d);3.141592653589793<b.I(k)&&(k=b.ob(3.141592653589793,k)-k);k=Math.atan(z*Math.tan(k));m=Math.sin(k);d=Math.cos(k);v.o=Math.atan2(c+r*m*m*m,g-a*d*d*d);1.570796326794897<b.I(v.o)&&(v.o=b.ob(3.141592653589793,v.o)-v.o);k=Math.atan(z*Math.tan(v.o));m=Math.sin(k);d=Math.cos(k);e.o=(c-h*m)*Math.sin(v.o)+(g-1*d)*Math.cos(v.o)}};l.n=function(a,b,k){k=Math.sin(k);return a/Math.sqrt(1-b*k*k)};l.rr=function(a,
b){return Math.atan2(Math.sin(b)*(1-a),Math.cos(b))};l.Si=function(a,b){return Math.atan2(Math.sin(b),Math.cos(b)*(1-a))};l.yn=function(a,r){if(b.Ih(a)||0==r||b.T(b.I(r),1.570796326794897))return r;var k,c,v,d,e,g,h,z,m;if(0.006884661117170036>a){d=Math.sqrt(1-a);e=(1-d)/(1+d);g=e*e;h=e*g;z=e*h;k=e*z;m=e*k;c=e*m;v=1.572916666666667*h-3.2578125*k+4.295068359375*c;d=2.142578125*z-6.071484375*m;var q=3.129296875*k-11.249837239583334*c,n=4.775276692708333*m,s=7.958636765252976*c,t=Math.cos(2*r);return r+
Math.sin(2*r)*(1.5*e-0.84375*h+0.525390625*k-0.2688395182291667*c-v+q-s+t*(2*(1.3125*g-1.71875*z+1.650146484375*m)-4*d+6*n+t*(4*v-12*q+24*s+t*(8*d-32*n+t*(16*q-80*s+t*(32*n+64*t*s))))))}d=1-a;e=a/2;g=b.I(r);h=g*l.Xr(a)/(1.570796326794897*d);z=9999;m=g;for(g=0;1E-16<z&&50>g;g++)c=l.Tk(a,m),k=(l.Lz(m,a)-e*Math.sin(2*m)/c)/d-h,c=1/(c*c*c),v=k/c,k=m-v,z=b.I(v),m=k;return 0<=r?m:-m};l.mR=function(a,r){return b.Ih(r)?a:a*l.Xr(r)/1.570796326794897};l.X=function(a){a=l.Hz(a,6.283185307179586);return 0>a?
a+6.283185307179586:3.141592653589793>b.I(a)||b.T(b.I(a),3.141592653589793)?a:a-6.283185307179586};l.Hz=function(a,b){return a-Math.floor(a/b)*b};l.gg=function(a,b){if(0.006884661117170036>b){var k=Math.sqrt(1-b),k=(1-k)/(1+k),c=k*k,v=c*c;return 1.570796326794897*a/(1+k)*(1+0.25*c+0.015625*v+0.00390625*c*v)}return a*l.Xr(b)};l.Bp=function(a,r){var k=b.ob(1,Math.sin(r)),c=b.I(l.Hz(r,3.141592653589793));r=1.570796326794897>=c?c:3.141592653589793-c;var v;b.T(r,1.570796326794897)?v=r:v=Math.atan(Math.sqrt(1-
a)*Math.tan(r));return v*k};l.q=function(a,b,k){if(0.006884661117170036>b){b=Math.sqrt(1-b);b=(1-b)/(1+b);var c=b*b,v=b*c,d=b*v,e=b*d,g=b*e,h=b*g,z=-0.7291666666666666*v+0.2278645833333333*e+0.03987630208333334*h,m=0.615234375*d-0.21533203125*g,q=-0.54140625*e+0.20302734375*h,n=0.48876953125*g,s=-0.4488699776785715*h,t=Math.cos(2*k);return a/(1+b)*((1+0.25*c+0.015625*d+0.00390625*g)*k+Math.sin(2*k)*(-1.5*b+0.1875*v+0.0234375*e+0.00732421875*h-z+q-s+t*(2*(0.9375*c-0.234375*d-0.03662109375*g)-4*m+6*
n+t*(4*z-12*q+24*s+t*(8*m-32*n+t*(16*q-80*s+t*(32*n+64*t*s)))))))}return a*(l.Lz(k,b)-0.5*b*Math.sin(2*k)/l.Tk(b,k))};l.Tk=function(a,b){var k=Math.sin(b);return Math.sqrt(1-a*k*k)};l.Xr=function(a){return b.Xz(a,1,2.220446049250313E-16)?1:1>a?l.hs(0,1-a)-a/3*l.gs(0,1-a):NaN};l.Lz=function(f,r){var k=b.ob(1,f);f=b.I(f);var c=Math.floor(f/1.570796326794897),H;if(1<r)H=0==f?0:NaN;else if(b.Wc(c))H=l.sin(f),H=H*l.hs(1-H*H,1-r*H*H)-r/3*H*H*H*l.gs(1-H*H,1-r*H*H);else{H=a.J.truncate(c%2);var d=l.Xr(r);
0<H?(H=Math.sin(1.570796326794897*(c+1)-f),H=H*l.hs(1-H*H,1-r*H*H)-r/3*H*H*H*l.gs(1-H*H,1-r*H*H),H=d*(c+1)-H):(f-=1.570796326794897*c,H=Math.sin(f),H=H*l.hs(1-H*H,1-r*H*H)-r/3*H*H*H*l.gs(1-H*H,1-r*H*H),H=d*c+H)}return H*k};l.sin=function(a){a=l.X(a);var r=b.ob(1,a);a=b.I(a);return b.T(a,3.141592653589793)?0:b.T(a,1.570796326794897)?1*r:Math.sin(a)*r};l.gs=function(a,r){for(var k=a,l=r,c=1,v=0,d=1,e,g,h,z;;){e=0.2*(k+l+3*c);g=(e-k)/e;h=(e-l)/e;z=(e-c)/e;if(1E-4>b.I(g)&&1E-4>b.I(h)&&1E-4>b.I(z))break;
z=Math.sqrt(k);g=Math.sqrt(l);e=Math.sqrt(c);z=z*(g+e)+g*e;v+=d/(e*(c+z));d*=0.25;k=0.25*(k+z);l=0.25*(l+z);c=0.25*(c+z)}k=g*h;c=z*z;l=k-c;c=k-6*c;g=c+l+l;return 3*v+d*(1+c*(-0.2142857142857143+0.10227272727272728*c-0.1730769230769231*z*g)+z*(0.1666666666666667*g+z*(-0.4090909090909091*l+0.1153846153846154*z*k)))/(e*Math.sqrt(e))};l.hs=function(a,r){for(var k=a,l=r,c,v,d,e,g=1;;g=0.25*(g+c)){c=(k+l+g)/3;v=2-(c+k)/c;d=2-(c+l)/c;e=2-(c+g)/c;if(1E-4>b.I(v)&&1E-4>b.I(d)&&1E-4>b.I(e))break;c=Math.sqrt(k);
v=Math.sqrt(l);d=Math.sqrt(g);c=c*(v+d)+v*d;k=0.25*(k+c);l=0.25*(l+c)}k=v*d-e*e;l=v*d*e;return(1+(0.04166666666666666*k-0.1-0.06818181818181818*l)*k+0.07142857142857142*l)/Math.sqrt(c)};l.pu=function(a,r){if(b.Ih(a)||0==r||b.T(b.I(r),1.570796326794897))return r;var k,l,c;if(0.006884661117170036>a){k=a*a;l=a*k;c=a*l;var v=a*c,d=a*v,e=a*d,g=-(0.02708333333333333*l+0.03430059523809524*c+0.03149181547619048*v+0.02634359154541446*d+0.02156896735835538*e),h=0.007669890873015873*c+0.01299603174603175*v+
0.0148051353064374*d+0.01454454953803912*e,z=-(0.002275545634920635*v+0.004830845032667949*d+0.006558395368616723*e),m=6.957236677288761E-4*d+0.001775193002406544*e,q=-(2.17324089394402E-4*e),n=Math.cos(2*r);return r+Math.sin(2*r)*(-(0.5*a+0.2083333333333333*k+0.09375*l+0.04878472222222222*c+0.02916666666666667*v+0.01938905423280423*d+0.01388255931712963*e)-g+z-q+n*(2*(0.1041666666666667*k+0.0875*l+0.06050347222222222*c+0.04151785714285714*v+0.02958958540013228*d+0.02203667534722222*e)-4*h+6*m+n*
(4*g-12*z+24*q+n*(8*h-32*m+n*(16*z-80*q+n*(32*m+64*n*q))))))}0==r||b.T(b.I(r),1.570796326794897)?k=r:(l=Math.sqrt(a),c=l*Math.sin(r),k=Math.tan(0.7853981633974483+r/2)*Math.pow((1-c)/(1+c),l/2),k=2*Math.atan(k)-1.570796326794897);return k};l.ZK=function(a,r){if(b.Ih(a)||0==r||b.T(b.I(r),1.570796326794897))return r;var k,l;if(0.006884661117170036>a){n=a*a;z=a*n;m=a*z;k=a*m;q=a*k;l=a*q;var c=0.05833333333333333*z+0.07232142857142858*m+0.05634300595238095*k+0.0355325796406526*q+0.020235546186067*l,v=
0.02653149801587302*m+0.04379960317460317*k+0.0429211791776896*q+0.03255384637546096*l,d=0.01294022817460318*k+0.02668104344536636*q+0.03155651254609588*l,e=0.00659454790965208*q+0.0163075268674227*l,g=0.003463473736911237*l,h=Math.cos(2*r);return r+Math.sin(2*r)*(0.5*a+0.2083333333333333*n+0.08333333333333333*z+0.03611111111111111*m+0.01875*k+0.01195601851851852*q+0.008863673941798942*l-c+d-g+h*(2*(0.1458333333333333*n+0.1208333333333333*z+0.07039930555555556*m+0.03616071428571429*k+0.01839451058201058*
q+0.01017113095238095*l)-4*v+6*e+h*(4*c-12*d+24*g+h*(8*v-32*e+h*(16*d-80*g+h*(32*e+64*h*g))))))}for(var z=Math.sqrt(a),m=z/2,q=Math.tan(0.7853981633974483+r/2),c=0,v=1,n=r;0!=v;n=l)if(k=z*Math.sin(n),l=q*Math.pow((1+k)/(1-k),m),l=2*Math.atan(l)-1.570796326794897,c++,b.T(l,n)||3E4<c)v=0;return n};return l}();a.v=c})(y||(y={}));(function(a){var b=function(){function b(){}b.Gb=function(b,f,r,k,c,H,d,e){if(null!=H||null!=d||null!=e){k=a.v.X(k);f=a.v.X(f);r=a.v.X(r);c=a.v.X(c);1.570796326794897<a.l.I(r)&&
(r=a.l.ob(3.141592653589793,r)-r,f=a.v.X(f+3.141592653589793));1.570796326794897<a.l.I(c)&&(c=a.l.ob(3.141592653589793,c)-c,k=a.v.X(k+3.141592653589793));var g=a.v.X(k-f);if(a.l.T(r,c)&&(a.l.T(f,k)||a.l.T(a.l.I(r),1.570796326794897)))null!=H&&(H.o=0),null!=d&&(d.o=0),null!=e&&(e.o=0);else{if(a.l.T(r,-c)){if(a.l.T(a.l.I(r),1.570796326794897)){null!=H&&(H.o=3.141592653589793*b);null!=d&&(d.o=0<r?a.v.X(3.141592653589793-a.v.X(k)):a.v.X(k));null!=e&&(e.o=0<r?a.v.X(k):a.v.X(3.141592653589793-a.v.X(k)));
return}if(a.l.T(a.l.I(g),3.141592653589793)){null!=H&&(H.o=3.141592653589793*b);null!=d&&(d.o=0);null!=e&&(e.o=0);return}}var h=1.570796326794897==a.l.I(r)?0:Math.cos(r),z=Math.sin(r),m=1.570796326794897==a.l.I(c)?0:Math.cos(c),q=Math.sin(c),n=1.570796326794897==a.l.I(g)?0:Math.cos(g),s=3.141592653589793==a.l.I(g)?0:Math.sin(g);if(null!=H){var t=Math.sin((c-r)/2),g=Math.sin(g/2),t=2*Math.asin(Math.sqrt(t*t+h*m*g*g));H.o=t*b}null!=d&&(a.l.T(a.l.I(r),1.570796326794897)?d.o=0>r?k:a.v.X(3.141592653589793-
k):d.o=Math.atan2(m*s,h*q-z*m*n));null!=e&&(a.l.T(a.l.I(c),1.570796326794897)?e.o=0>c?f:a.v.X(3.141592653589793-f):(e.o=Math.atan2(h*s,q*h*n-m*z),e.o=a.v.X(e.o+3.141592653589793)))}}};b.hf=function(b,f,r,k,c,d,e){if(null!=d||null!=e){f=a.v.X(f);r=a.v.X(r);1.570796326794897<a.l.I(r)&&(r=a.l.ob(3.141592653589793,r)-r,f=a.v.X(f+3.141592653589793));a.l.T(a.l.I(r),1.570796326794897)&&(f=0);c=a.v.X(c);var g=a.l.T(a.l.I(c),1.570796326794897)?0:Math.cos(c),h=a.l.T(a.l.I(c),3.141592653589793)?0:Math.sin(c),
z=a.l.T(a.l.I(r),1.570796326794897)?0:Math.cos(r),m=Math.sin(r);b=k/b;k=a.l.T(a.l.I(b),1.570796326794897)?0:Math.cos(b);var q=a.l.T(a.l.I(b),3.141592653589793)?0:Math.sin(b),n=Math.asin(m*k+z*q*g);null!=e&&(e.o=n);null!=d&&(d.o=a.l.T(a.l.I(n),1.570796326794897)?a.l.T(r,-n)?0>n?c:a.v.X(3.141592653589793-c):f:a.l.T(a.l.I(r),1.570796326794897)&&a.l.T(b,3.141592653589793)?0>r?c:a.v.X(3.141592653589793-c):a.v.X(f+Math.atan2(q*h,z*k-m*q*g)))}};return b}();a.zg=b})(y||(y={}));(function(a){var b=function(){function b(){}
b.Gb=function(b,f,r,k,c,d,e,g,h){var z=new a.da(0),m=new a.da(0),q=[0,0,0],n=[0,0,0],s=[0,0,0],t=new a.da(0),u=new a.da(0),w=new a.da(0),x=new a.da(0),A=new a.da(0);if(null!=e||null!=g||null!=h)if(a.l.Ih(f))a.zg.Gb(b,r,k,c,d,e,g,h);else{c=a.v.X(c);r=a.v.X(r);var O=a.v.X(c-r);if(a.l.T(k,d)&&(a.l.T(r,c)||a.l.T(a.l.I(k),1.570796326794897)))null!=e&&(e.o=0),null!=g&&(g.o=0),null!=h&&(h.o=0);else{if(a.l.T(k,-d)){if(a.l.T(a.l.I(k),1.570796326794897)){null!=e&&(e.o=2*a.v.gg(b,f));null!=g&&(g.o=0<k?a.v.X(3.141592653589793-
a.v.X(c)):a.v.X(c));null!=h&&(h.o=0<k?a.v.X(c):a.v.X(3.141592653589793-a.v.X(c)));return}a.l.T(a.l.I(O),3.141592653589793)&&(null!=e&&(e.o=2*a.v.gg(b,f)),null!=g&&(g.o=0),null!=h&&(h.o=0))}else if(a.l.T(a.l.I(k),1.570796326794897)||a.l.T(a.l.I(d),1.570796326794897))a.l.T(a.l.I(k),1.570796326794897)?r=c:c=r;var y=0,C;0>O&&(y=1,C=r,r=c,c=C,C=k,k=d,d=C);var O=a.v.rr(f,k),G=a.v.rr(f,d);if(null!=g||null!=h)a.zg.Gb(b,r,O,c,G,null,z,m),z=Math.atan2(Math.sin(z.o)*Math.cos(k-O),Math.cos(z.o)),m=Math.atan2(Math.sin(m.o)*
Math.cos(d-G),Math.cos(m.o)),0!=y&&(C=z,z=m,m=C),null!=g&&(g.o=z),null!=h&&(h.o=m);null!=e&&(a.v.xm(f,k,r,w,x,A),q[0]=w.o,q[1]=x.o,q[2]=A.o,a.v.xm(f,d,c,w,x,A),n[0]=w.o,n[1]=x.o,n[2]=A.o,s[0]=q[1]*n[2]-n[1]*q[2],s[1]=-(q[0]*n[2]-n[0]*q[2]),s[2]=q[0]*n[1]-n[0]*q[1],g=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]),f=1-a.v.Tk(f,a.v.Bp(f,a.v.Si(f,Math.acos(s[2]/g)))),f*=2-f,g=Math.atan2(-s[1],-s[0]),s=a.v.X(g-1.570796326794897),g=a.v.X(g+1.570796326794897),s=a.l.I(a.v.X(r-s))<=a.l.I(a.v.X(r-g))?s:g,a.zg.Gb(1,
s,0,r,O,t,null,null),a.zg.Gb(1,s,0,c,G,u,null,null),3.141592653589793<t.o+u.o&&(s=a.v.X(s+3.141592653589793),a.zg.Gb(1,s,0,r,O,t,null,null),a.zg.Gb(1,s,0,c,G,u,null,null)),t.o*=a.l.ob(1,k),u.o*=a.l.ob(1,d),t.o=a.v.Si(f,t.o),u.o=a.v.Si(f,u.o),r=a.v.q(b,f,t.o),b=a.v.q(b,f,u.o),e.o=a.l.I(b-r))}}};b.hf=function(b,f,r,k,c,d,e,g){var h=0,z=new a.da(0),m=new a.da(0),q=[0,0,0],n=[0,0,0],s=new a.da(0),t=new a.da(0),u=new a.da(0);if(null!=e||null!=g)if(a.l.Ih(f))a.zg.hf(b,r,k,c,d,e,g);else if(a.l.Wc(c))null!=
e&&(e.o=r),null!=g&&(g.o=k);else{d=a.v.X(d);0>c&&(c=a.l.I(c),d=a.v.X(d+3.141592653589793));r=a.v.X(r);k=a.v.X(k);1.570796326794897<a.l.I(k)&&(r=a.v.X(r+3.141592653589793),k=a.l.ob(3.141592653589793,k)-k);a.l.T(a.l.I(k),1.570796326794897)&&(r=0);var w;if(a.l.Wc(k))w=a.l.I(1.570796326794897-a.l.I(d)),w=a.v.Si(f,w),w=1-a.v.Tk(f,a.v.Bp(f,w)),w*=2-w,b=1.570796326794897*(c/a.v.gg(b,w)),b=a.v.yn(w,b),b=a.v.rr(w,b),a.zg.hf(1,r,k,b,d,e,z),null!=g&&(h=z.o),null!=g&&(g.o=a.v.Si(f,h));else if(a.l.T(a.l.I(k),
1.570796326794897))h=a.v.gg(b,f),z=2*h,b=a.l.ob(1.570796326794897,k),d=0<b?a.v.X(3.141592653589793-d):d,k=h-c,a.l.I(k)<=h?null!=e&&(e.o=d):(k=Math.floor(c/z),0==a.J.truncate(k%2)?(null!=e&&(e.o=d),k=h-(c-k*z)):(null!=e&&(e.o=a.v.X(d+3.141592653589793)),c=(k+1)*z-c,k=h-c)),null!=g&&(g.o=a.v.yn(f,k/h*b));else{w=a.v.rr(f,k);d=Math.atan2(Math.sin(d),Math.cos(d)*Math.cos(k-w));var x=a.J.truncate(a.l.ob(1,w))*(1.570796326794897>=a.l.I(d)?1:-1);d=a.v.X(r+Math.atan(Math.tan(d)*-Math.sin(w)));a.zg.Gb(b,d,
0,r,w,null,m,null);w=a.l.I(1.570796326794897-a.l.I(m.o));w=a.v.Si(f,w);w=1-a.v.Tk(f,a.v.Bp(f,w));w*=2-w;a.v.xm(f,0,d,s,t,u);q[0]=s.o;q[1]=t.o;q[2]=u.o;a.v.xm(f,k,r,s,t,u);n[0]=s.o;n[1]=t.o;n[2]=u.o;k=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);k=Math.acos((q[0]*n[0]+q[1]*n[1]+q[2]*n[2])/k);k=a.v.Si(w,k);k=a.v.q(b,w,k)+c*x;c=0<k?m.o:a.v.X(m.o+3.141592653589793);b=1.570796326794897*(a.l.I(k)/a.v.gg(b,w));b=a.v.yn(w,b);b=a.v.rr(w,b);a.zg.hf(1,d,0,b,c,e,z);null!=g&&(h=z.o);null!=g&&(g.o=a.v.Si(f,h))}}};
return b}();a.Yj=b})(y||(y={}));(function(a){var b=function(){function b(){}b.Gb=function(b,f,r,k,c,d,e,g,h){var z=0,m=0,q=0;if(null!=e||null!=g||null!=h)if(a.l.Ih(f))a.zg.Gb(b,r,k,c,d,e,g,h);else{var n=a.v.X(c-r);if(a.l.T(k,d)&&(a.l.Wc(n)||a.l.T(a.l.I(k),1.570796326794897)))null!=e&&(e.o=0),null!=g&&(g.o=0),null!=h&&(h.o=0);else{if(a.l.T(k,-d)){if(a.l.T(a.l.I(k),1.570796326794897)){null!=e&&(e.o=2*a.v.gg(b,f));null!=g&&(g.o=0<k?a.v.X(3.141592653589793-a.v.X(c)):a.v.X(c));null!=h&&(h.o=0<k?a.v.X(c):
a.v.X(3.141592653589793-a.v.X(c)));return}a.l.T(a.l.I(n),3.141592653589793)&&(null!=e&&(e.o=2*a.v.gg(b,f)),null!=g&&(g.o=0),null!=h&&(h.o=0))}else{if(a.l.T(a.l.I(k),1.570796326794897)||a.l.T(a.l.I(d),1.570796326794897)){a.Yj.Gb(b,f,r,k,c,d,e,g,h);return}if(a.l.Wc(n)||a.l.T(a.l.I(n),3.141592653589793)){a.Yj.Gb(b,f,r,k,c,d,e,g,h);return}}var s=1-Math.sqrt(1-f),t=f/(1-f),u=b*(1-s);b=a.v.Bp(f,k);var w=a.v.Bp(f,d);f=1.570796326794897==a.l.I(b)?0:Math.cos(b);var x=Math.sin(b),A=1.570796326794897==a.l.I(w)?
0:Math.cos(w),O=Math.sin(w),y=n,C=Math.cos(y),G=Math.sin(y),D=1,M=0,K,N,P,R,E;do{K=y;N=Math.sqrt(Math.pow(A*G,2)+Math.pow(f*O-x*A*C,2));P=x*O+f*A*C;R=Math.atan2(N,P);if(0==N){D=0;break}E=f*A*G/N;m=Math.cos(Math.asin(E));z=m*m;m=P-2*x*O/z;1<a.l.I(m)&&(m=a.l.ob(1,m));q=m*m;y=s/16*z*(4+s*(4-3*z));y=n+(1-y)*s*E*(R+y*N*(m+y*P*(2*q-1)));C=Math.cos(y);G=Math.sin(y);M++;if(3.141592653589793<a.l.I(y)&&30<M){D=0;break}}while(5E3>=M&&!a.l.T(K,y));if(0!=D)t*=z,s=t*(256+t*(-128+t*(74-47*t)))/1024,null!=e&&(e.o=
u*(1+t*(4096+t*(-768+t*(320-175*t)))/16384)*(R-s*N*(m+s/4*(P*(2*q-1)-s/6*m*(4*N*N-3)*(4*q-3))))),null!=g&&(a.l.T(a.l.I(k),1.570796326794897)?g.o=0>k?c:a.v.X(3.141592653589793-c):g.o=Math.atan2(A*G,f*O-x*A*C)),null!=h&&(a.l.T(a.l.I(d),1.570796326794897)?h.o=0>d?r:a.v.X(3.141592653589793-r):(h.o=Math.atan2(f*G,f*O*C-x*A),h.o=a.v.X(h.o+3.141592653589793)));else{y=a.l.ob(3.141592653589793,n);P=x*O-f*A;R=Math.acos(P);N=Math.sin(R);m=1;M=E=0;do q=E,z=m*m,C=z*z,E=s*z*(1+s+s*s),m=s*s*C*(1+2.25*s),D=s*s*s*
C*z,C=1-0.25*E+0.1875*m-0.1953125*D,E=0.25*E-0.25*m+0.29296875*D,G=0.03125*m-0.05859375*D,D*=0.00651041666666667,m=P-2*x*O/z,1<a.l.I(m)&&(m=a.l.ob(1,m)),K=Math.acos(m),z=Math.cos(2*K),P=Math.cos(3*K),E=a.l.T(k,-d)?a.v.X(3.141592653589793-n)/(3.141592653589793*s*C):a.v.X(y-n)/(s*(C*R+E*N*m+G*Math.sin(2*R)*z+D*Math.sin(3*R)*P)),G=E*N/(f*A),y=1.570796326794897<a.l.I(n)?a.l.ob(3.141592653589793,G)-Math.asin(G):Math.asin(G),C=Math.cos(y),N=Math.sqrt(Math.pow(A*G,2)+Math.pow(f*O-x*A*C,2)),R=3.141592653589793-
Math.asin(a.l.I(N)),P=Math.cos(R),m=Math.cos(Math.asin(E)),M++;while(70>=M&&!a.l.T(q,E));null!=e&&(z=m*m,t*=z,C=1+t*(4096+t*(-768+t*(320-175*t)))/16384,a.l.T(k,-d)?e.o=3.141592653589793*u*C:(m=P-2*x*O/z,K=Math.acos(m),z=Math.cos(2*K),P=Math.cos(3*K),M=Math.cos(4*K),e.o=u*(C*R+t*(-512+t*(128+t*(-60+35*t)))/2048*N*m+t*(-4+5*t)/6144*t*t*Math.sin(2*R)*z+D*Math.sin(3*R)*P+-7.62939453125E-5*t*t*t*t*Math.sin(4*R)*M)));null!=g&&(a.l.Wc(k)&&a.l.Wc(d)?(m=Math.sqrt(1-E*E),g.o=Math.acos(m),0>n&&(g.o*=-1)):a.l.T(a.l.I(k),
1.570796326794897)?g.o=0>k?c:a.v.X(3.141592653589793-c):(e=E/f,u=Math.sqrt(1-e*e),0>f*O-x*A*Math.cos(y)&&(u*=-1),g.o=Math.atan2(e,u),a.l.T(k,-d)&&a.l.I(a.v.X(r-c))>3.141592653589793*(1-s*Math.cos(k))&&(0<k&&1.570796326794897>a.l.I(g.o)||0>k&&1.570796326794897<a.l.I(g.o))&&(g.o=a.l.ob(3.141592653589793,g.o)-g.o)));if(null!=h)if(a.l.Wc(k)&&a.l.Wc(d))m=Math.sqrt(1-E*E),h.o=Math.acos(m),0<=n&&(h.o*=-1);else if(a.l.T(a.l.I(d),1.570796326794897))h.o=0>d?r:a.v.X(3.141592653589793-r);else if(n=E/A,e=Math.sqrt(1-
n*n),u=Math.sin(y/2),0>Math.sin(w-b)-2*f*O*u*u&&(e*=-1),h.o=Math.atan2(n,e),h.o=a.v.X(h.o+3.141592653589793),a.l.T(k,-d)&&!a.l.Wc(k)&&!a.l.T(a.l.I(k),1.570796326794897)&&a.l.I(a.v.X(r-c))>3.141592653589793*(1-s*Math.cos(k))&&(null!=g?u=g.o:(e=E/f,u=Math.sqrt(1-e*e),0>f*O-x*A*Math.cos(y)&&(u*=-1),u=Math.atan2(e,u),a.l.T(k,-d)&&a.l.I(a.v.X(r-c))>3.141592653589793*(1-s*Math.cos(k))&&(0<k&&1.570796326794897>a.l.I(u)||0>k&&1.570796326794897<a.l.I(u))&&(u=a.l.ob(3.141592653589793,u)-u)),1.570796326794897>=
a.l.I(u)&&1.570796326794897<a.l.I(h.o)||1.570796326794897<=a.l.I(u)&&1.570796326794897>a.l.I(h.o)))h.o=-1*a.v.X(h.o+3.141592653589793)}}}};b.hf=function(b,f,r,k,c,d,e,g){if(null!=e||null!=g)if(a.l.Ih(f))a.zg.hf(b,r,k,c,d,e,g);else if(d=a.v.X(d),a.l.T(a.l.I(k),1.570796326794897)||a.l.Wc(d)||a.l.T(a.l.I(d),3.141592653589793))a.Yj.hf(b,f,r,k,c,d,e,g);else{var h=1.570796326794897==a.l.I(d)?0:Math.cos(d),z=3.141592653589793==a.l.I(d)?0:Math.sin(d);a.l.T(a.l.I(k),1.570796326794897)&&(r=0);d=1-Math.sqrt(1-
f);var m=f/(1-f),q=b*(1-d);b=a.v.Bp(f,k);f=1.570796326794897==a.l.I(b)?0:Math.cos(b);k=Math.sin(b);b=Math.atan2(Math.tan(b),h);var n=f*z,s=n*n,t=1-s,u=m*t,m=u*(256+u*(-128+u*(74-47*u)))/1024,w=m/4,x=m/6,A=c/(q*(1+u*(4096+u*(-768+u*(320-175*u)))/16384)),y=A,O;do{O=y;var q=1.570796326794897==a.l.I(y)?0:Math.cos(y),u=3.141592653589793==a.l.I(y)?0:Math.sin(y),C=u*u;c=Math.cos(2*b+y);y=c*c;y=m*u*(c+w*(q*(2*y-1)-x*c*(4*C-3)*(4*y-3)))+A}while(!a.l.T(O,y));q=1.570796326794897==a.l.I(y)?0:Math.cos(y);u=3.141592653589793==
a.l.I(y)?0:Math.sin(y);null!=e&&(z=Math.atan2(u*z,f*q-k*u*h),t=d/16*t*(4+d*(4-3*t)),c=Math.cos(2*b+y),e.o=a.v.X(r+(z-(1-t)*d*n*(y+t*u*(c+t*q*(2*c*c-1))))));null!=g&&(t=k*u-f*q*h,t=s+t*t,t=(1-d)*Math.sqrt(t),g.o=Math.atan2(k*q+f*u*h,t))}};return b}();a.bs=b})(y||(y={}));(function(a){var b=function(){function b(){}b.Gb=function(b,f,r,k,c,d,e,g,h){var z=a.v.X(c-r),m=a.l.T(a.l.I(k),1.570796326794897),q=a.l.T(a.l.I(d),1.570796326794897);if(a.l.T(k,d)&&(a.l.Wc(z)||m))null!=e&&(e.o=0),null!=g&&(g.o=0),null!=
h&&(h.o=0);else{var n,s;a.l.Ih(f)?(n=Math.sin(k),s=Math.sin(d),n=Math.sqrt((1+n)/(1-n)),s=Math.sqrt((1+s)/(1-s)),n=Math.log(s)-Math.log(n),n=Math.atan2(z,n),null!=e&&(e.o=a.l.T(k,d)?a.l.I(b*Math.cos(k)*z):a.l.I((b*d-b*k)/Math.cos(n)))):(n=a.v.pu(f,k),s=a.v.pu(f,d),n=Math.sin(n),s=Math.sin(s),n=Math.sqrt((1+n)/(1-n)),s=Math.sqrt((1+s)/(1-s)),n=Math.log(s)-Math.log(n),n=Math.atan2(z,n),null!=e&&(a.l.T(k,d)?e.o=a.l.I(b*z*Math.cos(k)/a.v.Tk(f,k)):(z=a.v.q(b,f,k),b=a.v.q(b,f,d),e.o=a.l.I((b-z)/Math.cos(n)))));
if(null!=g||null!=h)e=a.v.X(n+3.141592653589793),m&&q||!m&&!q||(m?n=0>k?c:a.v.X(3.141592653589793-c):q&&(e=0>d?r:a.v.X(3.141592653589793-r))),null!=g&&(g.o=n),null!=h&&(h.o=e)}};b.hf=function(b,f,r,k,c,d,e,g){d=a.v.X(d);0>c&&(c=a.l.I(c),d=a.v.X(d+3.141592653589793));a.l.Ih(f)?a.l.T(a.l.I(k),1.570796326794897)?(r=0>k?d:a.v.X(3.141592653589793-d),d=c/b%6.283185307179586,3.141592653589793>=d?b=k-a.l.ob(d,k):(r=a.v.X(r+3.141592653589793),b=-k+a.l.ob(d-3.141592653589793,k))):a.l.T(a.l.I(d),1.570796326794897)?
(r=a.v.X(r+a.l.ob(c,d)/(b*Math.cos(k))),b=k):(b=k+c*Math.cos(d)/b,1.570796326794897<a.l.I(b)&&(b=1.570796326794897),a.l.T(a.l.I(b),1.570796326794897)&&(a.l.Wc(d)||a.l.T(a.l.I(d),3.141592653589793))||(1.570796316258184<a.l.I(b)&&(b=a.l.ob(1.570796316258184,b)),f=Math.sin(k),k=Math.sin(b),f=Math.sqrt((1+f)/(1-f)),k=Math.sqrt((1+k)/(1-k)),f=Math.log(k)-Math.log(f),r=a.v.X(r+Math.tan(d)*f))):a.l.T(a.l.I(k),1.570796326794897)?(r=0>k?d:a.v.X(3.141592653589793-d),d=c/a.v.mR(b,f),d%=6.283185307179586,3.141592653589793>=
d?(b=k-a.l.ob(d,k),b=a.v.yn(f,b)):(r=a.v.X(r+3.141592653589793),b=-k+a.l.ob(d-3.141592653589793,k),b=a.v.yn(f,b))):a.l.T(a.l.I(d),1.570796326794897)?(r=a.v.X(r+a.l.ob(c,d)*a.v.Tk(f,k)/(b*Math.cos(k))),b=k):(b=1.570796326794897*(c*Math.cos(d)+a.v.q(b,f,k))/a.v.gg(b,f),1.570796326794897<a.l.I(b)&&(b=a.l.ob(1.570796326794897,b)),b=a.v.yn(f,b),a.l.T(a.l.I(b),1.570796326794897)&&(a.l.Wc(d)||a.l.T(a.l.I(d),3.141592653589793))||(c=a.v.pu(f,k),k=a.v.pu(f,b),1.570796316258184<a.l.I(k)&&(k=a.l.ob(1.570796316258184,
b),b=a.v.ZK(f,k)),f=Math.sin(c),k=Math.sin(k),f=Math.sqrt((1+f)/(1-f)),k=Math.sqrt((1+k)/(1-k)),f=Math.log(k)-Math.log(f),r=a.v.X(r+Math.tan(d)*f)));null!=e&&(e.o=r);null!=g&&(g.o=b)};return b}();a.Zz=b})(y||(y={}));(function(a){var b=function(){function b(){}b.fw=function(b,f,r,k,c,d,e){a.bs.Gb(b,f,r,k,c,d,null,e,null)};b.Ph=function(b,f,r,k,c,d,e,g){a.bs.hf(b,f,r,k,c,d,e,g)};b.Sd=function(b,f,r,k,c,d,e,g,h,z){switch(z){case 2:a.Yj.Gb(b,f,r,k,c,d,e,g,h);break;case 3:a.$z.Gb(b,f,r,k,c,d,e,g,h);break;
case 1:a.Zz.Gb(b,f,r,k,c,d,e,g,h);break;default:a.bs.Gb(b,f,r,k,c,d,e,g,h)}};b.ek=function(b,f,r,k,c,d,e,g,h){switch(h){case 2:a.Yj.hf(b,f,r,k,c,d,e,g);break;case 3:a.$z.hf(b,f,r,k,c,d,e,g);break;case 1:a.Zz.hf(b,f,r,k,c,d,e,g);break;default:a.bs.hf(b,f,r,k,c,d,e,g)}};return b}();a.Ab=b})(y||(y={}));(function(a){var b=function(){function b(){}b.PS=function(l,f){var r=8;0>r&&(r=8);var k=[0,0,0,0],c=new a.b;c.K(f);c.scale(9102==a.Za.Fm(l).Te().Rc()?1:180*(a.Za.Fm(l).Te().Ej/3.141592653589793));-180>
c.x?(c.x-=c.x%360,-180>c.x&&(c.x+=360)):180<c.x&&(c.x-=c.x%360,180<c.x&&(c.x-=360));90<c.y&&(c.y=90);-90>c.y&&(c.y=-90);for(var d=5*r,e=(d+31)/32,g=-180,h=180,m=d-1,n=e-1;0<=n;n--)for(var q=m-32*n,s=Math.min(32,d-32*n),t=1;t<s;t+=2){var u=0.5*(h+g);c.x>=u?(k[n]|=1<<q,g=u):h=u;q-=2;m-=2}g=-90;h=90;m=d-2;for(n=e-1;0<=n;n--){q=m-32*n;s=Math.min(32,d-32*n);for(t=0;t<s;t+=2)u=0.5*(h+g),c.y>=u?(k[n]|=1<<q,g=u):h=u,q-=2,m-=2}return b.WS(k,r,r)};b.WS=function(a,b,r){for(var k=[],c=0;c<b;c++)k[c]="";for(var v=
c=0,d=0;d<b;d++){var e=a[c]>>v&31,v=v+5;if(31<v){var g=37-v,e=e&(1<<g)-1,v=v-32;c++;e|=(a[c]&(1<<v)-1)<<g}k[b-1-d]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[e]}if(r>b)for(d=0;d<r-b;d++)k.push("0");else r<b&&(k.length=r);return k.join("")};return b}();a.qH=b})(y||(y={}));(function(a){var b={gcstol:[0,1E-8,1,1.11111E-8,2,1.68845E-8,3,2.17661E-8,4,2.22508E-8,5,2.34848E-8,6,2.37811E-8,7,2.88455E-8,8,3.1456E-8,9,3.29779E-8,10,3.66789E-8,11,4.23597E-8,12,4.79463E-8,13,6.45223E-8,14,7.26274E-8,15,7.49945E-8,
16,7.52506E-8,17,7.97991E-8,18,9.66202E-8,19,9.79918E-8,20,9.89735E-8,21,1.02314E-7,22,1.08146E-7,23,2.29734E-7,24,2.42985E-7,25,2.7546E-7,26,3.37034E-7,27,4.30795E-7,28,5.20871E-7,29,5.50921E-7,30,6.74068E-7,31,6.86177E-7,32,7.25263E-7,33,7.44101E-7,34,7.74267E-7,35,9.62954E-7,36,1.06103E-6,37,1.14363E-6,38,1.16219E-6,39,1.36419E-6,40,1.36744E-6,41,1.43239E-6,42,1.73624E-6,43,1.84825E-6,44,1.90986E-6,45,1.97572E-6,46,2.12207E-6,47,2.72837E-6,48,3.1831E-6,49,3.58099E-6,50,3.81972E-6,51,4.09256E-6,
52,4.40737E-6,53,4.77465E-6,54,5.16178E-6,55,5.20871E-6,56,5.72958E-6,57,6.03113E-6,58,6.98729E-6,59,9.24125E-6,60,1.14592E-5],pcstol:[0,6.66667E-9,1,2E-8,2,4.97098E-5,3,0.001,4,0.00109362,5,0.00328087,6,0.00497101],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,
102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,
102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,
102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,
102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,
3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3400,102184,3401,102185,3404,3359,3407,3366,
3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,
102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,
104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,
37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,
5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,
29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077],pcsid:[2066,6,2136,5,2155,5,2157,3,2158,3,2159,5,2160,5,2219,3,2220,3,2244,5,2245,5,2256,5,2265,5,2266,5,2269,5,2270,5,2273,5,2290,3,2291,3,2294,3,
2295,3,2313,3,2314,5,2964,5,2967,5,2968,5,2991,3,2992,5,2993,3,2994,5,3073,3,3076,3,3079,3,3091,5,3106,3,3108,3,3109,3,3141,3,3142,3,3167,2,3337,3,3347,3,3348,3,3359,5,3360,3,3361,5,3362,3,3363,5,3364,3,3365,5,3366,5,3402,3,3403,3,3405,3,3406,3,3439,3,3440,3,3447,3,3449,3,3450,3,3453,5,3454,5,3460,3,3479,5,3480,3,3481,5,3482,3,3483,5,3484,3,3485,5,3486,3,3487,5,3488,3,3489,3,3490,5,3491,3,3492,5,3493,3,3494,5,3495,3,3496,5,3497,3,3498,5,3499,3,3500,5,3501,3,3502,5,3503,3,3504,5,3505,3,3506,5,3507,
3,3508,5,3509,3,3510,5,3511,3,3512,5,3513,3,3514,3,3515,5,3516,3,3517,5,3518,3,3519,5,3520,3,3521,5,3522,3,3523,5,3524,3,3525,5,3526,3,3527,5,3528,3,3529,5,3530,3,3531,5,3532,3,3533,5,3534,3,3535,5,3536,3,3537,5,3538,3,3539,5,3540,3,3541,5,3542,3,3543,5,3544,3,3545,5,3546,3,3547,5,3548,3,3549,5,3550,3,3551,5,3552,3,3553,5,3582,5,3583,3,3584,5,3585,3,3586,5,3587,3,3588,5,3589,3,3590,5,3591,3,3592,3,3593,5,3598,5,3599,3,3600,5,3605,5,3606,3,3607,3,3608,5,3609,3,3610,5,3611,3,3612,5,3613,3,3614,5,3615,
3,3616,5,3617,3,3618,5,3619,3,3620,5,3621,3,3622,5,3623,3,3624,5,3625,3,3626,5,3627,3,3628,5,3629,3,3630,5,3631,3,3632,5,3633,3,3634,5,3635,3,3636,5,3640,5,3641,3,3642,5,3643,3,3644,5,3645,3,3646,5,3647,3,3648,5,3649,3,3650,5,3651,3,3652,5,3653,3,3654,5,3655,3,3656,5,3657,3,3658,5,3659,3,3660,5,3661,3,3662,5,3663,3,3664,5,3668,5,3669,3,3670,5,3671,3,3672,5,3673,3,3674,5,3675,3,3676,5,3677,5,3678,3,3679,5,3680,5,3681,3,3682,5,3683,5,3684,3,3685,3,3686,5,3687,3,3688,5,3689,3,3690,5,3691,3,3692,5,3696,
5,3697,3,3698,5,3699,3,3700,5,3740,3,3749,3,3783,3,3784,3,3793,3,3794,3,3802,3,3816,3,3829,3,3854,3,3920,3,3978,3,3979,3,3991,5,3992,5,4026,3,4037,3,4038,3,4217,5,4438,5,4439,5,4467,3,4471,3,4474,3,4559,3,4839,3,5018,3,5048,3,5167,3,5168,3,5223,3,5234,3,5235,3,5243,3,5266,3,5316,3,5320,3,5321,3,5330,3,5331,3,5337,3,5361,3,5362,3,5382,3,5383,3,5396,3,5456,3,5457,3,5469,3,5472,4,5490,3,5518,3,5523,3,5559,3,5588,5,5589,5,5596,3,5627,3,5629,3,5641,3,5643,3,5644,3,5654,5,5655,5,5659,3,5700,3,5825,3,5836,
3,5837,3,5842,3,5844,3,5880,3,5887,3,5890,3,20499,3,20538,3,20539,3,20790,3,20791,3,21291,3,21292,3,21500,3,21817,3,21818,3,22032,3,22033,3,22091,3,22092,3,22332,3,22391,3,22392,3,22700,3,22770,3,22780,3,22832,3,23090,3,23095,3,23239,3,23240,3,23433,3,23700,3,24047,3,24048,3,24100,5,24200,3,24305,3,24306,3,24382,4,24383,3,24500,3,24547,3,24548,3,24571,2,24600,3,25E3,3,25231,3,25884,3,25932,3,26237,3,26331,3,26332,3,26591,3,26592,3,26632,3,26692,3,26855,5,26856,5,27120,3,27200,3,27291,4,27292,4,27429,
3,27492,3,27500,3,27700,3,28232,3,28600,3,28991,3,28992,3,29100,3,29220,3,29221,3,29333,3,29635,3,29636,3,29701,3,29738,3,29739,3,29849,3,29850,3,29871,2,29872,5,29873,3,29900,3,29901,3,29903,3,30200,6,30339,3,30340,3,30591,3,30592,3,30791,3,30792,3,31028,3,31121,3,31154,3,31170,3,31171,3,31370,3,31528,3,31529,3,31600,3,31700,3,31838,3,31839,3,31901,3,32061,3,32062,3,32098,3,32099,5,32100,3,32104,3,32161,3,32766,3,53034,3,53048,3,53049,3,54034,3,65061,5,65062,5,65161,3,65163,3,102041,5,102064,4,102068,
1,102069,0,102217,5,102218,3,102219,5,102220,5,102378,5,102379,5,102380,3,102381,5,102589,5,102599,5,102600,5,102604,5,102605,3,102606,3,102647,3,102704,5,102705,5,102733,5,102761,5,102762,3,102763,5,102764,3,102765,3,102766,5,102970,5,102974,5,102993,3,102994,3,102995,5,102996,5,103015,3,103016,5,103017,3,103018,5,103025,3,103026,3,103027,5,103028,5,103035,3,103036,3,103037,5,103038,5,103039,3,103040,3,103041,5,103042,5,103043,3,103044,3,103045,5,103046,5,103047,3,103048,3,103049,5,103050,5,103051,
3,103052,5,103053,3,103054,5,103055,3,103056,5,103057,3,103058,3,103059,5,103060,5,103061,3,103062,3,103063,5,103064,5,103069,5,103070,3,103071,3,103072,5,103073,5,103086,3,103087,3,103088,5,103089,5,103094,5,103095,3,103096,5,103103,3,103104,5,103105,3,103106,5,103121,3,103122,5,103123,3,103124,3,103125,5,103126,5,103127,3,103128,3,103129,5,103130,5,103131,3,103132,3,103133,5,103134,5,103135,3,103136,3,103137,5,103138,5,103139,3,103140,5,103141,3,103142,5,103143,3,103144,5,103145,3,103146,5,103147,
3,103148,3,103149,5,103150,5,103151,3,103152,5,103172,3,103173,5,103174,3,103175,3,103176,5,103177,5,103178,3,103179,3,103180,5,103181,5,103182,3,103183,3,103184,5,103185,5,103228,3,103229,3,103230,5,103231,5,103250,3,103251,5,103252,3,103253,5,103260,3,103261,3,103262,5,103263,5,103270,3,103271,3,103272,5,103273,5,103274,3,103275,3,103276,5,103277,5,103278,3,103279,3,103280,5,103281,5,103282,3,103283,3,103284,5,103285,5,103286,3,103287,5,103288,3,103289,5,103290,3,103291,5,103292,3,103293,3,103294,
5,103295,5,103296,3,103297,3,103298,5,103299,5,103376,5,103377,3,103378,3,103379,5,103380,5,103393,3,103394,3,103395,5,103396,5,103472,3,103473,5,103474,3,103475,5,103482,3,103483,5,103484,3,103485,5,103500,3,103501,5,103502,3,103503,3,103504,5,103505,5,103506,3,103507,3,103508,5,103509,5,103510,3,103511,3,103512,5,103513,5,103514,3,103515,5,103516,3,103517,5,103518,3,103519,5,103520,3,103521,5,103522,3,103523,3,103524,5,103525,5,103526,3,103527,5,103561,5,103562,5,103563,3,103564,3,103565,5,103566,
5,103567,3,103568,3,103569,5,103570,5,103585,5,103695,5],pcsidc:[[2E3,2045,3],[2056,2065,3],[2067,2135,3],[2137,2153,3],[2161,2170,3],[2172,2193,3],[2196,2198,3],[2200,2203,3],[2206,2217,3],[2222,2224,5],[2251,2253,5],[2280,2282,5],[2308,2311,3],[2315,2325,3],[2327,2394,3],[2400,2462,3],[2523,2576,3],[2578,2693,3],[2695,2758,3],[2867,2888,5],[2891,2930,5],[2931,2941,3],[2969,2973,3],[2975,2982,3],[2984,2988,3],[2995,3002,3],[3006,3051,3],[3054,3059,3],[3061,3066,3],[3068,3071,3],[3084,3087,3],[3112,
3118,3],[3120,3138,3],[3146,3151,3],[3153,3157,3],[3161,3166,3],[3168,3172,3],[3174,3203,3],[3294,3313,3],[3315,3335,3],[3339,3345,3],[3350,3358,3],[3367,3369,3],[3374,3399,3],[3408,3416,3],[3425,3432,5],[3441,3446,5],[3456,3459,5],[3465,3478,3],[3554,3559,3],[3561,3565,5],[3568,3570,5],[3571,3581,3],[3594,3597,3],[3601,3604,3],[3637,3639,3],[3665,3667,3],[3693,3695,3],[3701,3727,3],[3728,3733,5],[3744,3747,3],[3753,3758,5],[3761,3763,3],[3765,3769,3],[3779,3781,3],[3788,3791,3],[3797,3799,3],[3832,
3841,3],[3844,3852,3],[3873,3885,3],[3890,3893,3],[3907,3912,3],[3942,3950,3],[3968,3970,3],[3973,3976,3],[3986,3989,3],[3994,3997,3],[4399,4413,5],[4418,4433,5],[4491,4554,3],[5069,5072,3],[5105,5130,3],[5180,5184,3],[5253,5259,3],[5269,5275,3],[5292,5311,3],[5343,5349,3],[5355,5357,3],[5387,5389,3],[5459,5463,3],[5479,5482,3],[5530,5539,3],[5550,5552,3],[5562,5583,3],[5623,5625,5],[5631,5639,3],[5649,5653,3],[5663,5680,3],[5682,5685,3],[5875,5877,3],[20002,20032,3],[20062,20092,3],[20135,20138,
3],[20248,20258,3],[20348,20358,3],[20436,20440,3],[20822,20824,3],[20934,20936,3],[21035,21037,3],[21095,21097,3],[21148,21150,3],[21413,21423,3],[21473,21483,3],[21780,21782,3],[21891,21894,3],[22171,22177,3],[22181,22187,3],[22191,22197,3],[22234,22236,3],[22521,22525,3],[22991,22994,3],[23028,23038,3],[23830,23853,3],[23866,23872,3],[23877,23884,3],[23886,23894,3],[23946,23948,3],[24311,24313,3],[24342,24347,3],[24370,24374,4],[24375,24381,3],[24718,24721,3],[24817,24821,3],[24877,24882,3],[24891,
24893,3],[25391,25395,3],[25828,25838,3],[26191,26195,3],[26391,26393,3],[26703,26722,3],[26729,26760,5],[26766,26798,5],[26860,26870,5],[26891,26899,3],[26903,26923,3],[26929,26946,3],[26948,26998,3],[27037,27040,3],[27205,27232,3],[27258,27260,3],[27391,27398,3],[27561,27564,3],[27571,27574,3],[27581,27584,3],[27591,27594,3],[28191,28193,3],[28348,28358,3],[28402,28432,3],[28462,28492,3],[29118,29122,3],[29177,29185,3],[30161,30179,3],[30491,30494,3],[30729,30732,3],[31251,31259,3],[31265,31268,
3],[31275,31278,3],[31288,31297,3],[31461,31465,3],[31491,31495,3],[31917,31922,3],[31965,31985,3],[31992,32E3,3],[32001,32003,5],[32005,32031,5],[32033,32060,5],[32074,32077,5],[32081,32086,3],[32107,32130,3],[32133,32158,3],[32164,32167,5],[32180,32199,3],[32201,32260,3],[32301,32360,3],[32601,32662,3],[32664,32667,5],[32701,32761,3],[53001,53004,3],[53008,53019,3],[53021,53032,3],[53042,53046,3],[54001,54004,3],[54008,54019,3],[54021,54032,3],[54042,54046,3],[54048,54053,3],[102001,102040,3],[102042,
102063,3],[102065,102067,3],[102070,102112,3],[102114,102117,3],[102118,102121,5],[102122,102208,3],[102210,102216,3],[102221,102300,3],[102304,102377,3],[102382,102388,3],[102389,102391,5],[102401,102444,3],[102450,102452,3],[102461,102468,5],[102469,102492,3],[102500,102519,5],[102530,102549,3],[102570,102588,3],[102590,102598,3],[102601,102603,3],[102608,102628,3],[102629,102646,5],[102648,102672,5],[102675,102700,5],[102701,102703,3],[102707,102730,5],[102735,102758,5],[102767,102798,3],[102962,
102969,3],[102971,102973,3],[102975,102989,3],[102990,102992,5],[102997,103002,3],[103003,103008,5],[103009,103011,3],[103012,103014,5],[103019,103021,3],[103022,103024,5],[103029,103031,3],[103032,103034,5],[103065,103068,3],[103074,103076,3],[103077,103079,5],[103080,103082,3],[103083,103085,5],[103090,103093,3],[103097,103099,3],[103100,103102,5],[103107,103109,3],[103110,103112,5],[103113,103116,3],[103117,103120,5],[103153,103157,3],[103158,103162,5],[103163,103165,3],[103166,103171,5],[103186,
103188,3],[103189,103191,5],[103192,103195,3],[103196,103199,5],[103200,103224,3],[103225,103227,5],[103232,103237,3],[103238,103243,5],[103244,103246,3],[103247,103249,5],[103254,103256,3],[103257,103259,5],[103264,103266,3],[103267,103269,5],[103300,103375,3],[103381,103383,3],[103384,103386,5],[103387,103389,3],[103390,103392,5],[103397,103399,3],[103400,103471,5],[103476,103478,3],[103479,103481,5],[103486,103488,3],[103489,103491,5],[103492,103495,3],[103496,103499,5],[103539,103543,3],[103544,
103548,5],[103549,103551,3],[103552,103557,5],[103558,103560,3],[103571,103573,3],[103574,103576,5],[103577,103580,3],[103581,103583,5],[103600,103694,3],[103700,103793,5],[103794,103799,3]],gcsid:[4042,0,4075,0,4081,0,4168,0,4170,0,4188,0,4261,1,4262,0,4263,0,4288,0,4289,0,4305,1,4322,0,4324,0,4326,0,4466,0,4469,0,4475,0,4483,0,4490,0,4555,0,4558,0,4614,0,4619,0,4657,0,4670,0,4671,0,4674,0,4682,0,4683,0,4718,0,4720,0,4721,0,4723,0,4726,0,4737,0,4738,0,4759,0,4761,0,4807,1,4808,0,4809,0,4816,1,4817,
0,4818,0,4819,1,4820,0,4821,1,4823,0,4824,0,4901,1,4902,1,4903,0,4904,0,5228,0,5229,0,5233,0,5252,0,5264,0,5340,0,5354,0,5360,0,5371,0,5373,0,5381,0,5393,0,5464,0,5467,0,5489,0,5524,0,5527,0,5546,0,5561,0,5593,0,5681,0,5886,0,37225,1,37235,0,37257,0,37259,0,37260,0,104020,0,104139,1,104140,1,104223,0,104286,0,104287,0,104304,0,104305,0,104896,0,104900,5,104901,0,104902,0,104903,9,104904,2,104905,2,104906,59,104907,54,104908,0,104909,58,104910,31,104911,56,104912,6,104913,50,104914,41,104915,10,104916,
3,104917,30,104918,8,104919,60,104920,53,104921,44,104922,48,104923,51,104924,38,104925,0,104926,49,104927,57,104928,21,104929,23,104930,35,104931,49,104932,27,104933,17,104934,13,104935,7,104936,56,104937,40,104938,28,104939,37,104940,15,104941,55,104942,22,104943,4,104944,0,104945,20,104946,42,104947,47,104948,52,104949,43,104950,46,104951,39,104952,24,104953,16,104954,50,104955,36,104956,33,104957,46,104958,14,104959,19,104960,0,104961,34,104962,32,104963,29,104964,45,104965,26,104966,25,104967,
41,104968,11,104969,12,104970,18],gcsidc:[[4001,4016,0],[4018,4025,0],[4027,4029,0],[4031,4036,0],[4044,4047,0],[4052,4054,0],[4120,4166,0],[4172,4176,0],[4178,4185,0],[4190,4196,0],[4198,4216,0],[4218,4222,0],[4224,4232,0],[4234,4260,0],[4265,4267,0],[4269,4286,0],[4291,4303,0],[4306,4319,0],[4600,4610,0],[4621,4625,0],[4627,4633,0],[4636,4639,0],[4641,4646,0],[4659,4667,0],[4676,4680,0],[4686,4697,0],[4699,4706,0],[4740,4757,0],[4763,4765,0],[4801,4806,0],[4810,4812,1],[4813,4815,0],[37001,37008,
0],[37201,37208,0],[37211,37224,0],[37226,37233,0],[37237,37243,0],[37245,37247,0],[37249,37255,0],[104100,104138,0],[104141,104145,0],[104256,104261,0],[104700,104786,0],[104990,104992,0]]},c={c:[[2E3,2045,9001],[2056,2065,9001],[2067,2135,9001],[2137,2153,9001],[2161,2170,9001],[2172,2193,9001],[2196,2198,9001],[2200,2203,9001],[2206,2217,9001],[2222,2224,9002],[2251,2253,9002],[2280,2282,9002],[2308,2311,9001],[2315,2325,9001],[2327,2394,9001],[2400,2462,9001],[2523,2576,9001],[2578,2693,9001],
[2695,2758,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2941,9001],[2969,2973,9001],[2975,2982,9001],[2984,2988,9001],[2995,3002,9001],[3006,3051,9001],[3054,3059,9001],[3061,3066,9001],[3068,3071,9001],[3084,3087,9001],[3112,3118,9001],[3120,3138,9001],[3146,3151,9001],[3153,3157,9001],[3161,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3335,9001],[3339,3345,9001],[3350,3358,
9001],[3367,3369,9001],[3374,3399,9001],[3408,3416,9001],[3425,3432,9003],[3441,3446,9003],[3456,3459,9003],[3465,3478,9001],[3554,3559,9001],[3561,3565,9003],[3568,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3733,9003],[3744,3747,9001],[3753,3758,9003],[3761,3763,9001],[3765,3769,9001],[3779,3781,9001],[3788,3791,9001],[3797,3799,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3907,
3912,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4052,4054,9102],[4120,4166,9102],[4172,4176,9102],[4178,4185,9102],[4190,4196,9102],[4198,4216,9102],[4218,4222,9102],[4224,4232,9102],[4234,4260,9102],[4265,4267,9102],[4269,4286,9102],[4291,4303,9102],[4306,4319,9102],[4399,4413,9003],[4418,4433,9003],[4491,4554,9001],[4600,4610,9102],[4621,4625,9102],[4627,4633,9102],
[4636,4639,9102],[4641,4646,9102],[4659,4667,9102],[4676,4680,9102],[4686,4697,9102],[4699,4706,9102],[4740,4757,9102],[4763,4765,9102],[4801,4806,9102],[4810,4812,9105],[4813,4815,9102],[5069,5072,9001],[5105,5130,9001],[5180,5184,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5343,5349,9001],[5355,5357,9001],[5387,5389,9001],[5459,5463,9001],[5479,5482,9001],[5530,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,
9001],[5875,5877,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21891,21894,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,
23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26703,26722,9001],[26729,26760,9003],[26766,26798,9003],[26860,26870,9003],[26891,26899,9001],[26903,26923,9001],[26929,26946,9001],[26948,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],
[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29118,29122,9001],[29177,29185,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31278,9001],[31288,31297,9001],[31461,31465,9001],[31491,31495,9001],[31917,31922,9001],[31965,31985,9001],[31992,32E3,9001],[32001,32003,9003],[32005,32031,9003],[32033,32060,9003],[32074,32077,9003],[32081,32086,9001],[32107,32130,
9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37001,37008,9102],[37201,37208,9102],[37211,37224,9102],[37226,37233,9102],[37237,37243,9102],[37245,37247,9102],[37249,37255,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53042,53046,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[102001,102040,9001],[102042,102063,9001],
[102065,102067,9001],[102070,102112,9001],[102114,102117,9001],[102122,102208,9001],[102210,102216,9001],[102221,102300,9001],[102304,102377,9001],[102382,102388,9001],[102389,102391,9003],[102401,102444,9001],[102450,102452,9001],[102461,102468,9003],[102469,102492,9001],[102500,102519,9002],[102530,102549,9001],[102570,102588,9001],[102590,102598,9001],[102601,102603,9001],[102608,102628,9001],[102629,102646,9003],[102648,102672,9003],[102675,102700,9003],[102701,102703,9001],[102707,102730,9003],
[102735,102758,9003],[102767,102798,9001],[102962,102969,9001],[102971,102973,9001],[102975,102989,9001],[102990,102992,9002],[102997,103002,9001],[103003,103008,9003],[103009,103011,9001],[103012,103014,9003],[103019,103021,9001],[103022,103024,9003],[103029,103031,9001],[103032,103034,9003],[103065,103068,9001],[103074,103076,9001],[103077,103079,9002],[103080,103082,9001],[103083,103085,9003],[103090,103093,9001],[103097,103099,9001],[103100,103102,9003],[103107,103109,9001],[103110,103112,9003],
[103113,103116,9001],[103117,103120,9003],[103153,103157,9001],[103158,103162,9003],[103163,103165,9001],[103166,103168,9002],[103169,103171,9003],[103186,103188,9001],[103189,103191,9003],[103192,103195,9001],[103196,103199,9003],[103200,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103300,103375,9001],[103381,103383,9001],[103384,103386,9002],
[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103400,103471,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103600,103694,9001],[103700,103793,9003],[103794,103799,9001],[104100,104138,9102],
[104141,104145,9102],[104256,104261,9102],[104700,104786,9102],[104900,104970,9102],[104990,104992,9102]],nc:[2066,9039,2136,9094,2155,9003,2157,9001,2158,9001,2159,9094,2160,9094,2219,9001,2220,9001,2244,9003,2245,9003,2256,9002,2265,9002,2266,9002,2269,9002,2270,9002,2273,9002,2290,9001,2291,9001,2294,9001,2295,9001,2313,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2964,9003,2967,9003,2968,9003,2991,9001,2992,9002,2993,9001,2994,9002,3073,
9001,3076,9001,3079,9001,3091,9003,3106,9001,3108,9001,3109,9001,3141,9001,3142,9001,3167,9301,3337,9001,3347,9001,3348,9001,3359,9003,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3366,9005,3402,9001,3403,9001,3405,9001,3406,9001,3439,9001,3440,9001,3447,9001,3449,9001,3450,9001,3453,9003,3454,9003,3460,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,
3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,
9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,
3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,
9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3740,9001,3749,9001,3783,9001,3784,9001,3793,9001,3794,9001,3802,9001,3816,9001,3829,9001,3854,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4075,9102,4081,9102,4168,9102,4170,9102,4188,9102,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4305,9105,4322,9102,4324,9102,4326,9102,4438,9003,4439,9003,4466,9102,4467,9001,4469,9102,4471,9001,4474,9001,4475,9102,4483,9102,
4490,9102,4555,9102,4558,9102,4559,9001,4614,9102,4619,9102,4657,9102,4670,9102,4671,9102,4674,9102,4682,9102,4683,9102,4718,9102,4720,9102,4721,9102,4723,9102,4726,9102,4737,9102,4738,9102,4759,9102,4761,9102,4807,9105,4808,9102,4809,9102,4816,9105,4817,9102,4818,9102,4819,9105,4820,9102,4821,9105,4823,9102,4824,9102,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5018,9001,5048,9001,5167,9001,5168,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5252,9102,5264,9102,5266,
9001,5316,9001,5320,9001,5321,9001,5330,9001,5331,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5393,9102,5396,9001,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5518,9001,5523,9001,5524,9102,5527,9102,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,
5842,9001,5844,9001,5880,9001,5886,9102,5887,9001,5890,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23433,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25E3,
9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,26855,9003,26856,9003,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27492,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29100,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,29900,9001,29901,9001,29903,9001,30200,9039,30339,9001,30340,9001,30591,9001,30592,
9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37225,9105,37235,9102,37257,9102,37259,9102,37260,9102,53034,9001,53048,9001,53049,9001,54034,9001,65061,9003,65062,9003,65161,9001,65163,9001,102041,9003,102064,9085,102068,109030,102069,109031,102118,9003,102119,9002,102120,9003,102121,9003,
102217,9003,102218,9001,102219,9003,102220,9003,102378,9002,102379,9002,102380,9001,102381,9002,102589,9003,102599,9003,102600,9003,102604,9003,102605,9001,102606,9001,102647,9001,102704,9003,102705,9003,102733,9003,102761,9003,102762,9001,102763,9003,102764,9001,102765,9001,102766,9003,102970,9002,102974,9003,102993,9001,102994,9001,102995,9003,102996,9003,103015,9001,103016,9003,103017,9001,103018,9003,103025,9001,103026,9001,103027,9003,103028,9003,103035,9001,103036,9001,103037,9003,103038,9003,
103039,9001,103040,9001,103041,9003,103042,9003,103043,9001,103044,9001,103045,9003,103046,9003,103047,9001,103048,9001,103049,9003,103050,9003,103051,9001,103052,9003,103053,9001,103054,9003,103055,9001,103056,9003,103057,9001,103058,9001,103059,9003,103060,9003,103061,9001,103062,9001,103063,9003,103064,9003,103069,9003,103070,9001,103071,9001,103072,9003,103073,9003,103086,9001,103087,9001,103088,9003,103089,9003,103094,9002,103095,9001,103096,9003,103103,9001,103104,9003,103105,9001,103106,9003,
103121,9001,103122,9003,103123,9001,103124,9001,103125,9002,103126,9002,103127,9001,103128,9001,103129,9003,103130,9003,103131,9001,103132,9001,103133,9003,103134,9003,103135,9001,103136,9001,103137,9002,103138,9002,103139,9001,103140,9003,103141,9001,103142,9003,103143,9001,103144,9003,103145,9001,103146,9002,103147,9001,103148,9001,103149,9003,103150,9003,103151,9001,103152,9003,103172,9001,103173,9003,103174,9001,103175,9001,103176,9003,103177,9003,103178,9001,103179,9001,103180,9003,103181,9003,
103182,9001,103183,9001,103184,9003,103185,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,
103296,9001,103297,9001,103298,9003,103299,9003,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,
103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103695,9003,104020,9102,104139,9105,104140,9105,104223,9102,104286,9102,104287,9102,104304,9102,104305,9102,104896,9102]},l=function(){function a(){}a.cC=function(b){!1===a.ti&&a.ao();var k=a.NG(b);if(-1==k){var l=a.js(b);l!=b&&(k=a.cC(l))}return k};a.NG=function(b){return void 0!==a.cs[b]?
a.cs[b]:-1};a.RM=function(b){!1===a.ti&&a.ao();var k=a.Fz(b);if(1E38==k){var l=a.js(b);l!=b&&(k=a.Fz(l));if(1E38==k)return 1E-10}return k};a.VO=function(b){if(void 0!==a.Un[b])return!0;var k=a.js(b);return k!=b&&void 0!==a.Un[k]?!0:!1};a.YO=function(b){if(void 0!==a.Gh[b])return!0;var k=a.js(b);return k!=b&&void 0!==a.Gh[k]?!0:!1};a.Fz=function(b){!1===a.ti&&a.ao();return void 0!==a.Un[b]?a.Un[b]:void 0!==a.Gh[b]?a.Gh[b]:1E38};a.nU=function(b){!1===a.ti&&a.ao();return void 0!==a.dw[b]?a.dw[b]:b};
a.js=function(b){!1===a.ti&&a.ao();return void 0!==a.Lw[b]?a.Lw[b]:b};a.ao=function(){for(var r=b,k=null,l=0;l<r.pcsid.length;l+=2)a.Gh[r.pcsid[l]]=r.pcstol[2*r.pcsid[l+1]+1];for(l=0;l<r.pcsidc.length;l+=1)for(var k=r.pcsidc[l],v=k[0];v<=k[1];v++)a.Gh[v]=r.pcstol[2*k[2]+1];for(l=0;l<r.gcsid.length;l+=2)a.Un[r.gcsid[l]]=r.gcstol[2*r.gcsid[l+1]+1];for(l=0;l<r.gcsidc.length;l+=1){k=r.gcsidc[l];for(v=k[0];v<=k[1];v++)a.Gh[v]=r.gcstol[2*k[2]+1]}for(l=0;l<c.c.length;l+=1){k=c.c[l];for(v=k[0];v<=k[1];v++)a.cs[v]=
k[2]}for(l=0;l<c.nc.length;l+=2)a.cs[c.nc[l]]=c.nc[l+1];c=null;for(l=0;l<r.newtoold.length;l+=2)a.dw[r.newtoold[l+1]]=r.newtoold[l],a.Lw[r.newtoold[l]]=r.newtoold[l+1];b=null;a.ti=!0};a.ti=!1;a.Un=[];a.Gh=[];a.dw=[];a.Lw=[];a.cs=[];return a}();a.ks=l})(y||(y={}));(function(a){function b(a){return 0===a.length?'""':'"'==a[0]||"."==a[0]||"0"<=a[0]&&"9">=a[0]?a:'"'+a.trim()+'"'}var c=[],l=function(){function f(){}f.TM=function(r){try{for(var k=0;k<c.length;k++)if(c[k].wkttext===r)return c[k].unit;for(var l,
d=k="",e=!1,g=0;g<r.length;g++){var h=r[g];!0===e?'"'==h?'"'==r[g+1]?k+=h:e=!1:k+=h:/[\s]/.test(h)||(","==h?(d=""!==k?d+(b(k)+","):d+",",k=""):")"==h||"]"==h?(d=""!==k?d+(b(k)+"]}"):d+"]}",k=""):"("==h||"["==h?(d+='{ "entity": "'+k.toUpperCase().trim()+'", "values":[',k=""):'"'==h?(e=!0,k=""):k+=h)}l=JSON.parse(d);var m=f.Dz(l);if(null===m)return null;l=null;for(h=0;h<m.values.length;h++)if("object"===typeof m.values[h]&&"UNIT"===m.values[h].entity){l=m.values[h];break}if(null===l)return null;var n=
a.Ub.DL("GEOGCS"===m.entity?1:0,l.values[1],l.values[2]);c.push({wkttext:r,unit:n});10<c.length&&c.shift();return n}catch(q){return null}};f.Dz=function(a){if(null===a)return null;if("GEOGCS"===a.entity||"PROJCS"===a.entity)return a;for(var b=[],l=0;l<a.values.length;l++)if("object"===typeof a.values[l]&&void 0!==a.values[l].entity){if("GEOGCS"===a.values[l].entity||"PROJCS"==a.values[l].entity)return a.values[l];b.push(a.values[l])}for(a=0;a<b.length;a++)if(l=f.Dz(b[a]),null!==l)return l;return null};
f.SM=function(a){var b=-1;if(null!=a&&0<a.length){var f,l;f=a.indexOf("PROJCS");if(0<=f){var c=0;f=a.lastIndexOf("UNIT");if(0<=f&&(f=a.indexOf(",",f+4),0<f&&(f++,l=a.indexOf("]",f+1),0<l)))try{c=parseFloat(a.substring(f,l))}catch(v){c=0}0<c&&(b=0.001/c)}else if(f=a.indexOf("GEOGCS"),0<=f){var d=0,c=0;f=a.indexOf("SPHEROID",f+6);if(0<f&&(f=a.indexOf(",",f+8),0<f)){f++;l=a.indexOf(",",f+1);if(0<l)try{d=parseFloat(a.substring(f,l))}catch(e){d=0}if(0<d&&(f=a.indexOf("UNIT",l+1),0<=f&&(f=a.indexOf(",",
f+4),0<f&&(f++,l=a.indexOf("]",f+1),0<l))))try{c=parseFloat(a.substring(f,l))}catch(g){c=0}}0<d&&0<c&&(b=0.001/(d*c))}}return b};return f}();a.mA=l})(y||(y={}));(function(a){(function(a){a[a.NONE=0]="NONE";a[a.LINEAR=1]="LINEAR";a[a.ANGULAR=2]="ANGULAR"})(a.AH||(a.AH={}));(function(a){a[a.enumFloat=0]="enumFloat";a[a.enumDouble=1]="enumDouble";a[a.enumInt32=2]="enumInt32";a[a.enumInt64=3]="enumInt64";a[a.enumInt8=4]="enumInt8";a[a.enumInt16=5]="enumInt16"})(a.nI||(a.nI={}));(function(a){a[a.POSITION=
0]="POSITION";a[a.Z=1]="Z";a[a.M=2]="M";a[a.ID=3]="ID";a[a.NORMAL=4]="NORMAL";a[a.TEXTURE1D=5]="TEXTURE1D";a[a.TEXTURE2D=6]="TEXTURE2D";a[a.TEXTURE3D=7]="TEXTURE3D";a[a.ID2=8]="ID2";a[a.MAXSEMANTICS=10]="MAXSEMANTICS"})(a.xf||(a.xf={}));var b=function(){function b(a,f){this.dr=this.me=null;this.sp=this.Ba=0;this.Wg=this.Jf=null;this.tk=0;if(void 0!==f){this.Ba=f.Ba;this.sp=f.sp;this.Jf=f.Jf.slice(0);this.Wg=f.Wg.slice(0);this.tk=f.tk;this.dr=[];for(var r=0,k=0;k<this.Ba;k++)this.dr[k]=r,r+=b.Xa(this.Jf[k]);
this.sp=r;this.me=[];for(k=0;k<this.Ba;k++)for(var r=b.Xa(this.Id(k)),c=b.ue(this.Id(k)),v=0;v<r;v++)this.me[this.dr[k]+v]=c}else this.sp=this.Ba=0}b.prototype.Id=function(b){if(0>b||b>this.Ba)throw a.g.O();return this.Jf[b]};b.prototype.zf=function(a){return this.Wg[a]};b.IN=function(a){return b.bc[a]};b.Qh=function(a){return b.Dc[a]};b.ye=function(a){return b.Cd[a]};b.Gh=function(a){return b.ye(b.Qh(a))*b.Xa(a)};b.Xa=function(a){return b.pb[a]};b.Wf=function(a){return 2>a};b.ti=function(a){return b.Wf(b.Qh(a))};
b.prototype.hasAttribute=function(a){return 0<=this.Wg[a]};b.prototype.WC=function(){return this.hasAttribute(1)};b.ue=function(a){return b.W[a]};b.prototype.WN=function(a){return this.dr[a]};b.nD=function(a,f){return b.W[a]===f};b.$g=function(b){if(4==b)return 2;if(8==b)return 3;throw a.g.O();};b.prototype.mc=function(a){return this===a};b.prototype.jj=function(){for(var b=a.J.kg(this.Jf[0]),f=1;f<this.Ba;f++)b=a.J.kg(this.Jf[f],b);return b};b.prototype.fj=function(a){return this.dr[a]};b.prototype.ic=
function(){return this.tk};b.prototype.Gd=function(a){return this.Jf[a]};b.W=[0,0,NaN,0,0,0,0,0,0];b.bc=[1,1,1,0,2,1,1,1,0];b.Dc=[1,1,1,2,0,0,0,0,2];b.Cd=[4,8,4,8,1,2];b.pb=[2,1,1,1,3,1,2,3,2];return b}();a.qa=b})(y||(y={}));(function(a){function b(a,f,l,v){var d=a.kd,e=a.e+f+1;1===l?v=5<=d[e]:2===l?v=5<d[e]||5==d[e]&&(v||0>e||void 0!==d[e+1]||d[e-1]&1):3===l?v=v||void 0!==d[e]||0>e:(v=!1,0!==l&&c("!Big.RM!"));if(1>e||!d[0])v?(a.e=-f,a.kd=[1]):a.kd=[a.e=0];else{d.length=e--;if(v)for(;9<++d[e];)d[e]=
0,e--||(++a.e,d.unshift(1));for(e=d.length;!d[--e];d.pop());}}function c(a){a=Error(a);a.name="BigError";throw a;}var l=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=function(){function a(b){if(b instanceof a)this.Ed=b.Ed,this.e=b.e,this.kd=b.kd.slice();else{var f,v,d;0===b&&0>1/b?b="-0":l.test(b+="")||c(NaN);this.Ed="-"==b.charAt(0)?(b=b.slice(1),-1):1;-1<(f=b.indexOf("."))&&(b=b.replace(".",""));0<(v=b.search(/e/i))?(0>f&&(f=v),f+=+b.slice(v+1),b=b.substring(0,v)):0>f&&(f=b.length);for(v=0;"0"==b.charAt(v);v++);
if(v==(d=b.length))this.kd=[this.e=0];else{for(;"0"==b.charAt(--d););this.e=f-v-1;this.kd=[];for(f=0;v<=d;this.kd[f++]=+b.charAt(v++));}}}a.prototype.abs=function(){var b=new a(this);b.Ed=1;return b};a.prototype.DB=function(){var b,f=this.kd,l=(b=new a(0)).kd,c=this.Ed,v=b.Ed,d=this.e,e=b.e;if(!f[0]||!l[0])return f[0]?c:l[0]?-v:0;if(c!=v)return c;b=0>c;if(d!=e)return d>(e^b)?1:-1;c=-1;for(v=(d=f.length)<(e=l.length)?d:e;++c<v;)if(f[c]!=l[c])return f[c]>(l[c]^b)?1:-1;return d==e?0:d>(e^b)?1:-1};a.prototype.VB=
function(f){var l=this.kd,v=(f=new a(f)).kd,d=this.Ed==f.Ed?1:-1,e=a.Dc;(e!==~~e||0>e||1E6<e)&&c("!Big.DP!");if(!l[0]||!v[0])return l[0]==v[0]&&c(NaN),v[0]||c(d/0),new a(0*d);var g,h,m,n,q=v.slice(),s=g=v.length,t=l.length,u=l.slice(0,g),w=u.length,x=f,A=x.kd=[],y=0,C=e+(x.e=this.e-f.e)+1;x.Ed=d;d=0>C?0:C;for(q.unshift(0);w++<g;u.push(0));do{for(h=0;10>h;h++){if(g!=(w=u.length))m=g>w?1:-1;else{n=-1;for(m=0;++n<g;)if(v[n]!=u[n]){m=v[n]>u[n]?1:-1;break}}if(0>m){for(f=w==g?v:q;w;){if(u[--w]<f[w]){for(n=
w;n&&!u[--n];u[n]=9);--u[n];u[w]+=10}u[w]-=f[w]}for(;!u[0];u.shift());}else break}A[y++]=m?h:++h;u[0]&&m?u[w]=l[s]||0:u=[l[s]]}while((s++<t||void 0!==u[0])&&d--);A[0]||1==y||(A.shift(),x.e--);y>C&&b(x,e,a.ye,void 0!==u[0]);return x};a.prototype.mO=function(){return 0<this.DB()};a.prototype.uP=function(){return 0>this.DB()};a.prototype.mr=function(b){var f,l,c=this.Ed,v=(b=new a(b)).Ed;if(c!=v)return b.Ed=-v,this.NE(b);var d=this.kd.slice();l=this.e;var e=b.kd,g=b.e;if(!d[0]||!e[0])return e[0]?(b.Ed=
-v,b):new a(d[0]?this:0);if(c=l-g){(f=0>c)?(c=-c,l=d):(g=l,l=e);l.reverse();for(v=c;v--;l.push(0));l.reverse()}else{l=((f=d.length<e.length)?d:e).length;for(c=v=0;v<l;v++)if(d[v]!=e[v]){f=d[v]<e[v];break}}f&&(l=d,d=e,e=l,b.Ed=-b.Ed);if(0<(v=(l=e.length)-(f=d.length)))for(;v--;d[f++]=0);for(v=f;l>c;){if(d[--l]<e[l]){for(f=l;f&&!d[--f];d[f]=9);--d[f];d[l]+=10}d[l]-=e[l]}for(;0==d[--v];d.pop());for(;0==d[0];)d.shift(),--g;d[0]||(b.Ed=1,d=[g=0]);b.kd=d;b.e=g;return b};a.prototype.NE=function(b){var f,
l=this.Ed;f=(b=new a(b)).Ed;if(l!=f)return b.Ed=-f,this.mr(b);f=this.e;var c=this.kd,v=b.e,d=b.kd;if(!c[0]||!d[0])return d[0]?b:new a(c[0]?this:0*l);c=c.slice();if(l=f-v){0<l?(v=f,f=d):(l=-l,f=c);for(f.reverse();l--;f.push(0));f.reverse()}0>c.length-d.length&&(f=d,d=c,c=f);l=d.length;for(f=0;l;)f=(c[--l]=c[l]+d[l]+f)/10|0,c[l]%=10;f&&(c.unshift(f),++v);for(l=c.length;0==c[--l];c.pop());b.kd=c;b.e=v;return b};a.prototype.pow=function(b){var f=this,l=new a(1),v=l,d=0>b;(b!==~~b||-1E6>b||1E6<b)&&c("!pow!");
for(b=d?-b:b;;){b&1&&(v=v.Up(f));b>>=1;if(!b)break;f=f.Up(f)}return d?l.VB(v):v};a.prototype.round=function(f,l){var v=this;null==f?f=0:(f!==~~f||0>f||1E6<f)&&c("!round!");b(v=new a(v),f,null==l?a.ye:l);return v};a.prototype.sqrt=function(){var f,l,v;l=this.kd;f=this.Ed;v=this.e;var d=new a("0.5");if(!l[0])return new a(this);0>f&&c(NaN);f=Math.sqrt(this.toString());0==f||f==1/0?(f=l.join(""),f.length+v&1||(f+="0"),l=new a(Math.sqrt(f).toString()),l.e=((v+1)/2|0)-(0>v||v&1)):l=new a(f.toString());
f=l.e+(a.Dc+=4);do v=l,l=d.Up(v.NE(this.VB(v)));while(v.kd.slice(0,f).join("")!==l.kd.slice(0,f).join(""));b(l,a.Dc-=4,a.ye);return l};a.prototype.Up=function(b){var f,l=this.kd,c=(b=new a(b)).kd,v=l.length,d=c.length,e=this.e,g=b.e;b.Ed=this.Ed==b.Ed?1:-1;if(!l[0]||!c[0])return new a(0*b.Ed);b.e=e+g;v<d&&(f=l,l=c,c=f,g=v,v=d,d=g);for(f=Array(g=v+d);g--;f[g]=0);for(e=d;e--;){d=0;for(g=v+e;g>e;)d=f[g]+c[e]*l[g-e-1]+d,f[g--]=d%10,d=d/10|0;f[g]=(f[g]+d)%10}d&&++b.e;f[0]||f.shift();for(e=f.length;!f[--e];f.pop());
b.kd=f;return b};a.prototype.toString=function(){var a=this.e,b=this.kd.join(""),f=b.length;if(-7>=a||21<=a)b=b.charAt(0)+(1<f?"."+b.slice(1):"")+(0>a?"e":"e+")+a;else if(0>a){for(;++a;b="0"+b);b="0."+b}else if(0<a)if(++a>f)for(a-=f;a--;b+="0");else a<f&&(b=b.slice(0,a)+"."+b.slice(a));else 1<f&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.Ed&&this.kd[0]?"-"+b:b};a.Dc=20;a.ye=1;return a}();a.Tn=f})(y||(y={}));(function(a){var b=function(){function b(a){this.af=a}b.prototype.Xp=function(b,r,l){var c=
new a.b,d=new a.b,e=this.af;l.yd(b,r,function(a,b){e.fc(2*a,c);e.fc(2*b,d);return c.compare(d)})};b.prototype.Ko=function(a){return this.af.read(2*a+1)};return b}(),c=function(){function l(){}l.Lo=function(b){if(b.u())return!1;var r=b.F();return r==a.j.Polygon?0==b.Mh()?!1:!0:r==a.j.Polyline?(r=[!1],l.pz(b,!0,r),r[0]):r==a.j.Envelope||a.U.Mc(r)&&!b.kD()?!0:!1};l.il=function(b){var r=b.F();if(r==a.j.Polygon)return r=new a.Ya(b.description),b.u()||b.tA(r),r;if(r==a.j.Polyline)return l.pz(b,!1,null);
if(r==a.j.Envelope)return r=new a.Ya(b.description),b.u()||r.Xc(b,!1),r;if(a.U.Mc(r)){r=new a.pe(b.description);if(!b.u()&&!b.kD()){var k=new a.Wa;b.Fn(k);r.add(k);b.Cn(k);r.add(k)}return r}if(a.U.Lm(r))return null;throw a.g.O();};l.pz=function(f,r,l){null!=l&&(l[0]=!1);var c=null;r||(c=new a.pe(f.description));if(!f.u()){var d=new a.ha(0);d.yb(2*f.fa());for(var e=0,g=f.fa();e<g;e++)if(0<f.Ia(e)&&!f.Mo(e)){var h=f.Fa(e);d.add(h);h=f.Ec(e)-1;d.add(h)}if(0<d.size){g=new a.Qr;e=f.oc(0);g.sort(d,0,d.size,
new b(e));g=new a.b;e.fc(2*d.get(0),g);for(var h=0,z=1,m=new a.Wa,n=new a.b,q=1,s=d.size;q<s;q++)if(e.fc(2*d.get(q),n),n.vb(g))d.get(h)>d.get(q)?(d.set(h,2147483647),h=q):d.set(q,2147483647),z++;else{if(0==(z&1))d.set(h,2147483647);else if(r)return null!=l&&(l[0]=!0),null;g.K(n);h=q;z=1}if(0==(z&1))d.set(h,2147483647);else if(r)return null!=l&&(l[0]=!0),null;if(!r){d.yd(0,d.size,function(a,b){return a-b});q=0;for(s=d.size;q<s&&2147483647!=d.get(q);q++)f.Td(d.get(q),m),c.add(m)}}}return r?null:c};
return l}();a.Hh=c})(y||(y={}));(function(a){var b=function(){function b(){this.mf=new a.ha(0);this.Kq=new a.ha(0);this.gE=1;this.Pq=NaN}b.prototype.sort=function(a,b,r,k){if(32>r-b)k.Xp(b,r,a);else{var c=!0;try{for(var v=Infinity,d=-Infinity,e=b;e<r;e++){var g=k.Ko(a.get(e));g<v&&(v=g);g>d&&(d=g)}if(this.reset(r-b,v,d,r-b)){for(e=b;e<r;e++){var h=a.get(e),g=k.Ko(h),z=this.oC(g);this.mf.set(z,this.mf.get(z)+1);this.Kq.write(e-b,h)}var m=this.mf.get(0);this.mf.set(0,0);for(var e=1,n=this.mf.size;e<
n;e++){var q=this.mf.get(e);this.mf.set(e,m);m+=q}for(e=b;e<r;e++){var h=this.Kq.read(e-b),g=k.Ko(h),z=this.oC(g),s=this.mf.get(z);a.set(s+b,h);this.mf.set(z,s+1)}c=!1}}catch(t){this.mf.resize(0),this.Kq.resize(0)}if(c)k.Xp(b,r,a);else{e=r=0;for(n=this.mf.size;e<n;e++)c=r,r=this.mf.get(e),r>c&&k.Xp(b+c,b+r,a);100<this.mf.size&&(this.mf.resize(0),this.Kq.resize(0))}}};b.prototype.reset=function(a,f,r,k){if(2>a||r==f)return!1;a=Math.min(b.sI,a);this.mf.yb(a);this.mf.resize(a);this.mf.dh(0,0,this.mf.size);
this.gE=f;this.Kq.resize(k);this.Pq=(r-f)/(a-1);return!0};b.prototype.oC=function(b){return a.J.truncate((b-this.gE)/this.Pq)};b.sI=65536;return b}();a.Qr=b})(y||(y={}));(function(a){var b;(function(a){a[a.enum_line=1]="enum_line";a[a.enum_arc=2]="enum_arc";a[a.enum_dummy=4]="enum_dummy";a[a.enum_concave_dip=8]="enum_concave_dip";a[a.enum_connection=3]="enum_connection"})(b||(b={}));var c=function(){function b(){}b.Js=function(f,r,l,k,c,d){var e=new b;e.Fl=new a.b;e.Ql=new a.b;e.Kt=new a.b;e.Fl.K(f);
e.Ql.K(r);e.Kt.K(l);e.rn=k;e.Rg=c;e.Ug=d;return e};b.Pa=function(f,r,l,k){var c=new b;c.Fl=new a.b;c.Ql=new a.b;c.Kt=new a.b;c.Fl.K(f);c.Ql.K(r);c.Kt.Eh();c.rn=4;c.Rg=l;c.Ug=k;return c};return b}(),l=function(){function b(a,f,r,l,k,c){this.Ht=null;this.va=0;this.Dx=a;this.yE=this.wE=0;this.Ea=f;this.Pi=r;this.Dj=l;this.kp=k;this.Zb=c}b.prototype.next=function(){for(var b=new a.Wa;;){if(this.va==this.Dx.G())return null;this.Dx.Td(this.va,b);this.va++;if(!b.u())break}var f=!1;null==this.Ht&&(this.wE=
b.lk(),this.yE=b.mk(),this.Ht=k.buffer(b,this.Ea,this.Pi,this.Dj,this.kp,this.Zb),f=!0);var r;this.va<this.Dx.G()?(r=new a.La,this.Ht.copyTo(r)):r=this.Ht;if(!f){var f=new a.Bg,l=b.lk()-this.wE,b=b.mk()-this.yE;f.On(l,b);r.Pe(f)}return r};b.prototype.za=function(){return 0};return b}(),f=function(){function b(a,f){this.Na=a;this.va=0;this.Wo=f}b.prototype.next=function(){var b=this.Na.V;if(this.va<b.fa()){var f=this.va;this.va++;if(!b.Mo(f))for(var r=b.Ga(b.Ec(f)-1);this.va<b.fa();){var l=b.Ga(b.Fa(this.va));
if(b.Mo(this.va))break;if(l!=r)break;r=b.Ga(b.Ec(this.va)-1);this.va++}if(1==this.va-f)return this.Na.kB(this.Na.V,f,this.Wo);r=new a.Ya(this.Na.V.description);r.$j(this.Na.V,f,!0);for(f+=1;f<this.va;f++)r.xs(this.Na.V,f,0,b.bt(f),!1);return this.Na.kB(r,0,this.Wo)}return null};b.prototype.za=function(){return 0};return b}(),r=function(){function a(b){this.Na=b;this.va=0}a.prototype.next=function(){var a=this.Na.V;if(this.va<a.fa()){var b=this.va;a.no(this.va);for(this.va++;this.va<a.fa()&&!(0<a.no(this.va));)this.va++;
return 0==b&&this.va==a.fa()?this.Na.Fv(a,0,a.fa()):this.Na.Fv(a,b,this.va)}return null};a.prototype.za=function(){return 0};return a}(),k=function(){function k(a){this.Uq=this.St=this.Vq=this.td=null;this.Kd=[];this.Zb=a;this.ib=this.vt=this.NP=this.Ea=this.ux=this.ir=this.la=0;this.rx=this.Dj=-1;this.Wo=!0}k.buffer=function(b,f,r,l,c,d){if(null==b)throw a.g.O();if(0>l)throw a.g.O();if(b.u())return new a.La(b.description);var e=new a.i;b.ed(e);0<f&&e.R(f,f);d=new k(d);d.Pi=r;d.V=b;d.la=a.Ja.Ad(r,
e,!0);d.ir=a.Ja.Ad(null,e,!0);d.Ea=f;d.NP=b.F();0>=c&&(c=96);d.ib=Math.abs(d.Ea);d.vt=0!=d.ib?1/d.ib:0;isNaN(l)||0==l?l=1E-5*d.ib:l>0.5*d.ib&&(l=0.5*d.ib);12>c&&(c=12);b=Math.abs(f)*(1-Math.cos(Math.PI/c));b>l?l=b:(b=Math.PI/Math.acos(1-l/Math.abs(f)),b<c-1&&(c=a.J.truncate(b),12>c&&(c=12,l=Math.abs(f)*(1-Math.cos(Math.PI/c)))));d.Dj=l;d.kp=c;d.ux=Math.min(d.ir,0.25*l);return d.lB()};k.prototype.Rs=function(){if(null==this.td)this.td=[];else if(0!==this.td.length)return;var b=this.pB(),b=a.J.truncate((b+
3)/4),f=0.5*Math.PI/b;this.rx=f;for(var r=0;r<4*b;r++)this.td.push(null);for(var l=Math.cos(f),f=Math.sin(f),k=a.b.Pa(0,1),r=0;r<b;r++)this.td[r+0*b]=a.b.Pa(k.y,-k.x),this.td[r+1*b]=a.b.Pa(-k.x,-k.y),this.td[r+2*b]=a.b.Pa(-k.y,k.x),this.td[r+3*b]=k,k=a.b.Pa(k.x,k.y),k.Dr(l,f)};k.prototype.lB=function(){var b=this.V.F();if(a.U.Mc(b))return b=new a.Ya(this.V.description),b.Cc(this.V,!0),this.V=b,this.lB();if(this.Ea<=this.la)if(a.U.RO(b)){if(0>=this.Ea&&(b=new a.i,this.V.s(b),b.ba()<=2*-this.Ea||b.ca()<=
2*this.Ea))return new a.La(this.V.description)}else return new a.La(this.V.description);switch(this.V.F()){case a.j.Point:return this.sK();case a.j.MultiPoint:return this.rK();case a.j.Polyline:return this.uK();case a.j.Polygon:return this.tK();case a.j.Envelope:return this.pK();default:throw a.g.xa();}};k.prototype.uK=function(){if(this.oD(this.V)){var b=new a.Wa;this.V.Td(0,b);var r=new a.i;this.V.s(r);b.jc(r.Af());return this.Ds(b)}this.V=this.RQ(this.V);b=new f(this,this.Wo);return a.wi.local().aa(b,
this.Pi,this.Zb).next()};k.prototype.tK=function(){if(0==this.Ea)return this.V;var b=a.$r.local();this.Rs();this.V=b.aa(this.V,null,!1,this.Zb);if(0>this.Ea){var f=this.V,f=this.Fv(f,0,f.fa());return b.aa(f,this.Pi,!1,this.Zb)}if(this.oD(this.V))return b=new a.Wa,this.V.Td(0,b),f=new a.i,this.V.s(f),b.jc(f.Af()),this.Ds(b);b=new r(this);return a.wi.local().aa(b,this.Pi,this.Zb).next()};k.prototype.Fv=function(b,f,r){for(var l=new a.La(b.description);f<r;f++)if(!(1>b.Ia(f))){var c=b.no(f),d=new a.i;
b.Ti(f,d);if(0<this.Ea)if(0<c)if(this.pD(b,f))c=new a.Wa,b.Td(b.Fa(f),c),c.jc(d.Af()),this.ts(l,c);else{var e=c=new a.Ya(b.description),e=a.Sr.sD(this.V,f)||2==this.tm(this.V,f,e,!0,1)?this.jB(b,f):this.sm(c);l.add(e,!1)}else{if(!(d.ba()+this.la<=2*this.ib||d.ca()+this.la<=2*this.ib||(e=c=new a.Ya(b.description),this.tm(this.V,f,e,!0,1),c.u()))){var g=new a.i;g.L(d);g.R(this.ib,this.ib);e.vs(g);e=this.sm(c);d=1;for(c=e.fa();d<c;d++)l.$j(e,d,!0)}}else if(0<c){if(!(d.ba()+this.la<=2*this.ib||d.ca()+
this.la<=2*this.ib||(e=c=new a.Ya(b.description),this.tm(this.V,f,e,!0,-1),c.u()))){g=new a.i;e.ed(g);g.R(this.ib,this.ib);e.vs(g);e=this.sm(c);d=1;for(c=e.fa();d<c;d++)l.$j(e,d,!0)}}else{e=c=new a.Ya(b.description);this.tm(this.V,f,e,!0,-1);e=this.sm(c);d=0;for(c=e.fa();d<c;d++)l.$j(e,d,!0)}}if(0<this.Ea)return 1<l.fa()?this.sm(l):k.Jd(l);b=new a.i;l.ed(b);if(l.u())return k.Jd(l);b.R(this.ib,this.ib);l.vs(b);l=this.sm(l);b=new a.La(l.description);d=1;for(c=l.fa();d<c;d++)b.$j(l,d,!1);return k.Jd(b)};
k.prototype.sK=function(){return this.Ds(this.V)};k.prototype.Ds=function(b){var f=new a.La(this.V.description);this.ts(f,b);return this.mS(f)};k.prototype.rK=function(){var b=new l(this.V,this.Ea,this.Pi,this.Dj,this.kp,this.Zb);return a.wi.local().aa(b,this.Pi,this.Zb).next()};k.prototype.pK=function(){var b=new a.La(this.V.description);if(0>=this.Ea){if(0==this.Ea)b.Xc(this.V,!1);else{var f=new a.Wj;this.V.Dp(f);f.R(this.Ea,this.Ea);b.Xc(f,!1)}return b}b.Xc(this.V,!1);this.V=b;return this.jB(b,
0)};k.prototype.jB=function(b,f){this.Rs();for(var r=new a.La(b.description),l=new a.b,c=new a.b,d=new a.b,e=new a.b,g=new a.b,h=new a.b,z=new a.b,m=new a.b,n=b.Ia(f),q=b.Fa(f),s=0,t=b.Ia(f);s<t;s++){b.A(q+s,c);b.A(q+(s+1)%n,e);b.A(q+(s+2)%n,h);z.qc(e,c);if(0==z.length())throw a.g.xa();z.st();z.normalize();z.scale(this.ib);l.add(z,c);d.add(z,e);0==s?r.Mr(l):r.Mm(l);r.Mm(d);m.qc(h,e);if(0==m.length())throw a.g.xa();m.st();m.normalize();m.scale(this.ib);g.add(m,e);this.NA(r,e,d,g,!1)}return k.Jd(r)};
k.prototype.kB=function(b,f,r){this.Rs();if(1>b.Ia(f))return null;if(this.pD(b,f)&&0<this.Ea){r=new a.Wa;b.Td(b.Fa(f),r);var l=new a.i;b.Ti(f,l);r.jc(l.Af());return this.Ds(r)}l=new a.Ya(b.description);if(b.Mo(f))this.tm(b,f,l,r,1),this.tm(b,f,l,r,-1);else{var k=new a.Ya(b.description);k.$j(b,f,!1);k.xs(b,f,0,b.bt(f),!1);this.tm(k,0,l,r,1)}return this.sm(l)};k.prototype.sm=function(b){return a.Of.Rj(b,this.ir,!0,!0,this.Zb)};k.prototype.pB=function(){if(0==this.Dj)return this.kp;var b=1-this.Dj*Math.abs(this.vt),
f;-1>b?f=4:f=2*Math.PI/Math.acos(b)+0.5;4>f?f=4:f>this.kp&&(f=this.kp);return a.J.truncate(f)};k.prototype.NA=function(b,f,r,l,k){this.Rs();var c=new a.b;c.qc(r,f);c.scale(this.vt);var d=new a.b;d.qc(l,f);d.scale(this.vt);c=Math.atan2(c.y,c.x)/this.rx;0>c&&(c=this.td.length+c);c=this.td.length-c;d=Math.atan2(d.y,d.x)/this.rx;0>d&&(d=this.td.length+d);d=this.td.length-d;d<c&&(d+=this.td.length);var B=a.J.truncate(d),d=a.J.truncate(Math.ceil(c)),c=new a.b;c.K(this.td[d%this.td.length]);c.Er(this.ib,
f);var e=10*this.la;c.sub(r);c.length()<e&&(d+=1);c.K(this.td[B%this.td.length]);c.Er(this.ib,f);c.sub(l);c.length()<e&&--B;r=B-d;r++;B=0;for(d%=this.td.length;B<r;B++,d=(d+1)%this.td.length)c.K(this.td[d]),c.Er(this.ib,f),b.Mm(c);k&&b.Mm(l)};k.prototype.tm=function(b,f,r,l,k){var d=new a.gd,B=d.PJ(b,f);d.wo(this.ux,!1,!1);if(2>d.G(B)){if(0>k)return 1;k=b;d=new a.Wa;k.Td(k.Fa(f),d);this.ts(r,d);return 1}var e=d.Ga(d.Db(d.Wb(B))),g=new a.Bg;g.On(-e.x,-e.y);d.Pe(g);if(l&&(this.LM(d,B,k),2>d.G(B))){if(0>
k)return 1;k=b;d=new a.Wa;k.Td(k.Fa(f),d);this.ts(r,d);return 1}this.Kd.length=0;var h=d.Wb(B);f=d.Db(h);var m=1==k?d.Va(f):d.Y(f);b=1==k?d.Y(f):d.Va(f);var n=!0;l=new a.b;for(var B=new a.b,q=new a.b,s=new a.b,t=new a.b,u=new a.b,w=new a.b,x=new a.b,A=new a.b,y=new a.b,O=this.ib,h=d.Ia(h),C=0;C<h;C++)d.A(b,B),n&&(d.A(f,l),d.A(m,q),x.qc(l,q),x.normalize(),y.zD(x),y.scale(O),s.add(y,l)),w.qc(B,l),w.normalize(),A.zD(w),A.scale(O),t.add(l,A),m=x.Ai(w),n=x.ml(w),0>m||0>n&&0==m?this.Kd.push(c.Js(s,t,l,
2,this.Kd.length+1,this.Kd.length-1)):s.vb(t)||(this.Kd.push(c.Pa(s,l,this.Kd.length+1,this.Kd.length-1,"dummy")),this.Kd.push(c.Pa(l,t,this.Kd.length+1,this.Kd.length-1,"dummy"))),u.add(B,A),this.Kd.push(c.Js(t,u,l,1,this.Kd.length+1,this.Kd.length-1)),s.K(u),y.K(A),q.K(l),l.K(B),x.K(w),m=f,f=b,n=!1,b=1==k?d.Y(f):d.Va(f);this.Kd[this.Kd.length-1].Rg=0;this.Kd[0].Ug=this.Kd.length-1;this.TQ(r);g.On(e.x,e.y);r.ZA(g,r.fa()-1);return 1};k.prototype.TQ=function(a){for(var b=this.$K(),f=!0,r=b+1,l=b;r!=
b;l=r){var k=this.Kd[l],r=-1!=k.Rg?k.Rg:(l+1)%this.Kd.length;0!=k.rn&&(f&&a.Mr(k.Fl),2==k.rn?this.NA(a,k.Kt,k.Fl,k.Ql,!0):a.Mm(k.Ql),f=!1)}};k.prototype.$K=function(){null==this.Uq&&(this.Uq=[null,null,null,null,null,null,null,null,null]);for(var f=0,r=0,l=this.Kd.length;r<l;){var k=this.Kd[r];if(0!=(k.rn&b.enum_connection)){f=r;break}r=k.Rg}l=f+1;for(r=f;l!=f;r=l){for(var k=this.Kd[r],l=k.Rg,c=1,d=null;l!=r;){d=this.Kd[l];if(0!=(d.rn&b.enum_connection))break;l=d.Rg;c++}1!=c&&1==(k.rn&d.rn)&&(null==
this.Vq&&(this.Vq=new a.zb,this.St=new a.zb),this.Vq.fd(k.Fl),this.Vq.wd(k.Ql),this.St.fd(d.Fl),this.St.wd(d.Ql),1==this.Vq.Ha(this.St,this.Uq,null,null,this.ir)&&(k.Ql.K(this.Uq[0]),d.Fl.K(this.Uq[0]),k.Rg=l,d.Ug=r))}return f};k.prototype.qt=function(b,f,r){var l=new a.b;l.qc(r,b);r=l.length();r=this.ib*this.ib-0.25*r*r;if(0<r){r=Math.sqrt(r);l.normalize();l.Ip();var k=new a.b;k.qc(f,b);if(k.ml(l)+r>=this.ib)return!0}return!1};k.prototype.LM=function(b,f,r){for(var l=0;1>l;l++){var k=!1,c=b.Wb(f),
d=b.Ia(c);if(0==d)break;var B=d;if(3>d)break;!b.wc(c)&&(B=d-1);for(var c=b.Db(c),d=0<r?b.Va(c):b.Y(c),e=0<r?b.Y(c):b.Va(c),g=d,h=!0,z=new a.b,m=new a.b,n=new a.b,q=new a.b,s=new a.b,t=a.b.Pa(0,0),u=new a.b,w=new a.b,x=new a.b,A=new a.b,y=this.ib,O=0,C=0;C<B;){b.A(e,m);h&&(b.A(c,z),b.A(d,n),g=d);w.qc(z,n);w.normalize();u.qc(m,z);u.normalize();if(g==e)break;var G=w.Ai(u),D=w.ml(u),M=!0;0>G||0>D&&0==G||!this.qt(n,z,m)||(t.K(m),M=!1,++O,k=!0);if(M){if(0<O)for(;;){G=0<r?b.Va(g):b.Y(g);if(G==c)break;b.A(G,
q);if(this.qt(q,n,t))n.K(q),g=G,M=!1,++O;else{G!=e&&this.qt(q,n,m)&&this.qt(q,z,m)&&(n.K(q),g=G,M=!1,++O);break}}if(!M)continue;if(0<O){g=0<r?b.Va(d):b.Y(d);for(h=1;h<O;h++)M=0<r?b.Va(g):b.Y(g),b.vf(g,!0),g=M;x.qc(z,n);O=x.length();O=y*y-0.25*O*O;O=Math.sqrt(O);y-O>0.5*this.Dj?(s.add(n,z),s.scale(0.5),x.normalize(),x.Ip(),A.K(x),A.scale(y-O),s.add(A),b.Yi(d,s)):b.vf(d,!0);O=0}n.K(z);g=c}z.K(m);d=c;c=e;e=0<r?b.Y(c):b.Va(c);C++;h=!1}if(0<O){g=0<r?b.Va(d):b.Y(d);for(h=1;h<O;h++)M=0<r?b.Va(g):b.Y(g),
b.vf(g,!0),g=M;s.add(n,z);s.scale(0.5);x.qc(z,n);O=x.length();O=y*y-0.25*O*O;O=Math.sqrt(O);x.normalize();x.Ip();A.K(x);A.scale(y-O);s.add(A);b.Yi(d,s)}b.wo(this.ux,!1,!1);if(!k)break}};k.prototype.pD=function(b,f){if(1==b.Ia(f))return!0;var r=new a.i;b.Ti(f,r);return Math.max(r.ba(),r.ca())<0.5*this.Dj?!0:!1};k.prototype.oD=function(b){var f=new a.i;b.s(f);return Math.max(f.ba(),f.ca())<0.5*this.Dj?!0:!1};k.prototype.RQ=function(b){b=a.Sz.local().aa(b,0.25*this.Dj,!1,this.Zb);for(var f=0,r=0,l=b.fa();r<
l;r++)f=Math.max(b.Ia(r),f);if(32>f)return this.Wo=!1,b;this.Wo=!0;return a.Of.Rj(b,this.ir,!1,!0,this.Zb)};k.prototype.ts=function(b,f){var r=f.A();if(null!=this.td&&0!==this.td.length){var l=new a.b;l.K(this.td[0]);l.Er(this.ib,r);b.Mr(l);for(var k=1,c=this.td.length;k<c;k++)l.K(this.td[k]),l.Er(this.ib,r),b.Mm(l)}else for(var k=this.pB(),l=a.J.truncate((k+3)/4),k=0.5*Math.PI/l,c=Math.cos(k),d=Math.sin(k),B=new a.b,e=3;0<=e;e--)switch(B.na(0,this.ib),e){case 0:for(k=0;k<l;k++)b.xj(B.x+r.x,B.y+r.y),
B.Dr(c,d);break;case 1:for(k=0;k<l;k++)b.xj(-B.y+r.x,B.x+r.y),B.Dr(c,d);break;case 2:for(k=0;k<l;k++)b.xj(-B.x+r.x,-B.y+r.y),B.Dr(c,d);break;default:b.Ty(B.y+r.x,-B.x+r.y);for(k=1;k<l;k++)B.Dr(c,d),b.xj(B.y+r.x,-B.x+r.y)}};k.Jd=function(a){a.hg(1,0);return a};k.prototype.mS=function(a){a.hg(2,this.la);a.hl();return a};return k}();a.UG=k})(y||(y={}));(function(a){var b=function(){function b(l){this.Rb=l;this.a=new a.gd;this.vg=new a.ha(0)}b.prototype.oo=function(a,b,r){switch(b){case 0:if(a.w<r&&a.C<=
r)break;else return a.w>=r?1:-1;case 1:if(a.D<r&&a.H<=r)break;else return a.D>=r?1:-1;case 2:if(a.w>=r&&a.C>r)break;else return a.C<=r?1:-1;case 3:if(!(a.D>=r&&a.H>r))return a.H<=r?1:-1}return 0};b.prototype.bL=function(b,f){return b.F()==a.j.Polygon?this.cL(b,f):this.dL(b)};b.prototype.cL=function(b,f){if(0==this.Rb.ba()||0==this.Rb.ca())return b.Qa();var r=new a.i;b.ed(r);this.V=this.a.Fb(b);var k=new a.i,c=new a.i,d=new a.b,e=new a.b,g=[0,0,0,0,0,0,0,0,0],h=[0,0,0,0,0,0,0,0,0];new a.Ag;var z=new a.zb,
m=new a.ha(0);m.yb(Math.min(100,b.G()));for(var n=!1,q=0;!n&&4>q;q++){var s=!1,t=0!=(q&1),u=0;switch(q){case 0:u=this.Rb.w;s=r.w<=u&&r.C>=u;break;case 1:u=this.Rb.D;s=r.D<=u&&r.H>=u;break;case 2:u=this.Rb.C;s=r.w<=u&&r.C>=u;break;case 3:u=this.Rb.H,s=r.D<=u&&r.H>=u}if(s){n=!0;for(s=this.a.Wb(this.V);-1!=s;){var w=-1,x=-1,A=this.a.Db(s),y=A;do{var O=this.a.dc(y);null==O&&(O=z,this.a.A(y,d),O.fd(d),this.a.A(this.a.Y(y),e),O.wd(e));O.s(k);var C=this.oo(k,q,u),G=0,M=-1;if(-1==C){O=O.mt(t,u,g,h);0<O?G=
this.a.Lr(y,h,O):G=0;for(var G=G+1,D=y,K=this.a.Y(D),O=0;O<G;O++){this.a.A(D,d);this.a.A(K,e);M=this.a.dc(D);null==M&&(M=z,M.fd(d),M.wd(e));M.s(c);M=this.oo(c,q,u);if(-1==M){if(t)M=Math.abs(d.y-u),N=Math.abs(e.y-u),M<N?(d.y=u,this.a.Yi(D,d)):(e.y=u,this.a.Yi(K,e));else{var M=Math.abs(d.x-u),N=Math.abs(e.x-u);M<N?(d.x=u,this.a.Yi(D,d)):(e.x=u,this.a.Yi(K,e))}M=this.a.dc(D);null==M&&(M=z,M.fd(d),M.wd(e));M.s(c);M=this.oo(c,q,u)}N=w;w=M;-1==x&&(x=w);if(0!=N||1!=w)1==N&&0==w||0!=N||0!=w||m.add(D);1==
w&&(n=!1);M=D=K;K=this.a.Y(K)}}if(0==G){N=w;w=C;-1==x&&(x=w);if(0!=N||1!=w)1==N&&0==w||0!=N||0!=w||m.add(y);1==w&&(n=!1);M=this.a.Y(y)}y=M}while(y!=A);0==x&&0==w&&m.add(A);O=0;for(w=m.size;O<w;O++)x=m.get(O),this.a.vf(x,!1);m.clear(!1);s=3>this.a.Ia(s)?this.a.Br(s):this.a.cc(s)}}}if(n)return b.Qa();this.zR();0<f&&this.fM(f);return this.a.jf(this.V)};b.prototype.dL=function(b){var f=new a.i,r=new a.i,k=[0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0],d=new a.Ag,e=b,g=new a.i;b.ed(g);for(var h=0;4>h;h++){var z=
!1,m=0!=(h&1),n=0;switch(h){case 0:n=this.Rb.w;z=g.w<=n&&g.C>=n;break;case 1:n=this.Rb.D;z=g.D<=n&&g.H>=n;break;case 2:n=this.Rb.C;z=g.w<=n&&g.C>=n;break;case 3:n=this.Rb.H,z=g.D<=n&&g.H>=n}if(z){z=e;e=b.Qa();z=z.Da();z.Lk();for(var q,s=new a.b;z.lb();)for(var t=-1,u=!0;z.Ma();){var w=z.ja();w.s(f);var x=this.oo(f,h,n);if(-1==x){if(x=w.mt(m,n,k,c),0<x){var y=0;q=w.Nb();for(var A=0;A<=x;A++)if(t=A<x?c[A]:1,y!=t){w.Bi(y,t,d);var O=d.get();O.fd(q);A<x&&(m?(s.x=k[A],s.y=n):(s.x=n,s.y=k[A]),O.wd(s));O.s(r);
var C=this.oo(r,h,n);if(-1==C){q=O.Nb();y=O.pc();if(m)C=Math.abs(q.y-n),G=Math.abs(y.y-n),C<G?(q.y=n,O.fd(q)):(y.y=n,O.wd(y));else{var C=Math.abs(q.x-n),G=Math.abs(y.x-n);C<G?(q.x=n,O.fd(q)):(y.x=n,O.wd(y))}O.s(r);C=this.oo(r,h,n)}q=O.pc();y=t;t=C;1==t?(e.Cc(O,u),u=!1):u=!0}}}else t=x,1==t?(e.Cc(w,u),u=!1):u=!0}}}return e};b.prototype.zR=function(){this.wn=-1;this.Mu(!1,this.Rb.w);this.Mu(!1,this.Rb.C);this.Mu(!0,this.Rb.D);this.Mu(!0,this.Rb.H);this.vg.resize(0);this.vg.yb(100);this.wn=this.a.re();
for(var b=new a.b,f=this.a.Wb(this.V);-1!=f;f=this.a.cc(f))for(var r=this.a.Db(f),k=0,c=this.a.Ia(f);k<c;k++,r=this.a.Y(r))if(this.a.A(r,b),this.Rb.w==b.x||this.Rb.C==b.x||this.Rb.D==b.y||this.Rb.H==b.y)this.a.mb(r,this.wn,this.vg.size),this.vg.add(r);this.yu(!1,this.Rb.w);this.yu(!1,this.Rb.C);this.yu(!0,this.Rb.D);this.yu(!0,this.Rb.H);this.VM()};b.prototype.fM=function(b){for(var f=new a.b,r=new a.b,k=a.J.Lh(2048,0),c=this.a.Wb(this.V);-1!=c;c=this.a.cc(c)){var d=this.a.Db(c),e=d;do{var g=this.a.Y(e);
this.a.A(e,f);var h=-1;f.x==this.Rb.w?(this.a.A(g,r),r.x==this.Rb.w&&(h=1)):f.x==this.Rb.C&&(this.a.A(g,r),r.x==this.Rb.C&&(h=1));f.y==this.Rb.D?(this.a.A(g,r),r.y==this.Rb.D&&(h=0)):f.y==this.Rb.H&&(this.a.A(g,r),r.y==this.Rb.H&&(h=0));if(-1!=h&&(h=a.b.Gb(f,r),h=a.J.truncate(Math.min(Math.ceil(h/b),2048)),!(1>=h))){for(var z=1;z<h;z++)k[z-1]=1*z/h;this.a.Lr(e,k,h-1)}e=g}while(e!=d)}};b.prototype.Mu=function(b,f){var r=this.a.re(),k=new a.b,c=new a.ha(0);c.yb(100);for(var d=this.a.Wb(this.V);-1!=
d;d=this.a.cc(d))for(var e=this.a.Db(d),g=0,h=this.a.Ia(d);g<h;g++){var z=this.a.Y(e);this.a.A(e,k);if(b?k.y==f:k.x==f)if(this.a.A(z,k),b?k.y==f:k.x==f)1!=this.a.Sa(e,r)&&(c.add(e),this.a.mb(e,r,1)),1!=this.a.Sa(z,r)&&(c.add(z),this.a.mb(z,r,1));e=z}this.a.cf(r);if(!(3>c.size)){var m=this;c.yd(0,c.size,function(a,b){return m.kj(a,b)});r=new a.b;d=new a.b;e=new a.b;d.Eh();for(var n=-1,g=new a.ha(0),h=new a.ha(0),z=this.a.re(),q=this.a.re(),s=0,t=c.size;s<t;s++){var u=c.get(s);this.a.A(u,k);if(!k.vb(d)){if(-1!=
n){for(var w=n;w<s;w++){var n=c.get(w),x=this.a.Y(n),u=this.a.Va(n),y=!1;0>this.kj(n,x)&&(this.a.A(x,r),b?r.y==f:r.x==f)&&(g.add(n),y=!0,this.a.mb(n,q,1));0>this.kj(n,u)&&(this.a.A(u,r),b?r.y==f:r.x==f)&&(y||g.add(n),this.a.mb(n,z,1))}w=0;for(y=g.size;w<y;w++){n=g.get(w);u=this.a.Sa(n,z);x=this.a.Sa(n,q);if(1==u){u=this.a.Va(n);this.a.A(u,e);var A=[0];A[0]=0;if(!e.vb(k)){var O=a.b.Gb(d,e);A[0]=a.b.Gb(e,k)/O;0==A[0]?A[0]=2.220446049250313E-16:1==A[0]&&(A[0]=0.9999999999999998);this.a.Lr(u,A,1);u=this.a.Va(n);
this.a.Yi(u,k);h.add(u);this.a.mb(u,z,1);this.a.mb(u,q,-1)}}1==x&&(x=this.a.Y(n),this.a.A(x,e),A=[0],A[0]=0,e.vb(k)||(O=a.b.Gb(d,e),A[0]=a.b.Gb(d,k)/O,0==A[0]?A[0]=2.220446049250313E-16:1==A[0]&&(A[0]=0.9999999999999998),this.a.Lr(n,A,1),u=this.a.Y(n),this.a.Yi(u,k),h.add(u),this.a.mb(u,z,-1),this.a.mb(u,q,1)))}n=g;g=h;h=n;h.clear(!1)}n=s;d.K(k)}}this.a.cf(z);this.a.cf(q)}};b.prototype.yu=function(b,f){var r=new a.b,k=new a.ha(0);k.yb(100);for(var c=this.a.re(),d=0,e=this.vg.size;d<e;d++){var g=this.vg.get(d);
if(-1!=g){var h=this.a.Y(g);this.a.A(g,r);if(b?r.y==f:r.x==f)if(this.a.A(h,r),b?r.y==f:r.x==f)-2!=this.a.Sa(g,c)&&(k.add(g),this.a.mb(g,c,-2)),-2!=this.a.Sa(h,c)&&(k.add(h),this.a.mb(h,c,-2))}}if(0!=k.size){var z=this;k.yd(0,k.size,function(a,b){return z.kj(a,b)});d=0;for(e=k.size;d<e;d++){var m=k.get(d);this.a.mb(m,c,d)}g=new a.b;h=new a.b;h.Eh();for(var n=-1,d=0,e=k.size;d<e;d++)if(m=k.get(d),-1!=m&&(this.a.A(m,r),!r.vb(h))){if(-1!=n)for(;;){for(var m=!1,q=1<d-n?d-1:d,s=n;s<q;s++){var t=k.get(s);
if(-1!=t){var u=-1,w=this.a.Y(t);0>this.kj(t,w)&&(this.a.A(w,g),b?g.y==f:g.x==f)&&(u=w);var w=-1,x=this.a.Va(t);0>this.kj(t,x)&&(this.a.A(x,g),b?g.y==f:g.x==f)&&(w=x);if(-1!=u&&-1!=w)this.mo(t,k,c),this.a.vf(t,!1),this.mo(u,k,c),this.a.vf(u,!1),m=!0;else if(-1!=u||-1!=w){for(x=s+1;x<d;x++){var A=k.get(x);if(-1!=A){var y=this.a.Y(A),O=-1;0>this.kj(A,y)&&(this.a.A(y,g),b?g.y==f:g.x==f)&&(O=y);var y=this.a.Va(A),C=-1;0>this.kj(A,y)&&(this.a.A(y,g),b?g.y==f:g.x==f)&&(C=y);if(-1!=O&&-1!=C){this.mo(A,k,
c);this.a.vf(A,!1);this.mo(O,k,c);this.a.vf(O,!1);m=!0;break}if(-1!=u&&-1!=C){this.dF(k,t,u,A,C,c);m=!0;break}else if(-1!=w&&-1!=O){this.dF(k,A,O,t,w,c);m=!0;break}}}if(m)break}}}if(!m)break}n=d;h.K(r)}}this.a.cf(c)};b.prototype.mo=function(a,b,r){r=this.a.Sa(a,r);b.set(r,-1);r=this.a.Sa(a,this.wn);this.vg.set(r,-1);b=this.a.sd(a);-1!=b&&this.a.Db(b)==a&&(this.a.Dh(b,-1),this.a.Wi(b,-1))};b.prototype.dF=function(a,b,r,k,c,d){this.a.Tc(b,k);this.a.Uc(k,b);this.a.Uc(r,c);this.a.Tc(c,r);this.mo(k,a,
d);this.a.Ui(k,!1);this.mo(c,a,d);this.a.Ui(c,!0)};b.prototype.VM=function(){for(var a=0,b=this.vg.size;a<b;a++){var r=this.vg.get(a);-1!=r&&this.a.im(r,-1)}for(var k=0,c=0,d=this.a.Wb(this.V);-1!=d;){var v=this.a.Db(d);if(-1==v||d!=this.a.sd(v)){var e=d,d=this.a.cc(d);this.a.Dh(e,-1);this.a.xu(e)}else{r=v;e=0;do this.a.im(r,d),e++,r=this.a.Y(r);while(r!=v);2>=e?(r=this.a.Sa(v,this.wn),this.vg.set(r,-1),v=this.a.vf(v,!1),2==e&&(r=this.a.Sa(v,this.wn),this.vg.set(r,-1),this.a.vf(v,!1)),e=d,d=this.a.cc(d),
this.a.Dh(e,-1),this.a.xu(e)):(this.a.Ir(d,!1),this.a.Wi(d,this.a.Va(v)),this.a.hm(d,e),c+=e,k++,d=this.a.cc(d))}}a=0;for(b=this.vg.size;a<b;a++)if(r=this.vg.get(a),-1!=r&&(d=this.a.sd(r),-1==d)){d=this.a.Cf(this.V,-1);e=0;v=r;do this.a.im(r,d),e++,r=this.a.Y(r);while(r!=v);2>=e?(r=this.a.Sa(v,this.wn),this.vg.set(r,-1),v=this.a.vf(v,!1),2==e&&(r=this.a.Sa(v,this.wn),0<=r&&this.vg.set(r,-1),this.a.vf(v,!1)),e=d,this.a.Dh(e,-1),this.a.xu(e)):(this.a.Hn(d,!0),this.a.hm(d,e),this.a.Dh(d,v),this.a.Wi(d,
this.a.Va(v)),this.a.Ir(d,!1),c+=e,k++)}this.a.gm(this.V,k);this.a.Pk(this.V,c);a=0;for(b=this.a.ad;-1!=b;b=this.a.we(b))a+=this.a.G(b);this.a.ZF(a)};b.Xk=function(a,f,r){return(new b(f)).bL(a,r)};b.clip=function(l,f,r,k){if(l.u())return l;if(f.u())return l.Qa();r=l.F();if(r==a.j.Point)return k=l.A(),f.contains(k)?l:l.Qa();if(r==a.j.Envelope)return k=new a.i,l.s(k),k.Ha(f)?(f=new a.Wj,l.copyTo(f),f.Bu(k),f):l.Qa();var c=new a.i;l.ed(c);if(f.contains(c))return l;if(!f.kc(c))return l.Qa();c=l.qb;if(null!=
c&&(c=c.hi,null!=c)){c=c.En(f);if(1==c){if(r!=a.j.Polygon)throw a.g.xa();l=new a.La(l.description);l.vs(f);return l}if(0==c)return l.Qa()}switch(r){case a.j.MultiPoint:r=null;for(var c=l.G(),d=l.oc(0),e=0,g=0;g<c;g++)k=new a.b,d.fc(2*g,k),f.contains(k)||(0==e&&(r=l.Qa()),e<g&&r.Qd(l,e,g),e=g+1);0<e&&r.Qd(l,e,c);return 0==e?l:r;case a.j.Polygon:case a.j.Polyline:return b.Xk(l,f,k);default:throw a.g.xa();}};b.prototype.kj=function(b,f){var r=new a.b;this.a.A(b,r);var k=new a.b;this.a.A(f,k);return r.compare(k)};
return b}();a.Fd=b})(y||(y={}));(function(a){var b=new a.b,c=function(){function b(f,k,l,c,d){this.Ml=new a.b;this.mn=new a.b;this.Ck=new a.b;this.a=f;this.Ox=l;this.cn=c;this.Ml=k;this.vk=d;this.mn.Eh();this.Ck.Eh()}b.prototype.sB=function(b){this.a.A(b,this.mn);b=a.J.truncate((this.mn.x-this.Ml.x)*this.cn+0.5);var f=a.J.truncate((this.mn.y-this.Ml.y)*this.cn+0.5);return l.XC(b,f)};b.prototype.uw=function(a){return this.a.Sa(a,this.vk)};return b}();a.vT=function(){return function(){}}();var l=function(){function f(){this.Ml=
new a.b;this.Xo=[0,0,0,0];this.Jq=[0,0,0,0];this.fn=this.vk=-1}f.yM=function(a,b){var l=new f;l.a=a;l.la=b;l.Ox=b*b;l.Jt=2*b;l.cn=1/l.Jt;return l.eL()};f.Uw=function(a,b,f,l,c){a-=f;b-=l;return a*a+b*b<=c};f.XC=function(b,f){return a.J.kg(f,a.J.kg(b))};f.prototype.gL=function(r,k){this.a.vc(r,b);for(var l=(b.y-this.Ml.y)*this.cn,c=a.J.truncate((b.x-this.Ml.x)*this.cn),d=a.J.truncate(l),e=l=0;1>=e;e+=1)for(var g=0;1>=g;g+=1){var h=f.XC(c+e,d+g),z=this.uk.CN(h);-1!=z&&(this.Xo[l]=z,this.Jq[l]=h,l++)}for(c=
l-1;1<=c;c--){z=this.Xo[c];for(d=c-1;0<=d;d--)if(z==this.Xo[d]){this.Jq[d]=-1;l--;c!=l&&(this.Jq[c]=this.Jq[l],this.Xo[c]=this.Xo[l]);break}}for(d=0;d<l;d++)this.hL(r,this.Jq[d],b,this.Xo[d],k)};f.prototype.hL=function(b,k,l,c,d){for(var e=new a.b;-1!=c;c=this.uk.RN(c)){var g=this.uk.ea(c);b==g||-1!=k&&this.a.Sa(g,this.vk)!=k||(this.a.vc(g,e),f.Uw(l.x,l.y,e.x,e.y,this.Ox)&&d.add(c))}};f.prototype.Tl=function(a,b,f){var l=this.a.Sa(a,this.fn),c=this.a.Sa(b,this.fn);-1==l&&(l=this.od.jh(),this.od.addElement(l,
a),this.a.mb(a,this.fn,l));-1==c?this.od.addElement(l,b):this.od.Pv(l,c);this.a.mb(b,this.fn,-2);b=this.$P(a,b);f&&(f=this.Rt.sB(a),this.a.mb(a,this.vk,f));return b};f.ZP=function(b,l,c){b.mc(l);c=b;var d=new a.b;f.GH(b.A(),l.A(),d);c.jc(d)};f.GH=function(a,b,f){var l=a.x;a.x!=b.x&&(l=(1*a.x+1*b.x)/2);var c=a.y;a.y!=b.y&&(c=(1*a.y+1*b.y)/2);f.na(l,c)};f.prototype.$P=function(b,f){var l=new a.b;this.a.A(b,l);var c=new a.b;this.a.A(f,c);var d=this.a.RC(b),e=this.a.RC(f),g=d+e,h=0,z=l.x;l.x!=c.x&&(z=
(l.x*d+c.x*e)/g,h++);var m=l.y;l.y!=c.y&&(m=(l.y*d+c.y*e)/g,h++);0<h&&this.a.jc(b,z,m);this.a.oS(b,g);return 0!=h};f.prototype.eL=function(){var b=this.a.qd,f=this.a.wC();this.Ml=f.xw();f=Math.max(f.ca(),f.ba())/2147483646;this.Jt<f&&(this.Jt=f,this.cn=1/this.Jt);this.od=new a.Tr;this.od.Cr(a.J.truncate(this.a.qd/3+1));this.od.$l(a.J.truncate(this.a.qd/3+1));this.vk=this.a.re();this.fn=this.a.re();this.Rt=new c(this.a,this.Ml,this.Ox,this.cn,this.vk);this.uk=new a.zH(a.J.truncate(4*b/3),this.Rt);
this.uk.vR(this.a.qd);b=!1;for(f=this.a.ad;-1!=f;f=this.a.we(f))for(var l=this.a.Wb(f);-1!=l;l=this.a.cc(l))for(var d=this.a.Db(l),e=0,g=this.a.Ia(l);e<g;e++){var h=this.Rt.sB(d);this.a.mb(d,this.vk,h);this.uk.addElement(d,h);d=this.a.Y(d)}var m=new a.ha(0);m.yb(10);for(f=this.a.ad;-1!=f;f=this.a.we(f))for(l=this.a.Wb(f);-1!=l;l=this.a.cc(l)){d=this.a.Db(l);e=0;for(g=this.a.Ia(l);e<g;e++){if(-2!=this.a.Sa(d,this.fn)){h=this.a.Sa(d,this.vk);for(this.uk.Kc(d,h);;){this.gL(d,m);if(0==m.size)break;for(var h=
!1,n=0,q=m.size;n<q;n++){var s=m.get(n),t=this.uk.ea(s);this.uk.ld(s);h=this.Tl(d,t,n+1==q)||h}b=b||h;m.clear(!1);if(!h)break}}d=this.a.Y(d)}}b&&this.YJ();this.Rt=this.uk=null;this.a.cf(this.vk);this.a.cf(this.fn);return b};f.prototype.YJ=function(){for(var b=new a.b,f=this.od.Xd;-1!=f;f=this.od.Bw(f)){var l=this.od.hc(f);this.a.A(this.od.ea(l),b);for(l=this.od.cb(l);-1!=l;l=this.od.cb(l))this.a.Yi(this.od.ea(l),b)}};return f}();a.Rr=l})(y||(y={}));(function(a){var b=Math.PI,c=2*Math.PI,l=Math.PI/
2,f=function(){function a(){}a.xL=function(b,f){var r=new a;r.x=b;r.y=f;r.type=0;r.mh=0;return r};a.vm=function(b){var f=new a;f.x=b.x;f.y=b.y;f.type=0;f.mh=0;return f};a.wL=function(b){var f=new a;f.x=b.x;f.y=b.y;f.type=b.type;f.mh=b.mh;return f};a.Bd=function(b,f,r){var l=new a;l.x=b.x+f*Math.cos(r);l.y=b.y+f*Math.sin(r);l.type=b.type;l.mh=b.mh;return l};a.Is=function(b,f){var r=new a;r.x=0.5*(b.x+f.x);r.y=0.5*(b.y+f.y);r.type=b.type;r.mh=b.mh;return r};a.LB=function(b,f){var r=new a;r.x=b.x+0.001*
(f.x-b.x);r.y=b.y+0.001*(f.y-b.y);r.type=b.type;r.mh=b.mh;return r};return a}(),r=function(){return function(){}}();(function(a){a[a.Round=0]="Round";a[a.Bevel=1]="Bevel";a[a.Miter=2]="Miter";a[a.Square=3]="Square"})(a.DH||(a.DH={}));var k=function(){function k(a){this.Jx=this.Jb=this.dg=null;this.Ee=a}k.aa=function(b,f,r,l,c,d){if(null==b)throw a.g.O();if(1>b.gb())throw a.g.O();if(0==f||b.u())return b;d=new k(d);d.an=b;d.Ea=f;d.la=c;d.bi=r;d.Cx=l;return d.gv()};k.prototype.gJ=function(){var b=this.an,
f=b.Nb(),r=b.pc(),l=new a.b;l.qc(r,f);l.normalize();l.st();l.scale(this.Ea);f.add(l);r.add(l);l=b.Qa();b.fd(f);b.wd(r);return l};k.prototype.fJ=function(){var b=this.an;if(0<this.Ea&&2!=this.bi){var f=new a.La;f.Xc(b,!1);this.an=f;return this.gv()}b=new a.Wj(b.S);b.R(this.Ea,this.Ea);return b};k.prototype.rF=function(a,b,f,r){return(b.x-a.x)*(r.x-f.x)+(b.y-a.y)*(r.y-f.y)};k.prototype.Vb=function(a,b){if(void 0===b)this.Jb.push(a),this.Ye++;else if(0==this.Ye)this.Vb(a);else{var r=this.du,k,c;k=this.dg[0==
b?r-1:b-1];c=this.dg[b];var d=this.rF(k,c,this.Jb[this.Ye-1],a);0<d?this.Vb(a):0>d&&(0<this.rF(k,c,c,this.Jb[this.Ye-1])?(c=this.dg[0==b?r-2:1==b?r-1:b-2],r=f.Bd(k,this.Ea,Math.atan2(k.y-c.y,k.x-c.x)-l),this.Jb[this.Ye-1]=r,1==this.bi||2==this.bi?(r=f.Is(r,k),this.Vb(r),r=f.Bd(k,this.Ea,this.ut+l),k=f.Is(r,k),k.type|=256,this.Vb(k)):(r=f.Bd(k,this.Ea,this.ut+l),r.type|=256),this.Vb(r),this.Vb(a,b)):(r=f.Bd(c,this.Ea,this.ut+l),this.Vb(r),1==this.bi||2==this.bi?(r=f.Is(r,c),this.Vb(r),r=f.Bd(c,this.Ea,
this.fx-l),k=f.Is(r,c),k.type|=256,this.Vb(k)):(r=f.Bd(c,this.Ea,this.fx-l),r.type|=256),this.Vb(r)))}};k.prototype.mB=function(){var r,k,d,B,e,g,h=this.du;this.Ye=0;var m=0.5*this.la,n=0,q=0;for(r=0;r<h;r++){B=this.dg[r];e=0==r?this.dg[h-1]:this.dg[r-1];g=r==h-1?this.dg[0]:this.dg[r+1];var s=e.x-B.x,t=e.y-B.y,u=g.x-B.x,w=g.y-B.y;k=Math.atan2(t,s);d=Math.atan2(w,u);this.ut=k;this.fx=d;0==r&&(n=k,q=d);s=s*w-u*t;t=d;d<k&&(d+=c);if(0<s*this.Ea)1==this.bi||2==this.bi?(k=f.Bd(B,this.Ea,k+l),this.Vb(k),
k=f.LB(B,k),this.Vb(k),k=f.Bd(B,this.Ea,d-l),B=f.LB(B,k),B.type|=256,this.Vb(B),this.Vb(k)):(s=0.5*(d-k),s=this.Ea/Math.abs(Math.sin(s)),k=f.Bd(B,s,0.5*(k+d)),this.Vb(k,r));else if(0!=(B.type&512)){s=1-m/Math.abs(this.Ea);e=1;g=0>this.Ea?-b:b;-1<s&&1>s&&(t=2*Math.acos(s),0.017453292519943295>t&&(t=0.017453292519943295),e=a.J.truncate(b/t+1.5),1<e&&(g/=e));t=k+l;k=f.Bd(B,this.Ea,t);0==r&&(k.type|=1024);this.Vb(k,r);s=this.Ea/Math.cos(g/2);t+=g/2;k=f.Bd(B,s,t);k.type|=1024;for(this.Vb(k);0<--e;)t+=
g,k=f.Bd(B,s,t),k.type|=1024,this.Vb(k);k=f.Bd(B,this.Ea,d-l);k.type|=1024;this.Vb(k)}else if(1==this.bi)k=f.Bd(B,this.Ea,k+l),this.Vb(k,r),k=f.Bd(B,this.Ea,d-l),this.Vb(k);else if(0==this.bi){s=1-m/Math.abs(this.Ea);e=1;g=d-l-(k+l);-1<s&&1>s&&(t=2*Math.acos(s),0.017453292519943295>t&&(t=0.017453292519943295),e=a.J.truncate(Math.abs(g)/t+1.5),1<e&&(g/=e));s=this.Ea/Math.cos(0.5*g);t=k+l+0.5*g;k=f.Bd(B,s,t);for(this.Vb(k,r);0<--e;)t+=g,k=f.Bd(B,s,t),this.Vb(k)}else 2==this.bi?(s=e.x-B.x,t=e.y-B.y,
u=g.x-B.x,w=g.y-B.y,e=Math.sqrt(s*s+t*t),g=Math.sqrt(u*u+w*w),e=(s*u+t*w)/e/g,0.99999999<e?(k=f.Bd(B,1.4142135623730951*this.Ea,d-0.25*b),this.Vb(k,r),k=f.Bd(B,1.4142135623730951*this.Ea,d+0.25*b),this.Vb(k)):(e=Math.abs(this.Ea/Math.sin(0.5*Math.acos(e))),g=Math.abs(this.Cx*this.Ea),e>g?(s=0.5*(d-k),s=this.Ea/Math.abs(Math.sin(s)),k=f.Bd(B,s,0.5*(k+d)),d=a.b.Pa(k.x,k.y),k=a.b.Pa(B.x,B.y),B=new a.b,B.qc(d,k),d=new a.b,d.CR(g/B.length(),B,k),k=Math.sqrt(e*e-this.Ea*this.Ea),k=(e-g)*Math.abs(this.Ea)/
k,0<this.Ea?B.st():B.Ip(),B.scale(k/B.length()),k=new a.b,k.add(d,B),e=new a.b,e.qc(d,B),k=f.vm(k),this.Vb(k,r),k=f.vm(e),this.Vb(k)):(s=0.5*(d-k),s=this.Ea/Math.abs(Math.sin(s)),k=f.Bd(B,s,0.5*(k+d)),this.Vb(k,r)))):(d=t,0<this.Ea?(d>k&&(d-=c),e=k-d<l):(d<k&&(d+=c),e=d-k<l),e?(s=1.4142135623730951*this.Ea,t=0>s?k+0.25*b:k+0.75*b,k=f.Bd(B,s,t),this.Vb(k,r),t=0>s?d-0.25*b:d-0.75*b,k=f.Bd(B,s,t),this.Vb(k)):(s=0.5*(d-k),s=this.Ea/Math.abs(Math.sin(s)),d<k&&(d+=c),k=f.Bd(B,s,(k+d)/2),this.Vb(k,r)))}this.ut=
n;this.fx=q;this.Vb(this.Jb[0],0);B=f.wL(this.Jb[this.Ye-1]);this.Jb[0]=B;return this.rR()};k.prototype.ws=function(b,f){if(!(2>f))for(var r=0;r<f;r++){var k=this.Jb[b+r];0!=r?this.Jx.Mm(a.b.Pa(k.x,k.y)):this.Jx.Mr(a.b.Pa(k.x,k.y))}};k.prototype.hJ=function(a,b,r){var k=a.Fa(b),l=a.Ec(b);this.Jb=[];this.Jx=r;if(a.wc(b)){for(b=a.Ga(k);a.Ga(l-1).vb(b);)l--;if(2<=l-k){this.du=l-k;this.dg=[];for(b=k;b<l;b++)this.dg.push(f.vm(a.Ga(b)));this.mB()&&this.ws(0,this.Ye-1)}}else{for(b=a.Ga(k);k<l&&a.Ga(k+1).vb(b);)k++;
for(b=a.Ga(l-1);k<l&&a.Ga(l-2).vb(b);)l--;if(2<=l-k){this.du=2*(l-k)-2;this.dg=[];r=f.vm(a.Ga(k));r.type|=1536;this.dg.push(r);for(b=k+1;b<l-1;b++)r=f.vm(a.Ga(b)),this.dg.push(r);r=f.vm(a.Ga(l-1));r.type|=512;this.dg.push(r);for(b=l-2;b>=k+1;b--)r=f.vm(a.Ga(b)),r.type|=1024,this.dg.push(r);if(this.mB())if(2<=this.Jb.length){a=-1;(l=0!=(this.Jb[this.Ye-1].type&1024))||(a=0);for(b=1;b<this.Ye;b++)(k=0!=(this.Jb[b].type&1024))?l||(l=b-1,1<l-a+1&&this.ws(a,l-a+1)):l&&(a=b-1),l=k;l||(l=this.Ye-1,1<l-a+
1&&this.ws(a,l-a+1))}else a=0,l=this.Ye-1,0<=a&&1<=l-a&&this.ws(a,l-a+1)}}this.dg=null;this.du=0;this.Jb=null;this.Ye=0};k.prototype.rR=function(){for(var a=!1,b=0;b<this.Ye;b++){var f=this.Jb[b];f.Rg=b+1;f.Ug=b-1;this.Jb[b]=f}f=this.Jb[0];f.Ug=this.Ye-2;this.Jb[0]=f;f=this.Jb[this.Ye-2];f.Rg=0;this.Jb[this.Ye-2]=f;for(b=f=0;b<this.Ye;b++)if(0!=(this.Jb[f].type&256)){var r=this.ZL(f);if(-1!=r)f=r;else{a=!0;break}}else f=this.Jb[f].Rg;if(a)return!1;this.uL(f);return!0};k.prototype.ZL=function(a){for(var b=
this.Ye-1,f=a,r,k,l=1;l<=b-2;l++){r=f=this.Jb[f].Rg;k=a;for(var c=1;c<=l;c++){k=this.Jb[k].Ug;if(0==(this.Jb[k].type&256)&&0==(this.Jb[r].type&256)){var d=this.nO(k,r);if(-1!=d)return d}r=this.Jb[r].Ug}}return-1};k.prototype.nO=function(b,f){var k,l,c,d;k=this.Jb[this.Jb[b].Ug];l=this.Jb[b];c=this.Jb[this.Jb[f].Ug];d=this.Jb[f];if(!this.GR(k,l,c,d))return-1;var B=new r;return this.MM(k,l,c,d,B)&&!B.cB&&a.J.bG((l.x-k.x)*(d.y-c.y)-(l.y-k.y)*(d.x-c.x))!=a.J.bG(this.Ea)?(k=this.Jb[b].Ug,B.Xl.type=l.type,
B.Xl.Rg=f,B.Xl.Ug=k,this.Jb[b]=B.Xl,B.Xl=this.Jb[f],B.Xl.Ug=b,this.Jb[f]=B.Xl,f):-1};k.prototype.GR=function(a,b,f,r){return Math.max(a.x,b.x)>=Math.min(f.x,r.x)&&Math.max(f.x,r.x)>=Math.min(a.x,b.x)&&Math.max(a.y,b.y)>=Math.min(f.y,r.y)&&Math.max(f.y,r.y)>=Math.min(a.y,b.y)};k.prototype.MM=function(a,b,r,k,l){l.cB=!1;var c,d,v;c=(b.y-a.y)*(k.x-r.x)-(b.x-a.x)*(k.y-r.y);d=(r.y-a.y)*(b.x-a.x)-(r.x-a.x)*(b.y-a.y);c=0==c?2:d/c;return 0<=c&&1>=c&&(v=c,c=(k.y-r.y)*(b.x-a.x)-(k.x-r.x)*(b.y-a.y),d=(a.y-r.y)*
(k.x-r.x)-(a.x-r.x)*(k.y-r.y),c=0==c?2:d/c,0<=c&&1>=c)?(l.Xl=f.xL(a.x+c*(b.x-a.x),a.y+c*(b.y-a.y)),l.Xl.mh=r.mh+v*(k.mh-r.mh),0!=v&&1!=v||0!=c&&1!=c||(l.cB=!0),l.vU=c,l.wU=v,(0==v||1==v)&&0<c&&1>c||(0==c||1==c)&&0<v&&1>v?!1:!0):!1};k.prototype.uL=function(a){for(;this.Jb[a].Ug<a;)a=this.Jb[a].Ug;var b=0,f=a;do f=this.Jb[f],this.Jb[b]=f,f=f.Rg,b++;while(f!=a);this.Jb[b]=this.Jb[0];this.Ye=b+1};k.prototype.qA=function(a){var b=this.an,f=b.Da();if(null!=f){f.Lk();for(var r=-1;f.lb();)r++,this.hJ(b,r,
a)}};k.prototype.gv=function(){var b=this.an.F();return b==a.j.Line?this.gJ():b==a.j.Envelope?this.fJ():a.U.Mc(b)?(b=new a.Ya,b.Cc(this.an,!0),this.an=b,this.gv()):b==a.j.Polyline?(b=new a.Ya,this.qA(b),b):b==a.j.Polygon?(b=new a.La,this.qA(b),b):null};return k}();a.XG=k})(y||(y={}));(function(a){var b=function(){function a(b){this.yj=b}a.prototype.A=function(a,b){this.yj.a.A(a,b)};a.prototype.ld=function(a){var b=this.yj.Aa.ea(a);this.yj.Aa.ld(a,-1);this.yj.a.vf(b,!1)};return a}(),c=function(){function a(b){this.yj=
b}a.prototype.A=function(a,b){this.yj.MP.A(a,b)};a.prototype.ld=function(a){this.yj.Aa.ld(a,-1)};return a}(),l=function(){function a(b){this.yj=b}a.prototype.A=function(a,b){b.K(this.yj.OP[a])};a.prototype.ld=function(a){this.yj.Aa.ld(a,-1)};return a}(),f=function(){function f(r){void 0===r?(this.Aa=new a.bj,this.Aa.ee(20),this.a=new a.gd,this.EP=this.a.jg(a.j.MultiPoint),this.br=this.a.Cf(this.EP,-1),this.oh=new b(this)):r instanceof Array?(this.Aa=new a.bj,this.Aa.ee(20),this.OP=r,this.oh=new l(this)):
(this.Aa=new a.bj,this.Aa.ee(20),this.MP=r,this.oh=new c(this))}f.prototype.Fb=function(b){var f=b.F();if(a.Vr.Th(f))this.NJ(b);else if(a.al.Mc(f))this.RJ(b);else if(f==a.j.Envelope)this.KJ(b);else if(f==a.j.Point)this.QJ(b);else throw a.g.O("invalid shape type");};f.prototype.rN=function(){var b=new a.Wa,f=this.Aa.hc(-1),r=new a.La(this.a.up);this.a.Jk(this.Aa.ea(f),b);r.ef(b);for(f=this.Aa.cb(f);-1!=f;f=this.Aa.cb(f))this.a.Jk(this.Aa.ea(f),b),r.lineTo(b);return r};f.vL=function(b){var l=new f(b),
c=b.G(),d=1,e=new a.b,g=new a.b,h=new a.b;for(b.A(0,e);;){b.A(d,g);if(!(g.Vw(e)&&d<c-1))break;d++}l.Aa.addElement(0,-1);l.Aa.rm(d);for(c=d+1;c<b.G();c++)b.A(c,h),d=l.bz(h),-1!=d&&l.Aa.Vi(d,c);h=new a.Wa;d=l.Aa.hc(-1);c=new a.La(b.description);b.Td(l.Aa.ea(d),h);c.ef(h);for(d=l.Aa.cb(d);-1!=d;d=l.Aa.cb(d))b.Td(l.Aa.ea(d),h),c.lineTo(h);return c};f.Pa=function(a,b,l){for(var c=new f(a),d=1,v=a[0];a[d].Vw(v)&&d<b-1;)d++;c.Aa.addElement(0,-1);c.Aa.rm(d);for(d+=1;d<b;d++)v=c.bz(a[d]),-1!=v&&c.Aa.Vi(v,
d);a=0;for(b=c.Aa.hc(-1);-1!=b;b=c.Aa.cb(b))l[a++]=c.Aa.ea(b);return a};f.sD=function(b,l){var c=b.Fa(l),d=b.Ec(l),e=!b.wc(l)&&b.Mo(l),g=b.oc(0),c=2*c,d=2*d;e&&(d-=2);if(6>d-c)return!0;var e=new a.b,h=new a.b,z=new a.b;g.fc(c,e);g.fc(c+2,h);g.fc(c+4,z);var m=f.Cd(h,z,e);if(m.Cq()||!f.bc(m.value()))return!1;for(var n=a.b.Pa(h.x,h.y),q=new a.b,c=c+6;c<d;c+=2){q.K(h);h.K(z);g.fc(c,z);m=f.Cd(h,z,e);if(m.Cq()||!f.bc(m.value()))return!1;m=f.Cd(n,z,e);if(m.Cq()||!f.bc(m.value()))return!1;m=f.Cd(h,z,q);if(m.Cq()||
!f.bc(m.value()))return!1}return!0};f.prototype.NJ=function(b){for(var f=new a.Wa,r=new a.b,l=0;l<b.G();l++){b.A(l,r);var c=this.fq(r);if(-1!=c){b.Td(l,f);var d=this.a.Vb(this.br,f);this.Aa.Vi(c,d)}}};f.prototype.KJ=function(b){for(var f=new a.Wa,r=new a.b,l=0;4>l;l++){b.uu(l,r);var c=this.fq(r);if(-1!=c){b.uf(l,f);var d=this.a.Vb(this.br,f);this.Aa.Vi(c,d)}}};f.prototype.RJ=function(b){var f=new a.Wa,r=b.Nb(),r=this.fq(r);if(-1!=r){b.Fn(f);var l=this.a.Vb(this.br,f);this.Aa.Vi(r,l)}r=b.pc();r=this.fq(r);
-1!=r&&(b.Cn(f),b=this.a.Vb(this.br,f),this.Aa.Vi(r,b))};f.prototype.QJ=function(a){var b=a.A(),b=this.fq(b);-1!=b&&(a=this.a.Vb(this.br,a),this.Aa.Vi(b,a))};f.prototype.fq=function(a){var b=-1;if(0==this.Aa.size(-1))return this.Aa.addElement(-4,-1);if(1==this.Aa.size(-1)){var f=this.a.Ga(this.Aa.ea(this.Aa.hc(-1)));a.Vw(f)||(b=this.Aa.rm(-5));return b}return this.bz(a)};f.prototype.bz=function(b){var l=-1,c=this.Aa.hc(-1),d=this.Aa.uc(-1),e=this.Aa.ea(c),g=this.Aa.ea(d),h=new a.b,z=new a.b;this.oh.A(e,
h);this.oh.A(g,z);e=a.b.zn(z,b,h);if(f.bc(e))l=this.Aa.rm(-1),h=this.$y(b,d,c),h!=c&&this.az(b,c,this.Aa.he(h));else if(f.ti(e)){for(var z=this.Aa.ct(-1),m=this.Aa.hc(-1),n=this.Aa.uc(-1),q,e=new a.b,g=new a.b;m!=this.Aa.he(n);)q=this.Aa.ea(z),this.oh.A(q,e),q=a.b.zn(e,b,h),f.ti(q)?(n=z,z=this.Aa.ik(z)):(m=z,z=this.Aa.Io(z));z=n;h=m;q=this.Aa.ea(z);m=this.Aa.ea(h);this.oh.A(q,e);this.oh.A(m,g);if(!(h!=c&&(e=a.b.zn(g,b,e),!f.bc(e))))l=this.Aa.us(h,z,-2,!1),this.az(b,z,d),this.$y(b,h,c)}else null==
this.jb&&(this.jb=new a.zb),this.jb.fd(z),this.jb.wd(h),h=this.jb.Hd(b,!0),0>h?(h=this.Aa.he(d),this.Aa.ld(d,-1),l=this.Aa.rm(-3),this.$y(b,h,c)):1<h&&(h=this.Aa.cb(c),this.Aa.ld(c,-1),l=this.Aa.us(-1,h,-3,!1),this.az(b,h,d));return l};f.prototype.az=function(b,l,c){if(l!=c){var d=this.Aa.ea(l),e=this.Aa.cb(l),g=new a.b,h=new a.b;for(this.oh.A(d,g);l!=c&&2<this.Aa.size(-1);){this.oh.A(this.Aa.ea(e),h);d=a.b.zn(h,b,g);if(f.bc(d))break;d=l;l=e;g.K(h);e=this.Aa.cb(l);this.oh.ld(d)}}};f.prototype.$y=
function(b,l,c){if(l==c)return c;var d=this.Aa.ea(l),e=this.Aa.he(l),g=new a.b,h=new a.b;for(this.oh.A(d,g);l!=c&&2<this.Aa.size(-1);){this.oh.A(this.Aa.ea(e),h);d=a.b.zn(g,b,h);if(f.bc(d))break;d=l;l=e;g.K(h);e=this.Aa.he(l);this.oh.ld(d)}return l};f.Cd=function(b,f,r){var l=new a.$k;l.set(f.x);l.sub(b.x);var c=new a.$k;c.set(r.y);c.sub(b.y);var d=new a.$k;d.set(f.y);d.sub(b.y);f=new a.$k;f.set(r.x);f.sub(b.x);l.yp(c);d.yp(f);l.sub(d);return l};f.bc=function(a){return 0>a};f.ti=function(a){return 0<
a};f.$n=function(a){return 0==a};return f}();a.Sr=f})(y||(y={}));(function(a){var b=function(){function b(a){this.Ee=this.a=null;this.WD=!0;this.Ee=a}b.HE=function(b,f,r){b=a.Ja.zs(b);return a.Rr.Uw(f.lk(),f.mk(),r.lk(),r.mk(),a.vi.Sy(b))};b.fL=function(b,f){var r=new a.Wa;a.Rr.ZP(b,f,r);return r};b.aa=function(a,f,r,k){r=new b(r);r.a=a;r.la=f;r.WD=k;return r.qJ()};b.prototype.kJ=function(b){return a.Rr.yM(this.a,b)};b.prototype.nJ=function(b){return a.Yu.aa(this.a,b,this.Ee)};b.prototype.qJ=function(){for(var b=
this.la,f=a.Ja.zs(b),b=a.Ja.TJ(b),r=1.00001*b,b=1.000001*b,k=!1,c=30<this.a.qd+10?1E3:(this.a.qd+10)*(this.a.qd+10),d=0,e=this.a.oO();;d++){if(d>c)throw a.g.sa("Internal Error: max number of iterations exceeded");var g=this.kJ(f),k=k||g;this.WD&&(g=0!=this.a.wo(f,!0,!1),k=k||g);g=!1;if(0==d||e||a.Yu.DE(!0,this.a,b,null,this.Ee))g=this.nJ(r),k=k||g;if(!g)break}return k};return b}();a.aj=b})(y||(y={}));(function(a){var b=function(){function b(a){this.Md=this.Ac=null;this.Zb=a;this.gx=!0}b.prototype.dt=
function(a,b){var r=this.a.dc(a);if(null==r){if(!this.a.Pc(a,b))return null;r=b}return r};b.prototype.KL=function(){var b=this.a.Ep(!1),f=!1,r=new a.zb,k=new a.zb,c=new a.i;c.Ka();var d=new a.i;d.Ka();for(var e=new a.Wa,g=new a.gA,h=b.next();-1!=h;h=b.next()){var z=null,m=!1;if(!a.U.Lm(this.a.Mb(b.mj))){z=this.dt(h,r);if(null==z)continue;z.s(c);c.R(this.la,this.la);if(z.mg(this.la))if(z.mg(0))m=!0,z=null;else continue}var n=this.a.Ep(b),q=n.next();for(-1!=q&&(q=n.next());-1!=q;q=n.next()){var s=null,
t=!1;if(!a.U.Lm(this.a.Mb(n.mj))){s=this.dt(q,k);if(null==s)continue;s.s(d);if(s.mg(this.la))if(s.mg(0))t=!0,s=null;else continue}var u=0,w=0;if(null!=z&&null!=s)c.rD(d)&&(g.An(z),g.An(s),g.Ha(this.la,!1),u=g.kk(0),w=g.kk(1),0<u+w&&(this.a.Rp(h,g,0,!0),this.a.Rp(q,g,1,!0)),g.clear());else if(null!=z){var x=new a.b;this.a.A(q,x);if(c.contains(x)){g.An(z);this.a.Jk(q,e);g.Sw(this.la,e,!1);u=g.kk(0);if(0<u)if(this.a.Rp(h,g,0,!0),t){t=-1;for(x=this.a.Y(q);-1!=x&&x!=q&&(s=this.dt(x,k),t=x,null!=s&&s.mg(0));x=
this.a.Y(x));for(x=q;-1!=x&&(this.a.bh(x,g.of),x!=t);x=this.a.Y(x));}else this.a.bh(q,g.of);g.clear()}}else if(null!=s){if(x=new a.b,this.a.A(h,x),d.R(this.la,this.la),d.contains(x)){g.An(s);this.a.Jk(h,e);g.Sw(this.la,e,!1);w=g.kk(0);if(0<w)if(this.a.Rp(q,g,0,!0),m){t=-1;for(x=this.a.Y(h);-1!=x&&x!=h&&(s=this.dt(x,k),t=x,null!=s&&s.mg(0));x=this.a.Y(x));for(x=h;-1!=x&&(this.a.bh(x,g.of),x!=t);x=this.a.Y(x));}else this.a.bh(h,g.of);g.clear()}}else continue;if(0!=u+w){if(0!=u){z=this.a.dc(h);if(null==
z){if(!this.a.Pc(h,r))continue;z=r;r.s(c)}else z.s(c);if(z.mg(this.la))break}f=!0}}}return f};b.prototype.LL=function(){return this.GQ()};b.prototype.GQ=function(){return(new a.aA).FS(this.a,this.la)};b.prototype.EE=function(){var b=!1,f,r;null==this.Ac&&(this.Ac=new a.bj);var k=new a.ha(0);k.yb(this.a.qd+1);for(var c=this.a.Ep(),d=c.next();-1!=d;d=c.next())k.add(d);this.a.Lu(k,k.size);k.add(-1);c=this.a.re();d=this.a.re();this.Md=new a.hA(this.a,this.la,!this.gx);this.Ac.In(this.Md);var e=new a.ha(0),
g=new a.ha(0),h=0;new a.b;var z=this.a.dd;this.a.xb.lc();for(var m=this.a.xb.Ca[0].f,n,q,s=k.get(h++);-1!=s;){q=z.P(s,0);n=m[2*q];q=m[2*q+1];var t=n,u=q;do{var w=z.P(s,2),x=z.P(s,1);-1!=w&&(f=z.P(w,0),r=m[2*f],f=m[2*f+1],0>(u<f?-1:u>f?1:t<r?-1:t>r?1:0)&&(g.add(s),g.add(w)));-1!=x&&(f=z.P(x,0),r=m[2*f],f=m[2*f+1],0>(u<f?-1:u>f?1:t<r?-1:t>r?1:0)&&(g.add(x),g.add(x)));r=this.a.Sa(s,c);-1!=r&&(e.add(r),this.a.mb(s,c,-1));r=this.a.Sa(s,d);-1!=r&&(e.add(r),this.a.mb(s,d,-1));s=k.get(h++);-1!==s&&(u=z.P(s,
0),t=m[2*u],u=m[2*u+1])}while(-1!=s&&t===n&&u===q);t=1==e.size&&2==g.size;r=u=-1;w=0;for(x=e.size;w<x;w++){f=e.get(w);var A=this.Ac.he(f);-1==A||e.Mw(A)||(u=A);f=this.Ac.cb(f);-1==f||e.Mw(f)||(r=f);if(-1!=u&&-1!=r)break}this.Md.XF(q,n);w=0;for(x=e.size;w<x;w++)f=e.get(w),this.Ac.ld(f,-1);e.clear(!1);if(!t&&-1!=u&&-1!=r&&this.RK(u,r)){b=!0;this.ei=this.Md.rl();break}w=0;for(x=g.size;w<x;w+=2){n=g.get(w);q=g.get(w+1);f=-1;t?(f=this.Ac.us(u,r,n,!0),t=!1):f=this.Ac.addElement(n,-1);if(this.Md.Zf){this.ei=
this.Md.rl();b=!0;break}-1==this.a.Sa(q,c)?this.a.mb(q,c,f):this.a.mb(q,d,f)}if(b)break;g.df(0)}this.a.cf(c);this.a.cf(d);return b};b.prototype.RK=function(a,b){this.Md.compare(this.Ac,this.Ac.ea(a),b);var r=this.Md.Zf;this.Md.jq();return r};b.Gh=function(b){for(var f=b.ad;-1!=f;f=b.we(f))if(a.U.Lc(b.Mb(f)))return!0;return!1};b.Yk=function(a,f,r,k){if(!b.Gh(a))return!1;f=new b(k);f.a=a;f.la=r;if(15>a.qd)r=f.KL();else return f.LL();return r};b.aa=function(a,f,r){return b.Yk(a,a.wC(),f,r)};b.DE=function(l,
f,r,k,c){if(!b.Gh(f))return!1;var d=new b(c);d.a=f;d.la=r;d.gx=l;if(d.EE())return null!=k&&k.Zp(d.ei),!0;var e=new a.Bg;e.Ny();f.Pe(e);d=new b(c);d.a=f;d.la=r;d.gx=l;l=d.EE();e.Ny();f.Pe(e);return l?(null!=k&&k.Zp(d.ei),!0):!1};return b}();a.Yu=b})(y||(y={}));(function(a){(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Coincident=2]="Coincident";a[a.Undefined=3]="Undefined";a[a.Uncut=4]="Uncut"})(a.ZG||(a.ZG={}));var b=function(){return function(a,b,f,l,c,d,v,e,g,h,z){this.V=a;this.bu=b;
this.Xq=f;this.ag=l;this.Il=h;this.xk=z}}();a.xT=b;var c=function(){function b(a,f){this.jE=a;this.Zh=f}b.prototype.mJ=function(b,f){var r=new a.b;this.Zh.A(b,r);var l=new a.b;this.Zh.A(f,l);r=r.compare(l);if(0!=r)return r;r=this.Zh.Sa(b,this.jE);l=this.Zh.Sa(f,this.jE);return r<l?-1:r==l?0:1};return b}(),l=function(){return function(a,b,f,l,c,d,v,e,g){this.ag=a;this.Xq=b;this.Kx=f;this.sE=l;this.Wh=c;this.xk=d;this.Il=v;this.tE=e;this.QP=g}}();a.wT=l;var f=function(){function f(){}f.YG=function(l,
c,d,e,g,h){if(c.u())l=new b(c,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(l);else{var z=new a.gd;z.Fb(c);z.Fb(d);a.aj.aa(z,e,h,!0);c=0;d=z.re();for(e=z.ad;-1!=e;e=z.we(e))for(h=z.Wb(e);-1!=h;h=z.cc(h))for(var m=z.Db(h),n=0,q=z.Ia(h);n<q;m=z.Y(m),n++)z.mb(m,d,c++);c=f.pM(d,z);f.BI(l,c,z,g)}};f.pM=function(b,l){for(var d=l.qd,e=new a.ha(0),g=l.ad;-1!=g;g=l.we(g))for(var h=l.Wb(g);-1!=h;h=l.cc(h))for(var m=l.Db(h),n=0,q=l.Ia(h);n<q;m=l.Y(m),n++)e.add(m);var s=new c(b,l);e.yd(0,d,function(a,b){return s.mJ(a,
b)});var t=[],u=[],w=l.re(),x=l.re(),g=l.ad,h=l.we(g),q=new a.b,A=new a.b,y=e.get(0),O=l.sd(y),C=l.Vf(O);l.A(y,q);for(var G=1,m=0;G<d-1;){for(var M=!1,n=G;n<d;n++)if(n!=m){var D=e.get(n),K=l.sd(D),N=l.Vf(K);l.A(D,A);if(q.vb(A))C==g&&N==h&&(M=f.RI(w,x,l,t,u,O,y,K,D));else break}if(M||m==G-1){M&&m==G-1&&G--;if(++m==d)break;y=e.get(m);O=l.sd(y);C=l.Vf(O);l.A(y,q)}M||(G=m+1)}d=[];for(g=l.ad;-1!=g;g=l.we(g))for(h=l.Wb(g);-1!=h;h=l.cc(h)){e=l.Db(h);n=0;for(q=l.Ia(h);n<q;e=l.Y(e),n++){m=l.Sa(e,x);if(0<=
m)for(;m<u.length&&u[m].ag==e;)d.push(u[m++]);m=l.Sa(e,w);if(0<=m)for(;m<t.length&&t[m].ag==e;)d.push(t[m++])}}l.cf(w);l.cf(x);return d};f.RI=function(a,b,l,c,d,v,e,g,h){var z=l.hk(v),m=l.hk(g),n=l.Db(v),q=l.Db(g),s=l.Va(e),t=l.Va(h),u=!1,w=!1,x=!1,A=!1;e!=n&&(h!=q&&(u=f.UI(a,l,c,v,s,g,t)),h!=m&&(w=f.XI(a,l,c,v,s,g,h)));e!=z&&(h!=q&&(x=f.$I(b,l,d,v,e,g,t,n)),h!=m&&(A=f.cJ(b,l,d,v,e,g,h,n)));u&&w&&x?(a=c.length-1,2==d[A?d.length-2:d.length-1].Wh&&(c[a-1]=c[a],c.length-=1)):u&&w&&A&&2==d[d.length-1].Wh&&
(d=c[c.length-1],c.length-=1,l.Sa(d.ag,a)==c.length&&l.mb(d.ag,a,-1));return u||w||x||A};f.UI=function(b,f,r,c,d,e,g){var h,z;z=new a.zb;var m=new a.zb,n=[0,0],q=[0,0];h=f.dc(d);null==h&&(f.Pc(d,z),h=z);z=f.dc(g);null==z&&(f.Pc(g,m),z=m);h=h.Ha(z,null,n,q,0);2>h&&(c=new l(d,c,n[0],NaN,h,g,e,q[0],NaN),r.push(c),c=f.Sa(d,b),0>c&&f.mb(d,b,r.length-1));return!0};f.XI=function(b,f,r,c,d,e,g){var h,z;z=new a.zb;var m=new a.zb,n=[0,0],q=[0,0];h=f.dc(d);null==h&&(f.Pc(d,z),h=z);z=f.dc(g);null==z&&(f.Pc(g,
m),z=m);h=h.Ha(z,null,n,q,0);return 2>h?(c=new l(d,c,n[0],NaN,h,g,e,q[0],NaN),r.push(c),c=f.Sa(d,b),0>c&&f.mb(d,b,r.length-1),!0):!1};f.$I=function(b,f,r,c,d,e,g,h){var z,m;m=new a.zb;var n=new a.zb,q=[0,0],s=[0,0];z=f.dc(d);null==z&&(f.Pc(d,m),z=m);m=f.dc(g);null==m&&(f.Pc(g,n),m=n);z=z.Ha(m,null,q,s,0);if(2==z)return c=new l(d,c,q[0],q[1],z,g,e,s[0],s[1]),r.push(c),c=f.Sa(d,b),0>c&&f.mb(d,b,r.length-1),!0;n=!1;d==h&&(c=new l(d,c,q[0],NaN,z,g,e,s[0],NaN),r.push(c),c=f.Sa(d,b),0>c&&f.mb(d,b,r.length-
1),n=!0);return n};f.cJ=function(b,f,r,c,d,e,g,h){var z,m;m=new a.zb;var n=new a.zb,q=[0,0],s=[0,0];z=f.dc(d);null==z&&(f.Pc(d,m),z=m);m=f.dc(g);null==m&&(f.Pc(g,n),m=n);z=z.Ha(m,null,q,s,0);if(2==z)return c=new l(d,c,q[0],q[1],z,g,e,s[0],s[1]),r.push(c),c=f.Sa(d,b),0>c&&f.mb(d,b,r.length-1),!0;n=!1;d==h&&(c=new l(d,c,q[0],NaN,z,g,e,s[0],NaN),r.push(c),c=f.Sa(d,b),0>c&&f.mb(d,b,r.length-1),n=!0);return n};f.BI=function(l,c,d,e){var g,h=[];h[0]=new a.b;h[1]=new a.b;h[2]=new a.b;h[3]=new a.b;var z=
new a.b,m=new a.b,n=new a.b,q=new a.b,s=null;null!=e&&(s=new a.Ag,s.kq());var t=null,u=0,w=null,x=new a.zb;new a.zb;for(var A=d.Wb(d.ad);-1!=A;A=d.cc(A)){var y,C=4,G=-1,M=-1,D=NaN,K=-1,N=-1,E=NaN,P=-1,R=-1,F=NaN,T=-1,I=-1,U=NaN;y=!0;for(var L=!1,V=!0,W=!0,ha=!0,ba=0,K=A,E=0,ia=d.Db(A),Ca=d.Ia(A),na=0;na<Ca;ia=d.Y(ia),na++){t=d.dc(ia);if(null==t){if(!d.Pc(ia,x))continue;t=x}-1==N&&(N=ia);for(var Y=0;u<c.length&&ia==c[u].ag;){G=c[u].Xq;M=c[u].ag;D=c[u].Kx;P=c[u].Il;R=c[u].xk;F=c[u].tE;if(2==c[u].Wh){if(L||
(K=G,N=M,E=D,T=P,I=R,U=F,C=2,null!=e?w=new a.Ya:ba=0,ha=!1,W=!0),D=c[u].sE,F=c[u].QP,null!=e?(t.Bi(Y,c[u].sE,s),w.Cc(s.get(),W)):ba++,Y=D,L=!0,W=y=!1,u+1==c.length||2!=c[u+1].Wh||c[u+1].ag==M&&c[u+1].Kx!=Y)null!=e?(g=new b(w,2,G,M,D,C,K,N,E,P,R,F,T,I,U),e.push(g)):null.add(ba),K=G,N=M,E=D,T=P,I=R,U=F,C=2,L=y=!1,W=ha=!0}else{var da=d.Y(M);if(u<c.length-1&&c[u+1].ag==da&&c[u+1].xk==R&&2==c[u+1].Wh)D!=Y&&(ha&&(null!=e?w=new a.Ya:ba=0),y=0<u&&c[u-1].Xq==G?1==C?0:0==C?1:3:3,null!=e?(t.Bi(Y,D,s),w.Cc(s.get(),
W),g=new b(w,y,G,M,D,C,K,N,E,P,R,F,T,I,U),e.push(g)):(ba++,null.add(ba)),Y=D,K=G,N=M,E=D,T=P,I=R,U=F,C=y,y=V=!1,W=ha=!0);else if(!f.JK(l,d,c,u,z,m)){f.KG(d,c,u,A,ia,n,q);var Z=!1,da=!1;g=!0;if(!z.vb(n)&&!m.vb(n)&&!z.vb(q)&&!m.vb(q)){h[0].K(z);h[1].K(m);h[2].K(n);h[3].K(q);h.sort(a.b.aq);var ta=h[0],va=h[1],qa=h[2],wa=h[3];ta.vb(z)?va.vb(m)?l?(da=Z=!0,g=!1):Z=!1:wa.vb(m)?l?g=da=Z=!0:Z=!1:(Z=!0,g=va.vb(n)):va.vb(z)?qa.vb(m)?l?(da=Z=!0,g=!1):Z=!1:ta.vb(m)?l?g=da=Z=!0:Z=!1:(Z=!0,g=qa.vb(n)):qa.vb(z)?
wa.vb(m)?l?(da=Z=!0,g=!1):Z=!1:va.vb(m)?l?g=da=Z=!0:Z=!1:(Z=!0,g=wa.vb(n)):ta.vb(m)?l?(da=Z=!0,g=!1):Z=!1:qa.vb(m)?l?g=da=Z=!0:Z=!1:(Z=!0,g=ta.vb(n))}if(Z){Z=ia==M;if(D!=Y||Z&&0==Y)ha&&(null!=e?w=new a.Ya:ba=0),null!=e?(t.Bi(Y,D,s),w.Cc(s.get(),W)):ba++;if(g)if(1!=C){if(D!=Y||Z&&0==Y)null!=e?(g=new b(w,1,G,M,D,C,K,N,E,P,R,F,T,I,U),e.push(g)):null.add(ba);if(da){if(u==c.length-2||c[u+2].Xq!=G)C=0}else C=1}else{if(D!=Y||Z&&0==Y)null!=e?(g=new b(w,3,G,M,D,C,K,N,E,P,R,F,T,I,U),e.push(g)):null.add(ba);
C=1}else if(0!=C){if(D!=Y||Z&&0==Y)null!=e?(g=new b(w,0,G,M,D,C,K,N,E,P,R,F,T,I,U),e.push(g)):null.add(ba);if(da){if(u==c.length-2||c[u+2].Xq!=G)C=1}else C=0}else{if(D!=Y||Z&&0==Y)null!=e?(g=new b(w,3,G,M,D,C,K,N,E,P,R,F,T,I,U),e.push(g)):null.add(ba);C=0}if(D!=Y||Z&&0==Y)Y=D,K=G,N=M,E=D,T=P,I=R,U=F,y=V=!1,W=ha=!0}}}u++}1!=Y&&(ha&&(null!=e?w=new a.Ya:ba=0),null!=e?(t.Bi(Y,1,s),w.Cc(s.get(),W)):ba++,W=ha=!1,V=!0)}V&&(D=1,M=d.hk(A),M=d.Va(M),R=P=-1,F=NaN,y?null!=e?(g=new b(w,4,G,M,D,C,K,N,E,P,R,F,T,
I,U),e.push(g)):null.add(ba):(y=1==C?0:0==C?1:3,null!=e?(g=new b(w,y,G,M,D,C,K,N,E,P,R,F,T,I,U),e.push(g)):null.add(ba)))}};f.JK=function(b,l,c,d,e,g){var h=c[d].tE;if(1==h)return f.FJ(b,l,c,d,e,g);if(0==h)return f.cK(b,l,c,d,e,g);throw a.g.xa();};f.FJ=function(b,f,r,l,c,d){var e=new a.zb,g=r[l].ag,h=r[l].Il,z=r[l].xk,m=-1,n=-1,q=-1,s=-1;if(!b&&0<l)var t=r[l-1],m=t.ag,n=t.Il,q=t.xk,s=t.Wh;var u=-1,w=-1,x=-1,A=-1;l<r.length-1&&(t=r[l+1],u=t.ag,w=t.Il,x=t.xk,A=t.Wh);var y=f.Y(g),t=f.Y(z);if(!b)return 0<
l&&m==g&&n==h&&q==t&&2==s||l<r.length-1&&u==y&&w==h&&x==t&&2==A?(b=f.dc(z),null==b&&(f.Pc(z,e),b=e),d.K(b.Pf(1)),c.pr(d),d.normalize(),c.normalize(),!1):l<r.length-1&&u==g&&w==h&&x==t?(b=f.dc(z),null==b&&(f.Pc(z,e),b=e),c.K(b.Pf(1)),b=f.dc(t),null==b&&(f.Pc(t,e),b=e),d.K(b.Pf(0)),c.zp(),d.normalize(),c.normalize(),!1):!0;if(l==r.length-1||u!=g||w!=h||x!=t||2==A)return b=f.dc(z),null==b&&(f.Pc(z,e),b=e),d.K(b.Pf(1)),c.pr(d),d.normalize(),c.normalize(),!1;b=f.dc(z);null==b&&(f.Pc(z,e),b=e);c.K(b.Pf(1));
b=f.dc(t);null==b&&(f.Pc(t,e),b=e);d.K(b.Pf(0));c.zp();d.normalize();c.normalize();return!1};f.cK=function(b,f,r,l,c,d){var e=new a.zb,g=r[l].ag,h=r[l].Il,z=r[l].xk,m=-1,n=-1,q=-1,s=-1;if(!b&&l<r.length-1)var t=r[l+1],m=t.ag,n=t.Il,q=t.xk,s=t.Wh;var u=-1,w=-1,x=-1,t=-1;0<l&&(t=r[l-1],u=t.ag,w=t.Il,x=t.xk,t=t.Wh);var A=f.Y(g),y=f.Va(z);return b?0==l||u!=g||w!=h||x!=y||2==t?(b=f.dc(z),null==b&&(f.Pc(z,e),b=e),d.K(b.Pf(0)),c.pr(d),d.normalize(),c.normalize(),!1):!0:0<l&&u==g&&w==h&&x==y&&2==t||l<r.length-
1&&m==A&&n==h&&q==y&&2==s?(b=f.dc(z),null==b&&(f.Pc(z,e),b=e),d.K(b.Pf(0)),c.pr(d),d.normalize(),c.normalize(),!1):!0};f.KG=function(b,f,r,l,c,d,e){var g=new a.zb,h=b.dc(c);null==h&&(b.Pc(c,g),h=g);r=f[r];f=r.ag;r=r.Kx;c=b.Y(f);if(1==r)d.K(h.Pf(1)),-1!=c&&c!=b.hk(l)?(h=b.dc(c),null==h&&(b.Pc(c,g),h=g),e.K(h.Pf(0)),h=b.dc(f),null==h&&b.Pc(f,g)):e.K(d),d.zp(),e.normalize(),d.normalize();else if(0==r)e.K(h.Pf(r)),d.pr(e),e.normalize(),d.normalize();else throw a.g.xa();};return f}();a.$G=f})(y||(y={}));
(function(a){(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area"})(a.QI||(a.QI={}));var b=function(){function b(a,f,r){this.Oc=f;this.Ej=r;this.vx=a}b.PC=function(a){return 0!==a.Oc?null:-1===a.vx?new b(-1,2,a.Ej*a.Ej):b.Rd(k[a.vx])};b.Rd=function(a){a=r[a];return void 0===a?null:a};b.DL=function(a,f,r){var l=null;if(void 0!==r&&null!==r)try{"EPSG"===r.values[0]&&(l=b.Rd(parseInt(r.values[1])))}catch(k){}null===l&&(l=new b(-1,a,f));return l};b.prototype.Rc=function(){return this.vx};
b.prototype.rC=function(b){if(b.Oc!=this.Oc)throw a.g.ya();return this.Ej/b.Ej};b.ih=function(a,b,f){return b.rC(f)*a};b.OB=function(a,b,f,r,l){f=f.rC(r);for(r=0;r<b;r++)l[r]=a[r]*f};return b}();a.Ub=b;for(var c=[109402,4046.8564224,109403,4046.87260987425,109463,100,109401,1E4,109461,225E8,109460,25E8,109451,1E-4,109444,404.68564224000005,109424,404.6849341289498,109428,404.68493792602754,109416,404.67838076760535,109420,404.68423895571647,109448,404.683871963536,109411,404.6872609874253,109450,
0.01,109408,3.34450944,109405,0.09290304,109430,0.09290354800069446,109423,0.0929028774400711,109427,0.09290287831176021,109441,0.09290349665192114,109407,0.09290137299531805,109440,0.09290286332673177,109431,0.09290274144751023,109432,0.09290207073852812,109433,0.09290279616016,109434,0.09290273520025,109419,0.09290271785025629,109447,0.0929026336004445,109406,0.09290341161327487,109453,6.4516E-4,109454,6.451625806477421E-4,109414,1E6,109445,0.04046856422400001,109425,0.04046849341289498,109429,
0.04046849379260275,109417,0.04046783807676053,109421,0.04046842389557164,109449,0.0404683871963536,109412,0.04046872609874253,109404,1,109410,1.000027193184865,109413,2589998.4703195216,109452,1E-6,109409,3429904,109458,3434290.937856,109457,3434528.1495040003,109464,1.244521604938272E-7,109455,25.292852640000003,109456,25.29295381171408,109459,2.89612324,109439,2589988.110336,109462,0.7168473118308245,109442,0.83612736,109422,0.83612589696064,109426,0.836125904805842,109415,0.8361123569578626,109435,
0.836124673027592,109436,0.836118636646753,109437,0.8361251654414399,109438,0.83612461680225,109418,0.8361244606523066,109446,0.8361237024040001,109443,0.8361307045194736],l=[9103,2.908882086657216E-4,9104,4.84813681109536E-6,9102,0.0174532925199433,9106,0.01570796326794897,9105,0.01570796326794897,9109,1E-6,9114,9.817477042468104E-4,1031,4.84813681109536E-9,9112,1.570796326794897E-4,9101,1,9113,1.570796326794897E-6],f=[109031,15E4,109461,109030,5E4,109460,1033,0.01,109451,9097,20.1168,109444,9052,
20.1167824,109424,9062,20.116782494375872,109428,9038,20.1166195164,109416,9042,20.116765121552632,109420,9301,20.116756,109448,9033,20.11684023368047,109411,109005,0.1,109450,9014,1.8288,109408,9002,0.3048,109405,9070,0.3048008333333334,109430,9051,0.3047997333333333,109423,9061,0.3047997347632708,109427,9095,0.3048007491,109441,9005,0.3047972654,109407,9094,0.3047997101815088,109440,9080,0.3047995102481469,109431,9081,0.30479841,109432,9082,0.3047996,109433,9083,0.3047995,109434,9041,0.304799471538676,
109419,9300,0.3047993333333334,109447,9003,0.3048006096012192,109406,109008,0.0254,109453,109009,0.0254000508001016,109454,9036,1E3,109414,9098,0.201168,109445,9053,0.201167824,109425,9063,0.2011678249437587,109429,9039,0.201166195164,109417,9043,0.2011676512155263,109421,9302,0.20116756,109449,9034,0.2011684023368047,109412,9001,1,109404,9031,1.0000135965,109410,9035,1609.3472186944375,109413,1025,0.001,109452,9030,1852,109409,109013,1853.184,109458,109012,1853.248,109457,109016,3.527777777777778E-4,
109464,109010,5.0292,109455,109011,5.029210058420118,109456,109014,1.7018,109459,9093,1609.344,109439,109015,0.8466683600033867,109462,9096,0.9144,109442,9050,0.9143992,109422,9060,0.9143992042898124,109426,9037,0.9143917962000001,109415,9084,0.9143985307444408,109435,9085,0.91439523,109436,9086,0.9143988,109437,9087,0.9143985,109438,9040,0.9143984146160287,109418,9099,0.914398,109446,109002,0.9144018288036576,109443,109001,0.9144,109442,109003,20.1168,109444,109004,0.201168,109445,109006,0.01,109451,
109007,0.001,109452],r=[],k=[],d=0;d<c.length;d+=2)r[c[d]]=new b(c[d],2,c[d+1]);c=null;for(d=0;d<l.length;d+=2)r[l[d]]=new b(l[d],1,l[d+1]);l=null;for(d=0;d<f.length;d+=3)r[f[d]]=new b(f[d],0,f[d+1]),k[f[d]]=f[d+2];f=null})(y||(y={}));(function(a){var b=function(){function a(){}a.prototype.set=function(a,b){void 0!==b?(this.Lf=a,this.Og=b):"number"===typeof a?(this.Lf=a,this.Og=0):(this.Lf=a.Lf,this.Og=a.Og)};a.prototype.value=function(){return this.Lf};a.prototype.sub=function(a){if("number"===typeof a){var b=
this.Lf-a;a=this.Og+2.220446049250313E-16*Math.abs(b)}else b=this.Lf-a.Lf,a=this.Og+a.Og+2.220446049250313E-16*Math.abs(b);this.Lf=b;this.Og=a};a.prototype.yp=function(a){var b=this.Lf*a.Lf;this.Og=this.Og*Math.abs(a.Lf)+a.Og*Math.abs(this.Lf)+this.Og*a.Og+2.220446049250313E-16*Math.abs(b);this.Lf=b};a.prototype.dP=function(){return Math.abs(this.Lf)<=this.Og};a.prototype.Cq=function(){return this.dP()&&0!=this.Og};return a}();a.$k=b})(y||(y={}));var L=new y.b,D=new y.b,G=new y.b,N=new y.b,P=new y.b;
(function(a){var b;(function(a){a[a.closedPath=1]="closedPath";a[a.exteriorPath=2]="exteriorPath";a[a.ringAreaValid=4]="ringAreaValid"})(b||(b={}));var c=function(){function b(a,r,l,c,d,v,e){void 0!==r?(this.bb=a,this.mj=r,this.ak=l,this.zh=c,this.va=v,this.lx=e,this.Ot=d):(this.bb=a.bb,this.mj=a.mj,this.ak=a.ak,this.zh=a.zh,this.va=a.va,this.lx=a.lx,this.Ot=a.Ot);this.JD=!0}b.prototype.next=function(){return this.JD?(this.JD=!1,this.zh):-1!=this.zh?(this.zh=this.bb.Y(this.zh),this.va++,-1!=this.zh&&
this.zh!=this.Ot?this.zh:this.bQ()):-1};b.prototype.bQ=function(){this.ak=this.bb.cc(this.ak);for(this.va=0;-1!=this.mj;){for(;-1!=this.ak;this.ak=this.bb.cc(this.ak))if(this.Ot=this.zh=this.bb.Db(this.ak),-1!=this.zh)return this.zh;this.mj=this.bb.we(this.mj);if(-1==this.mj)break;if(!this.lx||a.U.Lc(this.bb.Mb(this.mj)))this.ak=this.bb.Wb(this.mj)}return-1};b.TL=function(a,r,k,c,d,v,e){return new b(a,r,k,c,d,v,e)};return b}();a.BT=c;b=function(){function b(){this.$m=this.Al=this.Fj=this.Nc=this.Kj=
this.kn=this.fi=this.Sc=this.sh=this.wg=this.He=this.up=this.xp=this.xb=this.Hk=null;this.Wt=this.ad=-1;this.qd=0;this.jx=!1;this.up=this.xp=this.xb=null}b.prototype.Fi=function(a){return null!=this.He?this.He[a]:null};b.prototype.Fh=function(a,b){if(null==this.He){if(null==b)return;this.He=[];for(var l=0,c=this.xb.G();l<c;l++)this.He.push(null)}this.He[a]=b};b.prototype.Nn=function(a,b){this.Sc.N(a,1,b)};b.prototype.Mn=function(a,b){this.Sc.N(a,2,b)};b.prototype.Hy=function(a,b){this.Sc.N(a,6,b)};
b.prototype.Go=function(a){return this.Sc.P(a,6)};b.prototype.Gu=function(a,b){this.Sc.N(a,7,b)};b.prototype.at=function(a){return this.Sc.P(a,0)};b.prototype.MF=function(a,b){this.Nc.N(a,1,b)};b.prototype.QF=function(a,b){this.Nc.N(a,0,b)};b.prototype.xC=function(a){return this.Nc.P(a,7)};b.prototype.Kn=function(a,b){this.Nc.N(a,3,b)};b.prototype.Ln=function(a,b){this.Nc.N(a,4,b)};b.prototype.iQ=function(b){null==this.Nc&&(this.Nc=new a.Gc(8));var r=this.Nc.ce();this.Nc.N(r,2,b);this.Nc.N(r,5,0);
this.Nc.N(r,6,0);this.Nc.N(r,7,r);return r};b.prototype.aN=function(a){this.Nc.Kc(a)};b.prototype.kQ=function(b){null==this.Sc&&(this.Sc=new a.Gc(8),this.dd=new a.Gc(5),this.fi=new a.rd(0),this.kn=new a.rd(0));var r=this.Sc.ce();this.Sc.N(r,0,r);this.Sc.N(r,3,0);this.Sc.N(r,6,0);this.Gu(r,b);r>=this.fi.size&&(b=16>r?16:a.J.truncate(3*r/2),this.fi.resize(b),this.kn.resize(b));this.fi.set(r,0);this.kn.set(r,0);return r};b.prototype.iC=function(a){this.Sc.Kc(a)};b.prototype.cw=function(a){this.dd.Kc(a);
this.qd--};b.prototype.lQ=function(b){null==this.Sc&&(this.Sc=new a.Gc(8),this.dd=new a.Gc(5),this.fi=new a.rd(0),this.kn=new a.rd(0));var r=this.dd.ce(),l=0<=b?b:r;this.dd.N(r,0,l);if(0>b){if(l>=this.xb.G()){b=16>l?16:a.J.truncate(3*l/2);this.xb.resize(b);if(null!=this.He)for(var c=0;c<b;c++)this.He.push(null);null!=this.wg&&this.wg.resize(b);this.xp=this.xb.oc(0)}this.xb.jc(l,-1E38,-1E38);null!=this.He&&(this.He[l]=null);null!=this.wg&&this.wg.write(l,1)}this.dd.N(r,4,2*l);this.qd++;return r};b.prototype.vl=
function(a,b,l){var c=-1!=b?this.Va(b):this.hk(a),d=-1!=c?this.Y(c):-1,v=this.lQ(null==l?this.qd:-1),e=this.hb(v);null!=l&&this.xb.Hu(e,l);this.im(v,a);this.Tc(v,d);this.Uc(v,c);-1!=d&&this.Uc(d,v);-1!=c&&this.Tc(c,v);l=this.wc(a);c=this.Db(a);-1==b&&this.Wi(a,v);b==c&&this.Dh(a,v);l&&-1==d&&(this.Tc(v,v),this.Uc(v,v));this.hm(a,this.Ia(a)+1);a=this.Vf(a);this.Pk(a,this.G(a)+1);return v};b.prototype.Eo=function(){null==this.$m&&(this.$m=new a.Wa(this.xb.description));return this.$m};b.prototype.Np=
function(a,b){var l=this.Nc.P(a,2);this.Nc.N(a,2,l&-134217729||(1==b?134217728:0))};b.prototype.Dm=function(a){return 0!=(this.Nc.P(a,2)&134217728)?1:0};b.prototype.LJ=function(b){var r=this.jg(b.F(),b.description);b.F()==a.j.Polygon&&this.Np(r,b.Dm());this.WA(r,b);return r};b.prototype.MJ=function(a){var b=this.jg(a.F(),a.description);this.XA(b,a);return b};b.prototype.SQ=function(b,r){null==this.Sc&&(this.Sc=new a.Gc(8),this.dd=new a.Gc(5),this.fi=new a.rd(0),this.kn=new a.rd(0));this.Sc.ee(this.Sc.Yc+
b);this.dd.ee(this.dd.Yc+r);this.fi.yb(this.fi.size+b);this.kn.yb(this.kn.size+b)};b.prototype.WA=function(b,r){this.SQ(r.fa(),r.G());this.Hk.Qd(r,0,r.G());this.xp=this.xb.oc(0);for(var l=null!=this.He&&null!=r.Ge,c=0,d=r.fa();c<d;c++)if(!(2>r.Ia(c))){var e=this.Cf(b,-1);this.Hn(e,r.wc(c));for(var g=r.Fa(c),h=r.Ec(c);g<h;g++){var z=this.vl(e,-1,null);if(l)if(z=this.hb(z),0!=(r.NC(g)&1))this.Fh(z,null);else{var m=new a.Ag;r.dc(g,m,!0);this.Fh(z,m.get())}}}};b.prototype.XA=function(a,b){this.Hk.Qd(b,
0,b.G());this.xp=this.xb.oc(0);for(var l=this.Cf(a,-1),c=0,d=b.G();c<d;c++)this.vl(l,-1,null)};b.prototype.CS=function(b,r,l){var c=this.Y(b);if(-1==c)throw a.g.xa();for(var d=this.Eo(),e=this.sd(b),g=0,h=r.kk(l);g<h;g++){var z=this.hb(b),m=this.Y(b),n=r.Ho(l,g);0==g&&(n.Fn(d),this.bh(b,d));n.F()==a.j.Line?this.Fh(z,null):this.Fh(z,a.U.Zj(n));n.Cn(d);g<h-1?b=this.vl(e,m,d):this.bh(c,d)}};b.prototype.BS=function(b,r,l){var c=this.Y(b);if(-1==c)throw a.g.xa();for(var d=this.Eo(),e=this.sd(b),g=0,h=
r.kk(l);g<h;g++){var z=this.hb(b),m=this.Y(b),n=r.Ho(l,h-g-1);0==g&&(n.Cn(d),this.bh(b,d));n.F()==a.j.Line?this.Fh(z,null):this.Fh(z,a.U.Zj(n));n.Fn(d);g<h-1?b=this.vl(e,m,d):this.bh(c,d)}};b.prototype.wC=function(){var b=new a.i;b.Ka();for(var r=this.Ep(),l=new a.b,c=!0,d=r.next();-1!=d;d=r.next())this.A(d,l),c?b.Eb(l.x,l.y):b.Pj(l.x,l.y),c=!1;return b};b.prototype.Fb=function(b){var r=b.F();if(a.U.Lc(r))return this.LJ(b);if(r==a.j.MultiPoint)return this.MJ(b);throw a.g.xa();};b.prototype.XJ=function(b,
r){var l=r.F();if(a.U.Lc(l))this.WA(b,r);else if(l==a.j.MultiPoint)this.XA(b,r);else throw a.g.xa();};b.prototype.PJ=function(b,r){var l=this.jg(a.j.Polygon,b.description);if(2>b.Ia(r))return l;this.Hk.Qd(b,b.Fa(r),b.Ec(r));this.xp=this.xb.oc(0);var c=this.Cf(l,-1);this.Hn(c,b.wc(r)||!0);for(var d=null!=this.He&&null!=b.Ge,e=b.Fa(r),g=b.Ec(r);e<g;e++){var h=this.vl(c,-1,null);if(d)if(h=this.hb(h),0!=(b.NC(e)&1))this.Fh(h,null);else{var z=new a.Ag;b.dc(e,z,!0);this.Fh(h,z.get())}}return l};b.prototype.jf=
function(b){var r=this.Mb(b),l=a.sH.jg(r,this.Hk.description),c=this.G(b);if(0==c)return l;if(a.U.Lc(r)){for(var r=this.fa(b),d=a.Bc.Dg(r+1),e=a.Bc.so(r+1,0),g=l.description,h=0,z=g.Ba;h<z;h++){for(var m=g.Id(h),n=a.qa.Xa(m),q=a.Bc.Sv(m,c),s=this.xb.oc(m),t=0,u=0,w=0,x=this.Wb(b);-1!=x;x=this.cc(x)){var A=0;this.wc(x)&&(A|=1);this.UO(x)&&(A|=4);0!=A&&e.wy(u,A);var y=this.Ia(x);d.write(u++,w);w+=y;if(0==m)for(var y=s,O=q,C=new a.b,A=this.Db(x);t<w;A=this.Y(A),t++){var G=this.hb(A);y.fc(2*G,C);O.Sn(2*
t,C)}else for(A=this.Db(x);t<w;A=this.Y(A),t++){G=this.hb(A);for(O=0;O<n;O++)C=s.Bh(G*n+O),q.Uk(t*n+O,C)}}l.bm(m,q);d.write(r,c)}l.NF(e);l.OF(d);l.de(16777215)}else if(r==a.j.MultiPoint){g=l.description;l.resize(c);h=0;for(z=g.Ba;h<z;h++){m=g.Id(h);n=a.qa.Xa(m);q=l.oc(m);s=this.xb.oc(m);t=0;x=this.Wb(b);y=this.Ia(x);for(A=this.Db(x);t<y;A=this.Y(A),t++){G=this.hb(A);for(O=0;O<n;O++)C=s.Bh(G*n+O),q.Uk(t*n+O,C)}l.bm(m,q)}l.de(16777215)}return l};b.prototype.ry=function(a){for(var b=this.Wb(a);-1!=b;b=
this.Br(b));var b=this.$N(a),l=this.we(a);-1!=b?this.MF(b,l):this.ad=l;-1!=l?this.QF(l,b):this.Wt=b;this.aN(a)};b.prototype.jg=function(b,r){return void 0===r?this.QB(b,a.Pd.Tf()):this.QB(b,r)};b.prototype.QB=function(b,r){var l=this.iQ(b);null==this.xb?this.xb=this.Hk=new a.pe(r):this.Hk.Ik(r);this.up=this.Hk.description;this.jx=1<this.up.Ba;-1==this.ad?this.ad=l:(this.QF(l,this.Wt),this.MF(this.Wt,l));return this.Wt=l};b.prototype.we=function(a){return this.Nc.P(a,1)};b.prototype.$N=function(a){return this.Nc.P(a,
0)};b.prototype.Mb=function(a){return this.Nc.P(a,2)&2147483647};b.prototype.EF=function(b,r,l){r=this.Fj[r];b=this.xC(b);b>=r.size&&r.resize(Math.max(a.J.truncate(1.25*b),16),-1);r.write(b,l)};b.prototype.yC=function(a,b){var l=this.xC(a),c=this.Fj[b];return l<c.size?c.read(l):-1};b.prototype.RB=function(){null==this.Fj&&(this.Fj=[]);for(var b=0;b<this.Fj.length;b++)if(null==this.Fj[b])return this.Fj[b]=a.Bc.Dg(0),b;this.Fj.push(a.Bc.Dg(0));return this.Fj.length-1};b.prototype.sR=function(a){this.Fj[a]=
null};b.prototype.Wb=function(a){return this.Nc.P(a,3)};b.prototype.Xs=function(a){return this.Nc.P(a,4)};b.prototype.G=function(a){return this.Nc.P(a,5)};b.prototype.fa=function(a){return this.Nc.P(a,6)};b.prototype.wo=function(b,r,l){for(var c=0,d=this.ad;-1!=d;d=this.we(d)){var e=this.Mb(d);if(a.U.Lc(e)&&(!l||e==a.j.Polygon))for(var e=this.Mb(d)==a.j.Polygon,g=this.Wb(d);-1!=g;){for(var h=0,z=this.Db(g);h<a.J.truncate(this.Ia(g)/2);){var m=this.Y(z);if(-1==m)break;var n=this.hb(z),q=this.Fi(n),
s=0;null!=q?s=q.ac():(q=this.hb(m),s=this.xb.lv(n,q));s<=b?(0==s?0==c&&(c=-1):c=1,m!=this.hk(g)&&(this.Yy(m,z),this.vf(m,!0))):z=this.Y(z);h++}h=this.Db(g);for(z=this.wc(g)?h:this.hk(g);0<this.Ia(g);)if(m=this.Va(z),-1!=m)if(s=this.hb(m),q=this.Fi(s),null!=q?s=q.ac():(n=this.hb(z),s=this.xb.lv(n,s)),s<=b)0==s?0==c&&(c=-1):c=1,this.Yy(m,z),this.vf(m,!1),h==m&&(h=this.Db(g));else{if(z=this.Va(z),z==h)break}else{this.vf(z,!0);0==c&&(c=-1);break}z=this.Ia(g);r&&(e?3>z:2>z)?(g=this.Br(g),c=0<z?1:0==c?
-1:c):g=this.cc(g)}}return c};b.prototype.Yy=function(a,b){var l=this.hb(a),c=this.hb(b);null!=this.wg&&(l=this.wg.read(l),this.wg.write(c,l));if(null!=this.sh){c=0;for(l=this.sh.length;c<l;c++)if(null!=this.sh[c]){var d=this.Sa(a,c);-1!=d&&this.mb(b,c,d)}}};b.prototype.Lr=function(b,r,l){var c=0,d=this.Y(b);if(-1==d)throw a.g.xa();for(var e=this.hb(b),g=this.hb(d),h=this.Fi(e),z=null==h?this.xb.lv(e,g):h.ac(),m=0;m<l;m++){var n=r[m];if(0<n&&1>n){var q=n;null!=h&&(q=0<z?h.rA(n)/z:0);this.xb.uJ(e,
g,q,this.Eo());var s=this.vl(this.sd(b),d,this.Eo());c++;if(null!=h){var t=h.ym(0,n),q=this.hb(this.Va(s));this.Fh(q,t);this.Yi(s,t.pc());if(m==l-1||1==r[m+1])n=h.ym(n,1),this.Fh(q,n)}}}return c};b.prototype.bh=function(a,b){var l=this.hb(a);this.xb.Hu(l,b);l=this.Fi(l);null!=l&&l.setStart(b);var c=this.Va(a);-1!=c&&(c=this.hb(c),null!=this.Fi(c)&&l.setEnd(b))};b.prototype.Jk=function(a,b){var l=this.hb(a);this.xb.Td(l,b)};b.prototype.Yi=function(a,b){this.jc(a,b.x,b.y)};b.prototype.jc=function(a,
b,l){var c=this.hb(a);this.xb.jc(c,b,l);c=this.Fi(c);null!=c&&c.My(b,l);a=this.Va(a);-1!=a&&(a=this.hb(a),null!=this.Fi(a)&&c.Ok(b,l))};b.prototype.A=function(a,b){this.xb.A(this.dd.P(a,0),b)};b.prototype.vc=function(a,b){this.xb.Ca[0].fc(2*this.dd.P(a,0),b)};b.prototype.Ga=function(b){var r=new a.b;this.xb.A(this.dd.P(b,0),r);return r};b.prototype.SC=function(a,b){this.xp.fc(2*a,b)};b.prototype.md=function(a,b,l){return this.xb.md(a,this.hb(b),l)};b.prototype.setAttribute=function(a,b,l,c){this.xb.setAttribute(a,
this.hb(b),l,c)};b.prototype.hb=function(a){return this.dd.P(a,0)};b.prototype.mk=function(b){var r=new a.b;this.A(b,r);return r.y};b.prototype.Bq=function(a,b){var l=this.hb(a),c=this.hb(b),d=this.xb.Ca[0].f;return d[2*l]===d[2*c]&&d[2*l+1]===d[2*c+1]};b.prototype.ot=function(a,b){var l=this.hb(a),c=this.xb.Ca[0].f;return c[2*l]===b.x&&c[2*l+1]===b.y};b.prototype.oS=function(b,r){1>r&&(r=1);if(null==this.wg){if(1==r)return;this.wg=a.Bc.kl(this.xb.G(),1)}var l=this.hb(b);l>=this.wg.size&&this.wg.resize(l+
1,1);this.wg.write(l,r)};b.prototype.RC=function(a){a=this.hb(a);return null==this.wg||a>=this.wg.size?1:this.wg.read(a)};b.prototype.mb=function(a,b,l){b=this.sh[b];a=this.hb(a);b.size<this.xb.G()&&b.resize(this.xb.G(),-1);b.write(a,l)};b.prototype.Sa=function(a,b){var l=this.hb(a),c=this.sh[b];return l<c.size?c.read(l):-1};b.prototype.re=function(){null==this.sh&&(this.sh=[]);for(var b=0;b<this.sh.length;b++)if(null==this.sh[b])return this.sh[b]=a.Bc.Dg(0,-1),b;this.sh.push(a.Bc.Dg(0,-1));return this.sh.length-
1};b.prototype.cf=function(a){this.sh[a]=null};b.prototype.dc=function(a){return null!=this.He?(a=this.hb(a),this.He[a]):null};b.prototype.Pc=function(b,l){var c=this.dd.P(b,2);if(-1==c)return!1;if(this.jx){var d=new a.Wa;this.Jk(b,d);l.setStart(d);this.Jk(c,d);l.setEnd(d)}else this.xb.vc(this.dd.P(b,0),L),l.gl(0,L),this.xb.vc(this.dd.P(c,0),L),l.gl(1,L);return!0};b.prototype.fR=function(b,l,c){if(this.jx){var d=new a.Wa;this.Jk(b,d);c.setStart(d);this.Jk(l,d);c.setEnd(d)}else this.xb.vc(b,L),c.gl(0,
L),this.xb.vc(l,L),c.gl(1,L)};b.prototype.Cf=function(b,l){var c=-1;if(-1!=l){if(b!=this.Vf(l))throw a.g.xa();c=this.uq(l)}else c=this.Xs(b);var d=this.kQ(b);-1!=l&&this.Nn(l,d);this.Mn(d,l);this.Nn(d,c);-1!=c?this.Mn(c,d):this.Kn(b,d);-1==l&&this.Ln(b,d);this.gm(b,this.fa(b)+1);return d};b.prototype.aD=function(a,b,l,c){a=this.Cf(a,-1);for(var d=0,v=b,e=!1;v==l&&(e=!0),this.im(v,a),d++,v=this.Y(v),v!=b;);this.Hn(a,!0);this.hm(a,d);e&&(b=l);this.Dh(a,b);this.Wi(a,this.Va(b));this.Ir(a,!1);null!=c&&
(c[0]=e);return a};b.prototype.Br=function(a){var b=this.uq(a),l=this.cc(a),c=this.Vf(a);-1!=b?this.Mn(b,l):this.Kn(c,l);-1!=l?this.Nn(l,b):this.Ln(c,b);this.aL(a);this.gm(c,this.fa(c)-1);this.iC(a);return l};b.prototype.aL=function(a){var b=this.Db(a);if(-1!=b){for(var l=0,c=this.Ia(a);l<c;l++){var d=b,b=this.Y(b);this.cw(d)}b=this.Vf(a);this.Pk(b,this.G(b)-this.Ia(a))}this.hm(a,0)};b.prototype.cc=function(a){return this.Sc.P(a,2)};b.prototype.uq=function(a){return this.Sc.P(a,1)};b.prototype.Ia=
function(a){return this.Sc.P(a,3)};b.prototype.wc=function(a){return 0!=(this.Go(a)&1)};b.prototype.Hn=function(a,b){if(this.wc(a)!=b){if(0<this.Ia(a)){var l=this.Db(a),c=this.hk(a);b?(this.Tc(c,l),this.Uc(l,c)):(this.Tc(c,-1),this.Uc(l,-1));l=this.hb(c);this.Fh(l,null)}this.Hy(a,(this.Go(a)|1)-1|(b?1:0))}};b.prototype.Vf=function(a){return this.Sc.P(a,7)};b.prototype.UO=function(a){return 0!=(this.Go(a)&2)};b.prototype.Cy=function(a,b){this.Hy(a,(this.Go(a)|2)-2|(b?2:0))};b.prototype.Fw=function(b){if(this.aP(b))return this.fi.get(this.at(b));
var l=new a.zb,c=this.Db(b);if(-1==c)return 0;var d=new a.b;this.A(c,d);for(var e=0,g=0,h=this.Ia(b);g<h;g++,c=this.Y(c)){var z=this.dc(c);if(null==z){if(!this.Pc(c,l))continue;z=l}e+=z.jv(d.x,d.y)}this.Ir(b,!0);this.fi.set(this.at(b),e);return e};b.prototype.Pp=function(a,b,l){b=this.Kj[b];a=this.at(a);b.size<this.fi.size&&b.resize(this.fi.size,-1);b.write(a,l)};b.prototype.Ei=function(a,b){var l=this.at(a),c=this.Kj[b];return l<c.size?c.read(l):-1};b.prototype.Tv=function(){null==this.Kj&&(this.Kj=
[]);for(var b=0;b<this.Kj.length;b++)if(null==this.Kj[b])return this.Kj[b]=a.Bc.Dg(0),b;this.Kj.push(a.Bc.Dg(0));return this.Kj.length-1};b.prototype.sy=function(a){this.Kj[a]=null};b.prototype.aQ=function(b,l,c){if(-1==c)throw a.g.O();if(l!=c){var d=this.cc(c),e=this.uq(c),g=this.Vf(c);-1==e?this.Kn(g,d):this.Mn(e,d);-1==d?this.Ln(g,e):this.Nn(d,e);this.Pk(g,this.G(g)-this.Ia(c));this.gm(g,this.fa(g)-1);e=-1==l?this.Xs(b):this.uq(l);this.Nn(c,e);this.Mn(c,l);-1==l?this.Ln(b,c):this.Nn(l,c);-1==e?
this.Kn(b,c):this.Mn(e,c);this.Pk(b,this.G(b)+this.Ia(c));this.gm(b,this.fa(b)+1);this.Gu(c,b)}};b.prototype.zi=function(a,b){this.xb.Td(this.hb(b),this.Eo());this.vl(a,-1,this.Eo())};b.prototype.vf=function(b,l){var c=this.sd(b),d=this.Va(b),e=this.Y(b);-1!=d&&this.Tc(d,e);var g=this.Ia(c);b==this.Db(c)&&this.Dh(c,1<g?e:-1);-1!=e&&this.Uc(e,d);b==this.hk(c)&&this.Wi(c,1<g?d:-1);if(-1!=d&&-1!=e){var d=this.hb(d),h=this.hb(e);if(l){var z=this.Fi(d);null!=z&&(d=new a.b,this.xb.A(h,d),z.wd(d))}else h=
this.hb(b),z=this.Fi(h),this.Fh(d,z),null!=z&&(d=this.xb.Ga(d),z.fd(d))}this.hm(c,g-1);c=this.Vf(c);this.Pk(c,this.G(c)-1);this.cw(b);return e};b.prototype.Db=function(a){return this.Sc.P(a,4)};b.prototype.hk=function(a){return this.Sc.P(a,5)};b.prototype.Y=function(a){return this.dd.P(a,2)};b.prototype.Va=function(a){return this.dd.P(a,1)};b.prototype.sd=function(a){return this.dd.P(a,3)};b.prototype.Vb=function(a,b){return this.vl(a,-1,b)};b.prototype.Ep=function(b){if(void 0===b)return this.Ep(!1);
if(b instanceof c)return new c(b);for(var l=-1,k=-1,d=-1,e=-1,g=0,h=!1,l=this.ad;-1!=l;l=this.we(l))if(!b||a.U.Lc(this.Mb(l))){for(k=this.Wb(l);-1!=k;k=this.cc(k))if(e=d=this.Db(k),g=0,-1!=d){h=!0;break}if(h)break}return c.TL(this,l,k,d,e,g,b)};b.prototype.Pe=function(a){this.Hk.Pe(a);if(null!=this.He)for(var b=0,l=this.He.length;b<l;b++)null!=this.He[b]&&this.He[b].Pe(a)};b.prototype.Rp=function(a,b,l,c){c?this.CS(a,b,l):this.BS(a,b,l)};b.prototype.Uc=function(a,b){this.dd.N(a,1,b)};b.prototype.Tc=
function(a,b){this.dd.N(a,2,b)};b.prototype.im=function(a,b){this.dd.N(a,3,b)};b.prototype.hm=function(a,b){this.Sc.N(a,3,b)};b.prototype.Dh=function(a,b){this.Sc.N(a,4,b)};b.prototype.Wi=function(a,b){this.Sc.N(a,5,b)};b.prototype.gm=function(a,b){this.Nc.N(a,6,b)};b.prototype.Pk=function(a,b){this.Nc.N(a,5,b)};b.prototype.lF=function(a){var b=a;do{var l=this.Y(b);this.Tc(b,this.Va(b));this.Uc(b,l);b=l}while(b!=a)};b.prototype.ZF=function(a){this.qd=a};b.prototype.xu=function(a){var b=this.uq(a),
l=this.cc(a),c=this.Vf(a);-1!=b?this.Mn(b,l):this.Kn(c,l);-1!=l?this.Nn(l,b):this.Ln(c,b);this.Dh(a,-1);this.Wi(a,-1);this.iC(a)};b.prototype.Ui=function(b,l){var c=this.Va(b),d=this.Y(b);-1!=c&&this.Tc(c,d);-1!=d&&this.Uc(d,c);if(-1!=c&&-1!=d)if(c=this.hb(c),d=this.hb(d),l){var e=this.Fi(c);if(null!=e){var g=new a.b;this.xb.A(d,g);e.wd(g)}}else d=this.hb(b),e=this.Fi(d),this.Fh(c,e),null!=e&&(g=new a.b,this.xb.A(c,g),e.fd(g));this.cw(b)};b.prototype.aP=function(a){return 0!=(this.Go(a)&4)};b.prototype.Ir=
function(a,b){this.Hy(a,(this.Go(a)|4)-4|(b?4:0))};b.prototype.Lu=function(a,b){var l=this.dd.f;this.xb.lc();var c=this.xb.Ca[0].f;a.yd(0,b,function(a,b){var f=l[5*a],r=l[5*b],d=c[2*f],f=c[2*f+1],v=c[2*r],r=c[2*r+1];return f<r?-1:f>r?1:d<v?-1:d>v?1:0})};b.prototype.oO=function(){for(var b=this.ad;-1!=b;b=this.we(b))if(!a.U.Lc(this.Mb(b)))return!0;return!1};b.prototype.Uy=function(a,b){for(var l=this.Wb(a),c=this.Wb(b),d=this.Xs(a),v=this.Xs(b),e=this.Wb(a);-1!=e;e=this.cc(e))this.Gu(e,b);for(e=this.Wb(b);-1!=
e;e=this.cc(e))this.Gu(e,a);this.Kn(a,c);this.Kn(b,l);this.Ln(a,v);this.Ln(b,d);l=this.G(a);c=this.fa(a);d=this.fa(b);this.Pk(a,this.G(b));this.Pk(b,l);this.gm(a,d);this.gm(b,c);l=this.Nc.P(a,2);this.Nc.N(a,2,this.Nc.P(b,2));this.Nc.N(b,2,l)};return b}();a.gd=b})(y||(y={}));(function(a){var b=function(b){function l(f,l,c,d){b.call(this);this.S=new a.i;void 0===f?this.MB():"number"===typeof f?this.zL(f,l,c,d):f instanceof a.Wa?void 0!==l?this.Js(f,l,c):this.AL(f):f instanceof a.qa?void 0!==l?this.CL(f,
l):this.BL(f):f instanceof a.i?this.yL(f):this.MB()}I(l,b);l.prototype.Js=function(b,l,c){this.description=a.Pd.Tf();this.S.Ka();b.u()||this.rv(b,l,c)};l.prototype.yL=function(b){this.description=a.Pd.Tf();this.S.L(b);this.S.normalize()};l.prototype.BL=function(b){if(null==b)throw a.g.O();this.description=b;this.S.Ka()};l.prototype.CL=function(b,l){if(null==b)throw a.g.O();this.description=b;this.S.L(l);this.S.normalize()};l.prototype.MB=function(){this.description=a.Pd.Tf();this.S.Ka()};l.prototype.AL=
function(b){this.description=a.Pd.Tf();this.S.Ka();b.u()||this.rv(b)};l.prototype.zL=function(b,l,c,d){this.description=a.Pd.Tf();this.L(b,l,c,d)};l.prototype.L=function(a,b,l,c){this.rc();if("number"===typeof a)this.S.L(a,b,l,c);else{this.Ka();b=0;for(l=a.length;b<l;b++)this.Eb(a[b])}};l.prototype.Bu=function(b){this.rc();if(!b.cP())throw a.g.O();this.S.L(b)};l.prototype.Ka=function(){this.rc();this.S.Ka()};l.prototype.u=function(){return this.S.u()};l.prototype.ba=function(){return this.S.ba()};
l.prototype.ca=function(){return this.S.ca()};l.prototype.kw=function(){return this.S.kw()};l.prototype.Us=function(){return this.S.Us()};l.prototype.oq=function(){return this.S.Af()};l.prototype.Eb=function(b){if(b instanceof a.b)this.rc(),this.S.Eb(b);else if(b instanceof a.i)this.rc(),this.S.Eb(b);else if(b instanceof a.Wa){if(this.rc(),!b.tc()){var c=b.description;this.description!=c&&this.Ik(c);if(this.u())this.rv(b);else{this.S.Eb(b.A());for(var k=1,d=c.Ba;k<d;k++)for(var e=c.Gd(k),g=a.qa.Xa(e),
h=0;h<g;h++){var z=b.md(e,h),m=this.Ah(e,h);m.Eb(z);setInterval(e,h,m)}}}}else if(b instanceof l&&!b.u()){c=b.description;c!=this.description&&this.Ik(c);this.S.Eb(b.S);k=1;for(d=c.Ba;k<d;k++){e=c.Id(k);g=a.qa.Xa(e);for(h=0;h<g;h++)z=b.Ah(e,h),m=this.Ah(e,h),m.Eb(z),setInterval(e,h,m)}}};l.prototype.rv=function(b,l,c){if(void 0!==l){this.S.L(b.A(),l,c);l=b.description;c=1;for(var d=l.Ba;c<d;c++)for(var e=l.Gd(c),g=a.qa.Xa(e),h=0;h<g;h++){var z=b.md(e,h);this.setInterval(e,h,z,z)}}else{this.S.L(b.ga[0],
b.ga[1]);l=b.description;c=1;for(d=l.Ba;c<d;c++){e=l.Gd(c);g=a.qa.Xa(e);for(h=0;h<g;h++)z=b.md(e,h),this.setInterval(e,h,z,z)}}};l.prototype.setInterval=function(b,l,c,d){var e=null;"number"===typeof c?e=new a.Od(c,d):e=c;this.rc();if(0==b)if(0==l)this.S.w=e.ra,this.S.C=e.wa;else if(1==l)this.S.D=e.ra,this.S.H=e.wa;else throw a.g.Vc();else this.DA(0,b,l,e.ra),this.DA(1,b,l,e.wa)};l.prototype.R=function(a,b){this.rc();this.S.R(a,b)};l.prototype.Pe=function(b){if(b instanceof a.Bg)this.rc(),b.Zy(this.S);
else if(this.rc(),!this.S.u()){var l=new a.fH;this.Dn(l);l.TO()?l.Ka():b.Zy(l)}};l.prototype.copyTo=function(b){if(b.F()!=this.F())throw a.g.O();b.rc();b.description=this.description;b.S.L(this.S);b.ga=null;if(null!=this.ga){b.ms();for(var l=0;l<2*(this.description.me.length-2);l++)b.ga[l]=this.ga[l]}};l.prototype.Qa=function(){return new l(this.description)};l.prototype.Mh=function(){return this.S.qN()};l.prototype.ac=function(){return this.S.CC()};l.prototype.F=function(){return a.j.Envelope};l.prototype.gb=
function(){return 2};l.prototype.Dp=function(a){this.copyTo(a)};l.prototype.s=function(a){a.w=this.S.w;a.D=this.S.D;a.C=this.S.C;a.H=this.S.H};l.prototype.Dn=function(a){a.w=this.S.w;a.D=this.S.D;a.C=this.S.C;a.H=this.S.H;a.L(this.S.w,this.S.D,this.zd(0,1,0),this.S.C,this.S.H,this.zd(1,1,0))};l.prototype.Ah=function(b,l){var c=new a.Od;c.L(this.zd(0,b,l),this.zd(1,b,l));return c};l.prototype.uf=function(b,l){l.Qf(this.description);var c=this.description.Ba-1;switch(b){case 0:for(var d=0;d<c;d++)for(var e=
this.description.Id(d),g=a.qa.Xa(e),h=0;h<g;h++)l.setAttribute(e,h,this.zd(0,e,h));l.jc(this.S.w,this.S.D);break;case 1:for(d=0;d<c;d++){e=this.description.Id(d);g=a.qa.Xa(e);for(h=0;h<g;h++)l.setAttribute(e,h,this.zd(1,e,h))}l.jc(this.S.w,this.S.H);break;case 2:for(d=0;d<c;d++){e=this.description.Id(d);g=a.qa.Xa(e);for(h=0;h<g;h++)l.setAttribute(e,h,this.zd(0,e,h))}l.jc(this.S.C,this.S.H);break;case 3:for(d=0;d<c;d++){e=this.description.Id(d);g=a.qa.Xa(e);for(h=0;h<g;h++)l.setAttribute(e,h,this.zd(1,
e,h))}l.jc(this.S.C,this.S.D);break;default:throw a.g.Vc();}};l.prototype.uu=function(a,b){var l=this.S.uu(a);b.na(l.x,l.y)};l.prototype.yN=function(a,b){return b*(a.sp-2)};l.prototype.mC=function(b,l,c){if(this.S.u())throw a.g.sa("empty geometry");if(0==l)return 0!=b?0!=c?this.S.H:this.S.C:0!=c?this.S.D:this.S.w;if(c>=a.qa.Xa(l))throw a.g.O();var d=this.description.zf(l);this.ms();return 0<=d?this.ga[this.yN(this.description,b)+this.description.WN(d)-2+c]:a.qa.ue(l)};l.prototype.ms=function(){this.rc();
if(null==this.ga&&2<this.description.me.length){this.ga=[];for(var b=l.W(this.description,0),c=l.W(this.description,1),k=0,d=1,e=this.description.Ba;d<e;d++)for(var g=this.description.Id(d),h=a.qa.Xa(g),g=a.qa.ue(g),z=0;z<h;z++)this.ga[b+k]=g,this.ga[c+k]=g,k++}};l.prototype.om=function(b){if(null!=this.ga)if(2<b.me.length){for(var c=a.Pd.hu(b,this.description),k=[],d=l.W(this.description,0),e=l.W(this.description,1),g=l.W(b,0),h=l.W(b,1),z=0,m=1,n=b.Ba;m<n;m++){var q=b.Id(m),s=a.qa.Xa(q);if(-1==
c[m])for(var t=a.qa.ue(q),q=0;q<s;q++)k[g+z]=t,k[h+z]=t,z++;else{t=this.description.fj(c[m])-2;for(q=0;q<s;q++)k[g+z]=this.ga[d+t],k[h+z]=this.ga[e+t],z++,t++}}this.ga=k}else this.ga=null;this.description=b};l.prototype.zd=function(b,c,k){if(this.S.u())throw a.g.sa("This operation was performed on an Empty Geometry.");if(0==c)return 0!=b?0!=k?this.S.H:this.S.C:0!=k?this.S.D:this.S.w;if(k>=a.qa.Xa(c))throw a.g.Vc();var d=this.description.zf(c);return 0<=d?(this.ms(),this.ga[l.W(this.description,b)+
this.description.fj(d)-2+k]):a.qa.ue(c)};l.prototype.DA=function(b,c,k,d){this.rc();if(0==c)0!=b?0!=k?this.S.H=d:this.S.C=d:0!=k?this.S.D=d:this.S.w=d;else{if(k>=a.qa.Xa(c))throw a.g.Vc();if(!this.hasAttribute(c)){if(a.qa.nD(c,d))return;this.Oe(c)}c=this.description.zf(c);this.ms();this.ga[l.W(this.description,b)+this.description.fj(c)-2+k]=d}};l.W=function(a,b){return b*(a.me.length-2)};l.prototype.Ha=function(b){this.rc();var l=new a.i;b.s(l);return this.S.Ha(l)};l.prototype.kc=function(b){return b instanceof
a.i?this.S.kc(b):this.S.kc(b.S)};l.prototype.offset=function(a,b){this.rc();this.S.offset(a,b)};l.prototype.normalize=function(){this.rc();this.S.normalize()};l.prototype.Af=function(b){if(void 0!==b)if(b.Qf(this.description),this.u())b.Ka();else{for(var l=this.description.Ba,c=1;c<l;c++)for(var d=this.description.Id(c),e=a.qa.Xa(d),g=0;g<e;g++){var h=0.5*(this.mC(0,d,g)+this.mC(1,d,g));b.setAttribute(d,g,h)}b.jc(this.S.Af())}else{b=new a.Wa(this.description);if(this.u())return b;l=this.description.Ba;
for(c=1;c<l;c++){d=this.description.Gd(c);e=a.qa.Xa(d);for(g=0;g<e;g++)h=0.5*(this.zd(0,d,g)+this.zd(1,d,g)),b.setAttribute(d,g,h)}b.jc(this.S.kw(),this.S.Us());return b}};l.prototype.xw=function(){return new a.Wa(this.S.xw())};l.prototype.contains=function(b){return b instanceof a.Wa?b.u()?!1:this.S.contains(b.lk(),b.mk()):this.S.contains(b.S)};l.prototype.mc=function(a){if(a==this)return!0;if(!(a instanceof l)||this.description!=a.description)return!1;if(this.u())return a.u()?!0:!1;if(!this.S.mc(a.S))return!1;
for(var b=0,c=2*(this.description.me.length-2);b<c;b++)if(this.ga[b]!=a.ga[b])return!1;return!0};l.prototype.ic=function(){var b=this.description.ic(),b=a.J.kg(b,this.S.ic());if(!this.u()&&null!=this.ga)for(var l=0,c=2*(this.description.me.length-2);l<c;l++)b=a.J.kg(b,this.ga[l]);return b};l.prototype.Rf=function(){return a.Hh.il(this,null)};l.prototype.toString=function(){return this.u()?"Envelope: []":"Envelope: ["+this.S.w+", "+this.S.D+", "+this.S.C+", "+this.S.H+"]"};return l}(a.U);a.Wj=b})(y||
(y={}));(function(a){var b=function(){function b(a,f,c,k){void 0===a?this.Ka():(this.w=a,this.D=f,this.C=c,this.H=k)}b.Pa=function(a,f,c,k){var d=new b;d.w=a;d.D=f;d.C=c;d.H=k;return d};b.prototype.L=function(l,f,c,k){"number"===typeof l?void 0!==c?(this.w=l,this.D=f,this.C=c,this.H=k,this.normalize()):(this.w=l,this.D=f,this.C=l,this.H=f):l instanceof a.b?void 0!==f?(this.w=l.x-0.5*f,this.C=this.w+f,this.D=l.y-0.5*c,this.H=this.D+c,this.normalize()):(this.w=l.x,this.D=l.y,this.C=l.x,this.H=l.y):
l instanceof b?this.L(l.w,l.D,l.C,l.H):l instanceof a.Od&&(l.u()||f.u()?this.Ka():(this.w=l.ra,this.C=l.wa,this.D=f.ra,this.H=f.wa))};b.prototype.HN=function(a,f){var c=new b;c.L(this.w,this.D,this.C,this.H);c.R(a,f);return c};b.prototype.Dy=function(a,b){if(void 0!==b)if(0==b)this.Ka();else{this.w=a[0].x;this.D=a[0].y;this.C=this.w;this.H=this.D;for(var c=1;c<b;c++){var k=a[c];k.x<this.w?this.w=k.x:k.x>this.C&&(this.C=k.x);k.y<this.D?this.D=k.y:k.y>this.H&&(this.H=k.y)}}else if(null==a||0==a.length)this.Ka();
else{k=a[0];this.L(k.x,k.y);for(c=1;c<a.length;c++)k=a[c],this.Pj(k.x,k.y)}};b.prototype.Ka=function(){this.H=this.C=this.D=this.w=NaN};b.prototype.u=function(){return isNaN(this.w)};b.prototype.Eb=function(l,f){"number"===typeof l?this.u()?(this.w=l,this.D=f,this.C=l,this.H=f):(this.w>l?this.w=l:this.C<l&&(this.C=l),this.D>f?this.D=f:this.H<f&&(this.H=f)):l instanceof a.b?this.Eb(l.x,l.y):l instanceof a.fe?this.Eb(l.x,l.y):l instanceof b&&!l.u()&&(this.Eb(l.w,l.D),this.Eb(l.C,l.H))};b.prototype.Pj=
function(a,b){this.w>a?this.w=a:this.C<a&&(this.C=a);this.D>b?this.D=b:this.H<b&&(this.H=b)};b.prototype.R=function(a,b){this.u()||(this.w-=a,this.C+=a,this.D-=b,this.H+=b,(this.w>this.C||this.D>this.H)&&this.Ka())};b.prototype.scale=function(a){0>a&&this.Ka();this.u()||(this.w*=a,this.C*=a,this.D*=a,this.H*=a)};b.prototype.kc=function(a){return!this.u()&&!a.u()&&(this.w<=a.w?this.C>=a.w:a.C>=this.w)&&(this.D<=a.D?this.H>=a.D:a.H>=this.D)};b.prototype.rD=function(a){return(this.w<=a.w?this.C>=a.w:
a.C>=this.w)&&(this.D<=a.D?this.H>=a.D:a.H>=this.D)};b.prototype.Ha=function(a){if(this.u()||a.u())return!1;a.w>this.w&&(this.w=a.w);a.C<this.C&&(this.C=a.C);a.D>this.D&&(this.D=a.D);a.H<this.H&&(this.H=a.H);(a=this.w<=this.C&&this.D<=this.H)||this.Ka();return a};b.prototype.uu=function(b){switch(b){case 0:return a.b.Pa(this.w,this.D);case 1:return a.b.Pa(this.w,this.H);case 2:return a.b.Pa(this.C,this.H);case 3:return a.b.Pa(this.C,this.D);default:throw a.g.Vc();}};b.prototype.gy=function(b){if(null==
b||4>b.length)throw a.g.O();null!=b[0]?b[0].na(this.w,this.D):b[0]=a.b.Pa(this.w,this.D);null!=b[1]?b[1].na(this.w,this.H):b[1]=a.b.Pa(this.w,this.H);null!=b[2]?b[2].na(this.C,this.H):b[2]=a.b.Pa(this.C,this.H);null!=b[3]?b[3].na(this.C,this.D):b[3]=a.b.Pa(this.C,this.D)};b.prototype.qN=function(){return this.u()?0:this.ba()*this.ca()};b.prototype.CC=function(){return this.u()?0:2*(this.ba()+this.ca())};b.prototype.kw=function(){return(this.C+this.w)/2};b.prototype.Us=function(){return(this.H+this.D)/
2};b.prototype.ba=function(){return this.C-this.w};b.prototype.ca=function(){return this.H-this.D};b.prototype.move=function(a,b){this.u()||(this.w+=a,this.D+=b,this.C+=a,this.H+=b)};b.prototype.offset=function(a,b){this.w+=a;this.C+=a;this.D+=b;this.H+=b};b.prototype.normalize=function(){if(!this.u()){var a=Math.min(this.w,this.C),b=Math.max(this.w,this.C);this.w=a;this.C=b;a=Math.min(this.D,this.H);b=Math.max(this.D,this.H);this.D=a;this.H=b}};b.prototype.Yl=function(a){a.na(this.w,this.D)};b.prototype.YE=
function(a){a.na(this.C,this.D)};b.prototype.aF=function(a){a.na(this.w,this.H)};b.prototype.Zl=function(a){a.na(this.C,this.H)};b.prototype.cP=function(){return this.u()||this.w<=this.C&&this.D<=this.H};b.prototype.Af=function(){return a.b.Pa((this.C+this.w)/2,(this.H+this.D)/2)};b.prototype.xw=function(){return a.b.Pa(this.w,this.D)};b.prototype.contains=function(l,f){if(void 0!==f)return l>=this.w&&l<=this.C&&f>=this.D&&f<=this.H;if(l instanceof a.Wa)return this.contains(l.lk(),l.mk());if(l instanceof
a.b)return this.contains(l.x,l.y);if(l instanceof b)return l.w>=this.w&&l.C<=this.C&&l.D>=this.D&&l.H<=this.H;throw a.g.O();};b.prototype.jl=function(l,f){if(void 0!==f)return l>this.w&&l<this.C&&f>this.D&&f<this.H;if(l instanceof a.b)return this.jl(l.x,l.y);if(l instanceof b)return l.w>this.w&&l.C<this.C&&l.D>this.D&&l.H<this.H;throw a.g.O();};b.prototype.mc=function(a){return a==this?!0:a instanceof b?this.u()&&a.u()?!0:this.w!=a.w||this.D!=a.D||this.C!=a.C||this.H!=a.H?!1:!0:!1};b.prototype.ic=
function(){var b=this.w,b=a.J.truncate(b^b>>>32),f=a.J.kg(b),b=this.C,b=a.J.truncate(b^b>>>32),f=a.J.kg(b,f),b=this.D,b=a.J.truncate(b^b>>>32),f=a.J.kg(b,f),b=this.H,b=a.J.truncate(b^b>>>32);return a.J.kg(b,f)};b.prototype.uv=function(b){var f=new a.b;f.K(b);if(f.ov())return f;if(this.u())return f.FA(),f;f.x<this.w?f.x=this.w:f.x>this.C&&(f.x=this.C);f.y<this.D?f.y=this.D:f.y>this.H&&(f.y=this.H);if(!f.mc(b))return f;b=this.Af();(f.x<b.x?f.x-this.w:this.C-f.x)<(f.y<b.y?f.y-this.D:this.H-f.y)?f.x=
f.x<b.x?this.w:this.C:f.y=f.y<b.y?this.D:this.H;return f};b.prototype.ls=function(a){if(this.u())return NaN;if(a.x==this.w)return a.y-this.D;var b=this.H-this.D,c=this.C-this.w;return a.y==this.H?b+a.x-this.w:a.x==this.C?b+c+this.H-a.y:a.y==this.D?2*b+c+this.C-a.x:this.ls(this.uv(a))};b.prototype.vA=function(a){if(this.u())return-1;a=this.ls(a);var b=this.H-this.D,c=this.C-this.w;return a<b?0:(a-=b)<c?1:a-c<b?2:3};b.prototype.kv=function(){return this.u()?2.220446049250313E-14:2.220446049250313E-14*
(Math.abs(this.w)+Math.abs(this.C)+Math.abs(this.D)+Math.abs(this.H)+1)};b.prototype.Mv=function(a,f){var c=this.ej(a),k=this.ej(f);if(0!=(c&k))return 0;if(0==(c|k))return 4;var d=(0!=c?1:0)|(0!=k?2:0);do{var v=f.x-a.x,e=f.y-a.y;v>e?0!=(c&b.Dc)?(0!=(c&b.pb)?(a.y+=e*(this.w-a.x)/v,a.x=this.w):(a.y+=e*(this.C-a.x)/v,a.x=this.C),c=this.ej(a)):0!=(k&b.Dc)?(0!=(k&b.pb)?(f.y+=e*(this.w-f.x)/v,f.x=this.w):(f.y+=e*(this.C-f.x)/v,f.x=this.C),k=this.ej(f)):0!=c?(0!=(c&b.bc)?(a.x+=v*(this.D-a.y)/e,a.y=this.D):
(a.x+=v*(this.H-a.y)/e,a.y=this.H),c=this.ej(a)):(0!=(k&b.bc)?(f.x+=v*(this.D-f.y)/e,f.y=this.D):(f.x+=v*(this.H-f.y)/e,f.y=this.H),k=this.ej(f)):0!=(c&b.Cd)?(0!=(c&b.bc)?(a.x+=v*(this.D-a.y)/e,a.y=this.D):(a.x+=v*(this.H-a.y)/e,a.y=this.H),c=this.ej(a)):0!=(k&b.Cd)?(0!=(k&b.bc)?(f.x+=v*(this.D-f.y)/e,f.y=this.D):(f.x+=v*(this.H-f.y)/e,f.y=this.H),k=this.ej(f)):0!=c?(0!=(c&b.pb)?(a.y+=e*(this.w-a.x)/v,a.x=this.w):(a.y+=e*(this.C-a.x)/v,a.x=this.C),c=this.ej(a)):(0!=(k&b.pb)?(f.y+=e*(this.w-f.x)/v,
f.x=this.w):(f.y+=e*(this.C-f.x)/v,f.x=this.C),k=this.ej(f));if(0!=(c&k))return 0}while(0!=(c|k));return d};b.prototype.ej=function(a){return(a.x<this.w?1:0)|(a.x>this.C?1:0)<<1|(a.y<this.D?1:0)<<2|(a.y>this.H?1:0)<<3};b.prototype.mg=function(a){return!this.u()&&(this.ba()<=a||this.ca()<=a)};b.prototype.Gb=function(b){return b instanceof a.b?Math.sqrt(this.gG(b)):Math.sqrt(this.Nu(b))};b.prototype.Nu=function(a){var b=0,c=0,k;k=this.w-a.C;k>b&&(b=k);k=this.D-a.H;k>c&&(c=k);k=a.w-this.C;k>b&&(b=k);
k=a.D-this.H;k>c&&(c=k);return b*b+c*c};b.prototype.gG=function(a){var b=0,c=0,k;k=this.w-a.x;k>b&&(b=k);k=this.D-a.y;k>c&&(c=k);k=a.x-this.C;k>b&&(b=k);k=a.y-this.H;k>c&&(c=k);return b*b+c*c};b.prototype.vu=function(a){this.u()?a.Ka():a.L(this.w,this.C)};b.pb=1;b.bc=4;b.Dc=3;b.Cd=12;return b}();a.i=b})(y||(y={}));(function(a){var b;(function(a){a[a.initialize=0]="initialize";a[a.initializeRed=1]="initializeRed";a[a.initializeBlue=2]="initializeBlue";a[a.initializeRedBlue=3]="initializeRedBlue";a[a.sweep=
4]="sweep";a[a.sweepBruteForce=5]="sweepBruteForce";a[a.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce";a[a.sweepRedBlue=7]="sweepRedBlue";a[a.sweepRed=8]="sweepRed";a[a.sweepBlue=9]="sweepBlue";a[a.iterate=10]="iterate";a[a.iterateRed=11]="iterateRed";a[a.iterateBlue=12]="iterateBlue";a[a.iterateBruteForce=13]="iterateBruteForce";a[a.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce";a[a.resetRed=15]="resetRed";a[a.resetBlue=16]="resetBlue"})(b||(b={}));var c=function(){function a(b,c){this.th=
b;this.KD=c}a.prototype.Xp=function(a,b,c){this.th.AS(c,a,b,this.KD)};a.prototype.Ko=function(a){return this.th.nq(a,this.KD)};return a}();b=function(){function b(){this.Ut=this.dn=this.We=this.bd=null;this.cp=new a.i;this.Al=this.Mi=this.Ni=this.pd=this.rf=this.vd=this.Mt=this.Xm=this.$c=this.wb=null;this.Ib=-1;this.la=0;this.Sj()}b.prototype.Tp=function(){this.Sj();this.zt=!0;null==this.wb?(this.Xm=new a.ha(0),this.wb=[]):(this.Xm.df(0),this.wb.length=0)};b.prototype.Xc=function(b,c){if(!this.zt)throw a.g.ya();
var l=new a.i;l.L(c);this.Xm.add(b);this.wb.push(l)};b.prototype.vo=function(){if(!this.zt)throw a.g.ya();this.zt=!1;null!=this.wb&&0<this.wb.length&&(this.Ib=0,this.Fc=!1)};b.prototype.jG=function(){this.Sj();this.yt=!0;null==this.wb?(this.Xm=new a.ha(0),this.wb=[]):(this.Xm.df(0),this.wb.length=0)};b.prototype.OA=function(b,c){if(!this.yt)throw a.g.ya();var l=new a.i;l.L(c);this.Xm.add(b);this.wb.push(l)};b.prototype.$B=function(){if(!this.yt)throw a.g.ya();this.yt=!1;null!=this.wb&&0<this.wb.length&&
null!=this.$c&&0<this.$c.length&&(-1==this.Ib?this.Ib=3:2==this.Ib?this.Ib=3:3!=this.Ib&&(this.Ib=1),this.Fc=!1)};b.prototype.iG=function(){this.Sj();this.xt=!0;null==this.$c?(this.Mt=new a.ha(0),this.$c=[]):(this.Mt.df(0),this.$c.length=0)};b.prototype.LA=function(b,c){if(!this.xt)throw a.g.ya();var l=new a.i;l.L(c);this.Mt.add(b);this.$c.push(l)};b.prototype.ZB=function(){if(!this.xt)throw a.g.ya();this.xt=!1;null!=this.wb&&0<this.wb.length&&null!=this.$c&&0<this.$c.length&&(-1==this.Ib?this.Ib=
3:1==this.Ib?this.Ib=3:3!=this.Ib&&(this.Ib=2),this.Fc=!1)};b.prototype.next=function(){if(this.Fc)return!1;for(var b=!0;b;)switch(this.Ib){case 0:b=this.Pw();break;case 1:b=this.xO();break;case 2:b=this.uO();break;case 3:b=this.wO();break;case 4:b=this.KS();break;case 5:b=this.GS();break;case 6:b=this.HS();break;case 7:b=this.IS();break;case 8:b=this.Pu();break;case 9:b=this.Vy();break;case 10:b=this.Zw();break;case 11:b=this.hP();break;case 12:b=this.eP();break;case 13:b=this.fP();break;case 14:b=
this.gP();break;case 15:b=this.hF();break;case 16:b=this.gF();break;default:throw a.g.xa();}return this.Fc?!1:!0};b.prototype.YF=function(a){this.la=a};b.prototype.Ew=function(a){return this.wb[a]};b.prototype.iw=function(a){return this.$c[a]};b.prototype.jk=function(a){return this.Xm.read(a)};b.prototype.fk=function(a){return this.Mt.read(a)};b.Bv=function(a){return 1==(a&1)};b.Yk=function(a){return 0==(a&1)};b.prototype.Sj=function(){this.zt=this.xt=this.yt=!1;this.pf=this.qf=this.tg=this.be=-1;
this.Fc=!0};b.prototype.Pw=function(){this.nf=this.Ff=-1;if(10>this.wb.length)return this.be=this.wb.length,this.Ib=5,!0;null==this.bd&&(this.bd=new a.$p(!0),this.dn=this.bd.Se(),this.vd=new a.ha(0));this.bd.Tp();for(var b=0;b<this.wb.length;b++){var c=this.wb[b];this.bd.eq(c.w,c.C)}this.bd.vo();this.vd.yb(2*this.wb.length);this.vd.resize(0);for(b=0;b<2*this.wb.length;b++)this.vd.add(b);this.Kr(this.vd,2*this.wb.length,!0);this.be=2*this.wb.length;this.Ib=4;return!0};b.prototype.xO=function(){this.nf=
this.Ff=-1;if(10>this.wb.length||10>this.$c.length)return this.be=this.wb.length,this.Ib=6,!0;null==this.bd&&(this.bd=new a.$p(!0),this.dn=this.bd.Se(),this.vd=new a.ha(0));this.bd.Tp();for(var b=0;b<this.wb.length;b++){var c=this.wb[b];this.bd.eq(c.w,c.C)}this.bd.vo();this.vd.yb(2*this.wb.length);this.vd.resize(0);for(b=0;b<2*this.wb.length;b++)this.vd.add(b);this.Kr(this.vd,this.vd.size,!0);this.be=this.vd.size;-1!=this.qf&&(this.pd.Fg(this.qf),this.Ni.resize(0),this.qf=-1);this.Ib=7;return this.gF()};
b.prototype.uO=function(){this.nf=this.Ff=-1;if(10>this.wb.length||10>this.$c.length)return this.be=this.wb.length,this.Ib=6,!0;null==this.We&&(this.We=new a.$p(!0),this.Ut=this.We.Se(),this.rf=new a.ha(0));this.We.Tp();for(var b=0;b<this.$c.length;b++){var c=this.$c[b];this.We.eq(c.w,c.C)}this.We.vo();this.rf.yb(2*this.$c.length);this.rf.resize(0);for(b=0;b<2*this.$c.length;b++)this.rf.add(b);this.Kr(this.rf,this.rf.size,!1);this.tg=this.rf.size;-1!=this.pf&&(this.pd.Fg(this.pf),this.Mi.resize(0),
this.pf=-1);this.Ib=7;return this.hF()};b.prototype.wO=function(){this.nf=this.Ff=-1;if(10>this.wb.length||10>this.$c.length)return this.be=this.wb.length,this.Ib=6,!0;null==this.bd&&(this.bd=new a.$p(!0),this.dn=this.bd.Se(),this.vd=new a.ha(0));null==this.We&&(this.We=new a.$p(!0),this.Ut=this.We.Se(),this.rf=new a.ha(0));this.bd.Tp();for(var b=0;b<this.wb.length;b++){var c=this.wb[b];this.bd.eq(c.w,c.C)}this.bd.vo();this.We.Tp();for(b=0;b<this.$c.length;b++)c=this.$c[b],this.We.eq(c.w,c.C);this.We.vo();
this.vd.yb(2*this.wb.length);this.rf.yb(2*this.$c.length);this.vd.resize(0);this.rf.resize(0);for(b=0;b<2*this.wb.length;b++)this.vd.add(b);for(b=0;b<2*this.$c.length;b++)this.rf.add(b);this.Kr(this.vd,this.vd.size,!0);this.Kr(this.rf,this.rf.size,!1);this.be=this.vd.size;this.tg=this.rf.size;-1!=this.qf&&(this.pd.Fg(this.qf),this.Ni.resize(0),this.qf=-1);-1!=this.pf&&(this.pd.Fg(this.pf),this.Mi.resize(0),this.pf=-1);this.Ib=7;return!0};b.prototype.KS=function(){var a=this.vd.get(--this.be),c=a>>
1;if(b.Yk(a))return this.bd.remove(c),0==this.be?(this.nf=this.Ff=-1,this.Fc=!0,!1):!0;this.dn.ty(this.wb[c].w,this.wb[c].C,this.la);this.Ff=c;this.Ib=10;return!0};b.prototype.GS=function(){if(-1==--this.be)return this.nf=this.Ff=-1,this.Fc=!0,!1;this.tg=this.Ff=this.be;this.Ib=13;return!0};b.prototype.HS=function(){if(-1==--this.be)return this.nf=this.Ff=-1,this.Fc=!0,!1;this.Ff=this.be;this.tg=this.$c.length;this.Ib=14;return!0};b.prototype.IS=function(){var a=this.vd.get(this.be-1),c=this.rf.get(this.tg-
1),k=this.nq(a,!0),d=this.nq(c,!1);return k>d?this.Pu():k<d?this.Vy():b.Bv(a)?this.Pu():b.Bv(c)?this.Vy():this.Pu()};b.prototype.Pu=function(){var f=this.vd.get(--this.be),c=f>>1;if(b.Yk(f))return-1!=this.qf&&-1!=this.Ni.get(c)?(this.pd.Kc(this.qf,this.Ni.get(c)),this.Ni.set(c,-1)):this.bd.remove(c),0==this.be?(this.nf=this.Ff=-1,this.Fc=!0,!1):!0;if(-1!=this.pf&&0<this.pd.tq(this.pf))for(f=this.pd.hc(this.pf);-1!=f;){var k=this.pd.getData(f);this.We.lg(k);this.Mi.set(k,-1);k=this.pd.cb(f);this.pd.Kc(this.pf,
f);f=k}0<this.We.size()?(this.Ut.ty(this.wb[c].w,this.wb[c].C,this.la),this.Ff=c,this.Ib=12):(-1==this.qf&&(null==this.pd&&(this.pd=new a.Zn),this.Ni=new a.ha(0),this.Ni.resize(this.wb.length,-1),this.Ni.dh(-1,0,this.wb.length),this.qf=this.pd.jh(1)),this.Ni.set(c,this.pd.addElement(this.qf,c)),this.Ib=7);return!0};b.prototype.Vy=function(){var f=this.rf.get(--this.tg),c=f>>1;if(b.Yk(f))return-1!=this.pf&&-1!=this.Mi.get(c)?(this.pd.Kc(this.pf,this.Mi.get(c)),this.Mi.set(c,-1)):this.We.remove(c),
0==this.tg?(this.nf=this.Ff=-1,this.Fc=!0,!1):!0;if(-1!=this.qf&&0<this.pd.tq(this.qf))for(f=this.pd.hc(this.qf);-1!=f;){var k=this.pd.getData(f);this.bd.lg(k);this.Ni.set(k,-1);k=this.pd.cb(f);this.pd.Kc(this.qf,f);f=k}0<this.bd.size()?(this.dn.ty(this.$c[c].w,this.$c[c].C,this.la),this.nf=c,this.Ib=11):(-1==this.pf&&(null==this.pd&&(this.pd=new a.Zn),this.Mi=new a.ha(0),this.Mi.resize(this.$c.length,-1),this.Mi.dh(-1,0,this.$c.length),this.pf=this.pd.jh(0)),this.Mi.set(c,this.pd.addElement(this.pf,
c)),this.Ib=7);return!0};b.prototype.Zw=function(){this.nf=this.dn.next();if(-1!=this.nf)return!1;var a=this.vd.get(this.be)>>1;this.bd.lg(a);this.Ib=4;return!0};b.prototype.hP=function(){this.Ff=this.dn.next();if(-1!=this.Ff)return!1;this.nf=this.Ff=-1;var a=this.rf.get(this.tg)>>1;this.We.lg(a);this.Ib=7;return!0};b.prototype.eP=function(){this.nf=this.Ut.next();if(-1!=this.nf)return!1;var a=this.vd.get(this.be)>>1;this.bd.lg(a);this.Ib=7;return!0};b.prototype.fP=function(){if(-1==--this.tg)return this.Ib=
5,!0;this.cp.L(this.wb[this.be]);var a=this.wb[this.tg];this.cp.R(this.la,this.la);return this.cp.kc(a)?(this.nf=this.tg,!1):!0};b.prototype.gP=function(){if(-1==--this.tg)return this.Ib=6,!0;this.cp.L(this.wb[this.be]);var a=this.$c[this.tg];this.cp.R(this.la,this.la);return this.cp.kc(a)?(this.nf=this.tg,!1):!0};b.prototype.hF=function(){if(null==this.bd)return this.Fc=!0,!1;this.be=this.vd.size;0<this.bd.size()&&this.bd.reset();-1!=this.qf&&(this.pd.Fg(this.qf),this.Ni.resize(0),this.qf=-1);this.Fc=
!1;return!0};b.prototype.gF=function(){if(null==this.We)return this.Fc=!0,!1;this.tg=this.rf.size;0<this.We.size()&&this.We.reset();-1!=this.pf&&(this.pd.Fg(this.pf),this.Mi.resize(0),this.pf=-1);this.Fc=!1;return!0};b.prototype.Kr=function(b,l,k){null==this.Al&&(this.Al=new a.Qr);k=new c(this,k);this.Al.sort(b,0,l,k)};b.prototype.AS=function(a,c,k,d){var v=this;a.yd(c,k,function(a,f){var c=v.nq(a,d),r=v.nq(f,d);return c<r||c==r&&b.Yk(a)&&b.Bv(f)?-1:1})};b.prototype.nq=function(a,c){var k=0.5*this.la;
if(c){var d=this.wb[a>>1];return b.Yk(a)?d.D-k:d.H+k}d=this.$c[a>>1];return b.Yk(a)?d.D-k:d.H+k};return b}();a.rz=b})(y||(y={}));(function(a){var b=function(){function b(){}b.Pa=function(a,f,c,k,d,v){var e=new b;e.w=a;e.D=f;e.Ke=c;e.C=k;e.H=d;e.ig=v;return e};b.prototype.Ka=function(){this.Ke=this.w=NaN};b.prototype.u=function(){return isNaN(this.w)};b.prototype.TO=function(){return isNaN(this.Ke)};b.prototype.L=function(a,b,c,k,d,v){void 0!==k?"number"===typeof a?(this.w=a,this.D=b,this.Ke=c,this.C=
k,this.H=d,this.ig=v):(this.w=a.x-0.5*b,this.C=this.w+b,this.D=a.y-0.5*c,this.H=this.D+c,this.Ke=a.z-0.5*k,this.ig=this.Ke+k):(this.w=a,this.D=b,this.Ke=c,this.C=a,this.H=b,this.ig=c)};b.prototype.move=function(a){this.w+=a.x;this.D+=a.y;this.Ke+=a.z;this.C+=a.x;this.H+=a.y;this.ig+=a.z};b.prototype.copyTo=function(a){a.w=this.w;a.D=this.D;a.C=this.C;a.H=this.H};b.prototype.Pj=function(a,b,c){this.w>a?this.w=a:this.C<a&&(this.C=a);this.D>b?this.D=b:this.H<b&&(this.H=b);0==isNaN(this.Ke)?this.Ke>c?
this.Ke=c:this.ig<c&&(this.ig=c):this.ig=this.Ke=c};b.prototype.Eb=function(c,f,r,k,d,e){if("number"===typeof c)k?(this.Eb(c,f,r),this.Eb(k,d,e)):this.u()?(this.w=c,this.D=f,this.Ke=r,this.C=c,this.H=f,this.ig=r):this.Pj(c,f,r);else if(c instanceof a.fe)this.Eb(c.x,c.y,c.z);else if(c instanceof b)c.u()||(this.Eb(c.w,c.D,c.Ke),this.Eb(c.C,c.H,c.ig));else throw a.g.O();};b.prototype.Pa=function(a,b,c){a.u()||b.u()?this.Ka():(this.w=a.ra,this.C=a.wa,this.D=b.ra,this.H=b.wa,this.Ke=c.ra,this.ig=c.wa)};
b.prototype.gy=function(b){if(null==b||8>b.length)throw a.g.O();b[0]=new a.fe(this.w,this.D,this.Ke);b[1]=new a.fe(this.w,this.H,this.Ke);b[2]=new a.fe(this.C,this.H,this.Ke);b[3]=new a.fe(this.C,this.D,this.Ke);b[4]=new a.fe(this.w,this.D,this.ig);b[5]=new a.fe(this.w,this.H,this.ig);b[6]=new a.fe(this.C,this.H,this.ig);b[7]=new a.fe(this.C,this.D,this.ig)};b.prototype.Dy=function(a){if(null==a||0==a.length)this.Ka();else{var b=a[0];this.L(b.x,b.y,b.z);for(b=1;b<a.length;b++){var c=a[b];this.Pj(c.x,
c.y,c.z)}}};return b}();a.fH=b})(y||(y={}));(function(a){(function(a){a.xa=function(){var a=Error();a.message="Internal Error";return a};a.qe=function(){var a=Error();a.message="Not Implemented";return a};a.cj=function(){var a=Error();a.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular";return a};a.ya=function(){var a=Error();a.message="Invalid Call";return a};a.O=function(a){var b=Error();b.message="Illegal Argument Exception";void 0!==a&&(b.message+=
": "+a);return b};a.AI=function(){var a=Error();a.message="Runtime Exception.";return a};a.sa=function(a){var b=Error();b.message="Geometry Exception: "+a;return b};a.PG=function(){var a=Error();a.message="Assert Failed Exception";return a};a.Vc=function(){var a=Error();a.message="IndexOutOfBoundsException";return a};a.$T=function(a){a.message="UserCancelException";return a}})(a.g||(a.g={}))})(y||(y={}));(function(a){var b=function(){function b(){}b.NH=function(a,b){var c=Math.abs(a%b);return isNaN(c)||
c==a||c<=Math.abs(b)/2?c:0>a?-1*(c-b):0<a?1*(c-b):0*(c-b)};b.I=function(a){return 0>a?-a:a};b.ob=function(a,f){return 0<=f?b.I(a):-b.I(a)};b.T=function(a,f){return a==f||b.I(a-f)<=b.bF*(1+(b.I(a)+b.I(f))/2)};b.Wc=function(a){return 0==a||b.I(a)<=b.bF};b.as=function(a){a=b.NH(a,b.ev);return b.I(a)<=b.$g?a:0>a?a+b.ev:a-b.ev};b.Yz=function(a,f){a.o=b.as(a.o);f.o=b.as(f.o);b.I(f.o)>b.Ur&&(a.o=b.as(a.o+b.$g),f.o=b.ob(b.$g,f.o)-f.o)};b.gg=function(a,f){var c=Math.sqrt(1-f),c=(1-c)/(1+c),k=c*c;return a/
(1+c)*(1+k*(0.25+k*(0.015625+1/256*k)))*b.Ur};b.oN=function(c,f,r,k,d){var e=0,g=0,h=0,m=0,n=0,q=0,s=0,t=0,u=0,w=0,x=0,A=w=x=0,y=0,O=0,C=0,G=u=0,M=0,D=0,K=M=0,N=0,P=0,e=new a.da,g=new a.da;if(null!=d)if(e.o=c,g.o=f,b.Yz(e,g),c=e.o,f=g.o,e.o=r,g.o=k,b.Yz(e,g),r=e.o,k=g.o,g=b.as(r-c),b.T(f,k)&&(b.Wc(g)||b.T(b.I(f),b.Ur)))null!=d&&(d.o=0);else{if(b.T(f,-k)){if(b.T(b.I(f),b.Ur)){null!=d&&(d.o=2*b.gg(6378137,0.0066943799901413165));return}if(b.T(b.I(g),b.$g)){null!=d&&(d.o=2*b.gg(6378137,0.0066943799901413165));
return}}if(b.Wc(0.0066943799901413165))A=Math.cos(f),y=Math.cos(k),null!=d&&(M=Math.sin((k-f)/2),e=Math.sin(g/2),M=2*Math.asin(Math.sqrt(M*M+A*y*e*e)),d.o=6378137*M);else{D=1-Math.sqrt(0.9933056200098587);e=1-D;h=Math.atan(e*Math.tan(f));m=Math.sin(h);h=Math.cos(h);n=Math.atan(e*Math.tan(k));q=Math.sin(n);n=Math.cos(n);t=s=g;N=0;P=1;K=g;for(f=!0;1==f;)N+=1,1==P&&(u=Math.sin(K),w=Math.cos(K),M=n*u,x=h*q-m*n*w,x=Math.sqrt(M*M+x*x),w=m*q+h*n*w,M=Math.atan2(x,w),A=1E-15>b.I(x)?h*n*u/b.ob(1E-15,x):h*n*
u/x,y=1-A*A,O=1E-15>b.I(y)?w-2*(m*q/b.ob(1E-15,y)):w-2*(m*q/y),C=O*O,u=((-3*y+4)*D+4)*y*D/16),G=(1-u)*D*(M+u*x*(O+w*u*(2*C-1))),1==P?(K=g+G*A,1E-14>b.I(K-t)?f=!1:b.I(K)>b.$g?(P=2,K=b.$g,0>g&&(K=-K),A=0,y=1,s=t=2,M=b.$g-b.I(Math.atan(m/h)+Math.atan(q/n)),x=Math.sin(M),w=Math.cos(M),u=((-3*y+4)*D+4)*y*D/16,1E-14>b.I(A-s)?f=!1:(O=1E-15>b.I(y)?w-2*(m*q/b.ob(1E-15,y)):w-2*(m*q/y),C=O*O)):(0>(K-t)*(t-s)&&5<N&&(K=(2*K+3*t+s)/6),s=t,t=K)):(A=(K-g)/G,0>(A-t)*(t-s)&&5<N&&(A=(2*A+3*t+s)/6),s=t,t=A,y=1-A*A,u=
A*x/(h*n),w=-Math.sqrt(b.I(1-u*u)),K=Math.atan2(u,w),M=n*u,x=h*q-m*n*w,x=Math.sqrt(M*M+x*x),w=m*q+h*n*w,M=Math.atan2(x,w),u=((-3*y+4)*D+4)*y*D/16,1E-14>b.I(A-s)?f=!1:(O=1E-15>b.I(y)?w-2*(m*q/b.ob(1E-15,y)):w-2*(m*q/y),C=O*O));null!=d&&(g=Math.sqrt(1+(1/(e*e)-1)*y),g=(g-1)/(g+1),m=g*(1-0.375*g*g),m=m*x*(O+m/4*(w*(-1+2*C)-m/6*O*(-3+4*x*x)*(-3+4*C))),e=6378137*((1+g*g/4)/(1-g)*e)*(M-m),d.o=e)}}};b.$g=3.141592653589793;b.Ur=1.5707963267948966;b.ev=6.283185307179586;b.bF=3.552713678800501E-15;return b}();
a.nH=b})(y||(y={}));(function(a){var b=function(){function b(a,f){this.Na=a;this.hE=f;this.kE=-1;this.rk=!1}b.prototype.next=function(){if(++this.kE==this.hE.G())return null;var b=this.hE.Ga(this.kE);b.scale(this.Na.Sb);var f=new a.La;this.Na.Hv(b,this.rk,f);return f};b.prototype.za=function(){return 0};return b}(),c=function(){function b(f,c,l){this.Na=f;this.Yt=c;this.Pm=!1;this.Vm=l;this.Lt=[0];this.Aj=[0];this.Qi=[0];this.Rq=[0];this.rk=!1;this.Yo=new a.La;this.Cj=[]}b.prototype.next=function(){if(this.Pm){this.Pm=
!1;this.cd.ja();var b=a.U.Zj(this.Yo);return a.Of.Rj(b,this.Na.hp,!0,!0,this.Na.Zb)}null==this.cd&&(this.cd=this.Yt.Da(),this.cd.lb(),null!=this.Vm&&this.Vm.ko());if(!this.cd.Ma()){if(!this.cd.lb())return null;null!=this.Vm&&this.Vm.ko()}b=null;this.Aj[0]=0;this.Ex=this.Lt[0]=0;this.uh=NaN;this.Pm=!1;for(var f=this.Cj.length=0,c=new a.b,d=new a.b,e=[0];this.cd.Ma()&&8>this.Ex;){var g=this.cd.ja();c.K(g.Nb());d.K(g.pc());c.scale(this.Na.Sb);d.scale(this.Na.Sb);a.ui.Gs(c,d)?c.x=d.x:a.ui.Es(c,d)&&(d.x=
c.x);this.Cj.length=0;a.ui.kC(this.Na.Hb,this.Na.Yb,this.Na.le,c,d,this.Na.Mx,this.Na.gr,e,this.Qi,this.Rq,this.Cj,this.Lt);null!=this.Vm&&(g=this.Cj.slice(0),this.Vm.dD(this.Vm.fa()-1,g,g.length-1));a.ui.Fs(c,d)?(this.Yo.Ka(),this.Na.Hv(c,this.rk,this.Yo),this.Pm=!0):(this.Yo.Ka(),this.Pm=this.Kv(e[0],this.Yo));if(this.Pm){this.cd.oi();if(this.cd.Nw()){this.cd.oi();this.cd.ja();break}this.cd.xR();break}null==b&&(b=new a.La,b.ko());this.TA(b);f++}this.Lt[0]=0;if(0<f){for(e=this.cd.Kb();0<f;)this.cd.oi(),
c.K(this.Yt.Ga(this.cd.Kb())),d.K(this.Yt.Ga(this.cd.Cm())),c.scale(this.Na.Sb),d.scale(this.Na.Sb),this.rk&&(a.ui.Gs(c,d)?c.x=d.x:a.ui.Es(c,d)&&(d.x=c.x)),this.Cj.length=0,a.ui.kC(this.Na.Hb,this.Na.Yb,this.Na.le,d,c,this.Na.Mx,this.Na.gr,null,this.Qi,this.Rq,this.Cj,this.Lt),this.TA(b),f--;c.K(this.Yt.Ga(this.cd.Kb()));c.scale(this.Na.Sb);l.iq(this.Na.Hb,this.Na.Yb,this.Na.Sb,this.Na.ib,c,this.uh+1.570796326794897,this.uh+4.71238898038469,this.Na.Tm,this.rk,this.Aj,b,NaN,NaN);this.cd.Tb(e);this.cd.ja();
f=a.Ja.Cg(null,b,!0);return a.Of.Rj(b,f,!0,!0,this.Na.Zb)}this.Pm=!1;this.cd.ja();b=a.U.Zj(this.Yo);return a.Of.Rj(b,this.Na.hp,!0,!0,this.Na.Zb)};b.prototype.TA=function(b){var f=this.Cj[0],c=NaN,d=this.Qi[0]-1.570796326794897,e=this.Rq[0]+1.570796326794897,g=!1;if(!isNaN(this.uh)){this.uh>=this.Qi[0]?(c=this.uh+1.570796326794897,d=c+3.141592653589793-(this.uh-this.Qi[0])):(c=this.uh+1.570796326794897,d=c+3.141592653589793-(6.283185307179586-(this.Qi[0]-this.uh)));var g=this.uh>=this.Qi[0]&&3.141592653589793>=
this.uh-this.Qi[0]?!1:this.uh<this.Qi[0]&&3.141592653589793<=this.Qi[0]-this.uh?!1:!0,h=!1;if(Math.abs(d-c)<=0.5*this.Na.Tm)if(g){var m=b.Ga(b.G()-2);m.scale(this.Na.Sb);var z=new a.da(0);a.Ab.fw(this.Na.Hb,this.Na.Yb,f.x,f.y,m.x,m.y,z);for(m=z.o;m<=c;)m+=6.283185307179586;for(;m>c;)m-=6.283185307179586;m<d&&(h=!0)}else h=!0;h?(b.eF(0,b.G()-1),this.rk||(f=new a.b,f.K(b.Ga(b.G()-1)),f.scale(this.Na.Sb),-3.141592653589793>f.x-this.Aj[0]?this.Aj[0]-=6.283185307179586:3.141592653589793<f.x-this.Aj[0]&&
(this.Aj[0]+=6.283185307179586)),g||(d=0.5*(d+c))):(g?(c=new a.b,c.K(f),c.scale(1/this.Na.Sb),b.lf(0,-1,c)):l.iq(this.Na.Hb,this.Na.Yb,this.Na.Sb,this.Na.ib,this.Cj[0],c,d,this.Na.Tm,this.rk,this.Aj,b,NaN,NaN),this.Ex+=1)}l.Gv(this.Na.Hb,this.Na.Yb,this.Na.Sb,this.Na.ib,this.Na.le,this.Cj,d,e,this.rk,this.Aj,b);this.uh=this.Rq[0]};b.prototype.Kv=function(a,b){return this.Na.Kv(this.Cj,a,this.Qi[0],this.Rq[0],this.rk,b)};b.prototype.za=function(){return 0};return b}(),l=function(){function f(){}f.buffer=
function(b,c,l,d,e,g){if(null==b)throw a.g.O("Geometry::Geodesic_bufferer::buffer");if(b.u())return new a.La(b.description);var h=new f;h.sg=c;h.xc=a.Za.Fm(c);var m=a.Za.et(h.xc);h.Zb=g;h.Hb=a.Za.Ss(h.xc);h.Yb=m*(2-m);h.Sb=h.xc.Te().Ej;h.la=h.sg.vq();h.hp=h.xc.vq();h.gr=h.hp*h.Sb;h.gp=1.570796326794897/h.Sb;h.qU=3.141592653589793/h.Sb;h.Tq=6.283185307179586/h.Sb;h.rU=h.Tq/6;h.Hx=0;h.pU=1.5707963267948966*h.Hb/h.Hx;4==l?(h.le=2,h.Ft=!0):(h.le=l,h.Ft=!1);h.Ea=d;h.ib=Math.abs(d);isNaN(e)||0.001>e?h.rS():
h.Sm=e;l=b.F();a.U.Mc(l)?(l=new a.Ya(b.description),l.Cc(b,!0),b=l,l=a.j.Polyline):l==a.j.Envelope&&(l=new a.i,b.s(l),l.ba()<=h.la||l.ca()<=h.la?(l=new a.Ya(b.description),l.Xc(b,!1),b=l,l=a.j.Polyline):(l=new a.La(b.description),l.Xc(b,!1),b=l,l=a.j.Polygon));h.sS();a.U.Lm(l)||h.tS();if(h.ib<=0.5*h.Sm)return l!=a.j.Polygon?new a.La(b.description):h.Ft?b:a.ui.mq(b,h.sg,h.le,h.Mx,-1,g);if(0>h.Ea&&l!=a.j.Polygon)return new a.La(b.description);h.Ft&&a.U.Lc(l)?(c=a.ui.mq(b,c,4,NaN,h.Sm,g),b=a.Za.Wl(c,
h.sg,h.xc)):b=a.Za.Wl(b,h.sg,h.xc);b=a.gh.po(b,h.xc);if(b.u())return new a.La(b.description);!h.Ft&&a.U.Lc(l)&&(b=a.ui.IE(h.Sb,b));b=f.OS(b,h.xc);switch(l){case 1736:c=h.xK(b);break;case 1607:c=h.yK(b);break;case 550:c=h.vK(b);break;case 33:c=h.wK(b);break;default:throw a.g.sa("corrupted_geometry");}h=a.Za.Wl(c,h.xc,h.sg);h.Ik(b.description);return h};f.prototype.xK=function(b){var f=new a.La;b=new c(this,b,f);b=a.wi.local().aa(b,this.xc,this.Zb).next();b=a.Vn.nl(b,this.xc,2);var l=new a.Bg;l.scale(1/
this.Sb,1/this.Sb);f.Pe(l);f=a.Vn.nl(f,this.xc,2);return 0<=this.Ea?a.wi.local().aa(f,b,this.xc,this.Zb):a.Yr.local().aa(f,b,this.xc,this.Zb)};f.prototype.yK=function(b){b=new c(this,b,null);b=a.wi.local().aa(b,this.xc,this.Zb).next();return a.Vn.nl(b,this.xc,2)};f.prototype.vK=function(f){f=new b(this,f);f=a.wi.local().aa(f,this.xc,this.Zb).next();return a.Vn.nl(f,this.xc,2)};f.prototype.wK=function(b){b=b.A();b.scale(this.Sb);var f=new a.La;this.Hv(b,!1,f);return a.Vn.nl(f,this.xc,2)};f.prototype.Kv=
function(b,c,l,d,e,g){var h=b[0],m=b[b.length-1],z=h.y>m.y?h.y:m.y,n=a.v.q(this.Hb,this.Yb,h.y<m.y?h.y:m.y),z=a.v.q(this.Hb,this.Yb,z);if(0.001<this.Hx-(n+c+this.ib)&&0.001<this.Hx+(z-c-this.ib))return!1;c=l-1.570796326794897;l=d+1.570796326794897;var n=c-3.141592653589793,z=c+3.141592653589793,q=l+3.141592653589793,s=[NaN],t=[NaN],u=[NaN],w=[NaN];d=!1;f.wG(this.Hb,this.Yb,this.ib,h,c,n,m,l,s,t);f.wG(this.Hb,this.Yb,this.ib,m,q,l,h,n,u,w);l<s[0]&&s[0]<q?d=!0:l<t[0]&&t[0]<q&&(d=!0);d||(n<u[0]&&u[0]<
c?d=!0:n<w[0]&&w[0]<c&&(d=!0));if(!d&&e)return!1;for(var x=[],A=b.length-1;0<=A;A--)x.push(b[A]);g.Ka();g.ko();A=[0];f.Gv(this.Hb,this.Yb,this.Sb,this.ib,this.le,b,c,l,e,A,g);f.iq(this.Hb,this.Yb,this.Sb,this.ib,m,l,q,this.Tm,e,A,g,s[0],t[0]);f.Gv(this.Hb,this.Yb,this.Sb,this.ib,this.le,x,q,z,e,A,g);f.iq(this.Hb,this.Yb,this.Sb,this.ib,h,n,c,this.Tm,e,A,g,u[0],w[0]);b=!1;e||(b=this.zB(this.Sb,g));return d||b};f.prototype.Hv=function(a,b,c){c.Ka();c.ko();f.iq(this.Hb,this.Yb,this.Sb,this.ib,a,-this.Tm,
6.283185307179586,this.Tm,b,[0],c,NaN,NaN);b||this.zB(this.Sb,c)};f.prototype.zB=function(a,b){var f=this.WK(a,b),c=this.XK(a,b);return f||c};f.prototype.WK=function(b,f){var c=f.G(),l=!1,d=new a.i;f.s(d);if(!a.l.T(d.H*b,1.570796326794897)&&!a.l.T(d.D*b,-1.570796326794897))return!1;for(var e=new a.b,c=c-1;0<=c;c--)f.A(c,e),e.y==d.H&&a.l.T(e.y*b,1.570796326794897)?(l=!0,this.RE(e,c,f)):e.y==d.D&&a.l.T(e.y*b,-1.570796326794897)&&(l=!0,this.RE(e,c,f));return l};f.prototype.XK=function(a,b){var f=b.Ga(0),
c=b.Ga(b.G()-1);return 3.141592653589793<Math.abs(f.x-c.x)*a?(this.QQ(b),!0):this.VK(b)};f.prototype.VK=function(a){return 0>a.Mh()?(this.PQ(a),!0):!1};f.prototype.RE=function(b,f,c){var l=c.G(),d=0<f?f-1:l-1,l=c.Ga(f<l-1?f+1:0),d=c.Ga(d);if(!a.l.T(l.y,b.y)&&!a.l.T(l.x,b.x)){var e=new a.b;e.na(l.x,b.y);c.jc(f,e)}a.l.T(d.y,b.y)||a.l.T(d.x,b.x)||(l=new a.b,l.na(d.x,b.y),c.lf(0,f,l))};f.prototype.QQ=function(b){var f=new a.La,c=new a.La,l=new a.Bg,d=b.Ga(0),e=b.Ga(b.G()-1),g=new a.b;d.x>e.x?(e=this.gp,
l.On(-this.Tq,0)):(e=-this.gp,l.On(this.Tq,0));f.add(b,!1);b.Ka();c.add(f,!1);c.Pe(l);d=new a.i;c.s(d);d.R((this.Tq-d.ba())/2,0);d.D=-this.gp;d.H=this.gp;for(var h=0;h<c.G();h++)c.A(h,g),f.lf(0,-1,g);c.Pe(l);for(h=0;h<c.G();h++)c.A(h,g),f.lf(0,-1,g);c=f.Ga(0);l=f.Ga(f.G()-1);g.na(l.x,e);f.lf(0,-1,g);g.na(0.5*(l.x+c.x),e);f.lf(0,-1,g);g.na(c.x,e);f.lf(0,-1,g);f=a.gh.Qw(f,this.xc,2,d.w);f=a.gh.Qw(f,this.xc,2,d.C);f=a.Fd.clip(f,d,this.hp,NaN);b.add(f,!1)};f.prototype.PQ=function(b){var f=new a.i;b.s(f);
f.R((this.Tq-f.ba())/2,0);f.D=-this.gp;f.H=this.gp;b.ko();var c=new a.b;c.na(f.w,f.D);b.lf(1,-1,c);c.na(f.w,f.H);b.lf(1,-1,c);c.na(0.5*(f.w+f.C),f.H);b.lf(1,-1,c);c.na(f.C,f.H);b.lf(1,-1,c);c.na(f.C,f.D);b.lf(1,-1,c);c.na(0.5*(f.w+f.C),f.D);b.lf(1,-1,c)};f.Gv=function(b,c,l,d,e,g,h,m,z,n,q){var s=null;z||(s=new a.b,s.Eh(),0<q.G()&&(s.K(q.Ga(q.G()-1)),s.scale(l)));var t=new a.da(0),u=new a.da(0),w=new a.da(0),x=new a.b,A=new a.b,y=g[g.length-1];l=1/l;for(var O=0;O<g.length;O++){var C=g[O],G;0==O?G=
h:O==g.length-1?G=m:(a.Ab.Sd(b,c,y.x,y.y,C.x,C.y,null,null,t,e),G=t.o-1.570796326794897);a.Ab.Ph(b,c,C.x,C.y,d,G,u,w);z?A.na(u.o,w.o):(x.na(u.o,w.o),f.Gz(C.x,x.x,s.x,n),A.na(n[0]+x.x,x.y),s.K(A));A.scale(l);q.lf(0,-1,A)}};f.iq=function(b,c,l,d,e,g,h,m,z,n,q,s,t){if(!(h-g<m)){var u=new a.da(0),w=new a.da(0),x=new a.b,A=new a.b,y=null;z||(y=new a.b,y.Eh(),0<q.G()&&(y.K(q.Ga(q.G()-1)),y.scale(l)));var O=a.J.truncate(Math.ceil(g/m)),C=O++*m;C==g&&(C=O++*m);for(l=1/l;C<h+m;){g<s&&s<C?(C=s,O--):g<t&&t<
C&&(C=t,O--);if(C>=h)break;a.Ab.Ph(b,c,e.x,e.y,d,C,u,w);z?A.na(u.o,w.o):(x.na(u.o,w.o),f.Gz(e.x,x.x,y.x,n),A.na(n[0]+x.x,x.y),y.K(A));A.scale(l);q.lf(0,-1,A);g=C;C=O++*m}}};f.wG=function(b,f,c,l,d,e,g,h,m,z){var n=new a.b,q=new a.b,s=new a.da(0),t=new a.da(0);a.Ab.Ph(b,f,l.x,l.y,c,d,s,t);n.na(s.o,t.o);a.Ab.Ph(b,f,l.x,l.y,c,e,s,t);q.na(s.o,t.o);c=new a.da(0);a.Ab.fw(b,f,g.x,g.y,n.x,n.y,c);m[0]=c.o;a.Ab.fw(b,f,g.x,g.y,q.x,q.y,c);for(z[0]=c.o;m[0]<=z[0];)m[0]+=6.283185307179586;for(;m[0]>z[0];)m[0]-=
6.283185307179586;for(;m[0]>=h;)m[0]-=6.283185307179586,z[0]-=6.283185307179586;for(;m[0]<h;)m[0]+=6.283185307179586,z[0]+=6.283185307179586};f.Gz=function(a,b,f,c){if(isNaN(f)){for(;3.141592653589793<c[0]+b-a;)c[0]-=6.283185307179586;for(;3.141592653589793<a-(c[0]+b);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+b-f?c[0]-=6.283185307179586:3.141592653589793<f-(c[0]+b)&&(c[0]+=6.283185307179586)};f.OS=function(b,f){var c=b.F(),l;a.U.Lc(c)?l=b.fa():c==a.j.MultiPoint?l=b.G():l=1;if(1==l)return b;
var d=new a.ha(0);d.resize(l);for(var e=[],g=new a.i,h=0;h<l;h++){d.write(h,h);var m;a.U.Lc(c)?(b.Ti(h,g),m=g.Af()):m=b.Ga(h);m=a.qH.PS(f,m);e[h]=m}d.yd(0,d.size,function(a,b){return e[a]<e[b]?-1:e[a]>e[b]?1:0});g=b.Qa();for(h=0;h<l;h++)m=d.read(h),a.U.Lc(c)?g.$j(b,m,!0):g.Qd(b,m,m+1);return g};f.prototype.sS=function(){var b=Math.min(3.141592653589793*this.Hb-this.ib,this.ib),b=Math.min(b,0.39269908169872414*this.Hb),f=new a.b;f.na(0,10*this.Sb);var c=45*this.Sb,l=new a.da(0),d=new a.da(0),e=new a.da(0),
g=new a.da(0),h=new a.da(0),m=new a.da(0),z=new a.da(0),n=new a.da(0),q=new a.b,s=new a.b,t=new a.b,u=new a.b;a.Ab.Ph(this.Hb,this.Yb,f.x,f.y,b,0,l,d);q.na(l.o,d.o);a.Ab.Ph(this.Hb,this.Yb,f.x,f.y,b,c,e,g);s.na(e.o,g.o);for(var l=new a.da(0),d=new a.da(0),w=new a.da(0);;){a.Ab.Ph(this.Hb,this.Yb,f.x,f.y,b,0.5*(0+c),h,m);t.na(h.o,m.o);a.Ab.Sd(this.Hb,this.Yb,q.x,q.y,s.x,s.y,l,d,null,2);a.Ab.ek(this.Hb,this.Yb,q.x,q.y,0.5*l.o,d.o,z,n,2);u.na(z.o,n.o);a.Ab.Sd(this.Hb,this.Yb,t.x,t.y,u.x,u.y,w,null,null,
2);if(w.o<=this.Sm)break;c*=0.9;a.Ab.Ph(this.Hb,this.Yb,f.x,f.y,b,c,e,g);s.na(e.o,g.o)}this.Tm=6.283185307179586/Math.ceil(6.283185307179586/(c-0))};f.prototype.tS=function(){var b=Math.min(3.141592653589793*this.Hb-this.ib,this.ib),b=Math.min(b,0.39269908169872414*this.Hb),f=new a.b,c=new a.b;f.na(0,10*this.Sb);c.na(10*this.Sb,10*this.Sb);var l=new a.da(0),d=new a.da(0),e=new a.da(0);a.Ab.Sd(this.Hb,this.Yb,f.x,f.y,c.x,c.y,e,l,d,this.le);var g=new a.da(0),h=new a.da(0),m=new a.da(0),z=new a.da(0),
n=new a.b,q=new a.da(0),s=new a.da(0),t=new a.da(0),u=new a.da(0),w=new a.da(0),x=new a.da(0),A=new a.da(0),y=new a.da(0),O=new a.da(0),C=new a.b,G=new a.b,M=new a.b,D=new a.b,K=1,l=l.o,d=d.o+1.570796326794897,e=e.o;a.Ab.Ph(this.Hb,this.Yb,f.x,f.y,b,l-1.570796326794897,s,t);C.na(s.o,t.o);a.Ab.Ph(this.Hb,this.Yb,c.x,c.y,b,d,u,w);G.na(u.o,w.o);for(var s=new a.da(0),t=new a.da(0),d=new a.da(0),N=new a.da(0);;){a.Ab.ek(this.Hb,this.Yb,f.x,f.y,0.5*(0+K)*e,l,g,h,this.le);n.na(g.o,h.o);a.Ab.Sd(this.Hb,this.Yb,
f.x,f.y,n.x,n.y,null,null,q,this.le);a.Ab.Ph(this.Hb,this.Yb,n.x,n.y,b,q.o+1.570796326794897,x,A);M.na(x.o,A.o);a.Ab.Sd(this.Hb,this.Yb,C.x,C.y,G.x,G.y,s,t,null,2);a.Ab.ek(this.Hb,this.Yb,C.x,C.y,0.5*s.o,t.o,y,O,2);D.na(y.o,O.o);a.Ab.Sd(this.Hb,this.Yb,M.x,M.y,D.x,D.y,d,null,null,2);if(d.o<=this.Sm)break;K*=0.9;a.Ab.ek(this.Hb,this.Yb,f.x,f.y,K*e,l,m,z,this.le);c.na(m.o,z.o);a.Ab.Sd(this.Hb,this.Yb,f.x,f.y,c.x,c.y,null,null,N,this.le);a.Ab.Ph(this.Hb,this.Yb,c.x,c.y,b,N.o+1.570796326794897,u,w);G.na(u.o,
w.o)}b=K*e;1E5<b&&(b=1E5);this.Mx=b};f.prototype.rS=function(){var a;a=5E4<this.ib?100:1E4<this.ib?10:1;500>this.ib/a&&(a=this.ib/500);0.01>a&&(a=0.01);this.Sm=a};return f}();a.pH=l})(y||(y={}));(function(a){var b=function(){function b(){}b.bc=function(b,f){var c=new a.b;c.K(f);b.push(c)};b.$i=function(a,b){a.add(b.x);a.add(b.y)};b.bx=function(a){a.df(a.size-2)};b.by=function(a,b){b.na(a.get(a.size-2),a.get(a.size-1))};b.mq=function(c,f,r,k,d,e){if(null==c)throw a.g.O();var g=c.F();if(c.u()||a.U.Lm(g))return c;
var h=new b;h.sg=f;h.xc=a.Za.Fm(f);var m=a.Za.et(h.xc);h.Zb=e;h.Hb=a.Za.Ss(h.xc);h.Yb=m*(2-m);h.Sb=h.xc.Te().Ej;h.hp=h.xc.vq();h.gr=h.hp*h.Sb;h.Ax=k;h.zx=d;h.le=r;g==a.j.Envelope?(r=new a.La(c.description),r.Xc(c,!1)):a.U.Mc(g)?(r=new a.Ya(c.description),r.Cc(c,!0)):r=c;if(4!=h.le){f=0==h.sg.mc(h.xc)?a.Za.Wl(r,h.sg,h.xc):a.gh.po(r,h.xc);if(f.u())return f;f=b.IE(h.Sb,f);f=h.gw(f);f=a.Vn.nl(f,h.xc,h.le);h=a.Za.Wl(f,h.xc,h.sg)}else{2==a.Nf.Bm(f)?(c=a.Za.SN(),f=a.Zr.local().aa(r,c,f,e),f==c&&(f=new a.La,
c.copyTo(f))):f=a.gh.po(r,h.xc);if(f.u())return f;h=h.vS(f)}return h};b.IE=function(c,f){var r=new a.i;f.ed(r);if(3.141592653589793>r.ba()*c)return f;for(var k=!1,r=f.Da(),d=new a.b,e=new a.b;r.lb();)for(;r.Ma();){var g=r.ja();d.K(g.Nb());e.K(g.pc());d.scale(c);e.scale(c);if(3.141592653589793<Math.abs(d.x-e.x)){if(!b.Fs(d,e)){k=!0;break}if(6.283185307179586<Math.abs(d.x-e.x)){k=!0;break}}}if(!k)return f;var k=f.Qa(),h=1<f.description.Ba,m=new a.b,n=new a.b,q=new a.b,s=new a.b,t=new a.Wa;for(r.Lk();r.lb();)for(var u=
NaN,w=[0];r.Ma();){g=r.ja();d.K(g.Nb());e.K(g.pc());d.scale(c);e.scale(c);isNaN(u)?(b.Cd(d.x,NaN,w),n.K(d)):n.K(q);u=n.x;if(b.Fs(d,e)){if(6.283185307179586<e.x-d.x)for(;6.283185307179586<e.x-d.x;)e.x-=6.283185307179586;if(-6.283185307179586>e.x-d.x)for(;-6.283185307179586>e.x-d.x;)e.x+=6.283185307179586;b.Cd(e.x,NaN,w);q.K(e)}else m.K(e),b.dK(m),b.Cd(m.x,u,w),q.na(w[0]+m.x,m.y);0.5>Math.abs(q.x-e.x)&&q.K(e);h?(g.tu(0,t),s.K(n),s.scale(1/c),t.jc(s),r.wl()?k.ef(t):k.lineTo(t),r.Km()&&!f.wc(r.Ra)&&(g.tu(1,
t),s.K(q),s.scale(1/c),t.jc(s),k.lineTo(t))):(r.wl()&&k.Rw(),g=k.fa()-1,s.K(n),s.scale(1/c),k.lf(g,-1,s),r.Km()&&!f.wc(r.Ra)&&(s.K(q),s.scale(1/c),k.lf(g,-1,s)))}return k};b.kC=function(c,f,r,k,d,e,g,h,m,n,q,s){var t=new a.b,u=new a.b,w=0<k.compare(d);b.Ez(w,k,d,t,u);b.Jz(c,f,r,t,u,e,NaN,g,h,m,n,null,q,s);w&&b.fy(m,n,null,q)};b.prototype.gw=function(c){var f=c.Qa(),r=c.Da(),k=[],d=null,e=null,g=1<c.description.Ba;g&&(d=new a.rd(0),e=new a.Ag);for(var h=[0],m=new a.b,n=new a.b,q=new a.b,s=new a.b;r.lb();)for(h[0]=
0;r.Ma();){var t=r.ja();m.K(t.Nb());n.K(t.pc());m.scale(this.Sb);n.scale(this.Sb);var u=0<m.compare(n);b.Ez(u,m,n,q,s);k.length=0;null!=d&&d.df(0);0<this.Ax?b.Jz(this.Hb,this.Yb,this.le,q,s,this.Ax,this.zx,this.gr,null,null,null,g?d:null,k,h):b.dH(this.Hb,this.Yb,this.le,q,s,this.zx,this.gr,g?d:null,k,h);u&&b.fy(null,null,g?d:null,k);k[0].K(t.Nb());k[k.length-1].K(t.pc());for(var w=1;w<k.length-1;w++)k[w].scale(1/this.Sb);g?(u=b.Cz(u,t,e),b.nz(r.wl(),r.Km()&&!c.wc(r.Ra),t,u,d,k,f)):b.lz(r.wl(),r.Km()&&
!c.wc(r.Ra),k,f)}return f};b.prototype.vS=function(c){var f=c.Qa(),r=c.Da(),k=[],d=null,e=new a.Ag,g=1<c.description.Ba;for(g&&(d=new a.rd(0));r.lb();)for(;r.Ma();){var h=r.ja(),m=h.Nb(),n=h.pc(),m=0<m.compare(n),n=b.Cz(m,h,e);k.length=0;null!=d&&d.df(0);b.ER(this.Hb,this.Yb,this.Sb,n,this.sg,this.Ax,this.zx,g?d:null,k);m&&b.fy(null,null,g?d:null,k);g?b.nz(r.wl(),r.Km()&&!c.wc(r.Ra),h,n,d,k,f):b.lz(r.wl(),r.Km()&&!c.wc(r.Ra),k,f)}return f};b.lz=function(a,b,c,k){a&&k.Rw();a=k.fa()-1;var d=c.slice(0);
k.dD(a,d,d.length-1);b&&k.lf(a,-1,c[c.length-1])};b.nz=function(b,f,c,k,d,e,g){var h=new a.Wa;c.Fn(h);b?g.ef(h):g.lineTo(h);if(2<e.length){b=k.ac();for(var m=1;m<e.length-1;m++){var z=k.AD(d.get(m)*b);k.tu(z,h);h.jc(e[m]);g.lineTo(h)}}f&&(c.Cn(h),g.lineTo(h))};b.Jz=function(c,f,r,k,d,e,g,h,m,n,q,s,t,u){var w=new a.da(0),x=new a.da(0),A=new a.da(0);a.Ab.Sd(c,f,k.x,k.y,d.x,d.y,A,w,x,r);var A=A.o,y=w=w.o,x=x.o;0>y&&(y+=6.283185307179586);0>x&&(x+=6.283185307179586);null!=m&&(m[0]=A);null!=n&&(n[0]=y);
null!=q&&(q[0]=x);n=m=NaN;null!=s&&(n=a.v.gg(c,f),q=a.v.q(c,f,k.y),m=(n-q)/A,n=(n+q)/A);q=b.Gs(k,d);var x=b.Es(k,d),y=q||x,O=b.vz(k,d,h),C=new a.da(0),G=new a.da(0),M=new a.b,D=new a.b,K=new a.b;b.Cd(k.x,NaN,u);var N=[u[0]];if(A<=e)b.bc(t,k),b.Cd(d.x,NaN,u),null!=s&&s.add(0),y?(q&&b.ay(k,d,s,t),x&&b.Ux(k,d,s,t)):O?b.Wx(k,d,w,m,n,s,t):0<g&&(D.na(k.x-N[0],k.y),M.na(d.x-u[0],d.y),b.xv(c,f,r,k,A,w,D,M,0,1,g,s,t,N)),b.bc(t,d);else{e=1+a.J.truncate(Math.ceil(A/e));var P=A/(e-1),E=new a.b,R=0;b.bc(t,k);
E.K(k);D.na(k.x-u[0],k.y);null!=s&&s.add(0);for(var F=1;F<e;F++){var T;F<e-1?(a.Ab.ek(c,f,k.x,k.y,F*P,w,C,G,r),M.na(C.o,G.o),b.Cd(M.x,E.x,u),K.na(u[0]+M.x,M.y),T=F/(e-1)):(b.Cd(d.x,NaN,u),M.na(d.x-u[0],d.y),K.K(d),T=1);y?(1==F&&q&&b.ay(k,K,s,t),F==e-1&&x&&b.Ux(E,d,s,t)):O?b.sz(E,K,h)&&(k.x<d.x?E.x>K.x&&(u[0]+=6.283185307179586,K.na(u[0]+M.x,M.y)):E.x<K.x&&(u[0]-=6.283185307179586,K.na(u[0]+M.x,M.y)),b.Wx(E,K,w,m,n,s,t)):0<g&&b.xv(c,f,r,k,A,w,D,M,R,T,g,s,t,N);b.bc(t,K);null!=s&&s.add(T);E.K(K);D.K(M);
N[0]=u[0];R=T}}};b.dH=function(c,f,r,k,d,e,g,h,m,n){var q=new a.da(0),s=new a.da(0),t=new a.da(0);a.Ab.Sd(c,f,k.x,k.y,d.x,d.y,t,q,s,r);var s=t.o,q=q.o,u=t=NaN;if(null!=h)var u=a.v.gg(c,f),w=a.v.q(c,f,k.y),t=(u-w)/s,u=(u+w)/s;var w=b.Gs(k,d),x=b.Es(k,d),A=w||x;g=b.vz(k,d,g);var y=b.Fs(k,d),y=A||g||y;b.Cd(k.x,NaN,n);var O=new a.b;b.bc(m,k);O.K(k);null!=h&&h.add(0);y?(A?(w&&b.ay(k,d,h,m),x&&b.Ux(k,d,h,m)):g&&b.Wx(k,d,q,t,u,h,m),b.Cd(d.x,NaN,n),b.bc(m,d)):s<=e?(b.Cd(d.x,NaN,n),b.bc(m,d)):(t=new a.b,g=
new a.b,t.K(k),g.K(d),t.x-=n[0],g.x-=n[0],-3.141592653589793>g.x?g.x+=6.283185307179586:3.141592653589793<g.x&&(g.x-=6.283185307179586),b.xv(c,f,r,k,s,q,t,g,0,1,e,h,m,n),b.bc(m,d),b.Cd(d.x,NaN,n));null!=h&&h.add(1)};b.xv=function(c,f,r,k,d,e,g,h,m,n,q,s,t,u){var w=new a.b,x=new a.b;w.na(g.x+u[0],g.y);new a.da(0);new a.da(0);new a.da(0);new a.da(0);var A=new a.da(0),y=new a.da(0),O=new a.da(0),C=new a.b,G=new a.b,M=new a.b,D=new a.b;C.K(g);G.K(h);g=new a.rd(0);h=new a.rd(0);b.$i(g,G);h.add(n);var K=
new a.b,N=new a.zb,E=[];for(b.Kz(4,E);0<g.size;){for(var P=!1,R=NaN,F=NaN,T=0;3>T;T++)if(R=E[T]*n+(1-E[T])*m,a.Ab.ek(c,f,k.x,k.y,R*d,e,A,y,r),M.na(A.o,y.o),0==T&&(F=R,D.K(M)),b.lR(C,M,G,N),N.Lb(N.Hd(M,!0),K),a.Ab.Sd(c,f,M.x,M.y,K.x,K.y,O,null,null,2),O.o>q){P=!0;break}P?(G.K(D),n=F,b.$i(g,G),h.add(n)):(b.bx(g),h.oj(h.size-1,1,h.size-1),0<g.size&&(b.Cd(G.x,w.x,u),x.na(u[0]+G.x,G.y),b.bc(t,x),w.K(x),null!=s&&s.add(n),C.K(G),m=n,b.by(g,G),n=h.get(h.size-1)))}};b.ER=function(c,f,r,k,d,e,g,h,m){var n=
new a.b,q=new a.b,s=new a.b,t=new a.b,u=new a.b,w=new a.b,x=new a.b,A=new a.b,y=new a.b,O=new a.b,C=new a.da(0),G=new a.da(0),M=new a.b,D=[[],[]],K=1==a.Nf.Bm(d);d=d.wq();var N=k.Nb(),E=k.pc();K?(w.na(N.x*r,N.y*r),x.na(E.x*r,E.y*r)):(D[0][0]=N.x,D[0][1]=N.y,D[1][0]=E.x,D[1][1]=E.y,a.Za.su(),w.x=D[0][0]*r,w.y=D[0][1]*r,x.x=D[1][0]*r,x.y=D[1][1]*r);var P=0,R=0,F=1,T=k.mD();n.K(N);q.K(E);var E=new a.rd(0),I=new a.rd(0),U=new a.rd(0);b.$i(E,q);b.$i(I,x);U.add(F);b.bc(m,n);null!=h&&h.add(R);var L=[],V;
V=0<g?T?5:3:T?5:1;b.Kz(V,L);for(var W=new a.da(0),Ba=new a.da(0),ha=new a.da(0),ba=new a.da(0),ia=new a.da(0),Ca=new a.da(0),na=new a.da(0);0<I.size;){var Y=!1,da=NaN,Z=NaN;a.Ab.Sd(c,f,w.x,w.y,x.x,x.y,W,Ba,null,2);for(N=0;N<V;N++){if(0==N){if(!T&&0>=g&&W.o<=e&&3.141592653589793>Math.abs(w.x-x.x))break;if(k.rA(R,F)<=d)break}da=L[N]*F+(1-L[N])*R;k.Lb(da,s);K?A.na(s.x*r,s.y*r):(D[0][0]=s.x,D[0][1]=s.y,a.Za.su(),A.x=D[0][0]*r,A.y=D[0][1]*r);if(0==N&&(Z=da,u.K(s),O.K(A),0<e&&(W.o>e||3.141592653589793<=
Math.abs(w.x-x.x)))){Y=!0;break}if(T&&0<e){if(a.Ab.Sd(c,f,w.x,w.y,A.x,A.y,ha,null,null,2),ha.o>e||3.141592653589793<=Math.abs(w.x-A.x)){Y=!0;break}}else if(0<g)if(T?(t.NO(n,q,L[N]),K?y.na(t.x*r,t.y*r):(D[0][0]=t.x,D[0][1]=t.y,a.Za.su(),y.x=D[0][0]*r,y.y=D[0][1]*r)):(t.K(s),y.K(A)),a.Ab.Sd(c,f,w.x,w.y,y.x,y.y,ba,null,null,2),ba.o<=W.o){a.Ab.ek(c,f,w.x,w.y,ba.o,Ba.o,C,G,2);M.na(C.o,G.o);a.Ab.Sd(c,f,M.x,M.y,A.x,A.y,ia,null,null,2);if(ia.o>g){Y=!0;break}if(T){a.Ab.Sd(c,f,M.x,M.y,y.x,y.y,Ca,null,null,
2);if(Ca.o>g){Y=!0;break}a.Ab.Sd(c,f,y.x,y.y,A.x,A.y,na,null,null,2);if(na.o>g){Y=!0;break}}}else{Y=!0;break}}Y?(q.K(u),x.K(O),F=Z,b.$i(E,q),b.$i(I,x),U.add(F)):(b.bx(E),b.bx(I),U.oj(U.size-1,1,U.size-1),b.bc(m,q),P+=W.o,null!=h&&h.add(P),0<I.size&&(n.K(q),w.K(x),R=F,b.by(E,q),b.by(I,x),F=U.get(U.size-1)))}if(null!=h){c=1/P;for(N=0;N<h.size;N++)h.write(N,h.read(N)*c)}};b.fy=function(a,b,c,k){k.reverse();null!=c&&c.Hp(0,c.size,1);c=null!=a?a[0]:NaN;k=null!=b?b[0]:NaN;null!=a&&(a[0]=k);null!=b&&(b[0]=
c)};b.Ez=function(a,b,c,k,d){a?(k.K(c),d.K(b)):(k.K(b),d.K(c))};b.Cz=function(a,b,c){if(!a)return b;c.create(b.F());b.copyTo(c.get());c.get().reverse();return c.get()};b.Cd=function(a,b,c){if(isNaN(b)){for(;3.141592653589793<c[0]-a;)c[0]-=6.283185307179586;for(;3.141592653589793<a-c[0];)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+a-b?c[0]-=6.283185307179586:3.141592653589793<b-(c[0]+a)&&(c[0]+=6.283185307179586)};b.lR=function(a,b,c,k){3.141592653589793>Math.abs(b.x-a.x)?(k.fd(a),3.141592653589793<=
c.x-a.x?k.Ok(c.x-6.283185307179586,c.y):3.141592653589793<=a.x-c.x?k.Ok(c.x+6.283185307179586,c.y):k.Ok(c.x,c.y)):(k.fd(c),3.141592653589793<=a.x-c.x?k.Ok(a.x-6.283185307179586,a.y):3.141592653589793<=c.x-a.x?k.Ok(a.x+6.283185307179586,a.y):k.Ok(a.x,a.y))};b.Kz=function(a,b){for(var c=0;c<a;c++){var k=Math.ceil(c/2)/(a+1);0!=c%2&&(k=-k);b[c]=0.5+k}};b.Gs=function(b,f){return a.l.T(b.y,1.570796326794897)&&!a.l.T(f.y,1.570796326794897)||a.l.T(b.y,-1.570796326794897)&&!a.l.T(f.y,-1.570796326794897)?
!0:!1};b.Es=function(b,f){return a.l.T(f.y,1.570796326794897)&&!a.l.T(b.y,1.570796326794897)||a.l.T(f.y,-1.570796326794897)&&!a.l.T(b.y,-1.570796326794897)?!0:!1};b.vz=function(c,f,r){return!b.sz(c,f,r)||a.l.T(c.y,1.570796326794897)||a.l.T(c.y,-1.570796326794897)||a.l.T(f.y,1.570796326794897)||a.l.T(f.y,-1.570796326794897)?!1:!0};b.sz=function(a,b,c){return Math.abs(Math.abs(a.x-b.x)-3.141592653589793)<=c?!0:!1};b.Fs=function(b,f){return a.l.T(b.y,1.570796326794897)&&a.l.T(f.y,1.570796326794897)||
a.l.T(b.y,-1.570796326794897)&&a.l.T(f.y,-1.570796326794897)?!0:!1};b.ay=function(c,f,r,k){if(0<c.y){var d=new a.b;d.na(f.x,1.570796326794897)}else d=new a.b,d.na(f.x,-1.570796326794897);a.l.T(c.x,d.x)||a.l.T(f.y,d.y)||(b.bc(k,d),null!=r&&r.add(0))};b.Ux=function(c,f,r,k){if(0<f.y){var d=new a.b;d.na(c.x,1.570796326794897)}else d=new a.b,d.na(c.x,-1.570796326794897);a.l.T(f.x,d.x)||a.l.T(c.y,d.y)||(b.bc(k,d),null!=r&&r.add(1))};b.Wx=function(c,f,r,k,d,e,g){a.l.Wc(r)?(0<1.570796326794897-c.y&&(r=new a.b,
r.na(c.x,1.570796326794897),b.bc(g,r),null!=e&&e.add(k)),0<1.570796326794897-f.y&&(r=new a.b,r.na(f.x,1.570796326794897),b.bc(g,r),null!=e&&e.add(k))):(0<1.570796326794897+c.y&&(r=new a.b,r.na(c.x,-1.570796326794897),b.bc(g,r),null!=e&&e.add(d)),0<1.570796326794897+f.y&&(r=new a.b,r.na(f.x,-1.570796326794897),b.bc(g,r),null!=e&&e.add(d)))};b.dK=function(a){if(-3.141592653589793>a.x)for(;-3.141592653589793>a.x;)a.x+=6.283185307179586;if(3.141592653589793<a.x)for(;3.141592653589793<a.x;)a.x-=6.283185307179586};
return b}();a.ui=b})(y||(y={}));(function(a){var b=function(){function b(){}b.nl=function(c,f,r){if(null==c||null==f||!a.Za.Oo(f))throw a.g.O();if(c.u())return c;var k=c,d=k.F();if(a.U.Lc(d)){k=a.gh.po(c,f);c=new a.i;k.s(c);for(var d=a.Ja.Ad(f,c,!1),e=a.Za.Gm(f),g=Math.floor((c.w-e.w)/e.ba())*e.ba()+e.w;g<c.C;)g>c.w+d&&g<c.C-d&&(k=a.gh.Qw(k,f,r,g)),g+=e.ba()}else{if(d==a.j.Envelope)return c=new a.La(k.description),c.Xc(k,!1),b.nl(c,f,r);if(a.U.Mc(d))return c=new a.Ya(k.description),c.Cc(k,!0),b.nl(c,
f,r)}return b.VG(k,f)};b.VG=function(c,f){if(null==c||null==f||!a.Za.Oo(f))throw a.g.O();if(c.u())return c;var r=null,r=c.F();r==a.j.Envelope?(r=new a.La(c.description),r.Xc(c,!1)):a.U.Mc(r)?(r=new a.Ya(c.description),r.Cc(c,!0)):r=c;r=a.gh.po(r,f);return r.u()?r:1==a.Nf.Bm(f)?a.gh.$M(r,f,r!=c):b.SG(r,f,r!=c)};b.SG=function(b,f,c){if(!a.Za.Oo(f))throw a.g.O();if(b.u())return b;var k=a.Za.IC(f),d=360*k,k=0-180*k,e=k+d;2==a.Nf.Bm(f)&&(d=a.Za.Gm(f),e=d.C,k=d.w,d=e-k);return a.gh.gC(b,k,d,f,c)};return b}();
a.Vn=b})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.tv=function(a){this.hi=a};b.prototype.GA=function(a){this.Bb=a};b.prototype.HA=function(a){this.on=a};b.vB=function(b){return b.u()||b.F()!=a.j.Polyline&&b.F()!=a.j.Polygon?!1:!0};b.tB=function(b){return b.u()||b.F()!=a.j.Polyline&&b.F()!=a.j.Polygon||20>b.G()?!1:!0};b.uB=function(b){return b.u()||b.F()!=a.j.Polyline&&b.F()!=a.j.Polygon||20>b.G()?!1:!0};return b}();a.Xj=b})(y||(y={}));(function(a){var b=function(){function b(){}
b.EH=function(b){var f=new a.La;f.Ty(b.S.w,b.S.D);f.xj(b.S.w,b.S.H);f.xj(b.S.C,b.S.H);f.xj(b.S.C,b.S.D);return f};b.$S=function(b,f){var c=a.wi.local(),k=new a.Qc(b);return c.aa(k,f,null).next()};b.ll=function(b,f,c){return a.Yr.local().aa(b,f,c,null)};b.Pn=function(b,f,c){return a.cv.local().aa(b,f,c,null)};b.LS=function(b,f,c){var k=a.cv.local();b=new a.Qc(b);f=new a.Qc(f);c=k.aa(b,f,c,null);for(k=[];null!=(f=c.next());)k.push(f);return k};b.mc=function(b,f,c){return a.bl.local().aa(3,b,f,c,null)};
b.mM=function(b,f,c){return a.bl.local().aa(4,b,f,c,null)};b.PO=function(b,f,c){var k=a.Zr.local();b=new a.Qc(b);f=new a.Qc(f);c=k.aa(b,f,c,null);for(k=[];null!=(f=c.next());)k.push(f);return k};b.jM=function(b,f,c){var k=a.Yr.local();b=new a.Qc(b);f=new a.Qc(f);c=k.aa(b,f,c,null);for(k=[];null!=(f=c.next());)k.push(f);return k};b.Ha=function(b,f,c){return a.Zr.local().aa(b,f,c,null)};b.iT=function(b,f,c){return a.bl.local().aa(2,b,f,c,null)};b.contains=function(b,f,c){return a.bl.local().aa(1,b,
f,c,null)};b.UL=function(b,f,c){return a.bl.local().aa(16,b,f,c,null)};b.touches=function(b,f,c){return a.bl.local().aa(8,b,f,c,null)};b.sQ=function(b,f,c){return a.bl.local().aa(32,b,f,c,null)};b.QO=function(b,f,c){return a.bl.local().aa(1073741824,b,f,c,null)};b.oy=function(b,f,c,k){return a.eI.local().aa(b,f,c,k,null)};b.Gb=function(b,f,c,k){var d=null;if(null!=c){if(d=c.Te(),null!=k&&d.Rc()!=k.Rc()&&d.Oc!=k.Oc)throw a.g.cj();}else if(null!=k)throw a.g.O();b=a.YH.local().aa(b,f,null);null!==d&&
null!==k&&(b=a.Ub.ih(b,d,k));return b};b.clip=function(b,f,c){return a.RH.local().aa(b,a.i.Pa(f.S.w,f.S.D,f.S.C,f.S.H),c,null)};b.ym=function(b,f,c){if(null==b||null==f)return null;b=a.TH.local().aa(!0,b,f,c,null);for(f=[];null!=(c=b.next());)c.u()||f.push(c);return f.slice(0)};b.qK=function(c,f,r,k,d,e,g,h){if(!0===d)return b.UP(c,f,r,k,e,g,h);d=r;if(null!=f){if(g=f.Te(),null!=k&&g.Rc()!=k.Rc()){if(g.Oc!=k.Oc)throw a.g.cj();d=[];a.Ub.OB(r,r.length,k,g,d)}}else if(null!=k)throw a.g.O();r=a.Oz.local();
if(e){c=new a.Qc(c);f=r.aa(c,f,d,e,null);for(c=[];null!=(e=f.next());)c.push(e);e=c.slice(0)}else{e=[];for(k=0;k<c.length;k++)e[k]=r.aa(c[k],f,d[k],null)}return e};b.UP=function(b,f,c,k,d,e,g){if(null===f)throw a.g.O();if(null===k||void 0===k)k=4326!==f.Rc()?f.Te():a.Ub.Rd(9001);if(0!==k.Oc)throw a.g.O();a.Ub.OB(c,c.length,k,a.Ub.Rd(9001),c);k=a.Tz.local();if(d){b=new a.Qc(b);f=k.aa(b,f,e,c,g,!1,d,null);for(c=[];null!=(e=f.next());)c.push(e);d=c.slice(0)}else{d=[];for(var h=0;h<b.length;h++)d[h]=
k.aa(b[h],f,e,c[h],g,!1,null)}return d};b.buffer=function(b,f,c,k,d,e,g){var h=c;if(!1===d){if(null!=f){if(d=f.Te(),null!=k&&d.Rc()!=k.Rc()){if(d.Oc!=k.Oc)throw a.g.cj();h=a.Ub.ih(c,k,d)}}else if(null!=k)throw a.g.O();b=a.Oz.local().aa(b,f,h,null)}else{if(null===f)throw a.g.O();if(null===k||void 0===k)k=4326!==f.Rc()?f.Te():a.Ub.Rd(9001);if(0!==k.Oc)throw a.g.O();h=a.Ub.ih(c,k,a.Ub.Rd(9001));b=a.Tz.local().aa(b,f,e,h,g,!1,null)}return b};b.rQ=function(b,f,c,k,d,e,g){if(null!=f){var h=f.Te();if(null!=
g&&h.Rc()!=g.Rc()){if(h.Oc!=g.Oc)throw a.g.cj();c=a.Ub.ih(c,g,h)}}else if(null!=g)throw a.g.O();b=new a.Qc(b);f=a.Wz.local().aa(b,f,c,k,d,e,null);for(c=[];null!=(k=f.next());)c.push(k);return c.slice(0)};b.offset=function(b,f,c,k,d,e,g){if(null!=f){var h=f.Te();if(null!=g&&h.Rc()!=g.Rc()){if(h.Oc!=g.Oc)throw a.g.cj();c=a.Ub.ih(c,g,h)}}else if(null!=g)throw a.g.O();return a.Wz.local().aa(b,f,c,k,d,e,null)};b.IL=function(b){return a.Qz.local().aa(b,null)};b.JL=function(b,f){for(var c=a.Qz.local(),k=
new a.Qc(b),c=c.aa(k,f,null),k=[],d;null!=(d=c.next());)k.push(d);return k};b.yw=function(b,f,c){return a.av.local().yw(b,f,c)};b.zw=function(b,f){return a.av.local().zw(b,f)};b.Aw=function(b,f,c,k){return a.av.local().Aw(b,f,c,k)};b.Py=function(b,f){return a.$r.local().aa(b,f,!1,null)};b.bP=function(b,f){return a.$r.local().Po(b,f,null)};b.eN=function(b,f,c,k,d){var e=a.Sz.local();if(null!=f){if(f=f.Te(),null!=d&&f.Rc()!=d.Rc()){if(f.Oc!=d.Oc)throw a.g.cj();c=a.Ub.ih(c,d,f)}}else if(null!=d)throw a.g.O();
return e.aa(b,c,k,null)};b.mq=function(b,f,c,k){var d=a.VH.local();if(null!=f){if(f=f.Te(),null!=k&&f.Rc()!=k.Rc()){if(f.Oc!=k.Oc)throw a.g.cj();c=a.Ub.ih(c,k,f)}}else if(null!=k)throw a.g.O();return d.aa(b,c,null)};b.ew=function(b,f,c,k,d){void 0===d&&(d=0);var e=a.$H.local();if(4==d)throw a.g.qe();if(0!==d)throw a.g.qe();if(null!=f){var g=f.Te();if(null!=k&&g.Rc()!=k.Rc()){if(g.Oc!=k.Oc)throw a.g.cj();c=a.Ub.ih(c,k,g)}}else if(null!=k)throw a.g.O();return e.aa(b,c,f,d,null)};b.iN=function(c,f,r,
k){if(null===c)return 0;if(4==k)throw a.g.qe();if(0!==k)throw a.g.qe();if(c.F()==a.j.Envelope)c=b.EH(c);else if(c.F()!=a.j.Polygon)return 0;k=a.Za.Fm(f);c=a.Za.Wl(c,f,k);k=a.oH.jN([c])[0];if(null!==r){if(2!==r.Oc)throw a.g.O("Unit must be a area unit type");k=a.Ub.ih(k,a.Ub.Rd(109404),r)}return k};b.mN=function(b,f,c,k){b=a.bI.local().aa(b,f,k,null);if(null!==c){if(0!==c.Oc)throw a.g.O("Unit must be a linear unit type");b=a.Ub.ih(b,a.Ub.Rd(9001),c)}return b};b.AQ=function(b,f,c){if(null===b)return 0;
var k=null;if(null!=f){k=f.Te();if(0==k.Oc&&(k=a.Ub.PC(k),null==k&&null!==c))throw a.g.O();if(null!=c&&k.Rc()!=c.Rc()&&k.Oc!=c.Oc)throw a.g.cj();}else if(null!=c)throw a.g.O();f=0;return b.F()==a.j.Polygon||b.F()==a.j.Envelope?(f=b.Mh(),null!==c?a.Ub.ih(f,k,c):f):0};b.BQ=function(b,f,c){if(null===b||b.u()||1>b.gb())return 0;var k=null;if(null!=f){if(k=f.Te(),null!=c&&k.Rc()!=c.Rc()&&k.Oc!=c.Oc)throw a.g.cj();}else if(null!=c)throw a.g.O();f=null;b.F()==a.j.Polygon||b.F()==a.j.Envelope?f=b.Rf():a.U.Mc(b.F())?
(f=new a.Ya(b.description),f.Cc(b,!0)):f=b;b=0;f=f.Da();for(var d=new a.b,e=new a.b;f.lb();)for(;f.Ma();){var g=f.ja();g.gt(d);g.tw(e);b+=a.b.Gb(d,e)}null!==k&&null!==c&&(b=a.Ub.ih(b,k,c));return b};b.XT=function(b,f){return a.Nf.lN(b,f)};b.HL=function(a){return void 0!==a.points?b.kH(a,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM):void 0!==a.rings?b.Nz(a.rings,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM,"P"):void 0!==a.paths?b.Nz(a.paths,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:
a.hasM,"L"):void 0!==a.x?b.uH(a):void 0!==a.xmin?b.hH(a):null};b.uH=function(b){if(null==b.x||"NaN"==b.x)return new a.Wa;var f=new a.Wa(b.x,b.y);void 0!==b.z&&null!==b.z&&f.qS(b.z);void 0!==b.m&&null!==b.m&&f.aS(b.m);return f};b.hH=function(b){if(null==b.xmin||"NaN"==b.xmin)return new a.Wj;var f=new a.Wj(b.xmin,b.ymin,b.xmax,b.ymax);void 0!==b.zmin&&null!==b.zmin&&f.setInterval(1,0,b.zmin,b.zmax);void 0!==b.mmin&&null!==b.mmin&&f.setInterval(2,0,b.mmin,b.mmax);return f};b.kH=function(b,f,c){var k=
0,d=new a.pe,e=3*b.points.length;0!=e%2&&e++;2>e&&(e=2);var g=a.J.truncate(3*b.points.length/2);4>g?g=4:16>g&&(g=16);for(var e=a.Bc.kl(e,0),h=a.Bc.kl(g),g=a.Bc.kl(g),m=0;m<b.points.length;m++)e.write(2*m,b.points[m][0]),e.write(2*m+1,b.points[m][1]),h.write(m,f||c?b.points[m][2]:NaN),g.write(m,c&&f?b.points[m][3]:NaN),k++;0!=k&&(d.resize(k),d.bm(0,e));f&&(d.Oe(1),d.bm(1,h));c&&(d.Oe(2),d.bm(2,0==f?h:g));d.de(16777215);return d};b.Nz=function(b,f,c,k){var d,e=0,g=2;"P"==k?(d=new a.La,e=1,g=3):d=new a.Ya;
for(var h=a.Bc.Dg(0),m=a.Bc.so(0),n=0,q=0,z=[],s=[],t=0;t<b.length;t++){var u=b[t].length;z[t]=!1;if("P"===k&&b[t][0][0]===b[t][b[t].length-1][0]&&b[t][0][1]===b[t][b[t].length-1][1]){var w=0==c?!0:b[t][0][3]===b[t][b[t].length-1][3]||void 0===b[t][0][3]&&void 0===b[t][b[t].length-1][3];(0==f||b[t][0][2]===b[t][b[t].length-1][2]||void 0===b[t][0][2]&&void 0===b[t][b[t].length-1][2])&&w&&(z[t]=!0,--u)}u>=g?(s[t]=!1,q+=1,h.add(n),m.add(e),n+=u):s[t]=!0}k=3*n;0!=k%2&&k++;2>k&&(k=2);t=a.J.truncate(3*
n/2);4>t?t=4:16>t&&(t=16);k=a.Bc.kl(k,0);e=a.Bc.kl(t);g=a.Bc.kl(t);for(t=u=0;t<b.length;t++)if(!1===s[t])for(w=0;w<b[t].length;w++){var x=!1;w===b[t].length-1&&!0===z[t]&&(x=!0);x||(k.write(2*u,b[t][w][0]),k.write(2*u+1,b[t][w][1]),e.write(u,f||c?b[t][w][2]:NaN),g.write(u,c&&f?b[t][w][3]:NaN),u++)}0!=n&&(b=d,h.resize(q),m.resize(q),0<n&&(h.add(n),m.add(0)),b.bm(0,k),b.NF(m),b.OF(h));f&&(d.Oe(1),d.bm(1,e));c&&(d.Oe(2),d.bm(2,0==f?e:g));d.de(16777215);return d};return b}();a.Qb=b})(y||(y={}));(function(a){var b=
function(){function a(){}a.Zk=function(a){var b=0,c=0,k=a.length,d=a[c],e;for(c;c<k-1;c++)e=a[c+1],b+=(e[0]-d[0])*(e[1]+d[1]),d=e;return 0<=b};a.rotate=function(b,f,c){var k=null;f=f*Math.PI/180;var d=Math.cos(f);f=Math.sin(f);if(void 0!==b.paths){for(var k={paths:[]},e=0;e<b.paths.length;e++){for(var v=b.paths[e],g=[],h=0;h<v.length;h++){var m=v[h].slice(0);g.push(m);var n=d*(v[h][0]-c.x)-f*(v[h][1]-c.y)+c.x,q=f*(v[h][0]-c.x)+d*(v[h][1]-c.y)+c.y;m[0]=n;m[1]=q}k.paths.push(g)}return k}if(void 0!==
b.rings){k={rings:[]};for(e=0;e<b.rings.length;e++){for(var v=b.rings[e],g=[],s=a.Zk(v),h=0;h<v.length;h++)m=v[h].slice(0),g.push(m),n=d*(v[h][0]-c.x)-f*(v[h][1]-c.y)+c.x,q=f*(v[h][0]-c.x)+d*(v[h][1]-c.y)+c.y,m[0]=n,m[1]=q;a.Zk(g)!==s&&g.reverse();k.rings.push(g)}return k}if(void 0!==b.x)return k={x:d*(b.x-c.x)-f*(b.y-c.y)+c.x,y:f*(b.x-c.x)+d*(b.y-c.y)+c.y},void 0!==b.z&&(k.z=b.z),void 0!==b.m&&(k.m=b.m),k;if(void 0!==b.points){k={points:[]};b=b.points;for(h=0;h<b.length;h++)e=b[h].slice(0),e[0]=
d*(b[h][0]-c.x)-f*(b[h][1]-c.y)+c.x,e[1]=f*(b[h][0]-c.x)+d*(b[h][1]-c.y)+c.y,k.points.push(e);return k}return null};a.eC=function(b,f){var c,k;if(void 0!==b.paths){c={paths:[]};for(var d=0;d<b.paths.length;d++){for(var e=b.paths[d],v=[],g=0;g<e.length;g++){var h=e[g].slice(0);v.push(h);k=f.x-e[g][0];h[0]=e[g][0]+2*k}c.paths.push(v)}return c}if(void 0!==b.rings){c={rings:[]};for(d=0;d<b.rings.length;d++){for(var e=b.rings[d],m=a.Zk(e),v=[],g=0;g<e.length;g++)h=e[g].slice(0),v.push(h),k=f.x-e[g][0],
h[0]=e[g][0]+2*k;a.Zk(v)!==m&&v.reverse();c.rings.push(v)}return c}if(void 0!==b.x)return k=f.x-b.x,c={x:b.x+2*k,y:b.y},void 0!==b.z&&(c.z=b.z),void 0!==b.m&&(c.m=b.m),c;if(void 0!==b.points){c={points:[]};d=b.points;for(g=0;g<d.length;g++)e=d[g].slice(0),k=f.x-e[0],e[0]+=2*k,c.points.push(e);return c}return void 0!==b.xmin?(c={w:b.xmin,D:b.ymin,C:b.xmax,H:b.ymax},void 0!==b.zmin&&(c.zmin=b.zmin,c.zmax=b.zmax),void 0!==b.mmin&&(c.mmin=b.mmin,c.mmax=b.mmax),k=f.x-b.xmin,c.xmax=b.xmin+2*k,k=f.x-b.xmax,
c.xmin=b.xmax+2*k,c):null};a.fC=function(b,f){var c,k;if(void 0!==b.paths){c={paths:[]};for(var d=0;d<b.paths.length;d++){for(var e=b.paths[d],v=[],g=0;g<e.length;g++){var h=e[g].slice(0);v.push(h);k=f.y-e[g][1];h[1]=e[g][1]+2*k}c.paths.push(v)}return c}if(void 0!==b.rings){c={rings:[]};for(d=0;d<b.rings.length;d++){for(var e=b.rings[d],m=a.Zk(e),v=[],g=0;g<e.length;g++)h=e[g].slice(0),v.push(h),k=f.y-e[g][1],h[1]=e[g][1]+2*k;a.Zk(v)!==m&&v.reverse();c.rings.push(v)}return c}if(void 0!==b.x)return k=
f.y-b.y,c={y:b.y+2*k,x:b.x},void 0!==b.z&&(c.z=b.z),void 0!==b.m&&(c.m=b.m),c;if(void 0!==b.points){c={points:[]};d=b.points;for(g=0;g<d.length;g++)e=d[g].slice(0),k=f.y-e[1],e[1]+=2*k,c.points.push(e);return c}return void 0!==b.xmin?(c={w:b.xmin,D:b.ymin,C:b.xmax,H:b.ymax},void 0!==b.zmin&&(c.zmin=b.zmin,c.zmax=b.zmax),void 0!==b.mmin&&(c.mmin=b.mmin,c.mmax=b.mmax),k=f.y-b.ymin,c.ymax=b.ymin+2*k,k=f.y-b.ymax,c.ymin=b.ymax+2*k,c):null};return a}();a.Wn=b})(y||(y={}));(function(a){var b=function(){function b(){}
b.jg=function(b,f){var c=f;null==c&&(c=a.Pd.Tf());switch(b){case a.j.Point:return new a.Wa(c);case a.j.Line:return new a.zb(c);case a.j.Envelope:return new a.Wj(c);case a.j.MultiPoint:return new a.pe(c);case a.j.Polyline:return new a.Ya(c);case a.j.Polygon:return new a.La(c);default:throw a.g.sa("invalid argument.");}};return b}();a.sH=b})(y||(y={}));(function(a){var b=function(){function b(c,f){this.De=a.ha.Zc(c,-1);this.pa=new a.Tr;this.tk=f}b.prototype.vR=function(a){this.pa.Cr(Math.min(this.De.size,
a));this.pa.$l(a)};b.prototype.addElement=function(b,f){if(void 0===f)return this.IJ(b);var c=a.J.truncate(f%this.De.size),k=this.De.get(c);-1==k&&(k=this.pa.jh(),this.De.set(c,k));return this.pa.addElement(k,b)};b.prototype.IJ=function(b){var f=this.tk.uw(b),f=a.J.truncate(f%this.De.size),c=this.De.get(f);-1==c&&(c=this.pa.jh(),this.De.set(f,c));return this.pa.addElement(c,b)};b.prototype.Kc=function(b,f){if(void 0===f)this.cM(b);else{var c=a.J.truncate(f%this.De.size),k=this.De.get(c);if(-1==k)throw a.g.O();
for(var d=this.pa.hc(k),e=-1;-1!=d;){var g=this.pa.cb(d);this.pa.ea(d)==b?(this.pa.Kc(k,e,d),-1==this.pa.hc(k)&&(this.pa.Fg(k),this.De.set(c,-1))):e=d;d=g}}};b.prototype.cM=function(b){var f=this.tk.uw(b),f=a.J.truncate(f%this.De.size),c=this.De.get(f);if(-1==c)throw a.g.O();for(var k=this.pa.hc(c),d=-1;-1!=k;){var e=this.pa.cb(k);this.pa.ea(k)==b?(this.pa.Kc(c,d,k),-1==this.pa.hc(c)&&(this.pa.Fg(c),this.De.set(f,-1))):d=k;k=e}};b.prototype.CN=function(b){b=a.J.truncate(b%this.De.size);b=this.De.get(b);
return-1==b?-1:this.pa.hc(b)};b.prototype.RN=function(a){return this.pa.cb(a)};b.prototype.ld=function(b){var f=this.tk.uw(this.ea(b)),f=a.J.truncate(f%this.De.size),c=this.De.get(f);if(-1==c)throw a.g.O();for(var k=this.pa.hc(c),d=-1;-1!=k;){if(k==b){this.pa.Kc(c,d,k);-1==this.pa.hc(c)&&(this.pa.Fg(c),this.De.set(f,-1));return}d=k;k=this.pa.cb(k)}throw a.g.O();};b.prototype.ea=function(a){return this.pa.ea(a)};b.prototype.clear=function(){this.De=a.ha.Zc(this.De.size,-1);this.pa.clear()};b.prototype.size=
function(){return this.pa.HC()};return b}();a.zH=b})(y||(y={}));(function(a){var b=function(){function b(){this.ci=new a.Gc(3);this.pa=new a.Gc(6);this.zP=!1;this.Xd=-1}b.prototype.ck=function(a){this.ci.Kc(a)};b.prototype.nu=function(){return this.ci.ce()};b.prototype.Qs=function(a){this.pa.Kc(a)};b.prototype.Xx=function(){return this.pa.ce()};b.prototype.Iy=function(a,b){this.ci.N(a,1,b)};b.prototype.Fu=function(a,b){this.ci.N(a,2,b)};b.prototype.$R=function(a,b){this.ci.N(a,3,b)};b.prototype.Gy=
function(a,b){this.pa.N(a,4,b)};b.prototype.cS=function(a,b){this.pa.N(a,3,b)};b.prototype.RF=function(a,b){this.pa.N(a,2,b)};b.prototype.jh=function(a){var b=this.Xx();this.pa.N(b,3,this.Xd);this.pa.N(b,4,0);this.pa.N(b,5,a);-1!=this.Xd&&this.RF(this.Xd,b);return this.Xd=b};b.prototype.Fg=function(a){this.CB(a);var b=this.pa.P(a,2),c=this.pa.P(a,3);-1!=b?this.cS(b,c):this.Xd=c;-1!=c&&this.RF(c,b);this.Qs(a);return c};b.prototype.Cr=function(a){this.pa.ee(a)};b.prototype.DC=function(a){return this.pa.P(a,
5)};b.prototype.ZR=function(a,b){this.pa.N(a,5,b)};b.prototype.addElement=function(a,b){return this.zO(a,b)};b.prototype.zO=function(a,b){var c=this.nu();this.Fu(c,-1);-1==this.pa.P(a,0)&&this.pa.N(a,0,c);var k=this.pa.P(a,1);this.Iy(c,k);-1!=k&&this.Fu(k,c);this.pa.N(a,1,c);this.setData(c,b);this.Gy(a,this.tq(a)+1);this.zP&&this.$R(c,a);return c};b.prototype.Kc=function(a,b){var c=this.he(b),k=this.cb(b);-1!=c?this.Fu(c,k):this.pa.N(a,0,k);-1!=k?this.Iy(k,c):this.pa.N(a,1,c);this.ck(b);this.Gy(a,
this.tq(a)-1);return k};b.prototype.$l=function(a){this.ci.ee(a)};b.prototype.getData=function(a){return this.ci.P(a,0)};b.prototype.setData=function(a,b){this.ci.N(a,0,b)};b.prototype.cb=function(a){return this.ci.P(a,2)};b.prototype.he=function(a){return this.ci.P(a,1)};b.prototype.hc=function(a){return this.pa.P(a,0)};b.prototype.uc=function(a){return this.pa.P(a,1)};b.prototype.clear=function(){for(var a=this.Xd;-1!=a;)a=this.Fg(a)};b.prototype.CB=function(a){for(var b=this.uc(a);-1!=b;){var c=
b,b=this.he(c);this.ck(c)}this.pa.N(a,0,-1);this.pa.N(a,1,-1);this.Gy(a,0)};b.prototype.u=function(){return 0==this.ci.size};b.prototype.HC=function(){return this.ci.size};b.prototype.tq=function(a){return this.pa.P(a,4)};b.prototype.Bw=function(a){return this.pa.P(a,3)};return b}();a.Zn=b})(y||(y={}));(function(a){var b=function(){function b(c){void 0===c?(this.bg=new a.Gc(2),this.pa=new a.Gc(4),this.Xd=-1,this.At=!0):(this.bg=new a.Gc(2),this.pa=new a.Gc(c?4:2),this.Xd=-1,this.At=c)}b.prototype.ck=
function(a){this.bg.Kc(a)};b.prototype.nu=function(){return this.bg.ce()};b.prototype.Qs=function(a){this.pa.Kc(a)};b.prototype.Xx=function(){return this.pa.ce()};b.prototype.jh=function(){var a=this.Xx();this.At&&(this.pa.N(a,3,this.Xd),-1!=this.Xd&&this.pa.N(this.Xd,2,a),this.Xd=a);return a};b.prototype.Fg=function(a){for(var b=this.hc(a);-1!=b;){var c=b,b=this.cb(b);this.ck(c)}this.At&&(b=this.pa.P(a,2),c=this.pa.P(a,3),-1!=b?this.pa.N(b,3,c):this.Xd=c,-1!=c&&this.pa.N(c,2,b));this.Qs(a)};b.prototype.Cr=
function(a){this.pa.ee(a)};b.prototype.addElement=function(a,b){var c=this.pa.P(a,1),k=this.nu();-1!=c?this.bg.N(c,1,k):this.pa.N(a,0,k);this.pa.N(a,1,k);this.bg.N(k,0,b);return k};b.prototype.$l=function(a){this.bg.ee(a)};b.prototype.Kc=function(a,b,c){-1!=b?(this.bg.N(b,1,this.bg.P(c,1)),this.pa.P(a,1)==c&&this.pa.N(a,1,b)):(this.pa.N(a,0,this.bg.P(c,1)),this.pa.P(a,1)==c&&this.pa.N(a,1,-1));this.ck(c)};b.prototype.Pv=function(a,b){var c=this.pa.P(a,1),k=this.pa.P(b,0);-1!=k&&(-1!=c?this.bg.N(c,
1,k):this.pa.N(a,0,k),this.pa.N(a,1,this.pa.P(b,1)));this.At&&(c=this.pa.P(b,2),k=this.pa.P(b,3),-1!=c?this.pa.N(c,3,k):this.Xd=k,-1!=k&&this.pa.N(k,2,c));this.Qs(b)};b.prototype.ea=function(a){return this.bg.P(a,0)};b.prototype.Vi=function(a,b){this.bg.N(a,0,b)};b.prototype.cb=function(a){return this.bg.P(a,1)};b.prototype.hc=function(a){return this.pa.P(a,0)};b.prototype.Em=function(a){return this.ea(this.hc(a))};b.prototype.clear=function(){this.bg.Nh(!0);this.pa.Nh(!0);this.Xd=-1};b.prototype.u=
function(a){return void 0===a?0==this.bg.size:-1==this.pa.P(a,0)};b.prototype.HC=function(){return this.bg.size};b.prototype.Bw=function(a){return this.pa.P(a,3)};return b}();a.Tr=b})(y||(y={}));(function(a){var b=function(){function b(){}b.jz=function(c,f,r,k,d,e,g){var h=new a.b;h.K(c);c=new a.b;c.K(f);d.uv(h);d.uv(c);f=d.ls(h);var m=d.ls(c);0==m&&(m=d.CC());if(h.x!=c.x&&(h.y!=c.y||h.y!=d.D&&h.y!=d.H)||m>f!=e){f=d.vA(h);var m=d.vA(c),n,q=e?1:3;do f=f+q&3,n=d.uu(f),0!=g&&(k=b.jz(h,n,r,k,d,e,g)),
r[k++].na(n.x,n.y),h=n;while((f&3)!=m);0!=g&&(k=b.jz(h,c,r,k,d,e,g))}else if(d=new a.b,d.na(c.x-h.x,c.y-h.y),0!=g&&(g=a.J.truncate(d.xJ()/g),0<g)){d.scale(1/(g+1));for(e=0;e<g;e++)h.add(d),r[k++].na(h.x,h.y)}return k};b.Ad=function(a,b,c){b=b.kv();a=null!=a?a.wq():0;c&&(b*=4,a*=1.1);return Math.max(a,b)};b.zs=function(a){return 2*Math.sqrt(2)*a};b.TJ=function(a){return Math.sqrt(2)*a};b.Cg=function(c,f,r){var k=new a.i;f.s(k);return b.Ad(c,k,r)};b.rB=function(a,b,c){b=b.Ah(1,0).kv();a=null!=a?a.wq():
0;c&&(b*=4,a*=1.1);return Math.max(a,b)};b.ZT=function(b,f){var c=new a.i;b.ed(c);c.Eb(f);return c};b.Zs=function(b,f){var c=new a.i;b.ed(c);var k=new a.i;f.ed(k);c.Eb(k);return c};b.eU=function(b,f){var c=b.GN(f),k=b.Fa(f),d=b.Ec(f),e=b.Ga(c);c==k?(d=b.Ga(d-1),c=b.Ga(k+1)):c==d-1?(d=b.Ga(c-1),c=b.Ga(k)):(d=b.Ga(c-1),c=b.Ga(c+1));e=a.b.zn(d,e,c);return 0==e?0<b.no(f):-1==e};b.BK=function(b){var f=new a.i;b.ed(f);if(f.u())return null;var c=new a.bo(f,8),k=-1,d=new a.i,e=!1;do for(var g=0,h=b.fa();g<
h;g++)if(b.Ti(g,d),k=c.jt(g,d,k),-1==k){if(e)throw a.g.sa("internal error");b.um(f,!1);e=!0;c.reset(f,8);break}else e=!1;while(e);return c};b.nB=function(b){var f=new a.i;b.ed(f);for(var c=new a.bo(f,8),k=-1,d=b.Da(),e=new a.i,g=!1;d.lb();)for(;d.Ma();){var h=d.ja(),m=d.Kb();h.s(e);k=c.jt(m,e,k);if(-1==k){if(g)throw a.g.xa();b.um(f,!1);g=!0;c.reset(f,8);d.Lk();break}}return c};b.ij=function(b,f){var c=new a.i;b.ed(c);for(var k=new a.bo(c,8),d=-1,e=new a.i,g=b.Da(),h=!1;g.lb();)for(;g.Ma();){var m=
g.ja(),n=g.Kb();m.s(e);if(e.kc(f)&&(d=k.jt(n,e,d),-1==d)){if(h)throw a.g.sa("internal error.");b.um(c,!1);h=!0;k.reset(c,8);g.Lk();break}}return k};b.CT=function(b){var f=new a.i;b.ed(f);for(var c=new a.bo(f,8),k=new a.b,d=new a.i,e=!1,g=0;g<b.G();g++)if(b.A(g,k),d.L(k),-1==c.lg(g,d)){if(e)throw a.g.xa();b.um(f,!1);e=!0;c.reset(f,8);g=-1}return c};b.oB=function(b,f){for(var c=new a.bo(f,8),k=new a.b,d=!1,e=new a.i,g=0;g<b.G();g++)if(b.A(g,k),f.contains(k)&&(e.L(k),-1==c.lg(g,e))){if(d)throw a.g.xa();
d=!0;g=new a.i;b.um(g,!1);c.reset(g,8);g=-1}return c};b.zN=function(b,f,c){var k=new a.i,d=new a.i;b.ed(k);f.ed(d);k.R(c,c);d.R(c,c);var e=new a.i;e.L(k);e.Ha(d);b=b.Da();f=f.Da();var g=new a.rz;g.YF(c);var h=!1;for(g.jG();b.lb();)for(;b.Ma();)b.ja().s(k),k.kc(e)&&(h=!0,c=new a.i,c.L(k),g.OA(b.Kb(),c));g.$B();if(!h)return null;k=!1;for(g.iG();f.lb();)for(;f.Ma();)f.ja().s(d),d.kc(e)&&(k=!0,c=new a.i,c.L(d),g.LA(f.Kb(),c));g.ZB();return k?g:null};b.AN=function(b,f,c,k,d){var e=b.F(),g=f.F(),h=new a.i,
m=new a.i;b.ed(h);f.ed(m);h.R(c,c);m.R(c,c);var n=new a.i;n.L(h);n.Ha(m);var q=new a.rz;q.YF(c);var z=!1;q.jG();var s=0;for(c=b.fa();s<c;s++)if(!k||e!=a.j.Polygon||b.pt(s))b.Ti(s,h),h.kc(n)&&(z=!0,q.OA(s,h));q.$B();if(!z)return null;b=!1;q.iG();k=0;for(c=f.fa();k<c;k++)if(!d||g!=a.j.Polygon||f.pt(k))f.Ti(k,m),m.kc(n)&&(b=!0,q.LA(k,m));q.ZB();return b?q:null};b.gU=function(a,b){return 0<a.sj(b)};b.yT=function(b,f){var c=new a.i;b.gR(f,c);var c=new a.bo(c,8),k=-1,d=new a.i,e=b.Da();e.uy(f);if(e.lb())for(;e.Ma();){var g=
e.ja(),h=e.Kb();g.ed(d);k=c.jt(h,d,k);if(-1==k)throw a.g.sa("internal error");}return c};return b}();a.Ja=b})(y||(y={}));(function(a){var b=function(){function a(b){this.Oa=b}a.prototype.compare=function(a,b,f){a=a.ea(f);f=this.Oa.vj(b);var c=this.Oa.vj(a);return f<c?-1:f==c?r.No(b)&&r.rt(a)?-1:r.No(a)&&r.rt(b)?1:0:1};return a}(),c=function(){function a(b){this.Oa=b}a.prototype.Xp=function(a,b,f){this.Oa.xS(f,a,b)};a.prototype.Ko=function(a){return this.Oa.vj(a)};return a}(),l;(function(a){a[a.initialize=
0]="initialize";a[a.pIn=1]="pIn";a[a.pL=2]="pL";a[a.pR=3]="pR";a[a.pT=4]="pT";a[a.right=5]="right";a[a.left=6]="left";a[a.all=7]="all"})(l||(l={}));var f=function(){function b(){this.Oa=null;this.gi=new a.Od;this.ug=new a.ha(0);this.$f=[0,0]}b.prototype.Ch=function(a,b){this.gi.ra=a.ra-b;this.gi.wa=a.wa+b;this.ug.resize(0);this.Vd=0;this.$f[0]=0};b.prototype.ty=function(b,f,c){if(b>f)throw a.g.O();this.gi.ra=b-c;this.gi.wa=f+c;this.ug.resize(0);this.Vd=0;this.$f[0]=0};b.prototype.Gn=function(a,b){this.gi.ra=
a-b;this.gi.wa=a+b;this.ug.resize(0);this.Vd=0;this.$f[0]=0};b.prototype.next=function(){if(!this.Oa.To)throw a.g.ya();if(0>this.Vd)return-1;for(var b=!0;b;)switch(this.$f[this.Vd]){case 1:b=this.tQ();break;case 2:b=this.uQ();break;case 3:b=this.vQ();break;case 4:b=this.wQ();break;case 5:b=this.AR();break;case 6:b=this.rP();break;case 7:b=this.WJ();break;case 0:b=this.Pw();break;default:throw a.g.xa();}return-1!=this.pg?this.Ao()>>1:-1};b.IT=function(a,f,c){var l=new b;l.Oa=a;l.ug.yb(20);l.Ch(f,c);
return l};b.JT=function(a,f,c){var l=new b;l.Oa=a;l.ug.yb(20);l.Gn(f,c);return l};b.Pa=function(a){var f=new b;f.Oa=a;f.ug.yb(20);f.Vd=-1;return f};b.prototype.Pw=function(){this.pg=this.YD=this.di=this.zc=-1;if(null!=this.Oa.Zd&&0<this.Oa.Zd.size)return this.$f[0]=1,this.di=this.Oa.$e,!0;this.Vd=-1;return!1};b.prototype.tQ=function(){this.zc=this.di;if(-1==this.zc)return this.pg=this.Vd=-1,!1;var a=this.Oa.Bo(this.zc);if(this.gi.wa<a)return a=this.Oa.uj(this.zc),this.di=this.Oa.Di(this.zc),-1!=a&&
(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=6),!0;if(a<this.gi.ra)return a=this.Oa.uj(this.zc),this.di=this.Oa.tj(this.zc),-1!=a&&(this.vh=this.Oa.sq(a),this.$f[++this.Vd]=5),!0;this.$f[this.Vd]=2;this.YD=this.zc;a=this.Oa.uj(this.zc);this.di=this.Oa.Di(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=7);return!0};b.prototype.uQ=function(){this.zc=this.di;if(-1==this.zc)return this.$f[this.Vd]=3,this.di=this.Oa.tj(this.YD),!0;if(this.Oa.Bo(this.zc)<this.gi.ra){var a=this.Oa.uj(this.zc);this.di=
this.Oa.tj(this.zc);-1!=a&&(this.vh=this.Oa.sq(a),this.$f[++this.Vd]=5);return!0}a=this.Oa.uj(this.zc);this.di=this.Oa.Di(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=7);a=this.Oa.tj(this.zc);-1!=a&&this.ug.add(a);return!0};b.prototype.vQ=function(){this.zc=this.di;if(-1==this.zc)return this.$f[this.Vd]=4,!0;if(this.gi.wa<this.Oa.Bo(this.zc)){var a=this.Oa.uj(this.zc);this.di=this.Oa.Di(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=6);return!0}a=this.Oa.uj(this.zc);this.di=
this.Oa.tj(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=7);a=this.Oa.Di(this.zc);-1!=a&&this.ug.add(a);return!0};b.prototype.wQ=function(){if(0==this.ug.size)return this.pg=this.Vd=-1,!1;this.zc=this.ug.get(this.ug.size-1);this.ug.resize(this.ug.size-1);var a=this.Oa.uj(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=7);-1!=this.Oa.Di(this.zc)&&this.ug.add(this.Oa.Di(this.zc));-1!=this.Oa.tj(this.zc)&&this.ug.add(this.Oa.tj(this.zc));return!0};b.prototype.rP=function(){this.pg=
this.vh;if(-1!=this.pg&&r.No(this.Ao())&&this.Oa.vj(this.Ao())<=this.gi.wa)return this.vh=this.GC(),!1;this.Vd--;return!0};b.prototype.AR=function(){this.pg=this.vh;if(-1!=this.pg&&r.rt(this.Ao())&&this.Oa.vj(this.Ao())>=this.gi.ra)return this.vh=this.aO(),!1;this.Vd--;return!0};b.prototype.WJ=function(){this.pg=this.vh;if(-1!=this.pg&&r.No(this.Ao()))return this.vh=this.GC(),!1;this.Vd--;return!0};b.prototype.GC=function(){return this.Oa.Df?this.Oa.If.cb(this.pg):this.Oa.ki.cb(this.pg)};b.prototype.aO=
function(){return this.Oa.Df?this.Oa.If.he(this.pg):this.Oa.ki.he(this.pg)};b.prototype.Ao=function(){return this.Oa.Df?this.Oa.If.ea(this.pg):this.Oa.ki.getData(this.pg)};return b}();a.HT=f;var r=function(){function k(a){this.Al=this.rh=this.If=this.ki=this.Hl=this.Ki=this.Zd=this.Li=null;this.Df=a;this.To=this.Ct=!1}k.prototype.Tp=function(){this.Sj(!0)};k.prototype.eq=function(b,f){if(!this.Ct)throw a.g.ya();this.Li.push(new a.Od(b,f))};k.prototype.vo=function(){if(!this.Ct)throw a.g.sa("invalid call");
this.Ct=!1;this.To=!0;this.Df||(this.AO(),this.It=this.Li.length)};k.prototype.lg=function(b){if(!this.Df||!this.To)throw a.g.O("invalid call");if(-1==this.$e){var f=this.Li.length;if(this.mx){var c=new a.ha(0);c.yb(2*f);this.$E(c);this.rh.yb(2*f);this.rh.resize(0);this.ZE(c);this.Hl.resize(f,-1);this.Hl.dh(-1,0,f);this.mx=!1}else this.Hl.dh(-1,0,f);this.$e=this.Ls()}f=this.cD(b<<1,this.$e);c=this.If.addElement((b<<1)+1,this.Gw(f));this.TF(f,c);this.Hl.set(b,f);this.It++};k.prototype.remove=function(b){if(!this.Df||
!this.To)throw a.g.sa("invalid call");var f=this.Hl.get(b);if(-1==f)throw a.g.O("the interval does not exist in the interval tree");this.Hl.set(b,-1);this.It--;var c=this.Gw(f),k;k=this.If.gO(c);this.If.ld(this.KN(f),c);this.If.ld(this.dO(f),c);b=this.If.size(c);0==b&&(this.If.eM(c),this.WF(k,-1));this.Ki.Kc(f);for(var c=this.JC(k),l=this.Di(k),r=this.tj(k),f=0;!(0<b||k==this.$e||-1!=l&&-1!=r);)k==this.Di(c)?-1!=l?(this.Tj(c,l),this.Xi(l,c),this.Tj(k,-1)):-1!=r?(this.Tj(c,r),this.Xi(r,c),this.Vj(k,
-1)):this.Tj(c,-1):-1!=l?(this.Vj(c,l),this.Xi(l,c),this.Tj(k,-1)):-1!=r?(this.Vj(c,r),this.Xi(r,c),this.Vj(k,-1)):this.Vj(c,-1),this.Xi(k,-1),f++,k=c,c=this.uj(k),b=-1!=c?this.If.size(c):0,l=this.Di(k),r=this.tj(k),c=this.JC(k)};k.prototype.reset=function(){if(!this.Df||!this.To)throw a.g.O("invalid call");this.Sj(!1)};k.prototype.size=function(){return this.It};k.prototype.Se=function(){return f.Pa(this)};k.prototype.$E=function(a){for(var b=this.Li.length,f=0;f<2*b;f++)a.add(f);this.yS(a,2*b)};
k.prototype.ZE=function(a){for(var b=NaN,f=0;f<a.size;f++){var c=a.get(f),k=this.vj(c);k!=b&&(this.rh.add(c),b=k)}};k.prototype.AO=function(){var b=this.Li.length,f=new a.ha(0);f.yb(2*b);this.$E(f);this.rh.yb(2*b);this.rh.resize(0);this.ZE(f);this.Ki.ee(b);this.ki.$l(2*b);var c=a.Bc.Dg(b);c.dh(-1,0,b);this.$e=this.Ls();for(b=0;b<f.size;b++){var k=f.get(b),l=c.get(k>>1);-1!=l?this.TF(l,this.ki.addElement(this.Gw(l),k)):(l=this.cD(k,this.$e),c.set(k>>1,l))}};k.prototype.cD=function(b,f){var c=f,k=f,
l=f,r,d=-1,e=0,g=this.rh.size-1,h=0,m=b>>1,n=NaN,q=NaN;r=!0;for(var z=this.QN(m),m=this.NN(m);r;){e<g?(h=e+a.J.truncate((g-e)/2),-1==this.qw(c)&&this.CF(c,this.rh.get(h),this.rh.get(h+1))):-1==this.qw(c)&&this.CF(c,this.rh.get(e),this.rh.get(e));var s=this.Bo(c);if(m<s)-1!=l&&(l==c?(k=c,n=s,l=this.Di(c),-1!=l?q=this.Bo(l):q=NaN):q>s&&(s<n?this.Tj(k,c):this.Vj(k,c),this.Vj(c,l),this.Df&&(this.Xi(c,k),this.Xi(l,c)),k=c,n=s,l=-1,q=NaN)),g=this.LN(c),-1==g&&(g=this.Ls(),this.XR(c,g)),c=g,g=h;else if(z>
s)-1!=l&&(l==c?(k=c,n=s,l=this.tj(c),-1!=l?q=this.Bo(l):q=NaN):q<s&&(s<n?this.Tj(k,c):this.Vj(k,c),this.Tj(c,l),this.Df&&(this.Xi(c,k),this.Xi(l,c)),k=c,n=s,l=-1,q=NaN)),e=this.eO(c),-1==e&&(e=this.Ls(),this.hS(c,e)),c=e,e=h+1;else{r=this.uj(c);-1==r&&(r=this.SL(c),this.WF(c,r));var t=this.JJ(r,b),d=this.RL();this.kS(d,r);this.WR(d,t);c!=l&&(s<n?this.Tj(k,c):this.Vj(k,c),this.Df&&this.Xi(c,k),-1!=l&&(q<s?this.Tj(c,l):this.Vj(c,l),this.Df&&this.Xi(l,c)));r=!1}}return d};k.prototype.Ls=function(){return this.Zd.ce()};
k.prototype.SL=function(a){return this.Df?this.If.lq(a):this.ki.jh(a)};k.prototype.RL=function(){return this.Ki.ce()};k.prototype.Sj=function(f){f?(this.Ct=this.mx=!0,this.To=!1,null==this.rh?this.rh=a.Bc.Dg(0):this.rh.resize(0),null==this.Li?this.Li=[]:this.Li.length=0):this.mx=!1;this.Df?null==this.Hl?(this.Hl=a.Bc.Dg(0),this.If=new a.bj,this.If.In(new b(this))):this.If.clear():null==this.ki?this.ki=new a.Zn:this.ki.clear();null==this.Zd?(this.Ki=new a.Gc(3),this.Zd=new a.Gc(this.Df?8:7)):(this.Ki.Nh(!1),
this.Zd.Nh(!1));this.$e=-1;this.It=0};k.prototype.CF=function(a,b,f){this.RR(a,b);this.SR(a,f)};k.prototype.Bo=function(a){var b=this.qw(a);if(-1==b)return NaN;b=this.vj(b);a=this.vj(this.vN(a));return b==a?b:0.5*(b+a)};k.prototype.RR=function(a,b){this.Zd.N(a,0,b)};k.prototype.SR=function(a,b){this.Zd.N(a,1,b)};k.prototype.XR=function(a,b){this.Zd.N(a,3,b)};k.prototype.hS=function(a,b){this.Zd.N(a,4,b)};k.prototype.WF=function(a,b){this.Zd.N(a,2,b)};k.prototype.Tj=function(a,b){this.Zd.N(a,5,b)};
k.prototype.Vj=function(a,b){this.Zd.N(a,6,b)};k.prototype.Xi=function(a,b){this.Zd.N(a,7,b)};k.prototype.kS=function(a,b){this.Ki.N(a,0,b)};k.prototype.JJ=function(a,b){return this.Df?this.If.addElement(b,a):this.ki.addElement(a,b)};k.prototype.WR=function(a,b){this.Ki.N(a,1,b)};k.prototype.TF=function(a,b){this.Ki.N(a,2,b)};k.prototype.gk=function(a){return this.Df?this.If.hc(a):this.ki.hc(a)};k.prototype.sq=function(a){return this.Df?this.If.uc(a):this.ki.uc(a)};k.No=function(a){return 0==(a&1)};
k.rt=function(a){return 1==(a&1)};k.prototype.qw=function(a){return this.Zd.P(a,0)};k.prototype.vN=function(a){return this.Zd.P(a,1)};k.prototype.uj=function(a){return this.Zd.P(a,2)};k.prototype.LN=function(a){return this.Zd.P(a,3)};k.prototype.eO=function(a){return this.Zd.P(a,4)};k.prototype.Di=function(a){return this.Zd.P(a,5)};k.prototype.tj=function(a){return this.Zd.P(a,6)};k.prototype.JC=function(a){return this.Zd.P(a,7)};k.prototype.Gw=function(a){return this.Ki.P(a,0)};k.prototype.KN=function(a){return this.Ki.P(a,
1)};k.prototype.dO=function(a){return this.Ki.P(a,2)};k.prototype.QN=function(a){return this.Li[a].ra};k.prototype.NN=function(a){return this.Li[a].wa};k.prototype.yS=function(b,f){null==this.Al&&(this.Al=new a.Qr);var k=new c(this);this.Al.sort(b,0,f,k)};k.prototype.xS=function(a,b,f){var c=this;a.yd(b,f,function(a,b){var f=c.vj(a),l=c.vj(b);return f<l||f==l&&k.No(a)&&k.rt(b)?-1:1})};k.prototype.vj=function(a){var b=this.Li[a>>1];return k.No(a)?b.ra:b.wa};return k}();a.$p=r})(y||(y={}));(function(a){var b=
function(b){function c(f,l,k,d){b.call(this);void 0===f?this.description=a.Pd.Tf():void 0===k?this.description=f:(this.description=a.Pd.Tf(),this.My(f,l),this.Ok(k,d))}I(c,b);c.prototype.F=function(){return a.j.Line};c.prototype.ac=function(){var a=this.oa-this.ma,b=this.ka-this.ia;return Math.sqrt(a*a+b*b)};c.prototype.mg=function(a){var b=this.oa-this.ma,c=this.ka-this.ia;return Math.sqrt(b*b+c*c)<=a};c.prototype.mD=function(){return!1};c.prototype.Pf=function(){var b=new a.b;b.qc(this.pc(),this.Nb());
return b};c.prototype.Dp=function(b){b.Ka();b.Qf(this.description);var c=new a.i;this.s(c);b.Bu(c);for(var c=1,k=this.description.Ba;c<k;c++)for(var l=this.description.Id(c),d=a.qa.Xa(l);c<d;c++){var e=this.Ah(l,0);b.setInterval(l,0,e)}};c.prototype.s=function(a){a.L(this.oa,this.ka,this.ma,this.ia);a.normalize()};c.prototype.Dn=function(a){a.Ka();a.Eb(this.oa,this.ka,this.zd(0,1,0));a.Eb(this.ma,this.ia,this.zd(1,1,0))};c.prototype.Pe=function(b){if(b instanceof a.Bg){this.rc();var c=new a.b;c.x=
this.oa;c.y=this.ka;b.Zi(c,c);this.oa=c.x;this.ka=c.y;c.x=this.ma;c.y=this.ia;b.Zi(c,c);this.ma=c.x;this.ia=c.y}else this.rc(),c=new a.fe,c.x=this.oa,c.y=this.ka,c.z=this.zd(0,1,0),c=b.Rn(c),this.oa=c.x,this.ka=c.y,this.pm(0,1,0,c.z),c.x=this.ma,c.y=this.ia,c.z=this.zd(1,1,0),c=b.Rn(c),this.ma=c.x,this.ia=c.y,this.pm(1,1,0,c.z)};c.prototype.Qa=function(){return new c(this.description)};c.prototype.jv=function(a,b){return 0.5*(this.ma-a-(this.oa-a))*(this.ia-b+(this.ka-b))};c.prototype.Qu=function(a){return a*
this.ac()};c.prototype.AD=function(a){return a/this.ac()};c.prototype.sC=function(b){return a.vi.tt(this.oa,this.ma,b)};c.prototype.uN=function(b){return a.vi.tt(this.ka,this.ia,b)};c.prototype.ym=function(b,c){var k=new a.Ag;this.Bi(b,c,k);return k.get()};c.prototype.Bi=function(b,c,k){if(null==k)throw a.g.O();k.kq();k=k.get();k.Qf(this.description);var l=new a.b;this.Lb(b,l);k.My(l.x,l.y);this.Lb(c,l);k.Ok(l.x,l.y);for(var l=1,d=this.description.Ba;l<d;l++)for(var e=this.description.Gd(l),g=a.qa.Xa(e),
h=0;h<g;h++){var m=this.md(b,e,h);k.Ly(e,h,m);m=this.md(c,e,h);k.By(e,h,m)}};c.prototype.md=function(b,c,k){if(0==c)return 0==k?this.Lb(b).x:this.Lb(b).y;switch(a.qa.IN(c)){case 0:return 0.5>b?this.ft(c,k):this.Vs(c,k);case 1:var l=this.ft(c,k);c=this.Vs(c,k);return a.vi.tt(l,c,b);case 2:throw a.g.sa("not implemented");}throw a.g.xa();};c.prototype.Hd=function(a,b){var c=this.ma-this.oa,l=this.ia-this.ka,d=c*c+l*l;if(0==d)return 0.5;c=((a.x-this.oa)*c+(a.y-this.ka)*l)/d;b||(0>c?c=0:1<c&&(c=1));return c};
c.prototype.mt=function(a,b,c,l){if(a){a=this.ia-this.ka;if(0==a)return b==this.ia?-1:0;b=(b-this.ka)/a;if(0>b||1<b)return 0;null!=c&&(c[0]=this.sC(b))}else{a=this.ma-this.oa;if(0==a)return b==this.ma?-1:0;b=(b-this.oa)/a;if(0>b||1<b)return 0;null!=c&&(c[0]=this.uN(b))}null!=l&&(l[0]=b);return 1};c.prototype.xe=function(a,b){var c=this.ia-this.ka;if(0==c)return a==this.ia?b:NaN;var c=(a-this.ka)/c,l=this.sC(c);1==c&&(l=this.ma);return l};c.prototype.ps=function(a,b,c){return 0<=this.fo(a.x,a.y,b,
c)};c.prototype.Kh=function(a,b,c){return 0<=this.fo(a,b,c,!0)};c.prototype.Dq=function(a,b){return this.ps(a,b,!1)};c.prototype.KE=function(){if(this.ia<this.ka||this.ia==this.ka&&this.ma<this.oa){var a=this.oa;this.oa=this.ma;this.ma=a;a=this.ka;this.ka=this.ia;this.ia=a;for(var a=0,b=this.description.sp-2;a<b;a++){var c=this.ga[a];this.ga[a]=this.ga[a+b];this.ga[a+b]=c}}};c.prototype.qs=function(b,c){var k=a.b.Pa(b,c);k.sub(this.Nb());var l=new a.b;l.qc(this.pc(),this.Nb());var d=l.Ai(k),k=8.881784197001252E-16*
(Math.abs(l.x*k.y)+Math.abs(l.y*k.x));return d>k?-1:d<-k?1:0};c.prototype.fo=function(b,c,k,l){var d=this.oa,e=this.ka,g=b-d,h=c-e,m=Math.sqrt(g*g+h*h);if(m<=Math.max(k,6.661338147750939E-16*m))return l&&0==m?NaN:0;g=b-this.ma;h=c-this.ia;m=Math.sqrt(g*g+h*h);if(m<=Math.max(k,6.661338147750939E-16*m))return l&&0==m?NaN:1;var g=this.ma-this.oa,h=this.ia-this.ka,n=Math.sqrt(g*g+h*h);if(0<n){l=1/n;var g=g*l,h=h*l,q=b-d,z=c-e,m=q*g+z*h,s=1.7763568394002505E-15*(Math.abs(q*g)+Math.abs(z*h)),t=g,g=-h,h=
t,t=q*g+z*h,g=1.7763568394002505E-15*(Math.abs(q*g)+Math.abs(z*h)),h=Math.max(k,s);if(m<-h||m>n+h)return NaN;n=Math.max(k,g);if(Math.abs(t)<=n&&(l=a.J.Jr(m*l,0,1),0.5>=l?(m=this.oa+(this.ma-this.oa)*l,n=this.ka+(this.ia-this.ka)*l):(m=this.ma-(this.ma-this.oa)*(1-l),n=this.ia-(this.ia-this.ka)*(1-l)),a.b.Xv(m,n,b,c)<=k)){if(0.5>l){if(a.b.Xv(m,n,d,e)<=k)return 0}else if(a.b.Xv(m,n,this.ma,this.ia)<=k)return 1;return l}}return NaN};c.prototype.mc=function(a){return null==a?!1:a==this?!0:a.constructor!==
this.constructor?!1:this.rJ(a)};c.prototype.AA=function(b,c,k){var l=k?this.oa:this.ma,d=k?this.ka:this.ia;k=new a.b;k.x=b.ma-l;k.y=b.ia-d;var e=c.ml(k),g=6.661338147750939E-16*c.uA(k);return e>g?(k.x=b.oa-l,k.y=b.ka-d,b=c.ml(k),c=6.661338147750939E-16*c.uA(k),b<=c):!0};c.prototype.zA=function(b){var c=new a.b;c.x=this.ma-this.oa;c.y=this.ia-this.ka;if(!this.AA(b,c,!1))return!1;c.zp();return this.AA(b,c,!0)?!0:!1};c.ye=function(a,b){var c=a.qs(b.oa,b.ka),l=a.qs(b.ma,b.ia);if(0>c&&0>l||0<c&&0<l)return!1;
c=b.qs(a.oa,a.ka);l=b.qs(a.ma,a.ia);if(0>c&&0>l||0<c&&0<l)return!1;c=a.ac();l=b.ac();return c>l?a.zA(b):b.zA(a)};c.Jd=function(b,c,k){var l=a.b.Pa(NaN,NaN),d=b.ma-b.oa,e=b.ia-b.ka,g=c.ma-c.oa,h=c.ia-c.ka,m=g*e-d*h;if(0==m)return l;var n=8.881784197001252E-16*(Math.abs(g*e)+Math.abs(d*h)),q=c.oa-b.oa,z=c.ka-b.ka,s=g*z-q*h,t=8.881784197001252E-16*(Math.abs(g*z)+Math.abs(q*h)),g=s/m,h=Math.abs(m),s=(t*h+n*Math.abs(s))/(m*m)+2.220446049250313E-16*Math.abs(g);if(g<-s||g>1+s)return l;s=d*z-q*e;e=8.881784197001252E-16*
(Math.abs(d*z)+Math.abs(q*e));d=s/m;m=(e*h+n*Math.abs(s))/(m*m)+2.220446049250313E-16*Math.abs(d);if(d<-m||d>1+m)return l;m=a.J.Jr(g,0,1);n=a.J.Jr(d,0,1);g=b.Lb(m);d=c.Lb(n);e=new a.b;e.qc(g,d);if(e.length()>k&&(e.add(g,d),e.scale(0.5),m=b.Hd(e,!1),n=c.Hd(e,!1),b=b.Lb(m),c=c.Lb(n),b.sub(c),b.length()>k))return l;l.na(m,n);return l};c.wJ=function(a,b,k,d){var e=0;if(a.oa==b.oa&&a.ka==b.ka||a.oa==b.ma&&a.ka==b.ia)if(e++,!d)return 1;if(a.ma==b.oa&&a.ia==b.ka||a.ma==b.ma&&a.ia==b.ia){e++;if(2==e)return 2;
if(!d)return 1}return b.Kh(a.oa,a.ka,k)||b.Kh(a.ma,a.ia,k)||a.Kh(b.oa,b.ka,k)||a.Kh(b.ma,b.ia,k)?1:d&&0!=e?0:0==c.ye(a,b)?0:1};c.nv=function(b,r,k,d,e,g){var h=0,m=b.fo(r.oa,r.ka,g,!1),n=b.fo(r.ma,r.ia,g,!1),q=r.fo(b.oa,b.ka,g,!1),z=r.fo(b.ma,b.ia,g,!1);isNaN(m)||(null!=d&&(d[h]=m),null!=e&&(e[h]=0),null!=k&&(k[h]=a.b.Pa(r.oa,r.ka)),h++);isNaN(n)||(null!=d&&(d[h]=n),null!=e&&(e[h]=1),null!=k&&(k[h]=a.b.Pa(r.ma,r.ia)),h++);2==h||isNaN(q)||0==m&&0==q||0==n&&1==q||(null!=d&&(d[h]=0),null!=e&&(e[h]=q),
null!=k&&(k[h]=a.b.Pa(b.oa,b.ka)),h++);2==h||isNaN(z)||1==m&&0==z||1==n&&1==z||(null!=d&&(d[h]=1),null!=e&&(e[h]=z),null!=k&&(k[h]=a.b.Pa(r.ma,r.ia)),h++);if(0<h)return 2==h&&null!=d&&d[0]>d[1]&&(b=d[0],d[0]=d[1],d[1]=b,null!=e&&(d=e[0],e[0]=e[1],e[1]=d),null!=k&&(e=a.b.Pa(k[0].x,k[0].y),k[0]=k[1],k[1]=e)),h;h=c.Jd(b,r,g);if(isNaN(h.x))return 0;null!=k&&(k[0]=b.Lb(h.x));null!=d&&(d[0]=h.x);null!=e&&(e[0]=h.y);return 1};c.prototype.TC=function(){return 0};c.prototype.co=function(){};c.prototype.toString=
function(){return"Line: ["+this.oa.toString()+", "+this.ka.toString()+", "+this.ma.toString()+", "+this.ia.toString()+"]"};return c}(a.fA);a.zb=b})(y||(y={}));(function(a){var b=function(){function a(){this.Gl=[];this.va=-1}a.prototype.za=function(){return this.va};a.prototype.next=function(){if(null!=this.Gl&&0!=this.Gl.length){this.va++;var a=this.Gl[0];1>=this.Gl.length?this.Gl=[]:this.Gl=this.Gl.slice(1);return a}return this.Gl=null};return a}();a.LT=b})(y||(y={}));(function(a){(function(a){a[a.enumFillRuleOddEven=
0]="enumFillRuleOddEven";a[a.enumFillRuleWinding=1]="enumFillRuleWinding"})(a.pI||(a.pI={}));var b=function(b){function c(f,l){b.call(this);this.Yf=!1;this.lp=null;this.Zo=this.$o=0;this.Uh=null;this.ng=!1;this.ud=this.li=this.Ge=this.rb=this.kb=null;this.ep=this.Ra=this.ap=0;if(void 0===l)this.Yf=f,this.ng=!1,this.ua=this.Zo=this.$o=this.ap=0,this.description=a.Pd.Tf();else{if(null==l)throw a.g.O();this.Yf=f;this.ng=!1;this.ua=this.Zo=this.$o=this.ap=0;this.description=l}this.Uh=null;this.Ra=0}I(c,
b);c.prototype.Im=function(){return 0<this.ap};c.prototype.mv=function(){this.rc();null==this.lp?this.lp=new a.Wa(this.description):this.lp.Qf(this.description)};c.prototype.Ty=function(b,c){var k=new a.b;k.x=b;k.y=c;this.Mr(k)};c.prototype.Mr=function(a){this.mv();this.lp.jc(a);this.ng=!0};c.prototype.ef=function(b){if(b.u())throw a.g.O();this.Ik(b.description);this.mv();b.copyTo(this.lp);this.ng=!0};c.prototype.hv=function(){var b=1;this.ng&&(this.mv(),null==this.kb?(this.kb=a.Bc.Dg(2),this.kb.write(0,
0),this.rb=a.Bc.so(2,0)):(this.kb.resize(this.kb.size+1,0),this.rb.resize(this.rb.size+1,0)),this.Yf&&this.rb.write(this.rb.size-2,1),b++);var c=this.ua;this.kb.write(this.kb.size-1,this.ua+b);this.io(c+b);this.rb.write(this.kb.size-1,0);this.ng&&(this.Hu(c,this.lp),this.ng=!1)};c.prototype.xj=function(a,b){this.hv();this.jc(this.ua-1,a,b)};c.prototype.Mm=function(a){this.hv();this.jc(this.ua-1,a)};c.prototype.lineTo=function(a){this.hv();this.Hu(this.ua-1,a)};c.prototype.qo=function(){var a;this.Ru();
void 0===a&&(this.ng=!1,a=this.fa()-1);var b=this.rb.read(a);this.rb.write(a,b|1);null!=this.Ge&&(a=this.Ec(a)-1,this.Ge.write(a,1),this.li.write(a,-1))};c.$i=function(a){return c.Jd[a]};c.prototype.wc=function(a){return 0!=(this.rb.read(a)&1)};c.prototype.Mo=function(a){if(this.wc(a))return!0;var b=this.Fa(a);a=this.Ec(a)-1;if(b>a)return!1;b=this.Ga(b);a=this.Ga(a);return b.vb(a)};c.prototype.xq=function(a){return 0!=(this.rb.read(a)&2)};c.prototype.Cc=function(b,c){this.Ik(b.description);if(b.F()==
a.j.Line){var k=new a.Wa;if(c||this.u())b.Fn(k),this.ef(k);b.Cn(k);this.lineTo(k)}else throw a.g.xa();};c.prototype.vs=function(a){var b=0==this.ua;this.Ty(a.w,a.D);this.xj(a.w,a.H);this.xj(a.C,a.H);this.xj(a.C,a.D);this.qo();this.ng=!1;b&&this.yf(256,!1)};c.prototype.Xc=function(b,c){if(!b.u()){for(var k=0==this.ua,l=new a.Wa(this.description),d=0;4>d;d++)b.uf(c?4-d-1:d,l),0==d?this.ef(l):this.lineTo(l);this.qo();this.ng=!1;k&&!c&&this.yf(256,!1)}};c.prototype.add=function(a,b){for(var c=0;c<a.fa();c++)this.$j(a,
c,!b)};c.prototype.$j=function(a,b,c){this.Cf(-1,a,b,c)};c.prototype.ko=function(){this.Rw()};c.prototype.xs=function(b,c,k,l,d){d||0!=this.fa()||(d=!0);0>c&&(c=b.fa()-1);if(c>=b.fa()||0>k||0>l||l>b.bt(c))throw a.g.sa("index out of bounds");if(0!=l){var e=b.wc(c)&&k+l==b.bt(c);if(!e||1!=l){this.ng=!1;this.Ik(b.description);k=b.Fa(c)+k+1;d&&(l++,k--);e&&l--;e=this.ua;this.io(this.ua+l);this.lc();if(d){if(0==l)return;this.kb.add(this.ua);d=b.rb.read(c);d&=-5;this.Yf&&(d|=1);this.rb.write(this.rb.size-
1,d);this.rb.add(0)}else this.kb.write(this.rb.size-1,this.ua);d=0;for(var g=this.description.Ba;d<g;d++){var h=this.description.Id(d),m=a.qa.Xa(h),n=b.description.zf(h);0>n||null==b.Ca[n]?this.Ca[d].ul(m*e,a.qa.ue(h),l*m,m*e):this.Ca[d].nk(m*e,b.Ca[n],m*k,l*m,!0,m,m*e)}if(this.Im())throw a.g.xa();if(b.xq(c))throw a.g.xa();this.de(1993)}}};c.prototype.Br=function(b){this.lc();var c=this.fa();0>b&&(b=c-1);if(b>=c)throw a.g.O();for(var k=this.Fa(b),l=this.Ia(b),d=0,e=this.description.Ba;d<e;d++)if(null!=
this.Ca[d]){var g=a.qa.Xa(this.description.Gd(d));this.Ca[d].oj(g*k,g*l,g*this.ua)}for(k=b+1;k<=c;k++)d=this.kb.read(k),this.kb.write(k-1,d-l);if(null==this.rb)for(k=b+1;k<=c;k++)b=this.rb.read(k),this.rb.write(k-1,b);this.kb.resize(c);this.rb.resize(c);this.ua-=l;this.rg-=l;this.de(1993)};c.prototype.Cf=function(b,c,k,l){if(c==this)throw a.g.O();if(k>=c.fa())throw a.g.O();var d=this.fa();if(b>d)throw a.g.O();0>b&&(b=d);0>k&&(k=c.fa()-1);this.ng=!1;this.Ik(c.description);c.lc();var e=c.Fa(k),g=c.Ia(k),
h=this.ua,m=c.wc(k)&&!l?1:0;this.io(this.ua+g);this.lc();for(var n=b<d?this.Fa(b):h,q=0,z=this.description.Ba;q<z;q++){var s=this.description.Gd(q),t=c.description.zf(s),u=a.qa.Xa(s);0<=t&&null!=c.Ca[t]?(0!=m&&this.Ca[q].nk(n*u,c.Ca[t],u*e,u,!0,u,u*h),this.Ca[q].nk((n+m)*u,c.Ca[t],u*(e+m),u*(g-m),l,u,u*(h+m))):this.Ca[q].ul(n*u,a.qa.ue(s),u*g,u*h)}this.kb.add(h+g);for(l=d;l>=b+1;l--)e=this.kb.read(l-1),this.kb.write(l,e+g);c.xq(k);this.rb.add(0);for(l=d-1;l>=b+1;l--)d=this.rb.read(l),d&=-5,this.rb.write(l+
1,d);d=c.UN().read(k);d&=-5;this.Yf&&(d|=1);this.rb.write(b,d)};c.prototype.Rw=function(){var b=-1,c=this.fa();if(b>c)throw a.g.O();0>b&&(b=c);this.ng=!1;this.lc();this.kb.add(this.ua);for(var k=c;k>=b+1;k--){var l=this.kb.read(k-1);this.kb.write(k,l+0)}this.rb.add(0);for(k=c-1;k>=b+1;k--)c=this.rb.read(k),c&=-5,this.rb.write(k+1,c);this.Yf&&this.rb.write(b,1)};c.prototype.dD=function(b,c,k){var l=-1;0>b&&(b=this.fa());if(b>this.fa()||l>this.Ia(b)||k>c.length)throw a.g.sa("index out of bounds");if(0!=
k){b==this.fa()&&(this.kb.add(this.ua),this.Yf?this.rb.add(1):this.rb.add(0));0>l&&(l=this.Ia(b));this.lc();var d=this.ua;this.io(this.ua+k);this.lc();for(var e=0,g=this.description.Ba;e<g;e++){var h=this.description.Gd(e),m=a.qa.Xa(h);this.Ca[e].km(m*(this.Fa(b)+l+k),(d-this.Fa(b)-l)*m,this.Ca[e],m*(this.Fa(b)+l),!0,m);0==e?this.Ca[e].Yp(m*(this.Fa(b)+l),k,c,0,!0):this.Ca[e].dh(a.qa.ue(h),(this.Fa(b)+l)*m,k*m)}this.Im()&&(this.Ge.km(this.Fa(b)+l+k,d-this.Fa(b)-l,this.Ge,this.Fa(b)+l,!0,1),this.li.km(this.Fa(b)+
l+k,d-this.Fa(b)-l,this.li,this.Fa(b)+l,!0,1),this.Ge.dh(1,this.Fa(b)+l,k),this.li.dh(-1,this.Fa(b)+l,k));b+=1;for(c=this.fa();b<=c;b++)this.kb.write(b,this.kb.read(b)+k)}};c.prototype.lf=function(b,c,k){var l=this.fa();0>b&&(b=this.fa());if(b>=l||c>this.Ia(b))throw a.g.sa("index out of bounds");b==this.fa()&&(this.kb.add(this.ua),this.Yf?this.rb.add(1):this.rb.add(0));0>c&&(c=this.Ia(b));var d=this.ua;this.io(this.ua+1);this.lc();var e=this.Fa(b);this.Ca[0].lg(2*(e+c),k,2*d);k=1;for(var g=this.description.Ba;k<
g;k++){var h=this.description.Gd(k),m=a.qa.Xa(h);this.Ca[k].ul(m*(e+c),a.qa.ue(h),m,m*d)}for(b+=1;b<=l;b++)this.kb.write(b,this.kb.read(b)+1)};c.prototype.eF=function(b,c){var k=this.fa();0>b&&(b=k-1);if(b>=k||c>=this.Ia(b))throw a.g.sa("index out of bounds");this.lc();var l=this.Fa(b);0>c&&(c=this.Ia(b)-1);for(var l=l+c,d=0,e=this.description.Ba;d<e;d++)if(null!=this.Ca[d]){var g=a.qa.Xa(this.description.Gd(d));this.Ca[d].oj(g*l,g,g*this.ua)}for(;k>=b+1;k--)l=this.kb.read(k),this.kb.write(k,l-1);
this.ua--;this.rg--;this.de(1993)};c.prototype.Rf=function(){return a.Hh.il(this,null)};c.prototype.Ka=function(){this.ap=0;this.ng=!1;this.ud=this.Ge=this.li=this.rb=this.kb=null;this.EA()};c.prototype.Pe=function(b){b instanceof a.Bg?this.ZA(b,-1):this.ZJ(b)};c.prototype.ZA=function(b,c){if(!this.u()&&!b.WO()){this.lc();var k=this.Ca[0],l=new a.b,d=new a.b,e,g,h;for(0>c?(e=this.Im(),g=0,h=this.ua):(e=this.xq(c),g=this.Fa(c),h=this.Ec(c));g<h;g++){l.x=k.read(2*g);l.y=k.read(2*g+1);if(e){var m=this.li.read(g);
if(0<=m)switch(this.Ge.read(g)&7){case 2:d.x=this.ud.read(m);d.y=this.ud.read(m+1);b.Zi(d,d);this.ud.write(m,d.x);this.ud.write(m+1,d.y);d.x=this.ud.read(m+3);d.y=this.ud.read(m+4);b.Zi(d,d);this.ud.write(m+3,d.x);this.ud.write(m+4,d.y);break;case 4:throw a.g.xa();}}b.Zi(l,l);k.write(2*g,l.x);k.write(2*g+1,l.y)}this.de(1993)}};c.prototype.ZJ=function(b){if(!this.u()){this.Oe(1);this.lc();for(var c=this.Ca[0],k=this.Ca[1],l=new a.fe,d=new a.fe,e=this.Im(),g=0;g<this.ua;g++){l.x=c.read(2*g);l.y=c.read(2*
g+1);l.z=k.read(g);if(e){var h=this.li.read(g);if(0<=h)switch(this.Ge.read(g)&7){case 2:d.x=this.ud.read(h);d.y=this.ud.read(h+1);d.z=this.ud.read(h+2);d=b.Rn(d);this.ud.write(h,d.x);this.ud.write(h+1,d.y);this.ud.write(h+1,d.z);d.x=this.ud.read(h+3);d.y=this.ud.read(h+4);d.z=this.ud.read(h+5);d=b.Rn(d);this.ud.write(h+3,d.x);this.ud.write(h+4,d.y);this.ud.write(h+5,d.z);break;case 4:throw a.g.xa();}}l=b.Rn(l);c.write(2*g,l.x);c.write(2*g+1,l.y);k.write(g,l.z)}this.de(1993)}};c.prototype.wv=function(){null==
this.kb&&(this.kb=a.Bc.Dg(1,0),this.rb=a.Bc.so(1,0));null!=this.Ge&&(this.Ge.resize(this.rg,1),this.li.resize(this.rg,-1))};c.prototype.co=function(b){b.ng=!1;b.ap=this.ap;b.ep=this.ep;null!=this.kb?b.kb=a.ha.lj(this.kb):b.kb=null;null!=this.rb?b.rb=a.Wk.lj(this.rb):b.rb=null;null!=this.li?b.li=a.ha.lj(this.li):b.li=null;null!=this.Ge?b.Ge=a.Wk.lj(this.Ge):b.Ge=null;null!=this.ud?b.ud=a.rd.lj(this.ud):b.ud=null;b.$o=this.$o;b.Zo=this.Zo;this.gj(1024)?b.Uh=null:b.Uh=this.Uh};c.prototype.ac=function(){if(!this.gj(512))return this.$o;
for(var b=this.Da(),c=new a.$u(0);b.lb();)for(;b.Ma();)c.add(b.ja().ac());this.$o=c.rl();this.yf(512,!1);return c.rl()};c.prototype.mc=function(a){if(a==this)return!0;if(!(a instanceof c&&b.prototype.mc.call(this,a)))return!1;var d=this.fa();return d!=a.fa()||null!=this.kb&&!this.kb.mc(a.kb,0,d+1)||this.ep!=a.ep||null!=this.rb&&!this.rb.mc(a.rb,0,d)?!1:b.prototype.mc.call(this,a)};c.prototype.Da=function(){return new a.FI(this)};c.prototype.vv=function(a){b.prototype.vv.call(this,a);if(this.Im())for(a=
this.Da();a.lb();)for(;a.Ma();)break};c.prototype.um=function(a,c){b.prototype.um.call(this,a,c);if(this.Im())for(var k=this.Da();k.lb();)for(;k.Ma();)break};c.prototype.pv=function(){null==this.kb||0==this.kb.size?this.ua=0:this.ua=this.kb.read(this.kb.size-1)};c.prototype.Mh=function(){if(!this.Yf)return 0;this.ss();return this.Zo};c.prototype.pt=function(a){if(!this.Yf)return!1;if(!this.gj(8))return 0!=(this.rb.read(a)&4);this.ss();return 0<this.Uh.read(a)};c.prototype.no=function(a){if(!this.Yf)return 0;
this.ss();return this.Uh.read(a)};c.prototype.ss=function(){if(this.gj(1024)){var b=this.fa();null==this.Uh?this.Uh=new a.rd(b):this.Uh.size!=b&&this.Uh.resize(b);for(var b=new a.$u(0),c=new a.$u(0),k=new a.b,l=0,d=this.Da();d.lb();){c.reset();for(this.A(this.Fa(d.Ra),k);d.Ma();)c.add(d.ja().jv(k.x,k.y));b.add(c.rl());var e=l++;this.Uh.write(e,c.rl())}this.Zo=b.rl();this.yf(1024,!1)}};c.prototype.hl=function(){if(this.gj(8)){this.ss();var b=this.fa();if(null==this.rb||this.rb.size<b)this.rb=a.Bc.so(b+
1);for(var c=1,k=0;k<b;k++){var l=this.Uh.read(k);0==k&&(c=0<l?1:-1);0<l*c?this.rb.wy(k,4):this.rb.BB(k,4)}this.yf(8,!1)}};c.prototype.Dw=function(b){var c=this.Ra,k=this.fa();if(0<=c&&c<k){if(b<this.Ec(c)){if(b>=this.Fa(c))return c;c--}else c++;if(0<=c&&c<k&&b>=this.Fa(c)&&b<this.Ec(c))return this.Ra=c}if(5>k){for(c=0;c<k;c++)if(b<this.Ec(c))return this.Ra=c;throw a.g.sa("corrupted geometry");}c=0;for(k-=1;k>c;){var l=c+(k-c>>1),d=this.Fa(l);if(b<d)k=l-1;else if(c=this.Ec(l),b>=c)c=l+1;else return this.Ra=
l}return this.Ra=c};c.prototype.GN=function(b){var c=this.oc(0);this.VN();var k=this.Ec(b),l=this.Fa(b);b=-1;var d=new a.b,e=new a.b;d.y=-Infinity;d.x=-Infinity;for(l+=0;l<k;l++)c.fc(2*l,e),-1==d.compare(e)&&(b=l,d.K(e));return b};c.prototype.Hw=function(){var a=this.G();if(!this.Yf)for(var a=a-this.fa(),b=0,c=this.fa();b<c;b++)this.wc(b)&&a++;return a};c.prototype.bt=function(a){var b=this.Ia(a);this.wc(a)||b--;return b};c.prototype.Qa=function(){return new c(this.Yf,this.description)};c.prototype.gb=
function(){return this.Yf?2:1};c.prototype.F=function(){return this.Yf?a.j.Polygon:a.j.Polyline};c.prototype.VN=function(){this.Ru()};c.prototype.OF=function(a){this.kb=a;this.de(16777215)};c.prototype.UN=function(){this.Ru();return this.rb};c.prototype.NF=function(a){this.rb=a;this.de(16777215)};c.prototype.fa=function(){return null!=this.kb?this.kb.size-1:0};c.prototype.Ec=function(a){return this.kb.read(a+1)};c.prototype.Ia=function(a){return this.kb.read(a+1)-this.kb.read(a)};c.prototype.Fa=function(a){return this.kb.read(a)};
c.prototype.iv=function(b,c){null==this.qb&&(this.qb=new a.Xj);var k=a.dA.iR(c),l=this.qb.hi;if(null!=l)if(l.Rx<b||k>l.bO())this.qb.tv(null);else return!0;l=a.dA.create(this,b,k);this.qb.tv(l);return!0};c.prototype.ic=function(){var a=b.prototype.ic.call(this);if(!this.tc()){var c=this.fa();null!=this.kb&&this.kb.jj(a,0,c+1);null!=this.rb&&this.rb.jj(a,0,c)}return a};c.prototype.NC=function(a){return null!=this.Ge?this.Ge.read(a):1};c.prototype.dc=function(b,c,k){var l=this.Dw(b);if(b==this.Ec(l)-
1&&!this.wc(l))throw a.g.sa("index out of bounds");this.lc();var d=this.Ge,e=1;null!=d&&(e=d.read(b)&7);switch(e){case 1:c.kq();break;case 2:throw a.g.xa();case 4:throw a.g.xa();default:throw a.g.xa();}c=c.get();k?c.Qf(a.Pd.Tf()):c.Qf(this.description);l=b==this.Ec(l)-1&&this.wc(l)?this.Fa(l):b+1;d=new a.b;this.A(b,d);c.fd(d);this.A(l,d);c.wd(d);if(!k){k=1;for(d=this.description.Ba;k<d;k++)for(var e=this.description.Gd(k),g=a.qa.Xa(e),h=0;h<g;h++){var m=this.md(e,b,h);c.Ly(e,h,m);m=this.md(e,l,h);
c.By(e,h,m)}}};c.prototype.Ti=function(b,c){if(b>=this.fa())throw a.g.O();if(this.u())c.Ka();else{if(this.xq(b))throw a.g.sa("not implemented");var k=this.oc(0),l=new a.b,d=new a.i;d.Ka();for(var e=this.Fa(b),g=this.Ec(b);e<g;e++)k.fc(2*e,l),d.Eb(l);c.L(d)}};c.prototype.gR=function(b,c){if(b>=this.fa())throw a.g.O();if(this.u())c.Ka();else{if(this.xq(b))throw a.g.sa("not implemented");var k=this.oc(0),l=new a.b,d=new a.i;d.Ka();for(var e=this.Fa(b),g=this.Ec(b);e<g;e++)k.fc(2*e,l),d.Eb(l);c.L(d)}};
c.prototype.dj=function(b){null==this.qb&&(this.qb=new a.Xj);if(0==b||16>this.G())return!1;b=a.Ja.nB(this);this.qb.GA(b);return!0};c.prototype.iJ=function(){null==this.qb&&(this.qb=new a.Xj);if(null!=this.qb.on)return!0;this.qb.HA(null);var b=a.Ja.BK(this);this.qb.HA(b);return!0};c.prototype.Np=function(a){this.ep=a};c.prototype.Dm=function(){return this.ep};c.Jd=[0,0,6,0,8,0];return c}(a.Vr);a.al=b})(y||(y={}));(function(a){var b=function(b){function c(f){b.call(this);if(void 0!==f){if(null==f)throw a.g.O();
this.description=f}else this.description=a.Pd.Tf();this.ua=0}I(c,b);c.prototype.Qa=function(){return new c(this.description)};c.prototype.add=function(a){this.resize(this.ua+1);this.bh(this.ua-1,a)};c.prototype.ys=function(b,c){this.resize(this.ua+1);var k=new a.b;k.na(b,c);this.jc(this.ua-1,k)};c.prototype.Qd=function(b,c,k){k=0>k?b.G():k;if(0>c||c>b.G()||k<c)throw a.g.O();if(c!=k){this.Ik(b.description);k-=c;var l=this.ua;this.resize(this.ua+k);this.lc();for(var d=0,e=b.description.Ba;d<e;d++){var g=
b.description.Gd(d),h=a.qa.Xa(g),m=this.oc(g),g=b.oc(g);m.nk(l*h,g,c*h,k*h,!0,1,l*h)}}};c.prototype.eF=function(b){if(0>b||b>=this.G())throw a.g.sa("index out of bounds");this.lc();for(var c=0,k=this.description.Ba;c<k;c++)if(null!=this.Ca[c]){var l=a.qa.Xa(this.description.Gd(c));this.Ca[c].oj(l*b,l,l*this.ua)}this.ua--;this.rg--;this.de(1993)};c.prototype.resize=function(a){this.io(a)};c.prototype.co=function(){};c.prototype.Ka=function(){b.prototype.EA.call(this)};c.prototype.Pe=function(b){if(b instanceof
a.Bg){if(!this.u()){this.lc();for(var c=this.Ca[0],k=new a.b,l=0;l<this.ua;l++)k.x=c.read(2*l),k.y=c.read(2*l+1),b.Zi(k,k),c.write(2*l,k.x),c.write(2*l+1,k.y);this.de(1993)}}else if(!this.u()){this.lc();this.Oe(1);this.lc();for(var c=this.Ca[0],k=this.Ca[1],d=new a.fe,l=0;l<this.ua;l++){d.x=c.read(2*l);d.y=c.read(2*l+1);d.z=k.read(l);var e=b.Rn(d);c.write(2*l,e.x);c.write(2*l+1,e.y);k.write(l,e.z)}this.de(1993)}};c.prototype.gb=function(){return 0};c.prototype.F=function(){return a.j.MultiPoint};
c.prototype.Mh=function(){return 0};c.prototype.ac=function(){return 0};c.prototype.mc=function(a){return a==this?!0:a instanceof c?b.prototype.mc.call(this,a):!1};c.prototype.eR=function(b,c){var k=this.ua,k=Math.min(k,c+1E3);if(0>c||c>=this.ua||k<c||1E3!=b.length)throw a.g.O();var l=this.oc(0),d=k-c,e=[];l.Fp(2*c,2*d,e,0,!0);for(l=0;l<d;l++)b[l]=a.b.Pa(e[2*l],e[2*l+1]);return k};c.prototype.pv=function(){};c.prototype.wv=function(){};c.prototype.iv=function(){return!1};c.prototype.dj=function(){return!1};
c.prototype.Rf=function(){return null};return c}(a.Vr);a.pe=b})(y||(y={}));(function(a){(function(a){a[a.NotDetermined=0]="NotDetermined";a[a.Structure=1]="Structure";a[a.DegenerateSegments=2]="DegenerateSegments";a[a.Clustering=3]="Clustering";a[a.Cracking=4]="Cracking";a[a.CrossOver=5]="CrossOver";a[a.RingOrientation=6]="RingOrientation";a[a.RingOrder=7]="RingOrder";a[a.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency";a[a.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency";a[a.OGCDisconnectedInterior=
10]="OGCDisconnectedInterior"})(a.MH||(a.MH={}));var b=function(){function a(b,f,c){void 0===b?(this.yh=0,this.Gk=this.Fk=-1):(this.yh=b,this.Fk=f,this.Gk=c)}a.prototype.Zp=function(a){this.yh=a.yh;this.Fk=a.Fk;this.Gk=a.Gk};return a}();a.xd=b})(y||(y={}));(function(a){var b=function(){function b(){}b.VT=function(b){if(!1===b)throw a.g.PG();};b.bG=function(a){return isNaN(a)?NaN:0===a?a:0<a?1:-1};b.Lh=function(a,b){void 0===b&&(b=0);for(var c=[],k=0;k<a;k++)c[k]=b;return c};b.Os=function(a,b){var c,
k;void 0===c&&(c=0);for(void 0===k&&(k=a.length-1);c<=k;c++)a[c]=b};b.Jr=function(a,b,c){return a<b?b:a>c?c:a};b.lU=function(){return 4};b.kg=function(a,b){var c=5381;void 0!==b?c=(b<<5)+b+(a&255):c=(c<<5)+c+(a&255);c=(c<<5)+c+(a>>8&255);c=(c<<5)+c+(a>>16&255);return(c<<5)+c+(a>>24&255)&2147483647};b.Rh=function(){throw Error("Not Implemented");};b.hU=function(){return-Infinity};b.jU=function(){return Infinity};b.aU=function(){return 2147483647};b.PT=function(){return 2.220446049250313E-16};b.RT=
function(){return 1.7976931348623157E308};b.Zx=function(a){return b.IH(a)+12345&2147483647};b.FD=function(a){var f,c=a%b.fv|0,k=a/b.fv|0;if(0===(f=32))return a;32>f?(a=c>>>f|k<<32-f,f=k>>f):(a=k>>f-32,f=0<=k?0:-1);return f*b.fv+(a>>>0)};b.IH=function(a){a|=0;return(1103495168*a|0)+(20077*a|0)|0};b.truncate=function(a){return 0>a?-1*Math.floor(Math.abs(a)):Math.floor(a)};b.aH=Math.pow(2,53)-1;b.TT=-b.aH;b.pF=65536;b.yU=16777216;b.fv=b.pF*b.pF;return b}();a.J=b})(y||(y={}));(function(a){(function(a){a[a.Project=
0]="Project";a[a.Union=1]="Union";a[a.Difference=2]="Difference";a[a.Proximity2D=3]="Proximity2D";a[a.Relate=4]="Relate";a[a.Equals=5]="Equals";a[a.Disjoint=6]="Disjoint";a[a.Intersects=7]="Intersects";a[a.Within=8]="Within";a[a.Contains=9]="Contains";a[a.Crosses=10]="Crosses";a[a.Touches=11]="Touches";a[a.Overlaps=12]="Overlaps";a[a.Buffer=13]="Buffer";a[a.Distance=14]="Distance";a[a.Intersection=15]="Intersection";a[a.Clip=16]="Clip";a[a.Cut=17]="Cut";a[a.DensifyByLength=18]="DensifyByLength";a[a.DensifyByAngle=
19]="DensifyByAngle";a[a.LabelPoint=20]="LabelPoint";a[a.GeodesicBuffer=21]="GeodesicBuffer";a[a.GeodeticDensifyByLength=22]="GeodeticDensifyByLength";a[a.ShapePreservingDensify=23]="ShapePreservingDensify";a[a.GeodeticLength=24]="GeodeticLength";a[a.GeodeticArea=25]="GeodeticArea";a[a.Simplify=26]="Simplify";a[a.SimplifyOGC=27]="SimplifyOGC";a[a.Offset=28]="Offset";a[a.Generalize=29]="Generalize";a[a.SymmetricDifference=30]="SymmetricDifference";a[a.ConvexHull=31]="ConvexHull";a[a.Boundary=32]="Boundary";
a[a.SimpleRelation=33]="SimpleRelation"})(a.hI||(a.hI={}));var b=function(){function b(){}b.prototype.F=function(){return null};b.MT=function(b){a.U.Th(b.F())&&(b=b.qb,null!=b&&(b.tv(null),b.GA(null)))};return b}();a.Ne=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 13};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k,l,d){return b instanceof a.U?(d=new a.Qc(b),this.aa(d,c,[k],!1,l).next()):
!0===l?(k=new a.Pz(b,c,k,!1,d),a.wi.local().aa(k,c,d)):new a.Pz(b,c,k,!1,d)};c.W=null;return c}(a.Ne);a.Oz=b})(y||(y={}));(function(a){var b=function(){function b(c,f,d,k,e){this.va=-1;this.oe=c;this.ex=f;this.Nq=d;this.AP=new a.i;this.AP.Ka();this.Wm=-1;this.Zb=e}b.prototype.next=function(){for(var a;null!=(a=this.oe.next());)return this.va=this.oe.za(),this.Wm+1<this.Nq.length&&this.Wm++,this.buffer(a,this.Nq[this.Wm]);return null};b.prototype.za=function(){return this.va};b.prototype.buffer=function(b,
f){return a.UG.buffer(b,f,this.ex,NaN,96,this.Zb)};return b}();a.Pz=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 16};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k,l){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,k,l).next()):new a.SH(b,c,k,l)};c.W=null;return c}(a.Ne);a.RH=b})(y||(y={}));(function(a){var b=function(){function b(c,f,d){this.va=-1;if(null==c)throw a.g.O();this.S=
f;this.wk=c;this.la=a.Ja.Ad(d,f,!1)}b.prototype.next=function(){var b;return null!=(b=this.wk.next())?(this.va=this.wk.za(),a.Fd.clip(b,this.S,this.la,0)):null};b.prototype.za=function(){return this.va};return b}();a.SH=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 31};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k){return b instanceof a.U?a.Rz.qB(b):new a.Rz(c,b,k)};c.W=null;return c}(a.Ne);
a.Qz=b})(y||(y={}));(function(a){var b=function(){function b(c,f,d){this.cE=new a.Sr;this.va=-1;if(null==f)throw a.g.O();this.yP=c;this.Fc=!1;this.wk=f;this.Zb=d}b.prototype.next=function(){if(this.yP){if(!this.Fc){var a=this.FK(this.wk);this.Fc=!0;return a}return null}if(!this.Fc){a=this.wk.next();if(null!=a)return this.va=this.wk.za(),b.qB(a);this.Fc=!0}return null};b.prototype.za=function(){return this.va};b.prototype.FK=function(a){for(var b;null!=(b=a.next());)this.cE.Fb(b);return this.cE.rN()};
b.qB=function(c){if(b.Gh(c))return c;var f=c.F();if(a.al.Mc(f))return f=new a.Ya(c.description),f.Cc(c,!0),f;if(f==a.j.MultiPoint&&2==c.G()){var d=new a.Wa,f=new a.Ya(c.description);c.Td(0,d);f.ef(d);c.Td(1,d);f.lineTo(d);return f}return a.Sr.vL(c)};b.Gh=function(b){if(b.u())return!0;var f=b.F();return f==a.j.Point||f==a.j.Envelope?!0:a.al.Mc(f)?!1:f==a.j.MultiPoint?1==b.G()?!0:!1:f==a.j.Polyline?1==b.fa()&&2>=b.G()?!0:!1:1!=b.fa()?!1:2>=b.G()?!0:a.Sr.sD(b,0)};return b}();a.Rz=b})(y||(y={}));(function(a){var b=
function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 17};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k,l,d){return new a.UH(b,c,k,l,d)};c.W=null;return c}(a.Ne);a.TH=b})(y||(y={}));(function(a){var b=function(){function b(c,f,d,k,e){this.Ef=null;if(null==f||null==d)throw a.g.sa("invalid argument");this.wP=c;this.qx=f;this.RD=d;c=a.Ja.Zs(f,d);this.la=a.Ja.Ad(k,c,!0);this.QD=-1;this.Ee=e}b.prototype.za=function(){return 0};b.prototype.next=
function(){this.fN();return++this.QD<this.Ef.length?this.Ef[this.QD]:null};b.prototype.fN=function(){if(null==this.Ef)switch(this.Ef=[],this.qx.F()){case a.j.Polyline:this.hN();break;case a.j.Polygon:this.gN()}};b.prototype.hN=function(){var b=new a.Ya,f=new a.Ya,c=new a.Ya;this.Ef.push(b);this.Ef.push(f);var k=[];a.$G.YG(this.wP,this.qx,this.RD,this.la,k,this.Ee);for(var d=0;d<k.length;d++){var e=k[d];0==e.bu?b.add(e.V,!1):1==e.bu||2==e.bu?f.add(e.V,!1):3==e.bu?this.Ef.push(e.V):c.add(e.V,!1)}c.u()||
b.u()&&f.u()&&!(3<=this.Ef.length)||this.Ef.push(c);b.u()&&f.u()&&3>this.Ef.length&&(this.Ef.length=0)};b.prototype.gN=function(){var b=new a.ha(0),f=new a.gd,c=f.RB(),k=f.Fb(this.qx),d=f.Fb(this.RD),e=new a.Of;try{e.Lp(f,this.la,this.Ee);e.ym(c,k,d,b);var g=f.jf(k),h=new a.La,m=new a.La;this.Ef.length=0;this.Ef.push(h);this.Ef.push(m);for(k=0;k<b.size;k++){var n,q=new a.gd,s=q.Fb(g),z=q.Fb(f.jf(b.get(k)));e.Kp(q,this.Ee);var t=e.lt(s,z);n=q.jf(t);if(!n.u()){var u=f.yC(b.get(k),c);2==u?h.add(n,!1):
1==u?m.add(n,!1):this.Ef.push(n);var w=new a.gd,s=w.Fb(g),z=w.Fb(f.jf(b.get(k)));e.Kp(w,this.Ee);g=w.jf(e.ll(s,z))}}!g.u()&&0<b.size&&this.Ef.push(g);h.u()&&m.u()&&(this.Ef.length=0)}finally{e.xg()}};return b}();a.UH=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 18};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k){if(b instanceof a.U)return b=new a.Qc(b),this.aa(b,c,k).next();if(0>=c)throw a.g.O();
return new a.WH(b,c,k)};c.W=null;return c}(a.Ne);a.VH=b})(y||(y={}));(function(a){var b=function(){function b(a,f){this.va=-1;this.oe=a;this.Zq=f}b.prototype.za=function(){return this.va};b.prototype.next=function(){var a;return null!=(a=this.oe.next())?(this.va=this.oe.za(),this.gM(a)):null};b.prototype.gM=function(b){if(b.u()||1>b.gb())return b;var f=b.F();if(f==a.j.Polygon||a.j.Polyline==f)return this.Wv(b);if(a.U.Mc(f))return this.iM(b);if(f==a.j.Envelope)return this.hM(b);throw a.g.xa();};b.prototype.iM=
function(b){if(b.ac()<=this.Zq)return b;var f=new a.Ya(b.description);f.Cc(b,!0);return this.Wv(f)};b.prototype.hM=function(b){var f=new a.La(b.description);f.Xc(b,!1);var c=new a.i;b.s(c);b=c.ca();return c.ba()<=this.Zq&&b<=this.Zq?f:this.Wv(f)};b.prototype.Wv=function(b){for(var f=b.Qa(),c=b.Da();c.lb();)for(var k=!0;c.Ma();){var d=c.ja();if(d.F()!=a.j.Line)throw a.g.sa("not implemented");var e=c.lD(),g=d.ac();if(g>this.Zq){var h=Math.ceil(g/this.Zq),g=new a.Wa(b.description);k&&(d.Fn(g),f.ef(g));
for(var m=k=1/h,n=0,h=h-1;n<h;n++)d.tu(m,g),f.lineTo(g),m+=k;e?f.qo():(d.Cn(g),f.lineTo(g))}else e?f.qo():f.Cc(d,k);k=!1}return f};return b}();a.WH=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.F=function(){return 2};c.prototype.aa=function(b,c,k,l){return b instanceof a.U?(b=new a.Qc(b),c=new a.Qc(c),this.aa(b,c,k,l).next()):new a.XH(b,c,k,l)};c.ll=function(b,d,k,e){if(b.u()||d.u())return b;
var g=b.gb(),h=d.gb();if(g>h)return b;var m=b.F(),n=d.F(),q=new a.i,s=new a.i,t=new a.i;b.s(q);d.s(s);t.L(q);t.Eb(s);var t=a.Ja.Ad(k,t,!1),z=1.00001*t*Math.sqrt(2),u=new a.i;u.L(q);u.R(z,z);if(!u.kc(s))return b;if(1==g&&2==h)return c.TI(b,d,n,k,e);if(m==a.j.Point)switch(a.al.Mc(n)?(k=new a.Ya(d.description),k.Cc(d,!0)):k=d,n){case a.j.Polygon:return c.jP(b,k,t);case a.j.Polyline:return c.mP(b,k,t);case a.j.MultiPoint:return c.cN(b,k,t);case a.j.Envelope:return c.EM(b,k,t);case a.j.Point:return c.qO(b,
k,t);default:throw a.g.O();}else if(m==a.j.MultiPoint)switch(n){case a.j.Polygon:return c.YI(b,d,t);case a.j.Envelope:return c.SI(b,d,t);case a.j.Point:return c.VI(b,d,t)}return a.Of.ll(b,d,k,e)};c.jP=function(b,c,k){return 0==a.hd.uD(c,b,k)?b:b.Qa()};c.mP=function(b,c,k){var l=b.A();c=c.Da();for(var d=1.00001*k*Math.sqrt(2),e=d*d,g=new a.i;c.lb();)for(;c.Ma();){var h=c.ja();h.s(g);g.R(d,d);if(g.contains(l)){if(h.Dq(l,k))return b.Qa();var m=h.Nb();if(a.b.$b(l,m)<=e)return b.Qa();m=h.pc();if(a.b.$b(l,
m)<=e)return b.Qa()}}return b};c.cN=function(b,c,k){var l=c.oc(0);c=c.G();var d=b.A(),e=new a.b;k=1.00001*k*Math.sqrt(2);k*=k;for(var g=0;g<c;g++)if(l.fc(2*g,e),a.b.$b(e,d)<=k)return b.Qa();return b};c.EM=function(b,c,k){var l=new a.i;c.s(l);l.R(k,k);c=b.A();return l.contains(c)?b.Qa():b};c.qO=function(b,c,k){k=1.00001*k*Math.sqrt(2);k*=k;var l=b.A();c=c.A();return a.b.$b(l,c)<=k?b.Qa():b};c.YI=function(b,c,k){var l=new a.i;c.s(l);l.R(k,k);for(var d=b.G(),e=!1,g=[],h=0;h<d;h++)g[h]=!1;for(var m=new a.b,
h=0;h<d;h++)b.A(h,m),l.contains(m)&&0!=a.hd.ie(c,m,k)&&(e=!0,g[h]=!0);if(!e)return b;c=b.Qa();for(h=0;h<d;h++)g[h]||c.Qd(b,h,h+1);return c};c.SI=function(b,c,k){var l=new a.i;c.s(l);l.R(k,k);c=b.G();var d=!1;k=[];for(var e=0;e<c;e++)k[e]=!1;for(var g=new a.b,e=0;e<c;e++)b.A(e,g),l.contains(g)&&(d=!0,k[e]=!0);if(!d)return b;l=b.Qa();for(e=0;e<c;e++)k[e]||l.Qd(b,e,e+1);return l};c.VI=function(b,c,k){var l=b.oc(0),d=b.G(),e=c.A(),g=new a.b,h=!1;c=[];for(var m=0;m<d;m++)c[m]=!1;m=1.00001*k*Math.sqrt(2);
k=m*m;for(m=0;m<d;m++)l.fc(2*m,g),a.b.$b(g,e)<=k&&(h=!0,c[m]=!0);if(!h)return b;l=b.Qa();for(m=0;m<d;m++)c[m]||l.Qd(b,m,m+1);return l};c.TI=function(b,c,k,l,d){var e=new a.Wj;b.Dp(e);var g=new a.i;c.s(g);e.Eb(g);e.R(0.1*e.ba(),0.1*e.ca());g=new a.La;g.Xc(e,!1);k==a.j.Polygon?g.add(c,!0):g.Xc(c,!0);return a.Zr.local().aa(b,g,l,d)};c.W=null;return c}(a.Ne);a.Yr=b})(y||(y={}));(function(a){var b=function(){function b(a,f,c,k){this.Eq=null==f;this.va=-1;this.oe=a;this.ex=c;this.DP=f.next();this.Zb=k}
b.prototype.next=function(){if(this.Eq)return null;var b;return null!=(b=this.oe.next())?(this.va=this.oe.za(),a.Yr.ll(b,this.DP,this.ex,this.Zb)):null};b.prototype.za=function(){return this.va};return b}();a.XH=b})(y||(y={}));(function(a){var b=function(){function b(f){this.Ee=f;this.Ii=new a.i;this.Ii.Ka();this.Ng=new a.i;this.Ng.Ka()}b.prototype.Or=function(){var a;a=this.Ii.w;this.Ii.w=this.Ng.w;this.Ng.w=a;a=this.Ii.C;this.Ii.C=this.Ng.C;this.Ng.C=a;a=this.Ii.D;this.Ii.D=this.Ng.D;this.Ng.D=
a;a=this.Ii.H;this.Ii.H=this.Ng.H;this.Ng.H=a};b.prototype.vM=function(b,c){var k=!this.Ii.kc(this.Ng);if(a.U.Lc(b.F())&&a.U.Lc(c.F())){if(b.G()>c.G())return this.gB(b,c,k);this.Or();k=this.gB(c,b,k);this.Or();return k}if(b.F()==a.j.MultiPoint&&a.U.Lc(c.F()))return k=this.hB(c,b,k),this.Or(),k;if(c.F()==a.j.MultiPoint&&a.U.Lc(b.F()))return this.hB(b,c,k);if(b.F()==a.j.MultiPoint&&c.F()==a.j.MultiPoint){if(b.G()>c.G())return this.iB(b,c);this.Or();k=this.iB(c,b);this.Or();return k}return 0};b.prototype.gB=
function(b,c,k){var l=b.Da(),d=c.Da(),e=new a.i,g=new a.i,h=1.7976931348623157E308;if(!k&&this.hT(b,c,l,d))return 0;for(;l.lb();)for(;l.Ma();)if(b=l.ja(),b.s(e),!(e.Nu(this.Ng)>h)){for(;d.lb();)for(;d.Ma();)if(c=d.ja(),c.s(g),e.Nu(g)<h&&(c=b.Gb(c,k),c*=c,c<h)){if(0==c)return 0;h=c}d.Lk()}return Math.sqrt(h)};b.prototype.hB=function(b,c,k){var l=b.Da(),d=new a.i,e=1.7976931348623157E308,g=new a.b,h=-1,m=c.G();for(k=!k&&b.F()==a.j.Polygon;l.lb();)for(;l.Ma();){var n=l.ja();n.s(d);if(!(1<m&&d.Nu(this.Ng)>
e)){for(var q=0;q<m;q++){c.A(q,g);if(k&&0!=a.hd.ie(b,g,0))return 0;h=n.Hd(g,!1);g.sub(n.Lb(h));h=g.Sp();if(h<e){if(0==h)return 0;e=h}}k=!1}}return Math.sqrt(e)};b.prototype.iB=function(b,c){for(var k=1.7976931348623157E308,l=new a.b,d=new a.b,e=k,g=b.G(),h=c.G(),m=0;m<g;m++)if(b.A(m,l),!(1<h&&this.Ng.gG(l)>k))for(var n=0;n<h;n++)if(c.A(n,d),e=a.b.$b(l,d),e<k){if(0==e)return 0;k=e}return Math.sqrt(k)};b.prototype.hT=function(b,c,k,l){if(b.F()==a.j.Polygon){for(;l.lb();)if(l.Ma()){var d=l.ja();if(0!=
a.hd.ie(b,d.pc(),0))return!0}l.Lk()}if(c.F()==a.j.Polygon){for(;k.lb();)if(k.Ma()&&(b=k.ja(),0!=a.hd.ie(c,b.pc(),0)))return!0;k.Lk()}return!1};b.prototype.il=function(a,b){if(a.u()||b.u())return NaN;a.s(this.Ii);b.s(this.Ng);return this.vM(a,b)};return b}(),c=function(c){function f(){c.apply(this,arguments)}I(f,c);f.prototype.aa=function(f,c,l){if(null==f||null==c)throw a.g.O();if(f.u()||c.u())return NaN;var d,e;d=f.F();e=c.F();if(d==a.j.Point){if(e==a.j.Point)return a.b.Gb(f.A(),c.A());if(e==a.j.Envelope)return l=
new a.i,c.s(l),l.Gb(f.A());d=new a.pe;d.add(f);f=d}else if(d==a.j.Envelope){if(e==a.j.Envelope)return e=new a.i,f.s(e),l=new a.i,c.s(l),l.Gb(e);d=new a.La;d.Xc(f,!1);f=d}e==a.j.Point?(e=new a.pe,e.add(c),c=e):e==a.j.Envelope&&(e=new a.La,e.Xc(c,!1),c=e);return(new b(l)).il(f,c)};f.local=function(){null===f.W&&(f.W=new f);return f.W};f.prototype.F=function(){return 14};f.W=null;return f}(a.Ne);a.YH=c})(y||(y={}));(function(a){var b=function(){function b(a,f,c,k){this.aE=a;this.fE=f;this.Ee=k;this.HD=
c}b.prototype.next=function(){var a=this.aE.next();return null==a?null:this.xz(a)};b.prototype.za=function(){return this.aE.za()};b.prototype.xz=function(b){var f=b.F();if(a.U.Lm(f))return b;if(f==a.j.Envelope)return f=new a.La(b.description),f.Xc(b,!1),this.xz(f);if(b.u())return b;if(null==b)throw a.g.xa();for(var f=b.Qa(),c=new a.zb,k=0,d=b.fa();k<d;k++)this.mH(b,k,f,c);return f};b.prototype.mH=function(b,f,c,k){if(!(2>b.Ia(f))){var d=b.Fa(f),e=b.Ec(f)-1,g=b.oc(0),h=b.wc(f),m=new a.ha(0);m.yb(b.Ia(f)+
1);var n=new a.ha(0);n.yb(b.Ia(f)+1);m.add(h?d:e);m.add(d);for(d=new a.b;1<m.size;){var q=m.uc();m.bf();var s=m.uc();b.A(q,d);k.fd(d);b.A(s,d);k.wd(d);s=this.jH(k,d,g,q,s,e);0<=s?(m.add(s),m.add(q)):n.add(q)}h||n.add(m.get(0));if(n.size==m.size)c.$j(b,f,!0);else if(2<=n.size&&(!this.HD||2!=n.size||!(h||a.b.Gb(b.Ga(n.get(0)),b.Ga(n.get(1)))<=this.fE))){f=new a.Wa;k=0;for(e=n.size;k<e;k++)b.Td(n.get(k),f),0==k?c.ef(f):c.lineTo(f);h&&(this.HD||2!=n.size||c.lineTo(f),c.qo())}}};b.prototype.jH=function(a,
b,c,k,d,e){var g=d-1;d<=k&&(g=e);e=d=-1;for(k+=1;k<=g;k++){c.fc(2*k,b);var v=b.x,h=b.y;a.Lb(a.Hd(b,!1),b);b.x-=v;b.y-=h;v=b.length();v>this.fE&&v>e&&(d=k,e=v)}return d};return b}();a.ZH=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 29};c.prototype.aa=function(b,c,k,d){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,k,d).next()):new a.ZH(b,c,k,d)};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);
a.Sz=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 21};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k,d,l,e,g,h){return b instanceof a.U?(h=new a.Qc(b),this.aa(h,c,k,[d],l,e,!1,g).next()):!0===g?(k=new a.Uz(b,c,k,d,l,!1,!1,h),a.wi.local().aa(k,c,h)):new a.Uz(b,c,k,d,l,!1,!1,h)};c.W=null;return c}(a.Ne);a.Tz=b})(y||(y={}));(function(a){var b=function(){function b(c,f,d,k,e,g,h,m){if(g)throw a.g.qe();
if(null==f)throw a.g.O();this.va=-1;this.Wq=c;this.cg=f;this.le=d;this.Nq=k;this.Sm=e;this.Wm=-1;this.Zb=m;this.BP=new a.i;this.BP.Ka()}b.prototype.next=function(){for(var a;null!=(a=this.Wq.next());)return this.va=this.Wq.za(),this.Wm+1<this.Nq.length&&this.Wm++,this.nN(a,this.Nq[this.Wm]);return null};b.prototype.za=function(){return this.va};b.prototype.nN=function(b,f){return a.pH.buffer(b,this.cg,this.le,f,this.Sm,this.Zb)};return b}();a.Uz=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,
arguments)}I(c,b);c.prototype.F=function(){return 24};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k){if(null==c)throw a.g.O();if(b.u()||1>b.gb())return 0;if(4==k)throw a.g.qe();var d=a.Za.Fm(c),l=a.Za.et(d),e=a.Za.Ss(d),l=l*(2-l),g=d.Te().Ej,h=b.F(),m;h==a.j.Polygon||h==a.j.Envelope?m=b.Rf():a.U.Mc(h)?(m=new a.Ya(b.description),m.Cc(b,!0)):m=b;if(0==d.mc(c)){if(a.Za.Oo(c)){m=a.gh.po(m,c);h==a.j.Polyline&&m==b&&(m=a.U.Zj(b));b=new a.Od;a.Za.Gm(c).vu(b);for(var h=
0,n=m.G();h<n;h++){var q=m.Ga(h);q.x=a.gh.ou(q.x,b);m.jc(h,q)}}b=m.Qa();m=a.gh.YQ(c,d,m,b)?b:a.Za.Wl(m,c,d)}return this.xM(m,k,e,l,g)};c.prototype.xM=function(b,c,k,d,l){var e=new a.da(0),g=0;for(b=b.Da();b.lb();)for(;b.Ma();){var h=b.ja(),m=h.Nb(),h=h.pc();m.scale(l);h.scale(l);a.Ab.Sd(k,d,m.x,m.y,h.x,h.y,e,null,null,c);g+=e.o}return g};c.W=null;return c}(a.Ne);a.bI=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 18};c.local=
function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k,d,l){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,k,d,l).next()):new a.aI(b,k,d,c,-1,-1,l)};c.W=null;return c}(a.Ne);a.$H=b})(y||(y={}));(function(a){var b=function(){function b(c,f,d,k,e,g){if(0<g)throw a.g.qe();if(4!=d&&0<e)throw a.g.qe();if(null==f)throw a.g.O();this.va=-1;this.Wq=c;this.cg=f;this.le=d;this.HP=k;this.GP=e}b.prototype.next=function(){for(var a;null!=(a=this.Wq.next());)return this.va=this.Wq.za(),
this.gw(a);return null};b.prototype.za=function(){return this.va};b.prototype.gw=function(b){return a.ui.mq(b,this.cg,this.le,this.HP,this.GP,this.Zb)};return b}();a.aI=b})(y||(y={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Contains=1]="Contains";a[a.Within=2]="Within";a[a.Equals=3]="Equals";a[a.Disjoint=4]="Disjoint";a[a.Touches=8]="Touches";a[a.Crosses=16]="Crosses";a[a.Overlaps=32]="Overlaps";a[a.NoThisRelation=64]="NoThisRelation";a[a.Intersects=1073741824]="Intersects";a[a.IntersectsOrDisjoint=
1073741828]="IntersectsOrDisjoint"})(a.Az||(a.Az={}));var b=a.Az,c=function(){function c(){}c.kU=function(b,d,k,e){if(d.u()||b.u())return 4;var g=b.F(),h=d.F(),m;a.U.Mc(g)&&(b=m=new a.Ya(b.description),m.Cc(b,!0));a.U.Mc(h)&&(d=m=new a.Ya(d.description),m.Cc(d,!0));switch(g){case a.j.Point:switch(h){case a.j.Point:return c.rO(b,d,k);case a.j.Envelope:return c.Jd(c.BG(d,b,k));case a.j.MultiPoint:return c.Jd(c.HG(d,b,k));case a.j.Polyline:return c.Jd(c.zz(d,b,k,e));case a.j.Polygon:return c.Jd(c.oz(d,
b,k))}throw a.g.xa();case a.j.Envelope:switch(h){case a.j.Point:return c.BG(b,d,k);case a.j.Envelope:return c.eK(b,d,k);case a.j.MultiPoint:return c.Jd(c.DG(d,b,k,e));case a.j.Polyline:return c.Jd(c.uz(d,b));case a.j.Polygon:return c.Jd(c.kz(d,b))}throw a.g.xa();case a.j.MultiPoint:switch(h){case a.j.Point:return c.HG(b,d,k);case a.j.Envelope:return c.DG(b,d,k,e);case a.j.MultiPoint:return c.FG(b,d,k,e);case a.j.Polyline:return c.Jd(c.wz(d,b));case a.j.Polygon:return c.Jd(c.mz(d,b))}throw a.g.xa();
case a.j.Polyline:switch(h){case a.j.Point:return c.zz(b,d,k,e);case a.j.Envelope:return c.uz(b,d);case a.j.MultiPoint:return c.wz(b,d);case a.j.Polyline:return c.hQ(b,d);case a.j.Polygon:return c.Jd(c.qz(d,b))}throw a.g.xa();case a.j.Polygon:switch(h){case a.j.Point:return c.oz(b,d,k);case a.j.Envelope:return c.kz(b,d);case a.j.MultiPoint:return c.mz(b,d);case a.j.Polyline:return c.qz(b,d);case a.j.Polygon:return c.nP(b,d)}throw a.g.xa();default:throw a.g.xa();}};c.rO=function(a,b,k){a=a.A();b=b.A();
return c.iz(a,b,k)};c.iz=function(a,b,c){a.sub(b);return a.Sp()<=c*c?3:4};c.BG=function(b,d,k){var e=new a.i;b.s(e);b=d.A();return c.YL(e,b,k)};c.YL=function(a,b,c){a.R(-c,-c);if(a.contains(b))return 1;a.R(c,c);return a.contains(b)?8:4};c.tM=function(a,b,c){return b.contains(c)?1:a.contains(c)?8:4};c.eK=function(b,d,k){var e=new a.i;b.s(e);b=new a.i;d.s(b);return c.LK(e,b,k)};c.LK=function(a,b,c){var d=0;a.contains(b)&&(d|=1);b.contains(a)&&(d|=2);if(0!=d)return d;a.R(-c,-c);b.R(-c,-c);if(a.kc(b))return d=
a,d.R(c,c),d=d.contains(b)?1:0,b.R(c,c),d|=b.contains(a)?2:0,0!=d?d:32;d=a;d.R(c,c);b.R(c,c);return d.kc(b)?8:4};c.HG=function(a,b,k){b=b.A();return c.JG(a,b,k)};c.JG=function(a,b,k){for(var d=0,e=a.G();d<e;d++){var g;g=a.Ga(d);g=c.iz(g,b,k);if(4!=g)return 0!=(g&2)&&1!=e?1:g}return 4};c.DG=function(b,d,k,e){var g=new a.i;d.s(g);return c.dN(b,g,k,e)};c.dN=function(a,b,k,d){b.R(-k,-k);b.R(k,k);for(var e=k=0,g=a.G();e<g;e++){var v;v=a.Ga(e);v=c.Jd(c.tM(b,b,v));if(4!=v&&(k|=v,4==d))return 1073741824}return 0==
k?4:2==k?k:32};c.FG=function(a,b,k,d){for(var e=0,g=0,v=b.G();g<v;g++){var h;h=b.Ga(g);h=c.JG(a,h,k);if(4!=h&&(e++,4==d))return 1073741824}return 0<e?e==b.G()?3==d?(h=c.FG(b,a,k,1),1==h?3:0):1:32:0};c.zz=function(a,b,k,d){b=b.A();return c.WP(a,b,k,d)};c.FM=function(a,b){var c=null,d=a.qb;null!=d&&(c=d.hi);if(null!=c){c=c.Kk(b.x,b.y);if(0==c)return 4;if(1==c)return 1}else return-1;return 0};c.WP=function(f,d,k,e){if(0==(e&1073741839))return 64;var g=c.FM(f,d);if(0<g)return g;k*=k;for(g=f.Da();g.lb();){var h=
g.Ra;if(!f.wc(h)){var m=f.Ia(h),h=f.Fa(h);if(0==m)continue;if(a.b.$b(f.Ga(h),d)<=k||1<m&&a.b.$b(f.Ga(h+m-1),d)<=k)return 8}if(8!=e)for(;g.Ma();)if(m=g.ja(),m=m.Lb(m.Hd(d,!1)),a.b.$b(m,d)<=k)return 0!=(e&b.IntersectsOrDisjoint)?1073741824:1}return 0!=(e&b.IntersectsOrDisjoint)?4:64};c.uz=function(b,d){var k=new a.i;d.s(k);return c.qP(b,k)};c.qP=function(a,b){var k=c.$n(a,b);return 0<k?k:0};c.$n=function(a,b){var c;c=a.qb;if(null!=c)c=c.hi;else return-1;if(null!=c){c=c.En(b);if(0==c)return 4;if(1==
c)return 1}else return-1;return 0};c.wz=function(b,d){var k=new a.i;d.s(k);k=c.$n(b,k);return 0<k?k:0};c.es=function(b,d){var k=new a.i;d.s(k);k=c.$n(b,k);return 0<k?k:-1==k&&(k=new a.i,b.s(k),k=c.$n(d,k),0<k)?c.Jd(k):0};c.hQ=function(a,b){var k=c.es(a,b);return 0<k?k:0};c.oz=function(a,b,k){b=b.A();return c.kP(a,b,k)};c.kP=function(b,c,k){b=a.hd.ie(b,c,k);if(0==b)return 4;if(1==b)return 1;if(2==b)return 8;throw a.g.xa();};c.kz=function(b,d){var k=new a.i;d.s(k);return c.tO(b,k)};c.tO=function(a,
b){var k=c.$n(a,b);return 0<k?k:0};c.mz=function(a,b){var k=c.es(a,b);return 0<k?k:0};c.qz=function(a,b){var k=c.es(a,b);return 0<k?k:0};c.nP=function(a,b){var k=c.es(a,b);return 0<k?k:0};c.hR=function(b,c){var k=b.F(),d=c.F(),l;if(a.U.Th(k)&&(l=b.qb,null!=l&&(l=l.hi,null!=l))){if(d==a.j.Point){var e=c.A();l=l.Kk(e.x,e.y)}else e=new a.i,c.s(e),l=l.En(e);if(1==l)return 1;if(0==l)return 4}if(a.U.Th(d)&&(l=c.qb,null!=l&&(l=l.hi,null!=l))){k==a.j.Point?(k=b.A(),l=l.Kk(k.x,k.y)):(k=new a.i,b.s(k),l=l.En(k));
if(1==l)return 2;if(0==l)return 4}return 0};c.Jd=function(a){0!=(a&1)&&(a=a&-2|2);0!=(a&2)&&(a&=-3,a|=1);return a};return c}();a.cI=c})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.F=function(){return 15};c.prototype.aa=function(b,c,k,d,l){return b instanceof a.U?(b=new a.Qc(b),c=new a.Qc(c),this.aa(b,c,k,d,l).next()):void 0===l?new a.Vz(b,c,k,d,-1):new a.Vz(b,c,k,d,l)};c.W=null;return c}(a.Ne);
a.Zr=b})(y||(y={}));(function(a){var b=function(){function b(c,f,d,k,e){this.Eq=null==f;this.va=-1;this.oe=c;this.cg=d;this.Ce=f.next();this.Ji=this.Ce.F();this.Zb=k;this.Xh=e;if(-1!=this.Xh&&(0>=this.Xh||7<this.Xh))throw a.g.O("bad dimension mask");}b.prototype.next=function(){if(this.Eq)return null;var a;if(null!=this.cu){a=this.cu.next();if(null!=a)return a;this.cu=null}for(;null!=(a=this.oe.next());){this.va=this.oe.za();if(-1==this.Xh)return this.Ha(a);this.cu=this.OO(a);return this.cu.next()}return null};
b.prototype.za=function(){return this.va};b.prototype.Ha=function(b){var f=this.uG(b);if(null!=f)return f;var f=a.Ja.Zs(this.Ce,b),c=a.Ja.Ad(this.cg,f,!0),f=new a.i;this.Ce.s(f);var k=new a.i;b.s(k);f.R(2*c,2*c);f.Ha(k);f.R(100*c,100*c);c=a.Fd.clip(this.Ce,f,0,0);b=a.Fd.clip(b,f,0,0);return a.Of.lt(b,c,this.cg,this.Zb)};b.prototype.SE=function(b,f,c){var k=0;if(0!=(f&1))null==c[0]&&(c[0]=new a.pe(b)),k++;else for(var d=0;d<c.length-1;d++)c[d]=c[d+1];if(0!=(f&2))null==c[k]&&(c[k]=new a.Ya(b)),k++;
else for(d=k;d<c.length-1;d++)c[d]=c[d+1];if(0!=(f&4))null==c[k]&&(c[k]=new a.La(b)),k++;else for(d=k;d<c.length-1;d++)c[d]=c[d+1];if(3!=k){b=[];for(d=0;d<k;d++)b[d]=c[d];return new a.Qc(b)}return new a.Qc(c)};b.prototype.OO=function(b){var f=this.uG(b);if(null!=f){var c=[null,null,null];c[f.gb()]=f;return this.SE(b.description,this.Xh,c)}f=a.Ja.Zs(this.Ce,b);c=a.Ja.Ad(this.cg,f,!0);f=new a.i;this.Ce.s(f);f.R(2*c,2*c);var k=new a.i;b.s(k);f.Ha(k);f.R(100*c,100*c);c=a.Fd.clip(this.Ce,f,0,0);f=a.Fd.clip(b,
f,0,0);c=a.Of.Tw(f,c,this.cg,this.Zb);return this.SE(b.description,this.Xh,c)};b.prototype.uG=function(c){var f=a.Ja.Zs(c,this.Ce),d=a.Ja.Ad(this.cg,f,!1),f=c.F(),k=c.u(),e=this.Ce.u(),e=k||e;if(!e){e=new a.i;c.s(e);var g=new a.i;this.Ce.s(g);g.R(2*d,2*d);e=!e.kc(g)}if(!e)if(g=a.cI.hR(this.Ce,c),4==g)e=!0;else{if(0!=(g&2))return this.Ce;if(0!=(g&1))return c}if(e)return d=a.U.ve(f),e=a.U.ve(this.Ji),d<e?b.W(c,k):d>e?this.kF():0==d?f==a.j.MultiPoint&&this.Ji==a.j.Point?this.kF():b.W(c,k):b.W(c,k);if((-1==
this.Xh||4==this.Xh)&&f==a.j.Envelope&&this.Ji==a.j.Envelope)return d=this.Ce,f=new a.i,c.s(f),k=new a.i,d.s(k),f.Ha(k),d=new a.Wj,c.copyTo(d),d.Bu(f),d;if(f==a.j.Envelope&&0==a.U.ve(this.Ji)||this.Ji==a.j.Envelope&&0==a.U.ve(f))return k=f==a.j.Envelope?c:this.Ce,c=f==a.j.Envelope?this.Ce:c,f=new a.i,k.s(f),a.Fd.clip(c,f,d,0);if(0==a.U.ve(f)&&0<a.U.ve(this.Ji)||0<a.U.ve(f)&&0==a.U.ve(this.Ji)){d=a.Ja.Cg(this.cg,c,!1);if(f==a.j.MultiPoint||f==a.j.Point)return a.Of.jD(c,this.Ce,d);if(this.Ji==a.j.MultiPoint||
this.Ji==a.j.Point)return a.Of.jD(this.Ce,c,d);throw a.g.xa();}return-1!=this.Xh&&2!=this.Xh||f!=a.j.Polyline||this.Ji!=a.j.Polygon?-1!=this.Xh&&2!=this.Xh||f!=a.j.Polygon||this.Ji!=a.j.Polyline?null:this.rG(this.Ce,c):this.rG(c,this.Ce)};b.prototype.rG=function(b,f){var c=b,k=f,d=a.Ja.Cg(this.cg,f,!1),e=new a.i;k.s(e);var g=new a.i;c.s(g);g.R(2*d,2*d);e.Ha(g);e.R(10*d,10*d);var c=b=a.Fd.clip(b,e,0,0),g=new a.ha(0),h=-1,m=k.qb;if(null!=m){var n=m.hi;if(null!=n){h=0;g.yb(c.G()+c.fa());for(var q=new a.i,
s=c.Da();s.lb();)for(;s.Ma();){s.ja().s(q);var t=n.En(q);1==t?g.add(1):0==t?g.add(0):(g.add(-1),h++)}}}5<f.G()&&(k=f=a.Fd.clip(f,e,0,0),m=k.qb);0>h&&(h=c.Hw());e=c.G()+k.G();h*=k.G();e*=Math.log(e);if(h>4*e)return null;e=null;h=k.Da();null!=m&&null!=m.Bb&&(e=m.Bb);null==e&&20<k.G()&&(e=a.Ja.nB(k));for(var k=b.Qa(),m=null,n=c.Da(),q=[0,0,0,0,0,0,0,0,0],s=new a.rd(0),t=new a.Ag,z=-1,u=0,w=0,x=0<g.size,A=-1;n.lb();){for(var A=n.Ra,y=0,z=-1,u=0;n.Ma();){var O=x?a.J.truncate(g.get(w)):-1;w++;var C=n.ja();
if(0>O){if(null!=e){null==m?m=e.JN(C,d):m.Gn(C,d);for(O=m.next();-1!=O;O=m.next()){h.Tb(e.ea(O));for(var O=h.ja(),G=C.Ha(O,null,q,null,d),O=0;O<G;O++)s.add(q[O])}}else for(h.Lk();h.lb();)for(;h.Ma();){O=h.ja();G=C.Ha(O,null,q,null,d);for(O=0;O<G;O++)s.add(q[O])}if(0<s.size){s.yd(0,s.size,function(a,b){return a-b});var M=0;s.add(1);for(var G=-1,O=0,D=s.size;O<D;O++){var K=s.get(O);if(K!=M){var N=!1;0!=M||1!=K?(C.Bi(M,K,t),M=t.get()):(M=C,N=!0);if(2<=y){k.xs(c,A,z,u,3==y);if(1!=this.UA(f,M.Nb(),d)&&
1!=this.VA(f,M,d))return null;k.Cc(M,!1);y=1;u=0}else switch(G=this.VA(f,M,d),G){case 1:N?2>y?(z=n.Kb()-c.Fa(A),u=1,y=0==y?3:2):u++:(k.Cc(M,0==y),y=1);break;case 0:y=0;z=-1;u=0;break;default:return null}M=K}}}else{O=this.UA(f,C.Nb(),d);if(0>O)return null;1==O?(2>y&&(z=n.Kb()-c.Fa(A),y=0==y?3:2),u++):(z=-1,u=0)}s.clear(!1)}else 0!=O&&1==O&&(0==y?(y=3,z=n.Kb()-c.Fa(A)):1==y?(y=2,z=n.Kb()-c.Fa(A)):u++)}2<=y&&(k.xs(c,A,z,u,3==y),z=-1)}return k};b.prototype.UA=function(b,f,c){return a.gf.xl(b,f,c)};b.prototype.VA=
function(b,f,c){var k=f.Nb();f=f.pc();var d=a.gf.xl(b,k,c),e=a.gf.xl(b,f,c);if(1==d&&0==e||0==d&&1==e)return-1;if(0==d||0==e)return 0;if(1==d||1==e)return 1;d=new a.b;d.add(k,f);d.scale(0.5);b=a.gf.xl(b,d,c);return 0==b?0:1==b?1:-1};b.W=function(a,b){return b?a:a.Qa()};b.prototype.kF=function(){null==this.$D&&(this.$D=this.Ce.Qa());return this.$D};return b}();a.Vz=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 28};c.local=
function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,k,d,l,e,g){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,k,d,l,e,g).next()):new a.dI(b,c,k,d,l,e,g)};c.W=null;return c}(a.Ne);a.Wz=b})(y||(y={}));(function(a){var b=function(){function b(a,f,c,k,d,e,g){this.va=-1;this.oe=a;this.Pi=f;this.Ea=c;this.bi=k;this.Cx=d;this.XD=e;this.Ee=g}b.prototype.next=function(){var a=this.oe.next();return null!=a?(this.va=this.oe.za(),this.QH(a)):null};b.prototype.za=function(){return this.va};
b.prototype.QH=function(b){var c;c=0>=this.XD?a.Ja.Cg(this.Pi,b,!1):this.XD;return a.XG.aa(b,this.Ea,this.bi,this.Cx,c,this.Ee)};return b}();a.dI=b})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.reset=function(){this.Pg=this.Gj=-1;this.Gq=this.So=!1};b.prototype.PM=function(a,b,c){for(a.Tb(b,c);a.Ma();){var d=a.ja(),d=d.ac();if(0!=d)return a.Kb()}for(a.Tb(b,c);a.Nw();)if(d=a.oi(),d=d.ac(),0!=d)return a.Kb();return-1};b.prototype.QM=function(a,b){for(a.Tb(b,-1);a.Nw();)if(0!=
a.oi().ac())return a.Kb();return-1};b.prototype.OM=function(a,b){a.Tb(b,-1);for(a.ja();a.Ma();)if(0!=a.ja().ac())return a.Kb();return-1};b.prototype.NM=function(b,c,k,d){this.Gj=this.PM(c,k,d);if(-1!=this.Gj){c.Tb(this.Gj,-1);var l=c.ja(),e=l.Lb(l.Hd(b,!1));k=a.b.$b(e,b);d=new a.b;d.K(e);d.sub(l.Nb());e=new a.b;e.K(b);e.sub(l.Nb());this.So=0>d.Ai(e);this.Pg=this.OM(c,this.Gj);if(-1!=this.Pg){c.Tb(this.Pg,-1);var l=c.ja(),g=l.Hd(b,!1),g=l.Lb(g),h=a.b.$b(g,b);h>k?this.Pg=-1:(d.K(g),d.sub(l.Nb()),e.K(b),
e.sub(l.Nb()),this.Gq=0>d.Ai(e))}-1==this.Pg&&(this.Pg=this.QM(c,this.Gj),-1!=this.Pg&&(c.Tb(this.Pg,-1),l=c.ja(),g=l.Hd(b,!1),g=l.Lb(g),h=a.b.$b(g,b),h>k?this.Pg=-1:(d.K(g),d.sub(l.Nb()),e.K(b),e.sub(l.Nb()),this.Gq=0>d.Ai(e),b=this.Gj,this.Gj=this.Pg,this.Pg=b,b=this.So,this.So=this.Gq,this.Gq=b)))}};b.prototype.EK=function(a,b,c,d,l){c=c.Da();this.NM(a,c,d,l);if(-1!=this.Gj&&-1==this.Pg)return this.So;if(-1!=this.Gj&&-1!=this.Pg){if(this.So==this.Gq)return this.So;c.Tb(this.Gj,-1);a=c.ja().Pf(1);
c.Tb(this.Pg,-1);b=c.ja().Pf(0);return 0<=a.Ai(b)?!0:!1}return b};return b}(),c=function(c){function f(){c.apply(this,arguments)}I(f,c);f.local=function(){null===f.W&&(f.W=new f);return f.W};f.prototype.F=function(){return 3};f.prototype.yw=function(b,c,f,d){void 0===d&&(d=!1);if(b.u())return new a.dl;c=c.A();var l=b,e=b.F();e==a.j.Envelope&&(l=new a.La,l.Xc(b,!1),e=a.j.Polygon);switch(e){case a.j.Point:return this.OE(l,c);case a.j.MultiPoint:return this.BE(l,c);case a.j.Polyline:case a.j.Polygon:return this.cQ(l,
c,f,d);default:throw a.g.sa("not implemented");}};f.prototype.zw=function(b,c){if(b.u())return new a.dl;var f=c.A(),d=b,l=b.F();l==a.j.Envelope&&(d=new a.La,d.Xc(b,!1),l=a.j.Polygon);switch(l){case a.j.Point:return this.OE(d,f);case a.j.MultiPoint:case a.j.Polyline:case a.j.Polygon:return this.BE(d,f);default:throw a.g.sa("not implemented");}};f.prototype.Aw=function(b,c,f,d){if(0>d)throw a.g.O();if(b.u())return[];c=c.A();var l=b,e=b.F();e==a.j.Envelope&&(l=new a.La,l.Xc(b,!1),e=a.j.Polygon);switch(e){case a.j.Point:return this.HQ(l,
c,f,d);case a.j.MultiPoint:case a.j.Polyline:case a.j.Polygon:return this.fQ(l,c,f,d);default:throw a.g.sa("not implemented");}};f.prototype.cQ=function(c,f,d,l){if(c.F()==a.j.Polygon&&d&&(d=new a.i,c.s(d),d=a.Ja.Ad(null,d,!1),0!=(l?a.hd.ie(c,f,0):a.hd.ie(c,f,d)))){var e=new a.dl(f,0,0);l&&e.UF(!0);return e}for(var g=c.Da(),e=new a.b,h=d=-1,m=1.7976931348623157E308,n=!1,q=0;g.lb();)for(;g.Ma();){var n=g.ja(),n=n.Lb(n.Hd(f,!1)),s=a.b.$b(n,f);s<m?(q=1,e=n,d=g.Kb(),h=g.Ra,m=s):s==m&&q++}e=new a.dl(e,
d,Math.sqrt(m));l&&(g.Tb(d,h),n=g.ja(),n=0>a.b.zn(f,n.Nb(),n.pc()),1<q&&(l=new b,l.reset(),n=l.EK(f,n,c,d,h)),e.UF(n));return e};f.prototype.OE=function(b,c){var f=b.A(),d=a.b.Gb(f,c);return new a.dl(f,0,d)};f.prototype.BE=function(b,c){for(var f=b.oc(0),d=b.G(),l=0,e=0,g=0,h=1.7976931348623157E308,m=0;m<d;m++){var n=new a.b;f.fc(2*m,n);var q=a.b.$b(n,c);q<h&&(e=n.x,g=n.y,l=m,h=q)}f=new a.dl;f.sv(e,g,l,Math.sqrt(h));return f};f.prototype.HQ=function(b,c,f,d){if(0==d)return[];f*=f;b=b.A();c=a.b.$b(b,
c);c<=f?(f=[],d=new a.dl,d.sv(b.x,b.y,0,Math.sqrt(c)),f[0]=d):f=[];return f};f.prototype.fQ=function(b,c,f,d){if(0==d)return d=[];var l=b.oc(0),e=b.G();b=[];var g=0;f*=f;for(var h=0;h<e;h++){var m=l.read(2*h),n=l.read(2*h+1),q=c.x-m,s=c.y-n,q=q*q+s*s;q<=f&&(s=new a.dl,s.sv(m,n,h,Math.sqrt(q)),g++,b.push(s))}c=b.length;b.sort(function(a,b){return a.Ea<b.Ea?-1:a.Ea==b.Ea?0:1});if(d>=c)return b.slice(0);b.length=d;return b.slice(0)};f.W=null;return f}(a.Ne);a.av=c})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,
arguments)}I(c,b);c.prototype.F=function(){return 4};c.prototype.aa=function(b,c,d,l,e){return a.el.oy(b,c,d,l,e)};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);a.eI=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 33};c.prototype.aa=function(b,c,d,l,e){return 1073741824===b?!a.jd.py(c,d,l,4,e):a.jd.py(c,d,l,b,e)};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);
a.bl=b})(y||(y={}));(function(a){var b=function(){function b(c,f,d,k){this.Ee=k;this.xP=d;this.va=-1;if(null==c)throw a.g.O();this.wk=c;this.Pi=f}b.prototype.next=function(){var a;return null!=(a=this.wk.next())?(this.va=this.wk.za(),this.Py(a)):null};b.prototype.za=function(){return this.va};b.prototype.Py=function(b){if(null==b)throw a.g.O();return a.bv.cG(b,this.Pi,this.xP,this.Ee)};return b}();a.fI=b})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=
function(){return 26};c.prototype.aa=function(b,c,d,l){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,d,l).next()):new a.fI(b,c,d,l)};c.prototype.Po=function(b,c,d,l,e){var g=0,g=void 0!==l?a.bv.Po(b,c,d,l,e):a.bv.Po(b,c,!1,null,d);return 0<g};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);a.$r=b})(y||(y={}));(function(a){var b=function(){function a(){this.fp=0}a.prototype.gS=function(a){this.fp&=-2;this.fp|=a?1:0};a.prototype.sl=function(){return 0!=(this.fp&
1)};a.prototype.LC=function(){return this.sl()?0:1};return a}();a.zT=b;var c=function(){return function(){}}(),d=function(){return function(a,b,c,f){this.x=a;this.y=b;this.Sh=c;this.yl=f}}(),f=function(){function a(b){this.ne=b}a.prototype.compare=function(a,b,c){a=a.ea(c);b=this.ne.af.read(2*b);a=this.ne.af.read(2*a);b-=a;return 0>b?-1:0<b?1:0};return a}(),r=function(){function a(b){this.ne=b}a.prototype.compare=function(a,b,c){b=this.ne.ab[b];a=this.ne.ab[a.ea(c)];var f=b.sl(),d=a.sl();c=b.$d.xe(this.ne.xn,
0);var k=a.$d.xe(this.ne.xn,0);c==k&&(c=Math.min(f?b.$d.ka:b.$d.ia,d?a.$d.ka:a.$d.ia),f=0.5*(c-this.ne.xn)+this.ne.xn,f==this.ne.xn&&(f=c),c=b.$d.xe(f,0),k=a.$d.xe(f,0));return c<k?-1:c>k?1:0};return a}(),k=function(){function b(c,f){this.VE=new a.b;this.parent=c;this.lO=f}b.prototype.Xp=function(a,b,c){var f=this.parent,d=this.lO;c.yd(a,b,function(a,b){return f.kj(a,b,d)})};b.prototype.Ko=function(a){a=this.parent.xh.get(a);this.parent.af.fc(2*(a>>1),this.VE);return this.VE.y+(0!=(a&1)?this.parent.Ri:
-this.parent.Ri)};return b}(),e=function(){function e(b,c,f,d,k){this.SD=b.description;this.V=b;this.sg=c;this.Ri=a.Ja.Cg(this.sg,b,!1);this.qn=a.Ja.Cg(this.sg,b,!0);this.xx=f;this.vP=this.SD.Ba;this.ab=[];this.en=[];this.Lg=new a.Zn;this.$a=new a.bj;this.Ld=new a.xd;this.GD=this.pk=k}e.prototype.Xw=function(){this.GD=!0;return(!a.U.Lc(this.V.F())||this.yB()&&this.xB(!1))&&this.NK()?a.U.Lc(this.V.F())?this.QK()?this.V.F()==a.j.Polyline?this.SK()?2:0:this.TK()?this.UK():0:0:2:0};e.prototype.Xy=function(b,
c){var f=this.af.read(2*b),d=this.af.read(2*b+1),k=this.af.read(2*c),l=this.af.read(2*c+1),r=!a.Rr.Uw(f,d,k,l,this.Ri*this.Ri);return r?r:0==this.V.gb()?!1:f==k&&d==l};e.prototype.yB=function(){for(var b=this.V,c=b.Yf?3:2,f=0,d=b.fa();f<d;f++)if(b.Ia(f)<c)return this.Ld=new a.xd(1,f,0),!1;return!0};e.prototype.xB=function(b){for(var c=this.V,f=c.Da(),d=c.hasAttribute(1),c=d?a.Ja.rB(this.sg,c,!1):0;f.lb();)for(;f.Ma();){var k=f.ja();if(!(k.ac()>this.Ri)){if(b&&d){var l=k.ft(1,0),k=k.ft(1,0);if(Math.abs(k-
l)>c)continue}this.Ld=new a.xd(2,f.Kb(),-1);return!1}}return!0};e.prototype.NK=function(){var b=this.V,c=null;a.U.Lc(this.V.F())&&(c=this.V);var d=(this.GD||this.pk)&&null!=c,l=b.G();this.af=b.oc(0);this.xh=new a.ha(0);this.xh.yb(2*l);this.wh=new a.ha(0);this.wh.yb(2*l);d&&(null==this.Bk&&(this.Bk=new a.ha(0)),this.Bk.yb(l));for(var r=b=0;r<l;r++)if(this.xh.add(2*r),this.xh.add(2*r+1),this.wh.add(2*r),this.wh.add(2*r+1),d){for(;r>=c.Ec(b);)b++;this.Bk.add(b)}(new a.Qr).sort(this.wh,0,2*l,new k(this,
d));this.$a.clear();this.$a.In(new f(this));this.$a.ee(l);c=0;for(l*=2;c<l;c++)if(d=this.wh.get(c),b=this.xh.get(d),d=b>>1,0==(b&1)){b=this.$a.addElement(d,-1);r=this.$a.he(b);if(-1!=r&&!this.Xy(this.$a.ea(r),d))return this.Ld=new a.xd(3,d,this.$a.ea(r)),!1;var e=this.$a.cb(b);if(-1!=e&&!this.Xy(this.$a.ea(e),d))return this.Ld=new a.xd(3,d,this.$a.ea(e)),!1}else if(b=this.$a.search(d,-1),r=this.$a.he(b),e=this.$a.cb(b),this.$a.ld(b,-1),-1!=r&&-1!=e&&!this.Xy(this.$a.ea(r),this.$a.ea(e)))return this.Ld=
new a.xd(3,this.$a.ea(r),this.$a.ea(e)),!1;return!0};e.prototype.QK=function(){return 10>this.V.G()?this.OK():this.PK()};e.prototype.PK=function(){var b=new a.gd;b.Fb(this.V);var c=new a.xd;return a.Yu.DE(!1,b,this.Ri,c,this.Ee)?(c.Fk=b.hb(c.Fk),c.Gk=b.hb(c.Gk),this.Ld.Zp(c),!1):!0};e.prototype.OK=function(){for(var b=this.V,c=b.Da(),b=b.Da();c.lb();)for(;c.Ma();){var f=c.ja();if(!c.Km()||!c.XO()){b.wR(c);do for(;b.Ma();){var d=b.ja(),d=f.cq(d,this.Ri,!0);if(0!=d)return this.Ld=new a.xd(2==d?5:4,
c.Kb(),b.Kb()),!1}while(b.lb())}}return!0};e.prototype.TK=function(){var b=this.V;this.ab.length=0;this.en.length=0;this.Hf=b.Da();this.Hf.MR();var c=new a.ha(0);c.yb(10);for(var f=NaN,d=0,k=0,b=2*b.G();k<b;k++){var l=this.wh.get(k),l=this.xh.get(l);if(0==(l&1)){var l=l>>1,r=this.af.read(2*l),e=this.af.read(2*l+1);if(0!=c.size&&(r!=f||e!=d)){if(!this.TE(c))return!1;null!=c&&c.clear(!1)}c.add(l);f=r;d=e}}return this.TE(c)?!0:!1};e.prototype.SK=function(){for(var b=this.V,f=Array(b.fa()),d=0,k=b.fa();d<
k;d++)f[d]=b.Mo(d);var k=new c,l,r,e,g=new a.b,d=this.wh.get(0),d=this.xh.get(d),h=d>>1;this.af.fc(2*h,g);d=this.Bk.get(h);l=f[d];r=b.Fa(d);e=b.Ec(d)-1;k.bk=h==r||h==e;k.Dv=this.pk?!l&&k.bk:k.bk;k.Sh=d;k.x=g.x;k.y=g.y;k.yl=h;for(var B=new c,m=1,n=this.wh.size;m<n;m++)if(d=this.wh.get(m),d=this.xh.get(d),0==(d&1)){h=d>>1;this.af.fc(2*h,g);d=this.Bk.get(h);d!=k.Sh&&(l=f[d],r=b.Fa(d),e=b.Ec(d)-1);var q,H=h==r||h==e;q=this.pk?!l&&k.bk:k.bk;B.x=g.x;B.y=g.y;B.Sh=d;B.yl=h;B.Dv=q;B.bk=H;if(B.x==k.x&&B.y==
k.y)if(this.pk){if(!B.Dv||!k.Dv)if(B.Sh!=k.Sh||!B.bk&&!k.bk)return this.Ld=new a.xd(8,B.yl,k.yl),!1}else if(!B.bk||!k.bk)return this.Ld=new a.xd(5,B.yl,k.yl),!1;d=k;k=B;B=d}return!0};e.prototype.AB=function(){for(var b=this.V,c=[],f=-1,k=!1,r=0,e=b.fa();r<e;r++)b.pt(r)&&(k=!1,f++,r<e-1&&(b.pt(r+1)||(k=!0))),c[r]=k?f:-1;var k=new a.b,r=this.wh.get(0),r=this.xh.get(r),g=r>>1;this.af.fc(2*g,k);for(var r=this.Bk.get(g),f=new d(k.x,k.y,r,g,c[r]),b=[],h=1,e=this.wh.size;h<e;h++)if(r=this.wh.get(h),r=this.xh.get(r),
0==(r&1)){g=r>>1;this.af.fc(2*g,k);r=this.Bk.get(g);r=new d(k.x,k.y,r,g,c[r]);if(r.x==f.x&&r.y==f.y){if(r.Sh==f.Sh)return this.Ld=new a.xd(9,r.yl,f.yl),!1;0<=c[r.Sh]&&c[r.Sh]==c[f.Sh]&&(0!=b.length&&b[b.length-1]==f||b.push(f),b.push(r))}f=r}if(0==b.length)return!0;r=new a.Zn(!0);a.J.Os(c,-1);k=-1;h=new a.b;h.Eh();f=0;for(e=b.length;f<e;f++){g=b[f];if(g.x!=h.x||g.y!=h.y)k=r.jh(0),h.x=g.x,h.y=g.y;var B=c[g.Sh];-1==B&&(B=r.jh(2),c[g.Sh]=B);r.addElement(B,k);r.addElement(k,B)}e=new a.ha(0);e.yb(10);
for(f=r.Xd;-1!=f;f=r.Bw(f))if(b=r.DC(f),0==(b&1)&&0!=(b&2)){b=-1;e.add(f);for(e.add(-1);0<e.size;){k=e.uc();e.bf();h=e.uc();e.bf();g=r.DC(h);if(0!=(g&1)){b=0==(g&2)?k:h;break}r.ZR(h,g|1);for(g=r.hc(h);-1!=g;g=r.cb(g))B=r.getData(g),B!=k&&(e.add(B),e.add(h))}if(-1!=b){r=-1;f=0;for(e=c.length;f<e;f++)if(c[f]==b){r=f;break}this.Ld=new a.xd(10,r,-1);return!1}}return!0};e.prototype.UK=function(){var b=this.V;if(0>=b.Mh())return this.Ld=new a.xd(6,1==b.fa()?1:-1,-1),0;if(1==b.fa())return this.pk&&!this.AB()?
0:2;this.hn=a.ha.Zc(b.fa(),0);this.Gx=a.ha.Zc(b.fa(),-1);for(var c=-1,f=0,d=0,k=b.fa();d<k;d++){var l=b.no(d);this.hn.write(d,0>l?0:256);if(0<l)c=d,f=l;else{if(0==l)return this.Ld=new a.xd(6,d,-1),0;if(0>c||f<Math.abs(l))if(this.Ld=new a.xd(7,d,-1),this.pk)return 0;this.Gx.write(d,c)}}this.jr=b.fa();this.Ll=new a.ha(0);this.Ll.yb(10);k=b.G();this.xn=NaN;b=new a.ha(0);b.yb(10);this.wp=a.ha.Zc(k,-1);this.gu=a.ha.Zc(k,-1);null!=this.Hi?this.Hi.clear(!1):this.Hi=new a.ha(0);this.Hi.yb(10);this.$a.clear();
this.$a.In(new r(this));c=0;for(k*=2;0<this.jr&&c<k;c++)if(f=this.wh.get(c),f=this.xh.get(f),0==(f&1)){f>>=1;d=this.af.read(2*f+1);if(d!=this.xn&&0!=b.size){if(!this.xr(b))return 0;null!=b&&b.clear(!1)}b.add(f);this.xn=d}return 0<this.jr&&!this.xr(b)?0:this.pk?0==this.Ld.yh&&this.AB()?2:0:0==this.Ld.yh?2:1};e.prototype.TE=function(b){if(1==b.size)return!0;for(var c=0,f=b.size;c<f;c++){var d=b.get(c);this.Hf.Tb(d);var k=this.Hf.oi();this.ab.push(this.Ks(k,d,this.Hf.Ra,!0));this.Hf.ja();k=this.Hf.ja();
this.ab.push(this.Ks(k,d,this.Hf.Ra,!1))}var l=this;this.ab.sort(function(a,b){return l.rM(a,b)});d=this.Lg.Xd;-1==d&&(d=this.Lg.jh(0));this.Lg.$l(this.ab.length);c=0;for(f=this.ab.length;c<f;c++)this.Lg.addElement(d,c);for(var c=!0,r=f=-1;c;){c=!1;k=this.Lg.hc(d);if(-1==k)break;for(var e=this.Lg.cb(k);-1!=e;){f=this.Lg.getData(k);r=this.Lg.getData(e);f=this.ab[f].un;r=this.ab[r].un;if(f==r)if(c=!0,this.Lg.Kc(d,k),k=this.Lg.he(e),e=this.Lg.Kc(d,e),-1==e||-1==k)break;else continue;k=e;e=this.Lg.cb(k)}}c=
this.Lg.tq(d);this.Lg.CB(d);if(0<c)return this.Ld=new a.xd(5,f,r),!1;c=0;for(f=b.size;c<f;c++)this.ly(this.ab[c]);this.ab.length=0;return!0};e.prototype.xr=function(b){for(var c=0,f=b.size;c<f;c++){var d=b.get(c),k=this.wp.read(d);if(-1!=k){var l=this.$a.ea(k);this.Hi.add(l);this.$a.ld(k,-1);this.ly(this.ab[l]);this.ab[l]=null;this.wp.write(d,-1)}k=this.gu.read(d);-1!=k&&(l=this.$a.ea(k),this.Hi.add(l),this.$a.ld(k,-1),this.ly(this.ab[l]),this.ab[l]=null,this.gu.write(d,-1))}c=0;for(f=b.size;c<f;c++){d=
b.get(c);this.Hf.Tb(d);k=this.Hf.oi();if(k.ka>k.ia){var r=this.Hf.Kb(),e=this.Ks(k,d,this.Hf.Ra,!0);0<this.Hi.size?(l=this.Hi.uc(),this.Hi.bf(),this.ab[l]=e):(l=this.ab.length,this.ab.push(e));k=this.$a.addElement(l,-1);-1==this.wp.read(r)?this.wp.write(r,k):this.gu.write(r,k);0==(this.hn.read(this.Hf.Ra)&3)&&this.Ll.add(k)}this.Hf.ja();k=this.Hf.ja();k.ka<k.ia&&(r=this.Hf.Cm(),e=this.Ks(k,d,this.Hf.Ra,!1),0<this.Hi.size?(l=this.Hi.uc(),this.Hi.bf(),this.ab[l]=e):(l=this.ab.length,this.ab.push(e)),
k=this.$a.addElement(l,-1),-1==this.wp.read(r)?this.wp.write(r,k):this.gu.write(r,k),0==(this.hn.read(this.Hf.Ra)&3)&&this.Ll.add(k))}c=0;for(f=this.Ll.size;c<f&&0<this.jr;c++)if(k=this.Ll.get(c),0==(this.hn.read(this.ab[this.$a.ea(k)].Fx)&3)){b=-1;for(var d=this.$a.he(k),g=k,r=0,e=null,l=-1,h=0;-1!=d;){l=this.$a.ea(d);e=this.ab[l];l=e.Fx;h=this.hn.read(l);if(0!=(h&3))break;g=d;d=this.$a.he(d)}-1==d?(r=1,d=g):(b=1==(h&3)?l:this.Gx.read(l),r=0!=e.LC()?0:1,d=this.$a.cb(d));do{l=this.$a.ea(d);e=this.ab[l];
l=e.Fx;g=this.hn.read(l);if(0==(g&3)){if(r!=e.LC())return this.Ld=new a.xd(6,l,-1),!1;h=0==r||e.sl()?2:1;g=g&252|h;this.hn.write(l,h);if(2==h&&0==this.Ld.yh&&this.Gx.read(l)!=b&&(this.Ld=new a.xd(7,l,-1),this.pk))return!1;this.jr--;if(0==this.jr)return!0}1==(g&3)&&(b=l);g=d;d=this.$a.cb(d);r=0!=r?0:1}while(g!=k)}null!=this.Ll?this.Ll.clear(!1):this.Ll=new a.ha(0);return!0};e.prototype.Ks=function(b,c,f,d){if(b.F()==a.j.Line)b=this.OL(b);else throw a.g.xa();b.un=c;b.Fx=f;b.fp=0;b.gS(d);return b};e.prototype.OL=
function(c){var f=null;0<this.en.length?(f=this.en[this.en.length-1],this.en.length-=1,c.copyTo(f.$d)):(f=new b,f.$d=a.fA.Zj(c));return f};e.prototype.ly=function(b){b.$d.F()==a.j.Line&&this.en.push(b)};e.prototype.dQ=function(){for(var b=this.V.G(),c=new a.ha(0),f=0;f<b;f++)c.add(f);var d=this;c.yd(0,b,function(a,b){return d.Hs(a,b)});for(f=1;f<b;f++)if(0==this.Hs(c.get(f-1),c.get(f)))return this.Ld=new a.xd(3,c.get(f-1),c.get(f)),0;return 2};e.prototype.MQ=function(){return this.yB()?this.xB(!0)?
2:0:0};e.prototype.KQ=function(){return this.Xw()};e.prototype.eQ=function(){for(var b=this.V.G(),c=new a.ha(0),f=0;f<b;f++)c.add(f);var d=this;c.yd(0,b,function(a,b){return d.tL(a,b)});var k=Array(b);a.J.Os(k,!1);k[c.get(0)]=!0;for(f=1;f<b;f++){var l=c.get(f-1),r=c.get(f);0==this.Hs(l,r)?k[r]=!1:k[r]=!0}for(var c=this.V.Qa(),l=this.V,r=0,e=1,f=0;f<b;f++)k[f]?e=f+1:(r<e&&c.Qd(l,r,e),r=f+1);r<e&&c.Qd(l,r,e);c.hg(2,this.qn);return c};e.prototype.NQ=function(){var b=this.V,c=b.Da(),f=b.Da(),d=this.V.Qa(),
k=this.V,l=b.hasAttribute(1),r=l?a.Ja.rB(this.sg,b,!0):0,e=new a.ha(0),g=new a.ha(0);e.yb(a.J.truncate(b.G()/2+1));for(g.yb(a.J.truncate(b.G()/2+1));c.lb();)if(f.lb(),!(2>b.Ia(c.Ra))){f.yR();for(var h=0,B=0,m=!0;c.Ma();){var n=c.ja(),q=f.oi();if(c.Kb()>f.Kb())break;m&&(e.add(c.Kb()),g.add(f.Cm()),m=!1);var B=e.uc(),H=c.Cm();if(1<H-B){var s=new a.b;s.qc(b.Ga(B),b.Ga(H));h=s.length()}else h=n.ac();B=g.uc();H=f.Kb();1<H-B?(s=new a.b,s.qc(b.Ga(B),b.Ga(H)),B=s.length()):B=q.ac();h>this.qn?e.add(c.Cm()):
l&&(h=b.md(1,e.uc(),0),n=n.Vs(1,0),Math.abs(n-h)>r&&e.add(c.Cm()));B>this.qn?g.add(f.Kb()):l&&(h=b.md(1,g.uc(),0),n=q.Vs(1,0),Math.abs(n-h)>r&&g.add(f.Kb()))}e.uc()<g.uc()?e.size>g.size?e.bf():g.bf():(e.uc()!=g.uc()&&g.bf(),g.bf());if(2<=g.size+e.size){m=new a.Wa;q=0;for(n=e.size;q<n;q++)k.Td(e.get(q),m),0==q?d.ef(m):d.lineTo(m);for(q=g.size-1;0<q;q--)k.Td(g.get(q),m),d.lineTo(m);k.wc(c.Ra)?d.qo():0<g.size&&(k.Td(g.get(0),m),d.lineTo(m))}null!=e&&e.clear(!1);null!=g&&g.clear(!1)}d.hg(2,this.qn);return d};
e.prototype.LQ=function(){return this.wS()};e.prototype.wS=function(){if(this.V.F()==a.j.Polygon&&1==this.V.Dm())return a.Of.Rj(this.V,this.qn,!0,!1,this.Ee);this.Zh=new a.gd;this.Zh.Fb(this.V);0!=this.Zh.qd&&(1!=this.xx&&a.aj.aa(this.Zh,this.qn,this.Ee,!0),this.V.F()==a.j.Polygon&&a.nm.aa(this.Zh,this.Zh.ad,this.xx,!1,this.Ee));this.V=this.Zh.jf(this.Zh.ad);this.V.F()==a.j.Polygon&&(this.V.hl(),this.V.Np(0));this.V.hg(2,this.qn);return this.V};e.bc=function(b,c,f){if(b.u())return 1;var d=b.F();if(d==
a.j.Point)return 1;if(d==a.j.Envelope)return f=new a.i,b.s(f),f.mg(a.Ja.Cg(c,b,!1))?0:1;if(a.U.Mc(d))throw a.g.xa();if(!a.U.Th(d))throw a.g.xa();var d=a.Ja.Cg(c,b,!1),k=b.sj(d);f=f?-1:k;if(-1!=f)return f;1==f&&(d=0);f=(new e(b,c,f,0,!1)).Xw();b.hg(f,d);return f};e.Po=function(b,c,f,d,k){null!=d&&(d.yh=0,d.Fk=-1,d.Gk=-1);if(b.u())return 1;var l=b.F();if(l==a.j.Point)return 1;var r=a.Ja.Cg(c,b,!1);if(l==a.j.Envelope)return c=new a.i,b.s(c),c.mg(r)?(null!=d&&(d.yh=2,d.Fk=-1,d.Gk=-1),0):1;if(a.U.Mc(l))return r=
new a.Ya(b.description),r.Cc(b,!0),e.Po(r,c,f,d,k);k=b.sj(r);f=f?-1:k;if(-1!=f)return f;c=new e(b,c,f,0,!1);if(l==a.j.MultiPoint)f=c.dQ();else if(l==a.j.Polyline)f=c.MQ();else if(l==a.j.Polygon)f=c.KQ();else throw a.g.xa();b.hg(f,r);null!=d&&0==f&&d.Zp(c.Ld);return f};e.pb=function(b,c,f,d,k){null!=d&&(d.yh=0,d.Fk=-1,d.Gk=-1);if(b.u())return 1;var l=b.F();if(l==a.j.Point)return 1;var r=a.Ja.Cg(c,b,!1);if(l==a.j.Envelope)return c=new a.i,b.s(c),c.mg(r)?(null!=d&&(d.yh=2,d.Fk=-1,d.Gk=-1),0):1;if(a.U.Mc(l))return l=
new a.Ya(b.description),l.Cc(b,!0),e.Po(l,c,f,d,k);b=new e(b,c,-1,0,!0);if(l==a.j.MultiPoint||l==a.j.Polyline||l==a.j.Polygon)c=b.Xw();else throw a.g.xa();null!=d&&d.Zp(b.Ld);return c};e.cG=function(b,c,f,d){if(b.u())return b;var k=b.F();if(k==a.j.Point)return b;var l=a.Ja.Cg(c,b,!1);if(k==a.j.Envelope)return c=new a.i,b.s(c),c.mg(l)?b.Qa():b;if(a.U.Mc(k))return k=new a.Ya(b.description),k.Cc(b,!0),e.cG(k,c,f,d);d=b.sj(l);f=f?-1:d;if(2==f)return b;b=new e(b,c,f,0,!1);if(k==a.j.MultiPoint)b=b.eQ();
else if(k==a.j.Polyline)b=b.NQ();else if(k==a.j.Polygon)b=b.LQ();else throw a.g.xa();return b};e.Qy=function(b,c,f,d){if(b.u())return b;var k=b.F();if(k==a.j.Point)return b;var l=a.Ja.Cg(c,b,!1);if(k==a.j.Envelope)return c=new a.i,b.s(c),c.mg(l)?b.Qa():b;if(a.U.Mc(k))return l=new a.Ya(b.description),l.Cc(b,!0),e.Qy(l,c,f,d);if(!a.U.Th(k))throw a.g.sa("OGC simplify is not implemented for this geometry type "+k);return a.Of.Qy(b,l,!1,d)};e.prototype.kj=function(b,c,f){if(b==c)return 0;b=this.xh.get(b);
var d=this.xh.get(c);c=b>>1;var k=d>>1,l=new a.b,r=new a.b;this.af.fc(2*c,l);l.y+=0!=(b&1)?this.Ri:-this.Ri;this.af.fc(2*k,r);r.y+=0!=(d&1)?this.Ri:-this.Ri;b=l.compare(r);return 0==b&&f?(f=this.Bk.get(c)-this.Bk.get(k),0>f?-1:0<f?1:0):b};e.prototype.Hs=function(b,c){if(b==c)return 0;var f=this.V,d=f.Ga(b),k=f.Ga(c);if(d.x<k.x)return-1;if(d.x>k.x)return 1;if(d.y<k.y)return-1;if(d.y>k.y)return 1;for(d=1;d<this.vP;d++)for(var k=this.SD.Id(d),l=a.qa.Xa(k),r=0;r<l;r++){var e=f.md(k,b,r),g=f.md(k,c,r);
if(e<g)return-1;if(e>g)return 1}return 0};e.prototype.tL=function(a,b){var c=this.Hs(a,b);return 0==c?a<b?-1:1:c};e.prototype.rM=function(a,b){if(a===b)return 0;var c=a.$d.Pf(a.sl()?1:0);a.sl()&&c.zp();var f=b.$d.Pf(b.sl()?1:0);b.sl()&&f.zp();var d=c.os(),k=f.os();return k==d?(d=c.Ai(f),c=8.881784197001252E-16*(Math.abs(f.x*c.y)+Math.abs(f.y*c.x)),Math.abs(d)<=c&&(d--,d++),0>d?1:0<d?-1:0):d<k?-1:1};return e}();a.bv=e})(y||(y={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}
I(c,b);c.prototype.F=function(){return 30};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d,l){return b instanceof a.U?(b=new a.Qc(b),c=new a.Qc(c),this.aa(b,c,d,l).next()):new a.gI(b,c,d,l)};c.Pn=function(b,d,k,e){var g=b.gb(),h=d.gb();if(b.u()&&d.u())return g>h?b:d;if(b.u())return d;if(d.u())return b;var m=new a.i,n=new a.i,q=new a.i;b.s(m);d.s(n);q.L(m);q.Eb(n);m=a.Ja.Ad(k,q,!1);n=b.F();q=d.F();return n==a.j.Point&&q==a.j.Point?c.pP(b,d,m):n!=q?0<g||0<h?g>h?
b:d:n==a.j.MultiPoint?c.pA(b,d,m):c.pA(d,b,m):a.Of.Pn(b,d,k,e)};c.pP=function(b,c,d){d=1.00001*d*Math.sqrt(2);d*=d;var l=b.A(),e=c.A(),g=new a.pe(b.description);a.b.$b(l,e)>d&&(g.add(b),g.add(c));return g};c.pA=function(b,c,d){var l=b.oc(0),e=b.G(),g=c.A(),h=b.Qa();d=1.00001*d*Math.sqrt(2);var m=new a.i;b.s(m);m.R(d,d);if(m.contains(g)){d*=d;for(var m=!1,n=[],q=0;q<e;q++)n[q]=!1;for(q=0;q<e;q++){var s=l.read(2*q),t=l.read(2*q+1),s=s-g.x,t=t-g.y;s*s+t*t<=d&&(m=!0,n[q]=!0)}if(m)for(q=0;q<e;q++)n[q]||
h.Qd(b,q,q+1);else h.Qd(b,0,e),h.add(c)}else h.Qd(b,0,e),h.add(c);return h};c.W=null;return c}(a.Ne);a.cv=b})(y||(y={}));(function(a){var b=function(){function b(a,c,d,k){this.Eq=null==c;this.va=-1;this.oe=a;this.cg=d;this.PP=c.next();this.Zb=k}b.prototype.next=function(){if(this.Eq)return null;var b;return null!=(b=this.oe.next())?(this.va=this.oe.za(),a.cv.Pn(b,this.PP,this.cg,this.Zb)):null};b.prototype.za=function(){return this.va};return b}();a.gI=b})(y||(y={}));(function(a){var b=function(){function a(){}
a.prototype.it=function(){this.hw=null;this.Uu=-1;this.xG=!1};return a}(),c=function(){function a(){this.hq=0;this.Ci=[]}a.prototype.SJ=function(a){this.hq+=a.Uu;this.Ci.push(a)};a.prototype.OQ=function(){this.hq-=this.Ci[this.Ci.length-1].Uu;this.Ci.length-=1};a.prototype.Cv=function(){return this.Ci[this.Ci.length-1]};a.prototype.mc=function(a){return a===this};return a}(),d=function(){function f(a,b,c){this.va=-1;this.Fc=!1;this.bE=[!1,!1,!1,!1];this.bp=[0,0,0,0];this.nx=!1;this.Hj=-1;this.Qo=
0;this.Um=-1;this.sn=[];this.oe=a;this.cg=b;this.Zb=c}f.bc=function(a){var b=[],c;for(c in a)b.push(Number(c));b.sort(function(a,b){return a-b});return b};f.prototype.UC=function(b){var c=this.sn[b],d=f.bc(c)[0],l=c[d],e=l.Cv().hw,l=l.Cv().xG;delete c[d];l&&(e=a.$r.local().aa(e,this.cg,!1,this.Zb),0==b&&e.F()==a.j.Point&&(b=new a.pe(e.description),e.u()||b.add(e),e=b));return e};f.prototype.next=function(){if(this.Fc&&this.Um==this.Hj)return null;for(;!this.ES(););if(-1==this.Hj)return null;if(this.nx){for(this.Um++;;){if(this.Um>
this.Hj||0>this.Um)throw a.g.xa();if(this.bE[this.Um])break}this.va++;return this.UC(this.Um)}this.va=0;this.Um=this.Hj;return this.UC(this.Hj)};f.prototype.za=function(){return this.va};f.prototype.ES=function(){if(this.Fc)return!0;var b=null;null!=this.oe&&(b=this.oe.next(),null==b&&(this.Fc=!0,this.oe=null));if(null!=b){var c=b.gb();this.bE[c]=!0;c>=this.Hj&&!this.nx&&(this.SA(c,!1,b),c>this.Hj&&!this.nx&&this.uR(c))}if(0<this.Qo)for(c=0;c<=this.Hj;c++)for(;1<this.bp[c];)if(b=this.iL(c),0!=b.length)b=
a.Of.nM(b,this.cg,this.Zb),this.SA(c,!0,b);else break;return this.Fc};f.prototype.iL=function(a){for(var b=[],c=[],d=this.sn[a],l=f.bc(d),e=0;e<l.length;e++){var g=l[e],h=d[g];if(this.Fc||1E4<h.hq&&1<h.Ci.length){this.bp[a]-=h.Ci.length;for(this.Qo-=h.Ci.length;0<h.Ci.length;)b.push(h.Cv().hw),h.OQ();c.push(g)}}for(e=0;e<c.length;e++)delete d[c[e]];return b};f.prototype.uR=function(a){for(var b=0;b<a;b++)this.sn[b]=[],this.Qo-=this.bp[b],this.bp[b]=0};f.prototype.SA=function(a,d,l){var e=new b;e.it();
e.hw=l;l=f.$g(l);e.Uu=l;l=f.Wf(l);if(a+1>this.sn.length)for(var g=0,h=Math.max(2,a+1);g<h;g++)this.sn.push([]);g=this.sn[a][l];void 0===g&&(g=new c,this.sn[a][l]=g);e.xG=d;g.SJ(e);this.bp[a]++;this.Qo++;this.Hj=Math.max(this.Hj,a)};f.Wf=function(b){return 0<b?a.J.truncate(Math.log(b)/Math.log(4)+0.5):0};f.$g=function(b){var c=b.F();if(a.U.Th(c))return b.G();if(c==a.j.Point)return 1;if(c==a.j.Envelope)return 4;if(a.U.Mc(c))return 2;throw a.g.xa();};return f}();a.iI=d})(y||(y={}));(function(a){var b=
function(b){function c(){b.apply(this,arguments)}I(c,b);c.prototype.F=function(){return 1};c.prototype.aa=function(b,c,d,l){return void 0===l?new a.iI(b,c,d):this.wM(b,c,d,l)};c.prototype.wM=function(b,c,d,l){b=new a.Qc([b,c]);return this.aa(b,d,l).next()};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);a.wi=b})(y||(y={}));(function(a){var b;(function(a){a[a.nextPath=0]="nextPath";a[a.nextSegment=1]="nextSegment";a[a.iterate=2]="iterate"})(b||(b={}));b=function(){function b(c,
f,d,k){this.cr=new a.i;this.KP=c;this.LP=f;this.Uo=k;this.jn=-1;this.qk=!1;var e=c.qb;null!=e&&(e=k?e.on:e.Bb,null!=e&&(this.Fc=!1,this.la=d,this.Bb=e,this.$t=this.Bb.Se(),this.Vo=this.qk=!0,this.Ib=0,k?this.jn=f.fa():this.cd=f.Da()));this.qk||(e=f.qb,null!=e&&(e=k?e.on:e.Bb,null!=e&&(this.Fc=!1,this.la=d,this.Bb=e,this.$t=this.Bb.Se(),this.qk=!0,this.Vo=!1,this.Ib=0,k?this.jn=c.fa():this.cd=c.Da())));this.qk||(this.th=k?a.Ja.AN(c,f,d,1<=c.sj(0),1<=f.sj(0)):a.Ja.zN(c,f,d))}b.prototype.next=function(){if(this.qk){if(this.Fc)return!1;
for(var b=!0;b;)switch(this.Ib){case 0:b=this.mQ();break;case 1:b=this.nQ();break;case 2:b=this.Zw();break;default:throw a.g.sa("internal error");}return this.Fc?!1:!0}return null==this.th?!1:this.th.next()};b.prototype.jk=function(){return this.qk?this.Vo?this.Bb.ea(this.Qq):this.Uo?this.jn:this.cd.Kb():this.th.jk(this.th.Ff)};b.prototype.fk=function(){return this.qk?this.Vo?this.Uo?this.jn:this.cd.Kb():this.Bb.ea(this.Qq):this.th.fk(this.th.nf)};b.prototype.Ew=function(){if(!this.Uo)throw a.g.sa("internal error");
return this.qk?this.Vo?this.Bb.uC(this.Qq):this.cr:this.th.Ew(this.th.Ff)};b.prototype.iw=function(){if(!this.Uo)throw a.g.sa("internal error");return this.qk?this.Vo?this.cr:this.Bb.uC(this.Qq):this.th.iw(this.th.nf)};b.prototype.mQ=function(){if(!this.Uo){if(!this.cd.lb())return this.Fc=!0,!1;this.Ib=1;return!0}if(-1==--this.jn)return this.Fc=!0,!1;this.Vo?this.LP.Ti(this.jn,this.cr):this.KP.Ti(this.jn,this.cr);this.$t.Ch(this.cr,this.la);this.Ib=2;return!0};b.prototype.nQ=function(){if(!this.cd.Ma())return this.Ib=
0,!0;var a=this.cd.ja();this.$t.Gn(a,this.la);this.Ib=2;return!0};b.prototype.Zw=function(){this.Qq=this.$t.next();return-1==this.Qq?(this.Ib=this.Uo?0:1,!0):!1};return b}();a.cl=b})(y||(y={}));(function(a){a=a.jI||(a.jI={});a[a.enumClosed=1]="enumClosed";a[a.enumHasNonlinearSegments=2]="enumHasNonlinearSegments";a[a.enumOGCStartPolygon=4]="enumOGCStartPolygon";a[a.enumCalcMask=4]="enumCalcMask"})(y||(y={}));(function(a){var b=function(){function b(){}b.Gb=function(c,f,d,k,e,g,h,m,n){var q=[0,0,0],
s=[0,0,0],t=[0,0,0],u=[0,0,0,0],w=new a.da(0),x=new a.da(0),A=new a.da(0);if(null!=h||null!=m||null!=n)if(a.l.Ih(f))a.zg.Gb(c,d,k,e,g,h,m,n);else{e=a.v.X(e);d=a.v.X(d);var y=a.v.X(e-d);if(a.l.T(k,g)&&(a.l.T(d,e)||a.l.T(a.l.I(k),1.570796326794897)))null!=h&&(h.o=0),null!=m&&(m.o=0),null!=n&&(n.o=0);else{if(a.l.T(k,-g)){if(a.l.T(a.l.I(k),1.570796326794897)){null!=h&&(h.o=2*a.v.gg(c,f));null!=m&&(m.o=0<k?a.v.X(3.141592653589793-a.v.X(e)):a.v.X(e));null!=n&&(n.o=0<k?a.v.X(e):a.v.X(3.141592653589793-a.v.X(e)));
return}a.l.T(a.l.I(y),3.141592653589793)&&(null!=h&&(h.o=2*a.v.gg(c,f)),null!=m&&(m.o=0),null!=n&&(n.o=0))}else{if(a.l.T(a.l.I(k),1.570796326794897)||a.l.T(a.l.I(g),1.570796326794897)){a.Yj.Gb(c,f,d,k,e,g,h,m,n);return}if(a.l.T(d,e)||a.l.T(a.l.I(y),3.141592653589793)){a.Yj.Gb(c,f,d,k,e,g,h,m,n);return}if(a.l.Wc(k)){a.Yj.Gb(c,f,d,k,e,g,h,m,n);return}}var O=Math.sqrt(1-f);e=a.v.X(e-d);d=0;a.v.xm(f,k,d,w,x,A);q[0]=w.o;q[1]=x.o;q[2]=A.o;a.v.xm(f,g,e,w,x,A);s[0]=w.o;s[1]=x.o;s[2]=A.o;t[0]=0;t[1]=0;t[2]=
-1*f*a.v.n(1,f,k)*Math.sin(k);0>e?a.v.Cp(t,s,q,u,0):a.v.Cp(t,q,s,u,0);var C=u[1],x=[0,0,0],A=[0,0,0],G=[0,0,0],q=[0,0,0],w=[0,0,0],M=Math.acos(u[2]/1),D=u[0]/-C,C=u[3]/-C,C=C/(-1*(D+1/D));a.v.lm(C,-C/D);for(var D=1-f,C=Math.tan(M),K=1+C*C/D,N=2*t[2]*C/D,C=Math.sqrt(N*N-4*K*(t[2]*t[2]/D-1)),K=2*K,D=(-N+C)/K,N=(-N-C)/K,C=Math.tan(M),K=C*D+t[2],M=(D+N)/2,t=(K+(C*N+t[2]))/2,C=a.v.lm(D-M,K-t),D=1.570796326794897*(t/O),N=0;100>N;N++){K=a.v.Tk(f,D);K=K*K/Math.cos(D)*(Math.sin(D)-t*K/(1*(1-f)));if(a.l.Wc(K))break;
D-=K}var t=a.v.n(1,f,D)*Math.cos(D),t=Math.sqrt((t-M)*(t+M)),C=1-C/t,C=C*(2-C),K=a.v.jm(x),M=a.v.jm(A),D=a.v.jm(G),E=a.v.Pr(G,x),N=a.v.Pr(G,A);a.v.Tu(G,x,q);a.v.Tu(G,A,w);x=Math.acos(E/(D*K));A=Math.acos(N/(D*M));A*=a.l.ob(1,a.v.Pr(q,w));if(1.570796326794897<=a.l.I(x)&&1.570796326794897<=a.l.I(A)||3.141592653589793<a.l.I(x-A))x=(3.141592653589793-a.l.I(x))*a.l.ob(1,x),A=(3.141592653589793-a.l.I(A))*a.l.ob(1,A);q=a.v.Si(C,A);w=a.v.q(t,C,a.v.Si(C,x));q=a.v.q(t,C,q);q=a.l.I(q-w)*c;x=new a.da(0);A=new a.da(0);
G=u[1]/1;G*=-a.l.ob(1,y);w=Math.acos(G)*a.l.ob(1,y);b.hf(c,f,d,k,q,w,x,A);a.l.T(e,x.o)&&a.l.T(g,A.o)||(C=a.v.lm(a.v.X(e-x.o),g-A.o),b.hf(c,f,d,k,q,a.v.X(w+3.141592653589793),x,A),K=a.v.lm(a.v.X(e-x.o),g-A.o),K<C&&(w=a.v.X(w+3.141592653589793)));x=[0,0,0,0];A=[0,0,0,0];t=[0,0,0];C=[0,0,0];c=[0,0,0];d=[0,0,0];k=[0,0,0];G=[0,0,0];t[0]=0;t[1]=0;t[2]=O;C[0]=0;C[1]=0;C[2]=0;a.v.Cp(C,t,s,x,0);a.l.Wc(g)?(c[0]=s[0],c[1]=s[1],c[2]=1,d[0]=1*Math.cos(e)-1*Math.sin(e),d[1]=1*Math.sin(e)+1*Math.cos(e)):(C=a.v.n(1,
f,g)*Math.cos(g),c[0]=0,c[1]=0,s[2]+=Math.tan(1.570796326794897-a.l.I(g))*C*a.l.ob(1,g),d[0]=C*Math.cos(e)-C*Math.sin(e),d[1]=C*Math.sin(e)+C*Math.cos(e));d[2]=s[2];a.v.Cp(s,d,c,A,1);a.v.Tu(A,x,k);a.v.Tu(A,u,G);G=a.v.Pr(k,G)/(a.v.jm(k)*a.v.jm(G));G*=a.l.ob(1,y);f=Math.acos(G)*-a.l.ob(1,y);0<w&&0<f?f=a.v.X(f+3.141592653589793):0>w&&0>f&&(f=a.v.X(f+3.141592653589793));null!=h&&(h.o=q);null!=m&&(m.o=w);null!=n&&(n.o=f)}}};b.hf=function(b,c,d,k,e,g,h,m){var n=[0,0,0],q=[0,0,0],s=[0,0,0],t=[0,0,0],z=[0,
0,0],u=[0,0,0],w=[0,0,0],x=[0,0,0,0],A=new a.da(0),y=new a.da(0),O=new a.da(0),C=new a.da(0),G=new a.da(0),M=new a.da(0);if(null!=h&&null!=m)if(a.l.Ih(c))a.zg.hf(b,d,k,e,g,h,m);else if(a.l.Wc(e))null!=h&&(h.o=d),null!=m&&(m.o=k);else if(g=a.v.X(g),0>e&&(e=a.l.I(e),g=a.v.X(g+3.141592653589793)),d=a.v.X(d),k=a.v.X(k),1.570796326794897<a.l.I(k)&&(d=a.v.X(d+3.141592653589793),k=a.l.ob(3.141592653589793,k)-k),a.l.T(a.l.I(k),1.570796326794897)||a.l.Wc(k)||a.l.Wc(g)||a.l.T(a.l.I(g),3.141592653589793))a.Yj.hf(b,
c,d,k,e,g,h,m);else{var D=Math.sqrt(1-c);b=e/b;a.v.xm(c,k,0,C,G,M);n[0]=C.o;n[1]=G.o;n[2]=G.o;w[0]=0;w[1]=0;w[2]=-1*c*a.v.n(1,c,k)*Math.sin(k);C=a.v.n(1,c,k);G=a.v.X(1.570796326794897-g);M=Math.sin(G);e=Math.cos(k);k=Math.sin(k);z[0]=C*e-k*M;z[1]=Math.cos(G);z[2]=(1-c)*C*k+e*M;0>g?a.v.Cp(w,z,n,x,0):a.v.Cp(w,n,z,x,0);n=Math.acos(x[2]/1);x=Math.atan2(-x[1],-x[0]);k=1-c;z=Math.tan(n);G=1+z*z/k;C=2*w[2]*z/k;z=Math.sqrt(C*C-4*G*(w[2]*w[2]/k-1));G*=2;k=(-C+z)/G;C=(-C-z)/G;z=Math.tan(n);G=z*k+w[2];n=(k+
C)/2;w=(G+(z*C+w[2]))/2;z=a.v.lm(k-n,G-w);D=1.570796326794897*(w/D);for(k=0;100>k;k++){C=a.v.Tk(c,D);C=C*C/Math.cos(D)*(Math.sin(D)-w*C/(1*(1-c)));if(a.l.Wc(C))break;D-=C}D=a.v.n(1,c,D)*Math.cos(D);D=Math.sqrt((D-n)*(D+n));w=1-z/D;w*=2-w;Math.cos(-x);Math.sin(-x);n=a.v.Pr(u,q);z=a.v.jm(q);u=a.v.jm(u);u=Math.acos(n/(u*z));u*=a.l.ob(1,q[0]);g=(a.v.q(D,w,a.v.Si(w,u))+b*a.l.ob(1,g))/a.v.gg(D,w);g=a.v.X(1.570796326794897*g);g=a.v.yn(w,g);a.v.n(D,w,g);z=a.v.X(x+d);n=Math.cos(z);z=Math.sin(z);s[0]=t[0]*
n+t[1]*-z;s[1]=t[0]*z+t[1]*n;s[2]=t[2];a.v.IK(c,s[0],s[1],s[2],O,y,A);null!=h&&(h.o=y.o);null!=m&&(m.o=O.o)}};return b}();a.$z=b})(y||(y={}));(function(a){var b=function(){function b(c){this.Oa=null;this.zr=new a.b;this.Ar=new a.b;this.a=c}b.prototype.compare=function(a,b,c){this.a.vc(b,this.zr);this.a.vc(a.ea(c),this.Ar);return this.zr.compare(this.Ar)};return b}(),c=function(){function b(c){this.of=new a.b;this.mn=new a.b;this.a=c}b.prototype.bh=function(a){this.of.K(a)};b.prototype.compare=function(a,
b){this.a.vc(a.ea(b),this.mn);return this.of.compare(this.mn)};return b}(),d=function(a){function b(c){a.call(this,c.a,c.la,!1);this.bb=c}I(b,a);b.prototype.compare=function(a,b,c){if(this.Zf)return-1;var f=this.bb.Dd.Em(this.bb.lh(b));a=a.ea(c);var d=this.bb.Dd.Em(this.bb.lh(a));this.Cl=c;return this.JB(b,f,a,d)};return b}(a.hA),f=function(a){function b(c){a.call(this,c.a,c.la);this.bb=c}I(b,a);b.prototype.compare=function(a,b){if(this.Zf)return-1;var c=this.bb.Dd.Em(this.bb.lh(a.ea(b)));this.Cl=
b;return this.KB(b,c)};return b}(a.II),e=function(){function k(){this.Ac=this.Ve=this.$m=this.Dd=this.Kg=this.od=this.ab=this.a=null;this.og=!1;this.Xg=this.Kl=this.Wd=this.Mj=this.Mg=this.Ij=this.sf=this.Md=null;this.Yg=this.pp=this.Sx=this.la=0;this.Gt=this.Om=!1;this.nn=new a.b;this.Ck=new a.b;this.ab=new a.Gc(8);this.od=new a.Gc(5);this.Kg=new a.Tr;this.Dd=new a.Tr;this.og=!1;this.Xg=new a.b;this.Xg.na(0,0);this.la=0;this.Yg=-1;this.Om=!1;this.a=null;this.Ve=new a.bj;this.Ac=new a.bj;this.Mg=
new a.ha(0);this.Mj=new a.gA;this.sf=new a.ha(0);this.Ij=new a.ha(0);this.$m=new a.Wa}k.prototype.FS=function(b,c){var f=new a.Bg;f.Ny();b.Pe(f);this.Mp(b);this.Om=!1;this.la=c;this.Sx=c*c;var d=this.Wy();b.Pe(f);d||(this.IM(),d||this.Wy());-1!=this.Yg&&(this.a.cf(this.Yg),this.Yg=-1);this.a=null;return this.Om};k.prototype.JS=function(a,b){this.Mp(a);this.Om=!1;this.la=b;this.Sx=b*b;this.og=!1;this.Wy();this.og||(this.og=1==a.wo(b,!0,!1));-1!=this.Yg&&(this.a.cf(this.Yg),this.Yg=-1);this.a=null};
k.prototype.Uf=function(a,b){return this.ab.P(a,0+b)};k.prototype.yy=function(a,b,c){this.ab.N(a,0+b,c)};k.prototype.lh=function(a){return this.ab.P(a,2)};k.prototype.TR=function(a,b){this.ab.N(a,2,b)};k.prototype.FC=function(a,b){return this.ab.P(a,3+b)};k.prototype.Do=function(a){return this.ab.P(a,7)};k.prototype.Nk=function(a,b){this.ab.N(a,7,b)};k.prototype.Fo=function(a,b){return this.ab.P(a,3+this.Co(a,b))};k.prototype.Op=function(a,b,c){this.ab.N(a,3+this.Co(a,b),c)};k.prototype.YN=function(a,
b){return this.ab.P(a,5+this.Co(a,b))};k.prototype.Qp=function(a,b,c){this.ab.N(a,5+this.Co(a,b),c)};k.prototype.pq=function(a){return this.od.P(a,0)};k.prototype.QR=function(a,b){this.od.N(a,0,b)};k.prototype.nw=function(a){return this.od.P(a,4)};k.prototype.Jp=function(a,b){this.od.N(a,4,b)};k.prototype.qj=function(a){return this.od.P(a,1)};k.prototype.dm=function(a,b){this.od.N(a,1,b)};k.prototype.mw=function(a){return this.od.P(a,3)};k.prototype.Gr=function(a,b){this.od.N(a,3,b)};k.prototype.Ul=
function(a){var b=this.od.ce(),c=this.Kg.jh();this.QR(b,c);-1!=a?(this.Kg.addElement(c,a),this.a.mb(a,this.Yg,b),this.Jp(b,this.a.hb(a))):this.Jp(b,-1);return b};k.prototype.$L=function(a){this.od.Kc(a)};k.prototype.QA=function(a,b){this.Kg.addElement(this.pq(a),b);this.a.mb(b,this.Yg,a)};k.prototype.qr=function(a){var b=this.ab.ce(),c=this.Dd.jh();this.TR(b,c);-1!=a&&this.Dd.addElement(c,a);return b};k.prototype.RA=function(a,b){this.Dd.addElement(this.lh(a),b)};k.prototype.Ms=function(a){this.ab.Kc(a);
a=this.Mg.Ps(a);0<=a&&this.Mg.QE(a)};k.prototype.yi=function(b,c){if(-1==this.Uf(b,0))this.yy(b,0,c);else if(-1==this.Uf(b,1))this.yy(b,1,c);else throw a.g.xa();this.zv(b,c)};k.prototype.zv=function(a,b){var c=this.qj(b);if(-1!=c){var f=this.Fo(c,b);this.Qp(f,b,a);this.Op(a,b,f);this.Op(c,b,a);this.Qp(a,b,c)}else this.Qp(a,b,a),this.Op(a,b,a),this.dm(b,a)};k.prototype.Co=function(a,b){return this.Uf(a,0)==b?0:1};k.prototype.Tl=function(a,b){var c=this.mw(b);-1!=c&&(this.Ve.ld(c,-1),this.Gr(b,-1));
var f=this.qj(a),c=this.qj(b);if(-1!=c){var d=f=c,k=!1;do{var k=!1,l=this.Co(f,b),e=this.FC(f,l);if(this.Uf(f,l+1&1)==a){this.Ns(f);this.Dd.Fg(this.lh(f));this.Ms(f);if(f==e){c=-1;break}c==f&&(c=this.qj(b),d=e,k=!0)}f=e}while(f!=d||k);if(-1!=c){do l=this.Co(f,b),e=this.FC(f,l),this.yy(f,l,a),f=e;while(f!=d);f=this.qj(a);-1!=f?(d=this.Fo(f,a),k=this.Fo(c,a),d==f?(this.dm(a,c),this.zv(f,a),this.dm(a,f)):k==c&&this.zv(c,a),this.Op(c,a,d),this.Qp(d,a,c),this.Op(f,a,k),this.Qp(k,a,f)):this.dm(a,c)}}c=
this.pq(a);f=this.pq(b);for(d=this.Kg.hc(f);-1!=d;d=this.Kg.cb(d))this.a.mb(this.Kg.ea(d),this.Yg,a);this.Kg.Pv(c,f);this.$L(b)};k.prototype.XP=function(a,b){var c=this.Uf(a,0),f=this.Uf(a,1),d=this.Uf(b,0),k=this.Uf(b,1);this.Dd.Pv(this.lh(a),this.lh(b));b==this.qj(c)&&this.dm(c,a);b==this.qj(f)&&this.dm(f,a);this.Ns(b);this.Ms(b);c==d&&f==k||f==d&&c==k||(this.Am(c,this.nn),this.Am(d,this.Ck),this.nn.vb(this.Ck)?(c!=d&&this.Tl(c,d),f!=k&&this.Tl(f,k)):(f!=d&&this.Tl(f,d),c!=k&&this.Tl(c,k)))};k.prototype.Ns=
function(a){var b=this.Uf(a,1);this.SB(a,this.Uf(a,0));this.SB(a,b)};k.prototype.SB=function(a,b){var c=this.Fo(a,b),f=this.YN(a,b),d=this.qj(b);c!=a?(this.Op(f,b,c),this.Qp(c,b,f),d==a&&this.dm(b,c)):this.dm(b,-1)};k.prototype.YA=function(a,b,c){var f=this.Dd.hc(a),d=this.Dd.ea(f);a=this.se(d);var k=this.se(this.a.Y(d));this.a.Rp(d,b,c,!0);for(f=this.Dd.cb(f);-1!=f;f=this.Dd.cb(f)){var d=this.Dd.ea(f),l=this.se(d)==a;this.a.Rp(d,b,c,l)}f=b.Ho(c,0).Nb();b=b.Ho(c,b.kk(c)-1).pc();this.yG(a,f);this.yG(k,
b)};k.prototype.PB=function(a,b,c){var f=this.lh(a),d=this.Uf(a,0),k=this.Uf(a,1),l=this.qr(-1);this.Mg.add(l);this.Nk(l,-3);this.sf.add(l);this.yi(l,d);a=1;for(b=b.kk(c);a<b;a++)c=this.Ul(-1),this.Ij.add(c),this.sf.add(c),this.yi(l,c),l=this.qr(-1),this.Mg.add(l),this.Nk(l,-3),this.sf.add(l),this.yi(l,c);this.yi(l,k);for(f=this.Dd.hc(f);-1!=f;f=this.Dd.cb(f))if(k=this.Dd.ea(f),this.se(k)==d){a=0;do 0<a&&(l=this.sf.get(a-1),this.QA(l,k),-1==this.nw(l)&&this.Jp(l,this.a.hb(k))),l=this.sf.get(a),a+=
2,this.RA(l,k),k=this.a.Y(k);while(a<this.sf.size)}else{a=this.sf.size-1;do a<this.sf.size-2&&(l=this.sf.get(a+1),this.QA(l,k),0>this.nw(l)&&this.Jp(l,this.a.hb(k))),l=this.sf.get(a),a-=2,this.RA(l,k),k=this.a.Y(k);while(0<=a)}this.sf.clear(!1)};k.prototype.se=function(a){return this.a.Sa(a,this.Yg)};k.prototype.UE=function(b,c,f){var d=this.Uf(c,0),k=new a.b;this.Am(d,k);var l=new a.b,e=this.Uf(c,1);this.Am(e,l);var r=f.kk(b),g=f.Ho(b,0),h=new a.b;g.gt(h);if(!k.vb(h)){if(!this.og){var m=k.compare(this.Xg),
h=h.compare(this.Xg);0>m*h&&(this.og=!0)}this.lC(d,this.sf);this.Ij.add(d)}!this.og&&1<r&&(m=k.compare(l),g=g.pc(),k.compare(g)!=m||g.compare(l)!=m?this.og=!0:0>g.compare(this.Xg)&&(this.og=!0));g=f.Ho(b,r-1);b=g.pc();l.vb(b)||(this.og||(m=l.compare(this.Xg),h=b.compare(this.Xg),0>m*h&&(this.og=!0)),this.lC(e,this.sf),this.Ij.add(e));this.sf.add(c);l=0;for(e=this.sf.size;l<e;l++)b=this.sf.get(l),f=this.Do(b),a.Gc.Yw(f)&&(this.Ac.ld(f,-1),this.Nk(b,-1)),b!=c&&-3!=this.Do(b)&&(this.Mg.add(b),this.Nk(b,
-3));this.sf.clear(!1)};k.prototype.MK=function(a,b){this.Md.compare(this.Ac,this.Ac.ea(a),b);this.Md.Zf&&(this.Md.jq(),this.dC(a,b))};k.prototype.dC=function(b,c){this.Om=!0;var f=this.Ac.ea(b),d=this.Ac.ea(c),k,l;l=this.Dd.Em(this.lh(f));var e=this.Dd.Em(this.lh(d));k=this.a.dc(l);null==k&&(null==this.Wd&&(this.Wd=new a.zb),this.a.Pc(l,this.Wd),k=this.Wd);l=this.a.dc(e);null==l&&(null==this.Kl&&(this.Kl=new a.zb),this.a.Pc(e,this.Kl),l=this.Kl);this.Mj.An(k);this.Mj.An(l);this.Mj.Ha(this.la,!0)&&
(this.og=!0);this.fG(f,d,-1,this.Mj);this.Mj.clear()};k.prototype.UM=function(b,c){this.Om=!0;var f=this.Ac.ea(c),d,k=this.Dd.Em(this.lh(f));d=this.a.dc(k);null==d&&(null==this.Wd&&(this.Wd=new a.zb),this.a.Pc(k,this.Wd),d=this.Wd);k=this.qC(b);this.Mj.An(d);this.a.Jk(k,this.$m);this.Mj.Sw(this.la,this.$m,!0);this.fG(f,-1,b,this.Mj);this.Mj.clear()};k.prototype.CO=function(){if(0!=this.Mg.size)for(;0!=this.Mg.size;){if(this.Mg.size>Math.max(100,this.a.qd)){this.Mg.clear(!1);this.og=!0;break}var a=
this.Mg.uc();this.Mg.bf();this.Nk(a,-1);-1!=this.SO(a)&&this.BO(a);this.Nm=!1}};k.prototype.BO=function(a){var b;this.Nm?(b=this.Ac.us(this.lE,this.iE,a,!0),this.Nm=!1):b=this.Ac.PA(a);-1==b?this.XP(this.Ac.ea(this.Ac.tC()),a):(this.Nk(a,b),this.Md.Zf&&(this.Md.jq(),this.dC(this.Md.Cl,b)))};k.prototype.SO=function(b){var c=this.Uf(b,0);b=this.Uf(b,1);this.Am(c,this.nn);this.Am(b,this.Ck);if(a.b.$b(this.nn,this.Ck)<=this.Sx)return this.og=!0,-1;var f=this.nn.compare(this.Xg),d=this.Ck.compare(this.Xg);
return 0>=f&&0<d?b:0>=d&&0<f?c:-1};k.prototype.GM=function(){var b=new a.ha(0);b.yb(this.a.qd);for(var c=this.a.Ep(),f=c.next();-1!=f;f=c.next())-1!=this.a.Sa(f,this.Yg)&&b.add(f);this.a.Lu(b,b.size);this.HM(b)};k.prototype.HM=function(c){this.Ve.clear();this.Ve.ee(c.size);this.Ve.In(new b(this.a));var f=new a.b;f.Eh();for(var d=-1,k=new a.b,l=0,e=c.size;l<e;l++){var r=c.get(l);this.a.vc(r,k);k.vb(f)?(r=this.a.Sa(r,this.Yg),this.Tl(d,r)):(d=this.se(r),this.a.vc(r,f),r=this.Ve.rm(r),this.Gr(d,r))}};
k.prototype.IM=function(){var b=new a.ha(0);b.yb(this.a.qd);for(var c=this.Ve.hc(-1);-1!=c;c=this.Ve.cb(c))b.add(this.Ve.ea(c));this.Ve.clear();this.a.Lu(b,b.size);for(var c=0,f=b.size;c<f;c++){var d=b.get(c),k=this.se(d),d=this.Ve.rm(d);this.Gr(k,d)}};k.prototype.lC=function(b,c){var f=this.qj(b);if(-1!=f){var d=f;do a.Gc.Yw(this.Do(d))&&c.add(d),d=this.Fo(d,b);while(d!=f)}};k.prototype.yG=function(a,b){for(var c=this.Kg.hc(this.pq(a));-1!=c;c=this.Kg.cb(c))this.a.Yi(this.Kg.ea(c),b)};k.prototype.fG=
function(a,b,c,f){this.Ns(a);-1!=b&&this.Ns(b);this.UE(0,a,f);-1!=b&&this.UE(1,b,f);-1!=c&&(f.of.A(this.nn),this.Am(c,this.Ck),this.Ck.vb(this.nn)||this.Ij.add(c));c=0;for(var d=this.Ij.size;c<d;c++){var k=this.Ij.get(c),l=this.mw(k);-1!=l&&(this.Ve.ld(l,-1),this.Gr(k,-1))}c=this.lh(a);d=-1!=b?this.lh(b):-1;this.YA(c,f,0);-1!=b&&this.YA(d,f,1);this.PB(a,f,0);-1!=b&&this.PB(b,f,1);this.Dd.Fg(c);this.Ms(a);-1!=b&&(this.Dd.Fg(d),this.Ms(b));c=0;for(d=this.Ij.size;c<d;c++)k=this.Ij.get(c),k==this.pp&&
(this.Gt=!0),l=this.mw(k),-1==l&&(l=this.Ve.PA(this.qC(k)),-1==l?(a=this.se(this.Ve.ea(this.Ve.tC())),this.Tl(a,k)):this.Gr(k,l));this.Ij.clear(!1)};k.prototype.Am=function(a,b){this.a.SC(this.nw(a),b)};k.prototype.qC=function(a){return this.Kg.Em(this.pq(a))};k.prototype.Wy=function(){this.Gt=!1;this.pp=-1;null==this.Md&&(this.Ac.Bt=!1,this.Md=new d(this),this.Ac.Rm=this.Md);var b=new a.ha(0),k=null,e=null,r=0;this.iE=this.lE=-1;this.Nm=!1;for(var g=this.Ve.hc(-1);-1!=g;){r++;this.Nm=!1;var h=this.Ve.ea(g);
this.pp=this.se(h);this.a.vc(h,this.Xg);this.Md.XF(this.Xg.y,this.Xg.x);var m=!1,n=this.qj(this.pp),m=-1==n;if(!m){h=n;do{var q=this.Do(h);-1==q?(this.Mg.add(h),this.Nk(h,-3)):-3!=q&&b.add(q);h=this.Fo(h,this.pp)}while(h!=n)}if(0<b.size){this.Nm=1==b.size&&1==this.Mg.size;m=0;for(n=b.size;m<n;m++)h=this.Ac.ea(b.get(m)),this.Nk(h,-2);for(var s=-2,t=-2,m=0,n=b.size;m<n;m++){q=b.get(m);if(-2==s){var u=this.Ac.he(q);-1!=u?(h=this.Ac.ea(u),h=this.Do(h),-2!=h&&(s=u)):s=-1}-2==t&&(q=this.Ac.cb(q),-1!=q?
(h=this.Ac.ea(q),h=this.Do(h),-2!=h&&(t=q)):t=-1);if(-2!=s&&-2!=t)break}m=0;for(n=b.size;m<n;m++)q=b.get(m),h=this.Ac.ea(q),this.Ac.ld(q,-1),this.Nk(h,-1);b.clear(!1);this.lE=-1!=s?s:-1;this.iE=-1!=t?t:-1;-1!=s&&-1!=t?this.Nm||this.MK(s,t):-1==s&&-1==t&&(this.Nm=!1)}else m&&(null==k&&(k=new f(this)),k.bh(this.Xg),this.Ac.sF(k),k.Zf&&(k.jq(),this.UM(this.pp,k.Cl)));this.CO();this.Gt?(this.Gt=!1,null==e&&(e=new c(this.a)),e.bh(this.Xg),g=this.Ve.sF(e)):g=this.Ve.cb(g)}return this.Om};k.prototype.Mp=
function(b){this.a=b;this.Yg=this.a.re();this.ab.ee(b.qd+32);this.od.ee(b.qd);this.Kg.Cr(b.qd);this.Kg.$l(b.qd);this.Dd.Cr(b.qd+32);this.Dd.$l(b.qd+32);for(b=this.a.ad;-1!=b;b=this.a.we(b))if(a.U.Lc(this.a.Mb(b)))for(r=this.a.Wb(b);-1!=r;r=this.a.cc(r)){var c=this.a.Ia(r),f=this.a.Db(r),d=this.Ul(f),k=this.qr(f);this.yi(k,d);g=this.a.Y(f);f=0;for(c-=2;f<c;f++){var l=this.a.Y(g),e=this.Ul(g);this.yi(k,e);k=this.qr(g);this.yi(k,e);g=l}this.a.wc(r)?(e=this.Ul(g),this.yi(k,e),k=this.qr(g),this.yi(k,e),
this.yi(k,d)):(e=this.Ul(g),this.yi(k,e))}else for(var r=this.a.Wb(b);-1!=r;r=this.a.cc(r))for(var g=this.a.Db(r),d=0,c=this.a.Ia(r);d<c;d++)this.Ul(g),g=this.a.Y(g);this.GM()};return k}();a.aA=e})(y||(y={}));(function(a){var b=function(b){function c(f,d,k){b.call(this);if(void 0!==f)if(void 0!==k){this.description=a.Pd.Tf();var l=new a.fe;l.L(f,d,k);this.Oy(l)}else if(void 0!==d)this.description=a.Pd.Tf(),this.jc(f,d);else if(f instanceof a.qa)this.description=f;else if(f instanceof a.b)this.description=
a.Pd.Tf(),this.jc(f);else throw a.g.O();else this.description=a.Pd.Tf()}I(c,b);c.prototype.A=function(b){if(void 0!==b){if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");b.na(this.ga[0],this.ga[1])}else{if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");b=new a.b;b.na(this.ga[0],this.ga[1]);return b}};c.prototype.jc=function(a,b){"number"===typeof a?(this.rc(),null==this.ga&&this.jo(),this.ga[0]=a,this.ga[1]=b):(this.rc(),
this.jc(a.x,a.y))};c.prototype.Kw=function(){if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");var b=new a.fe;b.x=this.ga[0];b.y=this.ga[1];this.description.WC()?b.z=this.ga[2]:b.z=a.qa.ue(1);return b};c.prototype.Oy=function(b){this.rc();var c=this.hasAttribute(1);c||a.qa.nD(1,b.z)||(this.Oe(1),c=!0);null==this.ga&&this.jo();this.ga[0]=b.x;this.ga[1]=b.y;c&&(this.ga[2]=b.z)};c.prototype.lk=function(){if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");
return this.ga[0]};c.prototype.pS=function(a){this.setAttribute(0,0,a)};c.prototype.mk=function(){if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");return this.ga[1]};c.prototype.$F=function(a){this.setAttribute(0,1,a)};c.prototype.kO=function(){return this.md(1,0)};c.prototype.qS=function(a){this.setAttribute(1,0,a)};c.prototype.MN=function(){return this.md(2,0)};c.prototype.aS=function(a){this.setAttribute(2,0,a)};c.prototype.Rc=function(){return this.nC(3,
0)};c.prototype.md=function(b,c){var d=this.description.zf(b);return 0<=d?this.ga[this.description.fj(d)+c]:a.qa.ue(b)};c.prototype.nC=function(b,c){var d=this.description.zf(b);return 0<=d?this.ga[this.description.fj(d)+c]:a.qa.ue(b)};c.prototype.setAttribute=function(a,b,c){this.rc();var d=this.description.zf(a);0>d&&(this.Oe(a),d=this.description.zf(a));null==this.ga&&this.jo();this.ga[this.description.fj(d)+b]=c};c.prototype.F=function(){return a.j.Point};c.prototype.gb=function(){return 0};c.prototype.Ka=
function(){this.rc();null!=this.ga&&(this.ga[0]=NaN,this.ga[1]=NaN)};c.prototype.om=function(b){if(null!=this.ga){for(var c=a.Pd.hu(b,this.description),d=[],l=0,e=0,g=b.Ba;e<g;e++){var h=b.Id(e),m=a.qa.Xa(h);if(-1==c[e])for(var n=a.qa.ue(h),h=0;h<m;h++)d[l]=n,l++;else{n=this.description.fj(c[e]);for(h=0;h<m;h++)d[l]=this.ga[n],l++,n++}}this.ga=d}this.description=b};c.prototype.jo=function(){this.iF(this.description.me.length);c.pb(this.description.me,this.ga,this.description.me.length);this.ga[0]=
NaN;this.ga[1]=NaN};c.prototype.Pe=function(b){if(b instanceof a.Bg){if(!this.tc()){var c=this.A();b.Zi(c,c);this.jc(c)}}else this.tc()||(this.Oe(1),c=this.Kw(),this.Oy(b.Rn(c)))};c.prototype.copyTo=function(b){if(b.F()!=a.j.Point)throw a.g.O();b.rc();null==this.ga?(b.Ka(),b.ga=null,b.Qf(this.description)):(b.Qf(this.description),b.iF(this.description.me.length),c.pb(this.ga,b.ga,this.description.me.length))};c.prototype.Qa=function(){return new c(this.description)};c.prototype.u=function(){return this.tc()};
c.prototype.tc=function(){return null==this.ga||isNaN(this.ga[0])||isNaN(this.ga[1])};c.prototype.Dp=function(a){a.Ka();this.description!=a.description&&a.Qf(this.description);a.Eb(this)};c.prototype.s=function(a){this.tc()?a.Ka():(a.w=this.ga[0],a.D=this.ga[1],a.C=this.ga[0],a.H=this.ga[1])};c.prototype.Dn=function(a){if(this.tc())a.Ka();else{var b=this.Kw();a.w=b.x;a.D=b.y;a.Ke=b.z;a.C=b.x;a.H=b.y;a.ig=b.z}};c.prototype.Ah=function(b,c){var d=new a.Od;if(this.tc())return d.Ka(),d;var l=this.md(b,
c);d.ra=l;d.wa=l;return d};c.prototype.iF=function(b){if(null==this.ga)this.ga=a.J.Lh(b);else if(this.ga.length<b){for(var c=this.ga.slice(0),d=this.ga.length;d<b;d++)c[d]=0;this.ga=c}};c.pb=function(a,b,c){if(0<c)for(c=0;c<a.length;c++)b[c]=a[c]};c.prototype.mc=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.tc())return a.tc()?!0:!1;for(var b=0,d=this.description.me.length;b<d;b++)if(this.ga[b]!=a.ga[b])return!1;return!0};c.prototype.ic=function(){var b=
this.description.ic();if(!this.tc())for(var c=0,d=this.description.me.length;c<d;c++)var l=this.ga[c],l=a.J.truncate(l^l>>>32),b=a.J.kg(l,b);return b};c.prototype.Rf=function(){return null};return c}(a.U);a.Wa=b})(y||(y={}));(function(a){var b=function(){function a(b,c,d){void 0!==b&&(this.x=b,this.y=c,this.z=d)}a.Pa=function(b,c,d){var k=new a;k.x=b;k.y=c;k.z=d;return k};a.prototype.L=function(a,b,c){this.x=a;this.y=b;this.z=c};a.prototype.Ku=function(){this.z=this.y=this.x=0};a.prototype.normalize=
function(){var a=this.length();0==a&&(this.x/=a,this.y/=a,this.z/=a)};a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};a.prototype.sub=function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)};a.prototype.yp=function(b){return new a(this.x*b,this.y*b,this.z*b)};a.prototype.FA=function(){this.x=NaN};a.prototype.ov=function(){return isNaN(this.x)};return a}();a.fe=b})(y||(y={}));(function(a){var b=function(){function b(a,c,d){this.fu=this.Xt=null;this.Gf=
c;this.JP=c.y-d;this.IP=c.y+d;this.vp=0;this.hx=a;this.la=d;this.TP=d*d;this.ix=0!=d;this.wt=!1}b.prototype.result=function(){return 0!=this.vp?1:0};b.prototype.CJ=function(b){b=b.Lb(b.Hd(this.Gf,!1));return a.b.$b(b,this.Gf)<=this.TP?!0:!1};b.prototype.WB=function(a){if(!this.ix&&(this.hx&&this.Gf.vb(a.Nb())||this.Gf.vb(a.pc())))this.wt=!0;else if(a.ka==this.Gf.y&&a.ka==a.ia){if(this.hx&&!this.ix){var b=Math.min(a.oa,a.ma),c=Math.max(a.oa,a.ma);this.Gf.x>b&&this.Gf.x<c&&(this.wt=!0)}}else if(b=!1,
c=Math.max(a.oa,a.ma),this.Gf.x>c?b=!0:this.Gf.x>=Math.min(a.oa,a.ma)&&(b=0<a.mt(!0,this.Gf.y,this.fu,null)&&this.fu[0]<=this.Gf.x),b){if(this.Gf.y==a.Nb().y){if(this.Gf.y<a.pc().y)return}else if(this.Gf.y==a.pc().y&&this.Gf.y<a.Nb().y)return;this.vp=this.hx?this.vp^1:this.vp+(a.Nb().y>a.pc().y?1:-1)}};b.prototype.yr=function(a){var b=a.Ah(0,1);if(b.ra>this.IP||b.wa<this.JP)return!1;if(this.ix&&this.CJ(a))return!0;if(b.ra>this.Gf.y||b.wa<this.Gf.y)return!1;null==this.Xt&&(this.Xt=[null,null,null,
null,null]);null==this.fu&&(this.fu=[0,0,0]);b=a.TC(this.Xt);if(0<b)for(a=0;a<b;a++){var c=this.Xt[a].get();this.WB(c);if(this.wt)return!0}else if(this.WB(a),this.wt)return!0;return!1};b.W=function(a,c,d){c=new b(0==a.Dm(),c,d);for(a=a.Da();a.lb();)for(;a.Ma();)if(d=a.ja(),c.yr(d))return-1;return c.result()};b.Cd=function(c,f,d,k){var e=new a.i;c.ed(e);e.R(k,k);var g=new b(0==c.Dm(),d,k);c=c.Da();var h=new a.i;h.L(e);h.C=d.x+k;h.D=d.y-k;h.H=d.y+k;d=f.ww(h,k);for(k=d.next();-1!=k;k=d.next())if(c.Tb(f.ea(k)),
c.Ma()&&(k=c.ja(),g.yr(k)))return-1;return g.result()};b.xl=function(c,f,d){if(c.u())return 0;var k=new a.i;c.ed(k);k.R(d,d);if(!k.contains(f))return 0;k=c.qb;if(null!=k){var e=k.hi;if(null!=e){e=e.Kk(f.x,f.y);if(1==e)return 1;if(0==e)return 0}k=k.Bb;if(null!=k)return b.Cd(c,k,f,d)}return b.W(c,f,d)};b.$O=function(c,f,d,k){if(c.u())return 0;var e=new a.i;c.ed(e);e.R(k,k);if(!e.contains(f,d))return 0;e=c.qb;if(null!=e&&(e=e.hi,null!=e)){e=e.Kk(f,d);if(1==e)return 1;if(0==e)return 0}return b.W(c,a.b.Pa(f,
d),k)};b.ZO=function(a,c,d){return c.u()?0:b.xl(a,c.A(),d)};b.vD=function(c,f,d,k,e){var g=new a.i;c.ed(g);g.R(k,k);if(!g.contains(d))return 0;var h=new b(!0,d,k);if(null!=e){var m=new a.i;m.L(g);m.C=d.x+k;m.D=d.y-k;m.H=d.y+k;c=c.Da();k=e.ww(m,k);for(m=k.next();-1!=m;m=k.next())if(c.Tb(e.ea(m),f),c.Ma()&&c.Ra==f&&(m=c.ja(),h.yr(m)))return-1}else if(c=c.Da(),c.uy(f),c.lb())for(;c.Ma();)if(m=c.ja(),h.yr(m))return-1;return h.result()};b.tD=function(c,f,d){var k=new a.i;c.ed(k);k.R(d,d);if(!k.contains(f))return 0;
f=new b(!1,f,d);for(d=c.Da();d.lb();)if(!(0>c.no(d.Ra))){for(f.vp=0;d.Ma();)if(k=d.ja(),f.yr(k))return-1;if(0!=f.vp)return 1}return f.result()};b.$i=function(c,f,d,k,e){var g=c.Da();g.uy(f);if(!g.lb()||!g.Ma())throw a.g.sa("corrupted geometry");for(f=2;2==f&&g.Ma();)f=g.ja().Lb(0.5),f=b.vD(c,d,f,k,e);if(2==f)throw a.g.sa("internal error");return 1==f?!0:!1};b.Bn=function(a,b){var c=a.G();return 16>c?!1:2*c+1*(Math.log(c)/Math.log(2))*b<1*c*b};return b}();a.gf=b})(y||(y={}));(function(a){var b=function(b){function c(a){b.call(this,
!0,a)}I(c,b);c.prototype.Qa=function(){return new c(this.description)};c.prototype.gb=function(){return 2};c.prototype.F=function(){return a.j.Polygon};return c}(a.al);a.La=b})(y||(y={}));(function(a){(function(a){a[a.PiPOutside=0]="PiPOutside";a[a.PiPInside=1]="PiPInside";a[a.PiPBoundary=2]="PiPBoundary"})(a.oI||(a.oI={}));var b=function(){function b(){}b.uD=function(b,c,d){b=a.gf.ZO(b,c,d);return 0==b?0:1==b?1:2};b.ie=function(b,c,d){b=a.gf.xl(b,c,d);return 0==b?0:1==b?1:2};b.BH=function(b,c,d,
k){b=a.gf.$O(b,c,d,k);return 0==b?0:1==b?1:2};b.fU=function(b,c,d,k){return 0==a.gf.vD(b,c,d,k,null)?0:1};b.tD=function(b,c,d){return 0==a.gf.tD(b,c,d)?0:1};b.YS=function(c,f,d,k,e){if(f.length<d||e.length<d)throw a.g.O();for(var g=0;g<d;g++)e[g]=b.ie(c,f[g],k)};b.dT=function(c,f,d,k,e){if(f.length/2<d||e.length<d)throw a.g.O();for(var g=0;g<d;g++)e[g]=b.BH(c,f[2*g],f[2*g+1],k)};b.nG=function(c,f,d,k,e){if(c.F()==a.j.Polygon)b.YS(c,f,d,k,e);else if(c.F()==a.j.Envelope){var g=new a.i;c.s(g);b.iP(g,
f,d,k,e)}else throw a.g.sa("invalid_call");};b.mU=function(c,f,d,k,e){if(c.F()==a.j.Polygon)b.dT(c,f,d,k,e);else if(c.F()==a.j.Envelope){var g=new a.i;c.s(g);b.lP(g,f,d,k,e)}else throw a.g.ya();};b.iP=function(b,c,d,k,e){if(c.length<d||e.length<d)throw a.g.O();if(b.u())for(k=0;k<d;k++)e[k]=0;else{b.R(0.5*-k,0.5*-k);b.R(0.5*k,0.5*k);for(k=0;k<d;k++)b.contains(c[k])?e[k]=1:b.contains(c[k])?e[k]=2:e[k]=0}};b.lP=function(b,c,d,k,e){if(c.length/2<d||e.length<d)throw a.g.O();if(b.u())for(k=0;k<d;k++)e[k]=
0;else{b.R(0.5*-k,0.5*-k);b.R(0.5*k,0.5*k);for(k=0;k<d;k++)b.contains(c[2*k],c[2*k+1])?e[k]=1:b.contains(c[2*k],c[2*k+1])?e[k]=2:e[k]=0}};b.kT=function(a,b,c,d,e){for(var g=0;g<c;g++)a.Dq(b[g],d)?e[g]=2:e[g]=0};b.gT=function(a,b,c,d,e){var g=a.qb,h=null;null!=g&&(h=g.hi);for(var g=c,v=0;v<c;v++)if(e[v]=1,null!=h){var m=b[v];0==h.Kk(m.x,m.y)&&(e[v]=0,g--)}if(0!=g)for(a=a.Da();a.lb()&&0!=g;)for(;a.Ma()&&0!=g;){h=a.ja();for(v=0;v<c&&0!=g;v++)1==e[v]&&h.Dq(b[v],d)&&(e[v]=2,g--)}for(v=0;v<c;v++)1==e[v]&&
(e[v]=0)};b.oG=function(c,f,d,k,e){var g=c.F();if(g==a.j.Polyline)b.gT(c,f,d,k,e);else if(a.U.Mc(g))b.kT(c,f,d,k,e);else throw a.g.sa("Invalid call.");};return b}();a.hd=b})(y||(y={}));(function(a){var b=function(b){function c(a,d){2==arguments.length?(b.call(this,!1,a.description),this.ef(a),this.lineTo(d)):b.call(this,!1,a)}I(c,b);c.prototype.Qa=function(){return new c(this.description)};c.prototype.gb=function(){return 1};c.prototype.F=function(){return a.j.Polyline};return c}(a.al);a.Ya=b})(y||
(y={}));(function(a){var b=function(){function a(){}a.FT=function(){};return a}();a.QT=b})(y||(y={}));(function(a){var b=function(){function b(){}b.Qv=function(a){return a*b.qQ};b.aG=function(a,c){return b.bR(c-a)};b.jR=function(b){if(-360<=b&&720>b)return 0>b?b+=360:360<=b&&(b-=360),b;b=a.vi.gH(b);0>b&&(b+=360);return b};b.bR=function(a){a=b.jR(a);180<a&&(a-=360);return a};b.NT=0.0174532925199433;b.qQ=57.29577951308232;return b}(),c=function(){function c(){}c.po=function(b,c){var d=new a.i;b.s(d);
var l=a.Za.Gm(c),e=new a.i;e.L(l);e.w=d.w;e.C=d.C;e.R(0.01*e.ca(),0);l=a.Ja.Ad(c,d,!1);return e.contains(d)?b:a.Fd.clip(b,e,l,0)};c.Qw=function(b,d,k,e){if(!a.Za.Oo(d))throw a.g.O();var g=a.Ja.Cg(d,b,!1),h=a.Za.Gm(d),m=a.Za.Fm(d),n=m.Te().Ej,q=a.Za.et(m),m=a.Za.Ss(m),q=q*(2-q),s=0,t=new a.Od;h.vu(t);var z=[[0,0],[0,0]];2==a.Nf.Bm(d)?(z[0][0]=c.ou(e,t),z[0][1]=h.Us(),a.Za.su(),s=z[0][0]*n):s=e*n;var h=new a.da,u=new a.gd;b=u.Fb(b);for(var w=[0],x=new a.b,A=new a.b,y=new a.b,O=new a.b,C=new a.b,G=new a.b,
M=u.Wb(b);-1!=M;M=u.cc(M)){var D=u.Db(M);u.A(D,y);for(var K=!1,N=D=u.Y(D);-1!=N;N=u.Y(N)){if(N==D){if(K)break;K=!0}u.A(N,O);if((g<e-y.x&&O.x-e>g||g<e-O.x&&y.x-e>g||g<-O.y&&y.y>g)&&!(Math.abs(y.x-O.x)>=0.5*t.ba())&&(2==a.Nf.Bm(d)?(z[0][0]=c.ou(y.x,t),z[0][1]=y.y,z[1][0]=c.ou(O.x,t),z[1][1]=O.y,a.Za.XQ(),C.x=z[0][0]*n,C.y=z[0][1]*n,G.x=z[1][0]*n,G.y=z[1][1]*n):(C.x=y.x*n,C.y=y.y*n,G.x=O.x*n,G.y=O.y*n),G.x=6.283185307179586*(O.x-y.x)/t.ba()+C.x,A.x=s,A.y=c.xH(m,q,C,G,s,k),!isNaN(A.y))){a.Ab.Sd(m,q,C.x,
C.y,G.x,G.y,h,null,null,k);var E=h.o;a.Ab.Sd(m,q,C.x,C.y,A.x,A.y,h,null,null,k);var P=h.o;2==a.Nf.Bm(d)?(z[0][0]=A.x/n,z[0][1]=A.y/n,a.Za.pN(),x.y=z[0][1],x.x=e):(x.x=e,x.y=A.y/n);w[0]=0<E?a.J.Jr(P/E,0,1):0.5;0!=w[0]&&1!=w[0]&&(E=u.Va(N),u.Lr(E,w,1),u.jc(u.Y(E),x.x,x.y))}y.K(O)}}return u.jf(b)};c.$M=function(b,d,k){if(b.u())return b;var e=a.Za.IC(d);return c.gC(b,0-180*e,360*e,d,k)};c.xH=function(b,d,k,e,g,h){if(3.141592653589793<=Math.abs(k.x-e.x)||!c.Iv(k.x,e.x,g))return NaN;var m;k.x>e.x?m=e:(m=
k,k=e);e=new a.da(0);var n=new a.da(0),q=new a.da(0);a.Ab.Sd(b,d,m.x,m.y,k.x,k.y,n,e,null,h);var s=n.o,t=0,z=1,u=new a.b;for(u.K(m);s*(z-t)>1E-12*b;){var w=0.5*(t+z);a.Ab.ek(b,d,m.x,m.y,s*w,e.o,n,q,h);u.x=n.o;u.y=q.o;if(u.x==g)break;if(c.Iv(m.x,u.x,g))z=w;else if(c.Iv(k.x,u.x,g))t=w;else return NaN}return u.y};c.Iv=function(a,c,d){a=b.Qv(a);c=b.aG(a,b.Qv(c));d=b.aG(a,b.Qv(d));return 0==d||0<c&&0<d&&d<=c||0>c&&0>d&&d>=c?!0:!1};c.ou=function(a,b){var c=b.wa-b.ra;return b.Ry(a-Math.floor((a-b.ra)/c)*
c)};c.dU=function(b,c,d,l){var e=new a.Od;e.L(c,d);d=l.ba();b=Math.floor((b-c)/d)*d+b;for(e=e.Af();Math.abs(b-e)>Math.abs(b+d-e);)b+=d;return b};c.bU=function(b,c,d,l,e){var g;d.y>l.y?g=l:(g=d,d=l);l=new a.Od;l.L(g.y,d.y);if(!l.contains(0)||3.141592653589793<=Math.abs(g.x-d.x))return NaN;if(g.x==d.x)return g.x;var h=new a.da(0),m=new a.da(0),n=new a.da(0);a.Ab.Sd(b,c,g.x,g.y,d.x,d.y,m,h,null,e);var q=m.o,s=0,t=1,z=new a.b;for(z.K(g);q*(t-s)>1E-12*b;){var u=0.5*(s+t);a.Ab.ek(b,c,g.x,g.y,q*u,h.o,m,
n,e);z.x=m.o;z.y=n.o;l.L(g.y,z.y);if(0==z.y)break;if(l.contains(0))t=u;else if(l.L(d.y,z.y),l.contains(0))s=u;else return NaN}return z.x};c.gC=function(b,c,d,l,e){var g=new a.i;b.s(g);if(g.u())return b;var h=new a.Od;g.vu(h);var m=new a.Od;m.L(c,c+d);if(m.contains(h)&&m.wa!=h.wa)return b;var n=new a.i;n.L(g);var q=b.F();if(q==a.j.Point){n=e?b:b.wm();g=n.lk();if(g<m.ra||g>=m.wa||g==m.wa)g+=Math.ceil((m.ra-g)/d)*d,g=m.Ry(g),n.pS(g);return n}if(q==a.j.MultiPoint){n=e?b:b.wm();l=n.oc(0);q=2*n.G();b=!1;
for(e=0;e<q;e+=2)if(g=l.read(e),g<m.ra||g>=m.wa||g==m.wa)b=!0,g+=Math.ceil((m.ra-g)/d)*d,g=m.Ry(g),l.write(e,g);b&&n.de(1993);return n}if(m.contains(h))return b;if(q==a.j.Envelope)return d=e?b:b.wm(),g.Ha(n),d.Bu(g),d;var s=0.1*Math.max(g.ca(),g.ba());n.R(0,s);m=b;b=l.wq();e=a.wi.local();for(var t=new a.Bg,z=0;;){var u=Math.floor((h.ra-c)/d),w=Math.ceil((h.wa-c)/d);if(3<w-u){u=Math.floor(0.5*(w+u));n.w=g.w-s;n.C=c+d*u;var x=a.Fd.clip(m,n,b,0);n.w=n.C;n.C=g.C+s;var A=a.Fd.clip(m,n,b,0);t.On((u-w)*
d,0);A.Pe(t);q==a.j.Polygon?m=e.aa(x,A,l,null):(m=x,m.add(A,!1));m.s(g);g.vu(h);z++}else break}n.w=c;n.C=c+d;c=new a.i;c.L(n);c.R(b,0);c=Math.floor((g.w-n.w)/d)*d;0!=c?(n.move(c,0),t.On(-c,0)):t.IF();c=q==a.j.Polyline?new a.Ya(m.description):new a.La(m.description);h=new a.i;for(s=new a.i;g.C>n.w;){z=a.Fd.clip(m,n,b,0);z.s(s);if(q==a.j.Polyline?!z.u()&&(s.ba()>b||s.ca()>b):!z.u()&&(q!=a.j.Polygon||s.ba()>b))z.Pe(t),z.s(s),c.s(h),h.R(b,b),h.kc(s)&&q==a.j.Polygon?c=e.aa(c,z,l,null):c.add(z,!1);n.move(d,
0);t.shift(-d,0)}return c};c.YQ=function(b,c,d,l){var e=new a.pe(d.description);e.Qd(d,0,-1);var e=a.Za.Wl(e,b,c),g=d.G();l.Ka();if(!a.Za.Oo(b)||g!=e.G())return!1;var h=new a.i;d.s(h);var m=new a.i;e.s(m);h=h.ba();m=m.ba();if(0!=h&&0!=m){if(m/=h,b=a.Za.Gm(c).ba()/a.Za.Gm(b).ba(),1E-10<Math.abs(m/b-1))return!1}else if(0!=h||0!=m)return!1;l.add(d,!1);for(d=0;d<g;d++)b=e.Ga(d),l.jc(d,b);return!0};c.cU=function(){throw a.g.qe();};return c}();a.gh=c})(y||(y={}));(function(a){(function(a){a[a.rightSide=
1]="rightSide"})(a.rI||(a.rI={}));var b=function(){function b(c,f,d){this.Mq=new a.b;void 0===c?this.un=-1:(this.Mq.K(c),this.un=f,this.Ea=d,this.Tt=0)}b.prototype.UF=function(a){this.Tt=a?this.Tt|1:this.Tt&-2};b.prototype.u=function(){return 0>this.un};b.prototype.ow=function(){if(this.u())throw a.g.sa("invalid call");return new a.Wa(this.Mq.x,this.Mq.y)};b.prototype.hb=function(){if(this.u())throw a.g.sa("invalid call");return this.un};b.prototype.rw=function(){if(this.u())throw a.g.sa("invalid call");
return this.Ea};b.prototype.Ww=function(){return 0!=(this.Tt&1)};b.prototype.sv=function(a,b,c,d){this.Mq.x=a;this.Mq.y=b;this.un=c;this.Ea=d};return b}();a.dl=b})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.Gn=function(b,c){this.Vg.resize(0);this.ai.length=0;this.Bj=-1;b.ed(this.Lj);this.Lj.R(c,c);this.Lj.kc(this.Bb.Rb)?((this.Hq=a.U.Mc(b.F()))?(this.rE=b.Nb(),this.qE=b.pc(),this.la=c):this.la=NaN,this.Vg.add(this.Bb.$e),this.ai.push(this.Bb.Rb),this.$q=this.Bb.qq(this.Bb.$e)):
this.$q=-1};b.prototype.Ch=function(a,b){this.Vg.resize(0);this.ai.length=0;this.Bj=-1;this.Lj.L(a);this.Lj.R(b,b);this.la=NaN;this.Lj.kc(this.Bb.Rb)?(this.Vg.add(this.Bb.$e),this.ai.push(this.Bb.Rb),this.$q=this.Bb.qq(this.Bb.$e),this.Hq=!1):this.$q=-1};b.prototype.next=function(){if(0==this.Vg.size)return-1;this.Bj=this.$q;var b=null,d=null,k,l=null,e=null;this.Hq&&(b=new a.b,d=new a.b,l=new a.i);for(var g=!1;!g;){for(;-1!=this.Bj;){k=this.Bb.jw(this.Bb.Ts(this.Bj));if(k.kc(this.Lj))if(this.Hq){if(b.K(this.rE),
d.K(this.qE),l.L(k),l.R(this.la,this.la),0<l.Mv(b,d)){g=!0;break}}else{g=!0;break}this.Bj=this.Bb.$s(this.Bj)}if(-1==this.Bj){k=this.Vg.uc();var h=this.ai[this.ai.length-1];null==e&&(e=[],e[0]=new a.i,e[1]=new a.i,e[2]=new a.i,e[3]=new a.i);c.BF(h,e);this.Vg.bf();this.ai.length-=1;for(h=0;4>h;h++){var m=this.Bb.yo(k,h);if(-1!=m&&0<this.Bb.fO(m)&&e[h].kc(this.Lj))if(this.Hq){if(b.K(this.rE),d.K(this.qE),l.L(e[h]),l.R(this.la,this.la),0<l.Mv(b,d)){var n=new a.i;n.L(e[h]);this.Vg.add(m);this.ai.push(n)}}else n=
new a.i,n.L(e[h]),this.Vg.add(m),this.ai.push(n)}if(0==this.Vg.size)return-1;this.Bj=this.Bb.qq(this.Vg.get(this.Vg.size-1))}}this.$q=this.Bb.$s(this.Bj);return this.Bj};b.GL=function(c,d,k){var e=new b;e.Bb=c;e.Lj=new a.i;e.Vg=new a.ha(0);e.ai=[];e.Gn(d,k);return e};b.FL=function(c,d,k){var e=new b;e.Bb=c;e.Lj=new a.i;e.Vg=new a.ha(0);e.ai=[];e.Ch(d,k);return e};b.EL=function(c){var d=new b;d.Bb=c;d.Lj=new a.i;d.Vg=new a.ha(0);d.ai=[];return d};return b}();a.ST=b;var c=function(){function c(b,d){this.Ze=
new a.Gc(11);this.qh=new a.Gc(5);this.Iq=[];this.Qt=new a.ha(0);this.Rb=new a.i;this.Sj(b,d)}c.prototype.reset=function(a,b){this.Ze.Nh(!1);this.qh.Nh(!1);this.Iq.length=0;this.Qt.clear(!1);this.Sj(a,b)};c.prototype.lg=function(a,b){return this.kt(a,b,0,this.Rb,this.$e,!1,-1)};c.prototype.jt=function(a,b,c){c=-1==c?this.$e:this.KC(c);var d=this.ca(c),l=this.BN(c);return this.kt(a,b,d,l,c,!1,-1)};c.prototype.ea=function(a){return this.xN(a)};c.prototype.uC=function(a){return this.jw(this.Ts(a))};c.prototype.ca=
function(a){return this.Ws(a)};c.prototype.BN=function(b){var c=new a.i;c.L(this.Rb);var d=this.Ws(b);b=this.EC(b);for(var l=0;l<2*d;l+=2){var e=a.J.truncate(3&b>>l);0==e?(c.w=0.5*(c.w+c.C),c.D=0.5*(c.D+c.H)):1==e?(c.C=0.5*(c.w+c.C),c.D=0.5*(c.D+c.H)):(2==e?c.C=0.5*(c.w+c.C):c.w=0.5*(c.w+c.C),c.H=0.5*(c.D+c.H))}return c};c.prototype.fO=function(a){return this.Jw(a)};c.prototype.JN=function(a,c){return b.GL(this,a,c)};c.prototype.ww=function(a,c){return b.FL(this,a,c)};c.prototype.Se=function(){return b.EL(this)};
c.prototype.Sj=function(b,c){if(0>c||32<2*c)throw a.g.O("invalid height");this.FP=c;this.Rb.L(b);this.$e=this.Ze.ce();this.Ju(this.$e,0);this.Du(this.$e,0);this.LF(this.$e,0);this.HF(this.$e,0)};c.prototype.kt=function(b,d,k,e,g,h,m){if(!e.contains(d))return 0==k?-1:this.kt(b,d,0,this.Rb,this.$e,h,m);if(!h)for(var n=g;-1!=n;n=this.TN(n))this.Ju(n,this.Jw(n)+1);n=new a.i;n.L(e);e=g;var q=[];q[0]=new a.i;q[1]=new a.i;q[2]=new a.i;for(q[3]=new a.i;k<this.FP&&this.HK(e);k++){c.BF(n,q);for(var s=!1,t=
0;4>t;t++)if(q[t].contains(d)){var s=!0,z=this.yo(e,t);-1==z&&(z=this.NL(e,t));this.Ju(z,this.Jw(z)+1);e=z;n.L(q[t]);break}if(!s)break}return this.yO(b,d,k,n,e,h,g,m)};c.prototype.yO=function(a,b,c,d,l,e,g,h){var m=this.AC(l),v=-1;if(e){if(l==g)return h;this.lM(h);v=h}else v=this.PL(),this.Ay(v,a),this.HR(this.Ts(v),b);this.fS(v,l);-1!=m?(this.Iu(v,m),this.Eu(m,v)):this.DF(l,v);this.Ey(l,v);this.Du(l,this.Ys(l)+1);this.GK(l)&&this.ZM(c,d,l);return v};c.prototype.lM=function(a){var b=this.KC(a),c=
this.AC(b),d=this.ZN(a),l=this.$s(a);this.qq(b)==a?(-1!=l?this.Iu(l,-1):this.Ey(b,-1),this.DF(b,l)):c==a?(this.Eu(d,-1),this.Ey(b,d)):(this.Iu(l,d),this.Eu(d,l));this.Iu(a,-1);this.Eu(a,-1);this.Du(b,this.Ys(b)-1)};c.BF=function(a,b){var c=0.5*(a.w+a.C),d=0.5*(a.D+a.H);b[0].L(c,d,a.C,a.H);b[1].L(a.w,d,c,a.H);b[2].L(a.w,a.D,c,d);b[3].L(c,a.D,a.C,d)};c.prototype.GK=function(a){return 8==this.Ys(a)&&!this.VC(a)};c.prototype.ZM=function(a,b,c){var d,l,e=this.qq(c);do l=this.Ts(e),d=this.qh.P(e,0),l=this.jw(l),
this.kt(d,l,a,b,c,!0,e),e=this.$s(e);while(-1!=e)};c.prototype.HK=function(a){return 8<=this.Ys(a)||this.VC(a)};c.prototype.VC=function(a){return-1!=this.yo(a,0)||-1!=this.yo(a,1)||-1!=this.yo(a,2)||-1!=this.yo(a,3)};c.prototype.NL=function(a,b){var c=this.Ze.ce();this.LR(a,b,c);this.Ju(c,0);this.Du(c,0);this.Uj(c,a);this.HF(c,this.Ws(a)+1);this.LF(c,b<<2*this.Ws(a)|this.EC(a));return c};c.prototype.PL=function(){var b=this.qh.ce(),c;0<this.Qt.size?(c=this.Qt.uc(),this.Qt.bf()):(c=this.Iq.length,
this.Iq.push(new a.i));this.IR(b,c);return b};c.prototype.yo=function(a,b){return this.Ze.P(a,b)};c.prototype.LR=function(a,b,c){this.Ze.N(a,b,c)};c.prototype.qq=function(a){return this.Ze.P(a,4)};c.prototype.DF=function(a,b){this.Ze.N(a,4,b)};c.prototype.AC=function(a){return this.Ze.P(a,5)};c.prototype.Ey=function(a,b){this.Ze.N(a,5,b)};c.prototype.EC=function(a){return this.Ze.P(a,6)};c.prototype.LF=function(a,b){this.Ze.N(a,6,b)};c.prototype.Ys=function(a){return this.Ze.P(a,7)};c.prototype.Jw=
function(a){return this.Ze.P(a,8)};c.prototype.Du=function(a,b){this.Ze.N(a,7,b)};c.prototype.Ju=function(a,b){this.Ze.N(a,8,b)};c.prototype.TN=function(a){return this.Ze.P(a,9)};c.prototype.Uj=function(a,b){this.Ze.N(a,9,b)};c.prototype.Ws=function(a){return this.Ze.P(a,10)};c.prototype.HF=function(a,b){this.Ze.N(a,10,b)};c.prototype.xN=function(a){return this.qh.P(a,0)};c.prototype.Ay=function(a,b){this.qh.N(a,0,b)};c.prototype.ZN=function(a){return this.qh.P(a,1)};c.prototype.$s=function(a){return this.qh.P(a,
2)};c.prototype.Iu=function(a,b){this.qh.N(a,1,b)};c.prototype.Eu=function(a,b){this.qh.N(a,2,b)};c.prototype.KC=function(a){return this.qh.P(a,3)};c.prototype.fS=function(a,b){this.qh.N(a,3,b)};c.prototype.Ts=function(a){return this.qh.P(a,4)};c.prototype.IR=function(a,b){this.qh.N(a,4,b)};c.prototype.jw=function(a){return this.Iq[a]};c.prototype.HR=function(a,b){this.Iq[a].L(b)};return c}();a.bo=c})(y||(y={}));(function(a){(function(a){a[a.Outside=0]="Outside";a[a.Inside=1]="Inside";a[a.Border=
2]="Border"})(a.wH||(a.wH={}));var b=function(){function a(b,c){this.Hg=null;this.RP=c;this.Hg=b}a.prototype.Au=function(a,b){this.PD!=b&&a.flush();this.PD=b};a.prototype.XB=function(a,b){for(var c=0;c<b;)for(var d=a[c++],l=a[c++],e=a[c++]*this.RP;d<l;d++)this.Hg[e+(d>>4)]|=this.PD<<2*(d&15)};return a}();a.UT=b;var c=function(){function c(a,b,d){this.Hg=null;this.Px=this.Rx=this.zE=this.xE=this.Pq=this.VD=this.tf=this.Pl=0;this.ii=this.Oj=this.sk=null;this.it(a,b,d)}c.create=function(b,d,k){if(!c.Dc(b))throw a.g.O();
return c.Jd(b,d,k)};c.ti=function(b,d,k){if(!c.Dc(b))throw a.g.O();return c.ye(b,d,k)};c.iR=function(b){var c=0;switch(b){case 0:c=1024;break;case 1:c=16384;break;case 2:c=262144;break;default:throw a.g.sa("Internal Error");}return c};c.Dc=function(b){return b.u()||b.F()!=a.j.Polyline&&b.F()!=a.j.Polygon?!1:!0};c.prototype.JM=function(b,c){for(var d=c.Da(),l=new a.b,e=new a.b;d.lb();)for(;d.Ma();){var g=d.ja();if(g.F()!=a.j.Line)throw a.g.sa("Internal Error");b.Zi(g.Nb(),l);b.Zi(g.pc(),e);this.ii.yv(l.x,
l.y,e.x,e.y)}this.ii.fF(a.dv.Zu)};c.prototype.KM=function(){throw a.g.sa("Internal Error");};c.prototype.bw=function(b,c){for(var d=1;4>d;d++)b.yv(c[d-1].x,c[d-1].y,c[d].x,c[d].y);b.yv(c[3].x,c[3].y,c[0].x,c[0].y);this.ii.fF(a.dv.Zu)};c.prototype.kG=function(b,c,d){for(var l=[null,null,null,null],e=0;e<l.length;e++)l[e]=new a.b;c=c.Da();d=this.Oj.SS(d)+1.5;for(var e=new a.b,g=new a.b,h=new a.b,m=new a.b,n=new a.b,q=new a.i,s=new a.b;c.lb();){var t=!1,z=!0;for(s.na(0,0);c.Ma();){var u=c.ja();m.x=u.oa;
m.y=u.ka;n.x=u.ma;n.y=u.ia;q.Ka();q.Eb(m.x,m.y);q.Pj(n.x,n.y);if(this.sk.rD(q)){this.Oj.Zi(n,n);z?(this.Oj.Zi(m,m),s.K(m),z=!1):m.K(s);e.qc(n,m);var u=e.length(),w=0.5>u;0==u?e.na(1,0):(w||s.K(n),e.scale(d/u),g.na(-e.y,e.x),h.na(e.y,-e.x),m.sub(e),n.add(e),l[0].add(m,g),l[1].add(m,h),l[2].add(n,h),l[3].add(n,g),w?t=!0:this.bw(b,l))}else t&&(this.bw(b,l),t=!1),z=!0}t&&this.bw(b,l)}};c.prototype.ez=function(b){return a.J.truncate(b*this.VD+this.xE)};c.prototype.fz=function(b){return a.J.truncate(b*
this.Pq+this.zE)};c.Jd=function(a,b,d){return new c(a,b,d)};c.ye=function(a,b,d){return new c(a,b,d)};c.prototype.it=function(c,d,k){this.tf=Math.max(a.J.truncate(2*Math.sqrt(k)+0.5),64);this.Pl=a.J.truncate((2*this.tf+31)/32);this.sk=new a.i;this.Rx=d;k=0;for(var l=this.tf,e=this.Pl;8<=l;)k+=l*e,l=a.J.truncate(l/2),e=a.J.truncate((2*l+31)/32);this.Hg=a.J.Lh(k,0);this.ii=new a.dv;k=new b(this.Hg,this.Pl,this);this.ii.uS(this.tf,this.tf,k);c.s(this.sk);this.sk.R(d,d);var l=new a.i,e=a.i.Pa(1,1,this.tf-
2,this.tf-2),g=d*e.ba();d*=e.ca();l.L(this.sk.Af(),Math.max(g,this.sk.ba()),Math.max(d,this.sk.ca()));this.Px=this.Rx;this.Oj=new a.Bg;this.Oj.vO(l,e);new a.Bg;switch(c.F()){case a.j.MultiPoint:k.Au(this.ii,2);this.KM();break;case a.j.Polyline:k.Au(this.ii,2);this.kG(this.ii,c,this.Px);break;case a.j.Polygon:k.Au(this.ii,1),this.JM(this.Oj,c),k.Au(this.ii,2),this.kG(this.ii,c,this.Px)}this.VD=this.Oj.nb;this.Pq=this.Oj.fb;this.xE=this.Oj.Ob;this.zE=this.Oj.Pb;this.AK()};c.prototype.AK=function(){this.ii.flush();
for(var b=0,c=this.tf*this.Pl,d=this.tf,l=a.J.truncate(this.tf/2),e=this.Pl,g=a.J.truncate((2*l+31)/32);8<d;){for(d=0;d<l;d++)for(var h=2*d,m=2*d+1,n=0;n<l;n++){var q=2*n,s=2*n+1,t=q>>4,q=2*(q&15),z=s>>4,s=2*(s&15),u=this.Hg[b+e*h+t]>>q&3,u=u|this.Hg[b+e*h+z]>>s&3,u=u|this.Hg[b+e*m+t]>>q&3,u=u|this.Hg[b+e*m+z]>>s&3;this.Hg[c+g*d+(n>>4)]|=u<<2*(n&15)}d=l;e=g;b=c;l=a.J.truncate(d/2);g=a.J.truncate((2*l+31)/32);c=b+e*d}};c.prototype.Kk=function(a,b){if(!this.sk.contains(a,b))return 0;var c=this.ez(a),
d=this.fz(b);if(0>c||c>=this.tf||0>d||d>=this.tf)return 0;c=this.Hg[this.Pl*d+(c>>4)]>>2*(c&15)&3;return 0==c?0:1==c?1:2};c.prototype.En=function(b){if(!b.Ha(this.sk))return 0;var c=this.ez(b.w),d=this.ez(b.C),l=this.fz(b.D);b=this.fz(b.H);0>c&&(c=0);0>l&&(l=0);d>=this.tf&&(d=this.tf-1);b>=this.tf&&(b=this.tf-1);if(c>d||l>b)return 0;for(var e=Math.max(d-c,1)*Math.max(b-l,1),g=0,h=this.Pl,m=this.tf,n=0;;){if(32>e||16>m){for(e=l;e<=b;e++)for(var q=c;q<=d;q++)if(n=this.Hg[g+h*e+(q>>4)]>>2*(q&15)&3,1<
n)return 2;if(0==n)return 0;if(1==n)return 1}g+=h*m;m=a.J.truncate(m/2);h=a.J.truncate((2*m+31)/32);c=a.J.truncate(c/2);l=a.J.truncate(l/2);d=a.J.truncate(d/2);b=a.J.truncate(b/2);e=Math.max(d-c,1)*Math.max(b-l,1)}};c.prototype.bO=function(){return this.tf*this.Pl};return c}();a.dA=c})(y||(y={}));(function(a){(function(a){a[a.contains=1]="contains";a[a.within=2]="within";a[a.equals=3]="equals";a[a.disjoint=4]="disjoint";a[a.touches=8]="touches";a[a.crosses=16]="crosses";a[a.overlaps=32]="overlaps";
a[a.unknown=0]="unknown";a[a.intersects=1073741824]="intersects"})(a.yI||(a.yI={}));var b=function(){function a(){}a.Pa=function(b,c,d,e,g,h,m,n){var q=new a;q.Vt=b;q.Jl=c;q.Oi=d;q.ji=e;q.dE=g;q.sU=h;q.tU=m;q.uU=n;return q};return a}(),c=function(){function b(){}b.uT=function(c,d,k){if(!b.oQ(c))return!1;var e=a.Ja.Cg(d,c,!1);d=!1;a.Xj.vB(c)&&(d=d||c.iv(e,k));e=c.F();e!=a.j.Polygon&&e!=a.j.Polyline||!a.Xj.tB(c)||0==k||(d=d||c.dj(k));e!=a.j.Polygon&&e!=a.j.Polyline||!a.Xj.uB(c)||0==k||(d=d||c.iJ());
return d};b.oQ=function(b){return a.Xj.vB(b)||a.Xj.tB(b)||a.Xj.uB(b)};return b}();a.qT=c;c=function(){function c(){this.Tg=[]}c.py=function(b,d,k,e,g){var h=b.F(),m=d.F();if(h==a.j.Envelope){if(m==a.j.Envelope)return c.zQ(b,d,k,e);if(m==a.j.Point)return 2==e?e=1:1==e&&(e=2),c.Iz(d,b,k,e)}else if(h==a.j.Point){if(m==a.j.Envelope)return c.Iz(b,d,k,e);if(m==a.j.Point)return c.dR(b,d,k,e)}if(b.u()||d.u())return 4==e?!0:!1;var n=new a.i;b.s(n);var q=new a.i;d.s(q);var s=new a.i;s.L(n);s.Eb(q);k=a.Ja.Ad(k,
s,!1);if(c.nj(n,q,k))return 4==e?!0:!1;n=!1;a.al.Mc(h)&&(h=new a.Ya(b.description),h.Cc(b,!0),b=h,h=a.j.Polyline);a.al.Mc(m)&&(m=new a.Ya(d.description),m.Cc(d,!0),d=m,m=a.j.Polyline);if(h!=a.j.Envelope&&m!=a.j.Envelope){if(b.gb()<d.gb()||h==a.j.Point&&m==a.j.MultiPoint)2==e?e=1:1==e&&(e=2)}else h!=a.j.Polygon&&m!=a.j.Envelope&&(2==e?e=1:1==e&&(e=2));switch(h){case a.j.Polygon:switch(m){case a.j.Polygon:n=c.ur(b,d,k,e,g);break;case a.j.Polyline:n=c.Vl(b,d,k,e,g);break;case a.j.Point:n=c.tr(b,d,k,
e,g);break;case a.j.MultiPoint:n=c.sr(b,d,k,e,g);break;case a.j.Envelope:n=c.xD(b,d,k,e,g)}break;case a.j.Polyline:switch(m){case a.j.Polygon:n=c.Vl(d,b,k,e,g);break;case a.j.Polyline:n=c.dy(b,d,k,e,g);break;case a.j.Point:n=c.wr(b,d,k,e,g);break;case a.j.MultiPoint:n=c.vr(b,d,k,e,g);break;case a.j.Envelope:n=c.WE(b,d,k,e)}break;case a.j.Point:switch(m){case a.j.Polygon:n=c.tr(d,b,k,e,g);break;case a.j.Polyline:n=c.wr(d,b,k,e,g);break;case a.j.MultiPoint:n=c.or(d,b,k,e,g)}break;case a.j.MultiPoint:switch(m){case a.j.Polygon:n=
c.sr(d,b,k,e,g);break;case a.j.Polyline:n=c.vr(d,b,k,e,g);break;case a.j.MultiPoint:n=c.Vx(b,d,k,e,g);break;case a.j.Point:n=c.or(b,d,k,e,g);break;case a.j.Envelope:n=c.oA(b,d,k,e)}break;case a.j.Envelope:switch(m){case a.j.Polygon:n=c.xD(d,b,k,e,g);break;case a.j.Polyline:n=c.WE(d,b,k,e);break;case a.j.MultiPoint:n=c.oA(d,b,k,e)}}return n};c.zQ=function(b,d,k,e){if(b.u()||d.u())return 4==e?!0:!1;var g=new a.i,h=new a.i,m=new a.i;b.s(g);d.s(h);m.L(g);m.Eb(h);b=a.Ja.Ad(k,m,!1);switch(e){case 4:return c.nj(g,
h,b);case 2:return c.Bz(h,g,b);case 1:return c.Bz(g,h,b);case 3:return c.ye(g,h,b);case 8:return c.jT(g,h,b);case 32:return c.eT(g,h,b);case 16:return c.bT(g,h,b)}return!1};c.Iz=function(b,d,k,e){if(b.u()||d.u())return 4==e?!0:!1;b=b.A();var g=new a.i,h=new a.i;d.s(g);h.L(b);h.Eb(g);d=a.Ja.Ad(k,h,!1);switch(e){case 4:return c.qu(b,g,d);case 2:return c.ax(b,g,d);case 1:return c.XL(b,g,d);case 3:return c.KA(b,g,d);case 8:return c.$w(b,g,d)}return!1};c.dR=function(b,d,k,e){if(b.u()||d.u())return 4==
e?!0:!1;b=b.A();d=d.A();var g=new a.i;g.L(b);g.Eb(d);k=a.Ja.Ad(k,g,!1);switch(e){case 4:return c.qM(b,d,k);case 2:return c.gz(d,b,k);case 1:return c.gz(b,d,k);case 3:return c.dB(b,d,k)}return!1};c.ur=function(a,b,d,e,g){switch(e){case 4:return c.cT(a,b,d);case 2:return c.ru(b,a,d,g);case 1:return c.ru(a,b,d,g);case 3:return c.TG(a,b,d);case 8:return c.vH(a,b,d);case 32:return c.bH(a,b,d,g)}return!1};c.Vl=function(a,b,d,e,g){switch(e){case 4:return c.fT(a,b,d);case 1:return c.cy(a,b,d,g);case 8:return c.yH(a,
b,d,g);case 16:return c.kR(a,b,d)}return!1};c.tr=function(a,b,d,e){switch(e){case 4:return c.XS(a,b,d);case 1:return c.pQ(a,b,d);case 8:return c.lH(a,b,d)}return!1};c.sr=function(a,b,d,e){switch(e){case 4:return c.NS(a,b,d);case 1:return c.gQ(a,b,d);case 8:return c.iH(a,b,d);case 16:return c.cR(a,b,d)}return!1};c.xD=function(a,b,d,e,g){if(c.DR(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.CH(a,b,d);case 1:return c.VP(a,b,d);case 3:return c.OG(a,b,d);case 8:return c.eH(a,b,d,
g);case 32:return c.WG(a,b,d,g);case 16:return c.yQ(a,b,d,g)}return!1};c.dy=function(a,b,d,e){switch(e){case 4:return c.DI(a,b,d);case 2:return c.JE(b,a,d);case 1:return c.JE(a,b,d);case 3:return c.OI(a,b,d);case 8:return c.cF(a,b,d);case 32:return c.ZI(a,b,d);case 16:return c.LE(a,b,d)}return!1};c.wr=function(a,b,d,e){switch(e){case 4:return c.xI(a,b,d);case 1:return c.JH(a,b,d);case 8:return c.MG(a,b,d)}return!1};c.vr=function(a,b,d,e){switch(e){case 4:return c.uI(a,b,d);case 1:return c.HH(a,b,
d);case 8:return c.eJ(a,b,d);case 16:return c.PH(a,b,d)}return!1};c.WE=function(a,b,d,e){if(c.mI(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.VJ(a,b,d);case 1:return c.FH(a,b,d);case 3:return c.LI(a,b,d);case 8:return c.bJ(a,b,d);case 32:return c.WI(a,b,d);case 16:return c.LH(a,b,d)}return!1};c.Vx=function(a,b,d,e){switch(e){case 4:return c.wI(a,b,d);case 2:return c.kA(b,a,d);case 1:return c.kA(a,b,d);case 3:return c.KI(a,b,d);case 32:return c.aJ(a,b,d)}return!1};c.or=function(a,
b,d,e){switch(e){case 4:return c.lA(a,b,d);case 2:return c.GJ(a,b,d);case 1:return c.OH(a,b,d);case 3:return c.lu(a,b,d)}return!1};c.oA=function(a,b,d,e){switch(e){case 4:return c.tI(a,b,d);case 2:return c.LG(a,b,d);case 1:return c.KH(a,b,d);case 3:return c.CI(a,b,d);case 8:return c.dJ(a,b,d);case 16:return c.lI(a,b,d)}return!1};c.TG=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(!c.ye(e,g,k))return!1;e=c.gc(b,d,!1);if(4==e||1==e||2==e)return!1;if(c.jA(b,d,k))return!0;var e=b.ac(),g=d.ac(),
h=Math.max(b.G(),d.G());return Math.abs(e-g)>4*h*k?!1:c.Uv(b,d,k,!0)};c.cT=function(a,b,d){var e=c.gc(a,b,!0);return 4==e?!0:1==e||2==e||1073741824==e?!1:c.ZC(a,b,d)};c.vH=function(a,b,d){var e=c.gc(a,b,!1);return 4==e||1==e||2==e?!1:c.AE(a,b,d,null)};c.bH=function(a,b,d,e){var g=c.gc(a,b,!1);return 4==g||1==g||2==g?!1:c.wD(a,b,d,e)};c.ru=function(b,d,k,e){var g=new a.i,h=new a.i;b.s(g);d.s(h);if(!c.sc(g,h,k))return!1;g=c.gc(b,d,!1);return 4==g||2==g?!1:1==g?!0:c.bC(b,d,k,e)};c.fT=function(a,b,d){var e=
c.gc(a,b,!0);return 4==e?!0:1==e||1073741824==e?!1:c.ZC(a,b,d)};c.yH=function(a,b,d,e){var g=c.gc(a,b,!1);return 4==g||1==g?!1:c.CE(a,b,d,e)};c.kR=function(a,b,d){var e=c.gc(a,b,!1);return 4==e||1==e?!1:c.YC(a,b,d,null)};c.cy=function(b,d,k,e){var g=new a.i,h=new a.i;b.s(g);d.s(h);if(!c.sc(g,h,k))return!1;g=c.gc(b,d,!1);return 4==g?!1:1==g?!0:c.jC(b,d,k,e)};c.XS=function(b,c,d){return 0==a.hd.uD(b,c,d)?!0:!1};c.lH=function(a,b,d){b=b.A();return c.yD(a,b,d)};c.pQ=function(a,b,d){b=b.A();return c.YB(a,
b,d)};c.NS=function(b,d,k){var e=c.gc(b,d,!1);if(4==e)return!0;if(1==e)return!1;e=new a.i;b.s(e);e.R(k,k);for(var g=new a.b,h=0;h<d.G();h++)if(d.A(h,g),e.contains(g)){var m=a.hd.ie(b,g,k);if(1==m||2==m)return!1}return!0};c.iH=function(b,c,d){var e=this.gc(b,c,!1);if(4==e||1==e)return!1;e=new a.i;b.s(e);e.R(d,d);for(var l,g=!1,h=null,h=b,m=!1,n=0;n<c.G();n++){l=c.Ga(n);if(e.contains(l))if(l=a.hd.ie(h,l,d),2==l)g=!0;else if(1==l)return!1;m||(!a.gf.Bn(b,c.G()-1)||null!=b.qb&&null!=b.qb.Bb?h=b:(h=new a.La,
b.copyTo(h),h.dj(1)),m=!0)}return g?!0:!1};c.cR=function(b,c,d){var e=this.gc(b,c,!1);if(4==e||1==e)return!1;var l=new a.i,e=new a.i,g=new a.i;b.s(l);c.s(g);e.L(l);e.R(d,d);for(var g=l=!1,h,m=null,m=b,n=!1,q=0;q<c.G();q++){h=c.Ga(q);e.contains(h)?(h=a.hd.ie(m,h,d),0==h?g=!0:1==h&&(l=!0)):g=!0;if(l&&g)return!0;n||(!a.gf.Bn(b,c.G()-1)||null!=b.qb&&null!=b.qb.Bb?m=b:(m=new a.La,b.copyTo(m),m.dj(1)),n=!0)}return!1};c.gQ=function(b,c,d){var e=new a.i,l=new a.i;b.s(e);c.s(l);if(!this.sc(e,l,d))return!1;
l=this.gc(b,c,!1);if(4==l)return!1;if(1==l)return!0;for(var l=!1,g,h=null,h=b,m=!1,n=0;n<c.G();n++){g=c.Ga(n);if(!e.contains(g))return!1;g=a.hd.ie(h,g,d);if(1==g)l=!0;else if(0==g)return!1;m||(!a.gf.Bn(b,c.G()-1)||null!=b.qb&&null!=b.qb.Bb?h=b:(h=new a.La,b.copyTo(h),h.dj(1)),m=!0)}return l};c.OG=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(!c.ye(e,g,k))return!1;e=new a.La;e.Xc(d,!1);return c.Uv(b,e,k,!0)};c.DR=function(b,d,k){var e=c.gc(b,d,!1);if(4==e)return!0;if(1==e||2==e)return!1;
var g=new a.i,e=new a.i;b.s(g);d.s(e);if(c.sc(e,g,k))return!1;g=new a.b;e.Yl(g);d=a.hd.ie(b,g,k);if(0!=d)return!1;e.YE(g);d=a.hd.ie(b,g,k);if(0!=d)return!1;e.Zl(g);d=a.hd.ie(b,g,k);if(0!=d)return!1;e.aF(g);d=a.hd.ie(b,g,k);if(0!=d)return!1;d=b.oc(0);g=new a.i;g.L(e);g.R(k,k);for(var h=0,m=b.G();h<m;h++){var n=d.read(2*h),q=d.read(2*h+1);if(g.contains(n,q))return!1}return!c.cA(b,e,k)};c.eH=function(b,d,k,e){var g=c.gc(b,d,!1);if(4==g||1==g||2==g)return!1;var g=new a.i,h=new a.i;b.s(g);d.s(h);if(c.sc(h,
g,k))return!1;if(h.ba()<=k&&h.ca()<=k)return d=d.oq(),c.yD(b,d,k);if(h.ba()<=k||h.ca()<=k)return g=new a.Ya,h=new a.Wa,d.uf(0,h),g.ef(h),d.uf(2,h),g.lineTo(h),c.CE(b,g,k,e);g=new a.La;g.Xc(d,!1);return c.AE(b,g,k,e)};c.WG=function(b,d,k,e){var g=c.gc(b,d,!1);if(4==g||1==g||2==g)return!1;var g=new a.i,h=new a.i;b.s(g);d.s(h);if(c.sc(h,g,k)||h.ba()<=k||h.ca()<=k)return!1;g=new a.La;g.Xc(d,!1);return c.wD(b,g,k,e)};c.CH=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return c.sc(g,e,k)};c.VP=function(b,
d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(!c.sc(e,g,k))return!1;e=c.gc(b,d,!1);if(4==e||2==e)return!1;if(1==e)return!0;if(g.ba()<=k&&g.ca()<=k)return d=d.oq(),c.YB(b,d,k);if(g.ba()<=k||g.ca()<=k)return g=new a.Ya,e=new a.Wa,d.uf(0,e),g.ef(e),d.uf(2,e),g.lineTo(e),c.jC(b,g,k,null);g=new a.La;g.Xc(d,!1);return c.bC(b,g,k,null)};c.yQ=function(b,d,k,e){var g=new a.i,h=new a.i;b.s(g);d.s(h);if(c.sc(h,g,k)||h.ca()>k&&h.ba()>k||h.ca()<=k&&h.ba()<=k)return!1;g=new a.Ya;h=new a.Wa;d.uf(0,h);g.ef(h);d.uf(2,
h);g.lineTo(h);return c.YC(b,g,k,e)};c.OI=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return c.ye(e,g,k)&&4!=c.gc(b,d,!1)?c.jA(b,d,k)?!0:c.Uv(b,d,k,!1):!1};c.DI=function(b,c,d){return 4==this.gc(b,c,!1)?!0:(new a.cl(b,c,d,!0)).next()?!this.ED(b,c,d):!1};c.cF=function(b,d,k){if(4==c.gc(b,d,!1))return!1;var e=new a.rd(0);if(0!=c.Yv(b,d,k,e))return!1;for(var g=new a.pe,h=0;h<e.size;h+=2){var m=e.read(h),n=e.read(h+1);g.ys(m,n)}b=b.Rf();d=d.Rf();b.Qd(d,0,d.G());return c.ku(b,g,k)};c.LE=function(b,
d,k){if(4==c.gc(b,d,!1))return!1;var e=new a.rd(0);if(0!=c.Yv(b,d,k,e))return!1;for(var g=new a.pe,h=0;h<e.size;h+=2){var m=e.read(h),n=e.read(h+1);g.ys(m,n)}b=b.Rf();d=d.Rf();b.Qd(d,0,d.G());return!c.ku(b,g,k)};c.ZI=function(a,b,d){return 4==c.gc(a,b,!1)?!1:c.iA(a,b,d)};c.JE=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return c.sc(e,g,k)&&4!=c.gc(b,d,!1)?c.Wf(d,b,k,!1):!1};c.xI=function(a,b,d){if(4==c.gc(a,b,!1))return!0;b=b.A();return!c.dx(a,b,d)};c.MG=function(a,b,d){if(4==c.gc(a,b,!1))return!1;
b=b.A();return c.aw(a,b,d)};c.JH=function(a,b,d){if(4==c.gc(a,b,!1))return!1;b=b.A();return c.bA(a,b,d)};c.uI=function(a,b,d){return 4==c.gc(a,b,!1)?!0:!c.eA(a,b,d,!1)};c.eJ=function(b,c,d){if(4==this.gc(b,c,!1))return!1;var e=b.Da(),l=new a.i,g=new a.i,h=new a.i;b.s(l);c.s(g);l.R(d,d);g.R(d,d);h.L(l);h.Ha(g);var m=null,n=null,l=null,m=b.qb;null!=m?(n=m.Bb,l=m.on,null==n&&(n=a.Ja.ij(b,h))):n=a.Ja.ij(b,h);var q=n.Se(),s=null;null!=l&&(s=l.Se());for(var t=new a.b,z=new a.b,u=!1,w=d*d,l=new a.Wk(c.G()),
m=0;m<c.G();m++)l.write(m,0);for(m=0;m<c.G();m++)if(c.A(m,t),h.contains(t))if(g.L(t.x,t.y,t.x,t.y),!(null!=s&&(s.Ch(g,d),-1==s.next()))){q.Ch(g,d);for(var x=q.next();-1!=x;x=q.next())if(e.Tb(n.ea(x)),x=e.ja(),x.Lb(x.Hd(t,!1),z),a.b.$b(t,z)<=w){l.write(m,1);u=!0;break}}if(!u)return!1;b=b.Rf();e=new a.pe;g=new a.b;for(m=0;m<c.G();m++)0!=l.read(m)&&(c.A(m,g),e.ys(g.x,g.y));return this.ku(b,e,d)};c.PH=function(b,c,d){if(4==this.gc(b,c,!1))return!1;var e=b.Da(),l=new a.i,g=new a.i,h=new a.i;b.s(l);c.s(g);
l.R(d,d);g.R(d,d);h.L(l);h.Ha(g);var m=null,n=null,l=null,m=b.qb;null!=m?(n=m.Bb,l=m.on,null==n&&(n=a.Ja.ij(b,h))):n=a.Ja.ij(b,h);var q=n.Se(),s=null;null!=l&&(s=l.Se());for(var t=new a.b,z=new a.b,u=!1,w=!1,x=d*d,l=new a.Wk(c.G()),m=0;m<c.G();m++)l.write(m,0);for(m=0;m<c.G();m++)if(c.A(m,t),h.contains(t))if(g.L(t.x,t.y,t.x,t.y),null!=s&&(s.Ch(g,d),-1==s.next()))w=!0;else{q.Ch(g,d);for(var A=!1,y=q.next();-1!=y;y=q.next())if(e.Tb(n.ea(y)),y=e.ja(),y.Lb(y.Hd(t,!1),z),a.b.$b(t,z)<=x){l.write(m,1);A=
u=!0;break}A||(w=!0)}else w=!0;if(!u||!w)return!1;b=b.Rf();e=new a.pe;g=new a.b;for(m=0;m<c.G();m++)0!=l.read(m)&&(c.A(m,g),e.ys(g.x,g.y));return!this.ku(b,e,d)};c.HH=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(!c.sc(e,g,k)||4==c.gc(b,d,!1)||!c.eA(b,d,k,!0))return!1;b=b.Rf();return!c.nA(b,d,k)};c.LI=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return g.ca()>k&&g.ba()>k?!1:c.ye(e,g,k)};c.mI=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return c.sc(g,e,k)?!1:!c.cA(b,g,
k)};c.bJ=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(g.ca()<=k&&g.ba()<=k)return g=d.oq(),c.aw(b,g,k);if(g.ca()<=k||g.ba()<=k)return g=new a.Ya,e=new a.Wa,d.uf(0,e),g.ef(e),d.uf(2,e),g.lineTo(e),c.cF(b,g,k);b=b.Da();d=new a.i;e=new a.i;d.L(g);e.L(g);d.R(-k,-k);e.R(k,k);for(var g=!1,h=new a.i,m=new a.i;b.lb();)for(;b.Ma();){b.ja().s(h);m.L(d);m.Ha(h);if(!m.u()&&(m.ca()>k||m.ba()>k))return!1;m.L(e);m.Ha(h);m.u()||(g=!0)}return g};c.WI=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);
if(c.sc(e,g,k)||c.sc(g,e,k)||c.sc(g,e,k)||g.ca()>k&&g.ba()>k||g.ca()<=k&&g.ba()<=k)return!1;e=new a.Ya;g=new a.Wa;d.uf(0,g);e.ef(g);d.uf(2,g);e.lineTo(g);return c.iA(b,e,k)};c.VJ=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(!c.sc(g,e,k)||g.ca()<=k&&g.ba()<=k)return!1;if(g.ca()<=k||g.ba()<=k)return c.sc(g,e,k);b=b.Da();d=new a.i;d.L(g);d.R(-k,-k);for(var g=!1,e=new a.i,h=new a.i;b.lb();)for(;b.Ma();)b.ja().s(e),d.jl(e)?g=!0:(h.L(d),h.Ha(e),!h.u()&&(h.ca()>k||h.ba()>k)&&(g=!0));return g};
c.FH=function(b,d,k){var e=new a.i,g=new a.i;d.s(g);b.s(e);if(!c.sc(e,g,k)||g.ca()>k&&g.ba()>k)return!1;if(g.ca()<=k&&g.ba()<=k)return d=d.oq(),c.bA(b,d,k);e=new a.Ya;g=new a.Wa;d.uf(0,g);e.ef(g);d.uf(2,g);e.lineTo(g);return c.Wf(e,b,k,!1)};c.LH=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(c.sc(g,e,k)||g.ca()<=k&&g.ba()<=k)return!1;if(g.ca()<=k||g.ba()<=k)return e=new a.Ya,g=new a.Wa,d.uf(0,g),e.ef(g),d.uf(2,g),e.lineTo(g),c.LE(b,e,k);b=b.Da();d=new a.i;e=new a.i;e.L(g);d.L(g);e.R(-k,
-k);d.R(k,k);for(var h=g=!1,m=new a.i,n=new a.i;b.lb();)for(;b.Ma();)if(b.ja().s(m),h||d.contains(m)||(h=!0),g||(n.L(e),n.Ha(m),!n.u()&&(n.ca()>k||n.ba()>k)&&(g=!0)),g&&h)return!0;return!1};c.KI=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return c.ye(e,g,k)?c.NI(b,d,k)?!0:c.Ow(b,d,k,!1,!0,!1):!1};c.wI=function(a,b,d){return!c.nA(a,b,d)};c.aJ=function(a,b,d){return c.Ow(a,b,d,!1,!1,!0)};c.kA=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return c.sc(e,g,k)?c.Ow(d,b,k,!0,!1,!1):!1};
c.ku=function(b,c,d){d*=d;for(var e=new a.b,l=new a.b,g=0;g<c.G();g++){c.A(g,l);for(var h=!1,m=0;m<b.G();m++)if(b.A(m,e),a.b.$b(e,l)<=d){h=!0;break}if(!h)return!1}return!0};c.lu=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return c.ye(e,g,k)};c.lA=function(a,b,d){b=b.A();return c.nr(a,b,d)};c.GJ=function(a,b,d){return c.lu(a,b,d)};c.OH=function(a,b,d){return!c.lA(a,b,d)};c.CI=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);return g.ca()>k||g.ba()>k?!1:c.ye(e,g,k)};c.tI=function(b,d,
k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(c.sc(g,e,k))return!1;d=new a.i;d.L(g);d.R(k,k);k=new a.b;for(g=0;g<b.G();g++)if(b.A(g,k),d.contains(k))return!1;return!0};c.dJ=function(b,c,d){var e=new a.i,l=new a.i,g=new a.i;c.s(e);if(e.ca()<=d&&e.ba()<=d)return!1;if(e.ca()<=d||e.ba()<=d){c=new a.b;var h=!1;l.L(e);g.L(e);l.R(d,d);e.ca()>d?g.R(0,-d):g.R(-d,0);for(var m=0;m<b.G();m++)if(b.A(m,c),l.contains(c)){if(e.ca()>d){if(c.y>g.D&&c.y<g.H)return!1}else if(c.x>g.w&&c.x<g.C)return!1;h=!0}return h}l.L(e);
g.L(e);l.R(d,d);g.R(-d,-d);c=new a.b;h=!1;for(m=0;m<b.G();m++)if(b.A(m,c),l.contains(c)){if(g.jl(c))return!1;h=!0}return h};c.LG=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(!c.sc(g,e,k))return!1;if(g.ca()<=k&&g.ba()<=k)return c.ye(e,g,k);if(g.ca()<=k||g.ba()<=k){d=!1;var e=new a.i,h=new a.i;e.L(g);h.L(g);g.ca()>k?e.R(0,-k):e.R(-k,0);h.R(k,k);for(var m=new a.b,n=0;n<b.G();n++){b.A(n,m);if(!h.contains(m))return!1;g.ca()>k?m.y>e.D&&m.y<e.H&&(d=!0):m.x>e.w&&m.x<e.C&&(d=!0)}return d}d=!1;
e=new a.i;h=new a.i;e.L(g);h.L(g);e.R(-k,-k);h.R(k,k);m=new a.b;for(n=0;n<b.G();n++){b.A(n,m);if(!h.contains(m))return!1;e.jl(m)&&(d=!0)}return d};c.KH=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(!c.sc(e,g,k)||g.ca()>k||g.ba()>k)return!1;d=d.oq();return!c.nr(b,d,k)};c.lI=function(b,d,k){var e=new a.i,g=new a.i;b.s(e);d.s(g);if(c.sc(g,e,k)||g.ca()<=k&&g.ba()<=k)return!1;if(g.ca()<=k||g.ba()<=k){d=new a.i;e=new a.i;d.L(g);g.ca()>k?d.R(0,-k):d.R(-k,0);e.L(g);e.R(k,k);for(var h=new a.b,m=
!1,n=!1,q=0;q<b.G();q++)if(b.A(q,h),m||(g.ca()>k?h.y>d.D&&h.y<d.H&&(m=!0):h.x>d.w&&h.x<d.C&&(m=!0)),n||e.contains(h)||(n=!0),m&&n)return!0;return!1}d=new a.i;e=new a.i;d.L(g);d.R(-k,-k);e.L(g);e.R(k,k);h=new a.b;n=m=!1;for(q=0;q<b.G();q++)if(b.A(q,h),!m&&d.jl(h)&&(m=!0),n||e.contains(h)||(n=!0),m&&n)return!0;return!1};c.dB=function(b,c,d){return a.b.$b(b,c)<=d*d?!0:!1};c.qM=function(b,c,d){return a.b.$b(b,c)>d*d?!0:!1};c.gz=function(a,b,d){return c.dB(a,b,d)};c.KA=function(b,d,k){var e=new a.i;e.L(b);
return c.ye(e,d,k)};c.qu=function(b,c,d){var e=new a.i;e.L(c);e.R(d,d);return!e.contains(b)};c.$w=function(b,c,d){if(c.ca()<=d&&c.ba()<=d)return!1;var e=new a.i,l=new a.i;e.L(c);e.R(d,d);if(!e.contains(b))return!1;if(c.ca()<=d||c.ba()<=d){l.L(c);c.ca()>d?l.R(0,-d):l.R(-d,0);if(c.ca()>d){if(b.y>l.D&&b.y<l.H)return!1}else if(b.x>l.w&&b.x<l.C)return!1;return!0}l.L(c);l.R(-d,-d);return l.jl(b)?!1:!0};c.ax=function(b,c,d){if(c.ca()<=d&&c.ba()<=d)return!0;if(c.ca()<=d||c.ba()<=d){var e=new a.i;e.L(c);c.ca()>
d?e.R(0,-d):e.R(-d,0);var l=!1;c.ca()>d?b.y>e.D&&b.y<e.H&&(l=!0):b.x>e.w&&b.x<e.C&&(l=!0);return l}e=new a.i;e.L(c);e.R(-d,-d);return e.jl(b)};c.XL=function(a,b,d){return c.KA(a,b,d)};c.ye=function(a,b,d){return c.sc(a,b,d)&&c.sc(b,a,d)};c.nj=function(b,c,d){var e=new a.i;e.L(c);e.R(d,d);return!b.kc(e)};c.jT=function(b,d,k){if(b.ca()<=k&&b.ba()<=k){var e=b.Af();return c.$w(e,d,k)}if(d.ca()<=k&&d.ba()<=k)return e=d.Af(),c.$w(e,b,k);b.ca()>k&&b.ba()>k&&(d.ca()<=k||d.ba()<=k)?e=d:(e=b,b=d);if(e.ca()<=
k||e.ba()<=k){if(b.ca()<=k||b.ba()<=k){d=new a.zb;var g=new a.zb,h=[0,0],m=[0,0],n=new a.b;e.Yl(n);d.fd(n);e.Zl(n);d.wd(n);b.Yl(n);g.fd(n);b.Zl(n);g.wd(n);d.Ha(g,null,h,m,k);return 1!=d.Ha(g,null,null,null,k)?!1:0==h[0]||1==h[1]||0==m[0]||1==m[1]}d=new a.i;g=new a.i;d.L(b);d.R(-k,-k);g.L(d);g.Ha(e);return!g.u()&&(g.ca()>k||g.ba()>k)?!1:!0}b.R(k,k);g=new a.i;g.L(e);g.Ha(b);return g.u()||!g.u()&&g.ca()>k&&g.ba()>k?!1:!0};c.eT=function(b,d,k){if(c.sc(b,d,k)||c.sc(d,b,k)||b.ca()<=k&&b.ba()<=k||d.ca()<=
k&&d.ba()<=k)return!1;if(b.ca()<=k||b.ba()<=k){if(d.ca()>k&&d.ba()>k)return!1;var e=new a.zb,g=new a.zb,h=[0,0],m=[0,0],n=new a.b;b.Yl(n);e.fd(n);b.Zl(n);e.wd(n);d.Yl(n);g.fd(n);d.Zl(n);g.wd(n);e.Ha(g,null,h,m,k);return 2!=e.Ha(g,null,null,null,k)?!1:(0<h[0]||1>h[1])&&(0<m[0]||1>m[1])}if(d.ca()<=k||d.ba()<=k)return!1;e=new a.i;e.L(b);e.Ha(d);return e.u()||e.ca()<=k||e.ba()<=k?!1:!0};c.Bz=function(b,d,e){if(!c.sc(b,d,e))return!1;if(b.ca()<=e&&b.ba()<=e)return b=b.Af(),c.ax(b,d,e);if(d.ca()<=e&&d.ba()<=
e)return d=d.Af(),c.ax(d,b,e);if(b.ca()<=e||b.ba()<=e)return c.sc(b,d,e);if(d.ca()<=e||d.ba()<=e){var g=new a.i;g.L(b);g.R(-e,-e);if(g.jl(d))return!0;b=new a.i;b.L(g);b.Ha(d);return b.u()||b.ca()<=e&&b.ba()<=e?!1:!0}return c.sc(b,d,e)};c.bT=function(b,d,e){if(c.sc(b,d,e)||c.sc(d,b,e)||b.ca()<=e&&b.ba()<=e||d.ca()<=e&&d.ba()<=e||d.ca()>e&&d.ba()>e&&b.ca()>e&&b.ba()>e)return!1;var g;b.ca()>e&&b.ba()>e?g=d:(g=b,b=d);if(b.ca()>e&&b.ba()>e){d=new a.i;var h=new a.i;h.L(b);h.R(-e,-e);d.L(h);d.Ha(g);return d.u()||
d.ca()<=e&&d.ba()<=e?!1:!0}d=new a.zb;var h=new a.zb,m=[0,0],n=[0,0],q=new a.b;g.Yl(q);d.fd(q);g.Zl(q);d.wd(q);b.Yl(q);h.fd(q);b.Zl(q);h.wd(q);d.Ha(h,null,m,n,e);return 1!=d.Ha(h,null,null,null,e)?!1:0<m[0]&&1>m[1]&&0<n[0]&&1>n[1]};c.ZC=function(b,c,d){var e,l,g=new a.i,h=new a.i,m=new a.cl(b,c,d,!0);if(!m.next())return!0;if(this.ED(b,c,d))return!1;var n=null,n=b,q=null,q=null;c.F()==a.j.Polygon&&(q=c);var s=!1,t=!1;do{e=m.jk();l=m.fk();l=c.Ga(c.Fa(l));g.L(m.Ew());g.R(d,d);if(g.contains(l)&&(l=a.hd.ie(n,
l,0),0!=l)||c.F()==a.j.Polygon&&(e=b.Ga(b.Fa(e)),h.L(m.iw()),h.R(d,d),h.contains(e)&&(l=a.hd.ie(q,e,0),0!=l)))return!1;s||(!a.gf.Bn(b,c.fa()-1)||null!=b.qb&&null!=b.qb.Bb?n=b:(n=new a.La,b.copyTo(n),n.dj(1)),s=!0);c.F()!=a.j.Polygon||t||(t=c,!a.gf.Bn(t,b.fa()-1)||null!=c.qb&&null!=c.qb.Bb?q=c:(q=new a.La,t.copyTo(q),q.dj(1)),t=!0)}while(m.next());return!0};c.sc=function(b,c,d){var e=new a.i;e.L(b);e.R(d,d);return e.contains(c)};c.mm=function(b,c,d){var e=new a.i;e.L(c);e.R(d,d);c=new a.b;b.Yl(c);
if(!e.contains(c))return!0;b.YE(c);if(!e.contains(c))return!0;b.aF(c);if(!e.contains(c))return!0;b.Zl(c);return e.contains(c)?!1:!0};c.jA=function(b,c,d){if(b.fa()!=c.fa()||b.G()!=c.G())return!1;var e=new a.b,l=new a.b,g=!0;d*=d;for(var h=0;h<b.fa();h++){if(b.Ec(h)!=c.Ec(h)){g=!1;break}for(var m=b.Fa(h);m<c.Ec(h);m++)if(b.A(m,e),c.A(m,l),a.b.$b(e,l)>d){g=!1;break}if(!g)break}return g?!0:!1};c.NI=function(b,c,d){if(b.G()!=c.G())return!1;var e=new a.b,l=new a.b,g=!0;d*=d;for(var h=0;h<b.G();h++)if(b.A(h,
e),c.A(h,l),a.b.$b(e,l)>d){g=!1;break}return g?!0:!1};c.Ow=function(b,c,d,e,l,g){var h=!1,m;b.G()>c.G()?(e&&(e=!1,h=!0),m=c):(m=b,b=c);c=null;if(l||g||h){c=new a.Wk(b.G());for(var n=0;n<b.G();n++)c.write(n,0)}var n=new a.i,q=new a.i,s=new a.i;m.s(n);b.s(q);n.R(d,d);q.R(d,d);s.L(n);s.Ha(q);for(var q=new a.b,t=new a.b,z=!0,u=a.Ja.oB(b,s),w=u.Se(),x=d*d,A=0;A<m.G();A++)if(m.A(A,q),s.contains(q)){var y=!1;n.L(q.x,q.y,q.x,q.y);w.Ch(n,d);for(var O=w.next();-1!=O&&!(O=u.ea(O),b.A(O,t),a.b.$b(q,t)<=x&&((l||
g||h)&&c.write(O,1),y=!0,e));O=w.next());if(!y&&(z=!1,l||e))return!1}else{if(l||e)return!1;z=!1}if(g&&z)return!1;if(e)return!0;for(n=0;n<b.G();n++)if(1==c.read(n)){if(g)return!0}else if(l||h)return!1;return g?!1:!0};c.nA=function(b,c,d){var e;b.G()>c.G()?e=c:(e=b,b=c);c=new a.i;var l=new a.i,g=new a.i;e.s(c);b.s(l);c.R(d,d);l.R(d,d);g.L(c);g.Ha(l);for(var l=new a.b,h=new a.b,m=d*d,n=a.Ja.oB(b,g),q=n.Se(),s=0;s<e.G();s++)if(e.A(s,l),g.contains(l)){c.L(l.x,l.y,l.x,l.y);q.Ch(c,d);for(var t=q.next();-1!=
t;t=q.next())if(b.A(n.ea(t),h),a.b.$b(l,h)<=m)return!0}return!1};c.Uv=function(a,b,d,e){return c.Wf(a,b,d,e)&&c.Wf(b,a,d,e)};c.Wf=function(f,d,e,g){function h(a,b){return z.IB(a,b)}var m=!0,n=[0,0],q=[0,0],s=0,t=new a.ha(0),z=new c,u,w=new a.i,x=new a.i,A=new a.i;f.s(w);d.s(x);w.R(e,e);x.R(e,e);A.L(w);A.Ha(x);f=f.Da();var x=d.Da(),y=null,C=y=null,G=d.qb;null!=G?(y=G.Bb,C=G.on,null==y&&(y=a.Ja.ij(d,A))):y=a.Ja.ij(d,A);d=y.Se();G=null;for(null!=C&&(G=C.Se());f.lb();)for(;f.Ma();){var M=!1,D=f.ja();
D.s(w);if(!w.kc(A))return!1;if(null!=G&&(G.Ch(w,e),-1==G.next()))return m=!1;C=D.ac();d.Gn(D,e);for(u=d.next();-1!=u;u=d.next()){x.Tb(y.ea(u));u=x.ja();var K=D.Ha(u,null,n,q,e);if(2==K&&(!g||q[0]<=q[1])){var K=n[0],N=n[1],E=q[0],P=q[1];if(K*C<=e&&(1-N)*C<=e){M=!0;s=0;t.resize(0);z.Tg.length=0;for(var R=f.Kb(),E=!0;E;){if(f.Ma()){D=f.ja();C=D.ac();K=D.Ha(u,null,n,q,e);if(2==K&&(!g||q[0]<=q[1])&&(K=n[0],N=n[1],K*C<=e&&(1-N)*C<=e)){R=f.Kb();continue}if(x.Ma()&&(u=x.ja(),K=D.Ha(u,null,n,q,e),2==K&&(!g||
q[0]<=q[1])&&(K=n[0],N=n[1],K*C<=e&&(1-N)*C<=e))){R=f.Kb();continue}}E=!1}R!=f.Kb()&&(f.Tb(R),f.ja());break}else R=f.Kb(),u=b.Pa(R,f.Ra,K,N,x.Kb(),x.Ra,E,P),z.Tg.push(u),t.add(t.size)}}if(!M){if(s==z.Tg.length)return!1;1<t.size-s&&t.yd(s,t.size,h);for(M=0;s<z.Tg.length;s++)if(u=z.Tg[t.get(s)],!(u.Oi<M&&u.ji<M)){if(C*(u.Oi-M)>e)return!1;M=u.ji;if(C*(1-M)<=e||1==M)break}if(C*(1-M)>e)return!1;s=0;t.resize(0);z.Tg.length=0}}return m};c.iA=function(b,d,e){if(1>c.Yv(b,d,e,null))return!1;var g=new a.i,h=
new a.i;b.s(g);d.s(h);var m=c.mm(g,h,e),g=c.mm(h,g,e);return m&&g?!0:m&&!g?!c.Wf(d,b,e,!1):g&&!m?!c.Wf(b,d,e,!1):!c.Wf(b,d,e,!1)&&!c.Wf(d,b,e,!1)};c.Yv=function(f,d,e,g){function h(a,b){return x.IB(a,b)}var m,n;f.Hw()>d.Hw()?(m=d,n=f):(m=f,n=d);f=m.Da();d=n.Da();var q=[0,0],s=[0,0],t=-1,z=0,u,w=new a.ha(0),x=new c,A,y=new a.i,C=new a.i,G=new a.i;m.s(y);n.s(C);y.R(e,e);C.R(e,e);G.L(y);G.Ha(C);m=null;null!=g&&(m=new a.b);u=C=C=null;var M=n.qb;null!=M?(C=M.Bb,u=M.on,null==C&&(C=a.Ja.ij(n,G))):C=a.Ja.ij(n,
G);n=C.Se();M=null;for(null!=u&&(M=u.Se());f.lb();)for(u=0;f.Ma();){var D=f.ja();D.s(y);if(y.kc(G)&&!(null!=M&&(M.Ch(y,e),-1==M.next()))){var K=D.ac();n.Gn(D,e);for(var N=n.next();-1!=N;N=n.next()){var E=C.ea(N);d.Tb(E);A=d.ja();var P=A.ac(),R=D.Ha(A,null,q,s,e);if(0<R){var N=q[0],t=s[0],F=2==R?q[1]:NaN,T=2==R?s[1]:NaN;if(2==R){if(K*(F-N)>e)return t=1;var I=K*(F-N);if(d.Ma()){A=d.ja();R=D.Ha(A,null,q,null,e);if(2==R){var R=q[0],U=q[1],R=K*(U-R);if(I+R>e)return t=1}d.Tb(E);d.ja()}if(!d.wl()){d.oi();
A=d.oi();R=D.Ha(A,null,q,null,e);if(2==R&&(R=q[0],U=q[1],R=K*(U-R),I+R>e))return t=1;d.Tb(E);d.ja()}if(f.Ma()){E=f.Kb();D=f.ja();R=D.Ha(A,null,q,null,e);if(2==R&&(R=q[0],U=q[1],R=K*(U-R),I+R>e))return t=1;f.Tb(E);f.ja()}if(!f.wl()){E=f.Kb();f.oi();D=f.oi();R=D.Ha(A,null,q,null,e);if(2==R&&(R=q[0],U=q[1],R=P*(U-R),I+R>e))return t=1;f.Tb(E);f.ja()}A=b.Pa(f.Kb(),f.Ra,N,F,d.Kb(),d.Ra,t,T);x.Tg.push(A);w.add(w.size)}t=0;null!=g&&(D.Lb(N,m),g.add(m.x),g.add(m.y))}}if(z<x.Tg.length){w.yd(z,w.size,h);D=0;
for(N=x.Tg[w.get(z)].Jl;z<x.Tg.length;z++)if(A=x.Tg[w.get(z)],!(A.Oi<D&&A.ji<D))if(K*(A.Oi-D)>e)u=K*(A.ji-A.Oi),D=A.ji,N=A.Jl;else{A.Jl!=N?(u=K*(A.ji-A.Oi),N=A.Jl):u+=K*(A.ji-A.Oi);if(u>e)return t=1;D=A.ji;if(1==D)break}K*(1-D)>e&&(u=0);z=0;w.resize(0);x.Tg.length=0}}}return t};c.ED=function(b,c,d){var e=b.Da(),l=c.Da();for(b=new a.cl(b,c,d,!1);b.next();){c=b.jk();var g=b.fk();e.Tb(c);l.Tb(g);c=e.ja();if(0<l.ja().Ha(c,null,null,null,d))return!0}return!1};c.eA=function(b,c,d,e){var l=b.Da(),g=new a.i,
h=new a.i,m=new a.i;b.s(g);c.s(h);g.R(d,d);g.contains(h);h.R(d,d);m.L(g);m.Ha(h);g=b.qb;null!=g?(g=g.Bb,null==g&&(g=a.Ja.ij(b,m))):g=a.Ja.ij(b,m);b=g.Se();for(var n=new a.b,q=new a.b,s=d*d,t=0;t<c.G();t++)if(c.A(t,n),m.contains(n)){h.L(n.x,n.y,n.x,n.y);b.Ch(h,d);for(var z=!1,u=b.next();-1!=u;u=b.next())if(l.Tb(g.ea(u)),u=l.ja(),u.Lb(u.Hd(n,!1),q),a.b.$b(q,n)<=s){z=!0;break}if(e){if(!z)return!1}else if(z)return!0}return e?!0:!1};c.dx=function(b,c,d){var e=new a.b,l=d*d,g=b.Da();b=b.qb;if(null!=b&&
(b=b.Bb,null!=b)){var h=new a.i;h.L(c);d=b.ww(h,d);for(h=d.next();-1!=h;h=d.next())if(g.Tb(b.ea(h)),g.Ma()){var h=g.ja(),m=h.Hd(c,!1);h.Lb(m,e);if(a.b.$b(c,e)<=l)return!0}return!1}for(b=new a.i;g.lb();)for(;g.Ma();)if(h=g.ja(),h.s(b),b.R(d,d),b.contains(c)&&(m=h.Hd(c,!1),h.Lb(m,e),a.b.$b(c,e)<=l))return!0;return!1};c.bA=function(a,b,d){return c.dx(a,b,d)&&!c.aw(a,b,d)};c.aw=function(a,b,d){a=a.Rf();return!c.nr(a,b,d)};c.cA=function(b,c,d){if(b.Im()){var e=new a.zb(c.w,c.D,c.w,c.H),l=new a.zb(c.w,
c.H,c.C,c.H),g=new a.zb(c.C,c.H,c.C,c.D);c=new a.zb(c.C,c.D,c.w,c.D);for(b=b.Da();b.lb();)for(;b.Ma();){var h=b.ja();if(h.kc(e,d)||h.kc(l,d)||h.kc(g,d)||h.kc(c,d))return!0}}else{e=new a.i;e.L(c);e.R(d,d);d=b.oc(0);l=new a.b;g=new a.b;c=new a.b;for(var h=new a.b,m=0,n=b.fa();m<n;m++)for(var q=!0,s=b.Fa(m),t=b.Ec(m);s<t;s++)if(q)d.fc(2*s,g),q=!1;else{d.fc(2*s,l);c.K(g);h.K(l);if(0!=e.Mv(c,h))return!0;g.K(l)}}return!1};c.gc=function(b,d,e){var g=b.F(),h=d.F();if(a.U.Th(g)){var m=b.qb;if(null!=m&&(m=
m.hi,null!=m))if(h==a.j.Point){var n=d.A(),n=m.Kk(n.x,n.y);if(1==n)return 1;if(0==n)return 4}else{n=new a.i;d.s(n);n=m.En(n);if(1==n)return 1;if(0==n)return 4;if(e&&a.U.Th(h)&&c.yz(d,m))return 1073741824}}if(a.U.Th(h)&&(m=d.qb,null!=m&&(m=m.hi,null!=m)))if(g==a.j.Point){b=b.A();n=m.Kk(b.x,b.y);if(1==n)return 2;if(0==n)return 4}else{d=new a.i;b.s(d);n=m.En(d);if(1==n)return 2;if(0==n)return 4;if(e&&a.U.Th(g)&&c.yz(b,m))return 1073741824}return 0};c.yz=function(b,c){for(var d=b.G(),e=new a.b,l=0;l<
d;l++)if(b.A(l,e),1==c.Kk(e.x,e.y))return!0;return!1};c.AE=function(b,c,d,e){for(var l=1<=b.sj(0)&&1<=c.sj(0),g=b.Da(),h=c.Da(),m=[0,0],n=[0,0],q=new a.cl(b,c,d,!1),s=!1;q.next();){var t=q.jk(),z=q.fk();g.Tb(t);h.Tb(z);t=g.ja();z=h.ja().Ha(t,null,n,m,d);if(2==z){s=m[0];z=m[1];t=t.ac();if(l&&(z-s)*t>d)return!1;s=!0}else if(0!=z){s=m[0];t=n[0];if(0<s&&1>s&&0<t&&1>t)return!1;s=!0}}if(!s)return!1;g=new a.i;h=new a.i;l=new a.i;b.s(g);c.s(h);g.R(1E3*d,1E3*d);h.R(1E3*d,1E3*d);l.L(g);l.Ha(h);return 10<b.G()&&
(b=a.Fd.clip(b,l,d,0),b.u())||10<c.G()&&(c=a.Fd.clip(c,l,d,0),c.u())?!1:a.el.ur(b,c,d,"F********",e)};c.wD=function(b,d,e,g){var h=1<=b.sj(0)&&1<=d.sj(0),m=new a.i,n=new a.i,q=new a.i;b.s(m);d.s(n);for(var s=!1,t=c.mm(m,n,e),z=c.mm(n,m,e),u=b.Da(),w=d.Da(),x=[0,0],A=[0,0],y=new a.cl(b,d,e,!1);y.next();){var O=y.jk(),C=y.fk();u.Tb(O);w.Tb(C);C=u.ja();O=w.ja().Ha(C,null,A,x,e);if(2==O){var O=x[0],G=x[1],C=C.ac();if(h&&(G-O)*C>e&&(s=!0,t&&z))return!0}else if(0!=O&&(O=x[0],C=A[0],0<O&&1>O&&0<C&&1>C))return!0}h=
new a.i;u=new a.i;h.L(m);h.R(1E3*e,1E3*e);u.L(n);u.R(1E3*e,1E3*e);q.L(h);q.Ha(u);m="";m=s?m+"**":m+"T*";if(t){if(10<d.G()&&(d=a.Fd.clip(d,q,e,0),d.u()))return!1;m+="****"}else m+="T***";if(z){if(10<b.G()&&(b=a.Fd.clip(b,q,e,0),b.u()))return!1;m+="***"}else m+="T**";return a.el.ur(b,d,e,m.toString(),g)};c.bC=function(b,d,e,g){var h=[!1],m=c.wB(b,d,e,h);if(h[0])return m;h=new a.i;d.s(h);h.R(1E3*e,1E3*e);m=null;if(10<b.G()){if(m=a.Fd.clip(b,h,e,0),m.u())return!1}else m=b;return a.el.ru(m,d,e,g)};c.wB=
function(b,c,d,e){e[0]=!1;for(var l=b.Da(),g=c.Da(),h=[0,0],m=[0,0],n=new a.cl(b,c,d,!1),q=!1;n.next();){var s=n.jk(),t=n.fk();l.Tb(s,-1);g.Tb(t,-1);s=l.ja();s=g.ja().Ha(s,null,m,h,d);if(0!=s&&(q=!0,1==s&&(s=h[0],t=m[0],0<s&&1>s&&0<t&&1>t)))return e[0]=!0,!1}if(!q){e[0]=!0;h=new a.i;b.s(h);h.R(d,d);g=null;n=b;q=!1;m=new a.i;e=0;for(l=c.fa();e<l;e++)if(0<c.Ia(e)){c.Ti(e,m);if(h.kc(m)){if(g=c.Ga(c.Fa(e)),g=a.gf.xl(n,g,0),0==g)return!1}else return!1;q||(!a.gf.Bn(b,c.fa()-1)||null!=b.qb&&null!=b.qb.Bb?
n=b:(g=new a.La,b.copyTo(g),g.dj(1),n=g),q=!0)}if(1==b.fa()||c.F()==a.j.Polyline)return!0;h=new a.i;c.s(h);h.R(d,d);g=null;m=c;n=!1;d=new a.i;e=0;for(l=b.fa();e<l;e++)if(0<b.Ia(e)){b.Ti(e,d);if(h.kc(d)&&(g=b.Ga(b.Fa(e)),g=a.gf.xl(m,g,0),1==g))return!1;n||(!a.gf.Bn(c,b.fa()-1)||null!=c.qb&&null!=c.qb.Bb?m=c:(g=new a.La,c.copyTo(g),g.dj(1),m=g),n=!0)}return!0}return!1};c.CE=function(b,c,d,e){for(var l=b.Da(),g=c.Da(),h=[0,0],m=[0,0],n=new a.cl(b,c,d,!1),q=!1;n.next();){var s=n.jk(),t=n.fk();l.Tb(s);
g.Tb(t);s=l.ja();s=g.ja().Ha(s,null,m,h,d);if(2==s)q=!0;else if(0!=s){q=h[0];s=m[0];if(0<q&&1>q&&0<s&&1>s)return!1;q=!0}}if(!q)return!1;g=new a.i;h=new a.i;l=new a.i;b.s(g);c.s(h);g.R(1E3*d,1E3*d);h.R(1E3*d,1E3*d);l.L(g);l.Ha(h);return 10<b.G()&&(b=a.Fd.clip(b,l,d,0),b.u())||10<c.G()&&(c=a.Fd.clip(c,l,d,0),c.u())?!1:a.el.Vl(b,c,d,"F********",e)};c.YC=function(b,d,e,g){for(var h=b.Da(),m=d.Da(),n=[0,0],q=[0,0],s=new a.cl(b,d,e,!1),t=!1;s.next();){var z=s.jk(),u=s.fk();h.Tb(z);m.Tb(u);z=h.ja();z=m.ja().Ha(z,
null,q,n,e);if(2==z)t=!0;else if(0!=z){t=n[0];z=q[0];if(0<t&&1>t&&0<z&&1>z)return!0;t=!0}}if(!t)return!1;m=new a.i;n=new a.i;q=new a.i;s=new a.i;h=new a.i;b.s(m);d.s(n);return c.mm(n,m,e)?(q.L(m),q.R(1E3*e,1E3*e),s.L(n),s.R(1E3*e,1E3*e),h.L(q),h.Ha(s),10<b.G()&&(b=a.Fd.clip(b,h,e,0),b.u())||10<d.G()&&(d=a.Fd.clip(d,h,e,0),d.u())?!1:a.el.Vl(b,d,e,"T********",g)):a.el.Vl(b,d,e,"T*****T**",g)};c.jC=function(b,d,e,g){var h=[!1],m=c.wB(b,d,e,h);if(h[0])return m;h=new a.i;d.s(h);h.R(1E3*e,1E3*e);m=null;
if(10<b.G()){if(m=a.Fd.clip(b,h,e,0),m.u())return!1}else m=b;return a.el.cy(m,d,e,g)};c.YB=function(b,c,d){return 1==a.hd.ie(b,c,d)?!0:!1};c.yD=function(b,c,d){return 2==a.hd.ie(b,c,d)?!0:!1};c.nr=function(b,c,d){var e=new a.b;d*=d;for(var l=0;l<b.G();l++)if(b.A(l,e),a.b.$b(e,c)<=d)return!1;return!0};c.prototype.IB=function(a,b){var c=this.Tg[a],d=this.Tg[b];return c.Jl<d.Jl||c.Jl==d.Jl&&(c.Vt<d.Vt||c.Vt==d.Vt&&(c.Oi<d.Oi||c.Oi==d.Oi&&(c.ji<d.ji||c.ji==d.ji&&c.dE<d.dE)))?-1:1};return c}();a.jd=c})(y||
(y={}));(function(a){var b;(function(a){a[a.InteriorInterior=0]="InteriorInterior";a[a.InteriorBoundary=1]="InteriorBoundary";a[a.InteriorExterior=2]="InteriorExterior";a[a.BoundaryInterior=3]="BoundaryInterior";a[a.BoundaryBoundary=4]="BoundaryBoundary";a[a.BoundaryExterior=5]="BoundaryExterior";a[a.ExteriorInterior=6]="ExteriorInterior";a[a.ExteriorBoundary=7]="ExteriorBoundary";a[a.ExteriorExterior=8]="ExteriorExterior"})(b||(b={}));var c;(function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates";
a[a.AreaLinePredicates=1]="AreaLinePredicates";a[a.LineLinePredicates=2]="LineLinePredicates";a[a.AreaPointPredicates=3]="AreaPointPredicates";a[a.LinePointPredicates=4]="LinePointPredicates";a[a.PointPointPredicates=5]="PointPointPredicates"})(c||(c={}));b=function(){function b(){this.Yd=0;this.h=new a.fs;this.B=[0,0,0,0,0,0,0,0,0];this.Ua=[0,0,0,0,0,0,0,0,0];this.$=[!1,!1,!1,!1,!1,!1,!1,!1,!1];this.Nl=this.Zt=-1}b.oy=function(b,c,d,e,l){if(9!=e.length)throw a.g.sa("relation string length has to be 9 characters");
for(var g=0;9>g;g++){var h=e.charAt(g);if("*"!=h&&"T"!=h&&"F"!=h&&"0"!=h&&"1"!=h&&"2"!=h)throw a.g.sa("relation string");}g=this.XN(e,b.gb(),c.gb());if(0!=g)return a.jd.py(b,c,d,g,l);g=new a.i;b.s(g);h=new a.i;c.s(h);var m=new a.i;m.L(g);m.Eb(h);d=a.Ja.Ad(d,m,!1);b=this.NB(b,d);c=this.NB(c,d);if(b.u()||c.u())return this.qR(b,c,e);g=c.F();h=!1;switch(b.F()){case a.j.Polygon:switch(g){case a.j.Polygon:h=this.ur(b,c,d,e,l);break;case a.j.Polyline:h=this.Vl(b,c,d,e,l);break;case a.j.Point:h=this.tr(b,
c,d,e,l);break;case a.j.MultiPoint:h=this.sr(b,c,d,e,l)}break;case a.j.Polyline:switch(g){case a.j.Polygon:h=this.Vl(c,b,d,this.Jo(e),l);break;case a.j.Polyline:h=this.dy(b,c,d,e,l);break;case a.j.Point:h=this.wr(b,c,d,e,l);break;case a.j.MultiPoint:h=this.vr(b,c,d,e,l)}break;case a.j.Point:switch(g){case a.j.Polygon:h=this.tr(c,b,d,this.Jo(e),l);break;case a.j.Polyline:h=this.wr(c,b,d,this.Jo(e),l);break;case a.j.Point:h=this.JQ(b,c,d,e);break;case a.j.MultiPoint:h=this.or(c,b,d,this.Jo(e),l)}break;
case a.j.MultiPoint:switch(g){case a.j.Polygon:h=this.sr(c,b,d,this.Jo(e),l);break;case a.j.Polyline:h=this.vr(c,b,d,this.Jo(e),l);break;case a.j.MultiPoint:h=this.Vx(b,c,d,e,l);break;case a.j.Point:h=this.or(b,c,d,e,l)}break;default:h=!1}return h};b.ur=function(c,d,e,g,h){var m=new b;m.pi();m.si(g);m.vF();var n=new a.i,q=new a.i;c.s(n);d.s(q);g=!1;a.jd.nj(n,q,e)&&(m.As(c,d),g=!0);g||(n=a.jd.gc(c,d,!1),4==n?(m.As(c,d),g=!0):1==n?(m.Av(d),g=!0):2==n&&(m.$A(c),g=!0));g||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),
m.Jn(g,e,h),m.ro(c,d),m.h.xg());return b.Mf(m.B,m.Ic)};b.ru=function(c,d,e,g){var h=new b;h.pi();h.si("T*****F**");h.vF();var m=new a.i,n=new a.i;c.s(m);d.s(n);var q=!1;a.jd.nj(m,n,e)&&(h.As(c,d),q=!0);q||(m=a.jd.gc(c,d,!1),4==m?(h.As(c,d),q=!0):1==m?(h.Av(d),q=!0):2==m&&(h.$A(c),q=!0));if(q)return this.Mf(h.B,h.Ic);q=new a.gd;c=q.Fb(c);m=q.Fb(d);a.aj.aa(q,e,g,!1);e=q.jf(m).Rf();q.wo(0,!0,!0);a.nm.aa(q,c,-1,!1,g);if(0==q.G(c))return!1;a.nm.aa(q,m,-1,!1,g);h.Mp(q,g);d=0==q.G(m);if(!d&&(h.ro(c,m),h.h.xg(),
m=this.Mf(h.B,h.Ic),!m))return m;c=q.jf(c);q=new a.gd;c=q.Fb(c);m=q.Fb(e);h.Mp(q,g);h.Yd=0;h.pi();h.si(d?"T*****F**":"******F**");h.vy();h.ro(c,m);h.h.xg();return this.Mf(h.B,h.Ic)};b.Vl=function(c,d,e,g,h){var m=new b;m.pi();m.si(g);m.vy();var n=new a.i,q=new a.i;c.s(n);d.s(q);g=!1;a.jd.nj(n,q,e)&&(m.Bs(c,d),g=!0);g||(n=a.jd.gc(c,d,!1),4==n?(m.Bs(c,d),g=!0):1==n&&(m.aB(d),g=!0));g||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,e,h),m.Jg=m.h.to(),b.ds(d,m.h,m.Jg),m.ro(c,d),m.h.uo(m.Jg),m.h.xg());return b.Mf(m.B,
m.Ic)};b.cy=function(c,d,e,g){var h=new b;h.pi();h.si("T*****F**");h.vy();var m=new a.i,n=new a.i;c.s(m);d.s(n);var q=!1;a.jd.nj(m,n,e)&&(h.Bs(c,d),q=!0);q||(m=a.jd.gc(c,d,!1),4==m?(h.Bs(c,d),q=!0):1==m&&(h.aB(d),q=!0));if(q)return this.Mf(h.B,h.Ic);q=new a.gd;c=q.Fb(c);d=q.Fb(d);h.Jn(q,e,g);if(0==q.G(c))return!1;h.ro(c,d);h.h.xg();return this.Mf(h.B,h.Ic)};b.sr=function(c,d,e,g,h){var m=new b;m.pi();m.si(g);m.wF();var n=new a.i,q=new a.i;c.s(n);d.s(q);g=!1;a.jd.nj(n,q,e)&&(m.Cs(c),g=!0);g||(n=a.jd.gc(c,
d,!1),4==n?(m.Cs(c),g=!0):1==n&&(m.bK(),g=!0));g||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,e,h),m.Ov(c,d),m.h.xg());return b.Mf(m.B,m.Ic)};b.dy=function(c,d,e,g,h){var m=new b;m.pi();m.si(g);m.YR();g=new a.i;var n=new a.i;c.s(g);d.s(n);var q=!1;a.jd.nj(g,n,e)&&(m.CD(c,d),q=!0);q||4!=a.jd.gc(c,d,!1)||(m.CD(c,d),q=!0);q||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,e,h),m.ph=m.h.to(),m.Jg=m.h.to(),b.ds(c,m.h,m.ph),b.ds(d,m.h,m.Jg),m.ro(c,d),m.h.uo(m.ph),m.h.uo(m.Jg),m.h.xg());return b.Mf(m.B,m.Ic)};b.vr=function(c,
d,e,g,h){var m=new b;m.pi();m.si(g);m.KF();g=new a.i;var n=new a.i;c.s(g);d.s(n);var q=!1;a.jd.nj(g,n,e)&&(m.cx(c),q=!0);q||4!=a.jd.gc(c,d,!1)||(m.cx(c),q=!0);q||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,e,h),m.ph=m.h.to(),b.ds(c,m.h,m.ph),m.Ov(c,d),m.h.uo(m.ph),m.h.xg());return b.Mf(m.B,m.Ic)};b.Vx=function(c,d,e,g,h){var m=new b;m.pi();m.si(g);m.PF();g=new a.i;var n=new a.i;c.s(g);d.s(n);var q=!1;a.jd.nj(g,n,e)&&(m.PE(),q=!0);q||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,e,h),m.Ov(c,d),m.h.xg());return b.Mf(m.B,
m.Ic)};b.tr=function(c,d,e,g){var h=new b;h.pi();h.si(g);h.wF();var m=new a.i;c.s(m);d=d.A();var n=!1;a.jd.qu(d,m,e)&&(h.Cs(c),n=!0);n||(e=a.hd.ie(c,d,e),1==e?(h.B[0]=0,h.B[2]=2,h.B[3]=-1,h.B[5]=1,h.B[6]=-1):2==e?(h.B[6]=-1,0!=c.Mh()?(h.B[0]=-1,h.B[3]=0,h.B[2]=2,h.B[5]=1):(h.B[0]=0,h.B[3]=-1,h.B[5]=-1,e=new a.i,c.s(e),h.B[2]=0==e.ca()&&0==e.ba()?-1:1)):h.Cs(c));return this.Mf(h.B,g)};b.wr=function(c,d,e,g,h){var m=new b;m.pi();m.si(g);m.KF();var n=new a.i;c.s(n);g=d.A();var q=!1;a.jd.qu(g,n,e)&&(m.cx(c),
q=!0);if(!q){var n=null,s=q=!1;if(m.$[0]||m.$[6])a.jd.dx(c,g,e)?(m.$[0]&&(n=a.Hh.il(c,h),s=!a.jd.nr(n,g,e),q=!0,m.B[0]=s?-1:0),m.B[6]=-1):(m.B[0]=-1,m.B[6]=0);m.$[3]&&(null!=n&&n.u()?m.B[3]=-1:(q||(null==n&&(n=a.Hh.il(c,h)),s=!a.jd.nr(n,g,e),q=!0),m.B[3]=s?0:-1));m.$[5]&&(null!=n&&n.u()?m.B[5]=-1:q&&!s?m.B[5]=0:(null==n&&(n=a.Hh.il(c,h)),h=a.jd.lu(n,d,e),m.B[5]=h?-1:0));m.$[2]&&(0!=c.ac()?m.B[2]=1:(h=new a.pe(c.description),h.Qd(c,0,c.G()),c=a.jd.lu(h,d,e),m.B[2]=c?-1:0))}return this.Mf(m.B,m.Ic)};
b.or=function(c,d,e,g){var h=new b;h.pi();h.si(g);h.PF();var m=new a.i;c.s(m);d=d.A();var n=!1;a.jd.qu(d,m,e)&&(h.PE(),n=!0);if(!n){m=!1;n=!0;e*=e;for(var q=0;q<c.G();q++){var s=c.Ga(q);a.b.$b(s,d)<=e?m=!0:n=!1;if(m&&!n)break}m?(h.B[0]=0,h.B[2]=n?-1:0,h.B[6]=-1):(h.B[0]=-1,h.B[2]=0,h.B[6]=0)}return b.Mf(h.B,g)};b.JQ=function(c,d,e,g){c=c.A();d=d.A();for(var h=[],m=0;9>m;m++)h[m]=-1;a.b.$b(c,d)<=e*e?h[0]=0:(h[2]=0,h[6]=0);h[8]=2;return b.Mf(h,g)};b.Mf=function(a,b){for(var c=0;9>c;c++)switch(b.charAt(c)){case "T":if(-1==
a[c])return!1;break;case "F":if(-1!=a[c])return!1;break;case "0":if(0!=a[c])return!1;break;case "1":if(1!=a[c])return!1;break;case "2":if(2!=a[c])return!1}return!0};b.qR=function(b,c,d){var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(b.u()&&c.u()){for(var l=0;9>l;l++)e[l]=-1;return this.Mf(e,d)}l=!1;b.u()&&(b=c,l=!0);e[0]=-1;e[1]=-1;e[3]=-1;e[4]=-1;e[6]=-1;e[7]=-1;e[8]=2;c=b.F();a.U.Lc(c)?c==a.j.Polygon?0!=b.Mh()?(e[2]=2,e[5]=1):(e[5]=-1,c=new a.i,b.s(c),e[2]=0==c.ca()&&0==c.ba()?0:1):(c=0!=b.ac(),e[2]=c?1:
0,e[5]=a.Hh.Lo(b)?0:-1):(e[2]=0,e[5]=-1);l&&this.qG(e);return this.Mf(e,d)};b.XN=function(a,c,d){return b.lT(a)?3:b.MS(a)?4:b.mT(a,c,d)?8:b.BR(a,c,d)?16:b.xQ(a)?1:b.KK(a,c,d)?32:0};b.lT=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"F"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"F"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.MS=function(a){return"F"==a.charAt(0)&&"F"==a.charAt(1)&&"*"==a.charAt(2)&&"F"==a.charAt(3)&&"F"==a.charAt(4)&&"*"==a.charAt(5)&&
"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.mT=function(a,b,c){if(0==b&&0==c)return!1;if(2!=b||2!=c)if("F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"T"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)||1==b&&1==c&&"F"==a.charAt(0)&&"T"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0;return 0!=c&&"F"==a.charAt(0)&&"*"==
a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"T"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.BR=function(a,b,c){return b>c?"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1:1==b&&1==c&&"0"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==
a.charAt(8)?!0:!1};b.xQ=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.KK=function(a,b,c){if(b==c){if(1!=b)return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1;if("1"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==
a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0}return!1};b.ds=function(a,b,c){a=b.za(a);for(var d=b.Be;-1!=d;d=b.Bf(d))if(0!=(b.nd(d)&a)){var e=b.te(d);if(-1==e)b.fm(d,c,0);else{var l=e,g=0;do 0!=(b.Gg(l)&a)&&g++,l=b.Xb(b.ta(l));while(l!=e);b.fm(d,c,g)}}};b.Jo=function(a){var b;b=""+a.charAt(0);b+=a.charAt(3);b+=a.charAt(6);b+=a.charAt(1);b+=a.charAt(4);b+=a.charAt(7);b+=a.charAt(2);b+=a.charAt(5);return b+a.charAt(8)};b.prototype.pi=function(){for(var a=
0;9>a;a++)this.B[a]=-2,this.Ua[a]=-2};b.qG=function(a){var b=a[1],c=a[2],d=a[5];a[1]=a[3];a[2]=a[6];a[5]=a[7];a[3]=b;a[6]=c;a[7]=d};b.prototype.si=function(a){this.Ic=a;for(a=0;9>a;a++)"*"!=this.Ic.charAt(a)?(this.$[a]=!0,this.Yd++):this.$[a]=!1};b.prototype.SF=function(){for(var a=0;9>a;a++)this.$[a]&&-2==this.B[a]&&(this.B[a]=-1,this.$[a]=!1)};b.prototype.ec=function(a){if(-2==this.B[a])return!1;if(-1==this.B[a])return this.$[a]=!1,this.Yd--,!0;if("T"!=this.Ic.charAt(a)&&"F"!=this.Ic.charAt(a)){if(this.B[a]<
this.Ua[a])return!1;this.$[a]=!1;this.Yd--;return!0}this.$[a]=!1;this.Yd--;return!0};b.prototype.vF=function(){this.Zt=0;this.Ua[0]=2;this.Ua[1]=1;this.Ua[2]=2;this.Ua[3]=1;this.Ua[4]=1;this.Ua[5]=1;this.Ua[6]=2;this.Ua[7]=1;this.Ua[8]=2;this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.vy=function(){this.Zt=1;this.Nl=3;this.Ua[0]=1;this.Ua[1]=0;this.Ua[2]=2;this.Ua[3]=1;this.Ua[4]=0;this.Ua[5]=1;this.Ua[6]=1;this.Ua[7]=0;this.Ua[8]=2;this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.YR=
function(){this.Zt=2;this.Nl=4;this.Ua[0]=1;this.Ua[1]=0;this.Ua[2]=1;this.Ua[3]=0;this.Ua[4]=0;this.Ua[5]=0;this.Ua[6]=1;this.Ua[7]=0;this.Ua[8]=2;this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.wF=function(){this.Nl=3;this.Ua[0]=0;this.Ua[1]=-1;this.Ua[2]=2;this.Ua[3]=0;this.Ua[4]=-1;this.Ua[5]=1;this.Ua[6]=0;this.Ua[7]=-1;this.Ua[8]=2;this.$[1]&&(this.B[1]=-1,this.$[1]=!1,this.Yd--);this.$[4]&&(this.B[4]=-1,this.$[4]=!1,this.Yd--);this.$[7]&&(this.B[7]=-1,this.$[7]=!1,this.Yd--);this.$[8]&&
(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.KF=function(){this.Nl=4;this.Ua[0]=0;this.Ua[1]=-1;this.Ua[2]=1;this.Ua[3]=0;this.Ua[4]=-1;this.Ua[5]=0;this.Ua[6]=0;this.Ua[7]=-1;this.Ua[8]=2;this.$[1]&&(this.B[1]=-1,this.$[1]=!1,this.Yd--);this.$[4]&&(this.B[4]=-1,this.$[4]=!1,this.Yd--);this.$[7]&&(this.B[7]=-1,this.$[7]=!1,this.Yd--);this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.PF=function(){this.Nl=5;this.Ua[0]=0;this.Ua[1]=-1;this.Ua[2]=0;this.Ua[3]=-1;this.Ua[4]=-1;this.Ua[5]=
-1;this.Ua[6]=0;this.Ua[7]=-1;this.Ua[8]=2;this.$[1]&&(this.B[1]=-1,this.$[1]=!1,this.Yd--);this.$[3]&&(this.B[3]=-1,this.$[3]=!1,this.Yd--);this.$[4]&&(this.B[4]=-1,this.$[4]=!1,this.Yd--);this.$[5]&&(this.B[5]=-1,this.$[5]=!1,this.Yd--);this.$[7]&&(this.B[7]=-1,this.$[7]=!1,this.Yd--);this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.$J=function(a,b,c){var d=!0;this.$[0]&&(this.GO(a,b,c),d=d&&this.ec(0));this.$[1]&&(this.eD(a,b,1),d=d&&this.ec(1));this.$[2]&&(this.fD(a,b,c,2),d=d&&this.ec(2));
this.$[3]&&(this.eD(a,c,3),d=d&&this.ec(3));this.$[4]&&(this.fK(a,b,c),d=d&&this.ec(4));this.$[5]&&(this.eB(a,c,5),d=d&&this.ec(5));this.$[6]&&(this.fD(a,c,b,6),d=d&&this.ec(6));this.$[7]&&(this.eB(a,b,7),d=d&&this.ec(7));return d};b.prototype.As=function(a,b){this.B[0]=-1;this.B[1]=-1;this.B[3]=-1;this.B[4]=-1;this.gq(a,this.$[2]?2:-1,this.Ic.charAt(2),this.$[5]?5:-1,this.Ic.charAt(5));this.gq(b,this.$[6]?6:-1,this.Ic.charAt(6),this.$[7]?7:-1,this.Ic.charAt(7))};b.prototype.gq=function(b,c,d,e,l){if(-1!=
c||-1!=e)("T"!=d&&"F"!=d&&-1!=c||"T"!=l&&"F"!=l&&-1!=e?0!=b.Mh():1)?(-1!=c&&(this.B[c]=2),-1!=e&&(this.B[e]=1)):(-1!=e&&(this.B[e]=-1),-1!=c&&(d=new a.i,b.s(d),this.B[c]=0==d.ca()&&0==d.ba()?0:1))};b.prototype.Av=function(a){this.B[2]=2;this.B[3]=-1;this.B[4]=-1;this.B[5]=1;this.B[6]=-1;this.B[7]=-1;this.gq(a,this.$[0]?0:-1,this.Ic.charAt(0),this.$[1]?1:-1,this.Ic.charAt(1))};b.prototype.$A=function(a){this.Av(a);b.qG(this.B)};b.prototype.Bs=function(b,c){this.B[0]=-1;this.B[1]=-1;this.B[3]=-1;this.B[4]=
-1;if(this.$[6]){var d=this.Ic.charAt(6),d="T"!=d&&"F"!=d?0!=c.ac():!0;this.B[6]=d?1:0}this.$[7]&&(d=a.Hh.Lo(c),this.B[7]=d?0:-1);this.gq(b,this.$[2]?2:-1,this.Ic.charAt(2),this.$[5]?5:-1,this.Ic.charAt(5))};b.prototype.aB=function(b){if(this.$[0]){var c=this.Ic.charAt(0),c="T"!=c&&"F"!=c?0!=b.ac():!0;this.B[0]=c?1:0}this.$[1]&&(b=a.Hh.Lo(b),this.B[1]=b?0:-1);this.B[2]=2;this.B[3]=-1;this.B[4]=-1;this.B[5]=1;this.B[6]=-1;this.B[7]=-1};b.prototype.Cs=function(a){this.B[0]=-1;this.B[3]=-1;this.B[6]=
0;this.gq(a,this.$[2]?2:-1,this.Ic.charAt(2),this.$[5]?5:-1,this.Ic.charAt(5))};b.prototype.bK=function(){this.B[0]=0;this.B[2]=2;this.B[3]=-1;this.B[5]=1;this.B[6]=-1};b.prototype.CD=function(b,c){this.B[0]=-1;this.B[1]=-1;this.B[3]=-1;this.B[4]=-1;if(this.$[2]){var d=this.Ic.charAt(2),d="T"!=d&&"F"!=d?0!=b.ac():!0;this.B[2]=d?1:0}this.$[5]&&(d=a.Hh.Lo(b),this.B[5]=d?0:-1);this.$[6]&&(d=this.Ic.charAt(6),d="T"!=d&&"F"!=d?0!=c.ac():!0,this.B[6]=d?1:0);this.$[7]&&(d=a.Hh.Lo(c),this.B[7]=d?0:-1)};b.prototype.cx=
function(b){this.B[0]=-1;this.B[3]=-1;if(this.$[2]){var c=this.Ic.charAt(2),c="T"!=c&&"F"!=c?0!=b.ac():!0;this.B[2]=c?1:0}this.$[5]&&(b=a.Hh.Lo(b),this.B[5]=b?0:-1);this.B[6]=0};b.prototype.PE=function(){this.B[0]=-1;this.B[2]=0;this.B[6]=0};b.prototype.aK=function(a,b,c){var d=!0;this.$[0]&&(this.HO(a,b),d=d&&this.ec(0));this.$[1]&&(this.DO(a,b,c,this.Jg),d=d&&this.ec(1));this.$[2]&&(this.EO(a,b),d=d&&this.ec(2));this.$[3]&&(this.jK(a,b,c,this.Jg),d=d&&this.ec(3));this.$[4]&&(this.gK(a,b,c,this.Jg),
d=d&&this.ec(4));this.$[5]&&(this.hK(a,b,c),d=d&&this.ec(5));this.$[6]&&(this.AM(a,b),d=d&&this.ec(6));this.$[7]&&(this.zM(a,b,c,this.Jg),d=d&&this.ec(7));return d};b.prototype.tP=function(a,b,c){var d=!0;this.$[0]&&(this.KO(a,b,c,this.ph,this.Jg),d=d&&this.ec(0));this.$[1]&&(this.gD(a,b,c,this.ph,this.Jg,1),d=d&&this.ec(1));this.$[2]&&(this.hD(a,b,c,2),d=d&&this.ec(2));this.$[3]&&(this.gD(a,c,b,this.Jg,this.ph,3),d=d&&this.ec(3));this.$[4]&&(this.lK(a,b,c,this.ph,this.Jg),d=d&&this.ec(4));this.$[5]&&
(this.fB(a,c,this.ph,5),d=d&&this.ec(5));this.$[6]&&(this.hD(a,c,b,6),d=d&&this.ec(6));this.$[7]&&(this.fB(a,b,this.Jg,7),d=d&&this.ec(7));return d};b.prototype.bB=function(a,b,c){var d=!0;this.$[0]&&(this.IO(a,b),d=d&&this.ec(0));this.$[2]&&(this.FO(a,b),d=d&&this.ec(2));this.$[3]&&(this.kK(a,b,c),d=d&&this.ec(3));this.$[5]&&(this.iK(a,b),d=d&&this.ec(5));this.$[6]&&(this.BM(a,b),d=d&&this.ec(6));return d};b.prototype.DD=function(a,b,c){var d=!0;this.$[0]&&(this.LO(a,b,c,this.ph),d=d&&this.ec(0));
this.$[2]&&(this.JO(a,c),d=d&&this.ec(2));this.$[3]&&(this.nK(a,b,c,this.ph),d=d&&this.ec(3));this.$[5]&&(this.mK(a,b,c,this.ph),d=d&&this.ec(5));this.$[6]&&(this.CM(a,b,c),d=d&&this.ec(6));return d};b.prototype.IQ=function(a,b,c){var d=!0;this.$[0]&&(this.MO(a,b,c),d=d&&this.ec(0));this.$[2]&&(this.iD(a,b,c,2),d=d&&this.ec(2));this.$[6]&&(this.iD(a,c,b,6),d=d&&this.ec(6));return d};b.prototype.GO=function(a,b,c){2!=this.B[0]&&(a=this.h.Re(a),0!=(a&b)&&0!=(a&c)&&(this.B[0]=2))};b.prototype.eD=function(a,
b,c){if(1!=this.B[c]){var d=this.h.Re(this.h.ta(a));0!=(this.h.Re(a)&b)&&0!=(d&b)&&(this.B[c]=1)}};b.prototype.fD=function(a,b,c,d){2!=this.B[d]&&(a=this.h.Re(a),0!=(a&b)&&0==(a&c)&&(this.B[d]=2))};b.prototype.fK=function(a,b,c){if(1!=this.B[4]){var d=this.h.Gg(a);0!=(d&b)&&0!=(d&c)?this.B[4]=1:0!=this.B[4]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)&&(a=this.h.nd(this.h.kf(a)),0!=(a&b)&&0!=(a&c)&&(this.B[4]=0))}};b.prototype.eB=function(a,b,c){if(1!=this.B[c]){var d=this.h.Re(this.h.ta(a));0==
(this.h.Re(a)&b)&&0==(d&b)&&(this.B[c]=1)}};b.prototype.HO=function(a,b){if(1!=this.B[0]){var c=this.h.Re(this.h.ta(a));0!=(this.h.Re(a)&b)&&0!=(c&b)&&(this.B[0]=1)}};b.prototype.DO=function(a,b,c,d){if(0!=this.B[1]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)){var e=this.h.kf(a),l=this.h.nd(e);0==(l&b)&&0!=(this.h.Re(a)&b)&&(a=this.h.Sf(e,d),0!=(l&c)&&0!=a%2&&(this.B[1]=0))}};b.prototype.EO=function(a,b){2!=this.B[2]&&0!=(this.h.Gg(a)&b)&&(this.B[2]=2)};b.prototype.jK=function(a,b,c,d){if(1!=this.B[3]){var e=
this.h.Gg(a);0!=(e&b)&&0!=(e&c)?this.B[3]=1:0!=this.B[3]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)&&(e=this.h.kf(a),a=this.h.nd(e),0!=(a&b)&&(b=this.h.Sf(e,d),0!=(a&c)&&0==b%2&&(this.B[3]=0)))}};b.prototype.gK=function(a,b,c,d){if(0!=this.B[4]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)){var e=this.h.kf(a);a=this.h.nd(e);0!=(a&b)&&(b=this.h.Sf(e,d),0!=(a&c)&&0!=b%2&&(this.B[4]=0))}};b.prototype.hK=function(a,b,c){1!=this.B[5]&&(a=this.h.Gg(a),0!=(a&b)&&0==(a&c)&&(this.B[5]=1))};b.prototype.AM=
function(a,b){if(1!=this.B[6]){var c=this.h.Re(this.h.ta(a));0==(this.h.Re(a)&b)&&0==(c&b)&&(this.B[6]=1)}};b.prototype.zM=function(a,b,c,d){if(0!=this.B[7]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)){var e=this.h.kf(a),l=this.h.nd(e);0==(l&b)&&0==(this.h.Re(a)&b)&&(a=this.h.Sf(e,d),0!=(l&c)&&0!=a%2&&(this.B[7]=0))}};b.prototype.KO=function(a,b,c,d,e){if(1!=this.B[0]){var l=this.h.Gg(a);0!=(l&b)&&0!=(l&c)?this.B[0]=1:0!=this.B[0]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)&&(a=this.h.kf(a),
l=this.h.nd(a),0!=(l&b)&&0!=(l&c)&&(b=this.h.Sf(a,d),e=this.h.Sf(a,e),0==b%2&&0==e%2&&(this.B[0]=0)))}};b.prototype.gD=function(a,b,c,d,e,l){if(0!=this.B[l]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)){a=this.h.kf(a);var g=this.h.nd(a);0!=(g&b)&&0!=(g&c)&&(b=this.h.Sf(a,d),e=this.h.Sf(a,e),0==b%2&&0!=e%2&&(this.B[l]=0))}};b.prototype.hD=function(a,b,c,d){1!=this.B[d]&&(a=this.h.Gg(a),0!=(a&b)&&0==(a&c)&&(this.B[d]=1))};b.prototype.lK=function(a,b,c,d,e){if(0!=this.B[4]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),
this.ni)){a=this.h.kf(a);var l=this.h.nd(a);0!=(l&b)&&0!=(l&c)&&(b=this.h.Sf(a,d),e=this.h.Sf(a,e),0!=b%2&&0!=e%2&&(this.B[4]=0))}};b.prototype.fB=function(a,b,c,d){0!=this.B[d]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)&&(a=this.h.kf(a),0==(this.h.nd(a)&b)&&0!=this.h.Sf(a,c)%2&&(this.B[d]=0))};b.prototype.IO=function(a,b){0!=this.B[0]&&0==(this.h.nd(a)&b)&&0!=(this.h.pj(this.h.lw(a))&b)&&(this.B[0]=0)};b.prototype.FO=function(a,b){2!=this.B[2]&&0!=(this.h.nd(a)&b)&&(this.B[2]=2)};b.prototype.kK=
function(a,b,c){0!=this.B[3]&&(a=this.h.nd(a),0!=(a&b)&&0!=(a&c)&&(this.B[3]=0))};b.prototype.iK=function(a,b){1!=this.B[5]&&0!=(this.h.nd(a)&b)&&(this.B[5]=1)};b.prototype.BM=function(a,b){0!=this.B[6]&&0==(this.h.nd(a)&b)&&0==(this.h.pj(this.h.lw(a))&b)&&(this.B[6]=0)};b.prototype.LO=function(a,b,c,d){if(0!=this.B[0]){var e=this.h.nd(a);0!=(e&b)&&0!=(e&c)&&0==this.h.Sf(a,d)%2&&(this.B[0]=0)}};b.prototype.JO=function(a,b){1!=this.B[2]&&(-1!=this.h.te(a)?this.B[2]=1:0!=this.B[2]&&0==(this.h.nd(a)&
b)&&(this.B[2]=0))};b.prototype.nK=function(a,b,c,d){if(0!=this.B[3]){var e=this.h.nd(a);0!=(e&b)&&0!=(e&c)&&0!=this.h.Sf(a,d)%2&&(this.B[3]=0)}};b.prototype.mK=function(a,b,c,d){if(0!=this.B[5]){var e=this.h.nd(a);0!=(e&b)&&0==(e&c)&&0!=this.h.Sf(a,d)%2&&(this.B[5]=0)}};b.prototype.CM=function(a,b,c){0!=this.B[6]&&(a=this.h.nd(a),0==(a&b)&&0!=(a&c)&&(this.B[6]=0))};b.prototype.MO=function(a,b,c){0!=this.B[0]&&(a=this.h.nd(a),0!=(a&b)&&0!=(a&c)&&(this.B[0]=0))};b.prototype.iD=function(a,b,c,d){0!=
this.B[d]&&(a=this.h.nd(a),0!=(a&b)&&0==(a&c)&&(this.B[d]=0))};b.prototype.ro=function(b,c){var d=!1,e=this.h.za(b),l=this.h.za(c);this.ni=this.h.Eg();for(var g=this.h.Be;-1!=g;g=this.h.Bf(g)){var h=this.h.te(g);if(-1==h){if(-1!=this.Nl)switch(this.Nl){case 3:d=this.bB(g,e,l);break;case 4:d=this.DD(g,e,l);break;default:throw a.g.sa("internal error");}}else{var m=h;do{var n=m;if(1!=this.h.ub(n,this.ni)){do{switch(this.Zt){case 0:d=this.$J(n,e,l);break;case 1:d=this.aK(n,e,l);break;case 2:d=this.tP(n,
e,l);break;default:throw a.g.sa("internal error");}if(d)break;this.h.Cb(n,this.ni,1);n=this.h.Xb(n)}while(n!=m&&!d)}if(d)break;m=this.h.Xb(this.h.ta(n))}while(m!=h);if(d)break}}d||this.SF();this.h.kh(this.ni)};b.prototype.Ov=function(b,c){for(var d=!1,e=this.h.za(b),l=this.h.za(c),g=this.h.Be;-1!=g;g=this.h.Bf(g)){switch(this.Nl){case 3:d=this.bB(g,e,l);break;case 4:d=this.DD(g,e,l);break;case 5:d=this.IQ(g,e,l);break;default:throw a.g.xa();}if(d)break}d||this.SF()};b.prototype.Mp=function(a,b){this.h.Kp(a,
b)};b.prototype.Jn=function(a,b,c){this.sM(a,b,c);this.Mp(a,c)};b.prototype.sM=function(b,c,d){a.aj.aa(b,c,d,!1);b.wo(0,!0,!0);for(c=b.ad;-1!=c;c=b.we(c))b.Mb(c)==a.j.Polygon&&a.nm.aa(b,c,-1,!1,d)};b.NB=function(b,c){var d=b.F();if(a.U.Mc(d))return d=new a.Ya(b.description),d.Cc(b,!0),d;if(d==a.j.Envelope){d=new a.i;b.s(d);if(d.ca()<=c&&d.ba()<=c)return d=new a.Wa(b.description),b.Af(d),d;if(d.ca()<=c||d.ba()<=c){var d=new a.Ya(b.description),e=new a.Wa;b.uf(0,e);d.ef(e);b.uf(2,e);d.lineTo(e);return d}d=
new a.La(b.description);d.Xc(b,!1);return d}return b};return b}();a.el=b})(y||(y={}));(function(a){var b=function(){function b(c){this.Dl=new a.ha(0);this.Nt=new a.ha(0);this.zr=new a.b;this.Ar=new a.b;this.a=c;this.Sq=-1}b.prototype.dc=function(a){return this.a.dc(this.Iw(a))};b.prototype.nt=function(a){var b=this.sw(a);a=this.vC(a);if(this.a.Va(b)==a){var c=b,b=a;a=c}this.a.vc(b,this.zr);this.a.vc(a,this.Ar);return this.zr.y<this.Ar.y};b.prototype.Iw=function(a){var b=this.sw(a);a=this.vC(a);return this.a.Y(b)==
a?b:a};b.prototype.sw=function(a){return this.Dl.get(a)};b.prototype.vC=function(a){return this.Nt.get(a)};b.prototype.hC=function(a){this.Dl.set(a,this.Sq);this.Sq=a};b.prototype.GE=function(b){if(-1!=this.Sq){var c=this.Sq;this.Sq=this.Dl.get(c);this.Dl.set(c,b);this.Nt.set(c,this.a.Y(b));return c}null==this.Dl&&(this.Dl=new a.ha(0),this.Nt=new a.ha(0));c=this.Dl.size;this.Dl.add(b);this.Nt.add(this.a.Y(b));return c};b.prototype.Cw=function(a){return this.a.sd(this.sw(a))};return b}();a.AT=b;var c=
function(){function b(c){this.ne=c;this.Wd=new a.zb;this.Kl=new a.zb;this.eE=0;this.pn=null;this.yx=-1}b.prototype.compare=function(a,b,c){c=a.ea(c);var d=this.ne.ab,f;this.yx==b?f=this.eE:(this.pn=d.dc(b),null==this.pn?(a=d.a,a.Pc(d.Iw(b),this.Wd),this.pn=this.Wd,f=this.Wd.xe(this.ne.Zg,0)):f=this.pn.xe(this.ne.Zg,0),this.eE=f,this.yx=b);a=d.dc(c);var e;null==a?(a=d.a,a.Pc(d.Iw(c),this.Kl),a=this.Kl,e=this.Kl.xe(this.ne.Zg,0)):e=a.xe(this.ne.Zg,0);f==e&&(b=d.nt(b),c=d.nt(c),c=Math.min(b?this.pn.ia:
this.pn.ka,c?a.ia:a.ka),b=0.5*(c+this.ne.Zg),b==this.ne.Zg&&(b=c),f=this.pn.xe(b,0),e=a.xe(b,0));return f<e?-1:f>e?1:0};b.prototype.reset=function(){this.yx=-1};return b}(),d=function(){function d(){this.Rl=this.Dk=null;this.$a=new a.bj;this.$a.kM();this.Md=new c(this);this.$a.In(this.Md)}d.prototype.WM=function(){var b=!1;this.Pt&&(b=this.XM());if(1==this.a.fa(this.V)){var c=this.a.Wb(this.V),b=this.a.Fw(c);this.a.Cy(c,!0);return 0>b?(b=this.a.Db(c),this.a.lF(b),this.a.Wi(c,this.a.Va(b)),!0):!1}this.Ak=
this.a.Tv();this.ln=this.a.Tv();for(c=this.a.Wb(this.V);-1!=c;c=this.a.cc(c))this.a.Pp(c,this.Ak,0),this.a.Pp(c,this.ln,-1);c=new a.ha(0);this.Zg=NaN;var d=new a.b;this.kr=this.a.fa(this.V);this.gn=this.a.re();this.ar=this.a.re();for(var f=this.Dk.hc(this.Dk.Xd);-1!=f;f=this.Dk.cb(f)){var e=this.Dk.getData(f);this.a.vc(e,d);d.y!=this.Zg&&0!=c.size&&(b=this.xr(c)||b,this.Md.reset(),c.clear(!1));c.add(e);this.Zg=d.y;if(0==this.kr)break}0<this.kr&&(b=this.xr(c)||b,c.clear(!1));this.a.cf(this.gn);this.a.cf(this.ar);
for(c=this.a.Wb(this.V);-1!=c;)if(3==this.a.Ei(c,this.Ak)){this.a.Cy(c,!0);d=c;for(c=this.a.Ei(c,this.ln);-1!=c;)f=this.a.Ei(c,this.ln),this.a.aQ(this.V,this.a.cc(d),c),d=c,c=f;c=this.a.cc(d)}else this.a.Cy(c,!1),c=this.a.cc(c);this.a.sy(this.Ak);this.a.sy(this.ln);return b};d.prototype.xr=function(a){return this.VQ(a)};d.prototype.VQ=function(c){var d=!1;null==this.ab&&(this.ab=new b(this.a));null==this.Rl?(this.Rl=new a.ha(0),this.Rl.yb(16)):this.Rl.clear(!1);this.UQ(c);for(var f=0,e=c.size;f<e;f++){var l=
c.get(f);-1!=l&&this.bD(l,-1)}for(f=0;f<this.Rl.size&&0<this.kr;f++)if(c=this.Rl.get(f),l=this.ab.Cw(this.$a.ea(c)),e=-1,0==this.a.Ei(l,this.Ak)){for(var l=this.$a.he(c),g=c,h=!1;-1!=l;){var m=this.$a.ea(l),n=this.ab.Cw(m),q=this.a.Ei(n,this.Ak);if(0!=q){e=n;break}g=l;l=this.$a.he(l)}-1==l?(h=!0,l=g):(m=this.$a.ea(l),h=this.ab.nt(m),l=this.$a.cb(l),h=!h);do{m=this.$a.ea(l);n=this.ab.Cw(m);q=this.a.Ei(n,this.Ak);if(0==q&&(h!=this.ab.nt(m)&&(d=this.a.Db(n),this.a.lF(d),this.a.Wi(n,this.a.Va(d)),d=!0),
this.a.Pp(n,this.Ak,h?3:2),h||(g=this.a.Ei(e,this.ln),this.a.Pp(e,this.ln,n),this.a.Pp(n,this.ln,g)),this.kr--,0==this.kr))return d;e=n;g=l;l=this.$a.cb(l);h=!h}while(g!=c)}return d};d.prototype.UQ=function(a){for(var b=0,c=a.size;b<c;b++){var d=a.get(b),f=this.a.Sa(d,this.gn),e=this.a.Sa(d,this.ar);if(-1!=f){var l=this.$a.ea(f);this.ab.hC(l);this.a.mb(d,this.gn,-1)}-1!=e&&(l=this.$a.ea(e),this.ab.hC(l),this.a.mb(d,this.ar,-1));l=-1;-1!=f&&-1!=e?(this.$a.ld(f,-1),this.$a.ld(e,-1),a.set(b,-1)):l=-1!=
f?f:e;-1!=l&&(this.bD(d,l)||this.$a.ld(l,-1),a.set(b,-1))}};d.prototype.bD=function(b,c){var d=new a.b,f=new a.b;this.a.vc(b,d);var e=this.a.Y(b);this.a.vc(e,f);var l=!1;if(d.y<f.y){var l=!0,g=this.ab.GE(b),h;-1==c?h=this.$a.addElement(g,-1):(h=c,this.$a.Vi(h,g));g=this.a.Sa(e,this.gn);-1==g?this.a.mb(e,this.gn,h):this.a.mb(e,this.ar,h);e=this.a.sd(b);0==this.a.Ei(e,this.Ak)&&this.Rl.add(h)}e=this.a.Va(b);this.a.vc(e,f);d.y<f.y&&(l=!0,g=this.ab.GE(e),-1==c?h=this.$a.addElement(g,-1):(h=c,this.$a.Vi(h,
g)),g=this.a.Sa(e,this.gn),-1==g?this.a.mb(e,this.gn,h):this.a.mb(e,this.ar,h),e=this.a.sd(b),0==this.a.Ei(e,this.Ak)&&this.Rl.add(h));return l};d.aa=function(a,b,c,e){var l=new d;l.a=a;l.V=b;l.Dk=c;l.Pt=e;return l.WM()};d.prototype.XM=function(){var b=new a.ha(0),c=new a.ha(0),d=-1,f=-1,e=new a.b;e.Eh();for(var l=-1,g=-1,h=-1,m=new a.b,n=this.Dk.hc(this.Dk.Xd);-1!=n;n=this.Dk.cb(n)){var q=this.Dk.getData(n);this.a.vc(q,m);var s=this.a.sd(q);e.vb(m)&&g==s?(-1==f&&(d=this.a.Tv(),f=this.a.re()),-1==
h&&(h=c.size,this.a.mb(l,f,h),c.add(1),-1==this.a.Ei(s,d)&&(this.a.Pp(s,d,l),b.add(s))),this.a.mb(q,f,h),c.JF(c.uc()+1)):(h=-1,e.K(m));l=q;g=s}if(0==b.size)return!1;e=new a.ha(0);l=new a.ha(0);g=0;for(h=b.size;g<h;g++){var s=b.get(g),t=this.a.Ei(s,d),q=this.a.Sa(t,f);e.clear(!1);l.clear(!1);e.add(t);l.add(q);for(q=this.a.Y(t);q!=t;q=this.a.Y(q)){var z=q,m=this.a.Sa(z,f);if(-1!=m)if(0==l.size)l.add(m),e.add(z);else if(l.uc()==m){var n=e.uc(),u=this.a.Y(n),t=this.a.Y(z);this.a.Tc(n,t);this.a.Uc(t,n);
this.a.Tc(z,u);this.a.Uc(u,z);z=[!1];u=this.a.aD(this.V,u,this.a.Db(s),z);this.a.mb(q,f,-1);z[0]&&this.a.Dh(s,t);q=this.a.Ia(s);t=this.a.Ia(u);q-=t;this.a.hm(s,q);c.set(m,c.get(m)-1);1==c.get(m)&&(c.set(m,0),l.bf(),e.bf());q=t=n}else e.add(q),l.add(m)}}this.a.sy(d);this.a.cf(f);return!0};return d}();a.zI=d})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.Ag=function(){this.Lx=this.jb=null};b.prototype.get=function(){return this.Lx};b.prototype.set=function(b){this.Lx=b;if(null!=
b)throw b.F()==a.j.Line&&(this.jb=b),a.g.xa();};b.prototype.create=function(b){if(b==a.j.Line)this.kq();else throw a.g.sa("Not Implemented");};b.prototype.kq=function(){null==this.jb&&(this.jb=new a.zb);this.Lx=this.jb};return b}();a.Ag=b})(y||(y={}));(function(a){a=a.EI||(a.EI={});a[a.enumLineSeg=1]="enumLineSeg";a[a.enumBezierSeg=2]="enumBezierSeg";a[a.enumArcSeg=4]="enumArcSeg";a[a.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask";a[a.enumSegmentMask=7]="enumSegmentMask";a[a.enumDensified=
8]="enumDensified"})(y||(y={}));(function(a){var b=function(){return function(a){this.ri=a;this.cz=this.dz=1;this.jy=this.iy=this.ky=0}}(),c=function(){function c(){this.mp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Jj=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.of=new a.Wa;this.la=this.eu=0;this.bn=[];this.hr=[];this.au=[];this.op=[];this.Ix=[]}c.prototype.my=function(a){if(null!=a){for(var b=0,c=a.length;b<c;b++)this.nR(a[b]);a.length=0}};c.prototype.nR=function(a){a.ri=null;this.op.push(a)};c.prototype.mu=
function(a){if(0===this.op.length)var c=new b(a);else c=this.op[this.op.length-1],c.ri=a,this.op.length-=1;return c};c.prototype.cO=function(a,b){return 0==a?this.hr[b]:this.au[b]};c.prototype.Yx=function(){this.eu>=this.Ix.length&&this.Ix.push(new a.Ag);var b=this.Ix[this.eu];this.eu++;return b};c.prototype.clear=function(){this.my(this.bn);this.my(this.hr);this.my(this.au);this.eu=0};c.prototype.An=function(a){this.bn.push(this.mu(a))};c.prototype.kk=function(a){return 0==a?this.hr.length:this.au.length};
c.prototype.Ho=function(a,b){return this.cO(a,b).ri};c.prototype.Ha=function(b,c){if(2!=this.bn.length)throw a.g.xa();this.la=b;var d=a.vi.Sy(0.01*b),e=!1,l=this.bn[0],g=this.bn[1];if(c||0!=(l.ri.cq(g.ri,b,!0)&5)){if(l.ri.F()==a.j.Line){var h=l.ri;if(g.ri.F()==a.j.Line){var m=g.ri,n=a.zb.nv(h,m,null,this.mp,this.Jj,b);if(0==n)throw a.zb.nv(h,m,null,this.mp,this.Jj,b),a.g.xa();var q=Array(9);a.J.Os(q,null);for(var s=0;s<n;s++){var t=this.mp[s],z=this.Jj[s],u=l.jy,w=1;0==t?(u=l.ky,w=l.dz):1==t&&(u=
l.iy,w=l.cz);var x=g.jy,A=1;0==z?(x=g.ky,A=g.dz):1==z&&(x=g.iy,A=g.cz);var y=new a.b;u==x?(u=new a.b,h.Lb(t,u),t=new a.b,m.Lb(z,t),z=w+A,A/=z,a.vi.BD(u,t,A,y),a.b.$b(y,u)+a.b.$b(y,t)>d&&(e=!0)):u>x?(h.Lb(t,y),t=new a.b,m.Lb(z,t),a.b.$b(y,t)>d&&(e=!0)):(m.Lb(z,y),u=new a.b,h.Lb(t,u),a.b.$b(y,u)>d&&(e=!0));q[s]=y}l=0;g=-1;for(s=0;s<=n;s++)A=s<n?this.mp[s]:1,A!=l&&(d=this.Yx(),h.Bi(l,A,d),-1!=g&&d.get().fd(q[g]),s!=n&&d.get().wd(q[s]),l=A,this.hr.push(this.mu(d.get()))),g=s;h=[0,0,0,0,0,0,0,0,0];for(s=
0;s<n;s++)h[s]=s;1<n&&this.Jj[0]>this.Jj[1]&&(A=this.Jj[0],this.Jj[0]=this.Jj[1],this.Jj[1]=A,s=h[0],h[0]=h[1],h[1]=s);l=0;g=-1;for(s=0;s<=n;s++)A=s<n?this.Jj[s]:1,A!=l&&(d=this.Yx(),m.Bi(l,A,d),-1!=g&&(l=h[g],d.get().fd(q[l])),s!=n&&(l=h[s],d.get().wd(q[l])),l=A,this.au.push(this.mu(d.get()))),g=s;return e}}throw a.g.xa();}return!1};c.prototype.Sw=function(b,c,d){c.copyTo(this.of);if(1!=this.bn.length)throw a.g.xa();this.la=b;var e=this.bn[0];if(d||e.ri.ps(c.A(),b,!0))if(e.ri.F()==a.j.Line){b=e.ri;
var l=b.Hd(c.A(),!1);this.mp[0]=l;var g=e.jy;d=1;0==l?(g=e.ky,d=e.dz):1==l&&(g=e.iy,d=e.cz);e=new a.b;0==g?(g=new a.b,b.Lb(l,g),l=c.A(),c=1/(d+1),a.vi.BD(g,l,c,e)):0<g?(e=new a.b,b.Lb(l,e)):e=c.A();d=0;l=-1;for(g=0;1>=g;g++){c=1>g?this.mp[g]:1;if(c!=d){var h=this.Yx();b.Bi(d,c,h);-1!=l&&h.get().fd(e);1!=g&&h.get().wd(e);d=c;this.hr.push(this.mu(h.get()))}l=g}this.of.jc(e)}else throw a.g.xa();};return c}();a.gA=c})(y||(y={}));(function(a){var b=function(){function b(c){this.Oq=this.zj=this.jb=null;
this.zk=this.Fe=this.Hc=this.ze=this.Sg=this.Ra=0;this.bb=null;this.zl=!1;this.ze=-1;this.Sg=this.Hc=0;this.Ra=-1;this.bb=c;this.Fe=this.bq(this.Sg);this.zl=!1;this.zj=null;this.zk=-1;this.Oq=new a.b}b.Xn=function(c,d){if(0>d||d>=c.G())throw a.g.Vc();var e=new b(c),k=c.Dw(d);e.Hc=d-c.Fa(k);e.Sg=k+1;e.Ra=k;e.Fe=e.bq(e.Ra);e.zk=e.bb.Fa(e.Ra);return e};b.Un=function(c,d,e){if(0>d||d>=c.fa()||0>e)throw a.g.Vc();var k=c.wc(d)?0:1;if(e>=c.Ia(d)-k)throw a.g.Vc();c=new b(c);c.ze=-1;c.Hc=e;c.Ra=d;c.Sg=c.Hc+
1;c.Fe=c.bq(c.Sg);c.zk=c.bb.Fa(c.Ra);return c};b.prototype.wR=function(b){if(this.bb!=b.bb)throw a.g.ya();this.ze=b.ze;this.Hc=b.Hc;this.Ra=b.Ra;this.Sg=b.Sg;this.Fe=b.Fe;this.zl=b.zl;this.zk=b.zk;this.zj=null};b.prototype.ja=function(){this.ze!=this.Hc&&this.JA();if(this.zl)this.Hc=(this.Hc+1)%this.Fe;else{if(this.Hc==this.Fe)throw a.g.Vc();this.Hc++}return this.zj};b.prototype.oi=function(){if(this.zl)this.Hc=(this.Fe+this.Hc-1)%this.Fe;else{if(0==this.Hc)throw a.g.Vc();this.Hc--}this.Hc!=this.ze&&
this.JA();return this.zj};b.prototype.xR=function(){this.ze=-1;this.Hc=0};b.prototype.yR=function(){this.Hc=this.Fe;this.ze=-1};b.prototype.Tb=function(a,b){void 0===b&&(b=-1);if(0<=this.Ra&&this.Ra<this.bb.fa()){var c=this.tJ();if(a>=c&&a<this.bb.Ec(this.Ra)){this.ze=-1;this.Hc=a-c;return}}c=0<=b&&b<this.bb.fa()&&a>=this.bb.Fa(b)&&a<this.bb.Ec(b)?b:this.bb.Dw(a);this.Sg=c+1;this.Ra=c;this.ze=-1;this.Hc=a-this.bb.Fa(c);this.Fe=this.bq(c);this.zk=this.bb.Fa(this.Ra)};b.prototype.lb=function(){this.Ra=
this.Sg;if(this.Ra>=this.bb.fa())return!1;this.ze=-1;this.Hc=0;this.Fe=this.bq(this.Ra);this.zk=this.bb.Fa(this.Ra);this.Sg++;return!0};b.prototype.Lk=function(){this.Fe=this.Hc=this.ze=-1;this.Sg=0;this.zk=this.Ra=-1};b.prototype.uy=function(b){if(0>b)throw a.g.Vc();this.Sg=b;this.zk=this.Fe=this.Hc=this.ze=this.Ra=-1};b.prototype.bq=function(a){if(this.bb.tc())return 0;var b=1;this.bb.wc(a)&&(b=0);return this.bb.Ia(a)-b};b.prototype.lD=function(){return this.ze==this.Fe-1&&this.bb.wc(this.Ra)};
b.prototype.MR=function(){this.zl=!0};b.prototype.Kb=function(){return this.bb.kb.f[this.Ra]+this.ze};b.prototype.tJ=function(){return this.bb.Fa(this.Ra)};b.prototype.Cm=function(){return this.lD()?this.bb.Fa(this.Ra):this.Kb()+1};b.prototype.wl=function(){return 0==this.ze};b.prototype.Km=function(){return this.ze==this.Fe-1};b.prototype.Ma=function(){return this.Hc<this.Fe};b.prototype.Nw=function(){return 0<this.Hc};b.prototype.wm=function(){var a=new b(this.bb);a.ze=this.ze;a.Hc=this.Hc;a.Fe=
this.Fe;a.Ra=this.Ra;a.Sg=this.Sg;a.bb=this.bb;a.zl=this.zl;return a};b.prototype.JA=function(){if(0>this.Hc||this.Hc>=this.Fe)throw a.g.Vc();this.ze=this.Hc;var b=this.Kb();this.bb.lc();var c=this.bb.Ge,d=1;null!=c&&(d=c.read(b)&7);c=this.bb.description;switch(d){case 1:null==this.jb&&(this.jb=new a.zb);this.zj=this.jb;break;case 2:throw a.g.sa("internal error");case 4:throw a.g.xa();default:throw a.g.xa();}this.zj.Qf(c);d=this.Cm();this.bb.vc(b,this.Oq);this.zj.fd(this.Oq);this.bb.vc(d,this.Oq);
this.zj.wd(this.Oq);for(var e=1,g=c.Ba;e<g;e++)for(var h=c.Id(e),m=a.qa.Xa(h),n=0;n<m;n++){var q=this.bb.md(h,b,n);this.zj.Ly(h,n,q);q=this.bb.md(h,d,n);this.zj.By(h,n,q)}};b.prototype.XO=function(){return this.Ra==this.bb.fa()-1};return b}();a.FI=b})(y||(y={}));(function(a){var b=function(){function b(c){c instanceof a.U?(this.ZD=c,this.va=-1,this.Wh=1):(this.CP=c.slice(0),this.va=-1,this.Wh=c.length)}b.prototype.za=function(){return this.va};b.prototype.next=function(){return this.va<this.Wh-1?
(this.va++,null!=this.ZD?this.ZD:this.CP[this.va]):null};return b}();a.Qc=b})(y||(y={}));(function(a){var b=function(){return function(){this.next=null}}(),c=function(){function c(){this.Ap=this.iu=this.ju=this.wj=this.eh=0;this.aC=!1;this.eG=0;this.am=this.wf=this.Vk=this.hh=null;this.Mk=0;this.Jv=null;this.wj=this.eh=-1}c.prototype.uS=function(b,c,d){this.eh=b;this.wj=c;this.hh=this.Vk=null;this.Ap=0;this.Jv=d;null==this.am&&(this.am=a.J.Lh(384,0));this.hG()};c.prototype.ba=function(){return this.eh};
c.prototype.ca=function(){return this.wj};c.prototype.flush=function(){0<this.Mk&&(this.Jv.XB(this.am,this.Mk),this.Mk=0)};c.prototype.hG=function(){if(0<this.Ap){for(var a=0;a<this.wj;a++){for(var b=this.Vk[a];null!=b;){var c=b,b=b.next;c.next=null}this.Vk[a]=null}this.hh=null}this.ju=this.wj;this.iu=-1;this.Ap=0};c.prototype.fF=function(a){this.aC=a==c.Zu;for(a=this.ju;a<=this.iu;a++)this.UJ(),this.OJ(a),this.uM();this.hG()};c.prototype.yv=function(c,d,e,l){if(d!=l){var g=1;d>l&&(g=c,c=e,e=g,g=
d,d=l,l=g,g=-1);if(!(0>l||d>=this.wj)){0>c&&0>e?e=c=-1:c>=this.eh&&e>=this.eh&&(e=c=this.eh);var h=(e-c)/(l-d);l>this.wj&&(l=this.wj,e=h*(l-d)+c);0>d&&(c=h*(0-d)+c,d=0);var m=Math.max(this.eh+1,8388607);-8388607>c?(d=(0-c)/h+d,c=0):c>m&&(d=(this.eh-c)/h+d,c=this.eh);-8388607>e?l=(0-c)/h+d:e>m&&(l=(this.eh-c)/h+d);d=a.J.truncate(d);l=a.J.truncate(l);d!=l&&(e=new b,e.x=a.J.truncate(4294967296*c),e.y=d,e.H=l,e.oM=a.J.truncate(4294967296*h),e.dir=g,null==this.Vk&&(this.Vk=a.J.Lh(this.wj,null)),e.next=
this.Vk[e.y],this.Vk[e.y]=e,e.y<this.ju&&(this.ju=e.y),e.H>this.iu&&(this.iu=e.H),this.Ap++)}}};c.prototype.UJ=function(){if(null!=this.hh){for(var a=!1,b=null,c=this.hh;null!=c;)if(c.y++,c.y==c.H){var d=c,c=c.next;null!=b?b.next=c:this.hh=c;d.next=null}else c.x+=c.oM,null!=b&&b.x>c.x&&(a=!0),b=c,c=c.next;a&&(this.hh=this.dG(this.hh))}};c.prototype.OJ=function(a){if(!(a>=this.wj)){var b=this.Vk[a];if(null!=b){this.Vk[a]=null;b=this.dG(b);this.Ap-=this.eG;a=this.hh;for(var c=!0,d=b,e=null;null!=a&&
null!=d;)a.x>d.x?(c&&(this.hh=d),c=d.next,d.next=a,null!=e&&(e.next=d),e=d,d=c):(c=a.next,a.next=d,null!=e&&(e.next=a),e=a,a=c),c=!1;null==this.hh&&(this.hh=b)}}};c.Mz=function(a,b){return 0>a?0:a>b?b:a};c.prototype.uM=function(){if(null!=this.hh)for(var b=0,d=this.hh,e=a.J.truncate(a.J.FD(d.x)),g=d.next;null!=g;g=g.next)if(b=this.aC?b^1:b+g.dir,g.x>d.x){var h=a.J.truncate(a.J.FD(g.x));0!=b&&(d=c.Mz(e,this.eh),e=c.Mz(h,this.eh),e>d&&d<this.eh&&(this.am[this.Mk++]=d,this.am[this.Mk++]=e,this.am[this.Mk++]=
g.y,this.Mk==this.am.length&&(this.Jv.XB(this.am,this.Mk),this.Mk=0)));d=g;e=h}};c.prototype.dG=function(b){for(var d=0,e=b;null!=e;e=e.next)d++;this.eG=d;if(1==d)return b;null==this.wf?this.wf=a.J.Lh(Math.max(d,16),null):this.wf.length<d&&(this.wf=a.J.Lh(Math.max(d,2*this.wf.length),null));for(var g=0,e=b;null!=e;e=e.next)this.wf[g++]=e;2==d?this.wf[0].x>this.wf[1].x&&(b=this.wf[0],this.wf[0]=this.wf[1],this.wf[1]=b):c.oP(this.wf,d,function(a,b){return a==b?0:a.x<b.x?-1:a.x>b.x?1:0});b=this.wf[0];
this.wf[0]=null;e=b;for(g=1;g<d;g++)e.next=this.wf[g],e=this.wf[g],this.wf[g]=null;e.next=null;return b};c.oP=function(a,b,c){if(b==a.length)a.sort(c);else{var d=a.slice(0,0),e=a.slice(b);b=a.slice(0,b).sort(c);a.length=0;a.push.apply(a,d.concat(b).concat(e))}};c.Zu=0;c.rT=1;return c}();a.dv=c})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.Jh=function(a,b){var c=this.a.Sa(a,this.tp);this.yk==c&&(this.yk=this.ae.cb(this.yk));this.Ym==c&&(this.Ym=this.ae.cb(this.Ym));this.ae.Kc(this.Nx,
c);this.hj(a);if(b&&(c=this.a.sd(a),-1!=c&&this.a.Db(c)==a)){var d=this.a.Y(a);if(d!=a){var e=this.a.sd(d);if(e==c){this.a.Dh(c,d);return}d=this.a.Va(a);if(d!=a&&(e=this.a.sd(d),e==c)){this.a.Dh(c,d);return}}this.a.Dh(c,-1);this.a.Wi(c,-1)}};b.prototype.yA=function(){for(var b=!1,c=0,d=new a.b;;){c++;null==this.nh?(this.nh=new a.ha(0),this.Lq=new a.ha(0),this.je=new a.ha(0)):(this.nh.clear(!1),this.Lq.clear(!1),this.je.clear(!1));for(var e=this.Ym,g=0,h=!0;e!=this.yk;){var m=this.ae.getData(e),n=
new a.b;this.a.vc(m,n);h&&(this.a.vc(m,d),h=!1);var n=this.a.Va(m),q=this.a.Y(m);-559038737!=this.a.Sa(n,this.fg)&&(this.nh.add(n),this.a.mb(n,this.fg,-559038737),this.Lq.add(m),this.je.add(g++));-559038737!=this.a.Sa(q,this.fg)&&(this.nh.add(q),this.a.mb(q,this.fg,-559038737),this.Lq.add(m),this.je.add(g++));e=this.ae.cb(e)}if(2>this.nh.size)break;var s=this;this.je.yd(0,this.je.size,function(a,b){return s.lJ(a,b)});e=0;for(g=this.je.size;e<g;e++)h=this.je.get(e),h=this.nh.get(h),this.a.mb(h,this.fg,
e),n=new a.b,this.a.vc(h,n);n=this.yJ(d);e=0;for(g=this.je.size;e<g;e++)h=this.je.get(e),-1!=h&&(h=this.nh.get(h),this.a.mb(h,this.fg,-1));if(n)b=!0;else break}return b};b.prototype.yJ=function(a){for(var b=!1,c=!0;c;){var c=!1,d=0;-1==this.je.get(d)&&(d=this.fl(d));for(var e=this.fl(d),g=0,h=this.je.size;g<h&&-1!=d&&-1!=e&&d!=e;g++){var m=this.je.get(d),e=this.je.get(e),m=this.nh.get(m),e=this.nh.get(e),n=this.a.Y(m);this.a.ot(n,a)||(n=this.a.Va(m));var q=this.a.Y(e);this.a.ot(q,a)||(q=this.a.Va(e));
var s=this.ns(n,m),t=this.ns(q,e),v=s?this.a.Va(n):this.a.Y(n),z=t?this.a.Va(q):this.a.Y(q),u=!1;this.ho(n)?u=!0:this.ho(q)?u=!0:this.ho(m)?u=!0:this.ho(e)?u=!0:this.ho(v)?u=!0:this.ho(z)&&(u=!0);!u&&this.a.Bq(m,e)&&(u=!0,this.BA(s,t,n,m,q,e));!u&&this.a.Bq(v,z)&&(u=!0,this.BA(!s,!t,n,v,q,z));u&&(b=!0);c=c||u;d=this.fl(d);e=this.fl(d)}}if(!b){d=0;-1==this.je.get(d)&&(d=this.fl(d));e=this.fl(d);g=0;for(h=this.je.size;g<h&&-1!=d&&-1!=e&&d!=e;g++)m=this.je.get(d),e=this.je.get(e),m=this.nh.get(m),e=
this.nh.get(e),n=this.a.Y(m),this.a.ot(n,a)||(n=this.a.Va(m)),q=this.a.Y(e),this.a.ot(q,a)||(q=this.a.Va(e)),s=this.ns(n,m),t=this.ns(q,e),v=s?this.a.Va(n):this.a.Y(n),z=t?this.a.Va(q):this.a.Y(q),this.pJ(s,t,m,n,v,e,q,z)&&(b=!0),d=this.fl(d),e=this.fl(d)}return b};b.prototype.BJ=function(){this.a.Mb(this.V)==a.j.Polygon&&1==this.a.Dm(this.V)&&(new a.Of).CQ(this.Pt,this.a,this.V);var b=!1,c=!0;this.fg=this.tp=-1;var d=this.a.G(this.V),e=new a.ha(0);e.yb(d);for(var g=this.a.Wb(this.V);-1!=g;g=this.a.cc(g))for(var h=
this.a.Db(g),m=0,n=this.a.Ia(g);m<n;m++)e.add(h),h=this.a.Y(h);var q=this.a.dd.f,s=this.a.dd.Jc;this.a.xb.lc();var t=this.a.xb.Ca[0].f;e.yd(0,d,function(a,b){var c=q[s*a],d=q[s*b],f=t[2*c],c=t[2*c+1],e=t[2*d],d=t[2*d+1],f=c<d?-1:c>d?1:f<e?-1:f>e?1:0;0==f&&(f=q[s*a+3],d=q[s*b+3],f=f<d?-1:f==d?0:1);return f});this.tp=this.a.re();this.ae=new a.Zn;this.Nx=this.ae.jh(0);this.ae.$l(d);for(g=0;g<d;g++)h=e.get(g),m=this.ae.addElement(this.Nx,h),this.a.mb(h,this.tp,m);this.fg=this.a.re();this.yk=-1;for(this.sA()&&
(b=!0);c;){c=!1;d=0;e=!1;do{e=!1;this.Ym=-1;for(var n=0,g=new a.b,m=new a.b,z=this.ae.hc(this.Nx);-1!=z;)h=this.ae.getData(z),-1!=this.Ym?(this.a.vc(h,m),g.vb(m))?n++:(g.K(m),this.yk=z,0<n&&(h=this.yA())&&(e=!0,-1!=this.yk&&(h=this.ae.getData(this.yk),this.a.vc(h,g))),this.Ym=z=this.yk,n=0):(this.Ym=z,this.a.vc(this.ae.getData(z),g),n=0),-1!=z&&(z=this.ae.cb(z));this.yk=-1;0<n&&(h=this.yA())&&(e=!0);if(10<d++)throw a.g.xa();e&&this.sJ();this.sA()&&(e=!0);c=c||e&&!1;b=b||e}while(e)}this.a.cf(this.tp);
this.a.cf(this.fg);return b=a.zI.aa(this.a,this.V,this.ae,this.Pt)||b};b.prototype.ns=function(a,b){return this.a.Y(b)==a?!1:!0};b.prototype.pJ=function(a,b,c,d,e,g,h,m){if(d==h)return this.hj(c),this.hj(g),!1;var n=this.a.Sa(c,this.fg),q=this.a.Sa(e,this.fg),s=this.a.Sa(g,this.fg),t=this.a.Sa(m,this.fg);c=[0,0,0,0,0,0,0,0];var v=[0,0,0,0];c[0]=0;v[0]=n;c[1]=0;v[1]=q;c[2]=1;v[2]=s;c[3]=1;v[3]=t;for(n=1;4>n;n++){q=v[n];s=c[n];for(t=n-1;0<=t&&v[t]>q;)v[t+1]=v[t],c[t+1]=c[t],t--;v[t+1]=q;c[t+1]=s}v=
0;0!=c[0]&&(v|=1);0!=c[1]&&(v|=2);0!=c[2]&&(v|=4);0!=c[3]&&(v|=8);if(5!=v&&10!=v)return!1;a==b?a?(this.a.Tc(m,d),this.a.Uc(d,m),this.a.Tc(e,h),this.a.Uc(h,e)):(this.a.Uc(m,d),this.a.Tc(d,m),this.a.Uc(e,h),this.a.Tc(h,e)):a?(this.a.Uc(d,g),this.a.Tc(g,d),this.a.Uc(h,e),this.a.Tc(e,h)):(this.a.Tc(d,g),this.a.Uc(g,d),this.a.Tc(h,e),this.a.Uc(e,h));return!0};b.prototype.BA=function(a,b,c,d,e,g){this.oU?this.AJ():this.zJ(a,b,c,d,e,g)};b.prototype.AJ=function(){throw a.g.sa("not implemented.");};b.prototype.zJ=
function(a,b,c,d,e,g){if(a!=b)a?(this.a.Tc(c,e),this.a.Uc(e,c),this.a.Tc(g,d),this.a.Uc(d,g),this.qm(e,c),this.Jh(e,!0),this.a.Ui(e,!0),this.hj(c),this.qm(g,d),this.Jh(g,!0),this.a.Ui(g,!1)):(this.a.Tc(e,c),this.a.Uc(c,e),this.a.Tc(d,g),this.a.Uc(g,d),this.qm(e,c),this.Jh(e,!0),this.a.Ui(e,!1),this.hj(c),this.qm(g,d),this.Jh(g,!0),this.a.Ui(g,!0)),this.hj(d);else{var h=a?c:d,m=b?e:g;a=a?d:c;b=b?g:e;e=!1;this.a.Tc(h,m);this.a.Tc(m,h);this.a.Uc(a,b);this.a.Uc(b,a);for(g=b;g!=m;)c=this.a.Va(g),d=this.a.Y(g),
this.a.Uc(g,d),this.a.Tc(g,c),e=e||g==h,g=d;e||(c=this.a.Va(m),d=this.a.Y(m),this.a.Uc(m,d),this.a.Tc(m,c));this.qm(m,h);this.Jh(m,!0);this.a.Ui(m,!1);this.hj(h);this.qm(b,a);this.Jh(b,!0);this.a.Ui(b,!1);this.hj(a)}};b.prototype.sA=function(){for(var a=!1,b=this.a.Wb(this.V);-1!=b;){for(var c=this.a.Db(b),d=0,e=this.a.Ia(b);d<e&&1<e;){var g=this.a.Va(c),h=this.a.Y(c);this.a.Bq(g,h)?(a=!0,this.Jh(c,!1),this.a.vf(c,!0),this.Jh(h,!1),this.a.vf(h,!0),c=g,d=0,e=this.a.Ia(b)):(c=h,d++)}if(2>this.a.Ia(b)){a=
this.a.Db(b);d=0;for(e=this.a.Ia(b);d<e;d++)this.Jh(a,!1),a=this.a.Y(a);b=this.a.Br(b);a=!0}else b=this.a.cc(b)}return a};b.prototype.ho=function(a){for(var b=!1;;){var c=this.a.Y(a),d=this.a.Va(a);if(c==a)return this.Jh(a,!0),this.a.Ui(a,!1),!0;if(!this.a.Bq(c,d))break;b=!0;this.hj(d);this.hj(c);this.Jh(a,!0);this.a.Ui(a,!1);this.qm(c,d);this.Jh(c,!0);this.a.Ui(c,!0);if(c==d)break;a=d}return b};b.prototype.sJ=function(){for(var a=0,b=this.ae.hc(this.ae.Xd);-1!=b;b=this.ae.cb(b)){var c=this.ae.getData(b);
this.a.im(c,-1)}for(var d=0,e=this.a.Wb(this.V);-1!=e;)if(b=this.a.Db(e),-1==b||-1!=this.a.sd(b))c=e,e=this.a.cc(e),this.a.xu(c);else{this.a.im(b,e);for(var g=1,c=this.a.Y(b);c!=b;c=this.a.Y(c))this.a.im(c,e),g++;this.a.Ir(e,!1);this.a.hm(e,g);this.a.Wi(e,this.a.Va(b));d+=g;a++;e=this.a.cc(e)}for(b=this.ae.hc(this.ae.Xd);-1!=b;b=this.ae.cb(b))c=this.ae.getData(b),-1==this.a.sd(c)&&(e=this.a.aD(this.V,c,c,null),d+=this.a.Ia(e),a++);this.a.gm(this.V,a);this.a.Pk(this.V,d);a=0;for(d=this.a.ad;-1!=d;d=
this.a.we(d))a+=this.a.G(d);this.a.ZF(a)};b.prototype.fl=function(a){for(var b=0,c=this.je.size-1;b<c;b++)if(a=(a+1)%this.je.size,-1!=this.je.get(a))return a;return-1};b.prototype.qm=function(a,b){var c=this.a.Sa(b,this.tp),d=this.a.Sa(b,this.fg);this.a.Yy(a,b);this.a.mb(b,this.tp,c);this.a.mb(b,this.fg,d)};b.prototype.hj=function(a){var b=this.a.Sa(a,this.fg);-1!=b&&(this.je.set(b,-1),this.a.mb(a,this.fg,-1))};b.aa=function(a,c,d,e,g){var h=new b;h.a=a;h.V=c;h.xx=d;h.Pt=e;h.Ee=g;return h.BJ()};b.prototype.lJ=
function(b,c){var d=this.nh.get(b),e=new a.b;this.a.vc(d,e);var d=new a.b,g=this.nh.get(c);this.a.vc(g,d);if(e.vb(d))return 0;var h=this.Lq.get(b),g=new a.b;this.a.vc(h,g);var m=this.Lq.get(c),h=new a.b;this.a.vc(m,h);m=new a.b;m.qc(e,g);e=new a.b;e.qc(d,h);return a.b.aq(m,e)};return b}();a.nm=b})(y||(y={}));(function(a){(function(a){a[a.Local=0]="Local";a[a.Geographic=1]="Geographic";a[a.Projected=2]="Projected";a[a.Unknown=3]="Unknown"})(a.GI||(a.GI={}));(function(a){a[a.Integer32=0]="Integer32";
a[a.Integer64=1]="Integer64";a[a.FloatingPoint=2]="FloatingPoint"})(a.qI||(a.qI={}));var b=function(){function b(){this.eo="";this.mi=0;this.Sl=null}b.prototype.Rc=function(){return this.mi};b.prototype.wq=function(){var b=0.001;0!=this.mi?b=a.ks.RM(this.mi):null!=this.Sl&&(b=a.mA.SM(this.Sl));return b};b.prototype.Te=function(){if(0!=this.mi)return a.Ub.Rd(a.ks.cC(this.mi));if(null!=this.Sl)return a.mA.TM(this.Sl)};b.Bm=function(b){if(0!=b.mi){if(!0===a.ks.VO(b.mi))return 1;if(!0===a.ks.YO(b.mi))return 2}return 3};
b.create=function(c){if(0>=c)throw a.g.O("Invalid or unsupported wkid: "+c);var d=new b;d.mi=c;return d};b.ML=function(c){if(null==c||0==c.length)throw a.g.O("Cannot create SpatialReference from null or empty text.");var d=new b;d.Sl=c;return d};b.prototype.mc=function(a){return this==a?!0:null==a||this.constructor!=a.constructor||this.mi!=a.mi||0==this.mi&&this.Sl!==a.Sl?!1:!0};b.lN=function(b,c){var d=Math.PI/180,e=new a.da;a.nH.oN(b.A().x*d,b.A().y*d,c.A().x*d,c.A().y*d,e);return e.o};b.prototype.toString=
function(){return"[ tol: "+this.vq()+"; wkid: "+this.Rc()+"; wkt: "+this.Sl+"]"};b.prototype.ic=function(){if(""!==this.eo)return this.eo;var a=this.toString();if(Array.prototype.reduce)return this.eo="S"+a.split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0);var b=0;if(0===a.length)return"";for(var c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c),b&=b;return this.eo="S"+b};b.prototype.vq=function(){return this.wq()};b.iU=!0;b.DT=2147483645;b.ET=9007199254740990;return b}();a.Nf=
b})(y||(y={}));(function(a){function b(a,c){89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);var d=0.017453292519943*c;return[111319.49079327169*a,3189068.5*Math.log((1+Math.sin(d))/(1-Math.sin(d)))]}function c(a,b,d){a=57.29577951308232*(a/6378137);return d?[a,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)))]:[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)))]}function d(b,c){var f=b.wm();if(b.F()===a.j.Point){var e=
c(f.lk(),f.mk());f.jc(e[0],e[1])}else if(b.F()===a.j.Envelope){var e=c(b.S.w,b.S.D,!0),l=c(b.S.C,b.S.H,!0);f.L(e[0],e[1],l[0],l[1])}else{e=new a.b;for(l=0;l<f.G();l++){f.A(l,e);var g=c(e.x,e.y,!0);e.na(g[0],g[1]);f.jc(l,e)}}return f}function f(a){return d(a,c)}function e(a){return d(a,b)}var g=function(){function b(){}b.Wr=function(b){var c=Math.PI/180,d=Math.sin(b.y*c),d=0.9933056200098026*(d/(1-0.006694379990197414*d*d)-6.111035746609262*Math.log((1-0.0818191908429643*d)/(1+0.0818191908429643*d)));
return a.b.Pa(6378137*b.x*c,3189068.5*d)};b.Vu=function(b,c,d,f){var e=1/298.257223563,l=Math.sin(d);d=Math.cos(d);var g=(1-e)*Math.tan(b);b=1/Math.sqrt(1+g*g);for(var k=g*b,h=Math.atan2(g,d),g=b*l*b*l,r=1-g,m=2.7233160610754688E11*r/4.040829998466145E13,n=1+m/16384*(4096+m*(-768+m*(320-175*m))),q=m/1024*(256+m*(-128+m*(74-47*m))),m=f/(6356752.31424518*n),s=2*Math.PI,t,z,u,w;1E-12<Math.abs(m-s);)u=Math.cos(2*h+m),t=Math.sin(m),z=Math.cos(m),w=q*t*(u+q/4*(z*(-1+2*u*u)-q/6*u*(-3+4*t*t)*(-3+4*u*u))),
s=m,m=f/(6356752.31424518*n)+w;f=k*t-b*z*d;f=Math.atan2(k*z+b*t*d,(1-e)*Math.sqrt(g+f*f));r=e/16*r*(4+e*(4-3*r));e=Math.atan2(t*l,b*z-k*t*d)-(1-r)*e*Math.sqrt(g)*(m+r*t*(u+r*z*(-1+2*u*u)));return a.b.Pa((c+e)/(Math.PI/180),f/(Math.PI/180))};b.bN=function(a,b,c,d){var f=1/298.257223563,e=d-b,l=Math.atan((1-f)*Math.tan(a)),g=Math.atan((1-f)*Math.tan(c)),k=Math.sin(l),l=Math.cos(l),h=Math.sin(g),g=Math.cos(g),r=e,m,n=1E3,q,s,t,v,z,u,w;do{t=Math.sin(r);v=Math.cos(r);s=Math.sqrt(g*t*g*t+(l*h-k*g*v)*(l*
h-k*g*v));if(0===s)return 0;v=k*h+l*g*v;z=Math.atan2(s,v);u=l*g*t/s;q=1-u*u;t=v-2*k*h/q;isNaN(t)&&(t=0);w=f/16*q*(4+f*(4-3*q));m=r;r=e+(1-w)*f*u*(z+w*s*(t+w*v*(-1+2*t*t)))}while(1E-12<Math.abs(r-m)&&0<--n);if(0===n)return k=d-b,{azimuth:Math.atan2(Math.sin(k)*Math.cos(c),Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(k)),geodesicDistance:6371009*Math.acos(Math.sin(a)*Math.sin(c)+Math.cos(a)*Math.cos(c)*Math.cos(d-b))};a=2.7233160610754688E11*q/4.040829998466145E13;b=a/1024*(256+a*(-128+
a*(74-47*a)));return{azimuth:Math.atan2(g*Math.sin(r),l*h-k*g*Math.cos(r)),kN:6356752.31424518*(1+a/16384*(4096+a*(-768+a*(320-175*a))))*(z-b*s*(t+b/4*(v*(-1+2*t*t)-b/6*t*(-3+4*s*s)*(-3+4*t*t)))),xU:Math.atan2(l*Math.sin(r),l*h*Math.cos(r)-k*g)}};b.nT=function(b){var c=b.hasAttribute(1),d=b.hasAttribute(2),f=[],e=b.fa(),l=null,g=null;c&&(l=b.oc(1));d&&(g=b.oc(2));for(var k=new a.b,h=0;h<e;h++){for(var r=b.Fa(h),m=b.Ia(h),n=0,q=0,s=NaN,t=NaN,z=NaN,u=NaN,w=b.wc(h),x=[],B=r;B<r+m;B++){b.A(B,k);var u=
z=NaN,A=[k.x,k.y];c&&(z=l.get(B),A.push(z));d&&(e=g.get(B),A.push(u));B==r&&w&&(n=k.x,q=k.y,s=z,t=u);x.push(A)}!w||n==k.x&&q==k.y&&(!c||isNaN(s)&&isNaN(z)||s==z)&&(!d||isNaN(t)&&isNaN(u)||t==u)||x.push(x[0].slice(0));f.push(x)}return f};b.ew=function(a,c){var d=b.nT(a),f=Math.PI/180;637.100877151506>c&&(c=637.100877151506);for(var e=[],l=0;l<d.length;l++){var g=d[l],k;e.push(k=[]);k.push([g[0][0],g[0][1]]);var h,r,m,n,q,s;h=g[0][0]*f;r=g[0][1]*f;for(q=0;q<g.length-1;q++)if(m=g[q+1][0]*f,n=g[q+1][1]*
f,h!==m||r!==n){n=b.bN(r,h,n,m);m=n.azimuth;n=n.kN;var t=n/c;if(1<t){for(s=1;s<=t-1;s++){var v=b.Vu(r,h,m,s*c);k.push([v.x,v.y])}s=b.Vu(r,h,m,(n+Math.floor(t-1)*c)/2);k.push([s.x,s.y])}r=b.Vu(r,h,m,n);k.push([r.x,r.y]);h=r.x*f;r=r.y*f}}return{mF:e}};b.jN=function(c){for(var d=[],f=0;f<c.length;f++){var e=c[f],e=b.ew(e,1E4);d.push(e)}c=[];for(var l,g,k=0;k<d.length;k++){for(var e=d[k],h=0,f=0;f<e.mF.length;f++){var r=e.mF[f];l=b.Wr(a.b.Pa(r[0][0],r[0][1]));g=b.Wr(a.b.Pa(r[r.length-1][0],r[r.length-
1][1]));var m=g.x*l.y-l.x*g.y,n;for(n=0;n<r.length-1;n++)l=b.Wr(a.b.Pa(r[n+1][0],r[n+1][1])),g=b.Wr(a.b.Pa(r[n][0],r[n][1])),m+=g.x*l.y-l.x*g.y;m/=4046.87;h+=m}c.push(4046.85642*(h/-2))}return c};return b}();a.oH=g;g=function(){function b(){}b.ny=function(a,c,d,f,e,l,g){b.AG[a.ic()]=c;0==isNaN(d)&&(b.CG[a.ic()]=d);0==isNaN(f)&&(b.hz[a.ic()]=f);0==isNaN(e)&&(b.lG[a.ic()]=e);b.EG[a.ic()]=l;null!==g&&(b.GG[a.ic()]=g)};b.wu=function(a,c,d){b.IG[a.ic()+"-"+c.ic()]=d};b.Fm=function(c){c=b.AG[c.ic()];if(void 0==
c)throw a.g.qe();return c};b.IC=function(c){c=b.CG[c.ic()];if(void 0==c)throw a.g.qe();return c};b.et=function(c){c=b.hz[c.ic()];if(void 0==c)throw a.g.qe();return c};b.Ss=function(c){c=b.lG[c.ic()];if(void 0==c)throw a.g.qe();return c};b.Gm=function(c){c=b.GG[c.ic()];if(void 0==c)throw a.g.qe();return a.i.Pa(c[0],c[1],c[2],c[3])};b.Oo=function(c){c=b.EG[c.ic()];if(void 0==c)throw a.g.qe();return c};b.Wl=function(c,d,f){if(d.mc(f))return c;var e=b.IG[d.ic()+"-"+f.ic()];if(void 0!==e)return e(c,d,
f);throw a.g.qe();};b.su=function(){throw a.g.qe();};b.pN=function(){throw a.g.qe();};b.XQ=function(){throw a.g.qe();};b.SN=function(){throw a.g.qe();};b.oR=function(){var b=a.Nf.create(102100),c=a.Nf.create(3857),d=a.Nf.create(4326);a.Za.ny(b,d,NaN,NaN,NaN,!1,null);a.Za.ny(d,d,1,0.0033528106647474805,6378137,!0,[-180,-90,180,90]);a.Za.ny(c,d,NaN,NaN,NaN,!1,null);a.Za.wu(b,d,f);a.Za.wu(d,b,e);a.Za.wu(c,d,f);a.Za.wu(d,c,e)};b.AG=[];b.CG=[];b.hz=[];b.lG=[];b.EG=[];b.GG=[];b.IG=[];return b}();a.Za=g})(y||
(y={}));y.Za.oR();(function(a){var b=function(){function b(a){this.f=null;this.qg=-1;this.Yc=this.size=this.Xe=0;this.Jc=a}b.prototype.Kc=function(a){a<this.Xe?(this.f[a*this.Jc]=this.qg,this.qg=a):this.Xe--;this.size--};b.prototype.P=function(a,b){return this.f[a*this.Jc+b]};b.prototype.N=function(a,b,c){this.f[a*this.Jc+b]=c};b.prototype.ce=function(){var b=this.qg;if(-1==b){if(this.Xe==this.Yc){b=0!=this.Yc?a.J.truncate(3*(this.Yc+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.Yc)throw a.g.Vc();
this.Hm(b)}b=this.Xe;this.Xe++}else this.qg=this.f[b*this.Jc];this.size++;for(var c=b*this.Jc+this.Jc,d=b*this.Jc;d<c;d++)this.f[d]=-1;return b};b.prototype.Qj=function(b){var c=this.qg;if(-1==c){if(this.Xe==this.Yc){c=0!=this.Yc?a.J.truncate(3*(this.Yc+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Yc)throw a.g.Vc();this.Hm(c)}c=this.Xe;this.Xe++}else this.qg=this.f[c*this.Jc];this.size++;for(var d=c*this.Jc,e=this.Jc,g=0;g<e;g++)this.f[d+g]=b[g];return c};b.prototype.Nh=function(a){this.qg=-1;
this.size=this.Xe=0;a&&(this.f=null,this.Yc=0)};b.prototype.ee=function(a){a>this.Yc&&this.Hm(a)};b.prototype.Ou=function(a,b,c){var d=this.f[this.Jc*b+c];this.f[this.Jc*b+c]=this.f[this.Jc*a+c];this.f[this.Jc*a+c]=d};b.Zk=function(){return-2};b.mm=function(){return-3};b.Yw=function(a){return 0<=a};b.prototype.Hm=function(a){null==this.f&&(this.f=[]);this.Yc=a};return b}();a.Gc=b;b=function(){function b(a){this.f=new Int32Array(0);this.qg=-1;this.Yc=this.size=this.Xe=0;this.Jc=a}b.prototype.Kc=function(a){a<
this.Xe?(this.f[a*this.Jc]=this.qg,this.qg=a):this.Xe--;this.size--};b.prototype.P=function(a,b){return this.f[a*this.Jc+b]};b.prototype.N=function(a,b,c){this.f[a*this.Jc+b]=c};b.prototype.ce=function(){var b=this.qg;if(-1==b){if(this.Xe==this.Yc){b=0!=this.Yc?a.J.truncate(3*(this.Yc+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.Yc)throw a.g.Vc();this.Hm(b)}b=this.Xe;this.Xe++}else this.qg=this.f[b*this.Jc];this.size++;for(var c=b*this.Jc;c<b*this.Jc+this.Jc;c++)this.f[c]=-1;return b};b.prototype.Qj=
function(b){var c=this.qg;if(-1==c){if(this.Xe==this.Yc){c=0!=this.Yc?a.J.truncate(3*(this.Yc+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Yc)throw a.g.Vc();this.Hm(c)}c=this.Xe;this.Xe++}else this.qg=this.f[c*this.Jc];this.size++;for(var d=c*this.Jc,e=0;e<b.length;e++)this.f[d+e]=b[e];return c};b.prototype.Nh=function(a){this.qg=-1;this.size=this.Xe=0;a&&(this.f=null,this.Yc=0)};b.prototype.ee=function(a){a>this.Yc&&this.Hm(a)};b.prototype.Ou=function(a,b,c){var d=this.f[this.Jc*b+c];this.f[this.Jc*
b+c]=this.f[this.Jc*a+c];this.f[this.Jc*a+c]=d};b.Zk=function(){return-2};b.mm=function(){return-3};b.Yw=function(a){return 0<=a};b.prototype.Hm=function(a){null==this.f&&(this.f=new Int32Array(0));var b=new Int32Array(this.Jc*a);b.set(this.f,0);this.f=b;this.Yc=a};return b}();a.HI=b;!0===a.ah.Sk&&(a.Gc=a.HI)})(y||(y={}));(function(a){var b;(function(a){a[a.enumInputModeBuildGraph=0]="enumInputModeBuildGraph";a[a.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate";a[a.enumInputModeSimplifyWinding=
5]="enumInputModeSimplifyWinding";a[a.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon"})(b||(b={}));var c=function(){function b(c){this.ne=c;this.Zg=NaN;this.LD=new a.Ag;this.MD=new a.Ag;this.zq=new a.Od;this.Aq=new a.Od}b.prototype.compare=function(a,b,c){a=a.ea(c);this.ne.hy(b,this.LD);this.ne.hy(a,this.MD);b=this.LD.get();a=this.MD.get();this.zq.L(b.oa,b.ma);this.Aq.L(a.oa,a.ma);if(this.zq.wa<this.Aq.ra)return-1;if(this.zq.ra>this.Aq.wa)return 1;c=b.ka==b.ia;var d=a.ka==a.ia;if(c||
d){if(c&&d)return 0;if(b.ka==a.ka&&b.oa==a.oa)return c?1:-1;if(b.ia==a.ia&&b.ma==a.ma)return c?-1:1}c=b.xe(this.Zg,this.zq.ra);d=a.xe(this.Zg,this.Aq.ra);c==d&&(c=Math.min(b.ia,a.ia),d=0.5*(c+this.Zg),d==this.Zg&&(d=c),c=b.xe(d,this.zq.ra),d=a.xe(d,this.Aq.ra));return c<d?-1:c>d?1:0};b.prototype.$F=function(a){this.Zg=a};return b}(),d=function(){function b(c){this.bb=c;this.uE=new a.Ag;this.of=new a.b;this.wx=new a.Od}b.prototype.dS=function(a){this.of.K(a)};b.prototype.compare=function(a,b){this.bb.hy(a.ea(b),
this.uE);var c=this.uE.get();this.wx.L(c.oa,c.ma);if(this.of.x<this.wx.ra)return-1;if(this.of.x>this.wx.wa)return 1;c=c.xe(this.of.y,this.of.x);return this.of.x<c?-1:this.of.x>c?1:0};return b}(),f=function(){function f(){this.OD=this.Vh=this.Yh=this.ox=this.Qm=this.ke=this.yc=this.Ig=this.Ud=null;this.tn=this.eg=-1;this.ND=!0;this.sx=!1;this.px=NaN;this.ei=new a.xd;this.DK=2147483647;this.CK=a.J.truncate(-2147483648);this.Kf=this.Nd=this.Ek=this.jp=this.Bl=this.ip=this.Yq=this.Be=-1;this.ua=0}f.prototype.Lv=
function(a){this.px=a};f.prototype.Ul=function(){null==this.Ud&&(this.Ud=new a.Gc(8));var b=this.Ud.ce();this.Ud.N(b,1,0);return b};f.prototype.jQ=function(){null==this.yc&&(this.yc=new a.Gc(8));var b=this.yc.ce();this.yc.N(b,2,0);this.yc.N(b,3,0);var c=this.yc.ce();this.yc.N(c,2,0);this.yc.N(c,3,0);this.GF(b,c);this.GF(c,b);return b};f.prototype.FE=function(){null==this.ke&&(this.ke=new a.Gc(8));var b=this.ke.ce();this.ke.N(b,2,0);return b};f.prototype.PR=function(a,b){this.Ud.N(a,7,b)};f.prototype.em=
function(a,b){this.Ud.N(a,2,b)};f.prototype.OR=function(a,b){this.Ud.N(a,1,b)};f.prototype.eS=function(a,b){this.Ud.N(a,3,b)};f.prototype.bS=function(a,b){this.Ud.N(a,4,b)};f.prototype.Jp=function(a,b){this.Ud.N(a,5,b)};f.prototype.tN=function(a){return this.Ud.P(a,5)};f.prototype.NR=function(a,b){this.Ud.N(a,6,b)};f.prototype.HJ=function(a,b){this.NR(b,a)};f.prototype.FF=function(a,b){this.yc.N(a,1,b)};f.prototype.GF=function(a,b){this.yc.N(a,4,b)};f.prototype.Rk=function(a,b){this.yc.N(a,5,b)};
f.prototype.Qk=function(a,b){this.yc.N(a,6,b)};f.prototype.UR=function(a,b){this.yc.N(a,2,b)};f.prototype.Cu=function(a,b){this.yc.N(a,3,b)};f.prototype.zC=function(a){return this.yc.P(a,3)};f.prototype.Hr=function(a,b){this.yc.N(a,7,b)};f.prototype.zG=function(a,b){if(-1!=this.ql(a))for(var c=b?-1:a,d=this.ql(a);-1!=d;d=this.yq(d))this.a.mb(this.Gi(d),this.jp,c)};f.prototype.Su=function(a,b){-1!=a&&(this.zG(a,b),this.zG(this.ta(a),b))};f.prototype.Fr=function(a,b){this.ke.N(a,1,b)};f.prototype.yg=
function(a,b){this.ke.N(a,2,b)};f.prototype.cm=function(a,b){this.ke.N(a,3,b);this.KR(a,this.sN(b));this.JR(b,a)};f.prototype.JR=function(a,b){this.ke.N(a,4,b)};f.prototype.KR=function(a,b){this.ke.N(a,5,b)};f.prototype.AF=function(a,b){this.ke.N(a,6,b)};f.prototype.yF=function(a,b){this.ke.N(a,7,b)};f.prototype.xF=function(a,b){this.Qm.write(a,b)};f.prototype.zF=function(a,b){this.ox.write(a,b)};f.prototype.aT=function(b){var c=0,d=0,f=this.pC(b),e=new a.b,g=new a.b,l=new a.b;this.rq(f,e);g.K(e);
var h=f;do this.pl(h,l),d+=a.b.Gb(g,l),this.Qe(this.ta(h))!=b&&(c+=0.5*(l.x-e.x-(g.x-e.x))*(l.y-e.y+(g.y-e.y))),g.K(l),h=this.Xb(h);while(h!=f);this.Qm.write(b,c);this.ox.write(b,d)};f.prototype.FQ=function(b){var f=new c(this),e=new a.bj;e.ee(a.J.truncate(this.ua/2));e.In(f);for(var g=new a.ha(0),h=this.Eg(),m=null,r=0,n=new a.b,q=this.Be;-1!=q;q=this.Bf(q)){r++;var s=this.te(q);if(-1!=s){g.df(0);if(!this.US(e,h,g,s)){this.A(q,n);f.$F(n.y);var t=s;do{var u=this.ub(t,h);-1!=u&&(e.ld(u,-1),this.Cb(t,
h,-2));t=this.Xb(this.ta(t))}while(s!=t);t=s;do u=this.ub(t,h),-1==u&&(u=e.addElement(t,-1),g.add(u)),t=this.Xb(this.ta(t));while(s!=t)}for(s=g.size-1;0<=s;s--)u=g.get(s),t=e.ea(u),this.Cb(this.ta(t),h,u),this.EQ(e,u,b)}else-1==this.lw(q)&&(null==m&&(m=new d(this)),this.A(q,n),m.dS(n),t=e.FR(m),s=this.Ek,-1!=t&&(u=e.ea(t),this.Qe(u)==this.Qe(this.ta(u))&&(u=this.BC(e,t)),-1!=u&&(s=this.Qe(u))),this.HJ(s,q))}this.kh(h)};f.prototype.EQ=function(a,c,d){var f=a.ea(c),e=this.Qe(f);if(-1==this.zm(e)){var g=
this.BC(a,c),l=this.ta(f),h=this.Qe(l);this.xo(e);this.xo(h);var m=this.zm(e),r=this.zm(h);-1==g&&-1==m&&(h==e?(this.cm(h,this.Ek),m=r=this.Ek):(-1==r&&(this.cm(h,this.Ek),r=this.Ek),this.cm(e,h),m=h));if(-1!=g){var n=this.Qe(g);-1==r&&(0>=this.xo(n)?(r=this.zm(n),this.cm(h,r)):(this.cm(h,n),r=n),h==e&&(m=r))}-1==m&&this.VS(e,h);0==d?this.$Q(a,c,f,g,e,h):d==b.enumInputModeSimplifyWinding?this.aR(a,c,f,l,e,h):d==b.enumInputModeSimplifyAlternate&&this.ZQ(f,g,e,h)}};f.prototype.$Q=function(a,b,c,d,f,
e){var g=this.pj(f);if(-1!=d){var l=this.pj(e),h=this.pj(this.Qe(d));d=g&l&h;h^=h&this.Gg(c);h|=d;0!=h&&(this.yg(e,l|h),this.yg(f,h|g),g=g||h)}for(b=a.cb(b);-1!=b;b=a.cb(b)){d=a.ea(b);c=this.Qe(this.ta(d));f=this.pj(c);e=this.Gg(d);l=this.Qe(d);h=this.pj(l);d=f&h&g;g^=g&e;g|=d;if(0==g)break;this.yg(c,f|g);this.yg(l,h|g)}};f.prototype.aR=function(b,c,d,f,e,g){if(e!=g){d=this.ub(d,this.Kf);d+=this.ub(f,this.Kf);f=0;var l=new a.ha(0),h=new a.ha(0);h.add(0);for(var m=b.hc(-1);m!=c;m=b.cb(m)){var r=b.ea(m),
n=this.ta(r),q=this.Qe(r),s=this.Qe(n);if(q!=s){r=this.ub(r,this.Kf);r+=this.ub(n,this.Kf);f+=r;n=!1;0!=l.size&&l.uc()==s&&(h.bf(),l.bf(),n=!0);if(-1==this.zm(s))throw a.g.xa();n&&this.zm(s)==q||(h.add(f),l.add(q))}}f+=d;0!=l.size&&l.uc()==g&&(h.bf(),l.bf());0!=f?0==h.uc()&&(b=this.a.ad,b=this.za(b),this.yg(e,b)):0!=h.uc()&&(b=this.a.ad,b=this.za(b),this.yg(e,b))}};f.prototype.ZQ=function(a,b,c,d){var f=this.za(this.a.ad);if(-1==b)this.yg(d,this.tn),a=this.ub(a,this.eg),0!=(a&1)?this.yg(c,f):this.yg(c,
this.tn);else{var e=this.pj(d);0==e&&(e=this.pj(this.Qe(b)),this.yg(d,e));a=this.ub(a,this.eg);0!=(a&1)?this.yg(c,e==f?this.tn:f):this.yg(c,e)}};f.prototype.US=function(a,b,c,d){var f=d,e=-1,g=-1,l=0;do{if(2==l)return!1;var h=this.ub(f,b);if(-1!=h){if(-1!=e)return!1;e=h}else{if(-1!=g)return!1;g=f}l++;f=this.Xb(this.ta(f))}while(d!=f);if(-1==g||-1==e)return!1;this.Cb(a.ea(e),b,-2);a.Vi(e,g);c.add(e);return!0};f.prototype.VS=function(a,b){var c=this.xo(a);if(0!=c){var d=this.xo(b);0<c&&0>d?this.cm(a,
b):0>c&&0<d?this.cm(a,b):(c=this.zm(b),-1!=c&&this.cm(a,c))}};f.prototype.QL=function(c,d){this.jp=this.a.re();for(var f=0,e=d.size;f<e;f++){var g=d.get(f),l=this.a.Sa(g,this.Bl),h=this.a.Vf(this.a.sd(g)),m=this.a.Mb(h);if(a.U.Lc(m)){var r=this.a.Y(g);if(-1!=r){var n=this.a.Sa(r,this.Bl);if(l!=n){var q=this.jQ(),s=this.ta(q),t=this.Ig.ce();this.Ig.N(t,0,g);this.Ig.N(t,1,-1);this.Hr(q,t);this.FF(q,l);t=this.te(l);-1==t?(this.em(l,q),this.Rk(q,s),this.Qk(s,q)):(l=this.ge(t),this.Rk(t,s),this.Qk(s,t),
this.Qk(l,q),this.Rk(q,l));this.FF(s,n);l=this.te(n);-1==l?(this.em(n,s),this.Qk(q,s),this.Rk(s,q)):(n=this.ge(l),this.Rk(l,q),this.Qk(q,l),this.Qk(n,s),this.Rk(s,n));h=this.za(h);0==c?(this.Cb(s,this.Nd,0),this.Cb(q,this.Nd,m==a.j.Polygon?h:0)):c==b.enumInputModeSimplifyWinding?(n=new a.b,this.a.A(g,n),g=new a.b,this.a.A(r,g),l=r=0,0>n.compare(g)?r=1:l=-1,this.Cb(s,this.Nd,0),this.Cb(q,this.Nd,0),this.Cb(q,this.Kf,r),this.Cb(s,this.Kf,l)):c==b.enumInputModeIsSimplePolygon?(this.Cb(s,this.Nd,this.tn),
this.Cb(q,this.Nd,m==a.j.Polygon?h:0)):c==b.enumInputModeSimplifyAlternate&&(this.Cb(s,this.Nd,0),this.Cb(q,this.Nd,0),this.Cb(q,this.eg,1),this.Cb(s,this.eg,1));m=m==a.j.Polygon?this.CK:0;this.Cu(q,h|m);this.Cu(s,h|m)}}}}};f.prototype.YP=function(a,b){var c=this.ql(b);if(-1!=c){var d=this.ql(a);this.Ig.N(c,1,d);this.Hr(a,c);this.Hr(b,-1)}var f=this.ta(a),e=this.ta(b),c=this.ql(e);-1!=c&&(d=this.ql(f),this.Ig.N(c,1,d),this.Hr(f,c),this.Hr(e,-1))};f.prototype.zS=function(c){function d(a,b){return e.kL(a,
b)}var f=new a.ha(0);f.yb(10);for(var e=this,g=this.Be;-1!=g;g=this.Bf(g)){f.clear(!1);var l=this.te(g);if(-1!=l){var h=l;do f.add(h),h=this.Xb(this.ta(h));while(h!=l);if(1<f.size){h=!0;if(2<f.size)f.yd(0,f.size,d),f.add(f.get(0));else if(0<this.jL(f.get(0),f.get(1))){var m=f.get(0);f.set(0,f.get(1));f.set(1,m)}else h=!1;for(var r=m=f.get(0),n=this.kf(r),q=this.ta(r),s=-1,t=1,u=f.size;t<u;t++){var z=f.get(t),w=this.ta(z),x=this.rj(w);if(x==n&&z!=r){if(0==c)s=this.zC(r)|this.zC(z),this.Cu(r,s),this.Cu(q,
s),this.Cb(r,this.Nd,this.ub(r,this.Nd)|this.ub(z,this.Nd)),this.Cb(q,this.Nd,this.ub(q,this.Nd)|this.ub(w,this.Nd));else if(-1!=this.Kf)s=this.ub(r,this.Kf)+this.ub(z,this.Kf),w=this.ub(q,this.Kf)+this.ub(w,this.Kf),this.Cb(r,this.Kf,s),this.Cb(q,this.Kf,w);else{if(c==b.enumInputModeIsSimplePolygon){this.ei=new a.xd(5,g,-1);return}-1!=this.eg&&(s=this.ub(r,this.eg)+this.ub(z,this.eg),w=this.ub(q,this.eg)+this.ub(w,this.eg),this.Cb(r,this.eg,s),this.Cb(q,this.eg,w))}this.YP(r,z);this.Vv(z);s=r;f.set(t,
-1);z==m&&(f.set(0,-1),m=-1)}else this.Su(s,!1),s=-1,r=z,n=x,q=w}this.Su(s,!1);s=-1;if(h){m=-1;t=0;for(u=f.size;t<u;t++)if(z=f.get(t),-1!=z)if(-1==m)r=m=z,n=this.kf(r),q=this.ta(r);else if(z!=r&&(w=this.ta(z),x=this.rj(w),this.Qk(q,z),this.Rk(z,q),r=z,n=x,q=w,c==b.enumInputModeIsSimplePolygon&&(this.ub(z,this.Nd)|this.ub(this.ge(z),this.Nd))==(this.tn|1))){this.ei=new a.xd(5,g,-1);return}this.em(g,m)}else{m=-1;t=0;for(u=f.size;t<u;t++)if(z=f.get(t),-1!=z){m=z;break}l!=m&&this.em(g,m)}}}}};f.prototype.zK=
function(){for(var b=-1,c=this.Eg(),d=this.Be;-1!=d;d=this.Bf(d)){var f=this.te(d);if(-1!=f){var e=f;do{if(1!=this.ub(e,c)){var g=this.FE();this.Fr(g,e);this.yF(g,b);-1!=b&&this.AF(b,g);var b=g,l=0,h=e;do l|=this.ub(h,this.Nd),this.UR(h,g),this.Cb(h,c,1),h=this.Xb(h);while(h!=e);this.yg(g,l)}e=this.Xb(this.ta(e))}while(e!=f)}}g=this.FE();this.Fr(g,-1);this.yF(g,b);-1!=b&&this.AF(b,g);this.Ek=g;this.Qm=a.rd.Zc(this.ke.size,NaN);this.ox=a.rd.Zc(this.ke.size,NaN);this.xF(this.Ek,Infinity);this.zF(this.Ek,
Infinity);this.kh(c)};f.prototype.DN=function(a,b,c){b=-1!=b?b:this.te(a);if(-1==b)return-1;for(a=b;;){if(1!=this.ub(b,c))return b;b=this.Xb(this.ta(b));if(b==a)return-1}};f.prototype.tR=function(){for(var a=this.Eg(),b=this.Be;-1!=b;b=this.Bf(b))for(var c=-1;;){var d=this.DN(b,c,a);if(-1==d)break;for(var c=this.Xb(this.ta(d)),f=d;;){var e=this.Xb(f),g=this.ge(f),l=this.ta(f);if(g==l){this.aM(f);if(c==f||c==l)c=-1;if(f==d||g==d){d=e;if(f==d||g==d)break;f=e;continue}}else this.Cb(f,a,1);f=e;if(f==
d)break}}};f.prototype.zy=function(c,d,f,e){this.xg();this.ND=e;this.a=c;this.ip=this.a.RB();c=new a.ha(0);c.yb(null!=f?this.a.G(f.get(0)):this.a.qd);var g=0,l=1,h=null!=f?f.get(0):this.a.ad;for(e=1;-1!=h;){this.a.EF(h,this.ip,l);for(var l=l<<1,m=this.a.Wb(h);-1!=m;m=this.a.cc(m))for(var r=this.a.Db(m),n=0,q=this.a.Ia(m);n<q;n++)c.add(r),r=this.a.Y(r);a.U.Lm(this.a.Mb(h))||(g+=this.a.fa(h));null!=f?(h=e<f.size?f.get(e):-1,e++):h=this.a.we(h)}this.tn=l;this.ua=c.size;this.a.Lu(c,this.ua);null==this.Ig&&
(this.Ig=new a.Gc(2),this.Ud=new a.Gc(8),this.yc=new a.Gc(8),this.ke=new a.Gc(8));this.Ig.ee(this.ua);this.Ud.ee(this.ua+10);this.yc.ee(2*this.ua+32);this.ke.ee(Math.max(32,g));this.Bl=this.a.re();f=new a.b;e=0;g=new a.b;f.Eh();for(l=0;l<=this.ua;l++)if(l<this.ua?(r=c.get(l),this.a.A(r,g)):g.Eh(),!f.vb(g)){if(e<l){r=this.Ul();for(q=n=-1;e<l;e++)q=c.get(e),this.a.mb(q,this.Bl,r),h=this.Ig.ce(),this.Ig.N(h,0,q),this.Ig.N(h,1,n),n=h,m=this.a.sd(q),h=this.a.Vf(m),h=this.za(h),this.OR(r,this.nd(r)|h);
this.PR(r,n);this.Jp(r,this.a.hb(q));-1!=this.Yq&&this.bS(this.Yq,r);this.eS(r,this.Yq);this.Yq=r;-1==this.Be&&(this.Be=r)}e=l;f.K(g)}this.Nd=this.Eg();d==b.enumInputModeSimplifyWinding&&(this.Kf=this.Eg());d==b.enumInputModeSimplifyAlternate&&(this.eg=this.Eg());this.QL(d,c);0==this.ei.yh&&(this.zS(d),0==this.ei.yh&&(isNaN(this.px)||this.YK()?(this.zK(),0==this.ei.yh&&(this.kh(this.Nd),this.Nd=-1,this.ND&&this.FQ(d))):this.sx=!0))};f.prototype.Vv=function(a){var b=this.Xb(a),c=this.ge(a),d=this.ta(a),
f=this.Xb(d),e=this.ge(d);b!=d&&(this.Qk(e,b),this.Rk(b,e));c!=d&&(this.Qk(c,f),this.Rk(f,c));c=this.rj(a);this.te(c)==a&&(f!=a?this.em(c,f):this.em(c,-1));f=this.rj(d);this.te(f)==d&&(b!=d?this.em(f,b):this.em(f,-1));this.yc.Kc(a);this.yc.Kc(d)};f.prototype.BC=function(a,b){for(var c=b;;)if(c=a.he(c),-1!=c){var d=a.ea(c);if(this.Qe(d)!=this.Qe(this.ta(d)))return d}else return-1};f.prototype.Kp=function(a,b,c){void 0===c&&(c=!0);this.zy(a,0,null,c)};f.prototype.tF=function(c,d){var f=new a.ha(0);
f.add(d);this.zy(c,b.enumInputModeSimplifyAlternate,f,c.Mb(d)==a.j.Polygon)};f.prototype.uF=function(c,d){var f=new a.ha(0);f.add(d);this.zy(c,b.enumInputModeSimplifyWinding,f,!0)};f.prototype.xg=function(){null!=this.a&&(-1!=this.ip&&(this.a.sR(this.ip),this.ip=-1),-1!=this.Bl&&(this.a.cf(this.Bl),this.Bl=-1),-1!=this.jp&&(this.a.cf(this.jp),this.jp=-1),-1!=this.Nd&&(this.kh(this.Nd),this.Nd=-1),-1!=this.Kf&&(this.kh(this.Kf),this.Kf=-1),-1!=this.eg&&(this.kh(this.eg),this.eg=-1),this.a=null,this.Ud.Nh(!0),
this.Ig.Nh(!0),this.Yq=this.Be=-1,null!=this.yc&&this.yc.Nh(!0),null!=this.Yh&&(this.Yh.length=0),null!=this.Vh&&(this.Vh.length=0),null!=this.OD&&(this.OD.length=0),null!=this.ke&&this.ke.Nh(!0),this.Ek=-1,this.Qm=null)};f.prototype.te=function(a){return this.Ud.P(a,2)};f.prototype.A=function(a,b){this.a.SC(this.tN(a),b)};f.prototype.nd=function(a){return this.Ud.P(a,1)};f.prototype.Bf=function(a){return this.Ud.P(a,4)};f.prototype.lw=function(a){return this.Ud.P(a,6)};f.prototype.ol=function(a){return this.Ud.P(a,
7)};f.prototype.yq=function(a){return this.Ig.P(a,1)};f.prototype.Gi=function(a){return this.Ig.P(a,0)};f.prototype.Sf=function(a,b){var c=this.Vh[b];return c.size<=a?-1:c.read(a)};f.prototype.fm=function(a,b,c){b=this.Vh[b];b.size<=a&&b.resize(this.Ud.size,-1);b.write(a,c)};f.prototype.to=function(){null==this.Vh&&(this.Vh=[]);for(var b=a.ha.Zc(this.Ud.Yc,-1),c=0,d=this.Vh.length;c<d;c++)if(null==this.Vh[c])return this.Vh[c]=b,c;this.Vh.push(b);return this.Vh.length-1};f.prototype.uo=function(a){this.Vh[a]=
null};f.prototype.rj=function(a){return this.yc.P(a,1)};f.prototype.kf=function(a){return this.rj(this.ta(a))};f.prototype.ta=function(a){return this.yc.P(a,4)};f.prototype.ge=function(a){return this.yc.P(a,5)};f.prototype.Xb=function(a){return this.yc.P(a,6)};f.prototype.Qe=function(a){return this.yc.P(a,2)};f.prototype.Re=function(a){return this.pj(this.yc.P(a,2))};f.prototype.ql=function(a){return this.yc.P(a,7)};f.prototype.rq=function(a,b){this.A(this.rj(a),b)};f.prototype.pl=function(a,b){this.A(this.kf(a),
b)};f.prototype.Gg=function(a){return this.yc.P(a,3)&this.DK};f.prototype.ub=function(a,b){var c=this.Yh[b];return c.size<=a?-1:c.read(a)};f.prototype.Cb=function(a,b,c){b=this.Yh[b];b.size<=a&&b.resize(this.yc.size,-1);b.write(a,c)};f.prototype.Eg=function(){null==this.Yh&&(this.Yh=[]);for(var b=a.ha.Zc(this.yc.Yc,-1),c=0,d=this.Yh.length;c<d;c++)if(null==this.Yh[c])return this.Yh[c]=b,c;this.Yh.push(b);return this.Yh.length-1};f.prototype.kh=function(a){this.Yh[a]=null};f.prototype.aM=function(a){var b=
this.Qe(a),c=this.Xb(a);c==this.ta(a)&&(c=this.Xb(c),c==a&&(c=-1));this.pC(b)==a&&this.Fr(b,c);c=this.Qm.read(b);isNaN(c)||(this.xF(b,NaN),this.zF(b,NaN));this.Su(a,!0);this.Vv(a)};f.prototype.bM=function(a){for(var b=0,c=a.size;b<c;b++){var d=a.get(b),f=this.Qe(this.ta(d));this.Fr(this.Qe(d),-1);this.Fr(f,-1);this.Su(d,!0);this.Vv(d)}};f.prototype.pC=function(a){return this.ke.P(a,1)};f.prototype.pj=function(a){return this.ke.P(a,2)};f.prototype.zm=function(a){return this.ke.P(a,3)};f.prototype.sN=
function(a){return this.ke.P(a,4)};f.prototype.xo=function(a){var b=this.Qm.read(a);isNaN(b)&&(this.aT(a),b=this.Qm.read(a));return b};f.prototype.za=function(a){return this.a.yC(a,this.ip)};f.prototype.se=function(a){return this.a.Sa(a,this.Bl)};f.prototype.FN=function(a){return this.a.Sa(a,this.jp)};f.prototype.EN=function(a,b){var c=this.te(a);if(-1==c)return-1;var d=c,f=-1,e=-1;do{if(this.kf(d)==b)return d;if(-1==f){f=this.te(b);if(-1==f)break;e=f}if(this.kf(e)==a)return this.ta(e);d=this.Xb(this.ta(d));
e=this.Xb(this.ta(e))}while(d!=c&&e!=f);return-1};f.prototype.hy=function(b,c){c.kq();var d=c.get(),f=new a.b;this.rq(b,f);d.fd(f);this.pl(b,f);d.wd(f)};f.prototype.kL=function(b,c){if(b==c)return 0;var d=new a.b;this.pl(b,d);var f=new a.b;this.pl(c,f);if(d.vb(f))return 0;var e=new a.b;this.rq(b,e);var g=new a.b;g.qc(d,e);d=new a.b;d.qc(f,e);return a.b.aq(g,d)};f.prototype.jL=function(b,c){if(b==c)return 0;var d=new a.b;this.pl(b,d);var f=new a.b;this.pl(c,f);if(d.vb(f))return 0;var e=new a.b;this.rq(b,
e);var g=new a.b;g.qc(d,e);d=new a.b;d.qc(f,e);return 0<=d.y&&0<g.y?a.b.aq(g,d):0};f.prototype.YK=function(){for(var b=a.vi.Sy(this.px),c=new a.b,d=new a.b,f=new a.b,e=new a.b,g=new a.b,l=this.Be;-1!=l;l=this.Bf(l)){var h=this.te(l);if(-1!=h){var m=h;this.rq(m,c);this.pl(m,d);g.qc(d,c);var r=g.Sp();do{var n=m,m=this.Xb(this.ta(m));if(m!=n){this.pl(m,f);e.qc(f,c);var n=e.Sp(),q=e.Ai(g),q=q*q/(n*r);if(Math.min(n,r)*q<=b)return!1;g.K(e);r=n;d.K(f)}}while(m!=h)}}return!0};return f}();a.fs=f})(y||(y={}));
(function(a){var b=function(){function b(){this.h=null;this.TD=new a.b;this.UD=new a.b;this.Qg=null;this.Fq=!1;this.Zm=-1}b.prototype.Ue=function(a){return a<this.Qg.length?this.Qg[a]:!1};b.prototype.ym=function(b,c,d,e){var g=a.U.ve(this.h.a.Mb(d));if(2==a.U.ve(this.h.a.Mb(c))&&1==g)this.VL(b,c,d,e);else throw a.g.xa();};b.prototype.Kp=function(b,c){null==this.h&&(this.h=new a.fs);this.h.Kp(b,c)};b.prototype.Lp=function(b,c,d){a.aj.aa(b,c,d,!0);for(c=b.ad;-1!=c;c=b.we(c))b.Mb(c)==a.j.Polygon&&a.nm.aa(b,
c,-1,this.Fq,d);this.Kp(b,d)};b.prototype.EB=function(b,c,d,e,g){var h=this.h.a;if(h.Mb(b)==a.j.Polygon)for(b=h.Wb(b);-1!=b;b=h.cc(b)){var m=h.Db(b);this.h.se(m);this.h.se(h.Y(m));var n=this.h.FN(m);if(-1!=n){var q=this.h.ub(n,d);if(1!=q&&2!=q)if(this.Ue(this.h.Re(n))){this.h.Cb(n,d,1);var q=h.Cf(c,-1),s=n,t=this.h.se(m),u=1;do{var z=this.tl(m,g);h.zi(q,z);-1!=e&&this.h.fm(t,e,1);this.h.Cb(s,d,1);var s=this.h.Xb(s),w;do z=1==u?h.Y(m):h.Va(m),w=-1!=z?this.h.se(z):-1;while(w==t);var x=this.h.rj(s);
if(x!=w){do z=1==u?h.Va(m):h.Y(m),w=-1!=z?this.h.se(z):-1;while(w==t);x!=w?(w=x,z=this.h.Gi(this.h.ol(w))):u=-u}t=w;m=z}while(s!=n);h.Hn(q,!0)}else this.h.Cb(n,d,2)}}};b.prototype.UB=function(){for(var b=this.h.Eg(),c=new a.ha(0),d=this.h.Be;-1!=d;d=this.h.Bf(d)){var e=this.h.te(d),g=e;if(-1!=e){do{if(1!=this.h.ub(g,b)){var h=this.h.ta(g);this.h.Cb(h,b,1);this.h.Cb(g,b,1);this.Ue(this.h.Re(g))&&this.Ue(this.h.Re(h))&&c.add(g)}g=this.h.Xb(this.h.ta(g))}while(g!=e)}}this.h.kh(b);this.h.bM(c)};b.prototype.tl=
function(a,b){return-1==b?a:this.jO(a,b)};b.prototype.jO=function(a,b){var c=this.h.a,d,e,g=this.h.ol(this.h.se(a));do{d=this.h.Gi(g);e=c.Vf(c.sd(d));if(e==b)return d;g=this.h.yq(g)}while(-1!=g);return a};b.prototype.Vp=function(b,c,d){this.UB();var e=this.h.a,g=e.jg(a.j.Polygon),h=this.h.Eg();this.pG(b,c,g,d,h,-1);this.h.kh(h);a.nm.aa(e,g,1,this.Fq,null);return g};b.prototype.pG=function(a,b,c,d,e,g){this.EB(a,c,e,g,d);-1!=b&&this.EB(b,c,e,g,d);a=this.h.a;for(b=this.h.Be;-1!=b;b=this.h.Bf(b)){var h=
this.h.te(b);if(-1!=h){var m=h;do{var n=this.h.ub(m,e);if(1!=n&&2!=n)if(this.Ue(this.h.Re(m))){var n=a.Cf(c,-1),q=m;do{var s=this.h.ql(q);-1!=s?s=this.h.Gi(s):(s=this.h.Gi(this.h.ql(this.h.ta(q))),s=this.h.a.Y(s));s=this.tl(s,d);a.zi(n,s);this.h.Cb(q,e,1);-1!=g&&(s=this.h.se(s),this.h.fm(s,g,1));q=this.h.Xb(q)}while(q!=m);a.Hn(n,!0)}else this.h.Cb(m,e,2);m=this.h.Xb(this.h.ta(m))}while(m!=h)}}};b.prototype.QS=function(b,c,d){var e=this.h.a,g=e.jg(a.j.Polygon),h=e.jg(a.j.Polyline),m=e.jg(a.j.MultiPoint);
this.UB();var n=-1,q=this.h.Eg(),s=this.h.to();this.pG(b,c,g,d,q,s);for(b=this.h.Be;-1!=b;b=this.h.Bf(b))if(c=this.h.te(b),-1!=c){var t=c;do{var u=this.h.ub(t,q),z=this.h.ub(this.h.ta(t),q),u=u|z;if(2==u)if(u=this.h.Gg(t),this.Ue(u)){var w=e.Cf(h,-1),x=t,u=this.zu(b,e),u=this.tl(u,d);e.zi(w,u);this.h.fm(b,s,1);do{u=this.h.kf(x);z=this.zu(u,e);z=this.tl(z,d);e.zi(w,z);this.h.Cb(x,q,1);this.h.Cb(this.h.ta(x),q,1);this.h.fm(u,s,1);x=this.h.Xb(x);u=this.h.ub(x,q);z=this.h.ub(this.h.ta(x),q);u|=z;if(2!=
u)break;u=this.h.Gg(x);if(!this.Ue(u)){this.h.Cb(x,q,1);this.h.Cb(this.h.ta(x),q,1);break}}while(x!=t)}else this.h.Cb(t,q,1),this.h.Cb(this.h.ta(t),q,1);t=this.h.Xb(this.h.ta(t))}while(t!=c)}for(b=this.h.Be;-1!=b;b=this.h.Bf(b))u=this.h.Sf(b,s),1!=u&&(u=this.h.nd(b),this.Ue(u)&&(-1==n&&(n=e.Cf(m,-1)),c=this.h.ol(b),-1!=c&&(c=this.h.Gi(c),u=this.tl(c,d),e.zi(n,u))));this.h.uo(s);this.h.kh(q);a.nm.aa(e,g,1,this.Fq,null);d=[];d[0]=m;d[1]=h;d[2]=g;return d};b.prototype.zu=function(a,b){for(var c=-1,d=
this.h.ol(a);-1!=d;d=this.h.yq(d)){var e=this.h.Gi(d);-1==c&&(c=e);var g=this.h.za(b.Vf(b.sd(e)));if(this.Ue(g)){c=e;break}}return c};b.prototype.ey=function(b,c){for(var d=this.h.rj(c),e=this.h.kf(c),g=0,h=0,m=this.h.ol(d);-1!=m;m=this.h.yq(m)){var n=this.h.Gi(m),q=b.sd(n),s=this.h.za(b.Vf(q)),t=b.Y(n),u=b.Va(n),q=b.Db(q);q==n&&(this.Zm=c);-1!=t&&this.h.se(t)==e?(g++,this.Ue(s)&&(q==t&&(this.Zm=this.h.Xb(c)),h++)):-1!=u&&this.h.se(u)==e&&(g--,this.Ue(s)&&(q==u&&(this.Zm=this.h.Xb(c)),h--))}this.h.A(d,
this.TD);this.h.A(e,this.UD);d=a.b.Gb(this.TD,this.UD);return(0!=h?h:g)*d};b.prototype.zo=function(a){return this.h.Gg(a)|this.h.Re(a)|this.h.Re(this.h.ta(a))};b.prototype.sG=function(a){for(var b=this.h.ta(this.h.ge(a)),c=-1;b!=a;){if(this.Ue(this.zo(b))){if(-1!=c)return-1;c=b}b=this.h.ta(this.h.ge(b))}return-1!=c?this.h.ta(c):-1};b.prototype.tG=function(a){for(var b=this.h.ta(this.h.Xb(a)),c=-1;b!=a;){if(this.Ue(this.zo(b))){if(-1!=c)return-1;c=b}b=this.h.ta(this.h.Xb(b))}return-1!=c?this.h.ta(c):
-1};b.prototype.jF=function(b,c,d,e,g){var h=this.h.a,m=b,n=this.h.ta(m);this.h.Cb(m,d,1);this.h.Cb(n,d,1);var q=this.ey(h,m);this.Zm=-1;for(var s=m,t=-1,u=!1,z=1;;){var w=this.h.ge(m);if(w==n)break;n=this.h.Xb(n);if(this.h.ta(w)!=n)if(m=this.sG(m),-1==m)break;else u=!0,n=this.h.ta(m);else m=w;if(m==b){t=b;break}w=this.zo(m);if(!this.Ue(w))break;this.h.Cb(m,d,1);this.h.Cb(n,d,1);s=m;q+=this.ey(h,m);z++}if(-1==t){m=b;n=this.h.ta(m);for(t=m;;){b=this.h.Xb(m);if(b==n)break;n=this.h.ge(n);if(this.h.ta(b)!=
n)if(m=this.tG(m),-1==m){u=!0;break}else n=this.h.ta(m);else m=b;w=this.zo(m);if(!this.Ue(w))break;this.h.Cb(m,d,1);this.h.Cb(n,d,1);t=m;q+=this.ey(h,m);z++}}else if(-1!=this.Zm&&(s=this.Zm,t=this.h.ge(this.Zm),this.h.ta(t)!=this.h.Xb(this.h.ta(s))&&(t=this.sG(s),-1==t)))throw a.g.xa();0<=q||(m=t,t=s,t=this.h.ta(t),s=this.h.ta(m));d=h.Cf(c,-1);m=s;s=this.h.rj(s);u=this.h.kf(t)==s&&u;q=this.zu(s,h);q=this.tl(q,g);h.zi(d,q);-1!=e&&this.h.fm(s,e,1);s=0;for(z=u?a.J.truncate((z+1)/2):-1;;){b=this.h.kf(m);
q=this.zu(b,h);q=this.tl(q,g);h.zi(d,q);s++;-1!=e&&this.h.fm(b,e,1);u&&s==z&&(d=h.Cf(c,-1),h.zi(d,q));if(m==t)break;b=this.h.Xb(m);if(this.h.ge(this.h.ta(m))!=this.h.ta(b)){if(m=this.tG(m),-1==m)throw a.g.xa();}else m=b}};b.prototype.Wp=function(b){for(var c=this.h.a.jg(a.j.Polyline),d=this.h.Eg(),e=this.h.Be;-1!=e;e=this.h.Bf(e)){var g=this.h.te(e),h=g;do 1!=this.h.ub(h,d)&&this.Ue(this.zo(h))&&this.jF(h,c,d,-1,b),h=this.h.Xb(this.h.ta(h));while(h!=g)}this.h.kh(d);return c};b.prototype.RS=function(b){for(var c=
this.h.a,d=c.jg(a.j.Polyline),e=c.jg(a.j.MultiPoint),g=this.h.Eg(),h=this.h.to(),m=-1,n=this.h.Be;-1!=n;n=this.h.Bf(n)){var q=this.h.te(n),s=q;do{var t=this.h.ub(s,g);1!=t&&(t=this.zo(s),this.Ue(t)&&this.jF(s,d,g,h,b));s=this.h.Xb(this.h.ta(s))}while(s!=q)}for(n=this.h.Be;-1!=n;n=this.h.Bf(n))t=this.h.Sf(n,h),1!=t&&(t=this.h.nd(n),this.Ue(t)&&(-1==m&&(m=c.Cf(e,-1)),q=this.h.ol(n),-1!=q&&(q=this.h.Gi(q),q=this.tl(q,b),c.zi(m,q))));this.h.kh(g);this.h.uo(h);b=[];b[0]=e;b[1]=d;return b};b.prototype.Qn=
function(){for(var b=this.h.a,c=b.jg(a.j.MultiPoint),d=b.Cf(c,-1),e=this.h.Be;-1!=e;e=this.h.Bf(e))if(this.Ue(this.h.nd(e))){for(var g=-1,h=this.h.ol(e);-1!=h;h=this.h.yq(h)){var m=this.h.Gi(h);-1==g&&(g=m);var n=this.h.za(b.Vf(b.sd(m)));if(this.Ue(n)){g=m;break}}b.zi(d,g)}return c};b.prototype.Jm=function(a){this.Qg=[];for(var b=0;b<a;b++)this.Qg[b]=!1};b.qF=function(b,c,d,e){var g=b.Qa(),h=Array(1E3);a.J.Os(h,null);var m=a.J.Lh(1E3,0),n=b.G(),q=!0,s=2==c.gb();if(1!=c.gb()&&2!=c.gb())throw a.g.xa();
for(var t=0;t<n;){var u=a.J.truncate(b.eR(h,t)-t);s?a.hd.nG(c,h,u,d,m):a.hd.oG(c,h,u,d,m);for(var z=0,w=0;w<u;w++){var x=0==m[w];e||(x=!x);x&&(q&&(q=!1,g.Qd(b,0,t)),z!=w&&g.Qd(b,t+z,t+w),z=w+1)}q||z==u||g.Qd(b,t+z,t+u);t+=u}return q?b:g};b.jD=function(c,d,e){return c instanceof a.pe?b.qF(c,d,e,!0):d instanceof a.Wa?c.u()||d.u()?c.Qa():a.aj.HE(e,c,d)?a.aj.fL(c,d):c.Qa():b.mG(c,d,e,!0)};b.lt=function(c,d,e,g){var h=new a.i;c.s(h);var m=new a.i;d.s(m);var n=new a.i;n.L(h);n.Eb(m);e=a.Ja.Ad(e,n,!0);n=
new a.i;n.L(m);m=a.Ja.zs(e);n.R(m,m);if(!h.kc(n)){if(c.gb()<=d.gb())return b.Dc(b.pb(c.Qa()),c,"\x26");if(c.gb()>d.gb())return b.Dc(b.pb(d.Qa()),c,"\x26")}m=new b;h=new a.gd;n=h.Fb(b.pb(c));d=h.Fb(b.pb(d));m.Lp(h,e,g);g=m.lt(n,d);c=b.Dc(h.jf(g),c,"\x26");a.U.Lc(c.F())&&(c.hg(2,e),c.F()==a.j.Polygon&&c.hl());return c};b.mG=function(b,c,d,e){if(b.u())return b.Qa();if(c.u())return e?b.Qa():null;var g=[null],h=[0],m=2==c.gb();if(1!=c.gb()&&2!=c.gb())throw a.g.xa();g[0]=b.A();m?a.hd.nG(c,g,1,d,h):a.hd.oG(c,
g,1,d,h);c=0==h[0];e||(c=!c);return c?b.Qa():b};b.OT=function(c,d,e){return c instanceof a.pe?b.qF(c,d,e,!1):d instanceof a.Wa?c.u()?c.Qa():d.u()?c:a.aj.HE(e,c,d)?c.Qa():c:b.mG(c,d,e,!1)};b.prototype.ME=function(b,c,d,e,g){if(b.u())return b;var h=new a.gd;b=h.Fb(b);return this.Rj(h,b,c,d,e,g)};b.prototype.DQ=function(b,c,d,e,g,h){if(g&&b.Mb(c)!=a.j.MultiPoint){var m=new a.aA;m.JS(b,d);m.og?(a.aj.aa(b,d,h,!0),g=!1):this.h.Lv(d)}else a.aj.aa(b,d,h,!0),g=!1;e&&b.Mb(c)!=a.j.MultiPoint?this.h.uF(b,c):
this.h.tF(b,c);if(this.h.sx)return this.h.xg(),this.h=null,this.Rj(b,c,d,e,!1,h);this.h.Lv(NaN);h=this.h.za(c);this.Jm(h+1);this.Qg[h]=!0;if(b.Mb(c)==a.j.Polygon||e&&b.Mb(c)!=a.j.MultiPoint)return b.Np(c,0),c=this.Vp(c,-1,-1),b=b.jf(c),b.Np(0),g?b.hg(1,0):(b.hg(2,d),b.hl()),b;if(b.Mb(c)==a.j.Polyline)return c=this.Wp(-1),b=b.jf(c),g||b.hg(2,d),b;if(b.Mb(c)==a.j.MultiPoint)return c=this.Qn(),b=b.jf(c),g||b.hg(2,d),b;throw a.g.xa();};b.prototype.Rj=function(b,c,d,e,g,h){this.h=new a.fs;try{return this.DQ(b,
c,d,e,g,h)}finally{this.h.xg()}};b.Rj=function(a,c,d,e,g){return(new b).ME(a,c,d,e,g)};b.prototype.CQ=function(b,c,d){this.Fq=b;this.h=new a.fs;b=c.Dm(d);var e=c.Mb(d);1!=b||e==a.j.MultiPoint?this.h.tF(c,d):this.h.uF(c,d);if(!this.h.sx)if(this.h.Lv(NaN),e=this.h.za(d),this.Jm(e+1),this.Qg[e]=!0,c.Mb(d)==a.j.Polygon||1==b&&c.Mb(d)!=a.j.MultiPoint)c.Np(d,0),b=this.Vp(d,-1,-1),c.Uy(b,d),c.ry(b);else if(c.Mb(d)==a.j.Polyline)b=this.Wp(-1),c.Uy(b,d),c.ry(b);else if(c.Mb(d)==a.j.MultiPoint)b=this.Qn(),
c.Uy(b,d),c.ry(b);else throw a.g.sa("internal error");};b.Qy=function(a,c,d,e){var g=new b;g.Fq=!0;return g.ME(a,c,!1,d,e)};b.prototype.ll=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),e=a.U.ve(this.h.a.Mb(c));if(d>e)return b;var g=this.h.za(b),h=this.h.za(c);this.Jm((g|h)+1);this.Qg[this.h.za(b)]=!0;if(2==d&&2==e)return this.Vp(b,c,-1);if(1==d&&2==e||1==d&&1==e)return this.Wp(-1);if(0==d)return this.Qn();throw a.g.xa();};b.prototype.TB=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),e=a.U.ve(this.h.a.Mb(c));
if(d>e)return b;if(d<e)return c;var g=this.h.za(b),h=this.h.za(c);this.Jm((g|h)+1);this.Qg[this.h.za(b)]=!0;this.Qg[this.h.za(c)]=!0;this.Qg[this.h.za(b)|this.h.za(c)]=!0;if(2==d&&2==e)return this.Vp(b,c,-1);if(1==d&&1==e)return this.Wp(-1);if(0==d&&0==e)return this.Qn();throw a.g.xa();};b.prototype.lt=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),e=a.U.ve(this.h.a.Mb(c)),g=this.h.za(b),h=this.h.za(c);this.Jm((g|h)+1);this.Qg[this.h.za(b)|this.h.za(c)]=!0;g=-1;1<this.h.a.up.Ba&&(g=b);if(2==d&&2==e)return this.Vp(b,
c,g);if(1==d&&0<e||1==e&&0<d)return this.Wp(g);if(0==d||0==e)return this.Qn();throw a.g.xa();};b.prototype.Tw=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),e=a.U.ve(this.h.a.Mb(c)),g=this.h.za(b),h=this.h.za(c);this.Jm((g|h)+1);this.Qg[this.h.za(b)|this.h.za(c)]=!0;g=-1;1<this.h.a.up.Ba&&(g=b);if(2==d&&2==e)return this.QS(b,c,g);if(1==d&&0<e||1==e&&0<d)return this.RS(g);if(0==d||0==e)return d=[],d[0]=this.Qn(),d;throw a.g.xa();};b.prototype.Pn=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),e=a.U.ve(this.h.a.Mb(c)),
g=this.h.za(b),h=this.h.za(c);this.Jm((g|h)+1);this.Qg[this.h.za(b)]=!0;this.Qg[this.h.za(c)]=!0;if(2==d&&2==e)return this.Vp(b,c,-1);if(1==d&&1==e)return this.Wp(-1);if(0==d&&0==e)return this.Qn();throw a.g.xa();};b.pb=function(b){var c=b.F();return c==a.j.Envelope?(c=new a.La(b.description),b.u()||c.Xc(b,!1),c):c==a.j.Point?(c=new a.pe(b.description),b.u()||c.add(b),c):c==a.j.Line?(c=new a.Ya(b.description),b.u()||c.Cc(b,!0),c):b};b.Dc=function(b,c,d){var e=b.F();return e==a.j.Envelope?(c=new a.La(b.description),
b.u()||c.Xc(b,!1),c):e!=a.j.Point||"|"!=d&&"^"!=d?e==a.j.Line?(c=new a.Ya(b.description),b.u()||c.Cc(b,!0),c):e==a.j.Point&&"-"==d&&c.F()==a.j.Point||e==a.j.MultiPoint&&"\x26"==d&&c.F()==a.j.Point?(c=new a.Wa(b.description),b.u()||b.Td(0,c),c):b:(c=new a.pe(b.description),b.u()||c.add(b),c)};b.ll=function(c,d,e,g){if(c.u()||d.u()||c.gb()>d.gb())return b.Dc(b.pb(c),c,"-");var h=new a.i;c.s(h);var m=new a.i;d.s(m);if(!h.kc(m))return b.Dc(b.pb(c),c,"-");var n=new a.i;n.L(h);n.Eb(m);e=a.Ja.Ad(e,n,!0);
m=new b;h=new a.gd;n=h.Fb(b.pb(c));d=h.Fb(b.pb(d));m.Lp(h,e,g);g=m.ll(n,d);g=h.jf(g);c=b.Dc(g,c,"-");a.U.Lc(c.F())&&(c.hg(2,e),c.F()==a.j.Polygon&&c.hl());return c};b.TB=function(c,d,e,g){if(c.gb()>d.gb())return b.Dc(b.pb(c),c,"|");if(c.gb()<d.gb()||c.u())return b.Dc(b.pb(d),c,"|");if(d.u())return b.Dc(b.pb(c),c,"|");var h=new a.i;c.s(h);var m=new a.i;d.s(m);var n=new a.i;n.L(h);n.Eb(m);e=a.Ja.Ad(e,n,!0);if(!h.kc(m.HN(e,e)))switch(c=b.pb(c),d=b.pb(d),c.F()){case a.j.MultiPoint:return c=a.U.Zj(c),
c.Qd(d,0,-1),c;case a.j.Polyline:return c=a.U.Zj(c),c.add(d,!1),c;case a.j.Polygon:return c=a.U.Zj(c),c.add(d,!1),c;default:throw a.g.xa();}m=new b;h=new a.gd;n=h.Fb(b.pb(c));d=h.Fb(b.pb(d));m.Lp(h,e,g);d=m.TB(n,d);c=b.Dc(h.jf(d),c,"|");a.U.Lc(c.F())&&(c.hg(2,e),c.F()==a.j.Polygon&&c.hl());return c};b.nM=function(c,d,e){if(2>c.length)throw a.g.O("not enough geometries to dissolve");for(var g=0,h=0,m=c.length;h<m;h++)g=Math.max(c[h].gb(),g);var n=new a.i;n.Ka();for(var q=new a.gd,s=-1,t=0,u=-1,h=0,
m=c.length;h<m;h++)if(c[h].gb()==g)if(c[h].u())-1==u&&(u=h);else{u=h;-1==s?s=q.Fb(b.pb(c[h])):q.XJ(s,b.pb(c[h]));var w=new a.i;c[h].ed(w);n.Eb(w);t++}if(2>t)return b.pb(c[u]);c=2==g;d=a.Ja.Ad(0==g?d:null,n,!0);return(new b).Rj(q,s,d,c,!0,e)};b.Tw=function(c,d,e,g){var h=[null,null,null],m=new a.i;c.s(m);var n=new a.i;d.s(n);var q=new a.i;q.L(m);q.Eb(n);e=a.Ja.Ad(e,q,!0);q=new a.i;q.L(n);n=a.Ja.zs(e);q.R(n,n);if(!m.kc(q)){if(c.gb()<=d.gb())return c=b.Dc(b.pb(c.Qa()),c,"\x26"),h[c.gb()]=c,h;if(c.gb()>
d.gb())return c=b.Dc(b.pb(d.Qa()),c,"\x26"),h[c.gb()]=c,h}n=new b;m=new a.gd;q=m.Fb(b.pb(c));d=m.Fb(b.pb(d));n.Lp(m,e,g);g=n.Tw(q,d);for(d=0;d<g.length;d++)n=b.Dc(m.jf(g[d]),c,"\x26"),a.U.Lc(n.F())&&(n.hg(2,e),n.F()==a.j.Polygon&&n.hl()),h[n.gb()]=n;return h};b.Pn=function(c,d,e,g){if(c.gb()>d.gb())return b.Dc(b.pb(c),c,"^");if(c.gb()<d.gb()||c.u())return b.Dc(b.pb(d),c,"^");if(d.u())return b.Dc(b.pb(c),c,"^");var h=new a.i;c.s(h);var m=new a.i;d.s(m);var n=new a.i;n.L(h);n.Eb(m);e=a.Ja.Ad(e,n,!0);
m=new b;h=new a.gd;n=h.Fb(b.pb(c));d=h.Fb(b.pb(d));m.Lp(h,e,g);g=m.Pn(n,d);c=b.Dc(h.jf(g),c,"^");a.U.Lc(c.F())&&(c.hg(2,e),c.F()==a.j.Polygon&&c.hl());return c};b.tT=function(b,c,d){c=c.F();d=d.F();return b.F()==a.j.MultiPoint&&(c==a.j.Point||d==a.j.Point)&&1>=b.G()?(d=new a.Wa(b.description),b.u()||b.Td(0,d),d):b};b.prototype.YM=function(a,b){for(var c=this.h.a,d=c.Cf(a,-1),e=b.size,g=0;g<e;g++){var h=b.get(g);c.zi(d,h)}c.Hn(d,!0)};b.prototype.VR=function(a,b){for(var c=this.h.a,d=c.ad;-1!=d;d=c.we(d))if(d==
b)for(var e=c.Wb(d);-1!=e;e=c.cc(e)){var g=c.Db(e);if(-1!=g)for(var h=c.Y(g);-1!=h;){var g=this.h.se(g),m=this.h.se(h),g=this.h.EN(g,m);-1!=g&&(m=this.h.ta(g),this.h.Cb(g,a,1),this.h.Cb(m,a,2));g=h;h=c.Y(g)}}};b.prototype.WQ=function(b,c,d,e){d=this.h.za(d);e=this.h.za(e);var g=new a.ha(0);g.yb(256);for(var h=this.h.a,m=this.h.Eg(),n=this.h.Be;-1!=n;n=this.h.Bf(n)){var q=this.h.te(n);if(-1!=q){var s=q;do{if(1!=this.h.ub(s,m)){var t=s,u=s,z=!1,w=0;do{this.h.Cb(t,m,1);if(!z){var x=this.h.Gg(t);0!=(x&
e)&&0!=(this.h.Re(t)&d)&&(u=t,z=!0)}z&&(g.add(this.h.Gi(this.h.ol(this.h.rj(t)))),-1!=b&&(x=this.h.Gg(t),0!=(x&e)&&(x=this.h.ub(t,b),w|=x)));t=this.h.Xb(t)}while(t!=u);z&&0<this.h.xo(this.h.Qe(u))&&(t=h.jg(a.j.Polygon),this.YM(t,g),-1!=c&&h.EF(t,c,w));g.clear(!1)}s=this.h.Xb(this.h.ta(s))}while(s!=q)}}this.h.kh(m)};b.prototype.VL=function(a,b,c,d){this.h.tR();var e=-1;-1!=a&&(e=this.h.Eg(),this.VR(e,c));this.WQ(e,a,b,c);var g=this.h.a;a=0;for(e=g.ad;-1!=e;e=g.we(e))e!=b&&e!=c&&(d.add(e),a++);d.yd(0,
a,function(a,b){var c=g.Fw(g.Wb(a)),d=g.Fw(g.Wb(b));return c<d?-1:c==d?0:1})};b.prototype.xg=function(){null!=this.h&&(this.h.xg(),this.h=null)};return b}();a.Of=b})(y||(y={}));(function(a){var b=function(){function b(a){void 0!==a?this.Ky(a):this.IF()}b.prototype.Ku=function(){this.Pb=this.Ob=this.tb=this.sb=this.fb=this.nb=0};b.prototype.mc=function(a){return this==a?!0:a instanceof b?this.nb==a.nb&&this.sb==a.sb&&this.Ob==a.Ob&&this.tb==a.tb&&this.fb==a.fb&&this.Pb==a.Pb:!1};b.prototype.ic=function(){a.J.Rh();
a.J.Rh();a.J.Rh();a.J.Rh();a.J.Rh();return a.J.Rh()};b.prototype.Zi=function(a,b){var c=this.tb*a.x+this.fb*a.y+this.Pb;b.x=this.nb*a.x+this.sb*a.y+this.Ob;b.y=c};b.prototype.multiply=function(a){b.multiply(this,a,this)};b.multiply=function(a,b,c){var d,e,g,h,m;d=a.nb*b.nb+a.tb*b.sb;e=a.sb*b.nb+a.fb*b.sb;g=a.Ob*b.nb+a.Pb*b.sb+b.Ob;h=a.nb*b.tb+a.tb*b.fb;m=a.sb*b.tb+a.fb*b.fb;a=a.Ob*b.tb+a.Pb*b.fb+b.Pb;c.nb=d;c.sb=e;c.Ob=g;c.tb=h;c.fb=m;c.Pb=a};b.prototype.wm=function(){var a=new b;a.nb=this.nb;a.sb=
this.sb;a.Ob=this.Ob;a.tb=this.tb;a.fb=this.fb;a.Pb=this.Pb;return a};b.prototype.Zy=function(b){if(!b.u()){for(var c=[],d=0;4>d;d++)c[d]=new a.b;b.gy(c);this.TS(c,c);b.Dy(c,4)}};b.prototype.TS=function(b,c){for(var d=0;d<b.length;d++){var e=new a.b,g=b[d];e.x=this.nb*g.x+this.sb*g.y+this.Ob;e.y=this.tb*g.x+this.fb*g.y+this.Pb;c[d]=e}};b.prototype.vO=function(a,b){a.u()||b.u()||0==a.ba()||0==a.ca()?this.Ku():(this.sb=this.tb=0,this.nb=b.ba()/a.ba(),this.fb=b.ca()/a.ca(),this.Ob=b.w-a.w*this.nb,this.Pb=
b.D-a.D*this.fb)};b.prototype.SS=function(b){var c=new a.b,d=new a.b;c.na(this.nb,this.tb);d.na(this.sb,this.fb);c.sub(c);var e=0.5*c.Sp();c.na(this.nb,this.tb);d.na(this.sb,this.fb);c.add(d);c=0.5*c.Sp();return b*(e>c?Math.sqrt(e):Math.sqrt(c))};b.prototype.IF=function(){this.nb=1;this.tb=this.Ob=this.sb=0;this.fb=1;this.Pb=0};b.prototype.WO=function(){return 1==this.nb&&1==this.fb&&0==this.sb&&0==this.Ob&&0==this.tb&&0==this.Pb};b.prototype.mg=function(a){return Math.abs(this.nb*this.fb-this.tb*
this.sb)<=2*a*(Math.abs(this.nb*this.fb)+Math.abs(this.tb*this.sb))};b.prototype.On=function(a,b){this.nb=1;this.sb=0;this.Ob=a;this.tb=0;this.fb=1;this.Pb=b};b.prototype.Ky=function(a,b){void 0!==b?(this.nb=a,this.tb=this.Ob=this.sb=0,this.fb=b,this.Pb=0):this.Ky(a,a)};b.prototype.Ny=function(){this.nb=0;this.sb=1;this.Ob=0;this.tb=1;this.Pb=this.fb=0};b.prototype.iS=function(a){this.jS(Math.cos(a),Math.sin(a))};b.prototype.jS=function(a,b){this.nb=a;this.sb=-b;this.Ob=0;this.tb=b;this.fb=a;this.Pb=
0};b.prototype.shift=function(a,b){this.Ob+=a;this.Pb+=b};b.prototype.scale=function(a,b){this.nb*=a;this.sb*=a;this.Ob*=a;this.tb*=b;this.fb*=b;this.Pb*=b};b.prototype.rotate=function(a){var c=new b;c.iS(a);this.multiply(c)};b.prototype.inverse=function(a){if(void 0!==a){var b=this.nb*this.fb-this.sb*this.tb;0==b?a.Ku():(b=1/b,a.Ob=(this.sb*this.Pb-this.Ob*this.fb)*b,a.Pb=(this.Ob*this.tb-this.nb*this.Pb)*b,a.nb=this.fb*b,a.sb=-this.sb*b,a.tb=-this.tb*b,a.fb=this.nb*b)}else this.inverse(this)};return b}();
a.Bg=b})(y||(y={}));(function(a){var b=function(){function b(){}b.prototype.Ku=function(){this.fh=this.Pb=this.Ob=this.Me=this.Je=this.Ie=this.Le=this.fb=this.sb=this.ff=this.tb=this.nb=0};b.prototype.Ky=function(a,b,c){this.nb=a;this.sb=this.ff=this.tb=0;this.fb=b;this.Je=this.Ie=this.Le=0;this.Me=c;this.fh=this.Pb=this.Ob=0};b.prototype.Zy=function(b){if(b.u())return b;for(var c=new a.fe[8],d=0;8>d;d++)c[d]=new a.fe;b.gy(c);this.transform(c,8,c);b.Dy(c);return b};b.prototype.transform=function(b,
c,d){for(var e=0;e<c;e++){var g=new a.fe,h=b[e];g.x=this.nb*h.x+this.sb*h.y+this.Ie*h.z+this.Ob;g.y=this.tb*h.x+this.fb*h.y+this.Je*h.z+this.Pb;g.z=this.ff*h.x+this.Le*h.y+this.Me*h.z+this.fh;d[e]=g}};b.prototype.Rn=function(b){var c=new a.fe;c.x=this.nb*b.x+this.sb*b.y+this.Ie*b.z+this.Ob;c.y=this.tb*b.x+this.fb*b.y+this.Je*b.z+this.Pb;c.z=this.ff*b.x+this.Le*b.y+this.Me*b.z+this.fh;return c};b.prototype.yp=function(a){b.multiply(this,a,this)};b.multiply=function(a,b,c){var d,e,g,h,m,n,q,s,t,v,u;
d=a.nb*b.nb+a.tb*b.sb+a.ff*b.Ie;e=a.nb*b.tb+a.tb*b.fb+a.ff*b.Je;g=a.nb*b.ff+a.tb*b.Le+a.ff*b.Me;h=a.sb*b.nb+a.fb*b.sb+a.Le*b.Ie;m=a.sb*b.tb+a.fb*b.fb+a.Le*b.Je;n=a.sb*b.ff+a.fb*b.Le+a.Le*b.Me;q=a.Ie*b.nb+a.Je*b.sb+a.Me*b.Ie;s=a.Ie*b.tb+a.Je*b.fb+a.Me*b.Je;t=a.Ie*b.ff+a.Je*b.Le+a.Me*b.Me;v=a.Ob*b.nb+a.Pb*b.sb+a.fh*b.Ie+b.Ob;u=a.Ob*b.tb+a.Pb*b.fb+a.fh*b.Je+b.Pb;a=a.Ob*b.ff+a.Pb*b.Le+a.fh*b.Me+b.fh;c.nb=d;c.tb=e;c.ff=g;c.sb=h;c.fb=m;c.Le=n;c.Ie=q;c.Je=s;c.Me=t;c.Ob=v;c.Pb=u;c.fh=a};b.inverse=function(b,
c){var d=b.nb*(b.fb*b.Me-b.Le*b.Je)-b.tb*(b.sb*b.Me-b.Le*b.Ie)+b.ff*(b.sb*b.Je-b.fb*b.Ie);if(0!=d){var e,g,h,m,n,q,s,t,u,z,w;t=1/d;d=(b.fb*b.Me-b.Le*b.Je)*t;h=-(b.sb*b.Me-b.Le*b.Ie)*t;q=(b.sb*b.Je-b.fb*b.Ie)*t;e=-(b.tb*b.Me-b.Je*b.ff)*t;m=(b.nb*b.Me-b.ff*b.Ie)*t;s=-(b.nb*b.Je-b.tb*b.Ie)*t;g=(b.tb*b.Le-b.ff*b.fb)*t;n=-(b.nb*b.Le-b.ff*b.sb)*t;t*=b.nb*b.fb-b.tb*b.sb;u=-(b.Ob*d+b.Pb*h+b.fh*q);z=-(b.Ob*e+b.Pb*m+b.fh*s);w=-(b.Ob*g+b.Pb*n+b.fh*t);c.nb=d;c.tb=e;c.ff=g;c.sb=h;c.fb=m;c.Le=n;c.Ie=q;c.Je=s;c.Me=
t;c.Ob=u;c.Pb=z;c.fh=w}else throw a.g.sa("math singularity");};b.prototype.wm=function(){var a=new b;a.nb=this.nb;a.tb=this.tb;a.ff=this.ff;a.sb=this.sb;a.fb=this.fb;a.Le=this.Le;a.Ie=this.Ie;a.Je=this.Je;a.Me=this.Me;a.Ob=this.Ob;a.Pb=this.Pb;a.fh=this.fh;return a};return b}();a.YT=b})(y||(y={}));(function(a){var b=function(b){function d(a){if(void 0!==a)b.call(this,a.ic(),a);else{b.call(this);this.Jf=[];this.Jf[0]=0;this.Ba=1;this.Wg=[];for(a=0;10>a;a++)this.Wg[a]=-1;this.Wg[this.Jf[0]]=0}this.Ro=
!0}I(d,b);d.prototype.Oe=function(a){this.hasAttribute(a)||(this.Wg[a]=0,this.xA())};d.prototype.removeAttribute=function(b){if(0==b)throw a.g.O("Position attribue cannot be removed");this.hasAttribute(b)&&(this.Wg[b]=-1,this.xA())};d.prototype.reset=function(){this.Jf[0]=0;this.Ba=1;for(var a=0;a<this.Wg.length;a++)this.Wg[a]=-1;this.Wg[this.Jf[0]]=0;this.Ro=!0};d.prototype.pw=function(){return c.vw().add(this)};d.Tf=function(){return c.vw().hO()};d.Yn=function(){return c.vw().iO()};d.prototype.oJ=
function(){var b=this.ic();return new a.qa(b,this)};d.prototype.xA=function(){for(var a=this.Ba=0,b=0;10>a;a++)0<=this.Wg[a]&&(this.Jf[b]=a,this.Wg[a]=b,b++,this.Ba++);this.Ro=!0};d.prototype.ic=function(){this.Ro&&(this.tk=this.jj(),this.Ro=!1);return this.tk};d.prototype.mc=function(a){if(null==a)return!1;if(a==this)return!0;if(!(a instanceof d)||a.Ba!=this.Ba)return!1;for(var b=0;b<this.Ba;b++)if(this.Jf[b]!=a.Jf[b])return!1;return this.Ro!=a.Ro?!1:!0};d.prototype.qD=function(a){if(a.Ba!=this.Ba)return!1;
for(var b=0;b<this.Ba;b++)if(this.Jf[b]!=a.Jf[b])return!1;return!0};d.hu=function(a,b){for(var c=[],d=0;d<a.Ba;d++)c[d]=-1;for(var d=0,f=a.Ba;d<f;d++)c[d]=b.zf(a.Id(d));return c};d.ON=function(a,b){var c=new d(a);c.Oe(b);return c.pw()};d.PN=function(a,b){for(var c=null,e=0;10>e;e++)!a.hasAttribute(e)&&b.hasAttribute(e)&&(null==c&&(c=new d(a)),c.Oe(e));return null!=c?c.pw():a};d.ao=function(a,b){var c=new d(a);c.removeAttribute(b);return c.pw()};return d}(a.qa);a.Pd=b;var c=function(){function a(){this.map=
[];var c=new b;this.add(c);c=new b;c.Oe(1);this.add(c)}a.vw=function(){return a.kI};a.prototype.hO=function(){return a.Xn};a.prototype.iO=function(){return a.Yn};a.prototype.add=function(b){var c=b.ic();if(null!=a.Xn&&a.Xn.ic()==c&&b.qD(a.Xn))return a.Xn;if(null!=a.Yn&&a.Yn.ic()==c&&b.qD(a.Yn))return a.Yn;var d=null;void 0!==this.map[c]&&(d=this.map[c]);null==d&&(d=b.oJ(),1==d.Ba?a.Xn=d:2==d.Ba&&1==d.Id(1)?a.Yn=d:this.map[c]=d);return d};a.kI=new a;return a}()})(y||(y={}));var K=0==b.version.indexOf("4."),
R;(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area";a[a.LinearOrAngular=3]="LinearOrAngular"})(R||(R={}));var M={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},T={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},U={degrees:9102,radians:9101};void 0===n.prototype.getCacheValue&&a.extend(n,{cache:null,getCacheValue:function(a){if(null===
this.cache||void 0===this.cache)this.cache={};return this.cache[a]},setCacheValue:function(a,b){if(null===this.cache||void 0===this.cache)this.cache={};this.cache[a]=b}});var V=y.Nf.create(4326),W=y.Nf.create(102100);return function(){function a(){}a.extendedSpatialReferenceInfo=function(a){if(null===a)return null;a=C(a);var b=a.Te();return{tolerance:a.vq(),unitType:null==b?-1:b.Oc,unitID:null==b?-1:b.Rc(),unitBaseFactor:null==b?0:b.Ej,unitSquareDerivative:null==b?0:y.Ub.PC(b).Rc()}};a.clip=function(a,
b){if(null===a)return null;var c=y.Qb.clip(E(a),E(b),F(a));return A(c,a.spatialReference)};a.cut=function(a,b){for(var c=E(b),c=y.Qb.ym(E(a),c,F(a)),d=[],e=0;e<c.length;e++)d.push(A(c[e],a.spatialReference));return d};a.contains=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.Qb.contains(E(a),E(b),F(a))};a.crosses=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.Qb.UL(E(a),E(b),F(a))};a.distance=function(a,b,c){if(null===
a||null===b)throw Error("Illegal Argument Exception");return y.Qb.Gb(E(a),E(b),F(a),y.Ub.Rd(m(c,3)))};a.equals=function(a,b){return null===a&&null!==b||null===b&&null!==a?!1:y.Qb.mc(E(a),E(b),F(a))};a.intersects=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.Qb.QO(E(a),E(b),F(a))};a.touches=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.Qb.touches(E(a),E(b),F(a))};a.within=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");
return y.Qb.iT(E(a),E(b),F(a))};a.disjoint=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.Qb.mM(E(a),E(b),F(a))};a.overlaps=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.Qb.sQ(E(a),E(b),F(a))};a.relate=function(a,b,c){if(null===a||null===b)throw Error("Illegal Argument Exception");return y.Qb.oy(E(a),E(b),F(a),c)};a.isSimple=function(a){if(null===a)throw Error("Illegal Argument Exception");return y.Qb.bP(E(a),F(a))};
a.simplify=function(a){if(null===a)throw Error("Illegal Argument Exception");var b=y.Qb.Py(E(a),F(a));return A(b,a.spatialReference)};a.convexHull=function(b,c){void 0===c&&(c=!1);if(null===b)throw Error("Illegal Argument Exception");if(b instanceof n){var d=y.Qb.IL(E(b),F(b));return A(d,b.spatialReference)}return a.MI(b,c)};a.MI=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));c=y.Qb.JL(c,b);for(d=0;d<c.length;d++)c[d]=A(c[d],a[0].spatialReference);return c};a.difference=function(b,
c){if(null===b||null===c)throw Error("Illegal Argument Exception");if(b instanceof n){var d=y.Qb.ll(E(b),E(c),F(b));return A(d,b.spatialReference)}return a.WL(b,c)};a.WL=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));c=y.Qb.jM(c,E(b),F(b));for(d=0;d<c.length;d++)c[d]=A(c[d],b.spatialReference);return c};a.symmetricDifference=function(b,c){if(null===b||null===c)throw Error("Illegal Argument Exception");if(b instanceof n){var d=y.Qb.Pn(E(b),E(c),F(b));return A(d,b.spatialReference)}return a.sO(b,
c)};a.sO=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));c=y.Qb.LS(c,E(b),F(b));for(d=0;d<c.length;d++)c[d]=A(c[d],b.spatialReference);return c};a.intersect=function(b,c){if(null===b||null===c)throw Error("Illegal Argument Exception");if(b instanceof n){var d=y.Qb.Ha(E(b),E(c),F(b));return A(d,b.spatialReference)}return a.DM(b,c)};a.DM=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));c=y.Qb.PO(c,E(b),F(b));for(d=0;d<c.length;d++)c[d]=A(c[d],b.spatialReference);return c};
a.union=function(a,b){void 0===b&&(b=null);if(null===a)return null;a instanceof n&&(a=[a],null!==b&&a.push(b));if(0===a.length)return null;for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));return A(y.Qb.$S(c,F(a[0])),a[0].spatialReference)};a.offset=function(b,c,d,f,e,g){var h=0;if(null!=f&&void 0!=f)switch(f){case "round":h=0;break;case "bevel":h=1;break;case "miter":h=2;break;case "square":h=3}return b instanceof n?(c=y.Qb.offset(E(b),F(b),c,h,e,g,y.Ub.Rd(m(d,3))),A(c,b.spatialReference)):a.pO(b,
c,d,h,e,g)};a.pO=function(a,b,c,d,e,g){if(null===a)return null;if(0===a.length)return[];for(var h=[],n=0;n<a.length;n++)h.push(E(a[n]));b=y.Qb.rQ(h,F(a[0]),b,d,e,g,y.Ub.Rd(m(c,3)));for(n=0;n<b.length;n++)b[n]=A(b[n],a[0].spatialReference);return b};a.buffer=function(b,c,d,f){void 0===f&&(f=!1);if(b instanceof n)return c=y.Qb.buffer(E(b),F(b),c,y.Ub.Rd(m(d,3)),!1,0,NaN),A(c,b.spatialReference);if("[object Array]"!==Object.prototype.toString.call(c)){for(var e=[],g=0;g<b.length;g++)e.push(c);c=e}if(c.length!=
b.length){if(0==c.length)throw Error("Illegal Argument Exception");for(var e=[],h=0,g=0;g<b.length;g++)void 0===c[g]?e.push(h):(e.push(c[g]),h=c[g]);c=e}return a.vG(b,c,d,!1,f,"geodesic",NaN)};a.geodesicBuffer=function(b,c,d,f,e,g){if(b instanceof n)return void 0===e&&(e=NaN),c=y.Qb.buffer(E(b),F(b),c,y.Ub.Rd(m(d,0)),!0,w(f),e),A(c,b.spatialReference);if("[object Array]"!==Object.prototype.toString.call(c)){for(var h=[],q=0;q<b.length;q++)h.push(c);c=h}if(c.length!=b.length){if(0==c.length)throw Error("Illegal Argument Exception");
for(var h=[],s=0,q=0;q<b.length;q++)void 0===c[q]?h.push(s):(h.push(c[q]),s=c[q]);c=h}return a.vG(b,c,d,!0,f,e,g)};a.vG=function(a,b,c,d,e,g,h){if(null===a)return null;if(0===a.length)return[];void 0===h&&(h=NaN);for(var n=[],q=0;q<a.length;q++)n.push(E(a[q]));b=y.Qb.qK(n,F(a[0]),b,y.Ub.Rd(m(c,0)),d,e,w(g),h);for(q=0;q<b.length;q++)b[q]=A(b[q],a[0].spatialReference);return b};a.nearestCoordinate=function(a,b,c){void 0===c&&(c=!0);b=y.Qb.yw(E(a),E(b),c);return{coordinate:A(b.ow(),a.spatialReference),
distance:b.rw(),isRightSide:b.Ww(),vertexIndex:b.hb(),isEmpty:b.u()}};a.nearestVertex=function(a,b){var c=y.Qb.zw(E(a),E(b));return{coordinate:A(c.ow(),a.spatialReference),distance:c.rw(),isRightSide:c.Ww(),vertexIndex:c.hb(),isEmpty:c.u()}};a.nearestVertices=function(a,b,c,d){b=E(b);c=y.Qb.Aw(E(a),b,c,d);d=[];for(b=0;b<c.length;b++)!1===c[b].u()&&d.push({coordinate:A(c[b].ow(),a.spatialReference),distance:c[b].rw(),isRightSide:c[b].Ww(),vertexIndex:c[b].hb(),isEmpty:c[b].u()});return d};a.generalize=
function(a,b,c,d){b=y.Qb.eN(E(a),F(a),b,c,y.Ub.Rd(m(d,3)));return A(b,a.spatialReference)};a.densify=function(a,b,c){b=y.Qb.mq(E(a),F(a),b,y.Ub.Rd(m(c,3)));return A(b,a.spatialReference)};a.geodesicDensify=function(a,b,c,d){void 0===d&&(d=0);b=y.Qb.ew(E(a),F(a),b,y.Ub.Rd(m(c,3)),d);return A(b,a.spatialReference)};a.rotate=function(a,b,c){if(void 0===c||null===c)switch(a.type){case "point":c=a;break;case "extent":c=K?a.get("center"):a.getCenter();break;default:c=K?a.get("extent").get("center"):a.getExtent().getCenter()}b=
K?y.Wn.rotate(a.toJSON(),b,c.toJSON()):y.Wn.rotate(a.toJson(),b,c.toJson());K?(b=g(b),b.set("spatialReference",a.spatialReference)):(b=d(b),b.setSpatialReference(a.spatialReference));return b};a.flipHorizontal=function(a,b){if(void 0===b||null===b)switch(a.type){case "point":b=a;break;case "extent":b=K?a.get("center"):a.getCenter();break;default:b=K?a.get("extent").get("center"):a.getExtent().getCenter()}var c;c=K?y.Wn.eC(a.toJSON(),b.toJSON()):y.Wn.eC(a.toJson(),b.toJson());K?(c=g(c),c.set("spatialReference",
a.spatialReference)):(c=d(c),c.setSpatialReference(a.spatialReference));return c};a.flipVertical=function(a,b){if(void 0===b||null===b)switch(a.type){case "point":b=a;break;case "extent":b=K?a.get("center"):a.getCenter();break;default:b=K?a.get("extent").get("center"):a.getExtent().getCenter()}var c;c=K?y.Wn.fC(a.toJSON(),b.toJSON()):y.Wn.fC(a.toJson(),b.toJson());K?(c=g(c),c.set("spatialReference",a.spatialReference)):(c=d(c),c.setSpatialReference(a.spatialReference));return c};a.planarArea=function(a,
b){if(null===a)throw Error("Illegal Argument Exception");return y.Qb.AQ(E(a),F(a),y.Ub.Rd(m(b,2)))};a.planarLength=function(a,b){if(null===a)throw Error("Illegal Argument Exception");return y.Qb.BQ(E(a),F(a),y.Ub.Rd(m(b,3)))};a.geodesicArea=function(a,b,c){if(null===a)throw Error("Illegal Argument Exception");return y.Qb.iN(E(a),F(a),y.Ub.Rd(m(b,2)),w(c))};a.geodesicLength=function(a,b,c){if(null===a)throw Error("Illegal Argument Exception");return y.Qb.mN(E(a),F(a),y.Ub.Rd(m(b,0)),w(c))};return a}()})},
"esri/units":function(){define(["dojo/has","./kernel"],function(e,t){var b={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",
SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",
RADIANS:"esriDURadians"};e("extend-esri")&&(t.Units=b);return b})},"esri/toolbars/draw":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/window dojo/has dojo/sniff dojo/keys dojo/dom-construct dojo/dom-style dojo/dom-geometry ../kernel ../sniff ./_toolbar ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../graphic ../geometry/jsonUtils ../geometry/webMercatorUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/Rect dojo/i18n!../nls/jsapi".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D,G,N,P){var K=e(A,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(a,b){this.markerSymbol=new x(x.STYLE_SOLID,10,new C(C.STYLE_SOLID,new u([255,0,0]),2),new u([0,0,0,0.25]));this.lineSymbol=new C(C.STYLE_SOLID,new u([255,0,0]),2);this.fillSymbol=new E(E.STYLE_SOLID,new C(C.STYLE_SOLID,new u([255,0,0]),2),new u([0,0,0,0.25]));this._points=[];this._mouse=!s("esri-touch")&&!s("esri-pointer");
this._defaultOptions={showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15};this._options=t.mixin(t.mixin({},this._defaultOptions),b||{});if(h("ios")||h("android"))this._options.showTooltips=!1;this._onKeyDownHandler=t.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=t.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=t.hitch(this,this._onMouseUpHandler);this._onClickHandler=t.hitch(this,this._onClickHandler);this._onMouseMoveHandler=t.hitch(this,this._onMouseMoveHandler);
this._onMouseDragHandler=t.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=t.hitch(this,this._onDblClickHandler);this._updateTooltip=t.hitch(this,this._updateTooltip);this._hideTooltip=t.hitch(this,this._hideTooltip);this._redrawGraphic=t.hitch(this,this._redrawGraphic)},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(a){this.respectDrawingVertexOrder=a},setMarkerSymbol:function(a){this.markerSymbol=a},setLineSymbol:function(a){this.lineSymbol=a},
setFillSymbol:function(a){this.fillSymbol=a},activate:function(a,b){this._geometryType&&this.deactivate();var c=this.map,d=n.connect,e=K;this._options=t.mixin(t.mixin({},this._options),b||{});c.navigationManager.setImmediateClick(!1);switch(a){case e.ARROW:case e.LEFT_ARROW:case e.RIGHT_ARROW:case e.UP_ARROW:case e.DOWN_ARROW:case e.TRIANGLE:case e.CIRCLE:case e.ELLIPSE:case e.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0);this._onClickHandler_connect=d(c,"onClick",this._onClickHandler);this._mouse?
(this._onMouseDownHandler_connect=d(c,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=d(c,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=d(c,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler2_connect=d(c,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=d(c,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler2_connect=d(c,"onMouseDragEnd",this._onMouseUpHandler));s("esri-touch")&&!s("esri-pointer")&&
(this._onMouseDownHandler2_connect=d(c,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=d(c,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=d(c,"onSwipeEnd",this._onMouseUpHandler));break;case e.POINT:this._onClickHandler_connect=d(c,"onClick",this._onClickHandler);break;case e.LINE:case e.EXTENT:case e.FREEHAND_POLYLINE:case e.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0);this._mouse?(this._onMouseDownHandler_connect=d(c,"onMouseDown",this._onMouseDownHandler),
this._onMouseDragHandler_connect=d(c,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=d(c,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=d(c,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=d(c,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=d(c,"onMouseDragEnd",this._onMouseUpHandler));s("esri-touch")&&!s("esri-pointer")&&(this._onMouseDownHandler2_connect=d(c,"onSwipeStart",this._onMouseDownHandler),
this._onMouseDragHandler2_connect=d(c,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=d(c,"onSwipeEnd",this._onMouseUpHandler));break;case e.POLYLINE:case e.POLYGON:case e.MULTI_POINT:c.navigationManager.setImmediateClick(!0);this._onClickHandler_connect=d(c,"onClick",this._onClickHandler);this._onDblClickHandler_connect=d(c,"onDblClick",this._onDblClickHandler);this._dblClickZoom=c.isDoubleClickZoom;c.disableDoubleClickZoom();break;default:console.error("Unsupported geometry type: "+
a);return}this._onKeyDown_connect=d(c,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=d(c,"onExtentChange",this._redrawGraphic);this._geometryType=a;this._toggleTooltip(!0);c.snappingManager&&("freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType)&&(c.snappingManager._startSelectionLayerQuery(),c.snappingManager._setUpSnapping());this.onActivate(this._geometryType)},deactivate:function(){var a=this.map;this._clear();var b=n.disconnect;b(this._onMouseMoveHandler_connect);
b(this._onMouseDownHandler_connect);b(this._onMouseDragHandler_connect);b(this._onMouseUpHandler_connect);b(this._onMouseDownHandler2_connect);b(this._onMouseDragHandler2_connect);b(this._onMouseUpHandler2_connect);b(this._onClickHandler_connect);b(this._onDblClickHandler_connect);b(this._onKeyDown_connect);b(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=
this._onMouseUpHandler2_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;a.snappingManager&&(a.snappingManager._stopSelectionLayerQuery(),a.snappingManager._killOffSnapping());switch(this._geometryType){case K.CIRCLE:case K.ELLIPSE:case K.TRIANGLE:case K.ARROW:case K.LEFT_ARROW:case K.RIGHT_ARROW:case K.UP_ARROW:case K.DOWN_ARROW:case K.RECTANGLE:case K.LINE:case K.EXTENT:case K.FREEHAND_POLYLINE:case K.FREEHAND_POLYGON:this._activateMapTools(!0,
!1,!1,!0);break;case K.POLYLINE:case K.POLYGON:case K.MULTI_POINT:this._dblClickZoom&&a.enableDoubleClickZoom()}b=this._geometryType;this._geometryType=null;a.navigationManager.setImmediateClick(!1);this._toggleTooltip(!1);this.onDeactivate(b)},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0);this._tGraphic&&this.map.graphics.remove(this._tGraphic,!0);this._graphic=this._tGraphic=null;this.map.snappingManager&&this.map.snappingManager._setGraphic(null);this._points=[]},
finishDrawing:function(){var a,c=this._points,d=this.map.spatialReference,e=K,c=c.slice(0,c.length);switch(this._geometryType){case e.POLYLINE:if(!this._graphic||2>c.length)return;a=new L(d);a.addPath([].concat(c));break;case e.POLYGON:if(!this._graphic||3>c.length)return;a=new D(d);c=[].concat(c,[c[0].offset(0,0)]);!D.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&c.reverse();a.addRing(c);break;case e.MULTI_POINT:a=new G(d),b.forEach(c,function(b){a.addPoint(b)})}n.disconnect(this._onMouseMoveHandler_connect);
this._clear();this._setTooltipMessage(0);this._drawEnd(a)},_drawEnd:function(a){if(a){var b=this.map.spatialReference,c;this.onDrawEnd(a);b&&(b.isWebMercator()?c=I.webMercatorToGeographic(a,!0):4326===b.wkid&&(c=y.fromJson(a.toJson())));this.onDrawComplete({geometry:a,geographicGeometry:c})}},_normalizeRect:function(a,b,c){var d=a.x;a=a.y;var e=b.x;b=b.y;var g=Math.abs(d-e),h=Math.abs(a-b);return{x:Math.min(d,e),y:Math.max(a,b),width:g,height:h,spatialReference:c}},_onMouseDownHandler:function(a){this._dragged=
!1;var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=b||a.mapPoint,d=K;b=this.map;var e=b.spatialReference;this._points.push(c.offset(0,0));switch(this._geometryType){case d.LINE:this._graphic=b.graphics.add(new F(new L({paths:[[[c.x,c.y],[c.x,c.y]]],spatialReference:e}),this.lineSymbol),!0);b.snappingManager&&b.snappingManager._setGraphic(this._graphic);break;case d.FREEHAND_POLYLINE:this._oldPoint=a.screenPoint;c=new L(e);c.addPath(this._points);this._graphic=b.graphics.add(new F(c,
this.lineSymbol),!0);b.snappingManager&&b.snappingManager._setGraphic(this._graphic);break;case d.CIRCLE:case d.ELLIPSE:case d.TRIANGLE:case d.ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:case d.UP_ARROW:case d.DOWN_ARROW:case d.RECTANGLE:case d.FREEHAND_POLYGON:this._oldPoint=a.screenPoint,c=new D(e),c.addRing(this._points),this._graphic=b.graphics.add(new F(c,this.fillSymbol),!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic)}s("esri-touch")&&a.preventDefault()},_onMouseMoveHandler:function(a){var b;
this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=this._points[this._points.length-1];a=b||a.mapPoint;b=this._tGraphic;var d=b.geometry;switch(this._geometryType){case K.POLYLINE:case K.POLYGON:d.setPoint(0,0,{x:c.x,y:c.y}),d.setPoint(0,1,{x:a.x,y:a.y}),b.setGeometry(d)}},_onMouseDragHandler:function(a){if(this._graphic||this._points.length)if(s("esri-touch")&&!this._points.length)a.preventDefault();else{this._dragged=!0;var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);
var c=this._points[0],d=b||a.mapPoint,e=this.map,g=e.spatialReference;b=this._graphic;var h=K,m=e.toScreen(c),n=e.toScreen(d),l=[],l=n.x-m.x,n=n.y-m.y,f=Math.sqrt(l*l+n*n);switch(this._geometryType){case h.CIRCLE:this._hideTooltip();b.geometry=D.createCircle({center:m,r:f,numberOfPoints:60,map:e});b.setGeometry(b.geometry);break;case h.ELLIPSE:this._hideTooltip();b.geometry=D.createEllipse({center:m,longAxis:l,shortAxis:n,numberOfPoints:60,map:e});b.setGeometry(b.geometry);break;case h.TRIANGLE:this._hideTooltip();
l=[[0,-f],[0.8660254037844386*f,0.5*f],[-0.8660254037844386*f,0.5*f],[0,-f]];b.geometry=this._toPolygon(l,m.x,m.y);b.setGeometry(b.geometry);break;case h.ARROW:this._hideTooltip();c=n/f;e=l/f;d=0.25*e*f;g=0.25*f/(n/l);f*=0.25*c;l=[[l,n],[l-d*(1+24/g),n+24*e-f],[l-d*(1+12/g),n+12*e-f],[-12*c,12*e],[12*c,-12*e],[l-d*(1-12/g),n-12*e-f],[l-d*(1-24/g),n-24*e-f],[l,n]];b.geometry=this._toPolygon(l,m.x,m.y);b.setGeometry(b.geometry);break;case h.LEFT_ARROW:this._hideTooltip();l=0>=l?[[l,0],[0.75*l,n],[0.75*
l,0.5*n],[0,0.5*n],[0,-0.5*n],[0.75*l,-0.5*n],[0.75*l,-n],[l,0]]:[[0,0],[0.25*l,n],[0.25*l,0.5*n],[l,0.5*n],[l,-0.5*n],[0.25*l,-0.5*n],[0.25*l,-n],[0,0]];b.geometry=this._toPolygon(l,m.x,m.y);b.setGeometry(b.geometry);break;case h.RIGHT_ARROW:this._hideTooltip();l=0<=l?[[l,0],[0.75*l,n],[0.75*l,0.5*n],[0,0.5*n],[0,-0.5*n],[0.75*l,-0.5*n],[0.75*l,-n],[l,0]]:[[0,0],[0.25*l,n],[0.25*l,0.5*n],[l,0.5*n],[l,-0.5*n],[0.25*l,-0.5*n],[0.25*l,-n],[0,0]];b.geometry=this._toPolygon(l,m.x,m.y);b.setGeometry(b.geometry);
break;case h.UP_ARROW:this._hideTooltip();l=0>=n?[[0,n],[-l,0.75*n],[-0.5*l,0.75*n],[-0.5*l,0],[0.5*l,0],[0.5*l,0.75*n],[l,0.75*n],[0,n]]:[[0,0],[-l,0.25*n],[-0.5*l,0.25*n],[-0.5*l,n],[0.5*l,n],[0.5*l,0.25*n],[l,0.25*n],[0,0]];b.geometry=this._toPolygon(l,m.x,m.y);b.setGeometry(b.geometry);break;case h.DOWN_ARROW:this._hideTooltip();l=0<=n?[[0,n],[-l,0.75*n],[-0.5*l,0.75*n],[-0.5*l,0],[0.5*l,0],[0.5*l,0.75*n],[l,0.75*n],[0,n]]:[[0,0],[-l,0.25*n],[-0.5*l,0.25*n],[-0.5*l,n],[0.5*l,n],[0.5*l,0.25*n],
[l,0.25*n],[0,0]];b.geometry=this._toPolygon(l,m.x,m.y);b.setGeometry(b.geometry);break;case h.RECTANGLE:this._hideTooltip();l=[[0,0],[l,0],[l,n],[0,n],[0,0]];b.geometry=this._toPolygon(l,m.x,m.y);b.setGeometry(b.geometry);break;case h.LINE:b.setGeometry(t.mixin(b.geometry,{paths:[[[c.x,c.y],[d.x,d.y]]]}));break;case h.EXTENT:b&&e.graphics.remove(b,!0);b=new N(this._normalizeRect(c,d,g));b._originOnly=!0;this._graphic=e.graphics.add(new F(b,this.fillSymbol),!0);e.snappingManager&&e.snappingManager._setGraphic(this._graphic);
break;case h.FREEHAND_POLYLINE:this._hideTooltip();if(!1===this._canDrawFreehandPoint(a)){s("esri-touch")&&a.preventDefault();return}this._points.push(a.mapPoint.offset(0,0));b.geometry._insertPoints([d.offset(0,0)],0);b.setGeometry(b.geometry);break;case h.FREEHAND_POLYGON:this._hideTooltip();if(!1===this._canDrawFreehandPoint(a)){s("esri-touch")&&a.preventDefault();return}this._points.push(a.mapPoint.offset(0,0));b.geometry._insertPoints([d.offset(0,0)],0);b.setGeometry(b.geometry)}s("esri-touch")&&
a.preventDefault()}},_canDrawFreehandPoint:function(a){if(!this._oldPoint)return!1;var b=this._oldPoint.x-a.screenPoint.x,c=this._oldPoint.y-a.screenPoint.y,d=this._options.tolerance;if((0>b?-1*b:b)<d&&(0>c?-1*c:c)<d)return!1;b=new Date;if(b-this._startTime<this._options.drawTime)return!1;this._startTime=b;this._oldPoint=a.screenPoint;return!0},_onMouseUpHandler:function(a){if(!this._dragged||!this._graphic)this._clear();else{0===this._points.length&&this._points.push(a.mapPoint.offset(0,0));var b;
this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=this._points[0];b=b||a.mapPoint;var d=this.map.spatialReference,e=K,g;switch(this._geometryType){case e.CIRCLE:case e.ELLIPSE:case e.TRIANGLE:case e.ARROW:case e.LEFT_ARROW:case e.RIGHT_ARROW:case e.UP_ARROW:case e.DOWN_ARROW:case e.RECTANGLE:g=this._graphic.geometry;break;case e.LINE:g=new L({paths:[[[c.x,c.y],[b.x,b.y]]],spatialReference:d});break;case e.EXTENT:g=(new N(this._normalizeRect(c,b,d))).getExtent();break;case e.FREEHAND_POLYLINE:g=
new L(d);g.addPath([].concat(this._points,[b.offset(0,0)]));break;case e.FREEHAND_POLYGON:g=new D(d),c=[].concat(this._points,[b.offset(0,0),this._points[0].offset(0,0)]),!D.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&c.reverse(),g.addRing(c)}s("esri-touch")&&a.preventDefault();this._clear();this._drawEnd(g)}},_onClickHandler:function(a){var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);a=b||a.mapPoint;b=this.map;var c=b.toScreen(a),d=K;this._points.push(a.offset(0,
0));switch(this._geometryType){case d.POINT:this._drawEnd(a.offset(0,0));this._setTooltipMessage(0);break;case d.POLYLINE:1===this._points.length?(c=new L(b.spatialReference),c.addPath(this._points),this._graphic=b.graphics.add(new F(c,this.lineSymbol),!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=n.connect(b,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=b.graphics.add(new F(new L({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:b.spatialReference}),
this.lineSymbol),!0)):(this._graphic.geometry._insertPoints([a.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),b=this._tGraphic,c=b.geometry,c.setPoint(0,0,a.offset(0,0)),c.setPoint(0,1,a.offset(0,0)),b.setGeometry(c));break;case d.POLYGON:1===this._points.length?(c=new D(b.spatialReference),c.addRing(this._points),this._graphic=b.graphics.add(new F(c,this.fillSymbol),!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=
n.connect(b,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=b.graphics.add(new F(new L({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:b.spatialReference}),this.fillSymbol),!0)):(this._graphic.geometry._insertPoints([a.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol),b=this._tGraphic,c=b.geometry,c.setPoint(0,0,a.offset(0,0)),c.setPoint(0,1,a.offset(0,0)),b.setGeometry(c));break;case d.MULTI_POINT:a=this._points;1===a.length?(c=new G(b.spatialReference),
c.addPoint(a[a.length-1]),this._graphic=b.graphics.add(new F(c,this.markerSymbol),!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic)):(this._graphic.geometry.addPoint(a[a.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));break;case d.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],c.x,c.y);break;case d.LEFT_ARROW:this._addShape([[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],c.x,
c.y);break;case d.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],c.x,c.y);break;case d.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],c.x,c.y);break;case d.DOWN_ARROW:this._addShape([[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],c.x,c.y);break;case d.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]],c.x,c.y);break;case d.RECTANGLE:this._addShape([[0,
-96],[96,-96],[96,0],[0,0],[0,-96]],c.x-48,c.y+48);break;case d.CIRCLE:this._clear();this._drawEnd(D.createCircle({center:c,r:48,numberOfPoints:60,map:b}));break;case d.ELLIPSE:this._clear(),this._drawEnd(D.createEllipse({center:c,longAxis:48,shortAxis:24,numberOfPoints:60,map:b}))}this._setTooltipMessage(this._points.length)},_addShape:function(a,b,c){this._setTooltipMessage(0);this._clear();this._drawEnd(this._toPolygon(a,b,c))},_toPolygon:function(a,c,d){var e=this.map,g=new D(e.spatialReference);
g.addRing(b.map(a,function(a){return e.toMap({x:a[0]+c,y:a[1]+d})}));return g},_onDblClickHandler:function(a){var c,d=this._points,e=this.map.spatialReference,g=K;s("esri-touch")&&d.push(a.mapPoint);var h=d[d.length-1],m=d[d.length-2],d=h&&m&&h.x===m.x&&h.y===m.y?d.slice(0,d.length-1):d.slice(0,d.length);switch(this._geometryType){case g.POLYLINE:if(!this._graphic||2>d.length){n.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(a);return}c=new L(e);c.addPath([].concat(d));
break;case g.POLYGON:if(!this._graphic||2>d.length){n.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(a);return}c=new D(e);a=[].concat(d,[d[0].offset(0,0)]);!D.prototype.isClockwise(a)&&!this.respectDrawingVertexOrder&&a.reverse();c.addRing(a);break;case g.MULTI_POINT:c=new G(e),b.forEach(d,function(a){c.addPoint(a)})}n.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(c)},_onKeyDownHandler:function(a){a.keyCode===c.ESCAPE&&
(n.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0))},_toggleTooltip:function(b){this._options.showTooltips&&(b?this._tooltip||(this._tooltip=a.create("div",{"class":"tooltip"},this.map.container),g.isBodyLtr()||d.set(this._tooltip,"direction","rtl"),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=n.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=
n.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=n.connect(this.map,"onMouseMove",this._updateTooltip)):this._tooltip&&(n.disconnect(this._onTooltipMouseEnterHandler_connect),n.disconnect(this._onTooltipMouseLeaveHandler_connect),n.disconnect(this._onTooltipMouseMoveHandler_connect),a.destroy(this._tooltip),this._tooltip=null))},_hideTooltip:function(){var a=this._tooltip;a&&(a.style.display="none")},_setTooltipMessage:function(a){var b=this._tooltip;if(b){var c=
"";switch(this._geometryType){case K.POINT:c=P.toolbars.draw.addPoint;break;case K.ARROW:case K.LEFT_ARROW:case K.RIGHT_ARROW:case K.UP_ARROW:case K.DOWN_ARROW:case K.TRIANGLE:case K.RECTANGLE:case K.CIRCLE:case K.ELLIPSE:c=P.toolbars.draw.addShape;break;case K.LINE:case K.EXTENT:case K.FREEHAND_POLYLINE:case K.FREEHAND_POLYGON:c=P.toolbars.draw.freehand;break;case K.POLYLINE:case K.POLYGON:c=P.toolbars.draw.start;1===a?c=P.toolbars.draw.resume:2<=a&&(c=P.toolbars.draw.complete);break;case K.MULTI_POINT:c=
P.toolbars.draw.addMultipoint,1<=a&&(c=P.toolbars.draw.finish)}b.innerHTML=c}},_updateTooltip:function(a){var b=this._tooltip;if(b){var c;a.clientX||a.pageY?(c=a.clientX,a=a.clientY):(c=a.clientX+q.body().scrollLeft-q.body().clientLeft,a=a.clientY+q.body().scrollTop-q.body().clientTop);b.style.display="none";d.set(b,{left:c+this._options.tooltipOffset+"px",top:a+"px"});b.style.display=""}},_redrawGraphic:function(a,b,c,d){if(c||this.map.wrapAround180)(a=this._graphic)&&a.setGeometry(a.geometry),(a=
this._tGraphic)&&a.setGeometry(a.geometry)},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});t.mixin(K,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});
s("extend-esri")&&t.setObject("toolbars.Draw",K,m);return K})},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../Evented"],function(e,t,b,n,u){e=e([u],{declaredClass:"esri.toolbars._Toolbar",constructor:function(b){this.map=b},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},_deactivateMapTools:function(b,
e,h,c){var a=this.map;b&&(this._mapNavState={isDoubleClickZoom:a.isDoubleClickZoom,isClickRecenter:a.isClickRecenter,isPan:a.isPan,isRubberBandZoom:a.isRubberBandZoom,isKeyboardNavigation:a.isKeyboardNavigation,isScrollWheelZoom:a.isScrollWheelZoom},a.disableDoubleClickZoom(),a.disableClickRecenter(),a.disablePan(),a.disableRubberBandZoom(),a.disableKeyboardNavigation());e&&a.hideZoomSlider();h&&a.hidePanArrows();c&&a.graphics.disableMouseEvents()},_activateMapTools:function(b,e,h,c){var a=this.map,
d=this._mapNavState;b&&d&&(d.isDoubleClickZoom&&a.enableDoubleClickZoom(),d.isClickRecenter&&a.enableClickRecenter(),d.isPan&&a.enablePan(),d.isRubberBandZoom&&a.enableRubberBandZoom(),d.isKeyboardNavigation&&a.enableKeyboardNavigation(),d.isScrollWheelZoom&&a.enableScrollWheelZoom());e&&a.showZoomSlider();h&&a.showPanArrows();c&&a.graphics.enableMouseEvents()}});b("extend-esri")&&t.setObject("toolbars._Toolbar",e,n);return e})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ./Task ../geometry/Polygon ../renderers/SimpleRenderer ../geometry/scaleUtils ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query dojo/has!extend-esri?./PrintParameters dojo/has!extend-esri?./LegendLayer".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D){e=e(g,{declaredClass:"esri.tasks.PrintTask",constructor:function(a,b){this.url=a;this.printGp=new C(this.url);this._handler=t.hitch(this,this._handler);b&&b.async&&(this.async=b.async);this._colorEvaluator=D("$..color")},_handler:function(a,b,c,d,e){try{var g;this.async?"esriJobSucceeded"===a.jobStatus&&this.printGp.getResultData(a.jobId,"Output_File",t.hitch(this,function(a){g=a.value;this._successHandler([g],"onComplete",c,e)})):(g=a[0].value,
this._successHandler([g],"onComplete",c,e))}catch(h){this._errorHandler(h,d,e)}},execute:function(c,d,e){var g=this._handler,m=this._errorHandler,q=c.template||new E;q.hasOwnProperty("showLabels")||(q.showLabels=!0);var s=q.exportOptions,w;s&&(w={outputSize:[s.width,s.height],dpi:s.dpi});var s=q.layoutOptions,x,A=[];if(s){this.legendAll=!1;s.legendLayers?b.forEach(s.legendLayers,function(a){var b={};b.id=a.layerId;a.subLayerIds&&(b.subLayerIds=a.subLayerIds);A.push(b)}):this.legendAll=!0;var v,y;
if("Miles"===s.scalebarUnit||"Kilometers"===s.scalebarUnit)v="esriKilometers",y="esriMiles";else if("Meters"===s.scalebarUnit||"Feet"===s.scalebarUnit)v="esriMeters",y="esriFeet";x={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};x={titleText:s.titleText,authorText:s.authorText,copyrightText:s.copyrightText,customTextElements:s.customTextElements,scaleBarOptions:{metricUnit:v,metricLabel:x[v],nonMetricUnit:y,nonMetricLabel:x[y]},legendOptions:{operationalLayers:A}}}v=this._getPrintDefinition(c.map,
q);c.outSpatialReference&&(v.mapOptions.spatialReference=c.outSpatialReference.toJson());c.template&&h.isDefined(c.template.showAttribution)&&(v.mapOptions.showAttribution=c.template.showAttribution);t.mixin(v,{exportOptions:w,layoutOptions:x});this.allLayerslegend&&t.mixin(v.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});q={Web_Map_as_JSON:n.toJson(h.fixJson(v)),Format:q.format,Layout_Template:q.layout};c.extraParameters&&(q=t.mixin(q,c.extraParameters));var z=new u(a._dfdCanceller);
c=function(a,b){g(a,b,d,e,z)};w=function(a){m(a,e,z)};z._pendingDfd=this.async?this.printGp.submitJob(q,c,null,w):this.printGp.execute(q,c,w);return z},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},
featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},_convertSvgSymbol:function(a){if(!(8>=q("ie"))&&
a.path){this._canvasHolder||(this._canvasHolder=y.create("div"),this._canSurface=L.createSurface(this._canvasHolder,200,200));var b=this._canSurface.createObject(L.Path,a.path).setFill(a.color).setStroke(a.outline);"pendingRender"in this._canSurface&&this._canSurface._render(!0);var c=this._canSurface.rawNode.getContext("2d"),d=Math.ceil(b.getBoundingBox().width+b.getBoundingBox().x),e=Math.ceil(b.getBoundingBox().height+b.getBoundingBox().y),g=c.getImageData(b.getBoundingBox().x,b.getBoundingBox().y,
d,e);c.canvas.width=d;c.canvas.height=e;c.putImageData(g,0,0);c=c.canvas.toDataURL("image/png");return{type:"esriPMS",imageData:c.substr(22,c.length),angle:-a.angle,contentType:"image/png",height:a.size?a.size:e-b.getBoundingBox().y,width:a.size?a.size:d-b.getBoundingBox().x,xoffset:a.xoffset,yoffset:a.yoffset}}},_convertSvgRenderer:function(a){"simple"===a.type&&a.symbol&&a.symbol.path?a.symbol=this._convertSvgSymbol(a.symbol):"uniqueValue"===a.type?(a.defaultSymbol&&a.defaultSymbol.path&&(a.defaultSymbol=
this._convertSvgSymbol(a.defaultSymbol)),a.uniqueValueInfos&&b.forEach(a.uniqueValueInfos,function(a){a.symbol.path&&(a.symbol=this._convertSvgSymbol(a.symbol))},this)):"classBreaks"===a.type&&(a.defaultSymbol&&a.defaultSymbol.path&&(a.defaultSymbol=this._convertSvgSymbol(a.defaultSymbol)),a.classBreakInfos&&b.forEach(a.classBreakInfos,function(a){a.symbol.path&&(a.symbol=this._convertSvgSymbol(a.symbol))},this))},_createFeatureCollection:function(a,c,d){var e=this._createPolygonLayer(),g=this._createPolylineLayer(),
h=this._createPointLayer(),n=this._createMultipointLayer(),q=this._createPointLayer();q.layerDefinition.name="textLayer";delete q.layerDefinition.drawingInfo;if("esri.layers.FeatureLayer"===a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass)e.layerDefinition.name=g.layerDefinition.name=h.layerDefinition.name=n.layerDefinition.name=t.getObject("arcgisProps.title",!1,a)||a.name||a.id;if(a.renderer&&!t.isFunction(a.renderer.attributeField)){var s=a.renderer.toJson();if("temporal"===s.type){var s=
{latestObservationRenderer:s.latestObservationRenderer,trackLinesRenderer:s.trackRenderer,observationAger:s.observationAger,renderer:s.observationRenderer},u={};a._trackIdField&&(u.trackIdField=a._trackIdField);a._startTimeField&&(u.startTimeField=a._startTimeField);a._endTimeField&&(u.endTimeField=a._endTimeField);e.layerDefinition.drawingInfo=s;e.layerDefinition.timeInfo=u;g.layerDefinition.drawingInfo=s;g.layerDefinition.timeInfo=u;h.layerDefinition.drawingInfo=s;h.layerDefinition.timeInfo=u;n.layerDefinition.drawingInfo=
s;n.layerDefinition.timeInfo=u}else e.layerDefinition.drawingInfo.renderer=s,g.layerDefinition.drawingInfo.renderer=s,h.layerDefinition.drawingInfo.renderer=s,n.layerDefinition.drawingInfo.renderer=s}else delete e.layerDefinition.drawingInfo,delete g.layerDefinition.drawingInfo,delete h.layerDefinition.drawingInfo,delete n.layerDefinition.drawingInfo;s=a.fields;!s&&(a.renderer&&!t.isFunction(a.renderer.attributeField))&&("esri.renderer.ClassBreaksRenderer"===a.renderer.declaredClass?(s=[{name:a.renderer.attributeField,
type:"esriFieldTypeDouble"}],a.renderer.normalizationField&&s.push({name:a.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===a.renderer.declaredClass&&(s=[{name:a.renderer.attributeField,type:"esriFieldTypeString"}],a.renderer.attributeField2&&s.push({name:a.renderer.attributeField2,type:"esriFieldTypeString"}),a.renderer.attributeField3&&s.push({name:a.renderer.attributeField3,type:"esriFieldTypeString"})));s&&(e.layerDefinition.fields=s,g.layerDefinition.fields=
s,h.layerDefinition.fields=s,n.layerDefinition.fields=s);var s=a.graphics.length,v;for(v=0;v<s;v++){var w=a.graphics[v];if(!1!==w.visible&&w.geometry&&(u=w.toJson(),!u.symbol||!(u.symbol.outline&&"esriCLS"===u.symbol.outline.type))){u.symbol&&(u.symbol.outline&&u.symbol.outline.color&&u.symbol.outline.color[3])&&(u.symbol.outline.color[3]=255);if(a.renderer&&!u.symbol&&(t.isFunction(a.renderer.attributeField)||this._isFeatureCollectionRequired(a.renderer)||"esri.renderer.DotDensityRenderer"===a.renderer.declaredClass||
d)){d=d||a.renderer;var z=d.getSymbol(w);if(!z)continue;u.symbol=z.toJson();this._isFeatureCollectionRequired(d)&&this._applyVisualVariables(u.symbol,{renderer:d,graphic:w,symbol:z,mapResolution:c&&c.getResolutionInMeters(),mapScale:c&&c.getScale()})}u.symbol&&(u.symbol.path?u.symbol=this._convertSvgSymbol(u.symbol):u.symbol.text&&delete u.attributes);switch(w.geometry.type){case "polygon":e.featureSet.features.push(u);break;case "polyline":g.featureSet.features.push(u);break;case "point":u.symbol&&
u.symbol.text?q.featureSet.features.push(u):h.featureSet.features.push(u);break;case "multipoint":n.featureSet.features.push(u);break;case "extent":u.geometry=m.fromExtent(w.geometry).toJson(),e.featureSet.features.push(u)}}}c=[];0<e.featureSet.features.length&&c.push(e);0<g.featureSet.features.length&&c.push(g);0<n.featureSet.features.length&&c.push(n);0<h.featureSet.features.length&&c.push(h);0<q.featureSet.features.length&&c.push(q);b.forEach(c,function(a){a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.renderer&&
b.every(a.featureSet.features,function(a){return a.symbol})&&delete a.layerDefinition.drawingInfo});b.forEach(c,function(a){a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(a.layerDefinition.drawingInfo.renderer)},this);return{id:a.id,opacity:a.opacity,minScale:a.minScale||0,maxScale:a.maxScale||0,featureCollection:{layers:c}}},_getPrintDefinition:function(a,b){var c={operationalLayers:this._createOperationalLayers(a,b)},d=a.extent,e=a.spatialReference;
a.spatialReference._isWrappable()&&(d=d._normalize(!0),e=d.spatialReference);d={mapOptions:{showAttribution:a.showAttribution,extent:d.toJson(),spatialReference:e.toJson()}};b.preserveScale&&t.mixin(d.mapOptions,{scale:b.outScale||A.getScale(a)});a.timeExtent&&t.mixin(d.mapOptions,{time:[a.timeExtent.startTime.getTime(),a.timeExtent.endTime.getTime()]});e={};t.mixin(e,d,c);return e},_createOperationalLayers:function(a,d){var e,g,h,m,q=[];this.allLayerslegend=this.legendAll?[]:null;var s=b.map(a.layerIds,
a.getLayer,a);a._mapImageLyr&&s.push(a._mapImageLyr);for(e=0;e<s.length;e++)if(g=s[e],g.loaded&&g.visible)switch(h=g.declaredClass,m={id:g.id,title:t.getObject("arcgisProps.title",!1,g)||g.id,opacity:g.opacity,minScale:g.minScale||0,maxScale:g.maxScale||0},m=t.mixin(m,this._getUrlAndToken(g)),g.getNode()&&F.get(g.getNode(),"data-reference")&&(m._isRefLayer=!0),h){case "esri.layers.ArcGISDynamicMapServiceLayer":var u=[];h=!!g._params.layers;if(g._params.dynamicLayers)h=n.fromJson(g._params.dynamicLayers),
b.forEach(h,function(a){u.push({id:a.id,name:a.name,layerDefinition:a});delete a.id;delete a.name;delete a.maxScale;delete a.minScale});else if(g.supportsDynamicLayers){if(h||g.layerDefinitions||g.layerTimeOptions){var x=g.createDynamicLayerInfosFromLayerInfos(),v=null;h&&(v=g.visibleLayers);var v=c._getVisibleLayers(x,v),A=c._getLayersForScale(d.outScale||a.getScale(),x);b.forEach(x,function(a){if(!a.subLayerIds){var c=a.id;-1<b.indexOf(v,c)&&-1<b.indexOf(A,c)&&(a={source:a.source.toJson()},g.layerDefinitions&&
g.layerDefinitions[c]&&(a.definitionExpression=g.layerDefinitions[c]),g.layerTimeOptions&&g.layerTimeOptions[c]&&(a.layerTimeOptions=g.layerTimeOptions[c].toJson()),u.push({id:c,layerDefinition:a}))}});0===u.length&&(m.visibleLayers=[-1])}}else b.forEach(g.layerInfos,function(a){var b={id:a.id,layerDefinition:{}};g.layerDefinitions&&g.layerDefinitions[a.id]&&(b.layerDefinition.definitionExpression=g.layerDefinitions[a.id]);g.layerTimeOptions&&g.layerTimeOptions[a.id]&&(b.layerDefinition.layerTimeOptions=
g.layerTimeOptions[a.id].toJson());(b.layerDefinition.definitionExpression||b.layerDefinition.layerTimeOptions)&&u.push(b)}),h&&(m.visibleLayers=g.visibleLayers);u.length&&(m.layers=u);q.push(m);this.allLayerslegend&&this.allLayerslegend.push({id:g.id,subLayerIds:g.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":m=t.mixin(m,{url:g.url,bandIds:g.bandIds,compressionQuality:g.compressionQuality,format:g.format,interpolation:g.interpolation});g.mosaicRule&&t.mixin(m,{mosaicRule:g.mosaicRule.toJson()});
g.renderingRule&&t.mixin(m,{renderingRule:g.renderingRule.toJson()});q.push(m);this.allLayerslegend&&this.allLayerslegend.push({id:g.id});break;case "esri.layers.WMSLayer":m=t.mixin(m,{url:g.url,title:g.title,type:"wms",version:g.version,transparentBackground:g.imageTransparency,visibleLayers:g.visibleLayers});q.push(m);this.allLayerslegend&&this.allLayerslegend.push({id:g.id,subLayerIds:g.visibleLayers});break;case "esri.virtualearth.VETiledLayer":h=g.mapStyle;"aerialWithLabels"===h&&(h="Hybrid");
m=t.mixin(m,{visibility:g.visible,type:"BingMaps"+h,culture:g.culture,key:g.bingMapsKey});q.push(m);break;case "esri.layers.OpenStreetMapLayer":m=t.mixin(m,{type:"OpenStreetMap",url:g.tileServers[0]});q.push(m);break;case "esri.layers.WMTSLayer":m=t.mixin(m,{url:g.url,type:"wmts",layer:g._identifier,style:g._style,format:g.format,tileMatrixSet:g._tileMatrixSetId});q.push(m);break;case "esri.layers.MapImageLayer":h=g.getImages();b.forEach(h,function(a,b){a.href&&(m={id:g.id+"_image"+b,type:"image",
title:g.id,minScale:g.minScale||0,maxScale:g.maxScale||0,opacity:g.opacity*a.opacity,extent:a.extent.toJson()},"data:image/png;base64,"===a.href.substr(0,22)?m.imageData=a.href.substr(22):m.url=a.href,q.push(m))});break;case "esri.layers.VectorTileLayer":h=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;!m._isRefLayer&&h.test(g.serviceUrl)&&(m.url="http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer",q.push(m));break;
case "esri.layers.WebTiledLayer":h=g.url.replace(/\$\{/g,"{");m=t.mixin(m,{type:"WebTiledLayer",urlTemplate:h,credits:g.copyright});g.subDomains&&0<g.subDomains.length&&(m.subDomains=g.subDomains);q.push(m);break;default:if(g.getTileUrl||g.getImageUrl)m=t.mixin(m,{url:g.url}),q.push(m)}for(e=0;e<a.graphicsLayerIds.length;e++)if(g=a.getLayer(a.graphicsLayerIds[e]),g.loaded&&g.visible)switch(h=g.declaredClass,h){case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.CSVLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===
h&&!d.showLabels||g.renderer&&"esri.renderer.HeatmapRenderer"===g.renderer.declaredClass)continue;s=null;g.url&&g.renderer&&("esri.renderer.ScaleDependentRenderer"===g.renderer.declaredClass?"scale"===g.renderer.rangeType?s=g.renderer.getRendererInfoByScale(a.getScale())&&g.renderer.getRendererInfoByScale(a.getScale()).renderer:"zoom"===g.renderer.rangeType&&(s=g.renderer.getRendererInfoByZoom(a.getZoom())&&g.renderer.getRendererInfoByZoom(a.getZoom()).renderer):s=g.renderer);if(s&&("esri.renderer.SimpleRenderer"===
s.declaredClass||"esri.renderer.TemporalRenderer"===s.declaredClass||t.isString(s.attributeField)&&g._getField(s.attributeField,!0))&&!this._isFeatureCollectionRequired(s)&&"esri.renderer.DotDensityRenderer"!==s.declaredClass&&"esri.layers.CSVLayer"!==g.declaredClass&&"esri.layers.StreamLayer"!==g.declaredClass)if(m={id:g.id,title:t.getObject("arcgisProps.title",!1,g)||g.id,opacity:g.opacity,minScale:g.minScale||0,maxScale:g.maxScale||0,layerDefinition:{drawingInfo:{renderer:s.toJson()}}},m=t.mixin(m,
this._getUrlAndToken(g)),"esri.renderer.TemporalRenderer"===s.declaredClass&&(h=m.layerDefinition.drawingInfo,h.latestObservationRenderer=h.renderer.latestObservationRenderer,h.trackLinesRenderer=h.renderer.trackRenderer,h.observationAger=h.renderer.observationAger,h.renderer=h.renderer.observationRenderer,g._trackIdField&&(m.layerDefinition.timeInfo={trackIdField:g._trackIdField})),this._convertSvgRenderer(m.layerDefinition.drawingInfo.renderer),1>g.opacity||"esri.renderer.TemporalRenderer"===s.declaredClass||
this._updateLayerOpacity(m))if(g._params.source&&(s=g._params.source.toJson(),t.mixin(m.layerDefinition,{source:s})),g.getDefinitionExpression()&&t.mixin(m.layerDefinition,{definitionExpression:g.getDefinitionExpression()}),2!==g.mode)0<g.getSelectedFeatures().length&&(s=b.map(g.getSelectedFeatures(),function(a){return a.attributes[g.objectIdField]}),0<s.length&&g.getSelectionSymbol()&&t.mixin(m,{selectionObjectIds:s,selectionSymbol:g.getSelectionSymbol().toJson()}));else{s=b.map(g.getSelectedFeatures(),
function(a){return a.attributes[g.objectIdField]});if(0===s.length||!g._params.drawMode)break;t.mixin(m.layerDefinition,{objectIds:s});s=null;g.getSelectionSymbol()&&(s=new w(g.getSelectionSymbol()));t.mixin(m.layerDefinition.drawingInfo,{renderer:s&&s.toJson()})}else m=this._createFeatureCollection(g,a);else m=s&&(this._isFeatureCollectionRequired(s)||"esri.renderer.DotDensityRenderer"===s.declaredClass)?this._createFeatureCollection(g,a,s):this._createFeatureCollection(g,a);q.push(m);this.allLayerslegend&&
this.allLayerslegend.push({id:g.id});break;case "esri.layers.GraphicsLayer":m=this._createFeatureCollection(g,a),q.push(m),this.allLayerslegend&&this.allLayerslegend.push({id:g.id})}a.graphics&&0<a.graphics.graphics.length&&(m=this._createFeatureCollection(a.graphics,a),q.push(m));a._labels&&d.showLabels&&(m=this._createFeatureCollection(a._labels,a),q.push(m));b.forEach(q,function(a,b,c){a._isRefLayer&&(delete a._isRefLayer,c.splice(b,1),c.push(a))});return q},_getUrlAndToken:function(a){return{token:a._getToken(),
url:a._url?a._url.path:null}},_updateLayerOpacity:function(a){var c=this._colorEvaluator(a),c=b.filter(c,function(a){return t.isArray(a)&&4===a.length}),d=!0;if(c.length){var e=c[0][3],g;for(g=1;g<c.length;g++)if(e!==c[g][3]){d=!1;break}if(d){a.opacity=e/255;for(g=0;g<c.length;g++)c[g][3]=255}}return d},_isFeatureCollectionRequired:function(a){return a.hasVisualVariables("sizeInfo")||a.hasVisualVariables("colorInfo")||a.hasVisualVariables("opacityInfo")},_getVariable:function(a,b,c){var d;a&&(d=(a=
a.getVisualVariablesForType(b,c))&&a[0]);return d},_applyVisualVariables:function(a,b){var c=b.renderer,e=b.graphic,g=b.symbol,h=b.mapResolution,m=b.mapScale,n=g.type;if(!("textsymbol"===n||"shieldlabelsymbol"===n)){var q=this._getVariable(c,"sizeInfo",!1),s=this._getVariable(c,"colorInfo",!1),t=this._getVariable(c,"opacityInfo",!1);g instanceof x&&(q=this._getVariable(c,"sizeInfo","outline")||q);q&&(g=c.getSize(e,{sizeInfo:q,shape:"simplemarkersymbol"===n?g.style:null,resolution:h,scale:m}),null!=
g&&("simplemarkersymbol"===n?a.size=I.px2pt(g):"picturemarkersymbol"===n?(a.width=I.px2pt(g),a.height=I.px2pt(g)):"simplelinesymbol"===n?a.width=I.px2pt(g):a.outline&&(a.outline.width=I.px2pt(g))));if(s&&(s=c.getColor(e,{colorInfo:s}))&&("simplemarkersymbol"===n||"simplelinesymbol"===n||"simplefillsymbol"===n))a.color=d.toJsonColor(s);t&&(c=c.getOpacity(e,{opacityInfo:t}),null!=c&&a.color&&(a.color[3]=Math.round(255*c)))}}});q("extend-esri")&&t.setObject("tasks.PrintTask",e,s);return e})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D){e=e(g,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(a){this._jobUpdateHandler=t.hitch(this,this._jobUpdateHandler);this._getJobStatus=t.hitch(this,this._getJobStatus);this._getResultDataHandler=
t.hitch(this,this._getResultDataHandler);this._getResultImageHandler=t.hitch(this,this._getResultImageHandler);this._executeHandler=t.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(a){this.updateDelay=a},setProcessSpatialReference:function(a){this.processSpatialReference=a},setOutputSpatialReference:function(a){this._setOutSR(a)},setOutSpatialReference:function(a){this._setOutSR(a)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(a){this.outSpatialReference=this.outputSpatialReference=a},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(a,c,d){for(var e in a){var g=a[e];t.isArray(g)?a[e]=u.toJson(b.map(g,function(a){return this._gpEncode({item:a},!0).item},this)):g instanceof Date&&(a[e]=g.getTime())}return this._encode(a,c,d)},_decode:function(a){var c=a.dataType,
d=new y(a);if(-1!==b.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],c))return d;if("GPLinearUnit"===c)d.value=new x(d.value);else if("GPFeatureRecordSetLayer"===c||"GPRecordSet"===c)d.value=new m(d.value);else if("GPDataFile"===c)d.value=new C(d.value);else if("GPDate"===c)a=d.value,t.isString(a)?d.value=new F({date:a}):d.value=new Date(a);else if("GPRasterData"===c||"GPRasterDataLayer"===c)a=a.value.mapImage,d.value=a?new D(a):new E(d.value);else if(-1!==c.indexOf("GPMultiValue:")){var e=c.split(":")[1];
a=d.value;d.value=b.map(a,function(a){return this._decode({paramName:"_name",dataType:e,value:a}).value},this)}else d=null;return d},submitJob:function(a,b,d,e,g){var h=this._getOutSR(),m=g.assembly;a=this._gpEncode(t.mixin({},this._url.query,{f:"json","env:outSR":h?h.wkid||u.toJson(h.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||u.toJson(this.processSpatialReference.toJson()):null},a),null,m&&m[0]);var n=this._jobUpdateHandler,q=this._errorHandler;
return c({url:this._url.path+"/submitJob",content:a,callbackParamName:"callback",load:function(a,c){n(a,c,!1,b,d,g.dfd)},error:function(a){q(a,e,g.dfd)}})},_jobUpdateHandler:function(a,b,c,d,e,g){var h=a.jobId;b=new w(a);this._successHandler([b],"onStatusUpdate",e,c&&g);if(!c)switch(clearTimeout(this._updateTimers[h]),this._updateTimers[h]=null,g&&g.progress(b),a.jobStatus){case w.STATUS_SUBMITTED:case w.STATUS_EXECUTING:case w.STATUS_WAITING:case w.STATUS_NEW:var m=this._getJobStatus;this._updateTimers[h]=
setTimeout(function(){m(h,c,d,e,g)},this.updateDelay);break;default:this._successHandler([b],"onJobComplete",d,g)}},_getJobStatus:function(a,b,d,e,g){var h=this._jobUpdateHandler;c({url:this._url.path+"/jobs/"+a,content:t.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,c){h(a,c,b,d,e,g)},error:this._errorHandler})},_getResultDataHandler:function(a,b,c,d,e){try{var g=this._decode(a);this._successHandler([g],"onGetResultDataComplete",c,e)}catch(h){this._errorHandler(h,
d,e)}},getResultData:function(b,d,e,g){var h=this._getResultDataHandler,m=this._errorHandler,q=new n(a._dfdCanceller);q._pendingDfd=c({url:this._url.path+"/jobs/"+b+"/results/"+d,content:t.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(a,b){h(a,b,e,g,q)},error:function(a){m(a,g,q)}});return q},checkJobStatus:function(b,d,e){var g=this._jobUpdateHandler,h=this._errorHandler,m=new n(a._dfdCanceller);m._pendingDfd=c({url:this._url.path+"/jobs/"+b,content:t.mixin({},
this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,b){g(a,b,!0,null,d,m)},error:function(a){h(a,e,m)}});return m},cancelJob:function(b,d,e){var g=this._errorHandler,h=new n(a._dfdCanceller);h._pendingDfd=c({url:this._url.path+"/jobs/"+b+"/cancel",content:t.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:t.hitch(this,function(a,b){this._successHandler([a],"onJobCancel",d,h)}),error:function(a){g(a,e,h)}});return h},execute:function(a,b,d,e){var g=this._getOutSR(),
h=e.assembly;a=this._gpEncode(t.mixin({},this._url.query,{f:"json","env:outSR":g?g.wkid||u.toJson(g.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||u.toJson(this.processSpatialReference.toJson()):null},a),null,h&&h[0]);var m=this._executeHandler,n=this._errorHandler;return c({url:this._url.path+"/execute",content:a,callbackParamName:"callback",load:function(a,c){m(a,c,b,d,e.dfd)},error:function(a){n(a,d,e.dfd)}})},_executeHandler:function(a,b,c,d,e){try{var g=
a.results,h,m,n=a.messages;h=0;for(m=g.length;h<m;h++)g[h]=this._decode(g[h]);h=0;for(m=n.length;h<m;h++)n[h]=new A(n[h]);this._successHandler([g,n],"onExecuteComplete",c,e)}catch(q){this._errorHandler(q,d,e)}},_getResultImageHandler:function(a,b,c,d,e){try{var g=this._decode(a);this._successHandler([g],"onGetResultImageComplete",c,e)}catch(h){this._errorHandler(h,d,e)}},getResultImage:function(b,d,e,g,h){var m=this._getResultImageHandler,q=this._errorHandler;e=this._gpEncode(t.mixin({},this._url.query,
{f:"json"},e.toJson()));var s=new n(a._dfdCanceller);s._pendingDfd=c({url:this._url.path+"/jobs/"+b+"/results/"+d,content:e,callbackParamName:"callback",load:function(a,b){m(a,b,g,h,s)},error:function(a){q(a,h,s)}});return s},cancelJobStatusUpdates:function(a){clearTimeout(this._updateTimers[a]);this._updateTimers[a]=null},getResultImageLayer:function(a,b,c,d){if(null==b){var e=this._url.path.indexOf("/GPServer/");a=this._url.path.substring(0,e)+"/MapServer/jobs/"+a}else a=this._url.path+"/jobs/"+
a+"/results/"+b;this._url.query&&(a+="?"+s.objectToQuery(this._url.query));b=null==b?new L(a,{imageParameters:c}):new I(a,{imageParameters:c},!0);this.onGetResultImageLayerComplete(b);d&&d(b);return b},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});d._createWrappers(e);q("extend-esri")&&t.setObject("tasks.Geoprocessor",
e,h);return e})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(e,t,b,n,u){e=e(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(b){this.messages=[];t.mixin(this,b);b=this.messages;var e,h=b.length;for(e=0;e<h;e++)b[e]=new u(b[e])},jobId:"",jobStatus:""});t.mixin(e,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",
STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});b("extend-esri")&&t.setObject("tasks.JobInfo",e,n);return e})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(b){t.mixin(this,b)}});t.mixin(e,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",
TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});b("extend-esri")&&t.setObject("tasks.GPMessage",e,n);return e})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,
b,n){e=e(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(b){b&&t.mixin(this,b)},distance:0,units:null,toJson:function(){var b={};this.distance&&(b.distance=this.distance);this.units&&(b.units=this.units);return b}});b("extend-esri")&&t.setObject("tasks.LinearUnit",e,n);return e})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.tasks.DataFile",constructor:function(b){b&&t.mixin(this,
b)},url:null,itemID:null,toJson:function(){var b={};this.url&&(b.url=this.url);this.itemID&&(b.itemID=this.itemID);return b}});b("extend-esri")&&t.setObject("tasks.DataFile",e,n);return e})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.tasks.RasterData",constructor:function(b){b&&t.mixin(this,b)},url:null,format:null,itemID:null,toJson:function(){var b={};this.url&&(b.url=this.url);this.format&&
(b.format=this.format);this.itemID&&(b.itemID=this.itemID);return b}});b("extend-esri")&&t.setObject("tasks.RasterData",e,n);return e})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(e,t,b,n,u){e=e(null,{declaredClass:"esri.tasks.Date",constructor:function(e){e&&(e.format&&(this.format=e.format),this.date=b.parse(e.date,{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",
toJson:function(){return{date:b.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});n("extend-esri")&&t.setObject("tasks.Date",e,u);return e})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(b){t.mixin(this,b)}});b("extend-esri")&&t.setObject("tasks.ParameterValue",e,n);return e})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),
function(e,t,b,n,u,q,s){e=e(s,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(b,c){c&&(c.imageParameters&&c.imageParameters.extent)&&(this.initialExtent=this.fullExtent=c.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=t.hitch(this,this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(e,c,a,d){var g=e.spatialReference.wkid;d(this._url.path+"?"+u.objectToQuery(t.mixin(this._params,{f:"image",bbox:b.toJson(e.toJson()),
bboxSR:g,imageSR:g,size:c+","+a})))}});n("extend-esri")&&t.setObject("tasks._GPResultImageLayer",e,q);return e})},"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,showAttribution:null,showLabels:!0});b("extend-esri")&&t.setObject("tasks.PrintTemplate",
e,n);return e})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(e,t,b,n,u,q,s,h,c,a,d,g,m){function w(a,b,c,d,e,g,k,h,m,n){var q,s,t=b.length,u=0;n?(s=n.l/e,u=n.i):s=b[0]/e;for(;g<k;)g+s>k&&(q={l:(g+s-k)*e,i:u},s=k-g),u%2||(a.beginPath(),a.arc(c,d,e,g,g+s,h),m&&a.stroke()),g+=s,++u,s=b[u%t]/e;return q}function A(a,b,c,d){var e=
0,g=0,k,h=0;d?(k=d.l,h=d.i):k=b[0];for(;1>g;)g=m.tAtLength(a,k),1==g&&(e=m.computeLength(a),e={l:k-e,i:h}),a=m.splitBezierAtT(a,g),h%2||c.push(a[0]),a=a[1],++h,k=b[h%b.length];return e}function x(a,b,c,d){var e=[b.last.x,b.last.y].concat(c),g=!(a instanceof Array);c=4===c.length?"quadraticCurveTo":"bezierCurveTo";var h=[];b=A(e,b.canvasDash,h,d);for(d=0;d<h.length;++d)e=h[d],g?(a.moveTo(e[0],e[1]),a[c].apply(a,e.slice(2))):(a.push("moveTo",[e[0],e[1]]),a.push(c,e.slice(2)));return b}function C(a,
b,c,d,e,g,h){var n=0,q=0,s=0,t=m.distance(c,d,e,g),u=0;b=b.canvasDash;var w=c,x=d,A,y=!(a instanceof Array);h?(s=h.l,u=h.i):s+=b[0];for(;0.01<Math.abs(1-q);)s>t&&(n={l:s-t,i:u},s=t),q=s/t,h=c+(e-c)*q,A=d+(g-d)*q,u++%2||(y?(a.moveTo(w,x),a.lineTo(h,A)):(a.push("moveTo",[w,x]),a.push("lineTo",[h,A]))),w=h,x=A,s+=b[u%b.length];return n}var E=e.canvas={},F=null,y=d.multiplyPoint,I=Math.PI,L=2*I,D=I/2;g=t.extend;if(u.global.CanvasRenderingContext2D){u=u.doc.createElement("canvas").getContext("2d");var G=
"function"==typeof u.setLineDash,N="function"==typeof u.fillText}var P={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};E.Shape=n("dojox.gfx.canvas.Shape",h.Shape,{_render:function(a){a.save();this._renderTransform(a);this._renderClip(a);this._renderShape(a);this._renderFill(a,!0);this._renderStroke(a,!0);a.restore()},_renderClip:function(a){this.canvasClip&&
(this.canvasClip.render(a),a.clip())},_renderTransform:function(a){if("canvasTransform"in this){var b=this.canvasTransform;a.translate(b.dx,b.dy);a.rotate(b.angle2);a.scale(b.sx,b.sy);a.rotate(b.angle1)}},_renderShape:function(a){},_renderFill:function(a,b){if("canvasFill"in this){var c=this.fillStyle;if("canvasFillImage"in this){var d=c.width,e=c.height,g=this.canvasFillImage.width,h=this.canvasFillImage.height,m=Math.min(d==g?1:d/g,e==h?1:e/h),n=(d-m*g)/2,q=(e-m*h)/2;F.width=d;F.height=e;var s=
F.getContext("2d");s.clearRect(0,0,d,e);s.drawImage(this.canvasFillImage,0,0,g,h,n,q,m*g,m*h);this.canvasFill=a.createPattern(F,"repeat");delete this.canvasFillImage}a.fillStyle=this.canvasFill;b&&("pattern"===c.type&&(0!==c.x||0!==c.y)&&a.translate(c.x,c.y),a.fill())}else a.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(a,b){var c=this.strokeStyle;c?(a.strokeStyle=c.color.toString(),a.lineWidth=c.width,a.lineCap=c.cap,"number"==typeof c.join?(a.lineJoin="miter",a.miterLimit=c.join):a.lineJoin=
c.join,this.canvasDash?G?(a.setLineDash(this.canvasDash),b&&a.stroke()):this._renderDashedStroke(a,b):b&&a.stroke()):b||(a.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(a,b){},getEventSource:function(){return null},on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;this.canvasClip=a?K(b,a):null;this.parent&&
this.parent._makeDirty();return this}});var K=function(a,b){switch(a){case "ellipse":return{canvasEllipse:U({shape:b}),render:function(a){return E.Ellipse.prototype._renderShape.call(this,a)}};case "rect":return{shape:t.delegate(b,{r:0}),render:function(a){return E.Rect.prototype._renderShape.call(this,a)}};case "path":return{canvasPath:R(b),render:function(a){this.canvasPath._renderShape(a)}};case "polyline":return{canvasPolyline:b.points,render:function(a){return E.Polyline.prototype._renderShape.call(this,
a)}}}return null},R=function(a){var b=new dojox.gfx.canvas.Path;b.canvasPath=[];b._setPath(a.d);return b},M=function(a,b,c){var d=a.prototype[b];a.prototype[b]=c?function(){this.parent&&this.parent._makeDirty();d.apply(this,arguments);c.call(this);return this}:function(){this.parent&&this.parent._makeDirty();return d.apply(this,arguments)}};M(E.Shape,"setTransform",function(){this.matrix?this.canvasTransform=e.decompose(this.matrix):delete this.canvasTransform});M(E.Shape,"setFill",function(){var a=
this.fillStyle,c;if(a){if("object"==typeof a&&"type"in a){var d=this.surface.rawNode.getContext("2d");switch(a.type){case "linear":case "radial":c="linear"==a.type?d.createLinearGradient(a.x1,a.y1,a.x2,a.y2):d.createRadialGradient(a.cx,a.cy,0,a.cx,a.cy,a.r);b.forEach(a.colors,function(a){c.addColorStop(a.offset,e.normalizeColor(a.color).toString())});break;case "pattern":F||(F=document.createElement("canvas")),d=new Image,this.surface.downloadImage(d,a.src),this.canvasFillImage=d}}else c=a.toString();
this.canvasFill=c}else delete this.canvasFill});M(E.Shape,"setStroke",function(){var a=this.strokeStyle;if(a){var b=this.strokeStyle.style.toLowerCase();b in P&&(b=P[b]);if(b instanceof Array){this.canvasDash=b=b.slice();var c;for(c=0;c<b.length;++c)b[c]*=a.width;if("butt"!=a.cap){for(c=0;c<b.length;c+=2)b[c]-=a.width,1>b[c]&&(b[c]=1);for(c=1;c<b.length;c+=2)b[c]+=a.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!G&&!!this.canvasDash});M(E.Shape,"setShape");E.Group=
n("dojox.gfx.canvas.Group",E.Shape,{constructor:function(){h.Container._init.call(this)},_render:function(a){a.save();this._renderTransform(a);this._renderClip(a);for(var b=0;b<this.children.length;++b)this.children[b]._render(a);a.restore()},destroy:function(){h.Container.clear.call(this,!0);E.Shape.prototype.destroy.apply(this,arguments)}});E.Rect=n("dojox.gfx.canvas.Rect",[E.Shape,h.Rect],{_renderShape:function(a){var b=this.shape,c=Math.min(b.r,b.height/2,b.width/2),d=b.x,e=d+b.width,g=b.y,b=
g+b.height,h=d+c,m=e-c,n=g+c,q=b-c;a.beginPath();a.moveTo(h,g);c?(a.arc(m,n,c,-D,0,!1),a.arc(m,q,c,0,D,!1),a.arc(h,q,c,D,I,!1),a.arc(h,n,c,I,I+D,!1)):(a.lineTo(m,g),a.lineTo(e,q),a.lineTo(h,b),a.lineTo(d,n));a.closePath()},_renderDashedStroke:function(a,b){var c=this.shape,d=Math.min(c.r,c.height/2,c.width/2),e=c.x,g=e+c.width,h=c.y,m=h+c.height,n=e+d,q=g-d,s=h+d,t=m-d;d?(a.beginPath(),c=C(a,this,n,h,q,h),b&&a.stroke(),c=w(a,this.canvasDash,q,s,d,-D,0,!1,b,c),a.beginPath(),c=C(a,this,g,s,g,t,c),b&&
a.stroke(),c=w(a,this.canvasDash,q,t,d,0,D,!1,b,c),a.beginPath(),c=C(a,this,q,m,n,m,c),b&&a.stroke(),c=w(a,this.canvasDash,n,t,d,D,I,!1,b,c),a.beginPath(),c=C(a,this,e,t,e,s,c),b&&a.stroke(),w(a,this.canvasDash,n,s,d,I,I+D,!1,b,c)):(a.beginPath(),c=C(a,this,n,h,q,h),c=C(a,this,q,h,g,t,c),c=C(a,this,g,t,n,m,c),C(a,this,n,m,e,s,c),b&&a.stroke())}});var T=[];(function(){var b=a.curvePI4;T.push(b.s,b.c1,b.c2,b.e);for(var c=45;360>c;c+=45){var e=d.rotateg(c);T.push(y(e,b.c1),y(e,b.c2),y(e,b.e))}})();var U=
function(a){var b,c,e,f=[],g=a.shape,h=d.normalize([d.translate(g.cx,g.cy),d.scale(g.rx,g.ry)]);b=y(h,T[0]);f.push([b.x,b.y]);for(g=1;g<T.length;g+=3)c=y(h,T[g]),e=y(h,T[g+1]),b=y(h,T[g+2]),f.push([c.x,c.y,e.x,e.y,b.x,b.y]);if(a._needsDash){b=[];c=f[0];for(g=1;g<f.length;++g)e=[],A(c.concat(f[g]),a.canvasDash,e),c=[f[g][4],f[g][5]],b.push(e);a._dashedPoints=b}return f};E.Ellipse=n("dojox.gfx.canvas.Ellipse",[E.Shape,h.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=U(this);
return this},setStroke:function(){this.inherited(arguments);G||(this.canvasEllipse=U(this));return this},_renderShape:function(a){var b=this.canvasEllipse,c;a.beginPath();a.moveTo.apply(a,b[0]);for(c=1;c<b.length;++c)a.bezierCurveTo.apply(a,b[c]);a.closePath()},_renderDashedStroke:function(a,b){var c=this._dashedPoints;a.beginPath();for(var d=0;d<c.length;++d)for(var e=c[d],g=0;g<e.length;++g){var h=e[g];a.moveTo(h[0],h[1]);a.bezierCurveTo(h[2],h[3],h[4],h[5],h[6],h[7])}b&&a.stroke()}});E.Circle=
n("dojox.gfx.canvas.Circle",[E.Shape,h.Circle],{_renderShape:function(a){var b=this.shape;a.beginPath();a.arc(b.cx,b.cy,b.r,0,L,1)},_renderDashedStroke:function(a,b){var c=this.shape,d=0,e,g=this.canvasDash.length;for(i=0;d<L;)e=this.canvasDash[i%g]/c.r,i%2||(a.beginPath(),a.arc(c.cx,c.cy,c.r,d,d+e,0),b&&a.stroke()),d+=e,++i}});E.Line=n("dojox.gfx.canvas.Line",[E.Shape,h.Line],{_renderShape:function(a){var b=this.shape;a.beginPath();a.moveTo(b.x1,b.y1);a.lineTo(b.x2,b.y2)},_renderDashedStroke:function(a,
b){var c=this.shape;a.beginPath();C(a,this,c.x1,c.y1,c.x2,c.y2);b&&a.stroke()}});E.Polyline=n("dojox.gfx.canvas.Polyline",[E.Shape,h.Polyline],{setShape:function(){this.inherited(arguments);var a=this.shape.points,b=a[0],c,d;this.bbox=null;this._normalizePoints();if(a.length)if("number"==typeof b)b=a;else{b=[];for(d=0;d<a.length;++d)c=a[d],b.push(c.x,c.y)}else b=[];this.canvasPolyline=b;return this},_renderShape:function(a){var b=this.canvasPolyline;if(b.length){a.beginPath();a.moveTo(b[0],b[1]);
for(var c=2;c<b.length;c+=2)a.lineTo(b[c],b[c+1])}},_renderDashedStroke:function(a,b){var c=this.canvasPolyline,d=0;a.beginPath();for(var e=0;e<c.length;e+=2)d=C(a,this,c[e],c[e+1],c[e+2],c[e+3],d);b&&a.stroke()}});E.Image=n("dojox.gfx.canvas.Image",[E.Shape,h.Image],{setShape:function(){this.inherited(arguments);var a=new Image;this.surface.downloadImage(a,this.shape.src);this.canvasImage=a;return this},_renderShape:function(a){var b=this.shape;a.drawImage(this.canvasImage,b.x,b.y,b.width,b.height)}});
E.Text=n("dojox.gfx.canvas.Text",[E.Shape,h.Text],{_setFont:function(){this.fontStyle?this.canvasFont=e.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var a=this.shape,b=0,c;a.text&&(c=this.surface.rawNode.getContext("2d"),c.save(),this._renderTransform(c),this._renderFill(c,!1),this._renderStroke(c,!1),this.canvasFont&&(c.font=this.canvasFont),b=c.measureText(a.text).width,c.restore());return b},_render:function(a){a.save();this._renderTransform(a);this._renderFill(a,
!1);this._renderStroke(a,!1);this._renderShape(a);a.restore()},_renderShape:function(a){var b,c=this.shape;c.text&&(b="middle"===c.align?"center":c.align,a.textAlign=b,this.canvasFont&&(a.font=this.canvasFont),this.canvasFill&&a.fillText(c.text,c.x,c.y),this.strokeStyle&&(a.beginPath(),a.strokeText(c.text,c.x,c.y),a.closePath()))}});M(E.Text,"setFont");N||E.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var V={M:"_moveToA",m:"_moveToR",
L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};E.Path=n("dojox.gfx.canvas.Path",[E.Shape,c.Path],{constructor:function(){this.lastControl={}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);
G||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(a){var b=t.clone(this.last);this[V[a.action]](this.canvasPath,a.action,a.args,this._needsDash?this._dashedPath:null);this.last=b;this.inherited(arguments)},_renderShape:function(a){var b=this.canvasPath;a.beginPath();for(var c=0;c<b.length;c+=2)a[b[c]].apply(a,b[c+1])},_renderDashedStroke:G?function(){}:function(a,b){var c=this._dashedPath;
a.beginPath();for(var d=0;d<c.length;d+=2)a[c[d]].apply(a,c[d+1]);b&&a.stroke()},_moveToA:function(a,b,c,d){a.push("moveTo",[c[0],c[1]]);d&&d.push("moveTo",[c[0],c[1]]);for(b=2;b<c.length;b+=2)a.push("lineTo",[c[b],c[b+1]]),d&&(this._dashResidue=C(d,this,c[b-2],c[b-1],c[b],c[b+1],this._dashResidue));this.last.x=c[c.length-2];this.last.y=c[c.length-1];this.lastControl={}},_moveToR:function(a,b,c,d){b="x"in this.last?[this.last.x+=c[0],this.last.y+=c[1]]:[this.last.x=c[0],this.last.y=c[1]];a.push("moveTo",
b);d&&d.push("moveTo",b);for(b=2;b<c.length;b+=2)a.push("lineTo",[this.last.x+=c[b],this.last.y+=c[b+1]]),d&&(this._dashResidue=C(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(a,b,c,d){for(b=0;b<c.length;b+=2)d&&(this._dashResidue=C(d,this,this.last.x,this.last.y,c[b],c[b+1],this._dashResidue)),a.push("lineTo",[c[b],c[b+1]]);this.last.x=c[c.length-2];this.last.y=c[c.length-1];this.lastControl={}},_lineToR:function(a,b,c,
d){for(b=0;b<c.length;b+=2)a.push("lineTo",[this.last.x+=c[b],this.last.y+=c[b+1]]),d&&(this._dashResidue=C(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(a,b,c,d){for(b=0;b<c.length;++b)a.push("lineTo",[c[b],this.last.y]),d&&(this._dashResidue=C(d,this,d[d.length-1][0],d[d.length-1][1],c[b],this.last.y,this._dashResidue));this.last.x=c[c.length-1];this.lastControl={}},_hLineToR:function(a,b,c,d){for(b=0;b<c.length;++b)a.push("lineTo",
[this.last.x+=c[b],this.last.y]),d&&(this._dashResidue=C(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(a,b,c,d){for(b=0;b<c.length;++b)a.push("lineTo",[this.last.x,c[b]]),d&&(this._dashResidue=C(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,c[b],this._dashResidue));this.last.y=c[c.length-1];this.lastControl={}},_vLineToR:function(a,b,c,d){for(b=0;b<c.length;++b)a.push("lineTo",[this.last.x,this.last.y+=c[b]]),d&&
(this._dashResidue=C(d,this,d[d.length-1][0],d[d.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(a,b,c,d){for(b=0;b<c.length;b+=6)a.push("bezierCurveTo",c.slice(b,b+6)),d&&(this._dashResidue=x(d,this,a[a.length-1],this._dashResidue));this.last.x=c[c.length-2];this.last.y=c[c.length-1];this.lastControl.x=c[c.length-4];this.lastControl.y=c[c.length-3];this.lastControl.type="C"},_curveToR:function(a,b,c,d){for(b=0;b<c.length;b+=6)a.push("bezierCurveTo",
[this.last.x+c[b],this.last.y+c[b+1],this.lastControl.x=this.last.x+c[b+2],this.lastControl.y=this.last.y+c[b+3],this.last.x+c[b+4],this.last.y+c[b+5]]),d&&(this._dashResidue=x(d,this,a[a.length-1],this._dashResidue)),this.last.x+=c[b+4],this.last.y+=c[b+5];this.lastControl.type="C"},_smoothCurveToA:function(a,b,c,d){for(b=0;b<c.length;b+=4){var e="C"==this.lastControl.type;a.push("bezierCurveTo",[e?2*this.last.x-this.lastControl.x:this.last.x,e?2*this.last.y-this.lastControl.y:this.last.y,c[b],c[b+
1],c[b+2],c[b+3]]);d&&(this._dashResidue=x(d,this,a[a.length-1],this._dashResidue));this.lastControl.x=c[b];this.lastControl.y=c[b+1];this.lastControl.type="C"}this.last.x=c[c.length-2];this.last.y=c[c.length-1]},_smoothCurveToR:function(a,b,c,d){for(b=0;b<c.length;b+=4){var e="C"==this.lastControl.type;a.push("bezierCurveTo",[e?2*this.last.x-this.lastControl.x:this.last.x,e?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+c[b],this.last.y+c[b+1],this.last.x+c[b+2],this.last.y+c[b+3]]);d&&
(this._dashResidue=x(d,this,a[a.length-1],this._dashResidue));this.lastControl.x=this.last.x+c[b];this.lastControl.y=this.last.y+c[b+1];this.lastControl.type="C";this.last.x+=c[b+2];this.last.y+=c[b+3]}},_qCurveToA:function(a,b,c,d){for(b=0;b<c.length;b+=4)a.push("quadraticCurveTo",c.slice(b,b+4));d&&(this._dashResidue=x(d,this,a[a.length-1],this._dashResidue));this.last.x=c[c.length-2];this.last.y=c[c.length-1];this.lastControl.x=c[c.length-4];this.lastControl.y=c[c.length-3];this.lastControl.type=
"Q"},_qCurveToR:function(a,b,c,d){for(b=0;b<c.length;b+=4)a.push("quadraticCurveTo",[this.lastControl.x=this.last.x+c[b],this.lastControl.y=this.last.y+c[b+1],this.last.x+c[b+2],this.last.y+c[b+3]]),d&&(this._dashResidue=x(d,this,a[a.length-1],this._dashResidue)),this.last.x+=c[b+2],this.last.y+=c[b+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(a,b,c,d){for(b=0;b<c.length;b+=2){var e="Q"==this.lastControl.type;a.push("quadraticCurveTo",[this.lastControl.x=e?2*this.last.x-this.lastControl.x:
this.last.x,this.lastControl.y=e?2*this.last.y-this.lastControl.y:this.last.y,c[b],c[b+1]]);d&&(this._dashResidue=x(d,this,a[a.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=c[c.length-2];this.last.y=c[c.length-1]},_qSmoothCurveToR:function(a,b,c,d){for(b=0;b<c.length;b+=2){var e="Q"==this.lastControl.type;a.push("quadraticCurveTo",[this.lastControl.x=e?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=e?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+c[b],
this.last.y+c[b+1]]);d&&(this._dashResidue=x(d,this,a[a.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=c[b];this.last.y+=c[b+1]}},_arcTo:function(c,d,e,g){d="a"==d;for(var f=0;f<e.length;f+=7){var h=e[f+5],k=e[f+6];d&&(h+=this.last.x,k+=this.last.y);var m=a.arcAsBezier(this.last,e[f],e[f+1],e[f+2],e[f+3]?1:0,e[f+4]?1:0,h,k);b.forEach(m,function(a){c.push("bezierCurveTo",a)});g&&(this._dashResidue=x(g,this,p,this._dashResidue));this.last.x=h;this.last.y=k}this.lastControl={}},
_closePath:function(a,b,c,d){a.push("closePath",[]);d&&(this._dashResidue=C(d,this,this.last.x,this.last.y,d[1][0],d[1][1],this._dashResidue));this.lastControl={}}});b.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),function(a){M(E.Path,a)});E.TextPath=n("dojox.gfx.canvas.TextPath",[E.Shape,c.TextPath],{_renderShape:function(a){},_setText:function(){},_setFont:function(){}});E.Surface=n("dojox.gfx.canvas.Surface",h.Surface,{constructor:function(){h.Container._init.call(this);
this.pendingImageCount=0;this.makeDirty()},destroy:function(){h.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(a,b){this.width=e.normalizedLength(a);this.height=e.normalizedLength(b);if(!this.rawNode)return this;var c=!1;this.rawNode.width!=this.width&&(this.rawNode.width=this.width,c=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,c=!0);c&&this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:
null},_render:function(a){if(this.rawNode&&(a||!this.pendingImageCount))a=this.rawNode.getContext("2d"),a.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(a),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender)},render:function(a){a.save();for(var b=0;b<this.children.length;++b)this.children[b]._render(a);a.restore()},makeDirty:function(){!this.pendingImagesCount&&(!("pendingRender"in this)&&!this._batch)&&(this.pendingRender=setTimeout(t.hitch(this,
this._render),0))},downloadImage:function(a,b){var c=t.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);a.onload=c;a.onerror=c;a.onabort=c;a.src=b},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}});E.createSurface=function(a,b,c){if(!b&&!c){var d=
q.position(a);b=b||d.w;c=c||d.h}"number"==typeof b&&(b+="px");"number"==typeof c&&(c+="px");d=new E.Surface;a=s.byId(a);var f=a.ownerDocument.createElement("canvas");f.width=e.normalizedLength(b);f.height=e.normalizedLength(c);a.appendChild(f);d.rawNode=f;d._parent=a;return d.surface=d};var W=h.Container;n={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},
add:function(a){this._makeDirty();return W.add.apply(this,arguments)},remove:function(a,b){this._makeDirty();return W.remove.apply(this,arguments)},clear:function(){this._makeDirty();return W.clear.apply(this,arguments)},getBoundingBox:W.getBoundingBox,_moveChildToFront:function(a){this._makeDirty();return W._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(a){this._makeDirty();return W._moveChildToBack.apply(this,arguments)}};c={createObject:function(a,b){var c=new a;c.surface=this.surface;
c.setShape(b);this.add(c);return c}};g(E.Group,n);g(E.Group,h.Creator);g(E.Group,c);g(E.Surface,n);g(E.Surface,h.Creator);g(E.Surface,c);E.fixTarget=function(a,b){return!0};return E})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(e,t,b,n,u,q,s,h,c,a){var d=e.shape={};d.Shape=b("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=
this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(u("gfxRegistry")){var a=d.register(this);this.getUID=function(){return a}}},destroy:function(){u("gfxRegistry")&&d.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},
getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b)return null;var c=this._getRealMatrix();return[a.multiplyPoint(c,b.x,b.y),a.multiplyPoint(c,b.x+b.width,b.y),a.multiplyPoint(c,b.x+b.width,b.y+b.height),a.multiplyPoint(c,b.x,b.y+b.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=e.makeParameters(this.shape,
a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var b=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":b=e.makeParameters(e.defaultLinearGradient,a);break;case "radial":b=e.makeParameters(e.defaultRadialGradient,a);break;case "pattern":b=e.makeParameters(e.defaultPattern,a)}else b=e.normalizeColor(a);this.fillStyle=b;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||t.isArray(a)||a instanceof
c)a={color:a};a=this.strokeStyle=e.makeParameters(e.defaultStroke,a);a.color=e.normalizeColor(a.color);return this},setTransform:function(b){this.matrix=a.clone(b?a.normalize(b):a.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},
_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},_updateParentMatrix:function(b){this.parentMatrix=b?a.clone(b):null;return this._applyTransform()},
_getRealMatrix:function(){for(var b=this.matrix,c=this.parent;c;)c.matrix&&(b=a.multiply(c.matrix,b)),c=c.parent;return b}});d._eventsProcessing={on:function(a,b){return q(this.getEventSource(),a,d.fixCallback(this,e.fixTarget,b))},connect:function(a,b,c){"on"==a.substring(0,2)&&(a=a.substring(2));return this.on(a,c?t.hitch(b,c):b)},disconnect:function(a){return a.remove()}};d.fixCallback=function(a,b,c,d){d||(d=c,c=null);if(t.isString(d)){c=c||n.global;if(!c[d])throw['dojox.gfx.shape.fixCallback: scope["',
d,'"] is null (scope\x3d"',c,'")'].join("");return function(e){return b(e,a)?c[d].apply(c,arguments||[]):void 0}}return!c?function(e){return b(e,a)?d.apply(c,arguments):void 0}:function(e){return b(e,a)?d.apply(c,arguments||[]):void 0}};t.extend(d.Shape,d._eventsProcessing);d.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var b=a.getParent();b&&b.remove(a,!0);this.children.push(a);return a._setParent(this,
this._getRealMatrix())},remove:function(a,b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){b||(a.parent=null,a.parentMatrix=null);this.children.splice(c,1);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var b=null;s.forEach(this.children,function(c){var d=c.getBoundingBox();d&&((c=c.getTransform())&&(d=a.multiplyRectangle(c,
d)),b?(b.x=Math.min(b.x,d.x),b.y=Math.min(b.y,d.y),b.endX=Math.max(b.endX,d.x+d.width),b.endY=Math.max(b.endY,d.y+d.height)):b={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height})});b&&(b.width=b.endX-b.x,b.height=b.endY-b.y);return b}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,
1);this.children.unshift(a);break}return this}};d.Surface=b("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){s.forEach(this._nodes,h.destroy);this._nodes=[];s.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(u("ie"))for(;this._parent.lastChild;)h.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},
_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,b){var c=t.hitch(a,b);if(this.isLoaded)c(this);else q.once(this,"load",function(a){c(a)})}});t.extend(d.Surface,d._eventsProcessing);d.Rect=b("dojox.gfx.shape.Rect",d.Shape,{constructor:function(a){this.shape=e.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});d.Ellipse=b("dojox.gfx.shape.Ellipse",d.Shape,{constructor:function(a){this.shape=e.getDefault("Ellipse");this.rawNode=
a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});d.Circle=b("dojox.gfx.shape.Circle",d.Shape,{constructor:function(a){this.shape=e.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});d.Line=b("dojox.gfx.shape.Line",d.Shape,{constructor:function(a){this.shape=e.getDefault("Line");this.rawNode=
a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});d.Polyline=b("dojox.gfx.shape.Polyline",d.Shape,{constructor:function(a){this.shape=e.getDefault("Polyline");this.rawNode=a},setShape:function(a,b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);
return this},_normalizePoints:function(){var a=this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],d=0;d<b;d+=2)c.push({x:a[d],y:a[d+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],d=c.x,e=c.y,h=c.x,n=c.y,q=1;q<b;++q)c=a[q],d>c.x&&(d=c.x),h<c.x&&(h=c.x),e>c.y&&(e=c.y),n<c.y&&(n=c.y);this.bbox={x:d,y:e,width:h-d,height:n-e}}return this.bbox}});d.Image=b("dojox.gfx.shape.Image",d.Shape,
{constructor:function(a){this.shape=e.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});d.Text=b(d.Shape,{constructor:function(a){this.fontStyle=null;this.shape=e.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?e.splitFontString(a):e.makeParameters(e.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=
null;this.getShape().text&&(a=e._base._computeTextBoundingBox(this));return a}});d.Creator={createShape:function(a){switch(a.type){case e.defaultPath.type:return this.createPath(a);case e.defaultRect.type:return this.createRect(a);case e.defaultCircle.type:return this.createCircle(a);case e.defaultEllipse.type:return this.createEllipse(a);case e.defaultLine.type:return this.createLine(a);case e.defaultPolyline.type:return this.createPolyline(a);case e.defaultImage.type:return this.createImage(a);
case e.defaultText.type:return this.createText(a);case e.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(e.Group)},createRect:function(a){return this.createObject(e.Rect,a)},createEllipse:function(a){return this.createObject(e.Ellipse,a)},createCircle:function(a){return this.createObject(e.Circle,a)},createLine:function(a){return this.createObject(e.Line,a)},createPolyline:function(a){return this.createObject(e.Polyline,a)},createImage:function(a){return this.createObject(e.Image,
a)},createText:function(a){return this.createObject(e.Text,a)},createPath:function(a){return this.createObject(e.Path,a)},createTextPath:function(a){return this.createObject(e.TextPath,{}).setText(a)},createObject:function(a,b){return null}};return d})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(e,t,b,n,u){u=b("dojox.gfx.path.Path",u.Shape,{constructor:function(b){this.shape=t.clone(e.defaultPath);this.segments=[];this.tbbox=
null;this.absolute=!0;this.last={};this.rawNode=b;this.segmented=!1},setAbsoluteMode:function(b){this._confirmSegmented();this.absolute="string"==typeof b?"absolute"==b:b;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;
var b=this.bbox,e=this._getRealMatrix();this.bbox=null;for(var h=0,c=this.segments.length;h<c;++h)this._updateWithSegment(this.segments[h],e);e=this.bbox;this.bbox=b;return this.tbbox=e?[{x:e.l,y:e.t},{x:e.r,y:e.t},{x:e.r,y:e.b},{x:e.l,y:e.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(b,e,h){h&&(e=n.multiplyPoint(h,b,e),b=e.x,e=e.y);this.bbox&&"l"in
this.bbox?(this.bbox.l>b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>e&&(this.bbox.t=e),this.bbox.b<e&&(this.bbox.b=e)):this.bbox={l:b,b:e,r:b,t:e}},_updateWithSegment:function(b,n){var h=b.args,c=h.length,a;switch(b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(a=0;a<c;a+=2)this._updateBBox(h[a],h[a+1],n);this.last.x=h[c-2];this.last.y=h[c-1];this.absolute=!0;break;case "H":for(a=0;a<c;++a)this._updateBBox(h[a],this.last.y,n);this.last.x=h[c-1];this.absolute=!0;
break;case "V":for(a=0;a<c;++a)this._updateBBox(this.last.x,h[a],n);this.last.y=h[c-1];this.absolute=!0;break;case "m":a=0;"x"in this.last||(this._updateBBox(this.last.x=h[0],this.last.y=h[1],n),a=2);for(;a<c;a+=2)this._updateBBox(this.last.x+=h[a],this.last.y+=h[a+1],n);this.absolute=!1;break;case "l":case "t":for(a=0;a<c;a+=2)this._updateBBox(this.last.x+=h[a],this.last.y+=h[a+1],n);this.absolute=!1;break;case "h":for(a=0;a<c;++a)this._updateBBox(this.last.x+=h[a],this.last.y,n);this.absolute=!1;
break;case "v":for(a=0;a<c;++a)this._updateBBox(this.last.x,this.last.y+=h[a],n);this.absolute=!1;break;case "c":for(a=0;a<c;a+=6)this._updateBBox(this.last.x+h[a],this.last.y+h[a+1],n),this._updateBBox(this.last.x+h[a+2],this.last.y+h[a+3],n),this._updateBBox(this.last.x+=h[a+4],this.last.y+=h[a+5],n);this.absolute=!1;break;case "s":case "q":for(a=0;a<c;a+=4)this._updateBBox(this.last.x+h[a],this.last.y+h[a+1],n),this._updateBBox(this.last.x+=h[a+2],this.last.y+=h[a+3],n);this.absolute=!1;break;
case "A":for(a=0;a<c;a+=7)this._updateBBox(h[a+5],h[a+6],n);this.last.x=h[c-2];this.last.y=h[c-1];this.absolute=!0;break;case "a":for(a=0;a<c;a+=7)this._updateBBox(this.last.x+=h[a+5],this.last.y+=h[a+6],n);this.absolute=!1}var d=[b.action];for(a=0;a<c;++a)d.push(e.formatNumber(h[a],!0));if("string"==typeof this.shape.path)this.shape.path+=d.join("");else{a=0;for(c=d.length;a<c;++a)this.shape.path.push(d[a])}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(b,e){this.tbbox=
null;var h=this._validSegments[b.toLowerCase()];"number"==typeof h&&(h?e.length>=h&&(h={action:b,args:e.slice(0,e.length-e.length%h)},this.segments.push(h),this._updateWithSegment(h)):(h={action:b,args:[]},this.segments.push(h),this._updateWithSegment(h)))},_collectArgs:function(b,e){for(var h=0;h<e.length;++h){var c=e[h];"boolean"==typeof c?b.push(c?1:0):"number"==typeof c?b.push(c):c instanceof Array?this._collectArgs(b,c):"x"in c&&"y"in c&&b.push(c.x,c.y)}},moveTo:function(){this._confirmSegmented();
var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"M":"m",b);return this},lineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"L":"l",b);return this},hLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"H":"h",b);return this},vLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"V":"v",b);
return this},curveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"C":"c",b);return this},smoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"S":"s",b);return this},qCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"Q":"q",b);return this},qSmoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,
arguments);this._pushSegment(this.absolute?"T":"t",b);return this},arcTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"A":"a",b);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var b=this.shape.path;this.shape.path=[];this._setPath(b);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(b){b=t.isArray(b)?b:b.match(e.pathSvgRegExp);
this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(b){for(var n="",h=[],c=b.length,a=0;a<c;++a){var d=b[a],g=parseFloat(d);isNaN(g)?(n&&this._pushSegment(n,h),h=[],n=d):h.push(g)}this._pushSegment(n,h)}},setShape:function(b){this.inherited(arguments,["string"==typeof b?{path:b}:b]);this.segmented=!1;this.segments=[];e.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});b=b("dojox.gfx.path.TextPath",u,{constructor:function(b){"text"in this||(this.text=t.clone(e.defaultTextPath));
"fontStyle"in this||(this.fontStyle=t.clone(e.defaultFont))},getText:function(){return this.text},setText:function(b){this.text=e.makeParameters(this.text,"string"==typeof b?{text:b}:b);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?e.splitFontString(b):e.makeParameters(e.defaultFont,b);this._setFont();return this}});return e.path={Path:u,TextPath:b}})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],
function(e,t,b){function n(a){var b=Math.cos(a);a=Math.sin(a);var c={x:b+4/3*(1-b),y:a-4/3*b*(1-b)/a};return{s:{x:b,y:-a},c1:{x:c.x,y:-c.y},c2:c,e:{x:b,y:a}}}var u=2*Math.PI,q=Math.PI/4,s=Math.PI/8,h=q+s,c=n(s);return e.arc={unitArcAsBezier:n,curvePI4:c,arcAsBezier:function(a,d,e,m,t,A,x,C){t=Boolean(t);A=Boolean(A);var E=b._degToRad(m);m=d*d;var F=e*e,y=b.multiplyPoint(b.rotate(-E),{x:(a.x-x)/2,y:(a.y-C)/2}),I=y.x*y.x,L=y.y*y.y;m=Math.sqrt((m*F-m*L-F*I)/(m*L+F*I));isNaN(m)&&(m=0);m={x:m*d*y.y/e,
y:-m*e*y.x/d};t==A&&(m={x:-m.x,y:-m.y});m=b.multiplyPoint([b.translate((a.x+x)/2,(a.y+C)/2),b.rotate(E)],m);d=b.normalize([b.translate(m.x,m.y),b.rotate(E),b.scale(d,e)]);m=b.invert(d);a=b.multiplyPoint(m,a);C=b.multiplyPoint(m,x,C);x=Math.atan2(a.y,a.x);C=Math.atan2(C.y,C.x);m=x-C;A&&(m=-m);0>m?m+=u:m>u&&(m-=u);e=s;C=c;e=A?e:-e;a=[];for(t=m;0<t;t-=q)t<h&&(e=t/2,C=n(e),e=A?e:-e,t=0),y=b.normalize([d,b.rotate(x+e)]),A?(m=b.multiplyPoint(y,C.c1),E=b.multiplyPoint(y,C.c2),y=b.multiplyPoint(y,C.e)):(m=
b.multiplyPoint(y,C.c2),E=b.multiplyPoint(y,C.c1),y=b.multiplyPoint(y,C.s)),a.push([m.x,m.y,E.x,E.y,y.x,y.y]),x+=2*e;return a}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(e,t,b){function n(b,a){return Math.abs(b-a)<=1E-6*(Math.abs(b)+Math.abs(a))}function u(b,a,d,e){if(isFinite(b)){if(!isFinite(d))return b}else return d;a=Math.abs(a);e=Math.abs(e);return(a*b+e*d)/(a+e)}function q(c){c=b.normalize(c);var a=-c.xx-c.yy,d=c.xx*c.yy-c.xy*c.yx,e=Math.sqrt(a*
a-4*d),a=-(a+(0>a?-e:e))/2,d=d/a,e=c.xy/(a-c.xx),h=1,q=c.xy/(d-c.xx),s=1;n(a,d)&&(e=1,q=h=0,s=1);isFinite(e)||(e=1,h=(a-c.xx)/c.xy,isFinite(h)||(e=(a-c.yy)/c.yx,h=1,isFinite(e)||(e=1,h=c.yx/(a-c.yy))));isFinite(q)||(q=1,s=(d-c.xx)/c.xy,isFinite(s)||(q=(d-c.yy)/c.yx,s=1,isFinite(q)||(q=1,s=c.yx/(d-c.yy))));c=Math.sqrt(e*e+h*h);var t=Math.sqrt(q*q+s*s);if(!isFinite(e/=c))e=0;if(!isFinite(h/=c))h=0;if(!isFinite(q/=t))q=0;if(!isFinite(s/=t))s=0;return{value1:a,value2:d,vector1:{x:e,y:h},vector2:{x:q,
y:s}}}function s(b,a){var d=0>b.xx*b.yy||0<b.xy*b.yx?-1:1,e=a.angle1=(Math.atan2(b.yx,b.yy)+Math.atan2(-d*b.xy,d*b.xx))/2,d=Math.cos(e),e=Math.sin(e);a.sx=u(b.xx/d,d,-b.xy/e,e);a.sy=u(b.yy/d,d,b.yx/e,e);return a}function h(b,a){var d=0>b.xx*b.yy||0<b.xy*b.yx?-1:1,e=a.angle2=(Math.atan2(d*b.yx,d*b.xx)+Math.atan2(-b.xy,b.yy))/2,d=Math.cos(e),e=Math.sin(e);a.sx=u(b.xx/d,d,b.yx/e,e);a.sy=u(b.yy/d,d,-b.xy/e,e);return a}return e.decompose=function(c){var a=b.normalize(c);c={dx:a.dx,dy:a.dy,sx:1,sy:1,angle1:0,
angle2:0};if(n(a.xy,0)&&n(a.yx,0))return t.mixin(c,{sx:a.xx,sy:a.yy});if(n(a.xx*a.yx,-a.xy*a.yy))return s(a,c);if(n(a.xx*a.xy,-a.yx*a.yy))return h(a,c);var d,e=new b.Matrix2D(a);d=t.mixin(e,{dx:0,dy:0,xy:e.yx,yx:e.xy});e=q([a,d]);d=q([d,a]);e=new b.Matrix2D({xx:e.vector1.x,xy:e.vector2.x,yx:e.vector1.y,yy:e.vector2.y});d=new b.Matrix2D({xx:d.vector1.x,xy:d.vector1.y,yx:d.vector2.x,yy:d.vector2.y});a=new b.Matrix2D([b.invert(e),a,b.invert(d)]);s(d,c);a.xx*=c.sx;a.yy*=c.sy;h(e,c);a.xx*=c.sx;a.yy*=c.sy;
return t.mixin(c,{sx:a.xx,sy:a.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],function(e){e=e.bezierutils={};e.tAtLength=function(e,h){var c=0,a=6==e.length,d=0,g=0,m=a?n:q,t=function(n,q){for(var u=0,E=0;E<n.length-2;E+=2)u+=b(n[E],n[E+1],n[E+2],n[E+3]);E=a?b(e[0],e[1],e[4],e[5]):b(e[0],e[1],e[6],e[7]);u-E>q||d+u>h+q?(++g,u=m(n,0.5),t(u[0],q),Math.abs(d-h)<=q||t(u[1],q)):(d+=u,c+=1/(1<<g))};h&&t(e,0.5);return c};var t=e.computeLength=function(e){for(var h=6==e.length,c=0,a=0;a<e.length-
2;a+=2)c+=b(e[a],e[a+1],e[a+2],e[a+3]);a=h?b(e[0],e[1],e[4],e[5]):b(e[0],e[1],e[6],e[7]);0.1<c-a&&(e=h?n(e,0.5):u(e,0.5),c=t(e[0],h),c+=t(e[1],h));return c},b=e.distance=function(b,e,c,a){return Math.sqrt((c-b)*(c-b)+(a-e)*(a-e))},n=function(b,e){var c=1-e,a=c*c,d=e*e,g=b[0],m=b[1],n=b[2],q=b[3],t=b[4],u=b[5],E=a*g+2*c*e*n+d*t,a=a*m+2*c*e*q+d*u;return[[g,m,c*g+e*n,c*m+e*q,E,a],[E,a,c*n+e*t,c*q+e*u,t,u]]},u=function(b,e){var c=1-e,a=c*c,d=a*c,g=e*e,m=g*e,n=b[0],q=b[1],t=b[2],u=b[3],E=b[4],F=b[5],y=
b[6],I=b[7],L=d*n+3*a*e*t+3*c*g*E+m*y,d=d*q+3*a*e*u+3*c*g*F+m*I;return[[n,q,c*n+e*t,c*q+e*u,a*n+2*c*e*t+g*E,a*q+2*c*e*u+g*F,L,d],[L,d,a*t+2*c*e*E+g*y,a*u+2*c*e*F+g*I,c*E+e*y,c*F+e*I,y,I]]},q=e.splitBezierAtT=function(b,e){return 6==b.length?n(b,e):u(b,e)};return e})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(e,t,b){t.getObject("json",!0,b);b.json._slice=function(b,e,q,s){var h=b.length,c=[];q=q||h;e=0>e?Math.max(0,e+h):Math.min(h,
e);for(q=0>q?Math.max(0,q+h):Math.min(h,q);e<q;e+=s)c.push(b[e]);return c};b.json._find=function(b,e){function q(b){e&&(!0===e&&!(b instanceof Array)?s.push(b):b[e]&&s.push(b[e]));for(var a in b){var d=b[a];e?d&&"object"==typeof d&&q(d):s.push(d)}}var s=[];if(e instanceof Array){if(1==e.length)return b[e[0]];for(var h=0;h<e.length;h++)s.push(b[e[h]])}else q(b);return s};b.json._distinctFilter=function(b,e){for(var q=[],s={},h=0,c=b.length;h<c;++h){var a=b[h];e(a,h,b)&&("object"==typeof a&&a?a.__included||
(a.__included=!0,q.push(a)):s[a+typeof a]||(s[a+typeof a]=!0,q.push(a)))}h=0;for(c=q.length;h<c;++h)q[h]&&delete q[h].__included;return q};return b.json.query=function(b,e){function q(b){a=b+"("+a}function s(a,b,d,e,g,h,n,q){return c[q].match(/[\*\?]/)||"~"==n?"/^"+c[q].substring(1,c[q].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==n?"$/i":"$/")+".test("+b+")":a}var h=0,c=[];b=b.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(a){h+="["==
a?1:"]"==a?-1:0;return"]"==a&&0<h?"`]":'"'==a.charAt(0)||"'"==a.charAt(0)?"`"+(c.push(a)-1):a});var a="";b.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});b=b.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(a){return"."==a.charAt(0)?a:"@"==a?"$obj":(a.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+a}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(a,b,c){return(b=a.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?
(c="",a.match(/^\./)&&(q("dojox.json._find"),c=",true)"),q(b[1].match(/\=/)?"dojo.map":b[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter"),c+",function($obj){return "+b[2]+"})"):(b=a.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+b[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(a,b,c){return"var av\x3d "+c.replace(/\$obj/,"a")+",bv\x3d "+c.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==b?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==b?-1:
1)+";}\n"})+"return 0;})":(b=a.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?(q("dojox.json._slice"),","+(b[1]||0)+","+(b[2]||0)+","+(b[3]||1)+")"):a.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(q("dojox.json._find"),("."==a.charAt(1)?",'"+c+"'":a.match(/,/)?","+a:"")+")"):a}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,s).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(a,b,c,d,e,g,h,n){return s(a,d,e,g,h,n,c,b)});b=a+("$"==
b.charAt(0)?"":"$")+b.replace(/`([0-9]+|\])/g,function(a,b){return"]"==b?"]":c[b]});for(var d=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+b+"}"),g=0;g<arguments.length-1;g++)arguments[g]=arguments[g+1];return e?d.apply(this,arguments):d}})},"dojox/main":function(){define(["dojo/_base/kernel"],function(e){return e.dojox})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(e,t,b,n){e=e(null,{declaredClass:"esri.tasks.PrintParameters",
map:null,template:null,outSpatialReference:null,extraParameters:null});b("extend-esri")&&t.setObject("tasks.PrintParameters",e,n);return e})},"esri/layers/LabelLayer":function(){define("require dojo/_base/declare dojo/_base/lang dojo/number dojo/i18n!dojo/cldr/nls/number dojo/_base/array dojo/_base/connect dojo/has dojox/gfx/_base ../kernel ../lang ../graphic ../PopupInfo ./labelLayerUtils/DynamicLabelClass ./labelLayerUtils/StaticLabelClass ../symbols/TextSymbol ../symbols/ShieldLabelSymbol ../geometry/Extent ../geometry/Point ../geometry/webMercatorUtils ./GraphicsLayer ./LabelClass ../renderers/SimpleRenderer".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g,m,w,A,x,C,E,F,y,I,L,D){function G(a){return"sizeInfo"===a.type}e=t(I,{declaredClass:"esri.layers.LabelLayer",constructor:function(a){this.id="labels";this.featureLayers=[];this._featureLayerInfos=[];this._preparedLabels=[];this._engineType="STATIC";this._mapEventHandlers=[];a&&(a.id&&(this.id=a.id),a.mode&&(this._engineType="DYNAMIC"===a.mode.toUpperCase()?"DYNAMIC":"STATIC"))},_setMap:function(a){var c=this.inherited(arguments);this._map&&this._mapEventHandlers.push(this._map.on("extent-change",
b.hitch(this,"refresh")));this.refresh();return c},_unsetMap:function(){var a;for(a=0;a<this._mapEventHandlers.length;a++)s.disconnect(this._mapEventHandlers[a]);this.refresh();this.inherited(arguments)},setAlgorithmType:function(a){this._engineType=a&&"DYNAMIC"===a.toUpperCase()?"DYNAMIC":"STATIC";this.refresh()},addFeatureLayer:function(a,c,d,e){if(!this.getFeatureLayer(a.layerId)){var g=[];g.push(a.on("update-end",b.hitch(this,"refresh")));g.push(a.on("suspend",b.hitch(this,"refresh")));g.push(a.on("resume",
b.hitch(this,"refresh")));g.push(a.on("edits-complete",b.hitch(this,"refresh")));g.push(a.on("labeling-info-change",b.hitch(this,"refresh")));g.push(a.on("time-extent-change",b.hitch(this,"refresh")));g.push(a.on("show-labels-change",b.hitch(this,"refresh")));this._featureLayerInfos.push({FeatureLayer:a,LabelExpressionInfo:d,LabelingOptions:e,LabelRenderer:c,EventHandlers:g});this.featureLayers.push(a);this.refresh()}},getFeatureLayer:function(a){var b,c;for(b=0;b<this.featureLayers.length;b++)if(c=
this.featureLayers[b],void 0!==c&&c.id==a)return c;return null},removeFeatureLayer:function(a){var b;a=this.getFeatureLayer(a);if(void 0!==a&&(b=q.indexOf(this.featureLayers,a),-1<b)){this.featureLayers.splice(b,1);for(a=0;a<this._featureLayerInfos[b].EventHandlers.length;a++)s.disconnect(this._featureLayerInfos[b].EventHandlers[a]);this._featureLayerInfos.splice(b,1);this.refresh()}},removeAllFeatureLayers:function(){var a;for(a=0;a<this.featureLayers.length;a++){for(var b=0;b<this._featureLayerInfos[a].EventHandlers.length;b++)s.disconnect(this._featureLayerInfos[a].EventHandlers[b]);
this.featureLayers=[];this._featureLayerInfos=[]}this.refresh()},getFeatureLayers:function(){return this.featureLayers},getFeatureLayerInfo:function(a){var b,c;for(b=0;b<this.featureLayers.length;b++)if(c=this.featureLayers[b],void 0!==c&&c.id==a)return this._featureLayerInfos[b];return null},refresh:function(a){var b,c,d,e,g,h=[],m,n="DYNAMIC"===this._engineType?new w:new A;if(this._map){n.setMap(this._map,this);this._preparedLabels=[];for(a=0;a<this.featureLayers.length;a++)if(c=this.featureLayers[a],
c.visible&&c.showLabels&&c.visibleAtMapScale&&!c._suspended)if(b=this._featureLayerInfos[a],g=this._convertOptions(null),b.LabelRenderer){if(h=c.labelingInfo)if(m=h[0])e=this._getLabelExpression(m),g=this._convertOptions(m);d=b.LabelRenderer;b.LabelExpressionInfo&&(e=b.LabelExpressionInfo);b.LabelingOptions&&(g=this._convertOptions(null),void 0!==b.LabelingOptions.pointPriorities&&(h=b.LabelingOptions.pointPriorities,g.pointPriorities="above-center"==h||"AboveCenter"==h||"esriServerPointLabelPlacementAboveCenter"==
h?"AboveCenter":"above-left"==h||"AboveLeft"==h||"esriServerPointLabelPlacementAboveLeft"==h?"AboveLeft":"above-right"==h||"AboveRight"==h||"esriServerPointLabelPlacementAboveRight"==h?"AboveRight":"below-center"==h||"BelowCenter"==h||"esriServerPointLabelPlacementBelowCenter"==h?"BelowCenter":"below-left"==h||"BelowLeft"==h||"esriServerPointLabelPlacementBelowLeft"==h?"BelowLeft":"below-right"==h||"BelowRight"==h||"esriServerPointLabelPlacementBelowRight"==h?"BelowRight":"center-center"==h||"CenterCenter"==
h||"esriServerPointLabelPlacementCenterCenter"==h?"CenterCenter":"center-left"==h||"CenterLeft"==h||"esriServerPointLabelPlacementCenterLeft"==h?"CenterLeft":"center-right"==h||"CenterRight"==h||"esriServerPointLabelPlacementCenterRight"==h?"CenterRight":"AboveRight"),void 0!==b.LabelingOptions.lineLabelPlacement&&(g.lineLabelPlacement=b.LabelingOptions.lineLabelPlacement),void 0!==b.LabelingOptions.lineLabelPosition&&(g.lineLabelPosition=b.LabelingOptions.lineLabelPosition),void 0!==b.LabelingOptions.labelRotation&&
(g.labelRotation=b.LabelingOptions.labelRotation),void 0!==b.LabelingOptions.howManyLabels&&(g.howManyLabels=b.LabelingOptions.howManyLabels));d instanceof L&&(e=this._getLabelExpression(d),d=new D(d.symbol),g=this._convertOptions(d));this._addLabels(c,d,e,g)}else if(h=c.labelingInfo)for(b=h.length-1;0<=b;b--)if(m=h[b])d=new L(m instanceof L?m.toJson():m),e=this._getLabelExpression(m),g=this._convertOptions(m),this._addLabels(c,d,e,g);e=n._process(this._preparedLabels);this.clear();this.drawLabels(this._map,
e)}},drawLabels:function(a,b){this._scale=(a.extent.xmax-a.extent.xmin)/a.width;var c;for(c=0;c<b.length;c++){var d=b[c],e=d.x,h=d.y,m=d.text,n=d.angle,q=d.layer.labelSymbol;"polyline"==d.layer.geometry.type&&d.layer.options.labelRotation&&q.setAngle(n*(180/Math.PI));q.setText(m);d=e;q instanceof x&&(e=q.getHeight(),n=Math.sin(n),d-=0.25*e*this._scale*n,h-=0.33*e*this._scale);n=new g(new F(d,h,a.extent.spatialReference));n.setSymbol(q);this.add(n)}},_addLabels:function(a,b,c,d){var e,g,h,m;if(this._isWithinScaleRange(b.minScale,
b.maxScale)&&c&&""!==c){var n=this._map,q=!a.url&&!n.spatialReference.equals(a.spatialReference);for(e=0;e<a.graphics.length;e++)if(g=a.graphics[e],!1!==g.visible){h=g.geometry;if(q){if(!y.canProject(h,n))continue;h=y.project(h,n)}h&&(this._isWhere(b.where,g.attributes)&&this._isWithinScreenArea(h))&&(m=this._buildLabelText(c,g.attributes,a.fields,d),this._addLabel(m,b,a.renderer,g,d,h,n))}}},_isWithinScreenArea:function(a){a="point"===a.type?new E(a.x,a.y,a.x,a.y,a.spatialReference):a.getExtent();
if(void 0===a)return!1;a=this._intersects(this._map,a);return null===a||0===a.length?!1:!0},_isWithinScaleRange:function(a,b){var c=this._map.getScale();return 0<a&&c>=a||0<b&&c<=b?!1:!0},_isWhere:function(a,b){try{if(!a)return!0;if(a){var c=a.split(" ");if(3===c.length)return this._sqlEquation(b[c[0].substr(1,c[0].length-2)],c[1],c[2]);if(7===c.length){var d=this._sqlEquation(b[c[0].substr(1,c[0].length-2)],c[1],c[2]),e=c[3],g=this._sqlEquation(b[c[4].substr(1,c[4].length-2)],c[5],c[6]);switch(e){case "AND":return d&&
g;case "OR":return d||g}}}return!1}catch(h){}},_sqlEquation:function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1},_getSizeInfo:function(a){return a?a.sizeInfo||q.filter(a.visualVariables,G)[0]:null},_addLabel:function(a,d,e,g,h,m,n){var q,s,t,u;if(a&&""!==b.trim(a)&&d){a=a.replace(/\s+/g," ");q=d.getSymbol(g);q instanceof x?(q=
new x(q.toJson()),q.setVerticalAlignment("baseline"),q.setHorizontalAlignment("center")):q=q instanceof C?new C(q.toJson()):new x;q.setText(a);d.symbol=q;if(t=this._getProportionalSize(d.sizeInfo,g.attributes))q instanceof x?q.setSize(t):q instanceof C&&(q.setWidth(t),q.setHeight(t));u=t=0;if(e){s=e.getSymbol(g);var w=this._getSizeInfo(e),l;w&&(l=e.getSize(g,{sizeInfo:w,resolution:n.getResolutionInMeters()}));if(null!=l)t=u=l;else if(s)if("simplemarkersymbol"==s.type)u=t=s.size;else if("picturemarkersymbol"==
s.type)t=s.width,u=s.height;else if("simplelinesymbol"==s.type||"cartographiclinesymbol"==s.type)t=s.width}e={};e.graphic=g;e.options=h;e.geometry=m;e.labelRenderer=d;e.labelSymbol=q;e.labelWidth=q.getWidth()/2;e.labelHeight=q.getHeight()/2;e.symbolWidth=c.normalizedLength(t)/2;e.symbolHeight=c.normalizedLength(u)/2;e.text=a;e.angle=q.angle;this._preparedLabels.push(e)}},_buildLabelText:function(a,c,e,g){return a.replace(/{[^}]*}/g,function(a){var h,q=a;for(h=0;h<e.length;h++)if("{"+e[h].name+"}"==
a){var q=c[e[h].name],s=e[h].domain;if(s&&b.isObject(s)){if("codedValue"==s.type)for(a=0;a<s.codedValues.length;a++)s.codedValues[a].code==q&&(q=s.codedValues[a].name);else"range"==s.type&&(s.minValue<=q&&q<=s.maxValue)&&(q=s.name);break}s=e[h].type;if(g.fieldInfos){var t=g.fieldInfos;for(h=0;h<t.length;h++)if("{"+t[h].fieldName+"}"==a){a=t[h].format;if("esriFieldTypeDate"==s)(a="DateFormat"+m.prototype._dateFormats[a.dateFormat?a.dateFormat:"shortDate"])&&(q=d.substitute({myKey:q},"${myKey:"+a+"}"));
else if(("esriFieldTypeInteger"==s||"esriFieldTypeSingle"==s||"esriFieldTypeSmallInteger"==s||"esriFieldTypeLong"==s||"esriFieldTypeDouble"==s)&&a)q=n.format(q,{places:a.places}),a.digitSeparator||u.group&&(q=q.replace(RegExp("\\"+u.group,"g"),""));break}}break}else q="";return null===q?"":q})},_getLabelExpression:function(a){return a.labelExpressionInfo?a.labelExpressionInfo.value:this._validSyntax(a.labelExpression)?this._convertLabelExpression(a.labelExpression):""},_validSyntax:function(a){return/^(\s*\[[^\]]+\]\s*)+$/i.test(a)},
_convertLabelExpression:function(a){return a.replace(RegExp("\\[","g"),"{").replace(RegExp("\\]","g"),"}")},_getProportionalSize:function(a,b){if(!a)return null;var c=d.substitute(b,"${"+a.field+"}",{first:!0});return!a.minSize||!a.maxSize||!a.minDataValue||!a.maxDataValue||!c||0>=a.maxDataValue-a.minDataValue?null:(a.maxSize-a.minSize)/(a.maxDataValue-a.minDataValue)*(c-a.minDataValue)+a.minSize},_convertOptions:function(a){var b="shortDate",c=null,d=null,e="",g=!0;a&&(a.format&&(b=a.format.dateFormat,
c={places:a.format.places,digitSeparator:a.format.digitSeparator}),d=a.fieldInfos,e=a.labelPlacement);if("always-horizontal"==e||"esriServerPolygonPlacementAlwaysHorizontal"==e)g=!1;return{dateFormat:b,numberFormat:c,fieldInfos:d,pointPriorities:"above-center"==e||"esriServerPointLabelPlacementAboveCenter"==e?"AboveCenter":"above-left"==e||"esriServerPointLabelPlacementAboveLeft"==e?"AboveLeft":"above-right"==e||"esriServerPointLabelPlacementAboveRight"==e?"AboveRight":"below-center"==e||"esriServerPointLabelPlacementBelowCenter"==
e?"BelowCenter":"below-left"==e||"esriServerPointLabelPlacementBelowLeft"==e?"BelowLeft":"below-right"==e||"esriServerPointLabelPlacementBelowRight"==e?"BelowRight":"center-center"==e||"esriServerPointLabelPlacementCenterCenter"==e?"CenterCenter":"center-left"==e||"esriServerPointLabelPlacementCenterLeft"==e?"CenterLeft":"center-right"==e||"esriServerPointLabelPlacementCenterRight"==e?"CenterRight":"AboveRight",lineLabelPlacement:"above-start"==e||"below-start"==e||"center-start"==e?"PlaceAtStart":
"above-end"==e||"below-end"==e||"center-end"==e?"PlaceAtEnd":"PlaceAtCenter",lineLabelPosition:"above-after"==e||"esriServerLinePlacementAboveAfter"==e||"above-along"==e||"esriServerLinePlacementAboveAlong"==e||"above-before"==e||"esriServerLinePlacementAboveBefore"==e||"above-start"==e||"esriServerLinePlacementAboveStart"==e||"above-end"==e||"esriServerLinePlacementAboveEnd"==e?"Above":"below-after"==e||"esriServerLinePlacementBelowAfter"==e||"below-along"==e||"esriServerLinePlacementBelowAlong"==
e||"below-before"==e||"esriServerLinePlacementBelowBefore"==e||"below-start"==e||"esriServerLinePlacementBelowStart"==e||"below-end"==e||"esriServerLinePlacementBelowEnd"==e?"Below":"center-after"==e||"esriServerLinePlacementCenterAfter"==e||"center-along"==e||"esriServerLinePlacementCenterAlong"==e||"center-before"==e||"esriServerLinePlacementCenterBefore"==e||"center-start"==e||"esriServerLinePlacementCenterStart"==e||"center-end"==e||"esriServerLinePlacementCenterEnd"==e?"OnLine":"Above",labelRotation:g,
howManyLabels:"OneLabel"}}});h("extend-esri")&&b.setObject("layers.LabelLayer",e,a);return e})},"esri/layers/labelLayerUtils/DynamicLabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../GraphicsLayer ../../geometry/Extent ../../geometry/Polygon".split(" "),function(e,t,b,n,u,q,s){e=e(u,{declaredClass:"esri.layers.labelLayerUtils.DynamicLabelClass",constructor:function(){this._preparedLabels=[];this._placedLabels=[];this._extent=null;this._y1=this._x1=this._y0=
this._x0=this._ymax=this._ymin=this._xmax=this._xmin=0;this._scale=1},setMap:function(b,c){this._labelLayer=c;this._xmin=b.extent.xmin;this._xmax=b.extent.xmax;this._ymin=b.extent.ymin;this._ymax=b.extent.ymax;this._scale=(this._xmax-this._xmin)/b.width},_process:function(b){this._preparedLabels=b;this._placedLabels=[];var c;for(b=this._preparedLabels.length-1;0<=b;b--){var a=this._preparedLabels[b],d=Math.min(a.labelWidth,a.labelHeight),e=a.labelWidth+0*d,d=a.labelHeight+0*d,m=(c=a.options)&&void 0!==
c.lineLabelPlacement?c.lineLabelPlacement:"PlaceAtCenter",n=c&&void 0!==c.lineLabelPosition?c.lineLabelPosition:"Above",q=c&&void 0!==c.pointPriorities?c.pointPriorities:"AboveRight",s=[2,2,1,3,0,2,3,3,2];"AboveLeft"==q?s=[1,2,2,2,0,3,2,3,3]:"AboveCenter"==q?s=[2,1,2,2,0,2,3,3,3]:"AboveRight"==q?s=[2,2,1,3,0,2,3,3,2]:"CenterLeft"==q?s=[2,2,3,1,0,3,2,2,3]:"CenterCenter"==q?s=[0,0,0,0,1,0,0,0,0]:"CenterRight"==q?s=[3,2,2,3,0,1,3,2,2]:"BelowLeft"==q?s=[2,3,3,2,0,3,1,2,2]:"BelowCenter"==q?s=[3,3,3,2,
0,2,2,1,2]:"BelowRight"==q&&(s=[3,3,2,3,0,2,2,2,1]);var t=c&&void 0!==c.labelRotation?c.labelRotation:!0,q=a.angle*(Math.PI/180);c=c&&void 0!==c.howManyLabels?c.howManyLabels:"OneLabel";if("point"==a.geometry.type)this._generatePointPositions(a,a.geometry.x,a.geometry.y,a.text,q,e,d,a.symbolWidth,a.symbolHeight,s);else if("multipoint"==a.geometry.type){m=a.geometry;for(n=0;n<m.points.length;n++)this._generatePointPositions(a,m.points[n][0],m.points[n][1],a.text,q,e,d,a.symbolWidth,a.symbolHeight,
s)}else"polyline"==a.geometry.type?this._generateLinePositions(a,a.geometry,a.text,e,d,2*a.symbolHeight+d,m,n,t):"polygon"==a.geometry.type&&this._generatePolygonPositions(a,c,a.geometry,a.text,q,e,d)}return this._placedLabels},_generatePointPositions:function(b,c,a,d,e,m,n,q,s,t){q=(q+m)*this._scale;s=(s+n)*this._scale;var u,F;for(u=1;3>=u;u++)for(F=1;9>=F;F++)if(t[F-1]==u)switch(F){case 1:if(this._findPlace(b,d,c-q,a+s,e,m,n))return;break;case 2:if(this._findPlace(b,d,c,a+s,e,m,n))return;break;
case 3:if(this._findPlace(b,d,c+q,a+s,e,m,n))return;break;case 4:if(this._findPlace(b,d,c-q,a,e,m,n))return;break;case 5:if(this._findPlace(b,d,c,a,e,m,n))return;break;case 6:if(this._findPlace(b,d,c+q,a,e,m,n))return;break;case 7:if(this._findPlace(b,d,c-q,a-s,e,m,n))return;break;case 8:if(this._findPlace(b,d,c,a-s,e,m,n))return;break;case 9:if(this._findPlace(b,d,c+q,a-s,e,m,n))return}},_generateLinePositions:function(b,c,a,d,e,m,n,q,s){var t=d*this._scale*d*this._scale,u,F,y;for(u=0;u<c.paths.length;u++){var I=
c.paths[u],L=I.length,D=Math.floor((L-1)/2),G=0!==(L-1)%2?1:-1;"PlaceAtStart"==n&&(D=0,G=1);"PlaceAtEnd"==n&&(D=L-2,G=-1);for(;0<=D&&D<L-1;){for(F=D;F<L;F++){var N=I[D][0],P=I[D][1],K=I[F][0]-N,R=I[F][1]-P;if(K*K+R*R>t){for(var M=Math.atan2(R,K);M>Math.PI/2;)M-=Math.PI;for(;M<-(Math.PI/2);)M+=Math.PI;var T=Math.sin(M),U=Math.cos(M),V=0,W=0;"Above"==q&&(V=m*T*this._scale,W=m*U*this._scale);"Below"==q&&(V=-m*T*this._scale,W=-m*U*this._scale);if(1==F-D){if(this._clipLine(N,P,I[F][0],I[F][1])&&(N=this._x1-
this._x0,y=this._y1-this._y0,N*N+y*y>t&&(F=Math.atan2(y,N),K=d/2+2*e,P=K*this._scale*Math.cos(F),K=K*this._scale*Math.sin(F),"PlaceAtStart"==n?(N=this._x0+P,y=this._y0+K):"PlaceAtEnd"==n?(N=this._x1-P,y=this._y1-K):(N=this._x0+N/2,y=this._y0+y/2),this._findPlace(b,a,N-V,y+W,s?-F:0,d,e))))return}else{var v=0;for(y=D;y<=F;y++)v=Math.max(v,Math.abs((I[y][1]-P)*U-(I[y][0]-N)*T));if(v<e&&this._findPlace(b,a,N+K/2-V,P+R/2+W,s?-M:0,d,e))return}break}}D+=G}}},_generatePolygonPositions:function(b,c,a,d,e,
m,n){var q;if("ManyLabels"==c)for(c=0;c<a.rings.length;c++)q=a.rings[c],s.prototype.isClockwise(q)&&(q=this._findCentroid(q,this._xmin,this._ymin,this._xmax,this._ymax),this._findPlace(b,d,q[0],q[1],e,m,n));else{q=this._findCentroidForFeature(a,this._xmin,this._ymin,this._xmax,this._ymax);var t=q[1],u=0;for(c=0;10>c;c++){u+=n/4;q=this._findCentroidForFeature(a,this._xmin,t+(u-n/4),this._xmax,t+(u+n/4));if(this._findPlace(b,d,q[0],q[1],e,m,n))break;q=this._findCentroidForFeature(a,this._xmin,t-(u+
n/4),this._xmax,t-(u-n/4));if(this._findPlace(b,d,q[0],q[1],e,m,n))break}}},_findCentroid:function(b,c,a,d,e){var m=b.length,n=[0,0],q=0,s=b[0][0],t=b[0][1];s>d&&(s=d);s<c&&(s=c);t>e&&(t=e);t<a&&(t=a);for(var u=1;u<m-1;u++){var F=b[u][0],y=b[u][1],I=b[u+1][0],L=b[u+1][1];F>d&&(F=d);F<c&&(F=c);y>e&&(y=e);y<a&&(y=a);I>d&&(I=d);I<c&&(I=c);L>e&&(L=e);L<a&&(L=a);var D=(F-s)*(L-t)-(I-s)*(y-t);n[0]+=D*(s+F+I);n[1]+=D*(t+y+L);q+=D}n[0]/=3*q;n[1]/=3*q;if(isNaN(n[0])||isNaN(n[1]))return n;a=[];this._fillBuffer(b,
a,n);n[0]=this._sortBuffer(a,n[0],c,d);return n},_findCentroidForFeature:function(b,c,a,d,e){for(var m,n=0,q=[0,0],s=0;s<b.rings.length;s++){var t=b.rings[s],u=t.length,F=t[0][0],y=t[0][1];F>d&&(F=d);F<c&&(F=c);y>e&&(y=e);y<a&&(y=a);for(m=1;m<u-1;m++){var I=t[m][0],L=t[m][1],D=t[m+1][0],G=t[m+1][1];I>d&&(I=d);I<c&&(I=c);L>e&&(L=e);L<a&&(L=a);D>d&&(D=d);D<c&&(D=c);G>e&&(G=e);G<a&&(G=a);var N=(I-F)*(G-y)-(D-F)*(L-y);q[0]+=N*(F+I+D);q[1]+=N*(y+L+G);n+=N}}q[0]/=3*n;q[1]/=3*n;if(isNaN(q[0])||isNaN(q[1]))return q;
a=[];for(m=0;m<b.rings.length;m++)this._fillBuffer(b.rings[m],a,q);q[0]=this._sortBuffer(a,q[0],c,d);return q},_fillBuffer:function(b,c,a){for(var d=b.length-1,e=b[0][1]>=b[d][1]?1:-1,m=0;m<=d;m++){var n=m,q=m+1;m==d&&(q=0);var s=b[n][0],n=b[n][1],t=b[q][0],q=b[q][1],u=q>=n?1:-1;if(n<=a[1]&&a[1]<=q||q<=a[1]&&a[1]<=n)a[1]!=n&&a[1]!=q?(c.push((a[1]-n)*(t-s)/(q-n)+s),e=u):a[1]==n&&a[1]!=q?(e!=u&&c.push(s),e=u):a[1]!=n&&a[1]==q?(c.push(t),e=u):a[1]==n&&a[1]==q&&(1==e&&c.push(s),c.push(t),e=u)}},_sortBuffer:function(b,
c,a,d){var e=b.length;b.sort();if(0<e){for(var m=0,n=c=0;n<e-1;n+=2){var q=Math.abs(b[n+1]-b[n]);!(b[n]<=a&&b[n+1]<=a)&&(!(b[n]>=d&&b[n+1]>=d)&&q>m)&&(m=q,c=n)}e=b[c];b=b[c+1];e>d&&(e=d);e<a&&(e=a);b>d&&(b=d);b<a&&(b=a);c=(e+b)/2}return c},_findPlace:function(b,c,a,d,e,m,n){if(isNaN(a)||isNaN(d))return!1;for(var t=0;t<this._placedLabels.length;t++){var u=this._placedLabels[t].angle,C=this._placedLabels[t].width*this._scale,E=this._placedLabels[t].height*this._scale,F=this._placedLabels[t].x-a,y=this._placedLabels[t].y-
d;if(0===e&&0===u){if(this._findPlace2(-m*this._scale,-n*this._scale,m*this._scale,n*this._scale,F-C,y-E,F+C,y+E))return!1}else{var I=new q(-m*this._scale,-n*this._scale,m*this._scale,n*this._scale,null),L=0,D=1;0!==e&&(L=Math.sin(e),D=Math.cos(e));var G=F*D-y*L,F=F*L+y*D,u=u-e,L=Math.sin(u),D=Math.cos(u),N=-C*D- -E*L,y=-C*L+-E*D,u=+C*D- -E*L,P=+C*L+-E*D,C=G+N,E=F-y,L=G+u,D=F-P,N=G-N,y=F+y,G=G-u,F=F+P,u=new s;u.addRing([[C,E],[L,D],[N,y],[G,F],[C,E]]);if(I.intersects(u))return!1}}for(;e>Math.PI/2;)e-=
Math.PI;for(;e<-(Math.PI/2);)e+=Math.PI;t={};t.layer=b;t.text=c;t.angle=e;t.x=a;t.y=d;t.width=m;t.height=n;this._placedLabels.push(t);return!0},_findPlace2:function(b,c,a,d,e,m,n,q){return(b>=e&&b<=n||a>=e&&a<=n||b<=e&&a>=n)&&(c>=m&&c<=q||d>=m&&d<=q||c<=m&&d>=q)?!0:!1},_clipLine:function(b,c,a,d){for(var e=this._code(b,c),m=this._code(a,d);0!==e||0!==m;){if(0!==(e&m))return!1;var n=a-b,q=d-c;0!==e?(b<this._xmin?(c+=q*(this._xmin-b)/n,b=this._xmin):b>this._xmax?(c+=q*(this._xmax-b)/n,b=this._xmax):
c<this._ymin?(b+=n*(this._ymin-c)/q,c=this._ymin):c>this._ymax&&(b+=n*(this._ymax-c)/q,c=this._ymax),e=this._code(b,c)):(a<this._xmin?(d+=q*(this._xmin-a)/n,a=this._xmin):a>this._xmax?(d+=q*(this._xmax-a)/n,a=this._xmax):d<this._ymin?(a+=n*(this._ymin-d)/q,d=this._ymin):d>this._ymax&&(a+=n*(this._ymax-d)/q,d=this._ymax),m=this._code(a,d))}this._x0=b;this._y0=c;this._x1=a;this._y1=d;return!0},_code:function(b,c){var a=0;b<this._xmin&&(a+=8);b>this._xmax&&(a+=4);c<this._ymin&&(a+=2);c>this._ymax&&(a+=
1);return a}});b("extend-esri")&&t.setObject("layers.labelLayerUtils.DynamicLabelClass",e,n);return e})},"esri/layers/labelLayerUtils/StaticLabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../GraphicsLayer ../../geometry/Extent ../../geometry/Point ../../geometry/Polygon".split(" "),function(e,t,b,n,u,q,s,h){return e(u,{declaredClass:"esri.layers.labelLayerUtils.StaticLabel",constructor:function(){this._preparedLabels=[];this._placedLabels=[];this._extent=null;
this._ymax=this._ymin=this._xmax=this._xmin=0;this._scale=1;this._LINE_STEP_CONST=1.5;this._POLYGON_X_STEP_CONST=1;this._POLYGON_Y_STEP_CONST=0.75;this._OVERRUN=2},setMap:function(b,a){this._labelLayer=a;this._map=b;this._xmin=b.extent.xmin;this._xmax=b.extent.xmax;this._ymin=b.extent.ymin;this._ymax=b.extent.ymax;this._scale=(this._xmax-this._xmin)/b.width},_process:function(b){var a,d,e,m,n,q,t,u,E;this._preparedLabels=b;this._placedLabels=[];for(b=this._preparedLabels.length-1;0<=b;b--){a=this._preparedLabels[b];
n=a.labelWidth;q=a.labelHeight;u=(t=a.options)&&t.lineLabelPlacement?t.lineLabelPlacement:"PlaceAtCenter";E=t&&t.lineLabelPosition?t.lineLabelPosition:"Above";d=t&&t.labelRotation?t.labelRotation:!0;e=a.angle*(Math.PI/180);m=t&&t.howManyLabels?t.howManyLabels:"OneLabel";var F=[];if("point"===a.geometry.type)this._generatePointPositions(a.geometry.x,a.geometry.y,a.text,e,n,q,a.symbolWidth,a.symbolHeight,t,F);else if("multipoint"===a.geometry.type)for(d=0;d<a.geometry.points.length;d++)this._generatePointPositions(a.geometry.points[d][0],
a.geometry.points[d][1],a.text,e,n,q,a.symbolWidth,a.symbolHeight,t,F);else if("polyline"===a.geometry.type)if("PlaceAtStart"===u)this._generateLinePositionsPlaceAtStart(a.geometry,!0,a.text,n,q,2*a.symbolHeight+q,u,E,d,F);else if("PlaceAtEnd"===u)this._generateLinePositionsPlaceAtEnd(a.geometry,!0,a.text,n,q,2*a.symbolHeight+q,u,E,d,F);else{t=[];var y=a.geometry.getExtent(),I=this._map.extent;if(y.getWidth()<n*this._scale/this._OVERRUN&&y.getHeight()<n*this._scale/this._OVERRUN)continue;else 0.5*
y.getWidth()<I.getWidth()&&0.5*y.getHeight()<I.getHeight()?(I=0.1*Math.min(this._map.width,this._map.height)*this._scale,this._generateLinePositionsPlaceAtCenter(a.geometry,!1,I,a.text,n,q,2*a.symbolHeight+q,u,E,d,t)):(I=this._LINE_STEP_CONST*Math.min(this._map.width,this._map.height)*this._scale,this._generateLinePositionsPlaceAtCenter(a.geometry,!0,I,a.text,n,q,2*a.symbolHeight+q,u,E,d,t));this._postSorting(y,t,F)}else if("polygon"===a.geometry.type)for(d=0;d<a.geometry.rings.length;d++)u=a.geometry.rings[d],
h.prototype.isClockwise(u)&&(E=this._calcRingExtent(u),E.xmax-E.xmin<4*n*this._scale/this._OVERRUN&&E.ymax-E.ymin<4*q*this._scale/this._OVERRUN||this._generatePolygonPositionsForManyLabels(u,a.geometry.spatialReference,a.text,e,n,q,F));for(d=0;d<F.length&&!(u=F[d].x,E=F[d].y,void 0!==F[d].angle&&(e=F[d].angle),t=this._findPlace(a,a.text,u,E,e,n,q),"OneLabel"===m&&t&&this._labelLayer._isWithinScreenArea(new s(u,E,a.geometry.spatialReference)));d++);}return this._placedLabels},_generatePointPositions:function(b,
a,d,e,h,n,q,s,t,u){d=t&&t.pointPriorities?t.pointPriorities:"AboveRight";h=(q+h)*this._scale;n=(s+n)*this._scale;switch(d.toLowerCase()){case "aboveleft":b-=h;a+=n;break;case "abovecenter":a+=n;break;case "aboveright":b+=h;a+=n;break;case "centerleft":b-=h;break;case "centercenter":break;case "centerright":b+=h;break;case "belowleft":b-=h;a-=n;break;case "belowcenter":a-=n;break;case "belowright":b+=h;a-=n;break;default:return}u.push({x:b,y:a})},_generateLinePositionsPlaceAtStart:function(b,a,d,e,
h,n,q,s,t,u){q=e*this._scale;var F=this._LINE_STEP_CONST*Math.min(this._map.width,this._map.height)*this._scale,y,I,L,D,G,N,P,K;for(y=0;y<b.paths.length;y++){var R=b.paths[y],M=q,T=0;for(I=0;I<R.length-1;I++)L=R[I][0],D=R[I][1],G=R[I+1][0],N=R[I+1][1],P=G-L,K=N-D,P=Math.sqrt(P*P+K*K),T+P>M?(T=this._generatePositionsOnLine(b.spatialReference,a,M,F,T,L,D,G,N,d,e,h,n,s,t,u),M=F):T+=P}},_generateLinePositionsPlaceAtEnd:function(b,a,d,e,h,n,q,s,t,u){q=e*this._scale;var F=this._LINE_STEP_CONST*Math.min(this._map.width,
this._map.height)*this._scale,y,I,L,D,G,N,P,K;for(y=0;y<b.paths.length;y++){var R=b.paths[y],M=q,T=0;for(I=R.length-2;0<=I;I--)L=R[I+1][0],D=R[I+1][1],G=R[I][0],N=R[I][1],P=G-L,K=N-D,P=Math.sqrt(P*P+K*K),T+P>M?(T=this._generatePositionsOnLine(b.spatialReference,a,M,F,T,L,D,G,N,d,e,h,n,s,t,u),M=F):T+=P}},_generateLinePositionsPlaceAtCenter:function(b,a,d,e,h,n,q,s,t,u,F){var y,I,L,D,G,N,P,K;for(s=0;s<b.paths.length;s++){var R=b.paths[s];if(!(2>R.length)){var M=0;for(y=0;y<R.length-1;y++)L=R[y][0],
D=R[y][1],G=R[y+1][0],N=R[y+1][1],P=G-L,K=N-D,M+=Math.sqrt(P*P+K*K);var T=0;for(y=0;y<R.length-1;y++){L=R[y][0];D=R[y][1];G=R[y+1][0];N=R[y+1][1];P=G-L;K=N-D;P=Math.sqrt(P*P+K*K);if(T+P>M/2)break;T+=P}y==R.length-1&&y--;L=R[y][0];D=R[y][1];G=R[y+1][0];N=R[y+1][1];P=G-L;K=N-D;T=M/2-T;K=Math.atan2(K,P);P=L+T*Math.cos(K);K=D+T*Math.sin(K);L=this._angleAndShifts(L,D,G,N,q,t,u);F.push({x:P+L.shiftX,y:K+L.shiftY,angle:L.angle});var M=P,U=K,T=0;for(I=y;I<R.length-1;I++)I==y?(L=M,D=U):(L=R[I][0],D=R[I][1]),
G=R[I+1][0],N=R[I+1][1],P=G-L,K=N-D,P=Math.sqrt(P*P+K*K),T=T+P>d?this._generatePositionsOnLine(b.spatialReference,a,d,d,T,L,D,G,N,e,h,n,q,t,u,F):T+P;T=0;for(I=y;0<=I;I--)I==y?(L=M,D=U):(L=R[I+1][0],D=R[I+1][1]),G=R[I][0],N=R[I][1],P=G-L,K=N-D,P=Math.sqrt(P*P+K*K),T=T+P>d?this._generatePositionsOnLine(b.spatialReference,a,d,d,T,L,D,G,N,e,h,n,q,t,u,F):T+P}}},_generatePositionsOnLine:function(b,a,d,e,h,n,s,t,u,E,F,y,I,L,D,G){E=Math.atan2(u-s,t-n);F=n;y=s;var N=F,P=y;do if(h=d-h,F+=h*Math.cos(E),y+=h*
Math.sin(E),this._belongs(F,y,n,s,t,u))h=this._angleAndShifts(n,s,t,u,I,L,D),d=F+h.shiftX,P=y+h.shiftY,a?this._labelLayer._isWithinScreenArea(new q(d,P,d,P,b))&&G.push({x:d,y:P,angle:h.angle}):G.push({x:d,y:P,angle:h.angle}),N=F,P=y,h=0,d=e;else return b=t-N,u-=P,Math.sqrt(b*b+u*u);while(1)},_postSorting:function(b,a,d){if(b&&0<a.length){var e=0.5*(b.xmin+b.xmax);b=0.5*(b.ymin+b.ymax);for(var h=a[0].x,n=a[0].y,q=Math.sqrt((h-e)*(h-e)+(n-b)*(n-b)),s=a[0].angle,t=0;t<a.length;t++){var u=a[t].x,F=a[t].y,
y=Math.sqrt((u-e)*(u-e)+(F-b)*(F-b));y<q&&(h=u,n=F,q=y,s=a[t].angle)}d.push({x:h,y:n,angle:s})}},_belongs:function(b,a,d,e,h,n){if(h==d&&n==e)return!1;if(h>d){if(b>h||b<d)return!1}else if(b<h||b>d)return!1;if(n>e){if(a>n||a<e)return!1}else if(a<n||a>e)return!1;return!0},_angleAndShifts:function(b,a,d,e,h,n,q){for(b=Math.atan2(e-a,d-b);b>Math.PI/2;)b-=Math.PI;for(;b<-(Math.PI/2);)b+=Math.PI;e=Math.sin(b);var s=Math.cos(b);d=a=0;"Above"==n&&(a=h*e*this._scale,d=h*s*this._scale);"Below"==n&&(a=-h*e*
this._scale,d=-h*s*this._scale);h=[];h.angle=q?-b:0;h.shiftX=-a;h.shiftY=d;return h},_generatePolygonPositionsForManyLabels:function(b,a,d,e,h,n,s){e=this._calcRingExtent(b);if(0.75*(e.xmax-e.xmin)>this._map.width*this._scale||0.75*(e.ymax-e.ymin)>this._map.height*this._scale){var t=this._findCentroidForRing(b);n=this._map.width*this._scale<e.xmax-e.xmin?this._POLYGON_X_STEP_CONST*this._map.width*this._scale:this._POLYGON_X_STEP_CONST*(e.xmax-e.xmin);h=this._map.height*this._scale<e.ymax-e.ymin?this._POLYGON_Y_STEP_CONST*
this._map.height*this._scale:this._POLYGON_Y_STEP_CONST*(e.ymax-e.ymin);var u=t[0]-Math.round((t[0]-e.xmin)/n)*n,E=t[1]-Math.round((t[1]-e.ymin)/h)*h,F,t=!0;for(F=E;F<e.ymax;F+=h)if(t=!t,!(F<this._ymin||F>this._ymax))for(E=u+(t?0:n/2);E<e.xmax;E+=n)this._labelLayer._isWithinScreenArea(new q(E,F,E,F,a))&&this._isPointWithinRing(d,b,E,F)&&s.push({x:E,y:F})}else{t=this._findCentroidForRing(b);for(e=0;10>e;e++)if(h=t[0],u=t[1]+(e%2?-1:1)*Math.floor(e/2)*n*this._scale,this._labelLayer._isWithinScreenArea(new q(h,
u,h,u,a))&&this._isPointWithinRing(d,b,h,u)){s.push({x:h,y:u});break}}},_calcRingExtent:function(b){var a,d;d=new q;for(a=0;a<b.length-1;a++){var e=b[a][0],h=b[a][1];if(void 0===d.xmin||e<d.xmin)d.xmin=e;if(void 0===d.ymin||h<d.ymin)d.ymin=h;if(void 0===d.xmax||e>d.xmax)d.xmax=e;if(void 0===d.ymax||h>d.ymax)d.ymax=h}return d},_isPointWithinPolygon:function(b,a,d,e){var h;for(h=0;h<a.rings.length;h++)if(this._isPointWithinRing(b,a.rings[h],d,e))return!0;return!1},_isPointWithinRing:function(b,a,d,
e){var h,n,q,s,t=[],u=a.length;for(b=0;b<u-1;b++)if(h=a[b][0],n=a[b][1],q=a[b+1][0],s=a[b+1][1],!(h==q&&n==s)){if(n==s)if(e==n)t.push(h);else continue;h==q?(n<s&&(e>=n&&e<s)&&t.push(h),n>s&&(e<=n&&e>s)&&t.push(h)):(n=(q-h)/(s-n)*(e-n)+h,h<q&&(n>=h&&n<q)&&t.push(n),h>q&&(n<=h&&n>q)&&t.push(n))}t.sort(function(a,b){return a-b});for(b=0;b<t.length-1;b++)if(h=t[b],q=t[b+1],d>=h&&d<q)if(b%2)break;else return!0;return!1},_findCentroidForRing:function(b){for(var a=b.length,d=[0,0],e=0,h=b[0][0],n=b[0][1],
q=1;q<a-1;q++){var s=b[q][0],t=b[q][1],u=b[q+1][0],F=b[q+1][1],y=(s-h)*(F-n)-(u-h)*(t-n);d[0]+=y*(h+s+u);d[1]+=y*(n+t+F);e+=y}d[0]/=3*e;d[1]/=3*e;return d},_findCentroidForFeature:function(b){for(var a=0,d=[0,0],e=0;e<b.rings.length;e++)for(var h=b.rings[e],n=h.length,q=h[0][0],s=h[0][1],t=1;t<n-1;t++){var u=h[t][0],F=h[t][1],y=h[t+1][0],I=h[t+1][1],L=(u-q)*(I-s)-(y-q)*(F-s);d[0]+=L*(q+u+y);d[1]+=L*(s+F+I);a+=L}d[0]/=3*a;d[1]/=3*a;return d},_findPlace:function(b,a,d,e,m,n,s){if(isNaN(d)||isNaN(e))return!1;
for(var t=0;t<this._placedLabels.length;t++){var u=this._placedLabels[t].angle,E=this._placedLabels[t].width*this._scale,F=this._placedLabels[t].height*this._scale,y=this._placedLabels[t].x-d,I=this._placedLabels[t].y-e;if(0===m&&0===u){if(this._findPlace2(-n*this._scale,-s*this._scale,n*this._scale,s*this._scale,y-E,I-F,y+E,I+F))return!1}else{var L=new q(-n*this._scale,-s*this._scale,n*this._scale,s*this._scale,null),D=0,G=1;0!==m&&(D=Math.sin(m),G=Math.cos(m));var N=y*G-I*D,y=y*D+I*G,u=u-m,D=Math.sin(u),
G=Math.cos(u),P=-E*G- -F*D,I=-E*D+-F*G,u=+E*G- -F*D,K=+E*D+-F*G,E=N+P,F=y-I,D=N+u,G=y-K,P=N-P,I=y+I,N=N-u,y=y+K,u=new h;u.addRing([[E,F],[D,G],[P,I],[N,y],[E,F]]);if(L.intersects(u))return!1}}for(;m>Math.PI/2;)m-=Math.PI;for(;m<-(Math.PI/2);)m+=Math.PI;t={};t.layer=b;t.text=a;t.angle=m;t.x=d;t.y=e;t.width=n;t.height=s;this._placedLabels.push(t);return!0},_findPlace2:function(b,a,d,e,h,n,q,s){return(b>=h&&b<=q||d>=h&&d<=q||b<=h&&d>=q)&&(a>=n&&a<=s||e>=n&&e<=s||a<=n&&e>=s)?!0:!1}})})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),
function(e,t,b,n,u,q,s,h,c,a,d,g){function m(a,c){return b.doc.createElementNS?b.doc.createElementNS(a,c):b.doc.createElement(c)}function w(a){return A.useSvgWeb?b.doc.createTextNode(a,!0):b.doc.createTextNode(a)}var A=a.svg={};A.useSvgWeb="undefined"!=typeof window.svgweb;var x=navigator.userAgent,C=t("ios"),E=t("android"),F=t("chrome")||E&&4<=E?"auto":"optimizeLegibility";A.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};A.getRef=function(a){return!a||"none"==a?null:
a.match(/^url\(#.+\)$/)?n.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?n.byId(a.slice(1)):null};A.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var y=0;A.Shape=u("dojox.gfx.svg.Shape",d.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=A.getRef(a))&&a.parentNode.removeChild(a)}if(this.clip&&
(a=this.rawNode.getAttribute("clip-path")))(a=n.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);d.Shape.prototype.destroy.apply(this,arguments)},setFill:function(b){if(!b)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var c,d=function(a){this.setAttribute(a,c[a].toFixed(8))};if("object"==typeof b&&"type"in b){switch(b.type){case "linear":c=a.makeParameters(a.defaultLinearGradient,b);b=this._setFillObject(c,"linearGradient");
q.forEach(["x1","y1","x2","y2"],d,b);break;case "radial":c=a.makeParameters(a.defaultRadialGradient,b);b=this._setFillObject(c,"radialGradient");q.forEach(["cx","cy","r"],d,b);break;case "pattern":c=a.makeParameters(a.defaultPattern,b),b=this._setFillObject(c,"pattern"),q.forEach(["x","y","width","height"],d,b)}this.fillStyle=c;return this}this.fillStyle=c=a.normalizeColor(b);this.rawNode.setAttribute("fill",c.toCss());this.rawNode.setAttribute("fill-opacity",c.a);this.rawNode.setAttribute("fill-rule",
"evenodd");return this},setStroke:function(b){var d=this.rawNode;if(!b)return this.strokeStyle=null,d.setAttribute("stroke","none"),d.setAttribute("stroke-opacity",0),this;if("string"==typeof b||e.isArray(b)||b instanceof c)b={color:b};b=this.strokeStyle=a.makeParameters(a.defaultStroke,b);b.color=a.normalizeColor(b.color);if(b){d.setAttribute("stroke",b.color.toCss());d.setAttribute("stroke-opacity",b.color.a);d.setAttribute("stroke-width",b.width);d.setAttribute("stroke-linecap",b.cap);"number"==
typeof b.join?(d.setAttribute("stroke-linejoin","miter"),d.setAttribute("stroke-miterlimit",b.join)):d.setAttribute("stroke-linejoin",b.join);var g=b.style.toLowerCase();g in A.dasharray&&(g=A.dasharray[g]);if(g instanceof Array){var g=e._toArray(g),h;for(h=0;h<g.length;++h)g[h]*=b.width;if("butt"!=b.cap){for(h=0;h<g.length;h+=2)g[h]-=b.width,1>g[h]&&(g[h]=1);for(h=1;h<g.length;h+=2)g[h]+=b.width}g=g.join(",")}d.setAttribute("stroke-dasharray",g);d.setAttribute("dojoGfxStrokeStyle",b.style)}return this},
_getParentSurface:function(){for(var b=this.parent;b&&!(b instanceof a.Surface);b=b.parent);return b},_setFillObject:function(b,c){var d=A.xmlns.svg;this.fillStyle=b;var e=this._getParentSurface().defNode,g=this.rawNode.getAttribute("fill");if(g=A.getRef(g))if(g.tagName.toLowerCase()!=c.toLowerCase()){var h=g.id;g.parentNode.removeChild(g);g=m(d,c);g.setAttribute("id",h);e.appendChild(g)}else for(;g.childNodes.length;)g.removeChild(g.lastChild);else g=m(d,c),g.setAttribute("id",a._base._getUniqueId()),
e.appendChild(g);if("pattern"==c)g.setAttribute("patternUnits","userSpaceOnUse"),d=m(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",b.width.toFixed(8)),d.setAttribute("height",b.height.toFixed(8)),d.setAttributeNS?d.setAttributeNS(A.xmlns.xlink,"xlink:href",b.src):d.setAttribute("xlink:href",b.src),g.appendChild(d);else{g.setAttribute("gradientUnits","userSpaceOnUse");for(e=0;e<b.colors.length;++e){var h=b.colors[e],n=m(d,"stop"),q=h.color=a.normalizeColor(h.color);
n.setAttribute("offset",h.offset.toFixed(8));n.setAttribute("stop-color",q.toCss());n.setAttribute("stop-opacity",q.a);g.appendChild(n)}}this.rawNode.setAttribute("fill","url(#"+g.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return g},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+
","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(b){this.shape=a.makeParameters(this.shape,
b);for(var c in this.shape)"type"!=c&&this.rawNode.setAttribute(c,this.shape[c]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;"polyline"===b&&(a=e.clone(a),
a.points=a.points.join(","));var c,d=h.get(this.rawNode,"clip-path");d&&(c=n.byId(d.match(/gfx_clip[\d]+/)[0]))&&c.removeChild(c.childNodes[0]);a?(c?(b=m(A.xmlns.svg,b),c.appendChild(b)):(d="gfx_clip"+ ++y,this.rawNode.setAttribute("clip-path","url(#"+d+")"),c=m(A.xmlns.svg,"clipPath"),b=m(A.xmlns.svg,b),c.appendChild(b),this.rawNode.parentNode.insertBefore(c,this.rawNode),h.set(c,"id",d)),h.set(b,a)):(this.rawNode.removeAttribute("clip-path"),c&&c.parentNode.removeChild(c));return this},_removeClipNode:function(){var a,
b=h.get(this.rawNode,"clip-path");b&&(a=n.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});A.Group=u("dojox.gfx.svg.Group",A.Shape,{constructor:function(){d.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);A.Shape.prototype.destroy.apply(this,arguments)}});A.Group.nodeType="g";A.Rect=u("dojox.gfx.svg.Rect",[A.Shape,d.Rect],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=
null;for(var c in this.shape)"type"!=c&&"r"!=c&&this.rawNode.setAttribute(c,this.shape[c]);null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});A.Rect.nodeType="rect";A.Ellipse=u("dojox.gfx.svg.Ellipse",[A.Shape,d.Ellipse],{});A.Ellipse.nodeType="ellipse";A.Circle=u("dojox.gfx.svg.Circle",[A.Shape,d.Circle],{});A.Circle.nodeType="circle";A.Line=u("dojox.gfx.svg.Line",[A.Shape,d.Line],{});A.Line.nodeType="line";A.Polyline=u("dojox.gfx.svg.Polyline",
[A.Shape,d.Polyline],{setShape:function(b,c){b&&b instanceof Array?(this.shape=a.makeParameters(this.shape,{points:b}),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=a.makeParameters(this.shape,b);this.bbox=null;this._normalizePoints();for(var d=[],e=this.shape.points,g=0;g<e.length;++g)d.push(e[g].x.toFixed(8),e[g].y.toFixed(8));this.rawNode.setAttribute("points",d.join(" "));return this}});A.Polyline.nodeType="polyline";A.Image=u("dojox.gfx.svg.Image",[A.Shape,
d.Image],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;for(var c in this.shape)"type"!=c&&"src"!=c&&b.setAttribute(c,this.shape[c]);b.setAttribute("preserveAspectRatio","none");b.setAttributeNS?b.setAttributeNS(A.xmlns.xlink,"xlink:href",this.shape.src):b.setAttribute("xlink:href",this.shape.src);b.__gfxObject__=this;return this}});A.Image.nodeType="image";A.Text=u("dojox.gfx.svg.Text",[A.Shape,d.Text],{setShape:function(b){this.shape=a.makeParameters(this.shape,
b);this.bbox=null;b=this.rawNode;var c=this.shape;b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("text-anchor",c.align);b.setAttribute("text-decoration",c.decoration);b.setAttribute("rotate",c.rotated?90:0);b.setAttribute("kerning",c.kerning?"auto":0);b.setAttribute("text-rendering",F);b.firstChild?b.firstChild.nodeValue=c.text:b.appendChild(w(c.text));return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;
b.appendChild(a);if(""!=d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(b){a={x:0,y:0,width:0,height:0}}return a}});A.Text.nodeType="text";A.Path=u("dojox.gfx.svg.Path",[A.Shape,g.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);
this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});A.Path.nodeType="path";A.TextPath=u("dojox.gfx.svg.TextPath",[A.Shape,g.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var b=this.rawNode;if(!b.firstChild){var c=m(A.xmlns.svg,"textPath"),d=w("");c.appendChild(d);
b.appendChild(c)}c=(c=b.firstChild.getAttributeNS(A.xmlns.xlink,"href"))&&A.getRef(c);if(!c&&(d=this._getParentSurface())){var d=d.defNode,c=m(A.xmlns.svg,"path"),e=a._base._getUniqueId();c.setAttribute("id",e);d.appendChild(c);b.firstChild.setAttributeNS?b.firstChild.setAttributeNS(A.xmlns.xlink,"xlink:href","#"+e):b.firstChild.setAttribute("xlink:href","#"+e)}c&&c.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=m(A.xmlns.svg,"textPath"),c=w("");
b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline","middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",
b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});A.TextPath.nodeType="text";var I=534<function(){var a=/WebKit\/(\d*)/.exec(x);return a?a[1]:0}();A.Surface=u("dojox.gfx.svg.Surface",d.Surface,{constructor:function(){d.Container._init.call(this)},destroy:function(){d.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",
b);I&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this},getDimensions:function(){return this.rawNode?{width:a.normalizedLength(this.rawNode.getAttribute("width")),height:a.normalizedLength(this.rawNode.getAttribute("height"))}:null}});A.createSurface=function(b,c,d){var e=new A.Surface;e.rawNode=m(A.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");c&&e.rawNode.setAttribute("width",c);d&&e.rawNode.setAttribute("height",d);c=m(A.xmlns.svg,"defs");e.rawNode.appendChild(c);
e.defNode=c;e._parent=n.byId(b);e._parent.appendChild(e.rawNode);a._base._fixMsTouchAction(e);return e};t={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var L=d.Container;u=A.Container={openBatch:function(){if(!this._batch){var a;a=A.useSvgWeb?b.doc.createDocumentFragment(!0):
b.doc.createDocumentFragment();this.fragment=a}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),L.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&
this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),L.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return L.clear.apply(this,arguments)},getBoundingBox:L.getBoundingBox,_moveChildToFront:L._moveChildToFront,_moveChildToBack:L._moveChildToBack};
g=A.Creator={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=m(A.xmlns.svg,a.nodeType);c.setRawNode(d);c.setShape(b);this.add(c);return c}};e.extend(A.Text,t);e.extend(A.TextPath,t);e.extend(A.Group,u);e.extend(A.Group,d.Creator);e.extend(A.Group,g);e.extend(A.Surface,u);e.extend(A.Surface,d.Creator);e.extend(A.Surface,g);A.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=C&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);return!0};A.useSvgWeb&&
(A.createSurface=function(b,c,d){var e=new A.Surface;if(!c||!d){var g=s.position(b);c=c||g.w;d=d||g.h}b=n.byId(b);var g=b.id?b.id+"_svgweb":a._base._getUniqueId(),h=m(A.xmlns.svg,"svg");h.id=g;h.setAttribute("width",c);h.setAttribute("height",d);svgweb.appendChild(h,b);h.addEventListener("SVGLoad",function(){e.rawNode=this;e.isLoaded=!0;var a=m(A.xmlns.svg,"defs");e.rawNode.appendChild(a);e.defNode=a;if(e.onLoad)e.onLoad(e)},!1);e.isLoaded=!1;return e},A.Surface.extend({destroy:function(){var a=this.rawNode;
svgweb.removeChild(a,a.parentNode)}}),t={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==arguments.length?b:e.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},e.extend(A.Shape,t),e.extend(A.Surface,t));return A})},"url:esri/dijit/templates/HomeButton.html":'\x3cdiv class\x3d"${theme}" role\x3d"presentation"\x3e\r\n    \x3cdiv class\x3d"${_css.container}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_homeNode" title\x3d"${_i18n.widgets.homeButton.home.title}" role\x3d"button" class\x3d"${_css.home}"\x3e\x3cspan\x3e${_i18n.widgets.homeButton.home.button}\x3c/span\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/templates/LocateButton.html":'\x3cdiv class\x3d"${theme}" role\x3d"presentation"\x3e\r\n    \x3cdiv class\x3d"${_css.container}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_locateNode" role\x3d"button" class\x3d"${_css.locate}"\x3e\x3cspan\x3e${_i18n.widgets.locateButton.locate.button}\x3c/span\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:esri/dijit/templates/OverviewMap.html":'\x3cdiv class\x3d"esriOverviewMap"\x3e\r\n  \x3cdiv class\x3d"ovwContainer" dojoattachpoint\x3d"_body" style\x3d"width: ${width}px; height: ${height}px;"\x3e\r\n    \x3cdiv id\x3d"${id}-map" style\x3d"width: 100%; height: 100%;"\x3e\r\n      \x3cdiv class\x3d"ovwHighlight" dojoattachpoint\x3d"_focusDiv" title\x3d"${NLS_drag}" style\x3d"border: 1px solid ${color}; background-color: ${color};"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"ovwButton ovwController" title\x3d"${NLS_show}" dojoattachpoint\x3d"_controllerDiv" dojoattachevent\x3d"onclick: _visibilityHandler"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"ovwButton ovwMaximizer" title\x3d"${NLS_maximize}" dojoattachpoint\x3d"_maximizerDiv" dojoattachevent\x3d"onclick: _maximizeHandler"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"*now":function(e){e(['dojo/i18n!*preload*dojo/nls/dojo*["ar","cs","da","de","el","en","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])}}});(function(){var e=this.require;e({cache:{}});!e.async&&e(["dojo"]);e.boot&&e.apply(null,e.boot)})();