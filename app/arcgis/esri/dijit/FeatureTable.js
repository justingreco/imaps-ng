//>>built
require({cache:{"url:esri/dijit/FeatureTable/templates/FeatureTable.html":'\x3cdiv class\x3d"${baseClass}" \x3e\r\n  \x3cdiv id\x3d "${bcNodeId}" class\x3d"esriFeatureTable_bc" data-dojo-attach-point\x3d "_bcNode" data-dojo-type\x3d"dijit.layout.BorderContainer" gutters\x3d"false"\x3e\r\n    \x3cdiv id\x3d "${gridMenuId}" class\x3d"esriFeatureTable_cp esriFeatureTable_menu" data-dojo-attach-point\x3d "_gridMenu" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"region: \'top\'"\x3e\r\n      \x3cdiv class\x3d"esriFeatureTable_menuItem gridLoadingIndicator" data-dojo-attach-point\x3d "_gridLoadingIndicatorNode" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFeatureTable_menuItem gridTitle" data-dojo-attach-point\x3d "_gridHeaderNode"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFeatureTable_menuItem gridCloser"\x3e\x3ca class\x3d "esriFeatureTable_closer toggleOpened" data-dojo-attach-point\x3d"tableCloseButton" href\x3d"JavaScript:void(0);" title\x3d"Hide Table"\x3e\x3c/a\x3e\x3c/div\x3e   \r\n      \x3cdiv data-dojo-attach-point\x3d "_optionNode" class\x3d"esriFeatureTable_menuItem esriFeatureTable_menuOptions"\x3e\r\n        \x3cdiv id\x3d"${optionNodeId}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d "${gridContainerId}" class\x3d"esriFeatureTable_cp" data-dojo-attach-point\x3d "_gridContainer" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"region: \'center\'"\x3e\r\n         \x3cdiv id\x3d"${gridId}" class\x3d"esriFeatureTable_Table" data-dojo-attach-point\x3d"_gridNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n'}});
define("esri/dijit/FeatureTable","dojo/aspect dojo/on dojo/Evented dojo/has dojo/number dojo/string dojo/dom-construct dojo/dom-class dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/text!../dijit/FeatureTable/templates/FeatureTable.html dojo/i18n!../nls/jsapi dojo/store/Cache dojo/store/Memory dojo/store/Observable dojo/fx/Toggler dijit/_WidgetBase dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Dialog dijit/Menu dijit/MenuItem dijit/form/DropDownButton dijit/form/TimeTextBox dijit/form/DateTextBox dijit/form/Button dgrid/OnDemandGrid dgrid/Selection dgrid/Keyboard dgrid/editor dgrid/extensions/DijitRegistry dgrid/extensions/ColumnHider dgrid/extensions/ColumnResizer ../kernel ../lang ../config ../Color ../geometry/Extent ../layers/FeatureLayer ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/CartographicLineSymbol ../tasks/query ../tasks/StatisticDefinition ../tasks/QueryTask ../dijit/FeatureLayerQueryStore dijit/layout/BorderContainer dijit/layout/ContentPane dojo/query!css2 dojo/domReady!".split(" "),
function(C,l,v,K,n,L,g,w,D,d,k,M,m,N,x,E,O,P,Q,R,S,T,F,y,U,V,G,W,X,Y,Z,$,aa,ba,ca,da,p,z,q,H,ea,I,s,J,A,t,fa,ga,u,ha,ia){v=D([P,Q,R,S,v],{baseClass:"esriFeatureTable",loaded:!1,templateString:M,widgetsInTemplate:!0,i18n:m,map:null,idProperty:"id",columns:[],dataStore:null,grid:null,gridMenu:null,featureLayer:null,dateOptions:{timeEnabled:!1,timePattern:"HH:mm:ss",datePattern:"YYYY-MM-DD"},hiddenFields:[],outFields:["*"],readOnly:!1,noDataMessage:"No Data",allowSelectAll:!1,cellNavigation:!1,selectionMode:"extended",
enableLayerClick:!1,enableLayerSelection:!1,_isFeatureCollection:!1,_qStore:null,_mStore:null,_featureSet:null,_orderByFields:null,_layerInfo:{},_editorTrackingInfos:{},_gridHeaderText:"${gridTitle} (${featureCount} features, ${featureSelectedCount} selected)",_featureCount:0,_featureSelectedCount:0,_currentSelectedRows:[],_currentSelectedRowIds:[],_filteredRowIds:[],_gridQuery:!1,_batchCount:0,_defaultBatchCount:25,_defaultFeatureCount:2E3,_toggler:null,constructor:function(a,b){b&&(this.set({gridId:b+
"_grid",bcNodeId:b+"_bcNode",gridMenuId:b+"_gridMenu",gridContainerId:b+"_gridContainer",optionNodeId:b+"_optionNode"}),this.StandardGrid=D([aa,X,Y,Z,ba,ca]))},postCreate:function(){this.inherited(arguments);this._listenerHandles=[]},startup:function(){this.inherited(arguments);this.featureLayer&&this.featureLayer.loadError?this._showLoadError(this.featureLayer.loadError.message):this.domNode&&this.featureLayer.loaded?this._init():(l(this.featureLayer,"load",d.hitch(this,function(){this._init()})),
l(this.featureLayer,"error",d.hitch(this,function(){this.featureLayer.loadError?this._showLoadError(this.featureLayer.loadError.message):this._showLoadError("")})))},destroy:function(){this.inherited(arguments);k.forEach(this._listenerHandles,function(a){a.remove()});this.map&&(this.map.infoWindow.clearFeatures(),this.map.infoWindow.hide());this.grid&&(this.grid._destroyColumns(),this.grid.destroy());this.gridMenu&&this.gridMenu.destroy();this.statisticsDialog&&this.statisticsDialog.destroy();this.columnMenu&&
this.columnMenu.destroyRecursive();delete this.columns;delete this._layerInfo},resize:function(){this._resize()},selectRows:function(a){var b=[],f=[],c;this.grid.clearSelection();a[0]&&"esri.Graphic"===a[0].declaredClass&&(k.forEach(a,d.hitch(this,function(a){f.push(a.attributes[this.idProperty])})),a=f);1===a.length?(c=a[0],a=this.dataStore.get(a),a=this.dataStore.data.indexOf(a),this.grid.select(c),this._updateGridSelection(),this._updateGridHeaderText(),this.grid.scrollTo({x:0,y:this.grid.rowHeight*
a}),this.grid.row(c).element&&this.grid.row(c).element.scrollIntoView()):(k.forEach(a,d.hitch(this,function(a){b.push(this.dataStore.get(a))})),this._updateGridSelection(),this._updateGridHeaderText())},filterSelectedRecords:function(a){a?this._showSelectedRecords():(this.grid.set("query",{}),this.set("_gridQuery",!1))},clearSelection:function(){this._clearSelection()},_init:function(){this._userIds={};var a=this.featureLayer.id;this.featureLayer.credential&&(this._userIds[a]=this.featureLayer.credential.userId);
this._layerInfo.userId&&(this._userIds[a]=this._layerInfo.userId);(this.featureLayer._collection&&!0===this.featureLayer._collection||null===this.featureLayer.url&&null===this.featureLayer._url)&&this.set("_isFeatureCollection",!0);this._layerInfo.isEditable=this.featureLayer.isEditable()?p.isDefined(this._layerInfo.isEditable)?this._layerInfo.isEditable:!0:!1;this._layerInfo.typeIdField=this.featureLayer.typeIdField;this._layerInfo.types=this.featureLayer.types;this._layerInfo._fieldInfo=[];this._getEditingInfo();
this.set("idProperty",this.featureLayer.objectIdField);"*"!==this.outFields[0]&&-1==this.outFields.indexOf(this.idProperty)&&this.outFields.push(this.idProperty);this.grid=this._generateGrid();this.grid.startup();this.grid.resize();this._listenerHandles.push(this._gridSelectCallback(),this._gridDeselectCallback(),this._gridRefreshCallback());this._createTableMenu();this._toggler=this._createTableToggle();this._listenerHandles.push(this._tableToggleClickCallback(),this._columnClickCallback(),this._layerClickCallback(),
this._appyEditsCallback());this.set("loaded",!0);this.emit("load",this.loaded);this.grid.set("noDataMessage","");this._gridHeaderNode.innerHTML=m.widgets.FeatureTable.loadingData;this._resize();this._toggleLoadingIndicator(!0);this._createStoreFromDataQuery();this._setSelectionSymbol()},_getEditingInfo:function(){var a=[];this.featureLayer.editFieldsInfo&&(this.featureLayer.editFieldsInfo.creatorField&&a.push(this.featureLayer.editFieldsInfo.creatorField),this.featureLayer.editFieldsInfo.creationDateField&&
a.push(this.featureLayer.editFieldsInfo.creationDateField),this.featureLayer.editFieldsInfo.editorField&&a.push(this.featureLayer.editFieldsInfo.editorField),this.featureLayer.editFieldsInfo.editDateField&&a.push(this.featureLayer.editFieldsInfo.editDateField));this._editorTrackingInfos[this.featureLayer.id]=a},_generateGrid:function(){this.dataStore=new E(new x({data:null,idProperty:this.idProperty}));var a=new this.StandardGrid({store:this.dataStore,columns:this.columns,noDataMessage:this.noDataMessage,
selectionMode:this.selectionMode,allowSelectAll:this.allowSelectAll,cellNavigation:this.cellNavigation},this.gridId);C.before(a,"removeRow",d.hitch(this,function(b){k.forEach(this.columns.length,d.hitch(this,function(f,c){var e=a.cell(b,c).element;(e=(e.contents||e).widget)&&e.destroyRecursive()}))}));C.after(a,"renderHeader",d.hitch(this,function(){a._sortListener.remove()}));return a},_createStoreFromDataQuery:function(){this.dataStore&&(this._toggleLoadingIndicator(!0),this._gridHeaderNode.innerHTML=
m.widgets.FeatureTable.loadingData,this.grid.set({store:null,noDataMessage:""}),this.set("dataStore",null));this._getFeatureCount().then(d.hitch(this,this._queryFeatureLayer))},_getFeatureCount:function(){var a=new t;a.returnGeometry=!1;a.returnIdsOnly=!1;a.where="1\x3d1";z.defaults.io.timeout=1E4;return this.featureLayer.queryCount(a).then(d.hitch(this,function(a){z.defaults.io.timeout=6E4;return this._featureCount=a}),d.hitch(this,function(){z.defaults.io.timeout=6E4;this.set("_featureCount",this._isFeatureCollection?
this.featureLayer.graphics.length:this._defaultFeatureCount);return this._featureCount}))},_queryFeatureLayer:function(){if(this._isFeatureCollection)this._queryFeatureCollection();else{var a=new t;a.where="1\x3d1";a.outFields=this.outFields;a.returnGeometry=!1;this.featureLayer.queryFeatures(a,d.hitch(this,function(a){var f=p.isDefined(this.featureLayer.maxRecordCount)?this.featureLayer.maxRecordCount:1E3;this._batchCount=Math.min(f,this._defaultBatchCount);this._toggleLoadingIndicator(!1);this.grid.set("noDataMessage",
this.noDataMessage);this.set("_featureSet",a);this._generateColumnsFromFields(a.fields);this.grid.set("columns",this.columns);this._updateGridHeaderText();a.exceededTransferLimit?this._generateCacheStore():this._generateMemoryStore(a.features);this._layerInfo._features=a.features;this.grid.set("store",this.dataStore)}),d.hitch(this,function(a){this._showLoadError(a.message)}))}},_queryFeatureCollection:function(){this._toggleLoadingIndicator(!1);this.grid.set("noDataMessage",this.noDataMessage);this.set("_featureSet",
this.featureLayer.graphics);this._generateColumnsFromFields(this.featureLayer.fields);this.grid.set("columns",this.columns);this._updateGridHeaderText();this._generateMemoryStore(this.featureLayer.graphics);this._layerInfo._features=this.featureLayer.graphics;this.grid.set("store",this.dataStore)},_generateCacheStore:function(){var a,b,f;a=new u({layer:this.featureLayer,objectIds:null,totalCount:this._featureCount,batchCount:this._batchCount,where:"1\x3d1",orderByFields:this._orderByFields});b=new x;
f=new N(a,b,{});this.set({_qStore:a,_mStore:b,dataStore:f})},_generateMemoryStore:function(a){var b=[];k.forEach(a,d.hitch(this,function(a){b.push(a.attributes)}));this.dataStore=new E(new x({data:b,idProperty:this.idProperty}))},_generateColumnsFromFields:function(a){var b=[];k.forEach(a,d.hitch(this,function(a,c){var e,g,r,h,B,m,l;e=this._findFirst(this.featureLayer.fields,"name",a.name);g=this._layerInfo.typeIdField&&a.name===this._layerInfo.typeIdField||!1;r=e.domain||!1;h=-1!==k.indexOf(this.hiddenFields,
a.name)||"esriFieldTypeOID"===a.type||"esriFieldTypeGlobalID"===a.type||-1!==k.indexOf(this._editorTrackingInfos[this.featureLayer.id],a.name);B=this._layerInfo.isEditable&&this._layerInfo.isEditable&&a.name!==this.idProperty&&!1===this.readOnly;m=e.nullable||!1;l="esriFieldTypeDate"===a.type;this._layerInfo._fieldInfo[c]={idx:c,name:a.name,type:a.type,isDomainField:r,isTypeIdField:g,isHidden:h,isEditable:B,isNullable:m,isDate:l};l?B?b.push(this._generateDateTimeEditorColumn(a,this._layerInfo._fieldInfo[c])):
b.push(this._generateDateTimeColumn(a,this._layerInfo._fieldInfo[c])):r?b.push({label:a.alias,field:a.name,type:a.type,hidden:h,get:d.hitch(this,function(b){b=this._findFirst(e.domain.codedValues,"code",b[a.name]);return null!==b?b.name:null})}):g?b.push({label:a.alias,field:a.name,type:a.type,hidden:h,get:d.hitch(this,function(b){b=this._findFirst(this._layerInfo.types,"id",b[a.name]);return null!==b?b.name:null})}):b.push({label:a.alias,field:a.name,type:a.type,hidden:h,get:d.hitch(this,function(b){var c,
e=this._findFirst(this._layerInfo.types,"id",b[this._layerInfo.typeIdField]);e&&(e.domains&&e.domains[a.name]&&e.domains[a.name].codedValues)&&(c=this._findFirst(e.domains[a.name].codedValues,"code",b[a.name]));return c?c.name:b[a.name]})})}));this.set("columns",b)},_generateDateTimeColumn:function(a,b){return{label:a.alias,field:a.name,type:a.type,hidden:b.isHidden,get:d.hitch(this,function(b){b=""===b[a.name]?null:new Date(b[a.name]);this.dateOptions.timeEnabled||(b=b.toDateString());return b})}},
_generateDateTimeEditorColumn:function(a,b){return this.dateOptions.timeEnabled?{label:a.alias,field:a.name,type:a.type,hidden:b.isHidden,get:d.hitch(this,function(b){return""===b[a.name]?null:new Date(b[a.name])}),renderCell:d.hitch(this,function(a,b,e,d){(new G({value:b,datePattern:this.dateOptions.datePattern})).placeAt(e);(new V({value:b,timePattern:this.dateOptions.timePattern})).placeAt(e)})}:$({label:a.alias,field:a.name,type:a.type,hidden:b.isHidden,get:d.hitch(this,function(b){return""===
b[a.name]?null:new Date(b[a.name])})},G)},_selectFeaturesFromIds:function(a){var b=new t;b.returnGeometry=this.map?!0:!1;b.objectIds=a?a:this._currentSelectedRowIds;return this.featureLayer.selectFeatures(b,ea.SELECTION_NEW)},_updateGridSelection:function(){var a=this.grid.selection,b=[],f=[],c;for(c in a)f.push(parseInt(c)),b.push(this.grid.row(parseInt(c)).data);this.set({_currentSelectedRows:b,_currentSelectedRowIds:f,_featureSelectedCount:f.length})},_appyEditsCallback:function(){return l(this.featureLayer,
"edits-complete",d.hitch(this,function(a){this._createStoreFromDataQuery()}))},_layerClickCallback:function(){return l(this.featureLayer,"click",d.hitch(this,function(a){if(this.enableLayerClick&&a.graphic&&a.graphic.attributes&&a.graphic.attributes[this.idProperty]){this.grid.clearSelection();this.featureLayer.clearSelection();var b=a.graphic.attributes[this.idProperty];this._selectFeaturesFromIds([b]).then(d.hitch(this,function(a){if(a.length){if(this.map){var c=this._calcGraphicsExtent(a).getCenter();
this.map.centerAt(c).then(function(){k.forEach(a,function(a){a.getDojoShape()&&a.getDojoShape().moveToFront()})})}var c=this.dataStore.get(b),e=this.dataStore.data.indexOf(c);"undefined"==c||-1==e||(this.grid.select(b),this._updateGridSelection(),this._updateGridHeaderText(),this.grid.scrollTo({x:0,y:this.grid.rowHeight*e}),this.grid.row(b).element&&this.grid.row(b).element.scrollIntoView())}}))}}))},_gridRefreshCallback:function(){return l(this.grid,"dgrid-refresh-complete",d.hitch(this,function(a){this.grid.columns[0]&&
this.emit("dgrid-refresh-complete",a)}))},_gridSelectCallback:function(){return l(this.grid,"dgrid-select",d.hitch(this,function(a){this.emit("dgrid-select",a.rows);this._updateGridSelection();this._updateGridHeaderText();this.map&&this.enableLayerSelection&&(this.map.infoWindow.clearFeatures(),this.map.infoWindow.hide(),this._selectFeaturesFromIds().then(d.hitch(this,function(a){var f=this._calcGraphicsExtent(a).getCenter();this.map.centerAt(f).then(function(){k.forEach(a,function(a){a.getDojoShape()&&
a.getDojoShape().moveToFront()})})})))}))},_gridDeselectCallback:function(){return l(this.grid,"dgrid-deselect",d.hitch(this,function(a){this.emit("dgrid-deselect",a.rows);this._updateGridSelection();this._updateGridHeaderText();this._selectFeaturesFromIds()}))},_columnClickCallback:function(){return l(this.grid,".dgrid-header .dgrid-cell:click",d.hitch(this,this._showColumnMenu))},_tableToggleClickCallback:function(){return l(this.tableCloseButton,"click",d.hitch(this,function(){this._toggleOpened?
(w.remove(this.tableCloseButton,"toggleOpened"),w.add(this.tableCloseButton,"toggleClosed"),this._toggler.hide(),this._gridContainer.domNode.style.display="none"):(w.remove(this.tableCloseButton,"toggleClosed"),w.add(this.tableCloseButton,"toggleOpened"),this._toggler.show(),this._gridContainer.domNode.style.display="block");this._resize();this._toggleOpened=!this._toggleOpened}))},_resize:function(){this._bcNode.resize();this._gridMenu.resize();this._gridContainer.resize();this.grid&&this.grid.resize()},
_updateGridHeaderText:function(){this._gridHeaderNode.innerHTML=L.substitute(this._gridHeaderText,{gridTitle:this.featureLayer.name||m.widgets.FeatureTable.untitled,featureCount:this._featureCount,featureSelectedCount:this._featureSelectedCount})},_createTableToggle:function(){var a=new O({node:this.gridContainerId});this._toggleOpened=!0;return a},_toggleLoadingIndicator:function(a){this._gridLoadingIndicatorNode.style.display=a?"block":"none"},_showLoadError:function(){this._toggleLoadingIndicator(!1);
this._gridHeaderNode.innerHTML=m.widgets.FeatureTable.dataError},_showInfoWindow:function(){},_hideInfoWindow:function(){},_showColumnMenu:function(a){var b,f,c,e,g,r;this.columnMenu&&(this.set("_oldColumnMenu",this.columnMenu),this.set("columnMenu",null));this.columnMenu=new F({});b=this.grid.cell(a);f=b.column.id;c=this.columns[f].type;e=[m.widgets.FeatureTable.sortAsc,m.widgets.FeatureTable.sortDesc];g=["iconSortAscending","iconSortDescending"];r=[this._sortAscending,this._sortDescending];k.forEach(e,
d.hitch(this,function(a,b){var c=new y({label:a,iconClass:g[b],baseClass:"esriFeatureTable_menuItem",onClick:d.hitch(this,r[b],f)});this.columnMenu.addChild(c)}));if(this.featureLayer.supportsStatistics&&(this.featureLayer.fields[f]&&"object"!==typeof this.featureLayer.fields[f].domain)&&("esriFieldTypeDouble"===c||"esriFieldTypeSingle"===c||"esriFieldTypeInteger"===c||"esriFieldTypeSmallInteger"===c))c=new y({label:m.widgets.FeatureTable.statistics,iconClass:"iconTableStatistics",baseClass:"esriFeatureTable_menuItem",
onClick:d.hitch(this,this._getColumnStats,f)}),this.columnMenu.addChild(c);this.columnMenu.startup();this.columnMenu._openMyself({target:a.target,delegatedTarget:b,iframe:null,coords:{x:a.pageX,y:a.pageY}});l(this.columnMenu,"close",d.hitch(this,function(){this._oldColumnMenu&&(this._oldColumnMenu.destroyRecursive(),this._oldColumnMenu=null)}))},_sortAscending:function(a,b){this.dataStore instanceof u&&(this.set("_orderByFields",[this.columns[a].field+" ASC"]),this._createStoreFromDataQuery());this.grid.set("sort",
[{attribute:this.columns[a].field,ascending:!0}])},_sortDescending:function(a,b){this.dataStore instanceof u&&(this.set("_orderByFields",[this.columns[a].field+" DESC"]),this._createStoreFromDataQuery());this.grid.set("sort",[{attribute:this.columns[a].field,descending:!0}])},_getColumnStats:function(a,b){var f=this.columns[a].field,c=[],e,g;e=new t;e.outFields=[f];e.outStatistics=[];e.where="1\x3d1";g="countField sumField minField maxField avgField stddevField".split(" ");k.forEach("count sum min max avg stddev".split(" "),
d.hitch(this,function(a,b){var c=new fa;c.statisticType=a;c.onStatisticField=f;c.outStatisticFieldName=g[b];c.displayFieldName=f;e.outStatistics.push(c)}));0<this._filteredRowIds.length&&(c=this._filteredRowIds);e.where&&0<c.length&&(e.where="("+e.where+") AND ("+this.idProperty+" IN ("+c.toString()+"))");(new ga(this.featureLayer.url)).execute(e).then(d.hitch(this,function(a){a.features&&a.features.length&&this._showStatisticsDialog(a,f)}),function(a){})},_showStatisticsDialog:function(a,b){var f=
a.features[0].attributes,c={},e,d,k,h;this.statisticsDialog&&this.statisticsDialog.destroy();e={pattern:"#,###,###,##0.########"};d="Number of Values;Sum of Values;Minimum;Maximum;Average;Standard Deviation".split(";");k=g.create("div",{className:"esriAGOTableStatistics",innerHTML:""});g.create("div",{className:"header",innerHTML:"Field: "+b},k);g.create("div",{className:"hzLine",innerHTML:""},k);h=g.create("table",{className:"attrTable",innerHTML:"",style:{cellpadding:0,cellspacing:0}},k);for(var l in f)f.hasOwnProperty(l)&&
(c[l.toLowerCase()]=f[l]);f=g.create("tbody",{},h);h=g.create("tr",{valign:"top"},f);g.create("td",{"class":"attrName",innerHTML:d[0]},h);g.create("td",{"class":"attrValue",innerHTML:p.isDefined(c.countfield)?n.format(c.countfield,e):""},h);h=g.create("tr",{valign:"top"},f);g.create("td",{"class":"attrName",innerHTML:d[1]},h);g.create("td",{"class":"attrValue",innerHTML:p.isDefined(c.sumfield)?n.format(c.sumfield,e):""},h);h=g.create("tr",{valign:"top"},f);g.create("td",{"class":"attrName",innerHTML:d[2]},
h);g.create("td",{"class":"attrValue",innerHTML:p.isDefined(c.minfield)?n.format(c.minfield,e):""},h);h=g.create("tr",{valign:"top"},f);g.create("td",{"class":"attrName",innerHTML:d[3]},h);g.create("td",{"class":"attrValue",innerHTML:p.isDefined(c.maxfield)?n.format(c.maxfield,e):""},h);h=g.create("tr",{valign:"top"},f);g.create("td",{"class":"attrName",innerHTML:d[4]},h);g.create("td",{"class":"attrValue",innerHTML:p.isDefined(c.avgfield)?n.format(n.round(c.avgfield,this._roundPos(c.avgfield)),e):
""},h);h=g.create("tr",{valign:"top"},f);g.create("td",{"class":"attrName",innerHTML:d[5]},h);g.create("td",{"class":"attrValue",innerHTML:p.isDefined(c.stddevfield)?n.format(n.round(c.stddevfield,this._roundPos(c.stddevfield)),e):""},h);g.create("div",{className:"break",innerHTML:""},k);this.statisticsDialog=new T({title:m.widgets.FeatureTable.statistics,content:k,baseClass:"esriFeatureTable_dialog"});var c=g.create("button",{type:"button"},this.statisticsDialog.containerNode),q=this;new W({label:m.widgets.FeatureTable.close,
baseClass:"primary dijitButton",onClick:function(){var a=q.statisticsDialog;a.hide().then(function(){a.destroyRecursive()})}},c);this.statisticsDialog.show()},_createTableMenu:function(){this.gridMenu=new F({});var a=[m.widgets.FeatureTable.defaultSort,m.widgets.FeatureTable.showSelected,m.widgets.FeatureTable.clearSelection,m.widgets.FeatureTable.toggleColumns],b=[this._defaultSortOrder,this._showSelectedRecords,this._clearSelection,this._showHideColumns];this.map&&this.enableLayerClick&&(a.push("Center on Selection"),
b.push(this._centerOnSelection));this._externalMenuFunctions&&k.forEach(this._externalMenuFunctions,d.hitch(this,function(f){a.push(f.label);b.push(f.functionReference)}));k.forEach(a,d.hitch(this,function(a,c){var e=new y({label:a,baseClass:"esriFeatureTable_menuItem",onClick:d.hitch(this,b[c])});this.gridMenu.addChild(e)}));new U({label:m.widgets.geocodeMatch.match.tableOptionsLabel,dropDown:this.gridMenu},this.optionNodeId);this.gridMenu.startup()},_defaultSortOrder:function(){this.dataStore instanceof
u&&(this.set("_orderByFields",null),this._createStoreFromDataQuery());this.grid.set("sort",[{attribute:this.idProperty,ascending:!0}])},_filterRows:function(){},_showSelectedRecords:function(){var a=this._filteredRowIds=this._currentSelectedRowIds;a&&0<a.length&&!(this.dataStore instanceof u)&&(this.grid.set("query",d.hitch(this,function(b,d,c){return~a.indexOf(b[this.idProperty])?!0:!1})),this._gridQuery=!0)},_centerOnSelection:function(){var a=this._currentSelectedRowIds,b=new t;b.objectIds=a;b.outFields=
["*"];0<this._currentSelectedRows.length&&0<this._currentSelectedRowIds.length&&this.featureLayer.queryFeatures(b,d.hitch(this,function(a){this.map.setExtent(this._calcGraphicsExtent(a.features))}))},_clearSelection:function(){this.set("_filteredRowIds",[]);this._gridQuery&&(this.grid.set("query",{}),this.set("_gridQuery",!1));this.grid.clearSelection();this._updateGridSelection();this._updateGridHeaderText();this.featureLayer.clearSelection();this.map&&(this.map.infoWindow.clearFeatures(),this.map.infoWindow.hide())},
_deleteSelectedFeatures:function(){},_showAttachments:function(){},_showHideColumns:function(){this.grid._toggleColumnHiderMenu()},_exportToCSV:function(){},_roundPos:function(a){return 1E3<=a?0:10<=a?2:0<=a?4:6},_calcGraphicsExtent:function(a){var b=a[0].geometry,d=b.getExtent(),c,e,g=a.length;null===d&&(d=new H(b.x,b.y,b.x,b.y,b.spatialReference));for(e=1;e<g;e++)b=a[e].geometry,c=b.getExtent(),null===c&&(c=new H(b.x,b.y,b.x,b.y,b.spatialReference)),d=d.union(c);return d},_setSelectionSymbol:function(){var a=
this.featureLayer;if(!a.getSelectionSymbol())if("esriGeometryPoint"===a.geometryType){var b=new I;b.setStyle(I.STYLE_TARGET);b._setDim(16,16,0);b.setOutline(new A(s.STYLE_SOLID,new q([0,255,255]),2,A.CAP_ROUND,A.JOIN_ROUND));b.setColor(new q([0,0,0,0]));a.setSelectionSymbol(b)}else"esriGeometryPolyline"===a.geometryType?a.setSelectionSymbol(s(s.STYLE_SOLID,new q([0,255,255]),2)):a.setSelectionSymbol(new J(J.STYLE_NULL,new s(s.STYLE_SOLID,new q([0,255,255]),2),new q([0,0,0,0])))},_findFirst:function(a,
b,d){return(a=k.filter(a,function(a){return a.hasOwnProperty(b)&&a[b]===d}))&&a.length?a[0]:null}});K("extend-esri")&&d.setObject("dijit.FeatureTable",v,da);return v});